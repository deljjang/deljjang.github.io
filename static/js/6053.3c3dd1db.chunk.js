"use strict";(self.webpackChunksiny_memo=self.webpackChunksiny_memo||[]).push([[6053],{50003:(e,t,n)=>{n.d(t,{_:()=>x});var o=n(19536),l=n(41806),i=n(20463),a=n(61113),s=n(47313),r=n(21587),c=n(68322),d=n(46417);const u={position:"absolute",top:"50%",left:"50%",display:"flex",flexDirection:"column",alignItems:"center",transform:"translate(-50%, -50%)",width:250,maxHeight:"400px",bgcolor:"background.paper",border:"1px solid #000",boxShadow:24,boxSizing:"border-box",p:4},h=e=>(0,d.jsxs)(l.Z,{sx:{my:2,mt:3,display:"flex"},children:[(0,d.jsx)(r.ZP,{type:"submit",variant:"outlined",color:"success",onClick:e.onPost,children:"\ud655\uc778"}),(0,d.jsx)(r.ZP,{type:"button",variant:"outlined",onClick:e.onClose,children:"\ucde8\uc18c"})]}),x=e=>{const[t,n]=s.useState(e.open),[r,x]=s.useState(),m=()=>{n(!1),x(void 0),e.onClose()};s.useEffect((()=>{n(e.open)}),[e.open]);return(0,d.jsx)("div",{children:(0,d.jsx)(i.Z,{open:t,onClose:m,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,d.jsxs)(l.Z,{sx:u,children:[(0,d.jsx)(a.Z,{id:"modal-modal-title",variant:"h6",component:"h2",children:"\uc774\ub3d9\ud560 \uba54\ubaa8\uc7a5 \uc120\ud0dd"}),(0,d.jsx)(o.Z,{}),(0,d.jsx)(l.Z,{sx:{width:"100%",minHeight:110,maxHeight:200,flexGrow:1,minWidth:100,overflow:"hidden"},children:(0,d.jsx)(c.Z,{data:e.data,onDetail:(e,t)=>{x(e)},maxHeight:200})}),(0,d.jsx)(h,{onPost:()=>{void 0!==r?e.onPost(r):alert("\uc774\ub3d9\ud560 \uba54\ubaa8\uc7a5\uc744 \uc120\ud0dd\ud574 \uc8fc\uc138\uc694")},onClose:m})]})})})}},4319:(e,t,n)=>{n.d(t,{x:()=>r});var o=n(9019),l=n(42461),i=n(47313),a=n(21587),s=n(46417);const r=e=>{const t=(0,i.useRef)(null);function n(){e.onSearchDataBtn(t.current.value)}return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(o.ZP,{container:!0,spacing:1,children:[(0,s.jsx)(o.ZP,{item:!0,xs:12,children:(0,s.jsx)(l.Z,{id:"edSearch",type:"edSearch",name:"edSearch",inputRef:t,placeholder:"Enter Search...",fullWidth:!0,sx:{pt:0,pl:2,pr:2,pb:1},onKeyDownCapture:function(e){13===e.which&&n()}})}),(0,s.jsx)(o.ZP,{item:!0,xs:6,children:(0,s.jsx)(a.ZP,{disableElevation:!0,fullWidth:!0,type:"button",variant:"outlined",color:"success",onClick:function(){return e.onNewMemoBtn(),!1},children:"\uc0c8\uae00"})}),(0,s.jsx)(o.ZP,{item:!0,xs:6,children:(0,s.jsx)(a.ZP,{variant:"outlined",fullWidth:!0,onClick:n,children:"\uc870\ud68c"})})]})})}},63856:(e,t,n)=>{n.d(t,{Z:()=>R});var o=n(24631),l=n(41806),i=n(47313),a=(n(94230),n(4833),n(16)),s=n.n(a),r=n(1550),c=n(23306),d=n(24256),u=n(95765),h=n(75627),x=n(46417);const m=e=>{let{name:t,label:n,control:o,defaultValue:l,selectList:i,...a}=e;const s="".concat(t,"-label");return(0,x.jsxs)(r.Z,{...a,children:[(0,x.jsx)(c.Z,{id:s,children:n}),(0,x.jsx)(h.Qr,{render:e=>{let{field:t}=e;return(0,x.jsx)(d.Z,{labelId:s,label:n,...t,children:i.map(((e,t)=>(0,x.jsx)(u.Z,{value:e.value,children:e.text},t)))})},name:t,control:o,defaultValue:l})]})};var p=n(63325),g=n(21587),f=n(63950),b=n(51997),v=n(70501),j=n(47131),y=n(61113),D=n(85281),k=n(19536);const Z=e=>{const[t,n]=(0,i.useState)(e.imgList);return t&&t.length>0&&t.map(((o,i)=>{const{key:a,name:s,url:r,del:c,ext:d}=o;return void 0!==c?"":(0,x.jsxs)("div",{children:[(0,x.jsxs)(l.Z,{display:"flex",flexDirection:"row",alignItems:"center",sx:{justifyContent:"space-between"},children:["mp4"===d&&(0,x.jsx)(y.Z,{style:{width:"50px",textAlign:"center"},variant:"body",children:d}),"jpg"===d&&(0,x.jsx)("img",{src:r,style:{width:"50px"}}),(0,x.jsx)("div",{children:s}),(0,x.jsxs)("div",{style:{display:"flex"},children:[r&&(0,x.jsx)(g.ZP,{variant:"outlined",color:"success",onClick:n=>{n.preventDefault(),(n=>{t.map((t=>{if(t.key===n)return e.onInsert(t),!1}))})(a)},children:"\ucd94\uac00"}),(0,x.jsx)(j.Z,{"aria-label":"delete",onClick:()=>(o=>{console.log("onDeleteClick.key=",o);const l=t.map((e=>(console.log("onDeleteClick.file.key=",e.key),e.key===o&&(e.del="Y"),e)));n(l),console.log("onDeleteClick.tempFiles=",l),e.onClick(l)})(a),children:(0,x.jsx)(b.Z,{sx:{color:"red"}})})]})]}),(0,x.jsx)(k.Z,{})]},i)}))},w=e=>{const{control:t}=e,n=(0,h.qo)({control:t,name:"content"}),[o,a]=(0,i.useState)(!1),[s,r]=(0,i.useState)(!1),[c,d]=(0,i.useState)([]),[u,m]=(0,i.useState)(e.imageList),p=(0,i.useRef)(0);(0,i.useEffect)((()=>{d([])}),[]);const g=(0,i.useCallback)((e=>{var t;e.preventDefault(),null!==(t=e.dataTransfer)&&void 0!==t&&t.files&&a(!0)}),[]),w=(0,i.useCallback)((e=>{e.preventDefault(),a(!1)}),[]),C=(0,i.useCallback)((t=>{let n=[],o=c;n="drop"===t.type?t.dataTransfer.files:t.target.files;for(const e of n){const t=URL.createObjectURL(e);o=[...o,{id:p.current++,object:e,url:t}]}console.log("onChangeFiles.tempFiles=",o),e.onFileUpload(o),d(o)}),[c]),S=(0,i.useCallback)((t=>{m(t),e.onDelete(t)}),[]),I=(0,i.useCallback)((t=>{const n=c.filter((e=>e.id!==t));e.onFileUpload(n),d(n)}),[c]),H=(0,i.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),a(!1),C(e)}),[C]);return(0,x.jsxs)(l.Z,{children:[(0,x.jsxs)(v.Z,{variant:"outlined",onDragOver:g,onDragLeave:w,onDrop:H,cursor:"pointer",sx:{"&:hover":{cursor:"pointer"}},style:{border:o?"1px dashed red":"1px dashed gray",paddingLeft:5,paddingRight:5,marginBottom:10,textAlign:"center",cursor:"pointer",backgroundColor:o?"secondary":"transparent",position:"relative"},children:[(0,x.jsx)("input",{type:"file",id:"fileUpload",style:{display:"none"},multiple:!0,onChange:C}),(0,x.jsx)("label",{htmlFor:"fileUpload",children:(0,x.jsxs)(l.Z,{display:"flex",flexDirection:"row",alignItems:"center",children:[(0,x.jsx)(j.Z,{color:"primary","aria-label":"upload picture",component:"span",children:(0,x.jsx)(f.Z,{style:{fontSize:40}})}),(0,x.jsx)(y.Z,{children:"\ud30c\uc77c \uc5c5\ub85c\ub4dc"})]})}),s&&(0,x.jsx)(D.Z,{size:24,style:{position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)(Z,{imgList:u,onInsert:t=>{let o=n;"jpg"===t.ext?o+="<img src='".concat(t.url,"'/>"):"mp4"===t.ext&&(o+='<video preload="auto" controls="" src=\''.concat(t.url,"'></video>")),e.setContent(o)},onClick:S}),c.length>0&&c.map(((e,t)=>{const{id:n,object:{name:o},url:i}=e;return(0,x.jsxs)("div",{children:[(0,x.jsxs)(l.Z,{display:"flex",flexDirection:"row",alignItems:"center",sx:{justifyContent:"space-between"},children:[(0,x.jsx)("img",{src:i,style:{width:"50px"}}),(0,x.jsx)("div",{children:o}),(0,x.jsx)(j.Z,{"aria-label":"delete",onClick:()=>I(n),children:(0,x.jsx)(b.Z,{sx:{color:"red"}})})]},t),(0,x.jsx)(k.Z,{})]},t)}))]})]})};var C=n(99080),S=n(23834),I=n(94762);const H=e=>{let{onSubmit:t,onCancel:n,isSubmitting:o}=e;return(0,x.jsxs)(l.Z,{sx:{my:2,display:"flex"},children:[(0,x.jsx)(g.ZP,{variant:"outlined",color:"success",disabled:o,onClick:e=>{e.preventDefault(),t(e)},children:"\uc800\uc7a5"}),(0,x.jsx)(g.ZP,{type:"button",variant:"outlined",onClick:n,children:"\ucde8\uc18c"})]})};var L=n(48339),P=n(10658),M=n.n(P);a.Quill.register("modules/imageDrop",S.c),C.Z.configure({languages:["javascript","ruby","python","java","cpp","kotlin","sql"]});const Y={syntax:{highlight:e=>C.Z.highlightAuto(e).value},toolbar:[[{header:"1"},{header:"2"},{header:"3"},{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","video"],["clean"],["code-block"]],imageDrop:!0,clipboard:{matchVisual:!1}},F=["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","video","clean","code-block","code-custom"],R=e=>{const t=(0,i.useRef)(),[n,a]=(0,i.useState)(e.imageList),r=(0,i.useRef)(),c=e.newMode,d=(0,i.useRef)([]),{height:u,width:g}=(0,p.Z)(),f=I.ou.now().setZone("Asia/Seoul").toFormat("yyyy-MM-dd"),b=(I.ou.now().setZone("Asia/Seoul").toFormat("hh:mm"),{edTitle:e.title,edGbn:e.gbn?e.gbn:"",edDate:e.date?e.date:f,content:e.content}),{register:v,handleSubmit:j,trigger:y,reset:D,control:k,setValue:Z,getValues:C,watch:S,setFocus:P,setState:R,formState:{errors:V,isDirty:B,isSubmitting:G,touchedFields:T,submitCount:A}}=(0,h.cI)({mode:"onChange",defaultValues:b});v("edDate",{required:!0,minLength:10}),v("edGbn",{required:!0}),v("edTitle",{required:"\ud574\ub2f9 \ud544\ub4dc\ub294 \ud544\uc218\uc785\ub2c8\ub2e4.",minLength:{value:3,message:"3\uae00\uc790 \uc774\uc0c1 \uc785\ub825\ud574\uc8fc\uc138\uc694."}}),(0,i.useEffect)((()=>{d.current=[],t.current=e.content,r.current=!1}),[]);const U=async t=>{console.log("onPostSubmit.newMode=",c),console.log("onPostSubmit.values=",t),c?e.onNewSubmit(t,d.current):await e.onPostSubmit(t,n,d.current)};const W=S("content");return(0,x.jsx)(l.Z,{sx:{my:2,mb:"50px",width:"100%"},children:(0,x.jsxs)("form",{onSubmit:j(U),style:{width:"100%",minHeight:"300px",maxWidth:"".concat(g,"px - 20px"),maxHeight:{height:u}},children:[(0,x.jsx)(H,{onSubmit:e=>(console.log("onSaveBtn.content=",t.current),console.log("onSaveBtn.edGbn=",C("edGbn")),console.log("onSaveBtn.errors=",V),console.log("onSaveBtn.isSubmitting=",G),void j(U)()),onCancel:e.onCancel,isSubmitting:G}),(0,x.jsx)(w,{control:k,onDelete:e=>{console.log("onDelete.imageList=",e),a(e)},onInsert:e=>{let n=t.current;"jpg"===e.ext?n+="<img src='".concat(e.url,"'/>"):"mp4"===e.ext&&(n+='<video preload="auto" controls="" src=\''.concat(e.url,"'></video>")),t.current=n},setContent:e=>{t.current=e},onFileUpload:e=>{console.log("handleFileUpload",e),d.current=e},imageList:e.imageList}),(0,x.jsx)(o.Z,{...v("edTitle"),fullWidth:!0,label:"\uc81c\ubaa9",placeholder:"\uc81c\ubaa9",variant:"standard",style:{paddingLeft:"0px"},error:!!V.edTitle}),(0,x.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",alignContent:"center"},children:[(0,x.jsx)(m,{id:"edGbn",name:"edGbn",label:"category",control:k,defaultValue:C("edGbn"),variant:"standard",margin:"normal",selectList:[{value:"",text:"None"},{value:"react",text:"React"},{value:"android",text:"Android"},{value:"java",text:"JAVA"},{value:"image",text:"\uadf8\ub9bc / \uc0ac\uc9c4"},{value:"etc",text:"\uae30\ud0c0"}],error:!!V.edGbn}),(0,x.jsx)(L.M,{style:{paddingTop:"2px"},format:"YYYY-MM-DD",fullWidth:!0,label:"\uc77c\uc790",id:"edDate",value:M()(C("edDate")),...v("edDate"),variant:"outlined",defaultValue:M()(C("edDate")),onChange:function(e){console.log("handleChangeDate=",e);let t=M()(e);t.format("YYYY-MM-DD HH:mm:ss"),console.log("handleChangeDate.dayjs=",t.format("YYYY-MM-DD HH:mm:ss")),Z("edDate",t.format("YYYY-MM-DD")),y("edDate")}})]}),(0,x.jsx)(s(),{fullWidth:!0,theme:"snow",id:"content",name:"content",type:"div",value:W,style:{minWidth:"400px",border:"1px solid primary.main",minHeight:"200px",height:"400px",maxHeight:"450px"},sx:{width:"".concat(g,"px - 50px")},modules:Y,formats:F,onChange:function(e){console.log("handleChange=",e),t.current=e,Z("content",e),y("content")}})]})})}},25266:(e,t,n)=>{n.d(t,{o:()=>r,A:()=>s});var o=n(99080),l=(n(29377),n(17592)),i=n(46417);o.Z.configure({languages:["javascript","ruby","python","java","cpp","kotlin","sql"]});const a=(0,l.ZP)("pre")((e=>{let{theme:t,props:n}=e;return{...n,color:"rgb(206 204 226)",backgroundColor:"rgb(27 27 27 / 87%)",textAlign:"left",paddingLeft:"3px",width:"100%",wordBreak:"break-word",wordWrap:"break-word",whiteSpace:"pre",overflowX:"auto",borderLeft:"2px solid #358ccb"}}));function s(e){let t=0;const n=e.replace(/<span class="hljs-comment">(.|\n)*?<\/span>/g,(e=>e.replace(/\r?\n/g,(()=>'\n<span class="hljs-comment">')))),o=n.split(/\r?\n/).length-1,l=n.split(/\r?\n/).map(((e,n)=>(console.log("lineContent.".concat(n,"="),e),o===n&&""===e?"":"<tr>\n              <td class='line-number' data-pseudo-content=".concat(++t,"></td>\n              <td class='line-content'>").concat(e,"</td>\n            </tr>")))).join("");return"<table class='code-table'>".concat(l,"</table>")}function r(e){const t=s(o.Z.highlightAuto(e.text).value);return(0,i.jsx)(a,{...e,children:(0,i.jsx)("div",{dangerouslySetInnerHTML:{__html:t}})})}},73786:(e,t,n)=>{n.d(t,{FR:()=>u,RV:()=>c,Rb:()=>r,YE:()=>h,t4:()=>d});var o=n(12725),l=n(47317),i=n(2024),a=n(6608),s=n(87120);const r=async(e,t)=>{console.log("fireDetailDelete.txtId=",e);const n=await(0,l.MB)(e);if(void 0===n)return void alert("\uc0ad\uc81c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.[code:d01]");const a="".concat(t,"/").concat(n.fullIndex,"/");return console.log("fireDetailDelete.treeLocate=",a),(0,o.t8)((0,o.iH)(i.h3,a),null),(0,o.t8)((0,o.iH)(i.h3,e),null),"OK"},c=async(e,t,n,a)=>{try{const s=await(0,l.MB)(e+"/"+a);if(void 0===s)return void alert("\uc774\ub3d9\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.[code:m10]");if(void 0===s.fullIndex)return void alert("\uc774\ub3d9\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.[code:m20]");const r=await(0,l.MB)(e+"/"+n);if(void 0===r)return void alert("\uc774\ub3d9\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.[code:m30]");if(void 0===r.fullIndex)return void alert("\uc774\ub3d9\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.[code:m40]");const c=await(0,l.MB)("".concat(e,"/").concat(r.fullIndex));c.fullIndex="".concat(s.fullIndex,"/sub/").concat(n);const d="".concat(t,"/").concat(s.fullIndex,"/sub/").concat(n);(0,o.t8)((0,o.iH)(i.h3,d),c);const u="".concat(t,"/").concat(r.fullIndex,"/sub/").concat(n);(0,o.t8)((0,o.iH)(i.h3,u),null)}catch(s){}},d=async(e,t,n,l,a)=>{let s=!1,r=e;return void 0===r&&(s=!0,r=(0,o.VF)((0,o.iU)((0,o.iH)(i.h3),n)).key,console.log("fireDetailPostData.newKey=",r)),(0,o.t8)((0,o.iH)(i.h3,t+r+"/title"),a.edTitle),(0,o.t8)((0,o.iH)(i.h3,t+r+"/memo"),a.content),(0,o.t8)((0,o.iH)(i.h3,t+r+"/date"),a.edDate),(0,o.t8)((0,o.iH)(i.h3,t+r+"/gbn"),a.edGbn),console.log("fireDetailPostData.fullIndex=",l),void 0!==l&&(s?((0,o.t8)((0,o.iH)(i.h3,t+r+"/fullIndex"),l),(0,o.t8)((0,o.iH)(i.h3,"".concat(n).concat(l,"/sub/").concat(r,"/title")),a.edTitle)):((0,o.t8)((0,o.iH)(i.h3,t+r+"/fullIndex"),"".concat(l,"/sub/").concat(r)),(0,o.t8)((0,o.iH)(i.h3,"".concat(n).concat(l,"/title")),a.edTitle))),r},u=async(e,t,n,l)=>{if(console.log("fireDetailDeleteImage.imageList=",l),void 0!==l)for(let a=0;a<l.length;a++){const r=l[a];if("Y"===r.del){(0,o.t8)((0,o.iH)(i.h3,"".concat(e,"/").concat(n,"/image/").concat(r.key)),null),console.log("fireDetailDeleteImage.delete=","".concat(e,"/").concat(n,"/image/").concat(r.key));const l=await(0,s.iH)(i.IG,"".concat(t,"/").concat(n,"/").concat(r.key,".").concat(r.ext));(0,s.oq)(l).then((()=>{console.log("fireDetailDeleteImage.storageRef=",l)})).catch((e=>{console.log("fireDetailDeleteImage.error=",e)}))}}},h=async(e,t,n,l)=>{for(let r=0;r<l.length;r++){const c=l[r].object,d=(0,a.Z)(c.name),u={ext:d,name:c.name,use:"Y"},h=(0,o.VF)((0,o.iU)((0,o.iH)(i.h3),e+"/image")).key;console.log("fireDetailImage.image.newKey",h),console.log("fireDetailImage.image.postData",u),(0,o.t8)((0,o.iH)(i.h3,"".concat(e,"/").concat(n,"/image/").concat(h)),u);const x=await(0,s.iH)(i.IG,"".concat(t,"/").concat(n,"/").concat(h,".").concat(d)),m=await(0,s.KV)(x,c);console.log("fireDetailImage.uploadBytes=",m)}}},70298:(e,t,n)=>{n.d(t,{V:()=>a});var o=n(12725),l=n(47313),i=n(2024);const a=e=>{const[t,n]=(0,l.useState)(e),[a,r]=(0,l.useState)([]),[c,d]=(0,l.useState)();(0,l.useEffect)((()=>{""!==t&&u(t)}),[t,c]);const u=e=>{const t=(0,o.IO)((0,o.iH)(i.h3,e),(0,o.g2)("title"));(0,o.jM)(t,(e=>{if(!e.exists())return;const t=e.val(),n=[];for(let o in t){const e=t[o];if(e.id=e.up,e.fullIndex=e.up,""===c||void 0===c)null!==e.sub&&(e.children=s(e,e.up)),n.push(e);else{e.id=o,(e.memo+"").toLowerCase().indexOf(c.toLowerCase())>-1&&n.push(e)}}n.sort(((e,t)=>e.title>t.title?1:-1)),r(n)}))};return[a,n,d]};function s(e,t){const n=[];if(void 0===e||void 0===e.sub)return n;for(let o in e.sub){let t=e.sub[o];t.id=o,t.key=o}return Object.values(e.sub).sort(((e,t)=>t.title-e.title)).map((e=>{e.id=e.key,e.fullIndex=t+"/sub/"+e.key,null!==e.sub&&(e.children=s(e,e.fullIndex)),n.push(e)})),n}},6608:(e,t,n)=>{function o(e){var t=e.length,n=e.lastIndexOf(".");return e.substring(n+1,t).toLowerCase()}n.d(t,{Z:()=>o})}}]);