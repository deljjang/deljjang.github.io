"use strict";(self.webpackChunksiny_memo=self.webpackChunksiny_memo||[]).push([[8370,1473],{35230:(e,t,n)=>{n.r(t),n.d(t,{default:()=>L});var o=n(41806),s=n(12725),i=n(87120),c=n(47313),a=n(58467),r=n(37029),l=n(4319),d=n(93727),m=n(87185),h=n(68322),u=n(47317),x=n(2024),j=n(96821),w=n(70298),g=n(71318),f=n(6608),b=n(63325),v=n(71473),y=n(49336),p=n(85281),Z=n(47825),M=n(21587),S=n(46417);const k=e=>(0,S.jsxs)(o.Z,{sx:{flexGrow:1,my:2,width:"100%",display:"flex",flexDirection:"row",alignItems:"center",alignContent:"center",justifyContent:"center",textAlign:"center"},children:[(0,S.jsx)(M.ZP,{type:"button",size:"small",variant:"outlined",color:"success",onClick:e.onEdit,children:"\uc218\uc815"}),(0,S.jsx)(M.ZP,{type:"button",size:"small",variant:"outlined",onClick:e.onNewMemo,children:"\uc0c8\uae00"}),(0,S.jsx)(M.ZP,{type:"button",size:"small",variant:"outlined",color:"warning",onClick:e.onMove,children:"\uc774\ub3d9"}),(0,S.jsx)(M.ZP,{type:"button",size:"small",variant:"outlined",color:"error",onClick:e.onDelete,children:"\uc0ad\uc81c"})]});var C=n(35074),I=n(50003),H=n(79148),_=n(2774),N=n(69066),D=n(11338),E=(n(8374),n(59941)),R=n(73786),P=n(25266);const W=e=>{var t;const{title:n,gbn:s,date:i,text:l,image:d,setFireId:h,isLoading:w,onReload:g}=(0,N.C)(),[f,b]=(0,c.useState)(!1),[v,M]=(0,c.useState)(!1),W=(0,a.s0)(),F=(0,c.useRef)(),L=(0,c.useRef)();L.current=e.searchWord;const{homeId:A}=(0,a.UO)(),B=(0,a.TH)(),G=null===B||void 0===B||null===(t=B.state)||void 0===t?void 0:t.fullIndex,{user:T}=(0,j.$)(),{settings:z,saveSettings:V}=(0,D.r)();return(0,c.useEffect)((()=>{V({...z,nodeId:A}),b(!1),(0,u.w5)(A,G),h("home_txt/".concat(A),"home/".concat(A),L.current)}),[A,T]),(0,c.useEffect)((()=>{null!==l&&document.querySelectorAll("pre").forEach((e=>{e.innerHTML=(0,P.A)(e.innerHTML)}))}),[l]),""===A||void 0===T?(0,S.jsx)(S.Fragment,{}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(_.a,{children:n.current}),(0,S.jsx)(c.Suspense,{fallback:(0,S.jsx)(r.g,{}),children:(0,S.jsxs)(Z.Z,{className:"container",sx:{p:0,width:"100%"},children:[!f&&(0,S.jsx)(k,{onEdit:()=>{F.current=!1,!1===w&&b(!0)},onNewMemo:()=>{F.current=!0,!1===w&&b(!0)},onMove:()=>{M(!0)},onDelete:()=>{window.confirm("\ud558\uc704 \uc790\ub8cc\uac00 \uc788\ub294 \uacbd\uc6b0 \uac19\uc774 \uc0ad\uc81c\ub429\ub2c8\ub2e4.\n\uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(async()=>{console.log("handleDelete.homeId=",A);const e="home_txt/".concat(A),t=await(0,R.Rb)(e,"home");console.log("handleDelete.result=",t),void 0!==t?W("/homemng"):alert("\uc0ad\uc81c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.[code:d02]")})()}}),f&&(0,S.jsx)(m.Z,{newMode:F.current,onPostSubmit:async(e,t,n)=>{const o="home_txt/".concat(A),s="home";if(await(0,R.FR)(o,s,A,t),await(0,R.t4)(A,"home_txt/","home/",G,e),await(0,R.YE)("home_txt","home",A,n),void 0===G){const t=await(0,u.MB)("".concat(s,"fullIndex"));void 0!==t&&await(0,y.t8)((0,y.iH)(x.h3,"home/".concat(t,"/title")),e.edTitle)}F.current=!1,b(!1),g()},onNewSubmit:async(e,t)=>{const n=await(0,R.t4)(void 0,"home_txt/","home/",G,e);console.log("onNewSubmit.newKey=",n,", homeId=",A);const o=await(0,R.YE)("home_txt","home",n,t);console.log("onNewSubmit.imageResult",o),void 0!==n&&W("/homemng/".concat(n)),F.current=!1,b(!1),g()},onCancel:()=>{b(!1)},title:n.current,gbn:s.current,date:i.current,content:l,imageList:d}),(0,S.jsxs)(o.Z,{sx:{my:2,overflow:"hidden",overflowX:"auto"},children:[s.current,(0,S.jsx)(C.O,{show:!f,text:l}),!f&&(0,S.jsx)(H.J,{imageList:d}),w&&(0,S.jsx)(o.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:(0,S.jsx)(p.Z,{sx:{mt:5}})})]}),(0,S.jsx)(I._,{userId:T.uid,open:v,data:e.data,onClose:()=>M(!1),onPost:async e=>{try{const t="home_txt",n="home",o=await(0,R.RV)(t,n,A,e);console.log("onMoveSubmit.result=",o)}catch(t){}finally{M(!1)}}})]})}),(0,S.jsx)(E.d,{})]})};var F=n(99333);const L=()=>{const e=(0,a.s0)(),{user:t}=(0,j.$)(),[n,y]=(0,c.useState)(!1),p=(0,c.useRef)(),[Z]=(0,w.V)("home"),[M,k]=(0,c.useState)(""),C=(0,c.useRef)();(0,c.useEffect)((()=>{}),[t]);const I=()=>{y(!0)},H=async(e,n)=>{const o="home_txt/".concat(t.uid,"/");for(let t=0;t<n.length;t++){const e=n[t].object,c=(0,f.Z)(e.name),a={ext:c,name:e.name,use:"Y"},r=(0,s.VF)((0,s.iU)((0,s.iH)(x.h3),o+"image")).key;(0,s.t8)((0,s.iH)(x.h3,o+"image/".concat(r)),a);const l=await(0,i.iH)(x.IG,"home/".concat(M,"/").concat(r,".").concat(c));await(0,i.KV)(l,e)}const c=(0,u.K9)(o),a={title:e.edTitle,date:e.edDate,gbn:e.edGbn,memo:e.content,fullIndex:c,up:c,bookmark:"N"};(0,u.hb)("".concat(o).concat(c),a);const r={gbn:"",property:"m",title:e.title,up:c};(0,u.hb)("home/".concat(c),r),y(!1)},{height:_,width:N}=(0,b.Z)();if(!t)return(0,S.jsx)(S.Fragment,{});t.uid!==F.kS&&e("/");const D=(0,S.jsxs)(o.Z,{sx:{minHeight:110,flexGrow:1,minWidth:100,maxHeight:_},children:[(0,S.jsx)(d.j,{}),(0,S.jsx)(l.x,{onNewMemoBtn:I,onSearchDataBtn:e=>{p.current=e}}),(0,S.jsx)(o.Z,{sx:{flexGrow:1,minWidth:100,minHeight:110,maxHeight:_-220,height:_-220},children:(0,S.jsx)(c.Suspense,{fallback:(0,S.jsx)(r.g,{}),children:(0,S.jsx)(h.Z,{data:Z,onDetail:(t,n)=>{C.current=n,k(t),e("/homemng/".concat(t),{state:{fullIndex:n}})},maxHeight:_-150})})})]});return(0,S.jsxs)(g.j,{title:"\ud648 \uad00\ub9ac",drawerWidth:220,width:N,sideContents:D,children:[(0,S.jsxs)(a.Z5,{children:[(0,S.jsx)(a.AW,{path:"/",element:(0,S.jsx)(v.MemoMain,{searchWord:p.current,data:Z,onNewMemoBtn:I,title:"\ud648\ud398\uc774\uc9c0 \uad00\ub9ac"})}),(0,S.jsx)(a.AW,{path:"/:homeId",element:(0,S.jsx)(W,{searchWord:p.current,data:Z})})]}),n&&(0,S.jsx)(m.Z,{show:n,newMode:n.current,onPostSubmit:H,onNewSubmit:H,onCancel:()=>{y(!1)},title:"",content:"",imageList:[]})]})}},71473:(e,t,n)=>{n.r(t),n.d(t,{MemoMain:()=>i,default:()=>c});var o=n(21587),s=n(46417);const i=e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h3",{children:e.title}),"\uc0ac\uc774\ub4dc \uba54\ub274\uc5d0\uc11c",(0,s.jsx)(o.ZP,{disableElevation:!0,type:"button",variant:"outlined",color:"success",onClick:function(){return e.onNewMemoBtn(),!1},children:"\uc0c8\uae00"}),"\ubc84\ud2bc\uc744 \uc0ac\uc6a9\ud574 \uba54\ubaa8\ub97c \uc791\uc131\ud569\ub2c8\ub2e4."]}),c=i}}]);