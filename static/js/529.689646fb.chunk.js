"use strict";(self.webpackChunksiny_memo=self.webpackChunksiny_memo||[]).push([[529],{69529:(e,t,o)=>{o.r(t),o.d(t,{default:()=>F});var n=o(89164),i=o(72791),s=o(29388),l=o(103),r=o(25513),c=o(71883),d=o(75826),a=o(76189),u=o(80184);const x=(0,a.Z)((0,u.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel"),m=(0,a.Z)((0,u.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");var h=o(38820),p=o(27247),g=o(95678),j=o(66934),f=o(35527),b=o(697),v=o(61889),Z=o(27391),y=o(13400),k=o(20890),C=o(94721),T=o(49877),w=o(78609),I=o(99779),S=o(61134),D=o(40019),L=o(81214),H=o(5434);const z=(0,j.ZP)(f.Z)((e=>{let{theme:t}=e;return{backgroundColor:"dark"===t.palette.mode?"#1A2027":"#fff",...t.typography.body2,padding:t.spacing(1),textAlign:"center",color:t.palette.text.secondary}})),B=e=>{var t;const{userId:o}=e,[n,s]=(e=>{const[t,o]=(0,i.useState)(e),[n,s]=(0,i.useState)([]),[l,r]=(0,i.useState)();(0,i.useEffect)((()=>{""!==t&&c(t)}),[t,l]);const c=e=>{const t=(0,w.IO)((0,w.iH)(H.h3,e),(0,w.g2)("title"));(0,w.jM)(t,(e=>{if(!e.exists())return;const t=e.val(),o=[];for(let s in t){const e=t[s];e.id=s,e.sort="".concat(e.ing,"_").concat(e.date,"_").concat(e.title),(""===l||void 0===l||(e.memo+"").toLowerCase().indexOf(l.toLowerCase())>-1)&&o.push(e)}const n=o.sort(((e,t)=>e.sort>t.sort?1:-1)).filter((e=>"1"===e.ing)),i=o.sort(((e,t)=>e.sort>t.sort?-1:1)).filter((e=>"2"===e.ing));s([...n,...i])}))};return[n,o,r]})(""),l=I.ou.now().setZone("Asia/Seoul").toFormat("yyyy-MM-dd"),r={edTitle:"",edDate:l},{register:c,handleSubmit:d,reset:a,getValues:j,setFocus:f,formState:{errors:B,isSubmitting:F,submitCount:P}}=(0,S.cI)({mode:"submit ",defaultValues:r}),E=(0,i.useRef)();(0,i.useEffect)((()=>{c("edTitle",{required:"\ud574\ub2f9 \ud544\ub4dc\ub294 \ud544\uc218\uc785\ub2c8\ub2e4.",minLength:{value:3,message:"3\uae00\uc790 \uc774\uc0c1 \uc785\ub825\ud574\uc8fc\uc138\uc694."}}),c("edDate",{required:!0,minLength:10})}),[]),(0,i.useEffect)((()=>{void 0!==o&&s("todo/".concat(o))}),[o]);const M=()=>{e.handleGoogleLogin()};if(void 0===o)return(0,u.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",marginTop:"50px",marginBottom:"100px"},children:[(0,u.jsx)(z,{children:"\ub85c\uadf8\uc778\uc744 \ud574\uc57c \uc774\uc6a9\uac00\ub2a5\ud569\ub2c8\ub2e4."}),(0,u.jsx)(D.Z,{type:"button",size:"small",variant:"outlined",color:"success",sx:{mt:30},onClick:M,children:"\ub85c\uadf8\uc778"})]});function G(e,t){console.log("onSubmit.data=",e),console.log("onSubmit.e=",t),console.log("onSubmit.todoId=",E.current),console.log("onSubmit.errors=",B);const n="todo/".concat(o,"/");if(void 0===E.current){const e=(0,w.VF)((0,w.iU)((0,w.iH)(H.h3),n)).key;console.log("onSubmit.newKey",e),E.current=e}(0,w.t8)((0,w.iH)(H.h3,n+E.current+"/title"),e.edTitle),(0,w.t8)((0,w.iH)(H.h3,n+E.current+"/date"),e.edDate),(0,w.t8)((0,w.iH)(H.h3,n+E.current+"/ing"),"1"),E.current=void 0,a({edTitle:"",edDate:l})}return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(b.Z,{sx:{width:"100%",flexGrow:1,m:2},children:[(0,u.jsx)("div",{id:"back-to-top-anchor"}),(0,u.jsx)("form",{onSubmit:d(G,(e=>console.error(e))),children:(0,u.jsxs)(v.ZP,{container:!0,spacing:2,columns:{xs:12,md:12},children:[(0,u.jsx)(v.ZP,{item:!0,xs:12,children:(0,u.jsx)(Z.Z,{type:"date",style:{paddingTop:"2px"},fullWidth:!0,placeholder:"\uc77c\uc790",...c("edDate"),variant:"standard"})}),(0,u.jsx)(v.ZP,{item:!0,xs:9,sm:10,children:(0,u.jsxs)(b.Z,{sx:{display:"flex",alignItems:"normal",justifyContent:"center"},children:[(0,u.jsx)(Z.Z,{fullWidth:!0,style:{paddingTop:"2px"},placeholder:"Todo Input",...c("edTitle"),variant:"standard",error:!!B.edTitle}),(0,u.jsx)(y.Z,{style:{marginTop:"-4px"},"aria-label":"bookmark",onClick:e=>(e=>{e.preventDefault(),console.log("onCancel.item="),a({edTitle:""}),E.current=void 0})(e),children:(0,u.jsx)(x,{sx:{color:"action.active"}})})]})}),(0,u.jsx)(v.ZP,{item:!0,xs:3,sm:2,children:(0,u.jsx)(D.Z,{variant:"outlined",fullWidth:!0,onClick:e=>async function(e){console.log("onInputBtn.errors=",B),console.log("onInputBtn.isSubmitting=",F),console.log("onInputBtn.edDate=",j("edDate")),console.log("onInputBtn.edTitle=",j("edTitle")),console.log("onInputBtn.submitCount=",P),d(G)()}(),color:"success",size:"small",disabled:F,children:"\uc785\ub825"})}),(0,u.jsx)(v.ZP,{item:!0,xs:12,sm:12,children:null!==B&&void 0!==B&&B.edTitle?(0,u.jsx)("p",{className:"error",children:null===(t=B.edTitle)||void 0===t?void 0:t.message}):null})]})}),null===n||void 0===n?void 0:n.map(((e,t)=>(0,u.jsxs)("div",{children:[(0,u.jsxs)(b.Z,{sx:{display:"plex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[(0,u.jsx)(k.Z,{component:"div",variant:"body2",color:"text.prime",children:e.date}),(0,u.jsxs)(b.Z,{sx:{display:"plex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:["1"===e.ing&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(y.Z,{"aria-label":"\uc644\ub8cc",onClick:t=>((e,t)=>{e.preventDefault(),window.confirm("\uc644\ub8cc\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(0,w.t8)((0,w.iH)(H.h3,"todo/".concat(o,"/").concat(t.id,"/ing")),"2")})(t,e),children:(0,u.jsx)(m,{})}),(0,u.jsx)(y.Z,{"aria-label":"edit",onClick:t=>((e,t)=>{e.preventDefault(),console.log("onEdit.item=",t),f("edTitle"),a({edTitle:t.title,edDate:t.date}),E.current=t.id,console.log("onEdit.todoId=",E.current)})(t,e),children:(0,u.jsx)(h.Z,{})})]}),(0,u.jsx)(y.Z,{"aria-label":"delete",onClick:t=>((e,t)=>{e.preventDefault(),window.confirm("\uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(0,w.t8)((0,w.iH)(H.h3,"todo/".concat(o,"/").concat(t.id)),null)})(t,e),children:(0,u.jsx)(p.Z,{sx:{color:"rgba(120, 0, 0, 3)"}})})]})]}),(0,u.jsx)(k.Z,{component:"div",variant:"body",color:"text.prime",children:e.title}),(0,u.jsx)(C.Z,{})]},t))),(0,u.jsx)(L.p,{...e,id:"#back-to-top-anchor",children:(0,u.jsx)(T.Z,{color:"primary",size:"small","aria-label":"scroll back to top",children:(0,u.jsx)(g.Z,{})})})]}),(0,u.jsx)(C.Z,{})]})},F=()=>{const{user:e,handleGoogleLogin:t}=(0,c.$)();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(d.O,{}),(0,u.jsxs)(n.Z,{maxWidth:"lg",sx:{mt:3},children:[(0,u.jsx)(r.Z,{title:"Todo"}),(0,u.jsx)(i.Suspense,{fallback:(0,u.jsx)(s.g,{}),children:(0,u.jsx)(B,{userId:null===e||void 0===e?void 0:e.uid,handleGoogleLogin:t})})]}),(0,u.jsx)(l.Z,{}),(0,u.jsx)("br",{}),(0,u.jsx)("br",{})]})}}}]);
//# sourceMappingURL=529.689646fb.chunk.js.map