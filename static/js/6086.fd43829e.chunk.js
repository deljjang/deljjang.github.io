"use strict";(self.webpackChunksiny_memo=self.webpackChunksiny_memo||[]).push([[6086,7652],{3424:(e,t,n)=>{n.r(t),n.d(t,{default:()=>G});var o=n(16491),s=n(59749),c=n(39751),i=n(9950),a=n(28429),r=n(9798),l=n(64127),m=n(32920),d=n(26232),u=n(65746),h=n(8542),x=n(85881),g=n(9519),f=n(15568),j=n(54562),w=n(98497),y=n(76660),b=n(7652),p=n(23730),v=n(46639),A=n(19808),M=n(7041),S=n(44414);const C=e=>(0,S.jsxs)(o.A,{sx:{flexGrow:1,my:2,width:"100%",display:"flex",flexDirection:"row",alignItems:"center",alignContent:"center",justifyContent:"center",textAlign:"center"},children:[(0,S.jsx)(M.Ay,{type:"button",size:"small",variant:"outlined",color:"success",onClick:e.onEdit,children:"\uc218\uc815"}),(0,S.jsx)(M.Ay,{type:"button",size:"small",variant:"outlined",onClick:e.onNewMemo,children:"\uc0c8\uae00"}),(0,S.jsx)(M.Ay,{type:"button",size:"small",variant:"outlined",color:"warning",onClick:e.onMove,children:"\uc774\ub3d9"}),(0,S.jsx)(M.Ay,{type:"button",size:"small",variant:"outlined",color:"error",onClick:e.onDelete,children:"\uc0ad\uc81c"})]});var k=n(45184),I=n(1574),R=n(76962),_=n(15265),D=n(10611),N=n(86608),H=(n(48992),n(86635)),E=n(11298),F=n(53743);const L=e=>{const{title:t,gbn:n,date:s,text:c,image:l,setFireId:m,isLoading:u,onReload:f}=(0,D.x)(),[j,w]=(0,i.useState)(!1),[y,b]=(0,i.useState)(!1),M=(0,a.Zp)(),L=(0,i.useRef)(),q=(0,i.useRef)();q.current=e.searchWord;const{homeId:G}=(0,a.g)(),W="".concat(n.current,"/sub/").concat(G);console.log("HomeMngDetail.fullIndex=",W);const{user:z}=(0,g.b)(),{settings:B,saveSettings:K}=(0,N.t)();return(0,i.useEffect)((()=>{K({...B,nodeId:G}),w(!1),m("home_txt/".concat(G),"home/".concat(G),q.current)}),[G,z]),(0,i.useEffect)((()=>{null!==c&&document.querySelectorAll("pre").forEach((e=>{e.innerHTML=(0,F.L)(e.innerHTML)}))}),[c]),""===G||void 0===z?(0,S.jsx)(S.Fragment,{}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(_.O,{children:t.current}),(0,S.jsx)(i.Suspense,{fallback:(0,S.jsx)(r.R,{}),children:(0,S.jsxs)(A.A,{className:"container",sx:{p:0,width:"100%"},children:[!j&&(0,S.jsx)(C,{onEdit:()=>{L.current=!1,!1===u&&w(!0)},onNewMemo:()=>{L.current=!0,!1===u&&w(!0)},onMove:()=>{b(!0)},onDelete:()=>{window.confirm("\ud558\uc704 \uc790\ub8cc\uac00 \uc788\ub294 \uacbd\uc6b0 \uac19\uc774 \uc0ad\uc81c\ub429\ub2c8\ub2e4.\n\uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(async()=>{console.log("handleDelete.homeId=",G);const e="home_txt/".concat(G),t=await(0,E.Zz)(e,"home");console.log("handleDelete.result=",t),void 0!==t?M("/homemng"):alert("\uc0ad\uc81c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.[code:d02]")})()}}),j&&(0,S.jsx)(d.A,{newMode:L.current,onPostSubmit:async(e,t,n)=>{const o="home";if(await(0,E.Q9)("home_txt",o,G,t),await(0,E.y1)(G,"home_txt/","home/",W,e),await(0,E.F)("home_txt","home",G,n),void 0===W){const t=await(0,h.eC)("".concat(o,"fullIndex"));void 0!==t&&await(0,p.hZ)((0,p.KR)(x.mr,"home/".concat(t,"/title")),e.edTitle)}L.current=!1,w(!1),f()},onNewSubmit:async(e,t)=>{const n=await(0,E.y1)(void 0,"home_txt/","home/",e.edGbn,e);console.log("onNewSubmit.newKey=",n,", homeId=",G);const o=await(0,E.F)("home_txt","home",n,t);console.log("onNewSubmit.imageResult",o),void 0!==n&&M("/homemng/".concat(n)),L.current=!1,w(!1),f()},onCancel:()=>{w(!1)},title:t.current,gbn:n.current,date:s.current,content:c,imageList:l}),(0,S.jsxs)(o.A,{sx:{my:2,overflow:"hidden",overflowX:"auto"},children:[n.current,(0,S.jsx)(k.t,{show:!j,text:c}),!j&&(0,S.jsx)(R.P,{imageList:l}),u&&(0,S.jsx)(o.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:(0,S.jsx)(v.A,{sx:{mt:5}})})]}),(0,S.jsx)(I.T,{userId:z.uid,open:y,data:e.data,onClose:()=>b(!1),onPost:async e=>{try{const t="home",o=await(0,E._1)(t,n.current,G,e);console.log("onMoveSubmit.result=",o)}catch(t){}finally{b(!1)}}})]})}),(0,S.jsx)(H.n,{})]})};var q=n(9343);const G=()=>{const e=(0,a.Zp)(),{user:t}=(0,g.b)(),[n,p]=(0,i.useState)(!1),v=(0,i.useRef)(),[A]=(0,f.U)("home"),[M,C]=(0,i.useState)(""),k=(0,i.useRef)();(0,i.useEffect)((()=>{}),[t]);const I=()=>{p(!0)},R=async(e,n)=>{const o="home_txt/".concat(t.uid,"/");for(let t=0;t<n.length;t++){const e=n[t].object,i=(0,w.A)(e.name),a={ext:i,name:e.name,use:"Y"},r=(0,s.VC)((0,s.jf)((0,s.KR)(x.mr),o+"image")).key;(0,s.hZ)((0,s.KR)(x.mr,o+"image/".concat(r)),a);const l=await(0,c.KR)(x.Pf,"home/".concat(M,"/").concat(r,".").concat(i));await(0,c.D)(l,e)}const i=(0,h.Og)(o),a={title:e.edTitle,date:e.edDate,gbn:e.edGbn,memo:e.content,fullIndex:i,up:i,bookmark:"N"};(0,h.fq)("".concat(o).concat(i),a);const r={gbn:"",property:"m",title:e.title,up:i};(0,h.fq)("home/".concat(i),r),p(!1)},{height:_,width:D}=(0,y.A)();if(!t)return(0,S.jsx)(S.Fragment,{});t.uid!==q.q3&&e("/");const N=(0,S.jsxs)(o.A,{sx:{minHeight:110,flexGrow:1,minWidth:100,maxHeight:_},children:[(0,S.jsx)(m.G,{}),(0,S.jsx)(l._,{onNewMemoBtn:I,onSearchDataBtn:e=>{v.current=e}}),(0,S.jsx)(o.A,{sx:{flexGrow:1,minWidth:100,minHeight:110,maxHeight:_-220,height:_-220},children:(0,S.jsx)(i.Suspense,{fallback:(0,S.jsx)(r.R,{}),children:(0,S.jsx)(u.A,{data:A,onDetail:(t,n)=>{k.current=n,C(t),e("/homemng/".concat(t),{state:{fullIndex:n}})},maxHeight:_-150})})})]});return(0,S.jsxs)(j.i,{title:"\ud648 \uad00\ub9ac",drawerWidth:320,width:D,sideContents:N,children:[(0,S.jsxs)(a.BV,{children:[(0,S.jsx)(a.qh,{path:"/",element:(0,S.jsx)(b.MemoMain,{searchWord:v.current,data:A,onNewMemoBtn:I,title:"\ud648\ud398\uc774\uc9c0 \uad00\ub9ac"})}),(0,S.jsx)(a.qh,{path:"/:homeId",element:(0,S.jsx)(L,{searchWord:v.current,data:A})})]}),n&&(0,S.jsx)(d.A,{show:n,newMode:n.current,onPostSubmit:R,onNewSubmit:R,onCancel:()=>{p(!1)},title:"",content:"",imageList:[]})]})}},7652:(e,t,n)=>{n.r(t),n.d(t,{MemoMain:()=>c,default:()=>i});var o=n(7041),s=n(44414);const c=e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h3",{children:e.title}),"\uc0ac\uc774\ub4dc \uba54\ub274\uc5d0\uc11c",(0,s.jsx)(o.Ay,{disableElevation:!0,type:"button",variant:"outlined",color:"success",onClick:function(){return e.onNewMemoBtn(),!1},children:"\uc0c8\uae00"}),"\ubc84\ud2bc\uc744 \uc0ac\uc6a9\ud574 \uba54\ubaa8\ub97c \uc791\uc131\ud569\ub2c8\ub2e4."]}),i=c}}]);