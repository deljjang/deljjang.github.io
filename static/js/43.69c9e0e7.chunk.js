"use strict";(self.webpackChunksiny_memo=self.webpackChunksiny_memo||[]).push([[43],{21587:(e,t,o)=>{o.d(t,{ZP:()=>i});var n=o(31095),l=o(42830),a=o(46417);function c(e){let{children:t,...o}=e;return(0,a.jsx)(n.Z,{variant:"contained",component:l.E.div,whileHover:{scale:1,transition:{duration:.3}},whileTap:{scale:.9},...o,children:t})}c.defaultProps={type:"scale"};const i=c},87185:(e,t,o)=>{o.d(t,{Z:()=>V});var n=o(24631),l=o(19536),a=o(41806),c=o(47313),i=(o(94230),o(4833),o(16)),s=o.n(i),r=o(1550),d=o(23306),u=o(24256),g=o(95765),m=o(75627),h=o(46417);const x=e=>{let{name:t,label:o,control:n,defaultValue:l,selectList:a,...c}=e;const i="".concat(t,"-label");return(0,h.jsxs)(r.Z,{...c,children:[(0,h.jsx)(d.Z,{id:i,children:o}),(0,h.jsx)(m.Qr,{render:e=>{let{field:t}=e;return(0,h.jsx)(u.Z,{labelId:i,label:o,...t,children:a.map(((e,t)=>(0,h.jsx)(g.Z,{value:e.value,children:e.text},t)))})},name:t,control:n,defaultValue:l})]})};var f=o(63325),p=o(63950),v=o(51997),b=o(70501),D=o(47131),y=o(61113),j=o(85281),k=o(21587);const w=e=>{const[t,o]=(0,c.useState)(e.imgList);return t&&t.length>0&&t.map(((n,c)=>{const{key:i,name:s,url:r,del:d,ext:u}=n;return void 0!==d?"":(0,h.jsxs)("div",{children:[(0,h.jsxs)(a.Z,{display:"flex",flexDirection:"row",alignItems:"center",sx:{justifyContent:"space-between"},children:["mp4"===u&&(0,h.jsx)(y.Z,{style:{width:"50px",textAlign:"center"},variant:"body",children:u}),"jpg"===u&&(0,h.jsx)("img",{src:r,style:{width:"50px"}}),(0,h.jsx)("div",{children:s}),(0,h.jsxs)("div",{style:{display:"flex"},children:[r&&(0,h.jsx)(k.ZP,{variant:"outlined",color:"success",onClick:o=>{o.preventDefault(),(o=>{t.map((t=>{if(t.key===o)return e.onInsert(t),!1}))})(i)},children:"\ucd94\uac00"}),(0,h.jsx)(D.Z,{"aria-label":"delete",onClick:()=>(n=>{console.log("onDeleteClick.key=",n);const l=t.map((e=>(console.log("onDeleteClick.file.key=",e.key),e.key===n&&(e.del="Y"),e)));o(l),console.log("onDeleteClick.tempFiles=",l),e.onClick(l)})(i),children:(0,h.jsx)(v.Z,{sx:{color:"red"}})})]})]}),(0,h.jsx)(l.Z,{})]},c)}))},M=e=>{const{control:t}=e,o=(0,m.qo)({control:t,name:"content"}),[n,i]=(0,c.useState)(!1),[s]=(0,c.useState)(!1),[r,d]=(0,c.useState)([]),[u,g]=(0,c.useState)(e.imageList),x=(0,c.useRef)(0);(0,c.useEffect)((()=>{d([])}),[]);const f=(0,c.useCallback)((e=>{var t;e.preventDefault(),null!==(t=e.dataTransfer)&&void 0!==t&&t.files&&i(!0)}),[]),k=(0,c.useCallback)((e=>{e.preventDefault(),i(!1)}),[]),M=(0,c.useCallback)((t=>{let o=[],n=r;o="drop"===t.type?t.dataTransfer.files:t.target.files;for(const e of o){const t=URL.createObjectURL(e);n=[...n,{id:x.current++,object:e,url:t}]}console.log("onChangeFiles.tempFiles=",n),e.onFileUpload(n),d(n)}),[r,e]),I=(0,c.useCallback)((t=>{g(t),e.onDelete(t)}),[e]),Z=(0,c.useCallback)((t=>{const o=r.filter((e=>e.id!==t));e.onFileUpload(o),d(o)}),[r,e]),C=(0,c.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),i(!1),M(e)}),[M]);return(0,h.jsxs)(a.Z,{children:[(0,h.jsxs)(b.Z,{variant:"outlined",onDragOver:f,onDragLeave:k,onDrop:C,cursor:"pointer",sx:{"&:hover":{cursor:"pointer"}},style:{border:n?"1px dashed red":"1px dashed gray",paddingLeft:5,paddingRight:5,marginBottom:10,textAlign:"center",cursor:"pointer",backgroundColor:n?"secondary":"transparent",position:"relative"},children:[(0,h.jsx)("input",{type:"file",id:"fileUpload",style:{display:"none"},multiple:!0,onChange:M}),(0,h.jsx)("label",{htmlFor:"fileUpload",children:(0,h.jsxs)(a.Z,{display:"flex",flexDirection:"row",alignItems:"center",children:[(0,h.jsx)(D.Z,{color:"primary","aria-label":"upload picture",component:"span",children:(0,h.jsx)(p.Z,{style:{fontSize:40}})}),(0,h.jsx)(y.Z,{children:"\ud30c\uc77c \uc5c5\ub85c\ub4dc"})]})}),s&&(0,h.jsx)(j.Z,{size:24,style:{position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)(w,{imgList:u,onInsert:t=>{let n=o;"jpg"===t.ext?n+="<img src='".concat(t.url,"'/>"):"mp4"===t.ext&&(n+='<video preload="auto" controls="" src=\''.concat(t.url,"'></video>")),e.setContent(n)},onClick:I}),r.length>0&&r.map(((e,t)=>{const{id:o,object:{name:n},url:c}=e;return(0,h.jsxs)("div",{children:[(0,h.jsxs)(a.Z,{display:"flex",flexDirection:"row",alignItems:"center",sx:{justifyContent:"space-between"},children:[(0,h.jsx)("img",{src:c,style:{width:"50px"}}),(0,h.jsx)("div",{children:n}),(0,h.jsx)(D.Z,{"aria-label":"delete",onClick:()=>Z(o),children:(0,h.jsx)(v.Z,{sx:{color:"red"}})})]},t),(0,h.jsx)(l.Z,{})]},t)}))]})]})};var I=o(99080),Z=o(23834),C=o(94762);const S=e=>{let{onSubmit:t,onCancel:o,isSubmitting:n}=e;return(0,h.jsxs)(a.Z,{sx:{my:2,display:"flex"},children:[(0,h.jsx)(k.ZP,{variant:"outlined",color:"success",disabled:n,onClick:e=>{e.preventDefault(),t(e)},children:"\uc800\uc7a5"}),(0,h.jsx)(k.ZP,{type:"button",variant:"outlined",onClick:o,children:"\ucde8\uc18c"})]})};var L=o(34431),H=o(10658),Y=o.n(H);i.Quill.register("modules/imageDrop",Z.c),I.Z.configure({languages:["javascript","ruby","python","java","cpp","kotlin","sql"]});const F={syntax:{highlight:e=>I.Z.highlightAuto(e).value},toolbar:[[{header:"1"},{header:"2"},{header:"3"},{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","video"],["clean"],["code-block"]],imageDrop:!0,clipboard:{matchVisual:!1}},T=["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","video","clean","code-block","code-custom"],V=e=>{const t=(0,c.useRef)(),[o,i]=(0,c.useState)(e.imageList),r=(0,c.useRef)(),d=e.newMode,u=(0,c.useRef)([]),{height:g,width:p}=(0,f.Z)(),v=C.ou.now().setZone("Asia/Seoul").toFormat("yyyy-MM-dd"),b={edTitle:e.title,edGbn:e.gbn?e.gbn:"",edDate:e.date?e.date:v,content:e.content},{register:D,handleSubmit:y,trigger:j,control:k,setValue:w,getValues:I,watch:Z,formState:{errors:H,isSubmitting:V}}=(0,m.cI)({mode:"onChange",defaultValues:b});D("edDate",{required:!0,minLength:10}),D("edGbn",{required:!0}),D("edTitle",{required:"\ud574\ub2f9 \ud544\ub4dc\ub294 \ud544\uc218\uc785\ub2c8\ub2e4.",minLength:{value:3,message:"3\uae00\uc790 \uc774\uc0c1 \uc785\ub825\ud574\uc8fc\uc138\uc694."}}),(0,c.useEffect)((()=>{u.current=[],t.current=e.content,r.current=!1}),[e.content]);const B=async t=>{console.log("onPostSubmit.newMode=",d),console.log("onPostSubmit.values=",t),d?e.onNewSubmit(t,u.current):await e.onPostSubmit(t,o,u.current)};const P=Z("content");return(0,h.jsx)(a.Z,{sx:{my:2,mb:"50px",width:"100%"},children:(0,h.jsxs)("form",{onSubmit:y(B),style:{width:"100%",minHeight:"300px",maxWidth:"".concat(p,"px - 20px"),maxHeight:{height:g},display:"flex",flexDirection:"column"},children:[(0,h.jsx)(S,{onSubmit:e=>(console.log("onSaveBtn.content=",t.current),console.log("onSaveBtn.edGbn=",I("edGbn")),console.log("onSaveBtn.errors=",H),console.log("onSaveBtn.isSubmitting=",V),void y(B)()),onCancel:e.onCancel,isSubmitting:V}),(0,h.jsx)(M,{control:k,onDelete:e=>{console.log("onDelete.imageList=",e),i(e)},onInsert:e=>{let o=t.current;"jpg"===e.ext?o+="<img src='".concat(e.url,"'/>"):"mp4"===e.ext&&(o+='<video preload="auto" controls="" src=\''.concat(e.url,"'></video>")),t.current=o},setContent:e=>{t.current=e},onFileUpload:e=>{console.log("handleFileUpload",e),u.current=e},imageList:e.imageList}),(0,h.jsx)(n.Z,{...D("edTitle"),fullWidth:!0,label:"\uc81c\ubaa9",placeholder:"\uc81c\ubaa9",variant:"standard",style:{paddingLeft:"0px"},error:!!H.edTitle}),(0,h.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",alignContent:"center"},children:[(0,h.jsx)(x,{id:"edGbn",name:"edGbn",label:"category",control:k,defaultValue:I("edGbn"),variant:"standard",margin:"normal",selectList:[{value:"",text:"None"},{value:"react",text:"React"},{value:"mui",text:"MUI"},{value:"android",text:"Android"},{value:"java",text:"JAVA"},{value:"image",text:"\uadf8\ub9bc / \uc0ac\uc9c4"},{value:"etc",text:"\uae30\ud0c0"}],error:!!H.edGbn}),(0,h.jsx)(L.M,{style:{paddingTop:"2px"},format:"YYYY-MM-DD",fullWidth:!0,label:"\uc77c\uc790",id:"edDate",value:Y()(I("edDate")),...D("edDate"),variant:"outlined",defaultValue:Y()(I("edDate")),onChange:function(e){console.log("handleChangeDate=",e);let t=Y()(e);t.format("YYYY-MM-DD HH:mm:ss"),console.log("handleChangeDate.dayjs=",t.format("YYYY-MM-DD HH:mm:ss")),w("edDate",t.format("YYYY-MM-DD")),j("edDate")}})]}),(0,h.jsx)(s(),{fullWidth:!0,theme:"snow",id:"content",name:"content",type:"div",value:P,style:{minWidth:"400px",border:"1px solid primary.main",minHeight:"200px",height:"400px",maxHeight:"450px"},sx:{width:"".concat(p,"px - 50px")},modules:F,formats:T,onChange:function(e){console.log("handleChange=",e),t.current=e,w("content",e),j("content")}}),(0,h.jsx)(l.Z,{})]})})}},25266:(e,t,o)=>{o.d(t,{o:()=>s,A:()=>i});var n=o(99080),l=(o(29377),o(17592)),a=o(46417);n.Z.configure({languages:["javascript","ruby","python","java","cpp","kotlin","sql"]});const c=(0,l.ZP)("pre")((e=>{let{props:t}=e;return{...t,color:"rgb(206 204 226)",backgroundColor:"rgb(27 27 27 / 87%)",textAlign:"left",paddingLeft:"3px",width:"100%",wordBreak:"break-word",wordWrap:"break-word",whiteSpace:"pre",overflowX:"auto",borderLeft:"2px solid #358ccb"}}));function i(e){let t=0;const o=e.replace(/<span class="hljs-comment">(.|\n)*?<\/span>/g,(e=>e.replace(/\r?\n/g,(()=>'\n<span class="hljs-comment">')))),n=o.split(/\r?\n/).length-1,l=o.split(/\r?\n/).map(((e,o)=>n===o&&""===e?"":"<tr>\n              <td class='line-number' data-pseudo-content=".concat(++t,"></td>\n              <td class='line-content'>").concat(e,"</td>\n            </tr>"))).join("");return"<table class='code-table'>".concat(l,"</table>")}function s(e){const t=i(n.Z.highlightAuto(e.text).value);return(0,a.jsx)(c,{...e,children:(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:t}})})}},73786:(e,t,o)=>{o.d(t,{F3:()=>d,FR:()=>g,RV:()=>r,Rb:()=>s,YE:()=>m,t4:()=>u});var n=o(12725),l=o(47317),a=o(2024),c=o(6608),i=o(87120);const s=async(e,t)=>{console.log("fireDetailDelete.txtId=",e);const o=await(0,l.MB)(e);if(void 0===o)return void alert("\uc0ad\uc81c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.[code:d01]");const c="".concat(t,"/").concat(o.fullIndex,"/");return console.log("fireDetailDelete.treeLocate=",c),(0,n.t8)((0,n.iH)(a.h3,c),null),(0,n.t8)((0,n.iH)(a.h3,e),null),"OK"},r=async(e,t,o,c)=>{try{console.log("fireDetailMove.txtLocate=",e),console.log("fireDetailMove.base=",t),console.log("fireDetailMove.txtId=",o),console.log("fireDetailMove.moveId=",c);const i=await(0,l.MB)(e+"/"+c);if(console.log("fireDetailMove.toLocate=",e+"/"+c),console.log("fireDetailMove.toData=",i),void 0===i)return void alert("\uc774\ub3d9\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.[code:m10]");if(void 0===i.fullIndex)return void alert("\uc774\ub3d9\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.[code:m20]");const s=await(0,l.MB)(e+"/"+o);if(console.log("fireDetailMove.fromLocate=",e+"/"+o),console.log("fireDetailMove.fromData=",s),void 0===s)return void alert("\uc774\ub3d9\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.[code:m30]");if(void 0===s.fullIndex)return void alert("\uc774\ub3d9\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.[code:m40]");const r=await(0,l.MB)("".concat(t,"/").concat(s.fullIndex));console.log("onMoveSubmit.treeDataLocate=","".concat(t,"/").concat(s.fullIndex)),console.log("onMoveSubmit.treeData=",r),r.fullIndex="".concat(i.fullIndex,"/sub/").concat(o),console.log("onMoveSubmit.treeLocate=","".concat(t,"/").concat(s.fullIndex));const d="".concat(t,"/").concat(i.fullIndex,"/sub/").concat(o);console.log("onMoveSubmit.postLocate=",d),(0,n.t8)((0,n.iH)(a.h3,d),r);const u="".concat(t,"/").concat(s.fullIndex);console.log("onMoveSubmit.delLocate=",u),(0,n.t8)((0,n.iH)(a.h3,u),null)}catch(i){console.log("catch",i)}},d=async(e,t,o,c)=>{try{console.log("fireDetailMove.base=",e),console.log("fireDetailMove.gbn=",t),console.log("fireDetailMove.txtId=",o),console.log("fireDetailMove.moveId=",c);const i=await(0,l.MB)("".concat(e,"/").concat(t,"/sub/").concat(o));console.log("onMoveSubmit.treeDataLocate=","".concat(e,"/").concat(t,"/sub/").concat(o)),console.log("onMoveSubmit.treeData=",i);const s="".concat(e,"/").concat(c,"/sub/").concat(o);console.log("onMoveSubmit.postLocate=",s),(0,n.t8)((0,n.iH)(a.h3,s),i);const r="".concat(e,"_txt/").concat(o,"/gbn");console.log("onMoveSubmit.gbnLocate=",r),(0,n.t8)((0,n.iH)(a.h3,r),c);const d="".concat(e,"/").concat(t,"/sub/").concat(o);console.log("onMoveSubmit.delLocate=",d),(0,n.t8)((0,n.iH)(a.h3,d),null)}catch(i){console.log("catch",i)}},u=async(e,t,o,l,c)=>{let i=!1,s=e;return void 0===s&&(i=!0,s=(0,n.VF)((0,n.iU)((0,n.iH)(a.h3),o)).key,console.log("fireDetailPostData.newKey=",s)),(0,n.t8)((0,n.iH)(a.h3,t+s+"/title"),c.edTitle),(0,n.t8)((0,n.iH)(a.h3,t+s+"/memo"),c.content),(0,n.t8)((0,n.iH)(a.h3,t+s+"/date"),c.edDate),(0,n.t8)((0,n.iH)(a.h3,t+s+"/gbn"),c.edGbn),console.log("fireDetailPostData.fullIndex=",l),void 0!==l&&(i?((0,n.t8)((0,n.iH)(a.h3,t+s+"/fullIndex"),l),(0,n.t8)((0,n.iH)(a.h3,"".concat(o).concat(l,"/sub/").concat(s,"/title")),c.edTitle)):((0,n.t8)((0,n.iH)(a.h3,t+s+"/fullIndex"),"".concat(l,"/sub/").concat(s)),console.log("path=".concat(o).concat(l,"/title")),(0,n.t8)((0,n.iH)(a.h3,"".concat(o).concat(l,"/title")),c.edTitle))),s},g=async(e,t,o,l)=>{if(console.log("fireDetailDeleteImage.imageList=",l),void 0!==l)for(let c=0;c<l.length;c++){const s=l[c];if("Y"===s.del){(0,n.t8)((0,n.iH)(a.h3,"".concat(e,"/").concat(o,"/image/").concat(s.key)),null),console.log("fireDetailDeleteImage.delete=","".concat(e,"/").concat(o,"/image/").concat(s.key));const l=await(0,i.iH)(a.IG,"".concat(t,"/").concat(o,"/").concat(s.key,".").concat(s.ext));(0,i.oq)(l).then((()=>{console.log("fireDetailDeleteImage.storageRef=",l)})).catch((e=>{console.log("fireDetailDeleteImage.error=",e)}))}}},m=async(e,t,o,l)=>{for(let s=0;s<l.length;s++){const r=l[s].object,d=(0,c.Z)(r.name),u={ext:d,name:r.name,use:"Y"},g=(0,n.VF)((0,n.iU)((0,n.iH)(a.h3),e+"/image")).key;console.log("fireDetailImage.image.newKey",g),console.log("fireDetailImage.image.postData",u),(0,n.t8)((0,n.iH)(a.h3,"".concat(e,"/").concat(o,"/image/").concat(g)),u);const m=await(0,i.iH)(a.IG,"".concat(t,"/").concat(o,"/").concat(g,".").concat(d)),h=await(0,i.KV)(m,r);console.log("fireDetailImage.uploadBytes=",h)}}},6608:(e,t,o)=>{function n(e){var t=e.length,o=e.lastIndexOf(".");return e.substring(o+1,t).toLowerCase()}o.d(t,{Z:()=>n})}}]);