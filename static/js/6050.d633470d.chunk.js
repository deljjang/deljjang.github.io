/*! For license information please see 6050.d633470d.chunk.js.LICENSE.txt */
(self.webpackChunksiny_memo=self.webpackChunksiny_memo||[]).push([[6050],{61714:()=>{var e;!function(e){var t;(t=globalThis.window==globalThis?globalThis.window:{}).wijmo||(t.wijmo=e);var i={AutoComplete:{ariaLabels:{autoCompleteInput:"AutoComplete \uc785\ub825",autoComplete:"\uc790\ub3d9 \uc644\uc131"}},Calendar:{ariaLabels:{calendar:"\uc77c\uc815",currMo:"\ud604\uc7ac \ub2ec",monthView:"\uc6d4 \ubcf4\uae30",nxtMo:"\ub2e4\uc74c \ub2ec",nxtYr:"\ub0b4\ub144",prvMo:"\uc774\uc804 \ub2ec",prvYr:"\uc774\uc804 \uc5f0\ub3c4",today:"\uc624\ub298",yearView:"\ub144 \ubcf4\uae30",chooseDate:"\ub0a0\uc9dc \uc120\ud0dd",selectYear:"\uc5f0\ub3c4 \uc120\ud0dd",chooseMonth:"\uc6d4 \uc120\ud0dd"},buttons:{ok:"\ud655\uc778",cancel:"\ucde8\uc18c"}},CollectionViewNavigator:{ariaLabels:{byItem:{btnFirst:"\uccab \ubc88\uc9f8 \ud56d\ubaa9\uc73c\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4.",btnLast:"\ub9c8\uc9c0\ub9c9 \ud56d\ubaa9\uc73c\ub85c \uc774\ub3d9",btnNext:"\ub2e4\uc74c \ud56d\ubaa9\uc73c\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4.",btnPrev:"\uc774\uc804 \ud56d\ubaa9\uc73c\ub85c \uc774\ub3d9"},byPage:{btnFirst:"\uccab \ubc88\uc9f8 \ud398\uc774\uc9c0\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4.",btnLast:"\ub9c8\uc9c0\ub9c9 \ud398\uc774\uc9c0\ub85c \uc774\ub3d9",btnNext:"\ub2e4\uc74c \ud398\uc774\uc9c0\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4.",btnPrev:"\uc774\uc804 \ud398\uc774\uc9c0\ub85c \uc774\ub3d9"}}},ComboBox:{ariaLabels:{comboBoxInput:"ComboBox \uc785\ub825",comboBox:"\ucf64\ubcf4 \ubc15\uc2a4"}},DropDown:{ariaLabels:{tgl:"\ud1a0\uae00 \uba54\ub274"}},FlexChartAnalytics:{BreakEven:{breakEven:"\uc190\uc775\ubd84\uae30",fixedCost:"\uace0\uc815\ube44\uc6a9",lossArea:"\uc190\uc2e4\uc601\uc5ed",marginalProfit:"\ud55c\uacc4\uc774\uc724",profitArea:"\uc774\uc775\uc601\uc5ed",safetyMargin:"\uc548\uc804\ub9c8\uc9c4",salesRevenue:"\ub9e4\ucd9c\uc561",totalCost:"\ucd1d\ube44\uc6a9",variableCost:"\uac00\ubcc0\ube44\uc6a9"}},FlexGrid:{ariaLabels:{toggleDropDown:"\ud1a0\uae00 \uba54\ub274",toggleGroup:"\uc804\ud658 \uadf8\ub8f9",pinning:"\uace0\uc815 \uac00\ub2a5",pined:"\uace0\uc815\ub428",sortIndex:"\uc815\ub82c \uc21c\uc11c",pencil:"\ud3b8\uc9d1 \uc911\uc778 \ud56d\ubaa9",collapse:"\uc811\ud78c \uc5f4 \ud5e4\ub354",asterisk:"\uc0c8 \ud589 \ud15c\ud50c\ub9bf",rowHeader:"\ud589 \ud5e4\ub354",topleft:"\uc67c\ucabd \uc0c1\ub2e8",checked:"\uc120\ud0dd\ub428",unchecked:"\uc120\ud0dd\ub418\uc9c0 \uc54a\uc74c",editCell:"\uc140 \ud3b8\uc9d1",imeInput:"IME \uc785\ub825",radioButtonChecked:"\ub77c\ub514\uc624 \ubc84\ud2bc \uc120\ud0dd\ub428",newRowCell:"\uc0c8 \ud589 \uc140"},groupHeaderFormat:"{name}: <b>{value}</b> ({count:n0} \ud56d\ubaa9)",accessibilityHelperMessage:{insertRow:"{index}\ud589 \uc55e\uc5d0 \uc0bd\uc785",deleteRow:"{index}\ud589 \uc0ad\uc81c",pin:{pinColumnName:"\uc5f4 \uace0\uc815: {name}",unpinColumnName:"\uc5f4 \uace0\uc815 \ud574\uc81c: {name}",pinColumnIndex:"\uace0\uc815: {colIndex}",unpin:"\uace0\uc815 \ud574\uc81c"},sort:{sortAscending:"{name} \uc5f4 \uc624\ub984\ucc28\uc21c \uc815\ub82c",sortDescending:"{name} \uc5f4 \ub0b4\ub9bc\ucc28\uc21c \uc815\ub82c",clearSort:"\uc815\ub82c \ud574\uc81c"},frozen:{frozenColumn:"\uace0\uc815 \uc5f4: {col}, \ud589: {row}",unfrozenColumn:"\uace0\uc815 \ud574\uc81c \uc5f4: {col}, \ud589: {row}"},imeHandler:{focusImeCell:"{value} {rowName} \ud589 {rowIndex}, {colName} \uc5f4 {colIndex}"}}},FlexGridDetailProvider:{ariaLabels:{toggleDetail:"\uc804\ud658 \ud589 \uc138\ubd80 \uc0ac\ud56d"},accessibilityHelperMessage:{showDetail:"\uc138\ubd80 \ud589 \ud45c\uc2dc: {rowIndex}",hideDetail:"\uc138\ubd80 \ud589 \uc228\uae30\uae30: {rowIndex}"}},FlexGridFilter:{and:"\ubc0f",apply:"\uc801\uc6a9",ariaLabels:{active:"\ud65c\ub3d9\uc801\uc778",and:"\ub450 \uc870\uac74 \ud544\uc694",asc:"\uc624\ub984\ucc28\uc21c \uc815\ub82c \uc5f4",dialog:"\uc5f4\uc5d0 \ub300\ud55c \ud544\ud130 \ud3b8\uc9d1\uae30",dsc:"\ub0b4\ub9bc\ucc28\uc21c \uc815\ub82c \uc5f4",edit:"\uc5f4\uc5d0 \ub300\ud55c \ud544\ud130\ub97c \ud3b8\uc9d1",listBox:"\ud544\ud130\ub9c1\uc5d0 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \uc635\uc158 \ubaa9\ub85d",op1:"\uccab \ubc88\uc9f8 \uc870\uac74 \uc5f0\uc0b0\uc790",op2:"\ub450 \ubc88\uc9f8 \uc870\uac74 \uc5f0\uc0b0\uc790",or:"\ud544\uc694 \uc870\uac74 \uc911 \ud558\ub098\uac00",search:"\uac80\uc0c9 \ud56d\ubaa9 \ubaa9\ub85d",val1:"\uccab \ubc88\uc9f8 \uc870\uac74 \uac12",val2:"\ub450 \ubc88\uc9f8 \uc870\uac74 \uac12"},accessibilityHelperMessage:{filter:{filterColumn:"{name} \uc5f4 \ud544\ud130 \ub300\ud654\uc0c1\uc790 \uc5f4\uae30",closeFilterDialog:"\ud544\ud130 \ucc3d \ub2eb\uae30"}},ascending:"\u2191 \uc624\ub984\ucc28\uc21c",booleanOperators:[{name:"(\uc124\uc815 \ub418\uc9c0 \uc54a\uc74c)",op:null},{name:"\ub2e4\uc74c\uacfc \uac19\uc744 \uacbd\uc6b0",op:0},{name:"\ub2e4\uc74c\uacfc \uac19\uc9c0 \uc54a\uc744 \uacbd\uc6b0",op:1}],cancel:"\ucde8\uc18c",clear:"\uc9c0\uc6c0",conditions:"\uc870\uac74\uc5d0 \ub530\ub978 \ud544\ud130",dateOperators:[{name:"(\uc124\uc815 \ub418\uc9c0 \uc54a\uc74c)",op:null},{name:"\ub2e4\uc74c\uacfc \uac19\uc744 \uacbd\uc6b0",op:0},{name:"\ub2e4\uc74c\uc758 \uac12\ubcf4\ub2e4 \uc55e\uc5d0 \uc788\ub294 \uacbd\uc6b0",op:4},{name:"\ub2e4\uc74c\uc758 \uac12\ubcf4\ub2e4 \ub4a4\uc5d0 \uc788\ub294 \uacbd\uc6b0",op:2}],descending:"\u2193 \ub0b4\ub9bc\ucc28\uc21c",exceedsMaxValues:"\ubaa8\ub4e0 \ud56d\ubaa9\uc774 \ud45c\uc2dc\ub418\ub294 \uac83\uc740 \uc544\ub2d9\ub2c8\ub2e4",header:"\uac12\uc774 \uc788\ub294 \ud56d\ubaa9 \ud45c\uc2dc",includeSelection:"\ud604\uc7ac \uc120\ud0dd \uc601\uc5ed \ud3ec\ud568",null:"(\uc5c6\uc74c)",numberOperators:[{name:"(\uc124\uc815 \ub418\uc9c0 \uc54a\uc74c)",op:null},{name:"\ub2e4\uc74c\uacfc \uac19\uc744 \uacbd\uc6b0",op:0},{name:"\ub2e4\uc74c\uacfc \uac19\uc9c0 \uc54a\uc744 \uacbd\uc6b0",op:1},{name:"\ub2e4\uc74c\uc758 \uac12\ubcf4\ub2e4 \ud070 \uacbd\uc6b0",op:2},{name:"\ub2e4\uc74c\uc758 \uac12\ubcf4\ub2e4 \ud06c\uac70\ub098 \uac19\uc740 \uacbd\uc6b0",op:3},{name:"\ub2e4\uc74c\uc758 \uac12\ubcf4\ub2e4 \uc791\uc740 \uacbd\uc6b0",op:4},{name:"\ub2e4\uc74c\uc758 \uac12\ubcf4\ub2e4 \uc791\uac70\ub098 \uac19\uc740 \uacbd\uc6b0",op:5}],or:"\ub610\ub294",popupBody:"\uc774 \uc5f4\uc5d0\ub294 250\uac1c \uc774\uc0c1\uc758 \uace0\uc720 \ud56d\ubaa9\uc774 \uc788\uc2b5\ub2c8\ub2e4. \ucc98\uc74c 250\uac1c\uc758 \uace0\uc720 \ud56d\ubaa9\ub9cc \ud45c\uc2dc\ub429\ub2c8\ub2e4.",popupOkButton:"\uc88b\uc544\uc694",search:"\uac80\uc0c9",selectAll:"\ubaa8\ub450 \uc120\ud0dd",stringOperators:[{name:"(\uc124\uc815 \ub418\uc9c0 \uc54a\uc74c)",op:null},{name:"\ub2e4\uc74c\uacfc \uac19\uc744 \uacbd\uc6b0",op:0},{name:"\ub2e4\uc74c\uacfc \uac19\uc9c0 \uc54a\uc744 \uacbd\uc6b0",op:1},{name:"\ub2e4\uc74c\uc758 \uac12\uc73c\ub85c \uc2dc\uc791\ud558\ub294 \uacbd\uc6b0",op:6},{name:"\ub2e4\uc74c\uc758 \uac12\uc73c\ub85c \uc2dc\uc791\ud558\uc9c0 \uc54a\uc74c",op:10},{name:"\ub2e4\uc74c\uc758 \uac12\uc73c\ub85c \ub05d\ub098\ub294 \uacbd\uc6b0",op:7},{name:"\ub2e4\uc74c\uc758 \uac12\uc73c\ub85c \ub05d\ub098\uc9c0 \uc54a\uc74c",op:11},{name:"\ub2e4\uc74c\uc758 \uac12\uc744 \ud3ec\ud568\ud558\ub294 \uacbd\uc6b0",op:8},{name:"\ub2e4\uc74c\uc758 \uac12\uc744 \ud3ec\ud568\ud558\uc9c0 \uc54a\ub294 \uacbd\uc6b0",op:9}],values:"\uac12\uc5d0 \ub530\ub978 \ud544\ud130"},FlexSheet:{convertTable:"\ud45c \ubcc0\ud658",copyCells:"\uc140 \ubcf5\uc0ac",deleteCol:"\uc5f4 \uc0ad\uc81c",deleteRow:"\ud589 \uc0ad\uc81c",deleteSheet:"\uc0ad\uc81c",fillFormat:"\uc11c\uc2dd\ub9cc \ucc44\uc6b0\uae30",fillSeries:"\uc5f0\uc18d \ub370\uc774\ud130 \ucc44\uc6b0\uae30",fillWithoutFormat:"\uc11c\uc2dd \uc5c6\uc774 \ucc44\uc6b0\uae30",insertCol:"\uc5f4 \uc0bd\uc785",insertRow:"\ud589 \uc0bd\uc785",insertSheet:"\uc0bd\uc785",renameSheet:"\uc774\ub984 \ubc14\uafb8\uae30"},Globalize:{calendar:{"/":"-",":":":",am:["\uc624\uc804","\uc624\uc804"],days:["\uc77c\uc694\uc77c","\uc6d4\uc694\uc77c","\ud654\uc694\uc77c","\uc218\uc694\uc77c","\ubaa9\uc694\uc77c","\uae08\uc694\uc77c","\ud1a0\uc694\uc77c"],daysAbbr:["\uc77c","\uc6d4","\ud654","\uc218","\ubaa9","\uae08","\ud1a0"],eras:["\uc11c\uae30"],firstDay:0,months:["1\uc6d4","2\uc6d4","3\uc6d4","4\uc6d4","5\uc6d4","6\uc6d4","7\uc6d4","8\uc6d4","9\uc6d4","10\uc6d4","11\uc6d4","12\uc6d4"],monthsAbbr:["1","2","3","4","5","6","7","8","9","10","11","12"],patterns:{D:'yyyy"\ub144" M"\uc6d4" d"\uc77c" dddd',F:'yyyy"\ub144" M"\uc6d4" d"\uc77c" dddd tt h:mm:ss',G:"yyyy-MM-dd tt h:mm:ss",M:'M"\uc6d4" d"\uc77c"',T:"tt h:mm:ss",Y:'yyyy"\ub144" M"\uc6d4"',d:"yyyy-MM-dd",f:'yyyy"\ub144" M"\uc6d4" d"\uc77c" dddd tt h:mm',g:"yyyy-MM-dd tt h:mm",m:'M"\uc6d4" d"\uc77c"',s:'yyyy"-"MM"-"dd"T"HH":"mm":"ss',t:"tt h:mm",y:'yyyy"\ub144" M"\uc6d4"'},pm:["\uc624\ud6c4","\uc624\ud6c4"]},displayName:"Korean",name:"ko",numberFormat:{"%":"%","+":"+",",":",","-":"-",".":".",currency:{decimals:0,pattern:["-$n","$n"],symbol:"\u20a9"},percent:{pattern:["-n%","n%"]}}},GroupPanel:{dragDrop:"\uc5f4\uc744 \uc5ec\uae30\uc5d0 \ub04c\uc5b4\ub2e4 \ub193\uc73c\uba74 \uadf8\ub8f9\uc744 \uc0dd\uc131\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.",groupPanel:"\uadf8\ub8f9\ud654\ub41c \uc5f4 \ud328\ub110",groupDescription:"{0}{1} \uae30\uc900\uc73c\ub85c \uadf8\ub8f9\ud654\ub428",groupAction:"\uc815\ub82c \uc804\ud658 \ub610\ub294 \uadf8\ub8f9 \uc81c\uac70\ub97c \uc704\ud574 \ud65c\uc131\ud654\ud558\uc138\uc694.",sortedAsc:", \uc624\ub984\ucc28\uc21c \uc815\ub82c\ub428",sortedDesc:", \ub0b4\ub9bc\ucc28\uc21c \uc815\ub82c\ub428",sortedAscStatus:"{0} \uc624\ub984\ucc28\uc21c",sortedDescStatus:"{0} \ub0b4\ub9bc\ucc28\uc21c",remove:"\uadf8\ub8f9 \uc81c\uac70"},InputDateTime:{ariaLabels:{tglDate:"\ud1a0\uae00 \uc77c\uc815",tglTime:"\uc804\ud658 \uc2dc\uac04 \ubaa9\ub85d",inputDateTimeInput:"InputDateTime \uc785\ub825"}},InputNumber:{ariaLabels:{decVal:"\uac12 \uac10\uc18c",incVal:"\uac12 \uc99d\uac00",inputNumberInput:"InputNumber \uc785\ub825",inputNumber:"\uc22b\uc790 \uc785\ub825"}},InputTime:{ariaLabels:{inputTimeInput:"InputTime \uc785\ub825",inputTime:"\uc2dc\uac04 \uc785\ub825"}},Licensing:{cls:"\ub2eb\uae30",ctc:'<p style="text-align:left"><b>\ud574\ub2f9 \ubc84\uc804\uc740 \ud3c9\uac00 \ubc84\uc804\uc73c\ub85c, \uc815\uc2dd \ubc30\ud3ec\ub97c \uc704\ud574\uc11c\ub294<br/> \ubc30\ud3ec \ub77c\uc774\uc120\uc2a4 \uad6c\ub9e4\uac00 \ud544\uc694\ud569\ub2c8\ub2e4. <br/><br/> <a href="https://www.mescius.co.kr/wijmo#price" style="text-decoration:underline;">Wijmo \uac00\uaca9 \ubc0f \ub77c\uc774\uc120\uc2a4</a><br/></b></p>',dmn:"\uc751\uc6a9 \ud504\ub85c\uadf8\ub7a8\uc758 Wijmo \ub77c\uc774\uc120\uc2a4\ub294 \ud604\uc7ac \ub3c4\uba54\uc778\uc5d0 \ub300\ud574 \uc720\ud6a8\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \ub77c\uc774\uc120\uc2a4 \ub3c4\uba54\uc778\uc740 <b>{licDomain}</b>\uc774\uba70 \ud604\uc7ac \ub3c4\uba54\uc778\uc740 <b>{domain}</b>\uc785\ub2c8\ub2e4.",evl:"Wijmo \ud3c9\uac00 \ubc84\uc804 ({version})",exp:"\uc751\uc6a9 \ud504\ub85c\uadf8\ub7a8\uc5d0\uc11c Wijmo \ub77c\uc774\uc120\uc2a4\uac00 \ub9cc\ub8cc \ub418\uc5c8\uc2b5\ub2c8\ub2e4. \ub77c\uc774\uc120\uc2a4 \ub9cc\ub8cc \ub0a0\uc9dc\ub294  <b> {expDate:d}</b>\uc785\ub2c8\ub2e4.",hdr:"Wijmo \ub77c\uc774\uc120\uc2a4",lic:"\uc751\uc6a9 \ud504\ub85c\uadf8\ub7a8\uc5d0\uc11c Wijmo \ub77c\uc774\uc120\uc2a4\uac00 \uc720\ud6a8\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. <br/>",mss:"\uc751\uc6a9 \ud504\ub85c\uadf8\ub7a8\uc5d0\uc11c Wijmo \ub77c\uc774\uc120\uc2a4\uac00 \uc124\uc815\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.",prd:"\uc751\uc6a9 \ud504\ub85c\uadf8\ub7a8\uc5d0\uc11c Wijmo \ub77c\uc774\uc120\uc2a4\uac00  <b> {control} </b>  \ucee8\ud2b8\ub864\uc5d0 \ub300\ud574 \uc720\ud6a8\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.",ver:"\uc751\uc6a9 \ud504\ub85c\uadf8\ub7a8\uc5d0\uc11c Wijmo \ub77c\uc774\uc120\uc2a4\uac00 \uc0ac\uc6a9 \uc911\uc778 \ubc84\uc804\uc5d0 \ub300\ud574 \uc720\ud6a8\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \ud604\uc7ac \ub77c\uc774\uc120\uc2a4 \ubc84\uc804\uc740 <b>{licVer}</b>\uc774\uba70 \uc81c\ud488 \ubc84\uc804\uc740 <b>{version}</b>\uc785\ub2c8\ub2e4."},Menu:{ariaLabels:{menuButton:"\uba54\ub274"}},MultiAutoComplete:{ariaLabels:{multiAutoCompleteInput:"MultiAutoComplete \uc785\ub825"}},MultiSelect:{itemsSelected:"{count:n0} \ud56d\ubaa9 \uc120\ud0dd",selectAll:"\ubaa8\ub450 \uc120\ud0dd",ariaLabels:{multiSelectInput:"MultiSelect \uc785\ub825",multiSelect:"\ub2e4\uc911 \uc120\ud0dd"}},MultiSelectListBox:{filterPlaceholder:"\ud544\ud130",selectAll:"\ubaa8\ub450 \uc120\ud0dd"},Viewer:{abstractMethodException:"\ucd94\uc0c1 \uba54\uc11c\ub4dc\uc785\ub2c8\ub2e4. \uc2e4\ud589\uc2dc\ucf1c \uc8fc\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4.",allowCopyContent:"\ub0b4\uc6a9 \ubcf5\uc0ac \ub610\ub294 \ucd94\ucd9c \ud5c8\uc6a9",allowEditAnnotations:"\uc8fc\uc11d \ud3b8\uc9d1 \ud5c8\uc6a9",allowEditContent:"\ucf58\ud150\uce20 \ud3b8\uc9d1\uc744 \ud5c8\uc6a9",allowPrint:"\uc778\uc1c4 \ud5c8\uc6a9",apply:"\uc801\uc6a9",backwardHistory:"\ub4a4\ub85c",bmpExportName:"BMP \uc774\ubbf8\uc9c0",bottom:"\uc544\ub798\ucabd:",cancel:"\ucde8\uc18c",cannotRenderPageNoDoc:"\ubb38\uc11c \uc18c\uc2a4\uc640 \ubdf0 \ud398\uc774\uc9c0 \uc5c6\uc774 \ud398\uc774\uc9c0\ub97c \ub80c\ub354\ub9c1 \ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.",cannotRenderPageNoViewPage:"\ubb38\uc11c \uc18c\uc2a4\uc640 \ubdf0 \ud398\uc774\uc9c0 \uc5c6\uc774 \ud398\uc774\uc9c0\ub97c \ub80c\ub354\ub9c1 \ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.",cannotSearch:"\uac80\uc0c9\uc744 \uc704\ud574\uc11c\ub294 \ubb38\uc11c \uc18c\uc2a4\ub97c \uc9c0\uc815 \ud574\uc57c \ud569\ub2c8\ub2e4.",checkMark:"\u2713",continuousMode:"\uc5f0\uc18d \ud398\uc774\uc9c0 \ubcf4\uae30",csvExportName:"CSV",docExportName:"Microsoft Word",docInfoAuthor:"\uc791\uc131\uc790",docInfoComment:"\ubcf4\uace0\uc0ac\ud56d",docInfoCompany:"\ud68c\uc0ac",docInfoCreationTime:"\uc0dd\uc131 \uc2dc\uac04",docInfoCreator:"\ub9cc\ub4e0 \uc774",docInfoKeywords:"\ud0a4\uc6cc\ub4dc",docInfoManager:"\uad00\ub9ac\uc790",docInfoOperator:"\uc5f0\uc0b0\uc790",docInfoProducer:"\uc81c\uc791\uc790",docInfoRevisionTime:"\uc218\uc815 \uc2dc\uac04",docInfoSubject:"\uc8fc\uc81c",docInfoTitle:"\uc81c\ubaa9",documentInfoGroup:"\ubb38\uc11c \uc815\ubcf4",documentRestrictionsGroup:"\ubb38\uc11c \uc81c\ud55c",docxExportName:"Open XML \uc6cc\ub4dc",embedFonts:"TrueType \uae00\uaf34 \ud3ec\ud568",emfExportName:"\ud5a5\uc0c1 \ub41c \uba54\ud0c0 \ud30c\uc77c",encryptionType:"\uc554\ud638\ud654 \uc218\uc900:",errorOccured:"\uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.",exitFullScreen:"\uc804\uccb4 \ud654\uba74 \ub05d\ub0b4\uae30",exportFormat:"\ub0b4\ubcf4\ub0b4\uae30 \ud615\uc2dd:",exportOk:"\uc218\ucd9c\u2026",exportOptionTitle:"\ub0b4\ubcf4\ub0b4\uae30 \uc635\uc158",exports:"\ub0b4\ubcf4\ub0b4\uae30",firstPage:"\uccab \ud398\uc774\uc9c0",forwardHistory:"\uc55e\uc73c\ub85c",fullScreen:"\uc804\uccb4 \ud654\uba74",generalGroup:"\uc77c\ubc18",gifExportName:"GIF \uc774\ubbf8\uc9c0",hamburgerMenu:"\ub3c4\uad6c",htmlExportName:"HTML \ubb38\uc11c",invalidParameterError:"\uc798\ubabb\ub41c \uc785\ub825\uc785\ub2c8\ub2e4.",jpegExportName:"JPEG \uc774\ubbf8\uc9c0",jpgExportName:"JPEG \uc774\ubbf8\uc9c0",landscape:"\uac00\ub85c",lastPage:"\ub9c8\uc9c0\ub9c9 \ud398\uc774\uc9c0",left:"\uc67c\ucabd:",loading:"\ub85c\ub4dc \uc911\uc785\ub2c8\ub2e4\u2026",magnifierTool:"\ub3cb\ubcf4\uae30",margins:"\uc5ec\ubc31(\uc778\uce58)",matchCase:"\ub300/\uc18c\ubb38\uc790 \uad6c\ubd84",matchCaseMenuItem:"\ub300/\uc18c\ubb38\uc790 \uad6c\ubd84",metafileExportName:"\uc555\ucd95\ub41c \uba54\ud0c0 \ud30c\uc77c",metafileType:"Metafile \ud615\uc2dd:",mhtmlExportName:"\uc6f9 \ubcf4\uad00 \ud30c\uc77c (MHTML)",monochrome:"\ud751\ubc31",moveTool:"\uc774\ub3d9 \ub3c4\uad6c",navigatorPosition:"\ud0d0\uc0c9\uae30 \uc704\uce58",nextPage:"\ub2e4\uc74c \ud398\uc774\uc9c0",nullParameterError:"\uac12\uc774 null\uc77c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.",ok:"\ud655\uc778",orientation:"\ubc29\ud5a5:",outlines:"\ubb38\uc11c \uad6c\uc870",outputRange:"\ud398\uc774\uc9c0 \ubc94\uc704:",outputRangeGroup:"\ucd9c\ub825 \ubc94\uc704",outputRangeInverted:"\ubc18\uc804",ownerPassword:"\uad8c\ud55c(\uc18c\uc720\uc790) \uc554\ud638:",pageCount:"\ud398\uc774\uc9c0 \uc218",pageNumber:"\ud398\uc774\uc9c0 \ubc88\ud638",pageSetup:"\ud398\uc774\uc9c0 \uc124\uc815",pageWidth:"\ud398\uc774\uc9c0 \ub108\ube44 \ub9de\ucd94\uae30",paged:"\ud398\uc774\uc9d5",paginated:"\uc778\uc1c4 \ub808\uc774\uc544\uc6c3",paperKind:"\uc885\uc774 \uc885\ub958:",parameterAllItemsSelected:"(\ubaa8\ub450)",parameterNoneItemsSelected:"(\uc5c6\uc74c)",parameterSelectAllItemText:"(\ubaa8\ub450 \uc120\ud0dd)",parameters:"\ub9e4\uac1c \ubcc0\uc218",passwordSecurityGroup:"\uc554\ud638 \ubcf4\uc548",pdfACompatible:"PDF/A \ud638\ud658 (\ub808\ubca8 2B)",pdfExportName:"Adobe PDF",pictureLayer:"\ubcc4\ub3c4 \uc774\ubbf8\uc9c0 \ub808\uc774\uc5b4\ub97c \uc0ac\uc6a9",pngExportName:"PNG \uc774\ubbf8\uc9c0",portrait:"\uc138\ub85c",previousPage:"\uc774\uc804 \ud398\uc774\uc9c0",print:"\uc778\uc1c4",requiringParameters:"\ub9e4\uac1c \ubcc0\uc218\ub97c \uc785\ub825\ud558\uc2ed\uc2dc\uc624.",resolution:"\ud574\uc0c1\ub3c4:",right:"\uc624\ub978\ucabd:",rotateDocument:"\ubb38\uc11c \ud68c\uc804",rotatePage:"\ud398\uc774\uc9c0 \ud68c\uc804",rtfExportName:"RTF \ubb38\uc11c",rubberbandTool:"\uc120\ud0dd \uc601\uc5ed \ud655\ub300",search:"\uac80\uc0c9",searchNext:"\ub2e4\uc74c \uac80\uc0c9",searchOptions:"\uac80\uc0c9 \uc635\uc158",searchPrev:"\uc774\uc804 \uac80\uc0c9",searchResults:"\uac80\uc0c9 \uacb0\uacfc",selectParameterValue:"(\uac12\uc744 \uc120\ud0dd)",selectTool:"\ub3c4\uad6c \uc120\ud0dd",showNavigator:"\ud0d0\uc0c9\uae30 \ud45c\uc2dc",showSearchBar:"\uac80\uc0c9 \ucc3d \ud45c\uc2dc",showZoomBar:"\ud655\ub300/\ucd95\uc18c \ub9c9\ub300",singleFile:"\ub2e8\uc77c \ud30c\uc77c",singleMode:"\ub2e8\uc77c \ud398\uc774\uc9c0 \ubcf4\uae30",thumbnails:"\ud398\uc774\uc9c0 \ucd95\uc18c\ud310",tiffExportName:"Tiff \uc774\ubbf8\uc9c0",tolerance:"\ud14d\uc2a4\ud2b8 \ubc94\uc704(\ud3ec\uc778\ud2b8)\ub97c \uac10\uc9c0\ud558\ub294 \uacbd\uc6b0 \ud5c8\uc6a9 \uc624\ucc28:",top:"\uc704\ucabd:",useCompression:"\uc555\ucd95 \uc0ac\uc6a9",useOutlines:"\uc544\uc6c3\ub77c\uc778 \uc0dd\uc131",userPassword:"\ubb38\uc11c \uc5f4\uae30(\uc0ac\uc6a9\uc790) \ube44\ubc00 \ubc88\ud638:",viewMenu:"\ub808\uc774\uc544\uc6c3 \uc635\uc158",wholePage:"\uc804\uccb4 \ud398\uc774\uc9c0 \ub9de\ucd94\uae30",wholeWord:"\uc804\uccb4 \ub2e8\uc5b4 \uc77c\uce58",wholeWordMenuItem:"\ub2e8\uc5b4 \ub2e8\uc704\ub85c",xlsExportName:"Microsoft Excel",xlsxExportName:"Open XML Excel",zoomFactor:"\ud655\ub300/\ucd95\uc18c \ube44\uc728",zoomIn:"\ud655\ub300",zoomOut:"\ucd95\uc18c"},Popup:{ariaLabels:{close:"\ub2eb\uae30",backdrop:"\ubc30\uacbd",isDraggable:"\ub4dc\ub798\uadf8 \uac00\ub2a5",isResizable:"\ud06c\uae30 \uc870\uc808 \uac00\ub2a5",popupVisible:"\ud45c\uc2dc\ub428",popupHide:"\uc228\uae40",popup:"\ud31d\uc5c5"}},Listbox:{ariaLabels:{listBox:"\ubaa9\ub85d \uc0c1\uc790"}},olap:{DetailDialog:{col:"\uc138\ub85c \ub9c9\ub300\ud615",header:"\uc138\ubd80 \uc815\ubcf4 \ubcf4\uae30:",item:"{cnt} \ud56d\ubaa9",items:"{cnt:n0} \ud56d\ubaa9",ok:"\ud655\uc778",row:"Row"},PivotChart:{and:"and",by:"\uae30\uc900"},PivotEngine:{grandTotal:"\ucd1d\ud569\uacc4",subTotal:"\ubd80\ubd84\ud569"},PivotFieldEditor:{aggs:{avg:"\ud3c9\uade0",cnt:"\uac1c\uc218",first:"\uccab \ubc88\uc9f8",last:"\ub9c8\uc9c0\ub9c9",max:"MAX",min:"MIN",rng:"\ubc94\uc704",std:"\ud45c\ubcf8_\ud45c\uc900_\ud3b8\ucc28",stdp:"StdDevPop",sum:"\ud569\uacc4",var:"VAR",varp:"VarPop"},calcs:{dCol:"\uc774\uc804 \uc5f4\uc5d0\uc11c \ucc28\uc774",dColPct:"\uc774\uc804 \uc5f4\uc5d0\uc11c \ucc28\uc774 %",dPctCol:"\uc5f4 \ud569\uacc4\uc758 %",dPctGrand:"\ucd1d\uacc4\uc758 %",dPctRow:"\ud589 \ud569\uacc4\uc758 %",dPrevCol:"\uc774\uc804 \uc5f4\uc5d0 \uc788\ub294 \uac12\uc758 %",dPrevRow:"\uc774\uc804 \ud589\uc5d0\uc11c \uac12\uc758 %",dRow:"\uc774\uc804 \ud589\uc5d0\uc11c \ucc28\uc774",dRowPct:"\uc774\uc804 \ud589\uc5d0\uc11c \ucc28\uc774 %",dRunTot:"\ub204\uc801 \ud569\uacc4",dRunTotPct:"\ub204\uc801 \ud569\uacc4 %",noCalc:"\uacc4\uc0b0 \uc5c6\uc74c"},cancel:"\ucde8\uc18c",clear:"\uc9c0\uc6b0\uae30",dialogHeader:"\ud544\ub4dc \uc124\uc815:",edit:"\ud3b8\uc9d1\u2026",filter:"\ud544\ud130:",format:"\ud615\uc2dd:",formats:{FYEEEEQU:'\ud68c\uacc4 \uc5f0\ub3c4 \ubd84\uae30 ("\ub144\ub3c4" EEEE "Q" U)',MMMMddyyyy:"\uc6d4 \uc77c \ub144 (MMMM dd, yyyy)",MMMMyyyy:"\ub2ec \ub144 (MMMM yyyy)",MMMyyyy:"\ub2ec \ub144 (MMM yyyy)",c:"\ud1b5\ud654 (c)",d:"\ub0a0\uc9dc (d)",dMyy:"\uc77c \uc6d4 \ub144 (d/M/yy)",dMyyyy:"\uc77c \uc6d4 \ub144 (M/dd/yyyy)",ddMyy:"\uc77c \uc6d4 \ub144 (dd/M/yy)",n0:"\uc815\uc218 (n0)",n2:"\uc9c4\uc218 (n2)",n2c:"\uc218\ucc9c (n2,)",n2cc:"\uc218\ubc31\ub9cc (n2,,)",n2ccc:"\uc218\uc2ed\uc5b5 (n2,,,)",p0:"\ube44\uc728 (p0)",p2:"\ube44\uc728 (p2)",yyyy:"\uc5f0\ub3c4 (yyyy)",yyyyQq:'\uc5f0\ub3c4 \ubd84\uae30 (yyyy "Q" q)'},header:"\ud5e4\ub354:",none:"(\uc5c6\uc74c)",ok:"\ud655\uc778",sample:"\ubbf8\ub9ac \ubcf4\uae30:",showAs:"\ud45c\uc2dc:",sort:"\uc815\ub82c:",sorts:{asc:"\uc624\ub984\ucc28\uc21c",desc:"\ub0b4\ub9bc\ucc28\uc21c"},summary:"\uc694\uc57d:",weighBy:"\ubb34\uac8c \uae30\uc900:"},PivotPanel:{cols:"\uc5f4",defer:"\uc5c5\ub370\uc774\ud2b8 \uc9c0\uc5f0",drag:"\uc544\ub798 \uc601\uc5ed \uc0ac\uc774\uc5d0 \ud544\ub4dc\ub97c \ub04c\uc5b4 \ub193\uc73c\uc2ed\uc2dc\uc624:",fields:"\ubcf4\uace0\uc11c\uc5d0 \ucd94\uac00\ud560 \ud544\ub4dc \uc120\ud0dd:",filters:"\ud544\ud130",rows:"\ud589",update:"\uc5c5\ub370\uc774\ud2b8",vals:"\uac12"},Slicer:{clearFilter:"\ud544\ud130 \uc9c0\uc6b0\uae30",multiSelect:"\ub2e4\uc911 \uc120\ud0dd"},_ListContextMenu:{cols:"\uc5f4 \ub808\uc774\ube14\ub85c \uc774\ub3d9",detail:"\uc790\uc138\ud788 \ubcf4\uae30\u2026",down:"\uc544\ub798\ub85c \uc774\ub3d9",edit:"\ud544\ub4dc \uc124\uc815\u2026",filter:"\ubcf4\uace0\uc11c \ud544\ud130\ub85c \uc774\ub3d9",first:"\ucc98\uc74c\uc73c\ub85c \uc774\ub3d9",last:"\ub05d\uc73c\ub85c \uc774\ub3d9",remove:"\ud544\ub4dc \uc81c\uac70",rows:"\ud589 \ub808\uc774\ube14\ub85c \uc774\ub3d9",up:"\uc704\ub85c \uc774\ub3d9",vals:"\uac12\uc73c\ub85c \uc774\ub3d9"}},InputDate:{ariaLabels:{inputDateInput:"InputDate \uc785\ub825",button:"\ub0a0\uc9dc \uc120\ud0dd",dialog:"\uce98\ub9b0\ub354",inputDate:"\ub0a0\uc9dc \uc785\ub825"}},InputDateRange:{ariaLabels:{inputDateRangeInput:"InputDateRange \uc785\ub825"}},FlexGridSearch:{ariaLabels:{flexGridSearchInput:"\uadf8\ub9ac\ub4dc \uac80\uc0c9",button:"\uac80\uc0c9 \ud14d\uc2a4\ud2b8 \uc9c0\uc6b0\uae30"}},Selector:{ariaLabels:{selectRow:"\ud589 \uc120\ud0dd",selectAllRows:"\ubaa8\ub4e0 \ud589 \uc120\ud0dd",selectGroupRows:"\uadf8\ub8f9 \ud589 \uc120\ud0dd",deselectRow:"\ud589 \uc120\ud0dd \ud574\uc81c",deselectAllRows:"\ubaa8\ub4e0 \ud589 \uc120\ud0dd \ud574\uc81c",deselectGroupRows:"\uadf8\ub8f9 \ud589 \uc120\ud0dd \ud574\uc81c"}},BooleanChecker:{ariaLabels:{checkAll:"\ubaa8\ub450 \uc120\ud0dd",uncheckAll:"\ubaa8\ub450 \uc120\ud0dd \ud574\uc81c"}},InputMask:{ariaLabels:{inputMask:"\uc785\ub825 \ub9c8\uc2a4\ud06c"}},InputColor:{ariaLabels:{inputColor:"\uc0c9\uc0c1 \uc120\ud0dd\uae30"}}},n=t.wijmo._updateCulture;n?n(i):(t.wijmo.culture=i,t.wijmo._loadedCultures||(t.wijmo._loadedCultures={}),t.wijmo._loadedCultures[i.Globalize.name]=i)}(e||(e={}))},3177:(e,t,i)=>{"use strict";i.d(t,{MC:()=>gi,aK:()=>vi});var n={};i.r(n),i.d(n,{AutoComplete:()=>Me,AutoCompleteClsNames:()=>O,Calendar:()=>ge,CalendarClsNames:()=>L,CalendarTabKeyAction:()=>ue,ClickAction:()=>pe,CollectionViewNavigator:()=>re,CollectionViewNavigatorClsNames:()=>F,ColorPicker:()=>oe,ColorPickerClsNames:()=>B,ComboBox:()=>Ie,ComboBoxClsNames:()=>V,DateSelectionMode:()=>ae,DropDown:()=>ve,DropDownClsNames:()=>j,FormatItemEventArgs:()=>le,InputClsNames:()=>N,InputColor:()=>Se,InputColorClsNames:()=>K,InputDate:()=>xe,InputDateClsNames:()=>G,InputDateEventArgs:()=>Ce,InputDateRange:()=>Ee,InputDateRangeClsNames:()=>W,InputDateTime:()=>Pe,InputDateTimeClsNames:()=>q,InputMask:()=>ne,InputMaskClsNames:()=>U,InputNumber:()=>ie,InputNumberClsNames:()=>Y,InputTime:()=>Te,InputTimeClsNames:()=>J,KeyAction:()=>fe,ListBox:()=>se,ListBoxClsNames:()=>X,Menu:()=>Re,MenuClsNames:()=>$,MultiAutoComplete:()=>Ae,MultiAutoCompleteClsNames:()=>Z,MultiSelect:()=>De,MultiSelectClsNames:()=>Q,MultiSelectListBox:()=>de,MultiSelectListBoxClsNames:()=>ee,Popup:()=>ye,PopupBoundsChangingEventArgs:()=>we,PopupClsNames:()=>te,PopupTrigger:()=>be,ShowMonthPicker:()=>ce,TabKeyAction:()=>_e});var o={};i.r(o),i.d(o,{AllowDragging:()=>Zt,AllowMerging:()=>Ht,AllowPinning:()=>dt,AllowResizing:()=>Xt,AllowSorting:()=>ct,AutoSizeMode:()=>$t,CellEditEndingEventArgs:()=>Qe,CellFactory:()=>Ft,CellRange:()=>qe,CellRangeEventArgs:()=>$e,CellType:()=>Ge,ClipStringOptions:()=>ft,Column:()=>vt,ColumnCollection:()=>xt,ColumnGroup:()=>It,ColumnGroupCollection:()=>Dt,DataMap:()=>We,DataMapEditor:()=>je,FlexGrid:()=>Rt,FlexGridClsNames:()=>Ne,FormatItemEventArgs:()=>Ze,FrozenRowCol:()=>gt,GridPanel:()=>Xe,GroupRow:()=>wt,GroupSummaryPosition:()=>mt,HeadersFocusability:()=>_t,HeadersVisibility:()=>pt,HitTestInfo:()=>ti,KeyAction:()=>Yt,MergeManager:()=>Ot,OverlayManager:()=>si,Row:()=>yt,RowCol:()=>bt,RowColCollection:()=>Ct,RowColFlags:()=>at,RowCollection:()=>Et,SelMove:()=>Je,SelectedState:()=>Ye,SelectionMode:()=>Ue,SortOrder:()=>ut,_AddNewHandler:()=>zt,_ColumnGroupHandler:()=>St,_CustomEditor:()=>Jt,_CustomEditorClsNames:()=>Ke,_EditHandler:()=>ii,_ImeHandler:()=>Tt,_KeyboardHandler:()=>Qt,_MouseHandler:()=>ri,_NewRowTemplate:()=>kt,_SelectionHandler:()=>ht,_getSafariVer:()=>Le,colHdrAriaAttributes:()=>ei,isNullOrEmptyString:()=>Ut,softDetailRow:()=>tt,softGridInteropBase:()=>lt,softInput:()=>et,softMultirow:()=>it,softODataCV:()=>st,softRestCV:()=>rt,softTransposed:()=>nt,softTransposedMultirow:()=>ot,toggleColumnPinning:()=>Pt,toggleColumnSort:()=>At});var r={};i.r(r),i.d(r,{DirectiveCellFactoryBase:()=>di,GridCellTemplateType:()=>ui,softGridDetail:()=>hi,softInput:()=>ai});var s=i(26516),l=i(17119),a=i.t(l,2),h=i(9950),c=function(){return(c=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},u=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{a(n.next(e))}catch(e){r(e)}}function l(e){try{a(n.throw(e))}catch(e){r(e)}}function a(e){e.done?o(e.value):new i((function(t){t(e.value)})).then(s,l)}a((n=n.apply(e,t||[])).next())}))},d=function(e,t){var i,n,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},p={flushSync:function(e){e()},createRoot:function(){throw"Wijmo: React dependencies not loaded properly"}},f=a||p,_=f.flushSync;var g,m=[];if(!g){var b=parseInt(h.version);g=b,b>=18&&function(){u(this,void 0,void 0,(function(){var e;return d(this,(function(t){try{e=i(1352),f=e||a||p,_=e.flushSync||_}catch(e){f=a||p}return[2]}))}))}()}function v(e){return g>=19?function(t){return e(t,t.ref)}:h.forwardRef(e)}var y=!0;var w={inputs:["isDisabled","tabOrder"],events:["gotFocus","invalidInput","lostFocus","refreshed","refreshing"]},C=new Set(["columns","columnGroups"]),x=new Set(["panes","columnGroups","columns","items"]),E=new Set(["initialized","wjItemTemplate"]);function S(e,t){var i=e.controlRef.current,n={},o={};if(t){for(var r=(0,s.isArray)(t)?t.flat(1/0):[t],l=[],a=0,h=new Set,c=0,u=r;c<u.length;c++)(S=u[c])&&S.type&&S.type.$$typeof==Symbol.for("react.forward_ref")?(g>=19?l.push(S.type.render(S.props,S.props.ref)):l.push(S.type.render(S.props,S.ref)),l[l.length-1].$index=a,l[l.length-1].$key=S.key):S&&(0,s.isFunction)(S.type)&&(l.push(S.type(S.props)),l[l.length-1].$index=a,l[l.length-1].$key=S.key),S||h.add(a),a++;for(var d=[],p=0,f=l;p<f.length;p++)(S=f[p]).assignedToParent?(S.wjProperty&&(S.parentProp=(0,s.asString)(S.wjProperty),S.isParentPropArray=i[S.parentProp]&&(0,s.isArray)(i[S.parentProp])),S.isParentPropArray&&!n[S.parentProp]&&(n[S.parentProp]=[]),S.isParentPropArray?n[S.parentProp].push({getInstance:S.getInstance,props:S.props,$key:S.$key,$index:S.$index}):n[S.parentProp]={getInstance:S.getInstance,props:S.props}):d.push(S);var _=e.childInfo,m=function(e){if((0,s.isArray)(n[e])){var t=!1;i[e]&&null!=i[e]._updating&&!x.has(e)&&(i[e]._updating++,t=!0);var r=_[e];o[e]=[];var l=!1;if(_[e]||(r=[],i[e]&&i[e].clear?(i[e].clear(),l=!0):i[e]||(i[e]=new s.ObservableArray)),!y&&C.has(e)?i[e]&&i[e].clear&&(i[e].clear(),l=!0):!function(e,t,i){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n][i]!=t[n][i])return!1;return!0}(r,n[e],"$key")&&i[e]&&i[e].clear&&(i[e].clear(),l=!0),y)for(var a=r.length-1;a>=0;a--)h.has(r[a].$index)&&(i[e].remove(r[a].instance),r.splice(a,1));for(var c=[],u={},d=0,p=r;d<p.length;d++){var f=p[d];null!=f.$key?u[""+f.$key]=f:c.push(f)}for(var g=0,m=function(e){if(void 0===e&&(e=null),null!=e){var t=u[e];return null!=t&&delete u[e],t}return c[g++]},b=0;b<n[e].length;b++){var v=!1;(I=m(n[e][b].$key))?I.updateProps(n[e][b].props):(I=n[e][b].getInstance(i),v=!0),I.$index=n[e][b].$index,I.$key=n[e][b].$key,(l||v)&&(i[e].length==b?i[e].push(I.instance):i[e].splice(b,0,I.instance)),o[e].push(I)}for(var w=0,E=Object.keys(u);w<E.length;w++){var S=E[w];i[e].remove(u[S].instance)}for(;!y&&i[e].length>o[e].length;)i[e].pop();t&&(i[e]._updating--,!l&&_[e]&&_[e].length==n[e].length||i[e]._raiseCollectionChanged&&i[e]._raiseCollectionChanged())}else{var I;(I=_[e])?I.updateProps(n[e].props):(I=n[e].getInstance(i),i[e]=I.instance),o[e]=I}};for(var b in n)m(b);for(var v=[],w=0,E=_.$_nonassignable||[];w<E.length;w++){var S=E[w];h.has(S.$index)?S.instance&&S.instance.dispose&&(0,s.isFunction)(S.instance.dispose)&&S.instance.dispose():v.push(S)}for(var I=[],D=0;D<d.length;D++){var R=v[D];R?R.updateProps(d[D].props):R=d[D].getInstance(i),R.$index=d[D].$index,I.push(R)}for(o.$_nonassignable=I;D<v.length;D++)v[D].instance&&v[D].instance.dispose&&(0,s.isFunction)(v[D].instance.dispose)&&v[D].instance.dispose()}if(y)for(var T=0,P=Object.keys(e.childInfo);T<P.length;T++){var M=P[T];if((0,s.isArray)(e.childInfo[M])&&!n[M]&&i[M]&&i[M].remove)for(var A=0,H=e.childInfo[M];A<H.length;A++){var z=H[A];i[M].remove(z.instance)}}return o}function I(e,t,i){if(void 0===i&&(i=null),!t||!y)return c({},e);var n={};for(var o in e){var r=!1;i&&(r=i.knowProperties.has(o)||i.knowEvents.has(o)||i.knowCustomProps.has(o)),(i&&!r||e[o]!==t[o])&&(n[o]=e[o])}return n}function D(e,t,i){var n={};for(var o in e)(t.has(o)||i.has(o))&&(n[o]=e[o]);return n}function R(e,t,i,n){var o=n.current,r={};for(var s in t)i.has(s)&&(r[s]=t[s]);for(var l in o)e[l]&&(!y||t[l]?e[l].removeHandler(o[l]):r[l]=o[l]);return r}function T(e){var t={};return t.knowProperties=new Set(e.properties),t.knowEvents=new Set(e.events),e.customProps||(e.customProps={}),{getInstance:function(i){var n={current:{}},o={current:{}},r={current:{}},l=I(e.props,n.current),a=D(l,t.knowProperties,t.knowEvents),h=function(e,t){var i={};for(var n in t)void 0!==e[n]&&(i[n]=e[n]);return i}(l,e.customProps||{}),c=e.customConstructor?e.customConstructor(i,a,h):new e.constructor(e.needParentInstance?i:a,e.needParentInstance?a:void 0);e.ref&&((0,s.isFunction)(e.ref)?e.ref({control:c,props:e.props}):e.ref.current&&e.ref.current.control==c||(e.ref.current={control:c,props:e.props})),r.current=R(c,l,t.knowEvents,r);var u=function(i){var l=I(i,n.current);n.current=i,e.ref&&e.ref.current&&(e.ref.current.props=i),r.current=R(c,l,t.knowEvents,r);var a,h=D(l,t.knowProperties,t.knowEvents);for(var u in c.initialize?c.initialize(h):(0,s.copy)(c,h,!1,!0),e.customProps)void 0!==l[u]&&e.customProps[u](c,l[u]);a=i.children||[],o.current=S({controlRef:{current:c},childInfo:o.current},a)};return u(e.props||[]),e.props.initialized&&(0,s.isFunction)(e.props.initialized)&&e.props.initialized(c),{instance:c,updateProps:u}},props:e.props,parentProp:e.parentProp,wjProperty:e.props.wjProperty,isParentPropArray:e.isParentPropArray,assignedToParent:e.assignedToParent}}var P={isReactRendering:null};function M(){if(null==P.isReactRendering)try{var e=console.error,t=!1;console.error=function(){(arguments[0]||"").includes("flushSync")&&(t=!0)},_((function(){})),console.error=e,P.isReactRendering=t}catch(e){}finally{queueMicrotask((function(){P.isReactRendering=null}))}return!!P.isReactRendering}function A(){return a}function H(e){var t=e._internalRoot&&e._internalRoot.containerInfo.firstChild,i=e._internalRoot&&e._internalRoot.current&&e._internalRoot.current.child&&e._internalRoot.current.child.stateNode;i&&t==i?e.unmount():e._internalRoot=null,e.__scheduledForUnmount=null}function z(e){if(g<18)(0,A().unmountComponentAtNode)(e);else{var t=m.findIndex((function(t){return t.host===e}));if(-1!==t){var i=m[t].root;M()?(i.__scheduledForUnmount=!0,queueMicrotask((function(){i.__scheduledForUnmount&&_((function(){H(i),m.splice(t,1)}))}))):_((function(){H(i),m.splice(t,1)}))}}}var k=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),O={hostElement:"wj-autocomplete"},L={buttonsOutside:"wj-btns-outside",calendarHeader:"wj-calendar-header",calendarMonth:"wj-calendar-month",calendarMultiMonth:"wj-calendar-multimonth",calendarOuter:"wj-calendar-outer",calendarYear:"wj-calendar-year",dayOtherMonth:"wj-day-othermonth",dayToday:"wj-day-today",dayWeekend:"wj-day-weekend",header:"wj-header",hostElement:"wj-calendar",monthSelect:"wj-month-select",weekAfter:"wj-week-after",weekBefore:"wj-week-before",yearPicker:"wj-yearpicker",focused:"wj-state-focus",selectedYear:"wj-select-year",confirmationButtonContainer:"wj-calendar-confirmation-button-container",button:"wj-calendar-button"},F={hostElement:"wj-collectionview-navigator",pager:"wj-pager"},B={colorBox:"wj-colorbox",hostElement:"wj-colorpicker"},V={hostElement:"wj-combobox",stateMatch:"wj-state-match"},j={dropDownPanel:"wj-dropdown-panel",hostElement:"wj-dropdown"},N={input:"wj-input",inputBtnVisible:"wj-input-btn-visible",inputGroup:"wj-input-group",inputGroupBtn:"wj-input-group-btn"},K={hostElement:"wj-inputcolor",inputColorBox:"wj-inputcolorbox"},G={hostElement:"wj-inputdate",inputDateDropDown:"wj-inputdate-dropdown"},W={hostElement:"wj-inputdaterange"},q={hostElement:"wj-inputdatetime"},U={hostElement:"wj-inputmask"},Y={hostElement:"wj-inputnumber",numeric:"wj-numeric",showSpinner:"wj-input-show-spinner"},J={hostElement:"wj-inputtime"},X={header:"wj-header",hostElement:"wj-listbox",listBoxItem:"wj-listbox-item"},$={hostElement:"wj-menu",menuItems:"wj-menu-items",subItems:"wj-subitems"},Z={hostElement:"wj-multi-autocomplete",token:"wj-token",tokenActive:"wj-token-active",tokenClose:"wj-token-close",tokenHelper:"wj-token-helper",tokenLabel:"wj-token-label"},Q={hostElement:"wj-multiselect"},ee={header:"wj-header",hostElement:"wj-multiselectlistbox",selectAll:"wj-select-all"},te={dialogHeader:"wj-dialog-header",hostElement:"wj-popup",popupBackDrop:"wj-popup-backdrop",dialogBody:"wj-dialog-body",dialogFooter:"wj-dialog-footer"};(0,s._addCultureInfo)("InputNumber",{ariaLabels:{incVal:"Increase Value",decVal:"Decrease Value",inputNumberInput:"InputNumber Input",inputNumber:"Input Number"}});var ie=function(e){function t(t,i){var n=e.call(this,t)||this;n._value=null,n._min=null,n._max=null,n._format="",n._step=null,n._showBtn=!0,n._readOnly=!1,n._handleWheel=!0,n._oldText="",n._fromKb=!0,n._inputElementAriaLabel=s.culture.InputNumber.ariaLabels.inputNumberInput,n._ariaLabelledby=null,n.textChanged=new s.Event,n.valueChanged=new s.Event;var o=n.getTemplate();n.applyTemplate(s.ControlClsNames.hostElement+" "+s.ControlClsNames.content+" "+Y.hostElement,o,{_tbx:"input",_btnUp:"btn-inc",_btnDn:"btn-dec"},"input");var r=n.inputElement;n.hostElement,(0,s.setAttribute)(r,"role","spinbutton",!0),n._updateInputAriaLabel();var l=s.culture.InputNumber.ariaLabels;(0,s.setAriaLabel)(n._btnUp.querySelector("button"),l.incVal),(0,s.setAriaLabel)(n._btnDn.querySelector("button"),l.decVal),n._tbx.type.match(/number/i)&&(n.inputType="");var a=n._tbx;a.autocomplete="off",a.spellcheck=!1,n._updateSymbols();var h=n.addEventListener.bind(n);h(a,"keypress",n._keypress.bind(n)),h(a,"keydown",n._keydown.bind(n)),h(a,"input",n._input.bind(n)),h(a,"blur",(function(){n.text!=n._oldText&&n._setText(n.text)})),h(a,"paste",(function(){n._fromKb=!1})),h(a,"compositionstart",(function(){n._composing=!0})),h(a,"compositionend",(function(){n._composing=!1,setTimeout((function(){var e=n.text,t=n._oldText,i=n._chrPct;t&&t.indexOf(i)>-1&&e.indexOf(i)<0&&(e+=i),n._setText(e)}))}));var c=n._clickSpinner.bind(n);return h(n._btnUp,"click",c),h(n._btnDn,"click",c),n._rptUp=new s._ClickRepeater(n._btnUp.querySelector("button")),n._rptDn=new s._ClickRepeater(n._btnDn.querySelector("button")),h(a,"wheel",(function(e){if(n.handleWheel&&!e.defaultPrevented&&!e.ctrlKey&&n._isEditable()&&n.containsFocus()){var t=(0,s.clamp)(-e.deltaY,-1,1);n._increment((n.step||1)*t),setTimeout((function(){return n.selectAll()})),e.preventDefault()}})),n.value=0,n.isRequired=!0,n.initialize(i),n}return k(t,e),Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate='<div class="'+s.ControlClsNames.template+'"><div class="'+N.input+'"><div class="'+N.inputGroup+'"><span wj-part="btn-dec" class="'+N.inputGroupBtn+'" tabindex="-1"><button class="'+s.InputFormElementsClsNames.btn+" "+s.InputFormElementsClsNames.btnDefault+'" tabindex="-1">-</button></span><input type="tel" inputmode="numeric" wj-part="input" class="'+s.InputFormElementsClsNames.formControl+" "+Y.numeric+'"/><span wj-part="btn-inc" class="'+N.inputGroupBtn+'" tabindex="-1"><button class="'+s.InputFormElementsClsNames.btn+" "+s.InputFormElementsClsNames.btnDefault+'" tabindex="-1">+</button></span></div></div></div>'),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputElement",{get:function(){return this._tbx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputType",{get:function(){return this._tbx.type},set:function(e){this._tbx.type=(0,s.asString)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){if(e!=this._value)if(null==(e=(0,s.asNumber)(e,!this.isRequired||null==e&&null==this._value)))this._setText("");else if(!isNaN(e)){var t=s.Globalize.format(e,this.format);this._setText(t)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRequired",{get:function(){return this._tbx.required},set:function(e){this._tbx.required=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isReadOnly",{get:function(){return this._readOnly},set:function(e){this._readOnly=(0,s.asBoolean)(e),this.inputElement.readOnly=this._readOnly,(0,s.toggleClass)(this.hostElement,s.ControlStateClsNames.readOnly,this.isReadOnly)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"handleWheel",{get:function(){return this._handleWheel},set:function(e){this._handleWheel=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this._min},set:function(e){e!=this._min&&(this._min=(0,s.asNumber)(e,!0),this._updateAria())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},set:function(e){e!=this._max&&(this._max=(0,s.asNumber)(e,!0),this._updateAria())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"step",{get:function(){return this._step},set:function(e){this._step=(0,s.asNumber)(e,!0),this._updateBtn()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){return this._format},set:function(e){e!=this.format&&(this._format=(0,s.asString)(e),this.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._tbx.value},set:function(e){e!=this.text&&(this._oldText=this.text,this._setText(e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"placeholder",{get:function(){return this._tbx.placeholder},set:function(e){this._tbx.placeholder=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showSpinner",{get:function(){return this._showBtn},set:function(e){this._showBtn=(0,s.asBoolean)(e),this._updateBtn()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"repeatButtons",{get:function(){return!this._rptUp.disabled},set:function(e){this._rptUp.disabled=this._rptDn.disabled=!(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ariaLabelledBy",{get:function(){return this._ariaLabelledby},set:function(e){(0,s._setAriaLabelBy)(this,this._tbx,e,this._updateInputAriaLabel.bind(this))},enumerable:!0,configurable:!0}),t.prototype.selectAll=function(){var e=this._tbx;(0,s.setSelectionRange)(e,0,e.value.length)},t.prototype.clamp=function(e){return(0,s.clamp)(e,this.min,this.max)},t.prototype.onTextChanged=function(e){this.textChanged.raise(this,e),this._updateState()},t.prototype.onValueChanged=function(e){this._updateAria(),this.valueChanged.raise(this,e)},t.prototype.dispose=function(){this._rptUp.element=null,this._rptDn.element=null,e.prototype.dispose.call(this)},t.prototype.onGotFocus=function(t){this._oldValue=this.value,this.isTouching||(this._tbx.focus(),this.selectAll()),e.prototype.onGotFocus.call(this,t)},t.prototype.onLostFocus=function(t){if(this._composing&&(this._composing=!1,this._setText(this.text)),this._isEditable()){var i=this.clamp(this.value);if(i==this.value||this.onInvalidInput(new s.CancelEventArgs)){var n=s.Globalize.format(i,this.format);this._setText(n)}}e.prototype.onLostFocus.call(this,t)},t.prototype.refresh=function(t){if(void 0===t&&(t=!0),e.prototype.refresh.call(this,t),this.hostElement){this._updateSymbols();var i=s.Globalize.format(this.value,this.format);this._setText(i)}},t.prototype._isEditable=function(){return!this.isReadOnly&&!this.isDisabled},t.prototype._updateSymbols=function(){var e=s.culture.Globalize.numberFormat,t=s.Globalize._parseNumericFormat(this.format);this._chrDec=e["."]||".",this._chrTho=e[","]||",",this._chrNeg=e["-"]||"-",this._chrPls=e["+"]||"+",this._chrPct=e["%"]||"%",this._chrCur=t.curr||e.currency.symbol||"$",this._fmtSpc=t.spec,this._fmtPrc=t.prec,this._rxSym=new RegExp("^[%+\\-() \\"+this._chrDec+"\\"+this._chrCur+"\\"+this._chrNeg+"\\"+this._chrPls+"\\"+this._chrPct+"]*$"),this._rxNeg=new RegExp("^\\s*(\\-|\\"+this._chrNeg+")|([^e](\\-|\\"+this._chrNeg+")|\\()")},t.prototype._isNumeric=function(e,t){var i=e==this._chrDec||e>="0"&&e<="9",n="x"==this._fmtSpc;return!i&&n&&(i=e>="a"&&e<="f"||e>="A"&&e<="F"),i||t||n||(i=e==this._chrPls||e==this._chrNeg||"("==e||")"==e),i},t.prototype._getInputRange=function(e){for(var t=[0,0],i=this.text,n=!1,o=0;o<i.length;o++)this._isNumeric(i[o],e)&&(n||(t[0]=o,n=!0),t[1]=o+1);return t},t.prototype._flipSign=function(){var e=this._getSelStartDigits();this.value*=-1,this._setSelStartDigits(e)},t.prototype._getSelStartDigits=function(){for(var e=0,t=this._tbx.selectionStart,i=this._tbx.value,n=0;n<i.length&&n<t;n++)this._isNumeric(i[n],!0)&&e++;return e},t.prototype._setSelStartDigits=function(e){for(var t=this._tbx.value,i=0;i<t.length&&e>=0;i++)if(this._isNumeric(t[i],!0)){if(!e){(0,s.setSelectionRange)(this._tbx,i);break}e--}else if(!e){(0,s.setSelectionRange)(this._tbx,i);break}},t.prototype._increment=function(e){if(e){var t=this.clamp((0,s.isNumber)(this.value)?this.value+e:0),i=s.Globalize.format(t,this.format,!1,!1);this._setText(i)}},t.prototype._updateBtn=function(){var e=this.showSpinner&&!!this.step,t=e;(0,s.setCss)([this._btnUp,this._btnDn],{display:e?"":"none"}),(0,s.toggleClass)(this.hostElement,Y.showSpinner,e),(0,s.enable)(this._btnUp,t),(0,s.enable)(this._btnDn,t),this._updateAria()},t.prototype._setText=function(e,t,i){if(void 0===t&&(t=!1),void 0===i&&(i=!1),!this._composing){var n=this._tbx,o=this._chrDec,r=this._rxNeg.test(e),l=this._delKey,a=this.containsFocus();if(e&&this._rxSym.test(e)&&a&&(e=this.isRequired||!l?(r?"-0":"0")+(e.indexOf(o)>-1?o:""):""),this._delKey=!1,l&&0==this.value&&!this.isRequired&&(e=""),!e){if(!this.isRequired||i)return n.value="",this._oldText&&(this._oldText=e,this.onTextChanged()),null!=this._value&&(this._value=null,this.onValueChanged()),void this._updateBtn();e="0"}var h=e.indexOf(o),c=this._format||(h>-1?"n2":"n0"),u=s.Globalize.parseFloat(e,c);if(isFinite(u)||(u=this.clamp(u)),isNaN(u))this.onInvalidInput(new s.CancelEventArgs)?n.value=this._oldText:(n.value=e,this.focus());else{var d=a&&h>-1?2:null,p=s.Globalize.format(u,c,!1,t,d);r&&u>=0&&!l&&(p=this._chrNeg+p),a&&h>-1&&"g"==this._fmtSpc&&0!=this._fmtPrc&&(p=e).indexOf(o)<0&&(p+=o),n.value!=p&&(n.value=p,u=s.Globalize.parseFloat(p,c)),this.text!=this._oldText&&(this._oldText=this.text,this.onTextChanged()),u!=this._value&&(this._value=u,this.onValueChanged()),this._updateBtn(),this._updateState()}}},t.prototype._keypress=function(e){if(!e.defaultPrevented&&!this._composing&&this._isEditable()&&e.charCode&&!e.ctrlKey&&!e.metaKey&&e.keyCode!=s.Key.Enter){var t=this._tbx,i=String.fromCharCode(e.charCode);if(this._isNumeric(i,!1)){var n=t.maxLength;if(n>-1&&t.value.length>=n&&t.selectionEnd==t.selectionStart)return void e.preventDefault();var o=this._getInputRange(!0),r=t.selectionStart,l=t.selectionEnd;if(r<o[0]&&l<t.value.length&&(l=Math.max(l,o[0]),(0,s.setSelectionRange)(t,o[0],l)),r>=o[1]){var a=null!=this._fmtPrc?this._fmtPrc:2,h=t.value.indexOf(this._chrDec);h>-1&&r-h>a&&e.preventDefault()}}else e.preventDefault();switch(i){case"-":case this._chrNeg:this.clamp(-1)>=0?this.value<0&&this._flipSign():this.value&&t.selectionStart==t.selectionEnd?this._flipSign():this.clamp(-1)<0&&(t.value=this._chrNeg,(0,s.setSelectionRange)(t,1)),e.preventDefault();break;case"+":case this._chrPls:this.value<0&&this._flipSign(),e.preventDefault();break;case".":case this._chrDec:if(0==this._fmtPrc)e.preventDefault();else{var c=t.value.indexOf(this._chrDec);c>-1&&(t.selectionStart<=c&&c++,(0,s.setSelectionRange)(t,c),e.preventDefault())}}if(!e.defaultPrevented&&(0,s.isIE)()){var u=t.value;(r=t.selectionStart)==(l=t.selectionEnd)&&(t.value=u.substr(0,r)+i+u.substr(l),(0,s.setSelectionRange)(t,r+1),e.preventDefault(),this._input())}}},t.prototype._keydown=function(e){var t=this;if(this._delKey=!1,!e.defaultPrevented&&!this._composing){var i=(0,s.hasClass)(this._tbx,"wj-grid-ime");if(!i||e.keyCode==s.Key.Back||e.keyCode==s.Key.Delete){var n=this._tbx,o=n.value,r=n.selectionStart,l=n.selectionEnd;switch(e.keyCode){case 65:e.ctrlKey&&(setTimeout((function(){t.selectAll()})),e.preventDefault());break;case s.Key.Up:case s.Key.Down:this.step&&this._isEditable()&&(this._increment(this.step*(e.keyCode==s.Key.Up?1:-1)),setTimeout((function(){t.selectAll()})),e.preventDefault());break;case s.Key.Back:if(this._delKey=!0,l-r<2&&this._isEditable()){var a=o[l-1];a!=this._chrDec&&a!=this._chrPct&&a!=this._chrTho&&")"!=a||(setTimeout((function(){l=a==t._chrPct?t._getInputRange(!0)[1]:l-1,(0,s.setSelectionRange)(n,l)})),e.preventDefault())}break;case s.Key.Delete:if(this._delKey=!0,l-r<2&&this._isEditable())if("0"==o&&1==r)(0,s.setSelectionRange)(n,0);else{var h=o[r];h!=this._chrDec&&h!=this._chrPct||(setTimeout((function(){(0,s.setSelectionRange)(n,r+1)})),e.preventDefault())}break;case s.Key.Escape:this.value=this._oldValue,this.selectAll()}i&&this._delKey&&this._isEditable()&&this._setText(null,!1,!0)}}},t.prototype._input=function(){var e=this;this._composing?this._fromKb=!0:setTimeout((function(){var t=e._tbx,i=t.value,n=i.indexOf(e._chrDec),o=t.selectionStart,r=e._getSelStartDigits();if("p"==e._fmtSpc&&i.length&&i.indexOf(e._chrPct)<0&&(i+=e._chrPct),e._setText(i,e._fromKb),e._fromKb=!0,e.containsFocus()){var l=t.value,a=l.indexOf(e._chrDec),h=e._getInputRange(!0);if(i==e._chrNeg+e._chrDec&&a>-1)return void(0,s.setSelectionRange)(t,a+1);if(i[0]==e._chrNeg&&l[0]!=e._chrNeg)return void(1==l.length?(0,s.setSelectionRange)(t,1):e._setSelStartDigits(r));i?i==e._chrDec&&a>-1?o=a+1:o<=n&&a>-1||n<0&&a<0?o+=l.length-i.length:n<0&&a>-1&&(o=a):o=a>-1?a:h[1],o=(0,s.clamp)(o,h[0],h[1]),(0,s.setSelectionRange)(t,o)}}))},t.prototype._clickSpinner=function(e){var t=this;!e.defaultPrevented&&this._isEditable()&&this.step&&(this._increment(this.step*((0,s.contains)(this._btnUp,e.target)?1:-1)),this.isTouching||(s.Control.sharedState.InvalidScroll=(0,s.isEdge)(),setTimeout((function(){return t.selectAll()}))))},t.prototype._updateAria=function(){var e=this.inputElement;this.hostElement&&((0,s.setAttribute)(e,"aria-valuemin",this.min),(0,s.setAttribute)(e,"aria-valuemax",this.max),(0,s.setAttribute)(e,"aria-valuenow",this.value),(0,s.setAttribute)(e,"aria-valuetext",this.text),(0,s.setAttribute)(e,"step",this.step),(0,s.enable)(this._btnDn,null==this.min||this.value>this.min),(0,s.enable)(this._btnUp,null==this.max||this.value<this.max))},t.prototype._updateInputAriaLabel=function(){var e=this.inputElement;!e||e.id||this._ariaLabelledby?(0,s.setAttribute)(e,"aria-label",null):(0,s.setAttribute)(e,"aria-label",this._inputElementAriaLabel)},t.prototype.getAriaLabelForScreenReader=function(){return s.culture.InputNumber.ariaLabels.inputNumber},t._ctrlTemplate="",t}(s.Control);(0,s._addCultureInfo)("InputMask",{ariaLabels:{inputMask:"Input Mask"}});var ne=function(e){function t(t,i){var n=e.call(this,t)||this;n._fullEdit=!1,n.valueChanged=new s.Event;var o=n.getTemplate();if(n.applyTemplate(s.ControlClsNames.hostElement+" "+s.ControlClsNames.content+" "+U.hostElement,o,{_tbx:"input"},"input"),"INPUT"==n._orgTag){var r=n._tbx.getAttribute("value");r&&(n.value=r)}return n._msk=new s._MaskProvider(n._tbx),n.isRequired=!0,n.initialize(i),n.addEventListener(n._tbx,"input",(function(){n.onValueChanged()})),n.addEventListener(n._tbx,"blur",n._commitText.bind(n)),n.addEventListener(n._tbx,"keydown",(function(e){e.keyCode==s.Key.Enter&&n._commitText()})),n}return k(t,e),Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate='<div class="'+N.input+'"><div class="'+N.inputGroup+'"><input wj-part="input" class="'+s.InputFormElementsClsNames.formControl+'"/></div></div>'),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputElement",{get:function(){return this._tbx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputType",{get:function(){return this._tbx.type},set:function(e){this._tbx.type=(0,s.asString)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._tbx.value},set:function(e){e!=this.value&&(this._tbx.value=(0,s.asString)(e),e=this._msk._applyMask(),this._tbx.value=e,this.onValueChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rawValue",{get:function(){return this._msk.getRawValue()},set:function(e){e!=this.rawValue&&(this.value=(0,s.asString)(e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._msk.mask||""},set:function(e){var t=this.value;this._msk.mask=(0,s.asString)(e),this.value!=t&&this.onValueChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"promptChar",{get:function(){return this._msk.promptChar},set:function(e){var t=this.value;this._msk.promptChar=e,this.value!=t&&this.onValueChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"overwriteMode",{get:function(){return this._msk.overwriteMode},set:function(e){this._msk.overwriteMode=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"placeholder",{get:function(){return this._tbx.placeholder},set:function(e){this._tbx.placeholder=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maskFull",{get:function(){return this._msk.maskFull},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRequired",{get:function(){return this._tbx.required},set:function(e){this._tbx.required=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isReadOnly",{get:function(){return this._tbx.readOnly},set:function(e){this._tbx.readOnly=(0,s.asBoolean)(e),(0,s.toggleClass)(this.hostElement,s.ControlStateClsNames.readOnly,this.isReadOnly)},enumerable:!0,configurable:!0}),t.prototype.selectAll=function(){var e=this._msk.getMaskRange();(0,s.setSelectionRange)(this._tbx,e[0],e[1]+1)},t.prototype.onValueChanged=function(e){this.value!=this._oldValue&&(this._oldValue=this.value,this.valueChanged.raise(this,e)),this._updateState()},t.prototype._commitText=function(){(this.rawValue||this.isRequired)&&(this.maskFull||this.onInvalidInput(new s.CancelEventArgs)),this._updateState()},t.prototype.dispose=function(){this._msk.input=null,e.prototype.dispose.call(this)},t.prototype.refresh=function(t){void 0===t&&(t=!0),e.prototype.refresh.call(this,t),this.hostElement&&this._msk.refresh()},t.prototype.onGotFocus=function(t){this.selectAll(),e.prototype.onGotFocus.call(this,t)},t.prototype.getAriaLabelForScreenReader=function(){return s.culture.InputMask.ariaLabels.inputMask},t._ctrlTemplate="",t}(s.Control),oe=function(e){function t(i,n){var o=e.call(this,i)||this;o._hsb=[.5,1,1],o._alpha=1,o.valueChanged=new s.Event;var r=o.getTemplate();o.applyTemplate(s.ControlClsNames.hostElement+" "+s.ControlClsNames.content+" "+B.hostElement,r,{_eSB:"div-sb",_eHue:"div-hue",_eAlpha:"div-alpha",_ePreview:"div-pv",_ePal:"div-pal",_eText:"div-text"}),o._palette="#FFF,#000,#F00,#FFC000,#FFFF00,#92D050,#00B050,#00B0F0,#0070C0,#7030A0".split(","),o._updatePalette(),o._eHue.style.backgroundImage="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAD4CAIAAACi6hsPAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuM4zml1AAAAGvSURBVDhPXdBPaM9xHMfxz4pWaxcmtoOhpdXSVpiyHWxqmVpDjaU5rK34XfypjTJ/p+ZPay6jhsOsRrKwaJElf9IQq03WIkv4FeMwMq221tfje1ByeFzfvd7PEKWGEKWTQRZLySWfVRRTQjmVbKWGOhLsZT+HaeY0bbTTQSfdXOcWffTzmAFeMcwoYyT5ygS/mA5hNgphip98J8kHRnnNSwZ4yH1uc4OrdHGR87RximYO0cgedlLLdqqoYAPrWMtKVrCcJSxiPmnMJUQp/Bsyk2xyyKOAQooopYwKtlDNDur5G7SBJo7RQiv/B+2hl3s84CkvGGKEOOYnxolj/mYmhBmDJ5ngCx95xxsGecYj4pB3iENeoZMO2mmlhaMcpIE4ZII6aqhmM3HMMkooopB88sghm0wySCeVlCjMCVFIYx4LWUwOeRSwhmLWU84mqqihll3sppEmjnOSs5zjEl1c4yZ99POE5wwxwns+840fTDFLFKaZZIJxkozxlmEGGSC+GF++Sy89dHOZC8Rr4lVnOMERDrCPBPXEX22jko2UEn+/mnxyWUYWC0gnNUQh/AEc0HJs6cex0gAAAABJRU5ErkJggg==)",o._eHue.style.backgroundSize="contain",navigator.appVersion.indexOf("MSIE 9")>-1&&(o._eSB.children[0].style.filter="progid:DXImageTransform.Microsoft.gradient(startColorstr=#ffffffff,endColorstr=#00ffffff,GradientType=1)",o._eSB.children[1].style.filter="progid:DXImageTransform.Microsoft.gradient(startColorstr=#00000000,endColorstr=#ff000000,GradientType=0)"),r=t._tplCursor,o._cSB=(0,s.createElement)(r),o._cHue=(0,s.createElement)(r),o._cHue.style.width="100%",o._cAlpha=(0,s.createElement)(r),o._cAlpha.style.height="100%",o._eSB.appendChild(o._cSB),o._eHue.appendChild(o._cHue),o._eAlpha.appendChild(o._cAlpha);var l=o.addEventListener.bind(o),a=o.removeEventListener.bind(o),h=document;l(o.hostElement,"mousedown",(function(e){l(h,"mousemove",c),l(h,"mouseup",u),o._mouseDown(e)})),l(o.hostElement,"touchstart",(function(e){l(h,"touchmove",c),l(h,"touchend",u),o._mouseDown(e)}));var c=function(e){o._mouseMove(e)},u=function(e){a(h,"mousemove",c),a(h,"mouseup",u),a(h,"touchmove",c),a(h,"touchend",u),o._mouseUp(e)};return l(o.hostElement,"click",(function(e){var t=e.target;if(t&&"DIV"==t.tagName&&(0,s.contains)(o._ePal,t)){var i=t.style.backgroundColor;i&&(o.value=new s.Color(i).toString())}})),o.value="#ffffff",o.initialize(n),o._updatePanels(),o}return k(t,e),Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate='<div style="position:relative;width:100%;height:100%"><div style="float:left;width:50%;height:100%;box-sizing:border-box;padding:2px"><div wj-part="div-pal"><div style="float:left;width:10%;box-sizing:border-box;padding:2px"><div style="background-color:black;width:100%">&nbsp;</div><div style="height:6px"></div></div></div><div wj-part="div-text" style="position:absolute;bottom:0px;display:none"></div></div><div style="float:left;width:50%;height:100%;box-sizing:border-box;padding:2px"><div wj-part="div-sb" class="'+B.colorBox+'" style="float:left;width:89%;height:89%"><div style="position:absolute;width:100%;height:100%;background:linear-gradient(to right, white 0%,transparent 100%)"></div><div style="position:absolute;width:100%;height:100%;background:linear-gradient(to top, black 0%,transparent 100%)"></div></div><div style="float:left;width:1%;height:89%"></div><div style="float:left;width:10%;height:89%"><div wj-part="div-hue" class="'+B.colorBox+'"></div></div><div style="float:left;width:89%;height:1%"></div><div style="float:left;width:89%;height:10%"><div style="width:100%;height:100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuM4zml1AAAAAcSURBVBhXY/iPBBYgAWpKQGkwgMqDAdUk/v8HAM7Mm6GatDUYAAAAAElFTkSuQmCC)"><div wj-part="div-alpha" class="'+B.colorBox+'"></div></div></div><div style="float:left;width:1%;height:10%"></div><div style="float:left;width:10%;height:10%"><div wj-part="div-pv" class="'+B.colorBox+'" style="position:static"></div></div></div></div>'),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showAlphaChannel",{get:function(){return"none"!=this._eAlpha.parentElement.style.display},set:function(e){this._eAlpha.parentElement.style.display=(0,s.asBoolean)(e)?"":"none"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showColorString",{get:function(){return"none"!=this._eText.style.display},set:function(e){this._eText.style.display=(0,s.asBoolean)(e)?"":"none"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){if(e!=this.value){e=(e=(0,s.asString)(e)).trim();var t=s.Color.fromString(e);if(t){this._value=e,this._eText.innerText=e;var i=t.getHsb();this._hsb[0]==i[0]&&this._hsb[1]==i[1]&&this._hsb[2]==i[2]&&this._alpha==t.a||(0==i[2]?(i[0]=this._hsb[0],i[1]=this._hsb[1]):0==i[1]&&(i[0]=this._hsb[0]),this._hsb=i,this._alpha=t.a,this._updatePanels(),this.onValueChanged())}}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"palette",{get:function(){return this._palette},set:function(e){(e=(e=(0,s.asArray)(e)).slice(0,10)).every((function(e){return null!=s.Color.fromString(e)}))&&(this._palette=e,this._updatePalette())},enumerable:!0,configurable:!0}),t.prototype.onValueChanged=function(e){this._updatePanels(),this.valueChanged.raise(this,e)},t.prototype._mouseDown=function(e){this._htDown=this._getTargetPanel(e),this._htDown&&(e.preventDefault(),this.focus(),this._mouseMove(e))},t.prototype._mouseMove=function(e){var t=e.touches?e.touches[0]:e,i=this._htDown;if(i){var n=i.getBoundingClientRect(),o=this._hsb;i==this._eHue?o[0]=(0,s.clamp)((t.clientY-n.top)/n.height,0,.99):i==this._eSB?(o[1]=(0,s.clamp)((t.clientX-n.left)/n.width,0,1),o[2]=(0,s.clamp)(1-(t.clientY-n.top)/n.height,0,1)):i==this._eAlpha&&(this._alpha=(0,s.clamp)((t.clientX-n.left)/n.width,0,1)),this._updateColor()}},t.prototype._mouseUp=function(e){this._htDown=null},t.prototype._updateColor=function(){var e=s.Color.fromHsb(this._hsb[0],this._hsb[1],this._hsb[2],this._alpha);this.value=e.toString(),this._updatePanels()},t.prototype._updatePalette=function(){var e=new s.Color("#fff"),t=new s.Color("#000");this._ePal.innerHTML="";for(var i=0;i<this._palette.length;i++){var n=(0,s.createElement)('<div style="float:left;width:10%;box-sizing:border-box;padding:1px">'),o=new s.Color(this._palette[i]),r=o.getHsb();n.appendChild(this._makePalEntry(o,4));for(var l=0;l<5;l++){if(0==r[1]){var a=.1*l+(r[2]>.5?.05:.55);o=s.Color.interpolate(e,t,a)}else o=s.Color.fromHsb(r[0],.1+.2*l,1-.1*l);n.appendChild(this._makePalEntry(o,0))}this._ePal.appendChild(n)}},t.prototype._makePalEntry=function(e,t){var i=document.createElement("div");return(0,s.setCss)(i,{cursor:"pointer",backgroundColor:e.toString(),marginBottom:t||""}),i.innerHTML="&nbsp",i},t.prototype._updatePanels=function(){var e=s.Color.fromHsb(this._hsb[0],1,1,1),t=s.Color.fromHsb(this._hsb[0],this._hsb[1],this._hsb[2],1);this._eSB.style.backgroundColor=e.toString(),this._eAlpha.style.background="linear-gradient(to right, transparent 0%, "+t.toString()+" 100%)",navigator.appVersion.indexOf("MSIE 9")>-1&&(this._eAlpha.style.filter="progid:DXImageTransform.Microsoft.gradient(startColorstr=#00000000,endColorstr="+t.toString()+", GradientType = 1)"),this._ePreview.style.backgroundColor=this.value,this._cHue.style.top=(100*this._hsb[0]).toFixed(0)+"%",this._cSB.style.left=(100*this._hsb[1]).toFixed(0)+"%",this._cSB.style.top=(100-100*this._hsb[2]).toFixed(0)+"%",this._cAlpha.style.left=(100*this._alpha).toFixed(0)+"%"},t.prototype._getTargetPanel=function(e){var t=e.target;return(0,s.contains)(this._eSB,t)?this._eSB:(0,s.contains)(this._eHue,t)?this._eHue:(0,s.contains)(this._eAlpha,t)?this._eAlpha:null},t._ctrlTemplate="",t._tplCursor='<div style="position:absolute;left:50%;top:50%;width:7px;height:7px;transform:translate(-50%,-50%);border:2px solid #f0f0f0;border-radius:50px;box-shadow:0px 0px 4px 2px #0f0f0f"></div>',t}(s.Control);(0,s._addCultureInfo)("CollectionViewNavigator",{ariaLabels:{byPage:{btnFirst:"Navigate to first page",btnPrev:"Navigate to previous page",btnNext:"Navigate to next page",btnLast:"Navigate to last page"},byItem:{btnFirst:"Navigate to first item",btnPrev:"Navigate to previous item",btnNext:"Navigate to next item",btnLast:"Navigate to last item"}}});var re=function(e){function t(t,i){var n=e.call(this,t)||this;n._view=null,n._byPage=!1,n._fmt="{current:n0} / {count:n0}",n._liveRegionON=!1,n._ariaLabel="";var o=n.getTemplate();n.applyTemplate(s.ControlClsNames.hostElement+" "+s.ControlClsNames.content+" "+F.pager+" "+F.hostElement,o,{_btnFirst:"btn-first",_btnPrev:"btn-prev",_txtCurr:"txt-curr",_btnNext:"btn-next",_btnLast:"btn-last"},"input"),n.hostElement.tabIndex=-1,n._updateAriaLabels();var r=(0,s.uidGenerator)();return n._txtCurr.id=r,[n._btnFirst,n._btnPrev,n._btnNext,n._btnLast].forEach((function(e){(0,s.setAttribute)(e.firstElementChild,"aria-controls",n._txtCurr.id)})),(0,s.setAttribute)(n.hostElement.firstElementChild,"role","group"),(0,s.setAttribute)(n._txtCurr,"role","status"),n._rptNext=new s._ClickRepeater(n._btnNext.querySelector("button")),n._rptPrev=new s._ClickRepeater(n._btnPrev.querySelector("button")),n.addEventListener(n.hostElement,"click",n._click.bind(n)),n.addEventListener(n.hostElement,"keydown",n._keydown.bind(n)),(0,s.setAttribute)(n.hostElement,"role","navigation"),n._addA11yRelatedHandlers(),n.initialize(i),n._update(),n}return k(t,e),Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate='<div class="'+N.inputGroup+'"><span wj-part="btn-first" class="'+N.inputGroupBtn+'"><button class="'+s.InputFormElementsClsNames.btn+" "+s.InputFormElementsClsNames.btnDefault+'"><span class="'+s.GlyphClsNames.stepBackward+'"></span></button></span><span wj-part="btn-prev" class="'+N.inputGroupBtn+'"> <button class="'+s.InputFormElementsClsNames.btn+" "+s.InputFormElementsClsNames.btnDefault+'"><span class="'+s.GlyphClsNames.left+'"></span> </button></span><span wj-part="txt-curr" tabIndex="0"></span><span wj-part="btn-next" class="'+N.inputGroupBtn+'"><button class="'+s.InputFormElementsClsNames.btn+" "+s.InputFormElementsClsNames.btnDefault+'"><span class="'+s.GlyphClsNames.right+'"></span></button></span><span wj-part="btn-last" class="'+N.inputGroupBtn+'"><button class="'+s.InputFormElementsClsNames.btn+" "+s.InputFormElementsClsNames.btnDefault+'"><span class="'+s.GlyphClsNames.stepForward+'"></span></button></span></div>'),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cv",{get:function(){return this._view},set:function(e){if(e!=this._view){var t=this._view;t&&(t.collectionChanged.removeHandler(this._collectionChanged),t.currentChanged.removeHandler(this._currentChanged)),t=this._view=(0,s.asType)(e,"ICollectionView",!0),this._update(),t&&(t.collectionChanged.addHandler(this._collectionChanged,this),t.currentChanged.addHandler(this._currentChanged,this))}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byPage",{get:function(){return this._byPage},set:function(e){e!=this._byPage&&(this._byPage=(0,s.asBoolean)(e),this._update(),this._updateAriaLabels())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headerFormat",{get:function(){return this._fmt},set:function(e){e!=this._fmt&&(this._fmt=(0,s.asString)(e),this._update())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"repeatButtons",{get:function(){return!this._rptNext.disabled},set:function(e){this._rptNext.disabled=this._rptPrev.disabled=!(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ariaLabel",{get:function(){if(this.hostElement){var e=this.hostElement.getAttribute("aria-label");if(e)return e}return this._ariaLabel},set:function(e){this.ariaLabel!==e&&(this._ariaLabel=e,this.hostElement&&(0,s.setAttribute)(this.hostElement,"aria-label",e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDisabled",{get:function(){return this._isDisabled},set:function(e){this._setIsDisabled(e)},enumerable:!0,configurable:!0}),t.prototype.focus=function(){var e=this._e;e&&e.offsetHeight&&(this.isDisabled||(0,s.moveFocus)(e,0)||this._txtCurr.tabIndex>=0&&this._txtCurr.focus())},t.prototype._update=function(){var e=this,t=this._view,i=this._byPage,n=t?i?t.pageIndex:t.currentPosition:0,o=t?i?t.pageCount:t.itemCount:0;this.isDisabled||((0,s.enable)(this._btnFirst,t&&n>0),(0,s.enable)(this._btnPrev,t&&n>0),(0,s.enable)(this._txtCurr,null!=t),(0,s.enable)(this._btnNext,t&&n<o-1),(0,s.enable)(this._btnLast,t&&n<o-1)),[this._btnFirst,this._btnPrev,this._btnNext,this._btnLast].forEach((function(t){t.firstElementChild.disabled?t.firstElementChild.setAttribute("tabindex","-1"):t.firstElementChild.setAttribute("tabindex",e._orgTabIndex.toString())})),this._txtCurr.textContent=(0,s.format)(this._fmt,{current:t?n+1:0,count:t?o:0,currentItem:t?t.currentPosition+1:0,itemCount:t?t.itemCount:0,currentPage:t?t.pageIndex+1:0,pageCount:t?t.pageCount:0})},t.prototype._currentChanged=function(){this._update()},t.prototype._collectionChanged=function(){this._update()},t.prototype._click=function(e){var t=e.target,i=this._view,n=this._byPage;i&&((0,s.contains)(this._btnFirst,t)?n?i.moveToFirstPage():i.moveCurrentToFirst():(0,s.contains)(this._btnPrev,t)?n?i.moveToPreviousPage():i.moveCurrentToPrevious():(0,s.contains)(this._btnNext,t)?n?i.moveToNextPage():i.moveCurrentToNext():(0,s.contains)(this._btnLast,t)&&(n?i.moveToLastPage():i.moveCurrentToLast()),(this.byPage?i.pageIndex>=i.pageCount-1||i.pageIndex<=0:i.currentPosition>=i.itemCount-1||i.currentPosition<=0)&&!this.isDisabled&&this._txtCurr.tabIndex>=0&&this._txtCurr.focus(),e.preventDefault())},t.prototype._updateAriaLabels=function(){var e=s.culture.CollectionViewNavigator.ariaLabels[this._byPage?"byPage":"byItem"];(0,s.setAttribute)(this._btnFirst.firstElementChild,"aria-label",e.btnFirst),(0,s.setAttribute)(this._btnPrev.firstElementChild,"aria-label",e.btnPrev),(0,s.setAttribute)(this._btnNext.firstElementChild,"aria-label",e.btnNext),(0,s.setAttribute)(this._btnLast.firstElementChild,"aria-label",e.btnLast)},t.prototype._addA11yRelatedHandlers=function(){var e=this;this.addEventListener(this._txtCurr,"focus",(function(t){e._txtCurr===document.activeElement&&((0,s.setAttribute)(e._txtCurr,"aria-live","off"),(0,s.setAttribute)(e._txtCurr,"aria-label",e._txtCurr.textContent),e._liveRegionON=!1)})),this.addEventListener(this._txtCurr,"blur",(function(t){e._txtCurr!==document.activeElement&&e._txtCurr.removeAttribute("aria-label")})),[this._btnFirst.firstElementChild,this._btnPrev.firstElementChild,this._btnNext.firstElementChild,this._btnLast.firstElementChild].forEach((function(t){e.addEventListener(t,"focus",(function(t){setTimeout((function(){if(!e._liveRegionON){var t=(0,s._isMacOS)()?"polite":"assertive";(0,s.setAttribute)(e._txtCurr,"aria-live",t),e._liveRegionON=!0}}))}))}))},t.prototype._setTabOrder=function(e){var t=this._e,i=null!=this._txtCurr.getAttribute("disabled");this._orgTabIndex=e,this.isDisabled||i?(t.tabIndex=-1,this._txtCurr.tabIndex=-1):i||(this._txtCurr.tabIndex=this._orgTabIndex)},t.prototype._keydown=function(e){if((0,s.contains)(this._txtCurr,e.target)&&(e.ctrlKey||e.metaKey)&&("A"===e.key||"a"===e.key)){e.preventDefault();var t=document.createRange();t.selectNodeContents(this._txtCurr);var i=window.getSelection();i.removeAllRanges(),i.addRange(t)}},t.prototype._setIsDisabled=function(e){var t=this;if((e=!!(0,s.asBoolean)(e,!0))!=this.isDisabled){var i=this._e;i&&(this._isDisabled=e,(0,s.toggleClass)(i,s.ControlStateClsNames.disabled,e),[this._btnFirst,this._btnPrev,this._btnNext,this._btnLast].forEach((function(i){e?(i.firstElementChild.setAttribute("disabled",""),i.firstElementChild.setAttribute("tabindex","-1")):(i.firstElementChild.removeAttribute("disabled"),i.firstElementChild.setAttribute("tabindex",t._orgTabIndex.toString())),(0,s.toggleClass)(i,s.ControlStateClsNames.disabled,e)})),this._txtCurr.tabIndex=e?-1:this._orgTabIndex,(0,s.toggleClass)(this._txtCurr,s.ControlStateClsNames.disabled,e))}},t._ctrlTemplate="",t}(s.Control);(0,s._addCultureInfo)("Listbox",{ariaLabels:{listBox:"list box"}});var se=function(e){function t(i,n){var o=e.call(this,i,null,!0)||this;o._cv=null,o._itemFormatter=null,o._pathDisplay=new s.Binding(""),o._pathValue=new s.Binding(""),o._pathChecked=new s.Binding(""),o._html=!1,o._shGroups=!1,o._checkedItems=[],o._itemRole="option",o._caseSensitive=!1,o._addMode=!1,o._isShiftDown=!1,o._shouldClearOnShift=!0,o._vThreshold=t._VTHRESH,o._isVirtual=!1,o._children=[],o._ignoreItemFormatterTextArray=[],o._itemFormatterHelper=document.createElement("div"),o._clientHeight=-1,o._itemHeight=30,o._itemsAbove=-1,o._itemsBelow=-1,o._eSizer=document.createElement("div"),o._ePadTop=document.createElement("div"),o._ePadBot=document.createElement("div"),o._checking=!1,o._ignoredItemChangedEvents=!1,o._search="",o._fmtItemHandlers=0,o._itemCount=0,o._oldSel=null,o._container=null,o._oldSelectedIndex=-1,o._ariaLabel=s.culture.Listbox.ariaLabels.listBox,o.selectedIndexChanged=new s.Event,o.itemsChanged=new s.Event,o.loadingItems=new s.Event,o.loadedItems=new s.Event,o.itemChecked=new s.Event,o.checkedItemsChanged=new s.Event,o.formatItem=new s.Event((function(){o.invalidate()})),o._handleKeyUp=function(e){"Shift"===e.key&&(o._isShiftDown=!1,o._shouldClearOnShift=!0)},o.applyTemplate(s.ControlClsNames.hostElement+" "+s.ControlClsNames.content+" "+X.hostElement,null,null);var r=o.hostElement;return(0,s.setAttribute)(r,"role","listbox",!0),o._updateAriaLabel(),"SELECT"==o._orgTag&&o._initFromSelect(o.hostElement),o.addEventListener(r,"click",o._click.bind(o)),o.addEventListener(r,"keydown",o._keydown.bind(o)),o.addEventListener(r,"keypress",o._keypress.bind(o)),o.addEventListener(r,"keyup",o._handleKeyUp.bind(o)),o.addEventListener(r,"wheel",(function(e){r.scrollHeight>r.offsetHeight&&(e.deltaY<0&&0==r.scrollTop||e.deltaY>0&&r.scrollTop+r.offsetHeight>=r.scrollHeight)&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())})),[o._eSizer,o._ePadTop,o._ePadBot].forEach((function(e){e.tabIndex=-1,(0,s.setAttribute)(e,"aria-hidden",!0),(0,s.setCss)(e,{pointerEvents:"none",opacity:"0"})})),o.initialize(n),o._updateViewRange(),o.addEventListener(o.hostElement,"scroll",(function(e){o._updateViewRange()})),o}return k(t,e),Object.defineProperty(t.prototype,"ariaLabelledBy",{get:function(){return this.hostElement.getAttribute("aria-labelledby")},set:function(e){(0,s._setAriaLabelBy)(this,this.hostElement,e,this._updateAriaLabel.bind(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemsSource",{get:function(){return this._items},set:function(e){this._items!=e&&(this._cv&&(this._cv.currentChanged.removeHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this),this._cv=null),this._items=e,this._cv=(0,s.asCollectionView)(e),null!=this._cv&&(this._cv.currentChanged.addHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this)),this._populateList(),this.onItemsChanged(),this.onSelectedIndexChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collectionView",{get:function(){return this._cv},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"virtualizationThreshold",{get:function(){return this._vThreshold},set:function(e){if(e!=this._vThreshold){var t=this._getVirtual();this._vThreshold=(0,s.asNumber)(e,!1,!0),t!=this._getVirtual()&&this._populateList()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showGroups",{get:function(){return this._shGroups},set:function(e){e!=this._shGroups&&(this._shGroups=(0,s.asBoolean)(e),this._populateList())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isContentHtml",{get:function(){return this._html},set:function(e){e!=this._html&&(this._html=(0,s.asBoolean)(e),this._populateList())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemFormatter",{get:function(){return this._itemFormatter},set:function(e){e!=this._itemFormatter&&(this._itemFormatter=(0,s.asFunction)(e),this._populateList())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayMemberPath",{get:function(){return this._pathDisplay.path},set:function(e){e!=this.displayMemberPath&&(this._pathDisplay.path=(0,s.asString)(e),this._populateList())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedValuePath",{get:function(){return this._pathValue.path},set:function(e){this._pathValue.path=(0,s.asString)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checkedMemberPath",{get:function(){return this._pathChecked.path},set:function(e){e!=this.checkedMemberPath&&(this._pathChecked.path=(0,s.asString)(e),(0,s.setAttribute)(this.hostElement,"aria-multiselectable",""!==this.checkedMemberPath?"true":"false"),this._populateList())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"caseSensitiveSearch",{get:function(){return this._caseSensitive},set:function(e){this._caseSensitive=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemRole",{get:function(){return this._itemRole},set:function(e){e!=this.itemRole&&(this._itemRole=(0,s.asString)(e),this._populateList())},enumerable:!0,configurable:!0}),t.prototype.getDisplayValue=function(e,t){var i=null;e>-1&&(0,s.hasItems)(this._cv)&&(i=this._cv.items[e],this.displayMemberPath&&(i=this._pathDisplay.getValue(i)));var n=null!=i?i.toString():"";return this._itemFormatter&&!t&&(n=this._itemFormatter(e,n)),n},t.prototype.getDisplayText=function(e){return this._getDisplayText(e)},t.prototype._getDisplayText=function(e,t){if(t&&this._ignoreItemFormatterTextArray[e])return this._ignoreItemFormatterTextArray[e];var i=this._getChild(e);return null!=i?i.textContent:""},t.prototype.isItemEnabled=function(e){var t=this._getChild(e);return null!=t&&!t.hasAttribute("disabled")&&!(0,s.hasClass)(t,s.ControlStateClsNames.disabled)&&!(0,s.hasClass)(t,s.UtilitesClsNames.separator)},Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this._cv?this._cv.currentPosition:-1},set:function(e){this._cv&&(this._oldSelectedIndex=this._cv.currentPosition,this._cv.moveCurrentToPosition((0,s.asNumber)(e)))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedItem",{get:function(){return this._cv?this._cv.currentItem:null},set:function(e){this._cv&&this._cv.moveCurrentTo(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedValue",{get:function(){var e=this.selectedItem;return e&&this.selectedValuePath&&(e=this._pathValue.getValue(e)),e},set:function(e){var t=this._cv,i=t?t.items:null,n=this.selectedValuePath,o=-1;if(i){for(var r=0;r<i.length;r++){var l=i[r],a=n?this._pathValue.getValue(l):l;if(a===e||s.DateTime.equals(a,e)){o=r;break}if(this.isContentHtml&&(0,s.isString)(a)&&a.indexOf("<")>-1&&(0,s.toPlainText)(a)===e){o=r;break}}this.selectedIndex=o}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxHeight",{get:function(){var e=this.hostElement,t=e?parseFloat(e.style.maxHeight):null;return isNaN(t)?null:t},set:function(e){var t=this.hostElement;t&&(e=(0,s.asNumber)(e,!0),t.style.maxHeight=null==e?"":e+"px")},enumerable:!0,configurable:!0}),t.prototype.showSelection=function(e){void 0===e&&(e=this.containsFocus());var t=this.hostElement,i=this._children,n=this._getSelectedElement(!1),o=new s.Rect(0,0,0,0);n!=this._oldSel&&(this._updateItemAttributes(n,!0),this._updateItemAttributes(this._oldSel,!1),this._oldSel=n),n instanceof HTMLElement?o=this._getBoundingClientRect(n):this._children.length>0&&(o=this._getBoundingClientRect(this._getChild(0)));var r=this._getBoundingClientRect(t),l=0;if(this._shGroups&&(l=this._itemHeight,!this._isVirtual)){var a=i[0];a&&a.offsetHeight&&(0,s.hasClass)(a,X.header)&&(l=a.offsetHeight)}o.bottom>r.bottom?t.scrollTop+=o.bottom-r.bottom:o.top<r.top+l&&(t.scrollTop-=r.top+l-o.top),this._updateViewRange(),n=this._getSelectedElement(!0),(0,s.setAttribute)(t,"aria-activedescendant",n?n.id:null),e&&(n&&!(0,s.contains)(n,(0,s.getActiveElement)())?n:t).focus(),t.tabIndex=n?-1:this._orgTabIndex},t.prototype.loadList=function(){this._populateList()},t.prototype.getItemChecked=function(e){var t=this._cv.items[e],i=this._pathChecked;return(0,s.isObject)(t)&&i.path?i.getValue(t):this._getCheckboxState(e)},t.prototype.setItemChecked=function(e,t){this._setItemChecked(e,t,!0)},t.prototype.toggleItemChecked=function(e){this.setItemChecked(e,!this.getItemChecked(e))},Object.defineProperty(t.prototype,"checkedItems",{get:function(){return this._checkedItems},set:function(e){e=Array.from(new Set(e));var t=(0,s.asArray)(e,!1);this._arrayEquals(t,this._checkedItems)||(this._updateCheckedList(t),this._arrayEquals(t,this._checkedItems)||(this._checkedItems=t,this.onCheckedItemsChanged()))},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(e){return(e=(0,s.closest)(e,"."+X.listBoxItem))?e[t._DIDX_KEY]:-1},t.prototype.onSelectedIndexChanged=function(e){this.selectedIndexChanged.raise(this,e)},t.prototype.onItemsChanged=function(e){this.itemsChanged.raise(this,e)},t.prototype.onLoadingItems=function(e){this.loadingItems.raise(this,e)},t.prototype.onLoadedItems=function(e){this.loadedItems.raise(this,e)},t.prototype.onItemChecked=function(e){this.itemChecked.raise(this,e)},t.prototype.onCheckedItemsChanged=function(e){this.checkedItemsChanged.raise(this,e)},t.prototype.onFormatItem=function(e){this.formatItem.raise(this,e)},t.prototype.refresh=function(t){if(void 0===t&&(t=!0),e.prototype.refresh.call(this,t),this.hostElement){var i=this._cv?this._cv.items.length:0,n=this.formatItem.handlerCount;i!=this._itemCount||n!=this._fmtItemHandlers?(this._fmtItemHandlers=n,this._populateList()):this._updateViewRange()}},t.prototype._updateAriaLabel=function(){this.hostElement&&(this.ariaLabelledBy?(0,s.setAriaLabel)(this.hostElement,null):(0,s.setAriaLabel)(this.hostElement,this._ariaLabel))},t.prototype._updateCheckedList=function(e){var t=this,i=this._cv,n=this._pathChecked,o=new Map;if(n&&i){var r=i.sourceCollection;if(r&&r.length){(0,s.isObject)(r[0])||(n=null),e.forEach((function(e){return o.set(e,!0)})),this._checking=!0;var l=[];r.forEach((function(e){var t=o.has(e);t&&l.push(e),n&&n.setValue(e,t)})),this._checking=!1,e=l}i.items.forEach((function(e,i){t._setItemChecked(i,o.has(e),!1)}))}},t.prototype._getBoundingClientRect=function(e){if(!e.offsetHeight){var t=this.indexOf(e),i=this.hostElement;if(t>-1&&i){t=this._getElementIndex(t);var n=i.getBoundingClientRect();return new s.Rect(0,n.top-i.scrollTop+t*this._itemHeight,n.width,this._itemHeight)}}return s.Rect.fromBoundingRect(e.getBoundingClientRect())},t.prototype._updateItemAttributes=function(e,t){if(e){var i=this.checkedMemberPath?"true"===e.getAttribute("aria-selected"):null;(0,s.toggleClass)(e,s.ControlStateClsNames.selected,t),(0,s.setAttribute)(e,"aria-selected",this._getAriaSelected(t,i)),e.tabIndex=t?this._orgTabIndex:-1}},t.prototype._getCheckedItems=function(){var e=this,t=this._cv,i=this._pathChecked,n=[];return t&&i&&i.path&&(n=t.sourceCollection.filter((function(n,o){if(t.filter&&!t.filter(n))return!!e._addMode&&i.getValue(n);if((0,s.isObject)(n))return i.getValue(n);var r=t.items[o]==n?o:t.items.indexOf(n);return e.getItemChecked(r)}))),n},t.prototype._arrayEquals=function(e,t){if(e==t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!this._isEqual(e[i],t[i]))return!1;return!0},t.prototype._getChild=function(e){return e=this._getElementIndex(e),this._children[e]},t.prototype._getElementIndex=function(e){if(this._shGroups)for(var t=this._children,i=0;i<=e&&i<t.length;i++){var n=t[i];(0,s.hasClass)(n,X.header)&&e++}return e},t.prototype._setItemChecked=function(e,t,i){void 0===i&&(i=!0);var n=this._cv.items[e],o=this._pathChecked,r=!1,l=this.selectedIndex,a=this._checking;if((0,s.isObject)(n)&&o.path){if(!!o.getValue(n)!=t){var h=(0,s.tryCast)(this._cv,"IEditableCollectionView");r=!0,this._checking=!0,h?(h.editItem(n),o.setValue(n,t),h.commitEdit()):(o.setValue(n,t),h.refresh()),this._checking=a}}else if(i){var c=this._findArrayItem(this._checkedItems,n);(t&&c<0||!t&&c>=0)&&(r=!0)}return this._setCheckboxState(e,t),i&&(r&&(this._checkedItems=this._checkedItemsUpdate(n,t),this.onItemChecked(),this.onCheckedItemsChanged()),l!=this.selectedIndex&&this.onSelectedIndexChanged()),r},t.prototype._checkedItemsUpdate=function(e,t){var i=this._cv.sourceCollection,n=this._checkedItems,o=0;if(t){for(var r=0;r<i.length;r++){var s=i[r];if(o<n.length&&this._isEqual(s,n[o]))o++;else if(this._isEqual(s,e))return n.slice(0,o).concat([e]).concat(n.slice(o))}return n}var l=this._findArrayItem(n,e);return n.slice(0,l).concat(n.slice(l+1))},t.prototype._isEqual=function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)},t.prototype._findArrayItem=function(e,t){if(!Number.isNaN(t))return e.indexOf(t);for(var i=0;i<e.length;i++)if(Number.isNaN(e[i]))return i;return-1},t.prototype._cvCollectionChanged=function(){this._checking||(this._populateList(),this.onItemsChanged())},t.prototype._cvCurrentChanged=function(){this._checking||(this.showSelection(),this._ignoredItemChangedEvents||this.onSelectedIndexChanged())},t.prototype._populateList=function(){var e=this.hostElement,i=this._cv;if(this._itemCount=i?i.items.length:0,this._isVirtual=this._getVirtual(),this._oldSel=null,this._itemsAbove=-1,this._itemsBelow=-1,e){var n=this.containsFocus(),o=void 0;this.onLoadingItems();var r=this._children=[];if(e.textContent="",i){var l=0,a=void 0,h=[];if(this._ignoreItemFormatterTextArray=[],this._shGroups&&i.groups&&i.groups.length){o={};for(var c=0;c<i.groups.length;c++){var u=i.groups[c];o[l]=u,a=this._createHeaderItem(u,c),h.push(a);for(var d=0;d<u.items.length;d++,l++)a=this._createItem(l,c),h.push(a)}}else for(d=0;d<i.items.length;d++,l++)a=this._createItem(l),h.push(a);var p=this._isVirtual?document.createElement("div"):e,f=0;for(p.innerHTML=h.join(""),d=0;d<p.children.length;d++){var _=p.children[d];f==i.currentPosition&&(this._oldSel=_),_[t._DIDX_KEY]=_.className.indexOf(X.header)<0?f++:-1,r.push(_)}}if(this.formatItem.hasHandlers&&i){l=0;var g=i.items;for(_=new le(0,null,null),d=0;d<r.length;d++)_._item=r[d],this._shGroups&&(0,s.hasClass)(_._item,X.header)?(_._index=-1,_._data=o[l]):(_._index=l,_._data=g[l++]),this.onFormatItem(_)}if(this._isVirtual){var m=this._getCanvasContext(),b=null,v=0;for(d=0;d<r.length;d++){a=r[d];var y=m.measureText(a.textContent);y.width>v&&(b=a,v=y.width)}if(b){var w=!1,C=e.style.display,x=e.style.position;e.parentElement||(w=!0,(this._container||document.body).appendChild(e),(0,s.setCss)(e,{display:"",position:"absolute"})),e.appendChild(b);var E=b.style.whiteSpace;b.style.whiteSpace="nowrap",this._ePadTop.style.width=b.offsetWidth+"px",this._itemHeight=b.offsetHeight||this._itemHeight,b.style.whiteSpace=E,this._eSizer.style.height=r.length*this._itemHeight+"px",e.appendChild(this._eSizer),this._clientHeight=e.clientHeight,(0,s.removeChild)(this._eSizer),w&&((0,s.removeChild)(e),(0,s.setCss)(e,{display:C,position:x})),(0,s.removeChild)(b)}else this._ePadTop.style.width="";this._updateViewRange()}this.checkedItems=this._getCheckedItems();var S=this._getSelectedElement(!0);n?(S||e).focus():S&&this.showSelection(),e.tabIndex=S?-1:this._orgTabIndex,this.onLoadedItems()}},t.prototype._getCanvasContext=function(){var e=document.createElement("canvas").getContext("2d"),t=getComputedStyle(this.hostElement);return t.fontSize&&t.fontFamily&&(e.font=t.fontSize+" "+t.fontFamily.split(",")[0]),e},t.prototype._getVirtual=function(){if(this._itemCount<=this._vThreshold)return!1;var e=this.hostElement;if(e){var t=getComputedStyle(e);if(parseInt(t.columnCount)>1||t.display.indexOf("flex")>-1||t.display.indexOf("grid")>-1)return!1}return!0},t.prototype._getMaxSupportedCssHeight=function(){var e=265e5;return(0,s.isIE)()?e=15e5:(0,s.isFirefox)()&&(e=175e5),e},t.prototype._updateViewRange=function(){var e=this.hostElement,t=this._itemHeight,i=this._children;if(!(e&&e.parentElement&&this._isVirtual&&i))return!1;var n=e.scrollTop;(0,s.assert)(t*i.length<this._getMaxSupportedCssHeight(),"The number of items ("+i.length+") exceeds the maximum number of items ("+Math.floor(this._getMaxSupportedCssHeight()/t)+") allowed for this browser.");var o=Math.max(e.clientHeight,this._clientHeight),r=Math.floor(n/t),l=Math.min(i.length,Math.ceil((n+o)/t)-r),a=Math.max(0,i.length-r-l);if(r==this._itemsAbove&&a==this._itemsBelow)return!1;this._itemsAbove=r,this._itemsBelow=a;var h=document.createDocumentFragment(),c=this.containsFocus();if(this._ePadTop.style.height=r*t+"px",h.appendChild(this._ePadTop),this.showGroups&&!(0,s.hasClass)(i[r],X.header))for(var u=r;u>=0;u--)if((0,s.hasClass)(i[u],X.header)){h.appendChild(i[u]);break}for(u=r;u<=r+l&&u<i.length;u++)h.appendChild(i[u]);this._ePadBot.style.height=a*t+"px",h.appendChild(this._ePadBot),e.textContent="",e.appendChild(h);var d=(r+l+a)*t-e.scrollHeight;this._ePadBot.style.height=this._ePadBot.offsetHeight-d+"px";var p=this._getSelectedElement(!0);return c&&(p||e).focus({preventScroll:!0}),e.tabIndex=p?-1:this._orgTabIndex,!0},t.prototype._getSelectedElement=function(e){var t=this.selectedIndex,i=this._getElementIndex(t),n=i>-1?this._children[i]:null;return e&&n&&!n.offsetHeight&&(n=null),n},t.prototype._handleResize=function(){this._updateViewRange()},t.prototype._createItem=function(e,t){var i=this._cv.items[e],n=e==this._cv.currentPosition,o=this.getDisplayValue(e),r=this.getDisplayValue(e,void 0!==this.itemFormatter);1!=this._html&&(o=(0,s.escapeHtml)(o),r=(0,s.escapeHtml)(r)),this._itemFormatterHelper.innerHTML=r,r=this._itemFormatterHelper.textContent,this._ignoreItemFormatterTextArray.push(r);var l=null;this.checkedMemberPath&&(l=!1,(0,s.isObject)(i)?l=!!this._pathChecked.getValue(i):this._checkedItems&&(l=this._checkedItems.indexOf(i)>-1),o='\n            <label class="wj-checklist-item">\n              <span class="wj-checklist-base" role="checkbox" aria-hidden="true">\n                <span class="wj-checklist-mark" style="display: '+(l?"block":"none")+'"></span>\n              </span>\n              <span class="wj-checklist-caption">'+o+"</span>\n            </label>");var a=X.listBoxItem;if(n&&(a+=" "+s.ControlStateClsNames.selected),l&&(a+=" "+s.ControlStateClsNames.checked),this._html){var h=[s.UtilitesClsNames.separator,s.ControlStateClsNames.disabled];if(o.indexOf(h[0])>-1||o.indexOf(h[1])>-1){var c=(0,s.createElement)(o);h.forEach((function(e){(0,s.hasClass)(c,e)&&(a+=" "+e)}))}}var u="aria-describedby = listGroup-"+t;return'<div id="listitem-'+e+'" class="'+a+'" \n         role="'+this.itemRole+'" \n          '+(void 0!==t?u:"")+"\n         "+(this._getAriaSelected(n,l)?'aria-selected="true"':"")+' \n         tabindex="'+(n&&!this.isDisabled?this._orgTabIndex:-1)+'">'+o+"</div>"},t.prototype._getAriaSelected=function(e,t){return!!(null!=t?t:e)||null},t.prototype._createHeaderItem=function(e,t){var i=(0,s.escapeHtml)(e.name);return'<div id="listGroup-'+t+'" class="'+X.listBoxItem+" "+X.header+" "+s.ControlStateClsNames.disabled+'" role="group" tabindex="-1">'+i+"</div>"},t.prototype._click=function(e){if(0==e.button&&!e.defaultPrevented){var t=this.indexOf(e.target);if(t>-1)if(this.selectedIndex=t,this.checkedMemberPath){var i=this._children[this._getElementIndex(t)];i&&(i.focus({preventScroll:!0}),this.setItemChecked(t,"true"!==i.getAttribute("aria-selected")))}else(0,s.closest)(e.target,"."+X.listBoxItem).focus({preventScroll:!0})}},t.prototype._keydown=function(e){var t=this.selectedIndex;if(!e.defaultPrevented){if(65==e.keyCode&&(e.ctrlKey||e.metaKey)){var i=this.collectionView;if(this.checkedMemberPath&&(0,s.hasItems)(i)){for(var n=this._children,o=[],r=!0,l=0;l<n.length;l++)if(!(0,s.hasClass)(n[l],s._CLS_STATE_DISABLED)){var a=i.items[l];o.push(a),r&&!this.checkedItems.includes(a)&&(r=!1)}return o.length!==i.items.length?this.checkedItems=r?this.checkedItems.filter((function(e){return!o.includes(e)})):this.checkedItems.concat(o):this.checkedItems=this.checkedItems.length!=i.items.length?i.items:[],void e.preventDefault()}}if(!e.altKey&&!e.metaKey)switch(e.shiftKey&&(this._isShiftDown=!0),e.keyCode){case s.Key.Down:e.preventDefault(),this._selectNext(e.shiftKey);break;case s.Key.Up:e.preventDefault(),this._selectPrev(e.shiftKey);break;case s.Key.Home:e.preventDefault(),e.ctrlKey&&e.shiftKey?this._selectRange(0):this._selectFirst();break;case s.Key.End:e.preventDefault(),e.ctrlKey&&e.shiftKey?this._selectRange(this._children.length-1):this._selectLast();break;case s.Key.PageDown:e.preventDefault(),this._selectNextPage();break;case s.Key.PageUp:e.preventDefault(),this._selectPrevPage();break;case s.Key.Space:if(this.checkedMemberPath&&t>-1){var h=this._children[this._getElementIndex(t)];if(h&&this.isItemEnabled(t)&&!h.hasAttribute("disabled")){var c="true"===h.getAttribute("aria-selected");this.setItemChecked(t,!c),e.preventDefault()}}}}},t.prototype._getCheckboxState=function(e){var t=this._children[this._getElementIndex(e)];if(t)return"true"===t.getAttribute("aria-selected")},t.prototype._setCheckboxState=function(e,t){var i=this._getElementIndex(e),n=this._children[i];if(n){var o=n.querySelector(".wj-checklist-mark");if(o)n.setAttribute("aria-selected",t.toString()),(0,s.toggleClass)(n,s.ControlStateClsNames.checked,t),o.style.display=t?"block":"none";else{var r=this._getCheckbox(i);if(r){r.checked=t;var l=(0,s.closest)(r,"."+X.listBoxItem);l&&((0,s.toggleClass)(l,s.ControlStateClsNames.checked,t),(0,s.setAttribute)(l,"aria-selected",!!t||null))}}}},t.prototype._getCheckbox=function(e){var t=this._children;return this.hostElement&&e>-1&&e<t.length?t[e].querySelector("input[type=checkbox]"):null},t.prototype._keypress=function(e){var t=this;if(!e.defaultPrevented&&!(e.target instanceof HTMLInputElement)&&(e.charCode>32||32==e.charCode&&this._search)){e.preventDefault(),this._search+=String.fromCharCode(e.charCode),this._toSearch&&clearTimeout(this._toSearch),this._toSearch=setTimeout((function(){t._toSearch=null,t._search=""}),s.Control._SEARCH_DELAY);var i=this._findNext();i<0&&this._search.length>1&&(this._search=this._search[this._search.length-1],i=this._findNext()),i>-1&&(this.selectedIndex=i)}},t.prototype._selectNext=function(e){void 0===e&&(e=!1);var t=this.selectedIndex,i=this._findNextEnabled(t+1);return i>-1&&(e&&this._selectRange(i),this.selectedIndex=i),i>-1},t.prototype._selectPrev=function(e){void 0===e&&(e=!1);var t=this.selectedIndex,i=this._findPrevEnabled(t-1);return i>-1&&(e&&this._selectRange(i),this.selectedIndex=i),i>-1},t.prototype._findNextEnabled=function(e){for(var t=e;t<this._children.length;t++)if(this.isItemEnabled(t))return t;return-1},t.prototype._findPrevEnabled=function(e){for(var t=e;t>=0;t--)if(this.isItemEnabled(t))return t;return-1},t.prototype._selectFirst=function(){for(var e=0;e<this._children.length;e++)if(this.isItemEnabled(e))return this.selectedIndex=e,!0;return!1},t.prototype._selectLast=function(){for(var e=this._children.length-1;e>=0;e--)if(this.isItemEnabled(e))return this.selectedIndex=e,!0;return!1},t.prototype._selectNextPage=function(){var e=this.hostElement.offsetHeight,t=this._children,i=this._cv?this._cv.items.length:0,n=0;if(e>0)for(var o=this.selectedIndex+1;o<i;o++){var r=t[o].scrollHeight||this._itemHeight;if(n+r>e&&this.isItemEnabled(o))return this.selectedIndex=o,!0;n+=r}return this._selectLast()},t.prototype._selectPrevPage=function(){var e=this.hostElement.offsetHeight,t=this._children,i=0;if(e>0)for(var n=this.selectedIndex-1;n>0;n--){var o=t[n].scrollHeight||this._itemHeight;if(i+o>e&&this.isItemEnabled(n))return this.selectedIndex=n,!0;i+=o}return this._selectFirst()},t.prototype._findNext=function(){if(this.hostElement){var e=this._children.length,t=this.selectedIndex;(t<0||1==this._search.length)&&t++;var i=this._search,n=this.caseSensitiveSearch;n||(i=i.toLowerCase());for(var o=0;o<e;o++){var r=(t+o)%e;if(this.isItemEnabled(r)){var s=this.getDisplayText(r).trim();if(n||(s=s.toLowerCase()),0==s.indexOf(i))return r}}}return-1},t.prototype._initFromSelect=function(e){for(var t=e.children,i=[],n=-1,o=0;o<t.length;o++){var r=t[o];"OPTION"==r.tagName&&(r.hasAttribute("selected")&&(n=i.length),r.innerHTML?i.push({hdr:r.innerHTML,val:r.getAttribute("value"),cmdParam:r.getAttribute("cmd-param")}):i.push({hdr:'<div class="'+s.UtilitesClsNames.separator+'"></div>'}),e.removeChild(r),o--)}i&&(this.displayMemberPath="hdr",this.selectedValuePath="val",this.itemsSource=i,this.selectedIndex=n)},t.prototype._setIsDisabled=function(t){e.prototype._setIsDisabled.call(this,t),this._updateTabIndex()},t.prototype._setTabOrder=function(t){e.prototype._setTabOrder.call(this,t),this.isDisabled||this._updateTabIndex()},t.prototype._updateTabIndex=function(){var e=this.hostElement,t=this._getSelectedElement(!0);t?(t.tabIndex=this.isDisabled?-1:this._orgTabIndex,e.tabIndex=-1):e.tabIndex=this.isDisabled?-1:this._orgTabIndex},t.prototype._selectRange=function(e){if(-1!==this.selectedIndex){this._shouldClearOnShift&&this._isShiftDown&&(this.checkedItems=[],this._shouldClearOnShift=!1);var t=Math.min(this.selectedIndex,e),i=Math.max(this.selectedIndex,e),n=this.collectionView.items.slice(t,i+1);this.checkedItems=Array.from(new Set(this.checkedItems.concat(n)))}},t._DIDX_KEY="$WJ-DIDX",t._VTHRESH=Number.MAX_VALUE/2,t}(s.Control),le=function(e){function t(t,i,n){var o=e.call(this)||this;return o._index=(0,s.asNumber)(t),o._data=i,o._item=(0,s.asType)(n,HTMLElement,!0),o}return k(t,e),Object.defineProperty(t.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),t}(s.EventArgs);(0,s._addCultureInfo)("MultiSelectListBox",{filterPlaceholder:"Filter",selectAll:"Select All"});var ae,he,ce,ue,de=function(e){function t(i,n){var o=e.call(this,i)||this;o._selectAllLabel=null,o._filterPlaceholder=null,o._filterText="",o._checkOnFilter=!0,o._delay=s.Control._SEARCH_DELAY,o.checkedItemsChanged=new s.Event,o.selectedIndexChanged=new s.Event;var r=o.getTemplate();o.applyTemplate(s.ControlClsNames.hostElement+" "+s.ControlClsNames.content+" "+ee.hostElement,r,{_selectAll:"select-all",_filter:"filter",_lbHost:"list-box"}),o._selectAll.style.display="none",o._filter.style.display="none",o._lbx=new se(o._lbHost,{checkedMemberPath:t._DEF_CHECKED_PATH,loadedItems:function(){return o._updateCheckAllCheckbox()},checkedItemsChanged:function(e){return o.onCheckedItemsChanged(e)},selectedIndexChanged:function(){return o.onSelectedIndexChanged()}}),o._cbSelectAll=o._selectAll.querySelector("input[type=checkbox]"),o._spSelectAll=o._selectAll.querySelector("label>span");var l=s.culture.MultiSelectListBox;return(0,s.setText)(o._spSelectAll,l.selectAll),o._filter.placeholder=l.filterPlaceholder,o.initialize(n),o.addEventListener(o._filter,"input",(function(){o._filter.value!=o._filterText&&(o._filterText=o._filter.value,o._toSearch&&clearTimeout(o._toSearch),o._toSearch=setTimeout((function(){o._toSearch=null,o._applyFilter()}),o.delay))})),o.addEventListener(o._cbSelectAll,"click",(function(e){var t=o._lbx.collectionView;(0,s.hasItems)(t)&&(o.checkedItems=e.target.checked?t.items:[])})),o.addEventListener(o.hostElement,"keydown",(function(e){var t=o.showFilterInput?o._filter:null,i=o._lbx;if(t&&e.keyCode==s.Key.F3&&((0,s.setSelectionRange)(t,0,t.value.length),e.preventDefault()),(0,s.getActiveElement)()==t){var n=!e.altKey;switch(e.keyCode){case s.Key.Escape:case s.Key.F4:n=!1}n&&e.stopPropagation()}if(!i.containsFocus())switch(e.keyCode){case s.Key.Up:case s.Key.Down:if(o._lbx.focus(),!e.altKey){var r=i.selectedIndex+(e.keyCode==s.Key.Up?-1:1);i.selectedIndex=Math.max(0,r)}e.preventDefault()}}),!0),o.hostElement.tabIndex=-1,o._lbx.tabOrder=o._orgTabIndex,o}return k(t,e),Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate='<div class="'+s.ControlClsNames.template+" "+X.hostElement+'"><input wj-part="filter" class="'+s.InputFormElementsClsNames.formControl+'" tabindex="-1"><div wj-part="select-all" class="'+ee.header+" "+ee.selectAll+" "+X.listBoxItem+'"><label><input type="checkbox" tabindex="-1"> <span></span></label></div><div wj-part="list-box"/></div>'),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemsSource",{get:function(){return this._lbx.itemsSource},set:function(e){this._lbx.itemsSource=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collectionView",{get:function(){return this._lbx.collectionView},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"virtualizationThreshold",{get:function(){return this._lbx.virtualizationThreshold},set:function(e){this._lbx.virtualizationThreshold=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayMemberPath",{get:function(){return this._lbx.displayMemberPath},set:function(e){this._lbx.displayMemberPath=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isContentHtml",{get:function(){return this._lbx.isContentHtml},set:function(e){this._lbx.isContentHtml=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"caseSensitiveSearch",{get:function(){return this._lbx.caseSensitiveSearch},set:function(e){this._lbx.caseSensitiveSearch=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"delay",{get:function(){return this._delay},set:function(e){this._delay=(0,s.asNumber)(e,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showGroups",{get:function(){return this._lbx.showGroups},set:function(e){this._lbx.showGroups=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checkOnFilter",{get:function(){return this._checkOnFilter},set:function(e){e!=this.checkOnFilter&&(this._checkOnFilter=(0,s.asBoolean)(e),this.checkedItems=[])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this._lbx.selectedIndex},set:function(e){this._lbx.selectedIndex=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"listBox",{get:function(){return this._lbx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showFilterInput",{get:function(){return""==this._filter.style.display},set:function(e){e!=this.showFilterInput&&(this._filter.style.display=(0,s.asBoolean)(e)?"":"none",this.showFilterInput||(this._filter.value="",this._applyFilter()))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filterInputPlaceholder",{get:function(){return this._filterPlaceholder},set:function(e){e!=this._filterPlaceholder&&(this._filterPlaceholder=(0,s.asString)(e),this.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showSelectAllCheckbox",{get:function(){return""==this._selectAll.style.display},set:function(e){this._selectAll.style.display=(0,s.asBoolean)(e)?"":"none"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectAllLabel",{get:function(){return this._selectAllLabel},set:function(e){e!=this._selectAllLabel&&(this._selectAllLabel=(0,s.asString)(e),this.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checkedMemberPath",{get:function(){var e=this.listBox.checkedMemberPath;return e!=t._DEF_CHECKED_PATH?e:null},set:function(e){e=(0,s.asString)(e),this.listBox.checkedMemberPath=e||t._DEF_CHECKED_PATH},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checkedItems",{get:function(){return this.listBox.checkedItems},set:function(e){this.listBox.checkedItems=(0,s.asArray)(e)},enumerable:!0,configurable:!0}),t.prototype.onCheckedItemsChanged=function(e){var i=this;this._updateCheckAllCheckbox(),this.checkedItemsChanged.raise(this,e),e._items&&"object"==typeof e._items[0]&&(this.checkedMemberPath||t._DEF_CHECKED_PATH)in e._items[0]&&setTimeout((function(){i._lbx._updateCheckedList(i.checkedItems)}),0)},t.prototype.onSelectedIndexChanged=function(e){this.selectedIndexChanged.raise(this,e)},t.prototype.refresh=function(t){if(void 0===t&&(t=!0),e.prototype.refresh.call(this,t),this.hostElement){var i=s.culture.MultiSelectListBox;this._filter.placeholder=null!=this._filterPlaceholder?this._filterPlaceholder:i.filterPlaceholder,this._spSelectAll&&(0,s.setText)(this._spSelectAll,null!=this._selectAllLabel?this._selectAllLabel:i.selectAll),this._updateCheckAllCheckbox()}},t.prototype.dispose=function(){this.listBox.dispose(),e.prototype.dispose.call(this)},t.prototype._applyFilter=function(){var e=this,t=this._lbx,i=t.collectionView,n=this._filter.value,o=n?new RegExp((0,s.escapeRegExp)(n),t.caseSensitiveSearch?"":"i"):null,r=this.displayMemberPath,l=r?new s.Binding(r):null,a=this.checkOnFilter?null:this.checkedItems;i.filter=function(t){return null==o||(!!(a&&a.indexOf(t)>-1)||(l&&(t=l.getValue(t)),e.isContentHtml&&(t=(0,s.toPlainText)(t)),null!=t&&o.test(t.toString())))},t.selectedIndex=Math.max(0,t.selectedIndex),this._checkOnFilter&&(this.checkedItems=o?i.items:[])},t.prototype._updateCheckAllCheckbox=function(){var e=this._lbx.collectionView,t=this._cbSelectAll;if((0,s.hasItems)(e)){var i=e.items.length,n=this.checkedItems.length;(0,s.setChecked)(t,n==i||0!=n&&null),t.disabled=!1}else(0,s.setChecked)(t,!1),t.checked=!1,t.disabled=!0},t.prototype._setIsDisabled=function(t){e.prototype._setIsDisabled.call(this,t),this.hostElement.tabIndex=-1,this.isDisabled?this._lbx.tabOrder=-1:this._lbx.tabOrder=this._orgTabIndex},t.prototype._setTabOrder=function(e){this._orgTabIndex=e,this._lbx.tabOrder=e},t.prototype.tryForceClearDelayAndFilter=function(){var e=this;if(this._toSearch){var t=this._delay;this._filterText=this._filter.value,this._toSearch&&clearTimeout(this._toSearch),this._toSearch=setTimeout((function(){e._toSearch=null,e._applyFilter()}),0),this._delay=t}},t.prototype.onLostFocus=function(){this.tryForceClearDelayAndFilter(),e.prototype.onLostFocus.call(this)},t._DEF_CHECKED_PATH="$checked",t._ctrlTemplate="",t}(s.Control);(0,s._addCultureInfo)("Calendar",{ariaLabels:{calendar:"Calendar",chooseDate:"Choose Date",chooseMonth:"Choose Month",monthView:"Month View",yearView:"Year View",selectYear:"Select Year",prvMo:"Previous Month",today:"Select Today",nxtMo:"Next Month",prvYr:"Previous Year",currMo:"Current Month",nxtYr:"Next Year"},buttons:{ok:"OK",cancel:"Cancel"}}),(he=ae||(ae={}))[he.None=0]="None",he[he.Day=1]="Day",he[he.Month=2]="Month",he[he.Range=3]="Range",function(e){e[e.None=0]="None",e[e.FirstMonth=1]="FirstMonth",e[e.LastMonth=2]="LastMonth",e[e.FirstAndLastMonths=3]="FirstAndLastMonths",e[e.AllMonths=4]="AllMonths",e[e.Outside=5]="Outside"}(ce||(ce={})),function(e){e[e.None=0]="None",e[e.All=1]="All"}(ue||(ue={}));var pe,fe,_e,ge=function(e){function t(t,i){var n=e.call(this,t)||this;n._yrPicker=!0,n._mtPicker=ce.FirstMonth,n._wksBefore=0,n._wksAfter=0,n._rngMin=0,n._rngMax=0,n._min=null,n._max=null,n._readOnly=!1,n._handleWheel=!0,n._fdw=null,n._selMode=ae.Day,n._ariaLabel=s.culture.Calendar.ariaLabels.calendar,n._tmYrHidden=0,n._fmtYrMo="y",n._fmtYr="yyyy",n._fmtDayHdr="ddd",n._fmtDay="d ",n._fmtMonths="MMM",n._fmtDayTitle="dddd",n.valueChanged=new s.Event,n.rangeEndChanged=new s.Event,n.rangeChanged=new s.Event,n.displayMonthChanged=new s.Event,n.formatItem=new s.Event((function(){n.invalidate()})),n._updateCellFocus=function(e,t){(0,s.toggleClass)(e,L.focused,t),(0,s.setAttribute)(e,"tabIndex",t?"0":"-1"),t&&n.containsFocus()&&e.focus()},n.cancelButtonClicked=new s.Event,n.OKButtonClicked=new s.Event,n._enterKeyDownToSetValue=new s.Event,n._value=n._rngEnd=s.DateTime.newDate(),n._month=n._getMonth(n._value),n._cals=[n],n._createChildren(),n._createYearPicker();var o=n.hostElement,r=n.addEventListener.bind(n);r(o,"keydown",n._keydown.bind(n)),r(o,"click",n._click.bind(n)),r(n._btnCancel,"click",n.oneCancelButtonClick.bind(n)),r(n._btnOK,"click",n.onOkButtonClick.bind(n)),n._focusValue=s.DateTime.newDate(),(0,s.setAttribute)(o,"role","application"),(0,s.setAttribute)(n.hostElement,"aria-label",n._ariaLabel);var l=s.culture.Calendar.buttons;return(0,s.setText)(n._btnOK,l.ok),(0,s.setText)(n._btnCancel,l.cancel),n._keyActionTab=ue.None,n._rptUp=new s._ClickRepeater(n._btnPrv),n._rptDn=new s._ClickRepeater(n._btnNxt),n.addEventListener(o,"wheel",(function(e){n.handleWheel&&!e.defaultPrevented&&!n.isReadOnly&&n.containsFocus()&&(e.deltaY<0?n._btnPrv.click():n._btnNxt.click(),e.preventDefault())})),n.initialize(i),n.refresh(!0),n}return k(t,e),Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate='<div class="'+s.ControlClsNames.content+" "+L.calendarOuter+'"><div wj-part="tbl-header" class='+L.calendarHeader+'><div wj-part="btn-month" class='+L.monthSelect+' role="button" aria-live="polite"><span wj-part="span-month"></span> <span class='+s.GlyphClsNames.down+'></span></div><div class="'+s.InputFormElementsClsNames.btnGroup+'"><button wj-part="btn-prev" class="'+s.InputFormElementsClsNames.btn+" "+s.InputFormElementsClsNames.btnDefault+'" tabindex="-1"><span class='+s.GlyphClsNames.left+'></span></button><button wj-part="btn-today" class="'+s.InputFormElementsClsNames.btn+" "+s.InputFormElementsClsNames.btnDefault+'" tabindex="-1"><span class='+s.GlyphClsNames.circle+'></span></button><button wj-part="btn-next" class="'+s.InputFormElementsClsNames.btn+" "+s.InputFormElementsClsNames.btnDefault+'" tabindex="-1"><span class='+s.GlyphClsNames.right+'></span></button></div></div><table wj-part="tbl-month" class='+L.calendarMonth+' role="grid"></table><table wj-part="tbl-year" class='+L.calendarYear+' role="grid"></table><div wj-part="confirmation-button-container" class="'+L.confirmationButtonContainer+'"><button wj-part="btn-ok" class="'+s.InputFormElementsClsNames.btn+" "+L.button+'"></button><button wj-part="btn-cancel" class="'+s.InputFormElementsClsNames.btn+" "+L.button+'"></button></div>'),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){if((!s.DateTime.sameDate(e,this._value)||!s.DateTime.sameTime(e,this._value))&&(this._clearingRangeEnd=!s.DateTime.equals(this._value,e),this.rangeEnd=null,this._clearingRangeEnd=!1,e=(0,s.asDate)(e,!0),e=this._clamp(e),(this._valid(e)||null==e)&&(this.ensureVisible(e||new Date),s.DateTime.equals(this._value,e)||(this._value=e,this.focusMode&&(this._focusValue=e),this.invalidate(!1),this.onValueChanged())),!this.value)){var t=this.min,i=this.max,n=this.displayMonth;i&&i<n?this.ensureVisible(i):t&&t>n&&this.ensureVisible(t)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"focusValue",{get:function(){return this._focusValue},set:function(e){this._clearingRangeEnd=!s.DateTime.equals(this._focusValue,e),this.rangeEnd=null,this._clearingRangeEnd=!1,e=(0,s.asDate)(e,!0),e=this._clamp(e),(this._valid(e)||null==e)&&(this.ensureVisible(e||new Date),this._focusValue=e,this.invalidate(!1))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rangeEnd",{get:function(){return this._rngEnd},set:function(e){if(e=(0,s.asDate)(e,!0),(e=this._clamp(e))&&this._value&&this._rngMode()){e<this._value&&(e=this._value);var t=this._rngMin,i=this._rngMax;if(t&&t>0||i&&i>0){var n=this._value,o=Math.ceil((e.getTime()-n.getTime())/864e5)+1;t&&t>0&&o<t&&(e=s.DateTime.addDays(n,t-1)),i&&i>0&&o>i&&(e=s.DateTime.addDays(n,i-1))}}!this._valid(e)&&null!=e||s.DateTime.equals(this._rngEnd,e)||(this._rngEnd=e,this.ensureVisible(e),this.invalidate(!1),this._clearingRangeEnd||this.onRangeEndChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rangeMin",{get:function(){return this._rngMin},set:function(e){(e=(0,s.asNumber)(e,!0,!0))!=this._rngMin&&(this._rngMin=e,this._syncProp(this,"rangeMin"),this._rngMode()&&this._rngEnd&&(this.rangeEnd=this._rngEnd))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rangeMax",{get:function(){return this._rngMax},set:function(e){(e=(0,s.asNumber)(e,!0,!0))!=this._rngMax&&(this._rngMax=e,this._syncProp(this,"rangeMax"),this._rngMode()&&this._rngEnd&&(this.rangeEnd=this._rngEnd))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this._min},set:function(e){(e=(0,s.asDate)(e,!0))!=this.min&&(this._min=e,this._syncProp(this,"min"),this.refresh(),!this.value&&e&&e>this.displayMonth&&this.ensureVisible(e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},set:function(e){(e=(0,s.asDate)(e,!0))!=this.max&&(this._max=e,this._syncProp(this,"max"),this.refresh(),!this.value&&e&&e<this.displayMonth&&this.ensureVisible(e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectionMode",{get:function(){return this._selMode},set:function(e){var t=ae;(e=(0,s.asEnum)(e,t))!=this._selMode&&(this._selMode=e,this._mthMode()&&(this.monthView=!1),this._rngEnd=e==t.Range?this._value:null,this.refresh(),this._syncProp(this,"selectionMode"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isReadOnly",{get:function(){return this._readOnly},set:function(e){this._readOnly=(0,s.asBoolean)(e),(0,s.toggleClass)(this.hostElement,s.ControlStateClsNames.readOnly,this.isReadOnly),this._syncProp(this,"isReadOnly")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"handleWheel",{get:function(){return this._handleWheel},set:function(e){this._handleWheel!=e&&(this._handleWheel=(0,s.asBoolean)(e),this._syncProp(this,"handleWheel"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"repeatButtons",{get:function(){return!this._rptUp.disabled},set:function(e){this._rptUp.disabled=this._rptDn.disabled=!(0,s.asBoolean)(e),this._syncProp(this,"repeatButtons")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showYearPicker",{get:function(){return this._yrPicker},set:function(e){e!=this._yrPicker&&(this._yrPicker=(0,s.asBoolean)(e),this._syncProp(this,"showYearPicker"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showMonthPicker",{get:function(){return this._mtPicker},set:function(e){if(e!=this._mtPicker){var t=ce;(0,s.isBoolean)(e)&&(e=e?t.FirstMonth:t.None),this._mtPicker=(0,s.asEnum)(e,t),(0,s.toggleClass)(this.hostElement,s.InputFormElementsClsNames.btnsOutside,this._getShowMonthPicker()==t.Outside),this.refresh(),this._syncProp(this,"showMonthPicker")}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstDayOfWeek",{get:function(){return this._fdw},set:function(e){if(e!=this._fdw){if((e=(0,s.asNumber)(e,!0))&&(e>6||e<0))throw"firstDayOfWeek must be between 0 and 6 (Sunday to Saturday).";this._fdw=e,this.refresh(),this._syncProp(this,"firstDayOfWeek")}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayMonth",{get:function(){return this._month},set:function(e){e=(0,s.asDate)(e),e=this._getMonth(e);var t=this._getDisplayMonthRange();t.to&&e>t.to&&(e=t.to),t.from&&e<t.from&&(e=t.from),s.DateTime.equals(this.displayMonth,e)||(this._month=e,this.invalidate(!0),this.onDisplayMonthChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"monthCount",{get:function(){var e=this.hostElement;return e?e.querySelectorAll("."+L.hostElement).length+1:0},set:function(e){var i=this,n=this.hostElement;if(e!=this.monthCount&&n){var o=n.querySelectorAll("."+L.hostElement);e=(0,s.asInt)(e,!1),(0,s.assert)(e>0,"monthCount must be >= 1."),(0,s.assert)(1==e||!(0,s.closest)(n.parentElement,"."+L.hostElement),"Only top-level calendars can set monthCount.");for(var r=0;r<o.length;r++){var l=o[r];(0,s.removeChild)(l),this._getCalendar(l).dispose()}for(this._cals=[this],r=1;r<e;r++){for(var a in(l=new t(document.createElement("div"),{itemFormatter:this.itemFormatter,itemValidator:this.itemValidator,formatItem:function(e,t){return i.onFormatItem(t)}}))._selMode=this._selMode,l._value=this._value,l._rngEnd=this._rngEnd,this)if(!/^(_.*|constructor|displayMonth|monthCount|hostElement|rightToLeft|isUpdating|isTouching)$/.test(a)){var h=this[a];(0,s.isFunction)(h)||h instanceof s.Event||(l[a]=h)}this._cals.push(l),n.appendChild(l.hostElement)}(0,s.toggleClass)(n,L.calendarMultiMonth,e>1),this._syncProp(this,"displayMonth")}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formatYearMonth",{get:function(){return this._fmtYrMo},set:function(e){e!=this._fmtYrMo&&(this._fmtYrMo=(0,s.asString)(e),this._syncProp(this,"formatYearMonth"),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formatDayHeaders",{get:function(){return this._fmtDayHdr},set:function(e){e!=this._fmtDayHdr&&(this._fmtDayHdr=(0,s.asString)(e),this._syncProp(this,"formatDayHeaders"),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formatDays",{get:function(){return this._fmtDay},set:function(e){e!=this._fmtDay&&(this._fmtDay=(0,s.asString)(e),this._syncProp(this,"formatDays"),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formatYear",{get:function(){return this._fmtYr},set:function(e){e!=this._fmtYr&&(this._fmtYr=(0,s.asString)(e),this._syncProp(this,"formatYear"),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formatMonths",{get:function(){return this._fmtMonths},set:function(e){e!=this._fmtMonths&&(this._fmtMonths=(0,s.asString)(e),this._syncProp(this,"formatMonths"),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showHeader",{get:function(){return"none"!=this._tbHdr.style.display},set:function(e){e!=this.showHeader&&(this._tbHdr.style.display=(0,s.asBoolean)(e)?"":"none",this._syncProp(this,"showHeader"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"monthView",{get:function(){return"none"!=this._tbMth.style.display},set:function(e){if(e!=this.monthView){this._tbMth.style.display=e?"":"none",this._tbYr.style.display=e?"none":"",this.refresh();var t=s.culture.Calendar.ariaLabels;(0,s.setAriaLabel)(this._btnPrv,e?t.prvMo:t.prvYr),(0,s.setAriaLabel)(this._btnTdy,e?t.today:t.currMo),(0,s.setAriaLabel)(this._btnNxt,e?t.nxtMo:t.nxtYr),(0,s.setAriaLabel)(this._btnMth,e?t.monthView:t.yearView),this._updateMonthButtonAria(),this._syncProp(this,"monthView")}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weeksBefore",{get:function(){return this._wksBefore},set:function(e){e!=this._wksBefore&&(this._wksBefore=Math.floor((0,s.asNumber)(e,!1,!0)),this._syncProp(this,"weeksBefore"),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weeksAfter",{get:function(){return this._wksAfter},set:function(e){e!=this._wksAfter&&(this._wksAfter=Math.floor((0,s.asNumber)(e,!1,!0)),this._syncProp(this,"weeksAfter"),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemFormatter",{get:function(){return this._itemFormatter},set:function(e){e!=this._itemFormatter&&(this._itemFormatter=(0,s.asFunction)(e),this._syncProp(this,"itemFormatter"),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemValidator",{get:function(){return this._itemValidator},set:function(e){e!=this._itemValidator&&(this._itemValidator=(0,s.asFunction)(e),this._syncProp(this,"itemValidator"),this.invalidate())},enumerable:!0,configurable:!0}),t.prototype.hitTest=function(e){var i=e instanceof MouseEvent?e.target:e instanceof Element?e:null;return(0,s.assert)(null!=i,"MouseEvent or Element expected"),i?i[t._DATE_KEY]:null},t.prototype.ensureVisible=function(e){if(null!=e){var t=this._getCalendars(),i=t.indexOf(this),n=t[0],o=t[t.length-1];e<n.displayMonth?this.displayMonth=s.DateTime.addMonths(this._getMonth(e),i):e>o.displayMonth&&(this.displayMonth=s.DateTime.addMonths(this._getMonth(e),i-t.length+1))}},t.prototype.onValueChanged=function(e){this.valueChanged.raise(this,e),this._syncProp(this,"value")},t.prototype.onRangeEndChanged=function(e){this.rangeEndChanged.raise(this,e),this._syncProp(this,"rangeEnd"),this._value&&this._rngEnd&&this.onRangeChanged(e)},t.prototype.onRangeChanged=function(e){this.rangeChanged.raise(this,e)},t.prototype.onDisplayMonthChanged=function(e){this.displayMonthChanged.raise(this,e),this._syncProp(this,"displayMonth")},t.prototype.onFormatItem=function(e){this.formatItem.raise(this,e)},t.prototype._containsFocusImpl=function(t){return e.prototype._containsFocusImpl.call(this,t)||this._lbYears._containsFocusImpl(t)},t.prototype.dispose=function(){this._rptUp.element=null,this._rptDn.element=null,this._lbYears.dispose(),e.prototype.dispose.call(this)},t.prototype.refresh=function(t){void 0===t&&(t=!0);var i=this.hostElement,n=this.containsFocus();if(i){e.prototype.refresh.call(this,t),t&&this._updateContent(),this._updateSelection();var o=this._getDisplayMonthRange(),r=this.displayMonth,l=null==o.from||r>o.from,a=null==o.to||r<o.to;(0,s.enable)(this._btnPrv,l),(0,s.enable)(this._btnNxt,a),l&&a||this.containsFocus()||this.focus();var h=!0,c=s.DateTime.newDate(),u=this._min&&this._min>c,d=this._max&&this._max<c;if((u||d)&&(h=!1),(0,s.enable)(this._btnTdy,h),n&&!this._isButtonFocused()){var p=(this.monthView?this._tbMth:this._tbYr).querySelector("td."+s.ControlStateClsNames.selected)||i;p&&!this.focusMode&&p.focus()}var f=this._getCalendars();f.length>1&&this==f[0]&&f.forEach((function(e,i){i>0&&e.refresh(t)}))}},t.prototype._getShowMonthPicker=function(){var e=ce,t=this._getCalendars(),i=t.indexOf(this),n=this.showMonthPicker;switch(n){case e.FirstMonth:case e.Outside:return 0==i?n:0;case e.LastMonth:return i==t.length-1?n:0;case e.FirstAndLastMonths:return 0==i||i==t.length-1?n:0;case e.AllMonths:return n}return 0},t.prototype._getDisplayMonthRange=function(){var e={from:null,to:null};if(this.min||this.max){var t=this._getCalendars(),i=t.indexOf(this),n=this._mthMode()?s.DateTime.addYears:s.DateTime.addMonths;this.min&&(e.from=n(this._getMonth(this.min),i)),this.max&&(e.to=n(this._getMonth(this.max),i-t.length+1))}return e},t.prototype._getCalendar=function(e){return s.Control.getControl(e)},t.prototype._getCalendars=function(){var e=(0,s.closest)(this.hostElement,"."+L.calendarMultiMonth);return(e?this._getCalendar(e):this)._cals},t.prototype._syncProp=function(e,t){var i=this;if(!this._syncing){var n=this._getCalendars();if(n&&n.length>1){var o=e[t],r=this._mthMode()?s.DateTime.addYears:s.DateTime.addMonths;"displayMonth"==t&&(o=r(o,-n.indexOf(e))),n[0].deferUpdate((function(){i._syncing=!0,n.forEach((function(n,s){if(n!=e){var l=n.displayMonth;n[t]="displayMonth"==t?r(o,s):o,"value"==t&&(n.displayMonth=l,i._rngMode()&&(n.rangeEnd=null))}})),i._syncing=!1}))}}},t.prototype._updateContent=function(){var e=this.displayMonth,i=s.Globalize.format,n=s.DateTime,o=this._getShowMonthPicker();(0,s.setText)(this._spMth,i(e,this._fmtYrMo));var r=this._btnMth.querySelector("."+s.GlyphClsNames.down);r&&(r.style.display=this._mthMode()||!o?"none":"");var l=(0,s.closest)(this._btnTdy,"."+s.InputFormElementsClsNames.btnGroup);l&&(l.style.display=o?"":"none");var a=null!=this._fdw?this._fdw:s.Globalize.getFirstDayOfWeek(),h=n.addDays(e,-(e.getDay()-a+7)%7),c=n.monthLast(e),u=this._tbMth.querySelectorAll("th");this._updateMonthButtonAria();for(var d=0;d<7&&d<u.length;d++){var p=n.addDays(h,d);(0,s.setText)(u[d],i(p,this._fmtDayHdr)),(0,s.setAttribute)(u[d],"tabIndex","-1"),(0,s.setAttribute)(u[d],"abbr",i(p,this._fmtDayTitle))}var f=!1;this._dateViewContainsFocus()&&(f=!0);var _=this._tbMth.querySelectorAll("tr");for(d=1;d<_.length;d++)(0,s.removeChild)(_[d]);f&&this.focus();var g=n.addDays(h,-7*this._wksBefore);for(d=0;d<this._wksBefore;d++)g=this._addWeek(g,L.weekBefore);for(;g<=c;)g=this._addWeek(g);for(d=0;d<this._wksAfter;d++)g=this._addWeek(g,L.weekAfter);u=this._tbYr.querySelectorAll("td");var m=this._tbYr.querySelectorAll("th");for(m.length&&(0,s.setText)(m[0],i(e,this._fmtYr)),d=0;d<u.length;d++){g=n.newDate(e.getFullYear(),d,1);var b=u[d],v=!this._monthInValidRange(g);b[t._DATE_KEY]=g;var y=s.Globalize.format(g,"MMMM yyyy");(0,s.setText)(b,i(g,this._fmtMonths)),(0,s.toggleClass)(b,s.ControlStateClsNames.disabled,v),(0,s.setAriaLabel)(b,y),(0,s.setAttribute)(b,"tabIndex","-1"),(0,s.setAttribute)(b,"abbr",y)}this._confirmationButtonContainer.style.display=this.showConfirmationButtons?"":"none",this._updateButtonTabIndex()},t.prototype._updateSelection=function(){for(var e=t._DATE_KEY,i=s.DateTime,n=this._tbMth.querySelectorAll("td"),o=0;o<n.length;o++){var r=(d=n[o])[e],l=this.value,a=this.rangeEnd,h=this._selMode&&null!=l&&i.sameDate(r,l),c=this._selMode&&null!=l&&i.sameDate(r,a),u=this._selMode&&null!=l&&r>l&&null!=a&&r<=a;(0,s.toggleClass)(d,s.ControlStateClsNames.selected,h),(0,s.toggleClass)(d,s.ControlStateClsNames.multiSelected,u),(0,s.toggleClass)(d,s.ControlStateClsNames.lastSelected,c),(0,s.setAttribute)(d,"aria-selected",!!h||null),this._customizeCell(o,r,d)}for(n=this._tbYr.querySelectorAll("td"),o=0;o<n.length;o++){var d;r=(d=n[o])[e],h=this._sameMonth(r,this.value),(0,s.toggleClass)(d,s.ControlStateClsNames.selected,h),(0,s.setAttribute)(d,"aria-selected",!!h||null)}this.focusMode&&!0!==this.isDisabled&&this._updateFocusInAccessibilityMode()},t.prototype._updateFocusInAccessibilityMode=function(){for(var e,i=t._DATE_KEY,n=s.DateTime,o=this._tbMth.querySelectorAll("td"),r=0;r<o.length;r++){var l=(c=o[r])[i],a=this._selMode&&null!=this.focusValue&&n.sameDate(l,this.focusValue)&&this._isSameDay(this.focusValue,l);void 0===e&&!c.classList.contains(L.dayOtherMonth)&&this._isDayValid(l)&&(e=c),this._isSameDay(this.focusValue,l)&&this._isDayValid(l)&&(e=c),this._updateCellFocus(c,a)}0===this._tbMth.querySelectorAll('[tabindex="0"]').length&&this.monthView&&e&&((0,s.setAttribute)(e,"tabIndex","0"),(0,s.toggleClass)(e,L.focused,!0),this._focusValue=e[i]);var h=(o=this._tbYr.querySelectorAll("td"))[0];for(r=0;r<o.length;r++){var c;l=(c=o[r])[i],a=this._sameMonth(l,this.focusValue),this._isSameMonth(this.value,l)&&(h=c),this._updateCellFocus(c,a)}0!==this._tbYr.querySelectorAll('td[tabindex="0"]').length||this.monthView||((0,s.setAttribute)(h,"tabIndex","0"),(0,s.toggleClass)(h,L.focused,!0),this._focusValue=h[i])},t.prototype._addWeek=function(e,i){for(var n=this._createElement("tr",this._tbMth,i),o=s.DateTime,r=0;r<7;r++){var l=this._createElement("td",n),a=o.addDays(e,r);l[t._DATE_KEY]=a,(0,s.setText)(l,s.Globalize.format(a,this._fmtDay)),(0,s.setAriaLabel)(l,s.Globalize.format(a,"D"));var h=!this._valid(a),c=a.getDay(),u=a.getMonth()!=this.displayMonth.getMonth();(0,s.toggleClass)(l,L.dayToday,o.sameDate(a,o.newDate())),(0,s.toggleClass)(l,L.dayWeekend,0==c||6==c),(0,s.toggleClass)(l,L.dayOtherMonth,u),(0,s.toggleClass)(l,s.ControlStateClsNames.invalid,h||!this._inValidRange(a)),(0,s.setAttribute)(l,"aria-disabled",h||!this._inValidRange(a))}return o.addDays(e,7)},t.prototype._customizeCell=function(e,t,i){if((0,s.isFunction)(this.itemFormatter)&&this.itemFormatter(t,i),this.formatItem.hasHandlers){var n=new le(e,t,i);this.onFormatItem(n)}},t.prototype._canChangeValue=function(){return!this._readOnly&&this._selMode!=ae.None},t.prototype._valid=function(e){return!(!(0,s.isDate)(e)||!s.DateTime.sameDate(e,this._clamp(e)))&&(!(0,s.isFunction)(this.itemValidator)||this.itemValidator(e))},t.prototype._inValidRange=function(e){var t=s.DateTime.fromDateTime;return!(this.min&&e<t(this.min,e))&&!(this.max&&e>t(this.max,e))},t.prototype._monthInValidRange=function(e){if(this.min||this.max){var t=e.getFullYear(),i=e.getMonth(),n=s.DateTime,o=n.newDate(t,i,1),r=n.newDate(t,i+1,0);if(this.min&&this.min>r)return!1;if(this.max&&this.max<o)return!1}return!0},t.prototype._sameMonth=function(e,t){return(0,s.isDate)(e)&&(0,s.isDate)(t)&&e.getMonth()==t.getMonth()&&e.getFullYear()==t.getFullYear()},t.prototype._getValidDate=function(e,t){if((0,s.isDate)(e))for(var i=e.getFullYear(),n=e.getMonth()+(t?0:1),o=t?1:0,r=s.DateTime,l=r.newDate(i,n,o),a=t?1:-1,h=0;h<31;h++){if(this._valid(l))return l;l=r.addDays(l,a)}return null},t.prototype._clamp=function(e){if(e){var t=s.DateTime.fromDateTime;if(this.min){var i=t(this.min,e);e<i&&(e=i)}if(this.max){var n=t(this.max,e);e>n&&(e=n)}}return e},t.prototype._createChildren=function(){var e=this.getTemplate();this.applyTemplate(s.ControlClsNames.hostElement+" "+L.hostElement,e,{_tbHdr:"tbl-header",_btnMth:"btn-month",_spMth:"span-month",_btnPrv:"btn-prev",_btnTdy:"btn-today",_btnNxt:"btn-next",_tbMth:"tbl-month",_tbYr:"tbl-year",_confirmationButtonContainer:"confirmation-button-container",_btnOK:"btn-ok",_btnCancel:"btn-cancel"}),this._tbYr.style.display="none";var t=s.culture.Calendar.ariaLabels;(0,s.setAriaLabel)(this._tbMth,t.chooseDate),(0,s.setAriaLabel)(this._tbYr,t.chooseMonth),(0,s.setAriaLabel)(this._btnPrv,t.calendar),(0,s.setAriaLabel)(this._btnMth,t.monthView),(0,s.setAriaLabel)(this._btnPrv,t.prvMo),(0,s.setAriaLabel)(this._btnTdy,t.today),(0,s.setAriaLabel)(this._btnNxt,t.nxtMo);for(var i=this._createElement("tr",this._tbMth,L.header),n=0;n<7;n++)this._createElement("th",i).setAttribute("scope","col");i=this._createElement("tr",this._tbYr,L.header),this._showYearListBoxButton=this._createElement("th",i),this._showYearListBoxButton.setAttribute("colspan","4"),this._showYearListBoxButton.setAttribute("scope","col"),(0,s.setAriaLabel)(this._showYearListBoxButton,t.selectYear),(0,s.toggleClass)(this._showYearListBoxButton,L.selectedYear),this._showYearListBoxButton.setAttribute("role","button"),this._showYearListBoxButton.setAttribute("tabIndex","-1");for(var o=0;o<3;o++){i=this._createElement("tr",this._tbYr);for(var r=0;r<4;r++)this._createElement("td",i)}},t.prototype._createYearPicker=function(){var e=this,t=this.hostElement,i=this._createElement("div",null,j.dropDownPanel+" "+L.yearPicker);i.tabIndex=this._orgTabIndex,this._lbYears=new se(i,{lostFocus:function(t){if((0,s.hidePopup)(i),e._tmYrHidden=Date.now(),e.removeEventListener(window,"touchstart"),t.selectedIndex>-1){var n=s.DateTime.clone(e.displayMonth);n.setFullYear(t.selectedIndex+t.itemsSource[0]),e.displayMonth=n}e.keyActionTab===ue.All&&e._showYearListBoxButton.focus()}}),(0,s.setAriaLabel)(this._lbYears.hostElement,s.culture.Calendar.ariaLabels.selectYear),this.addEventListener(i,"keydown",(function(i){switch(i.keyCode){case s.Key.Enter:t.focus();break;case s.Key.Space:t.focus(),i.preventDefault();break;case s.Key.Escape:e._lbYears.selectedIndex=-1,t.focus()}i.defaultPrevented&&i.stopPropagation()})),this.addEventListener(i,"click",(function(e){t.focus()}))},t.prototype._createElement=function(e,t,i){var n=document.createElement(e);return i&&(0,s.addClass)(n,i),t&&t.appendChild(n),n},t.prototype._click=function(e){if(!e.defaultPrevented&&0==e.button){var t=!1,i=e.target;if((0,s.contains)(this._btnMth,i)&&!this._mthMode()&&this._getShowMonthPicker()?(this.monthView=!this.monthView,t=!0):(0,s.contains)(this._btnPrv,i)?(this._navigate(-1),t=!0):(0,s.contains)(this._btnNxt,i)?(this._navigate(1),t=!0):(0,s.contains)(this._btnTdy,i)&&(this._navigate(0),t=!0),i&&!t&&this._yrPicker&&(0,s.contains)(this._tbYr,i)&&(0,s.closest)(i,"."+L.header))return void this._showYearPickerAction(e);if(i&&!t){var n=(0,s.closest)(i,"td");if(n){var o=this.hitTest(n),r=s.DateTime.fromDateTime;if(this.monthView){if(o&&this._canChangeValue()){var l=r(o,this._value);this._inValidRange(l)&&this._valid(l)&&(this._rngMode()&&this.value&&!this.rangeEnd&&l>=this.value?this.rangeEnd=l:this.value=l),t=!0}}else o&&(this.displayMonth=o,this._mthMode()?this._canChangeValue()&&(l=r(this.displayMonth,this.value),this._inValidRange(l)&&(this.value=l)):this.monthView=!0,t=!0)}}t&&(e.preventDefault(),this.focusMode||0===e.detail||this.focus())}},t.prototype._keydown=function(e){if(!e.defaultPrevented){if(e.altKey)switch(e.keyCode){case s.Key.Up:case s.Key.Down:return;case s.Key.End:return this._navigate(0),void e.preventDefault()}var t=e.target;if(!(e.ctrlKey||e.metaKey||e.shiftKey&&!this._rngMode())){if(("Enter"===e.key||"Space"===e.code)&&t&&this.keyActionTab===ue.All){if((0,s.contains)(this._btnMth,t)&&!this._mthMode()&&this._getShowMonthPicker())return this.monthView=!this.monthView,void("Space"===e.code&&e.preventDefault());if(this._yrPicker&&(0,s.contains)(this._tbYr,t)&&(0,s.closest)(t,"."+L.header))return void this._showYearPickerAction(e)}if(this.focusMode){if(("Enter"===e.key||"Space"===e.code)&&t.classList.contains(L.focused)){var i=(0,s.closest)(t,"td");if(i){var n=this.hitTest(i),o=s.DateTime.fromDateTime;if(this.monthView){if(n&&this._canChangeValue()){var r=o(n,this._value);this._inValidRange(r)&&this._valid(r)&&(this._rngMode()&&this.value&&!this.rangeEnd&&r>=this.value?this.rangeEnd=r:(this._enterKeyDownToSetValue.raise(this,e),this.value=r))}}else n&&(this.displayMonth=n,this._mthMode()?this._canChangeValue()&&(r=o(this.displayMonth,this.value),this._inValidRange(r)&&(this.value=r)):this.monthView=!0)}return void("Space"===e.code&&e.preventDefault())}if(!(0,s.contains)(this._tbMth,e.target)&&(!(0,s.contains)(this._tbYr,e.target)||(0,s.contains)(this._tbYr.firstElementChild,e.target)))return}var l=this._getKeyCode(e),a=0,h=0,c=!0;if(this.monthView)switch(l){case s.Key.Left:a=-1;break;case s.Key.Right:a=1;break;case s.Key.Up:a=-7;break;case s.Key.Down:a=7;break;case s.Key.PageDown:h=e.altKey?12:1;break;case s.Key.PageUp:h=e.altKey?-12:-1;break;case s.Key.Home:case s.Key.End:if(this._canChangeValue()&&!e.shiftKey){var u=this.value||this.displayMonth;(d=this._getValidDate(u,l==s.Key.Home))&&(this.value=s.DateTime.fromDateTime(d,this.value),this._rngEnd=null)}break;default:c=!1}else switch(l){case s.Key.Left:h=-1;break;case s.Key.Right:h=1;break;case s.Key.Up:h=-4;break;case s.Key.Down:h=4;break;case s.Key.PageDown:h=e.altKey?120:12;break;case s.Key.PageUp:h=e.altKey?-120:-12;break;case s.Key.Home:h=this.value?-this.value.getMonth():0;break;case s.Key.End:h=this.value?11-this.value.getMonth():0;break;case s.Key.Enter:this._mthMode()?c=!1:this.monthView=!0;break;default:c=!1}if(this._canChangeValue()&&(a||h)){r=e.shiftKey&&null!=this.rangeEnd?this.rangeEnd:this.focusMode?this.focusValue:this.value;var d=s.DateTime;if(r?(r=d.addDays(r,a),r=d.addMonths(r,h)):r=this._getValidDate(new Date,!0),h&&!this._valid(r)){u=r.getMonth();for(var p=1;p<31&&!this._valid(r);p++){var f=d.addDays(r,+p),_=d.addDays(r,-p);this._valid(f)&&f.getMonth()==u?r=f:this._valid(_)&&_.getMonth()==u&&(r=_)}}for(p=0;p<31&&!this._valid(r);p++)r=d.addDays(r,a>0||h>0?1:-1);e.shiftKey&&this._rngMode()&&r>this.value?this.rangeEnd=r:this.focusMode?this.focusValue=r:this.value=r}c&&e.preventDefault()}}},t.prototype._getMonth=function(e){var t=s.DateTime;return e=e||t.newDate(),t.newDate(e.getFullYear(),e.getMonth(),1)},t.prototype._mthMode=function(){return this.selectionMode==ae.Month},t.prototype._rngMode=function(){return this.selectionMode==ae.Range},t.prototype._navigate=function(e){var t=this.monthView,i=this.displayMonth,n=s.DateTime;switch(e){case 0:var o=n.newDate();this._canChangeValue()&&(this.value=t?n.fromDateTime(o,this.value):this._getMonth(o)),i=this._getMonth(o);break;case 1:i=n.addMonths(i,t?1:12);break;case-1:i=n.addMonths(i,t?-1:-12)}this.displayMonth=i},t.prototype._setTabOrder=function(t){e.prototype._setTabOrder.call(this,t),this._lbYears.tabOrder=this._orgTabIndex},t.prototype._showYearPickerAction=function(e){var t=this,i=e.target;if(Date.now()-this._tmYrHidden<600)e.preventDefault();else{for(var n=this.displayMonth.getFullYear(),o=this.min?this.min.getFullYear():n-100,r=this.max?this.max.getFullYear():n+100,l=[],a=o;a<=r;a++)l.push(a);var h=this._lbYears,c=h.hostElement,u=(0,s.closest)(i,"."+L.header),d=this.hostElement,p=(0,s.closest)(d,"."+G.inputDateDropDown)||d;h.itemsSource=l,h.selectedIndex=n-l[0],(0,s.setAttribute)(c,"dir",this.rightToLeft?"rtl":null),(0,s.setCss)(c,{minWidth:"",width:u.offsetWidth}),(0,s.showPopup)(c,u,!1,!1,p),requestAnimationFrame((function(){h.showSelection(!0)})),this.addEventListener(window,"touchstart",(function(e){(0,s.contains)(c,e.target)||((0,s.hidePopup)(c),t._tmYrHidden=Date.now(),t.removeEventListener(window,"touchstart"))})),e.preventDefault()}},Object.defineProperty(t.prototype,"focusMode",{get:function(){return this._focusMode},set:function(e){this._focusMode=e,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keyActionTab",{get:function(){return this._keyActionTab},set:function(e){this._keyActionTab=e,this._updateButtonTabIndex()},enumerable:!0,configurable:!0}),t.prototype._isButtonFocused=function(){var e=(0,s.getActiveElement)();if(!e)return!1;var t=e.getAttribute("role"),i=e.type;return t&&"button"===t.toLowerCase()||i&&"button"===i.toLowerCase()},t.prototype._isSameDay=function(e,t){return!(t.getMonth()!=this.displayMonth.getMonth())&&e.getDate()===t.getDate()},t.prototype._isSameMonth=function(e,t){return e.getMonth()===t.getMonth()},t.prototype._dateViewContainsFocus=function(){var e=this._tbYr.querySelectorAll("td"),t=Array.from(e).find((function(e){return e===(0,s.getActiveElement)()}));return this._tbMth.contains((0,s.getActiveElement)())||void 0!==t},t.prototype.getFocusableElements=function(){return Array.from(this.hostElement.querySelectorAll("a, button, input, textarea, select, [tabindex]:not([tabindex='-1'])")).filter((function(e){return!e.hasAttribute("disabled")&&null!==e.offsetParent}))},t.prototype._updateMonthButtonAria=function(){var e=s.culture.Calendar.ariaLabels,t=this.monthView?e.monthView:e.yearView;(0,s.setAriaLabel)(this._btnMth,t+", "+s.Globalize.format(this.displayMonth,this._fmtYrMo))},t.prototype._isDayValid=function(e){return this._valid(e)&&this._inValidRange(e)},t.prototype.cancelButtonClick=function(e){this.cancelButtonClicked.raise(this,e)},t.prototype.oneCancelButtonClick=function(e){this.cancelButtonClick(e)},t.prototype.OKButtonClick=function(e){this.OKButtonClicked.raise(this,e)},t.prototype.onOkButtonClick=function(e){this.OKButtonClick(e),this.value=this.focusValue},Object.defineProperty(t.prototype,"ariaLabel",{get:function(){return this._ariaLabel},set:function(e){this.ariaLabel!==e&&this.hostElement&&(this._ariaLabel=e,(0,s.setAttribute)(this.hostElement,"aria-label",e))},enumerable:!0,configurable:!0}),t.prototype._updateButtonTabIndex=function(){this.keyActionTab===ue.All&&!0!==this.isDisabled?((0,s.setAttribute)(this._btnMth,"tabindex","0"),(0,s.setAttribute)(this._btnPrv,"tabindex","0"),(0,s.setAttribute)(this._btnTdy,"tabindex","0"),(0,s.setAttribute)(this._btnNxt,"tabindex","0"),(0,s.setAttribute)(this._showYearListBoxButton,"tabindex","0")):((0,s.setAttribute)(this._btnMth,"tabindex","-1"),(0,s.setAttribute)(this._btnPrv,"tabindex","-1"),(0,s.setAttribute)(this._btnTdy,"tabindex","-1"),(0,s.setAttribute)(this._btnNxt,"tabindex","-1"),(0,s.setAttribute)(this._showYearListBoxButton,"tabindex","-1"))},t.prototype._onEnterKeyDownToSetValue=function(e){this._enterKeyDownToSetValue.raise(this,e)},Object.defineProperty(t.prototype,"showConfirmationButtons",{get:function(){return this._showConfirmationButtons},set:function(e){this._showConfirmationButtons=e},enumerable:!0,configurable:!0}),t.prototype._setIsDisabled=function(t){e.prototype._setIsDisabled.call(this,t),this._updateButtonTabIndex()},t._DATE_KEY="$WJ-DATE",t._ctrlTemplate="",t}(s.Control);(0,s._addCultureInfo)("DropDown",{ariaLabels:{tgl:"Toggle Dropdown"}}),function(e){e[e.Select=0]="Select",e[e.Open=1]="Open",e[e.Toggle=2]="Toggle"}(pe||(pe={})),function(e){e[e.ChangeSelectionOnly=0]="ChangeSelectionOnly",e[e.OpenDropdown=1]="OpenDropdown"}(fe||(fe={})),function(e){e[e.CloseAndKeepFocus=0]="CloseAndKeepFocus",e[e.CloseAndMoveFocus=1]="CloseAndMoveFocus"}(_e||(_e={}));var me,be,ve=function(e){function t(t,i){var n=e.call(this,t)||this;n._clickAction=pe.Select,n._showBtn=!0,n._autoExpand=!0,n._animate=!1,n._internalSettingText=!1,n._oldText="",n._keyActionDownArrow=fe.ChangeSelectionOnly,n._keyActionUpArrow=fe.ChangeSelectionOnly,n._isDropdownOpened=!1,n.textChanged=new s.Event,n.isDroppedDownChanging=new s.Event,n.isDroppedDownChanged=new s.Event;var o,r=n.getTemplate();n.applyTemplate(s.ControlClsNames.hostElement+" "+s.ControlClsNames.content+" "+j.hostElement,r,{_tbx:"input",_btn:"btn",_dropDown:"dropdown"},"input"),n.hostElement&&n.hostElement.id&&(o=n.hostElement.id),o&&n._dropDown&&n._dropDown.setAttribute("dropdown-id",o),n._dropDown.style.display="none";var l=s.culture.DropDown.ariaLabels;(0,s.setAriaLabel)(n._btn.querySelector("button"),l.tgl);var a=n._elRef=n._tbx;(0,s.disableAutoComplete)(a),n._createDropDown(),n._updateTbxAriaHaspopup(),n._updateBtn(),n._updateTbx();var h=n.hostElement;(0,s.addClass)(h,s.ControlStateClsNames.collapsed),n.addEventListener(window,"resize",(function(){n.isDroppedDown&&n.invalidate()}));var c=n.dropDown,u=n.addEventListener.bind(n),d=n._updateFocusState.bind(n);u(c,"blur",d,!0),u(c,"focus",d);var p=n._keydown.bind(n);u(h,"keydown",p),u(c,"keydown",p);var f=n._keypress.bind(n);return u(h,"keypress",f,!0),u(c,"keypress",f,!0),u(a,"input",n._input.bind(n)),u(a,"beforeinput",(function(e){"historyUndo"!==e.inputType&&"historyRedo"!==e.inputType||e.preventDefault()})),u(a,"blur",(function(){n._commitText(!0,!1)}),!0),u(a,"click",(function(){n._autoExpand&&n._expandSelection()})),u(a,"mousedown",(function(e){switch(n._clickAction){case pe.Open:n.isDroppedDown||(e.preventDefault(),n.focus(),n.isDroppedDown=!0);break;case pe.Toggle:e.preventDefault(),n.focus(),n.isDroppedDown=!n.isDroppedDown}})),u(n._btn,"mousedown",(function(e){n._btnclick(e)})),(0,s.removeChild)(c),(0,s.isIE)()&&n._elRef==n._tbx&&u(h,"mouseup",(function(e){if(!e.defaultPrevented&&0==e.button&&(0,s.hasClass)(e.target,s.InputFormElementsClsNames.btn)){var t=(0,s.getActiveElement)();t&&t!=e.target&&setTimeout((function(){t.focus()}))}})),(0,s.isIE9)()&&u(a,"keyup",(function(){n._setText(n.text,!1)})),u(c,"click",n._dropDownClick.bind(n)),n}return k(t,e),Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate='<div class="'+s.ControlClsNames.template+'"><div class="'+N.input+'"><div class="'+N.inputGroup+" "+N.inputBtnVisible+'"><input wj-part="input" type="text" class="'+s.InputFormElementsClsNames.formControl+'"><span wj-part="btn" class="'+N.inputGroupBtn+'"><button class="'+s.InputFormElementsClsNames.btn+" "+s.InputFormElementsClsNames.btnDefault+'" tabindex="-1"><span class='+s.GlyphClsNames.down+'></span></button></span></div></div><div wj-part="dropdown" class="'+s.ControlClsNames.content+" "+j.dropDownPanel+'"></div></div>'),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._tbx.value},set:function(e){e!=this.text&&(this._setText(e,!0),this._commitText())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputElement",{get:function(){return this._tbx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputType",{get:function(){return this._tbx.type},set:function(e){this._tbx.type=(0,s.asString)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isReadOnly",{get:function(){return this._tbx.readOnly},set:function(e){this._tbx.readOnly=(0,s.asBoolean)(e),(0,s.toggleClass)(this.hostElement,s.ControlStateClsNames.readOnly,this.isReadOnly),this.isReadOnly&&this._toggleDropDown(!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRequired",{get:function(){return this._tbx.required},set:function(e){this._tbx.required=(0,s.asBoolean)("boolean"==typeof e?e:this.isRequired)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"placeholder",{get:function(){return this._tbx.placeholder},set:function(e){this._tbx.placeholder=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clickAction",{get:function(){return this._clickAction},set:function(e){this._clickAction=(0,s.asEnum)(e,pe)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDroppedDown",{get:function(){var e=this._dropDown;return e&&"none"!=e.style.display},set:function(e){var t=this.hostElement,i=this._dropDown,n=this.containsFocus(),o=new Set(["InputDateTime","WjInputDateTime"]);if(t&&i){var r=!this.isReadOnly;this.isTouching&&(r=!0),e=(0,s.asBoolean)(e)&&!this.isDisabled&&r&&t.offsetWidth>0,this.isDroppedDown&&!e&&this.isDisabled&&(e=this.isDroppedDown),e||"INPUT"!=(0,s.getActiveElement)().tagName||this.inputElement===(0,s.getActiveElement)()||!this._isInvalidInputCancelled?e!=this.isDroppedDown&&(o.has(this.constructor.name)||!this._isInvalidInputCancelled||!this.isDroppedDown&&this._isInvalidInputCancelled)&&this.onIsDroppedDownChanging(new s.CancelEventArgs)&&(this._toggleDropDown(e),n&&(this.isTouching&&this.showDropDownButton?t.focus():this.selectAll()),this._updateFocusState(),this._updateBtn(),this._updateTbx(),(0,s.toggleClass)(t,s.ControlStateClsNames.collapsed,!this.isDroppedDown),this.onIsDroppedDownChanged()):(this._isDropdownOpened=this.isDroppedDown,this._toggleDropDown(e))}},enumerable:!0,configurable:!0}),t.prototype._toggleDropDown=function(e){var t=this,i=this.hostElement,n=this._dropDown;e?(this._minWidthDropdown=n.style.minWidth,n.style.display="",this._updateDropDown(),this.addEventListener(window,"touchstart",(function(e){for(var n=s.Control._touching,o=e.target;o;){if(o==i)return;o=o[s.Control._OWNR_KEY]||o.parentNode}s.Control._touching=!0,t.isDroppedDown=!1,s.Control._touching=n}))):(this.removeEventListener(window,"touchstart"),(0,s.hidePopup)(n),n.style.minWidth=this._minWidthDropdown)},Object.defineProperty(t.prototype,"dropDown",{get:function(){return this._dropDown},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dropDownCssClass",{get:function(){return this._cssClass},set:function(e){e!=this._cssClass&&((0,s.removeClass)(this._dropDown,this._cssClass),this._cssClass=(0,s.asString)(e),(0,s.addClass)(this._dropDown,this._cssClass))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showDropDownButton",{get:function(){return this._showBtn},set:function(e){this._showBtn=(0,s.asBoolean)(e),this._updateBtn()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoExpandSelection",{get:function(){return this._autoExpand},set:function(e){this._autoExpand=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAnimated",{get:function(){return this._animate},set:function(e){this._animate=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keyActionDownArrow",{get:function(){return this._keyActionDownArrow},set:function(e){this._keyActionDownArrow=(0,s.asEnum)(e,fe)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keyActionUpArrow",{get:function(){return this._keyActionUpArrow},set:function(e){this._keyActionUpArrow=(0,s.asEnum)(e,fe)},enumerable:!0,configurable:!0}),t.prototype.selectAll=function(){var e=this._tbx;this._elRef==e&&(0,s.setSelectionRange)(e,0,this.text.length),this.containsFocus()||this.focus()},t.prototype.onTextChanged=function(e){this.textChanged.raise(this,e),this._updateState()},t.prototype.onIsDroppedDownChanging=function(e){return this.isDroppedDownChanging.raise(this,e),!e.cancel},t.prototype.onIsDroppedDownChanged=function(e){this.isDroppedDownChanged.raise(this,e)},t.prototype.onGotFocus=function(t){this.isTouching||(0,s.contains)(this._dropDown,(0,s.getActiveElement)())||this.selectAll(),e.prototype.onGotFocus.call(this,t)},t.prototype.onLostFocus=function(t){this._commitText(),this.isDroppedDown=!1,e.prototype.onLostFocus.call(this,t)},t.prototype._containsFocusImpl=function(t){return e.prototype._containsFocusImpl.call(this,t)||this.isDroppedDown&&(0,s.contains)(this._dropDown,t)},t.prototype.dispose=function(){this.isDroppedDown=!1;var t=this._dropDown;if(t){this._dropDown=null,(0,s.removeChild)(t);var i=s.Control.getControl(t);i&&i.dispose()}e.prototype.dispose.call(this)},t.prototype.refresh=function(t){void 0===t&&(t=!0),e.prototype.refresh.call(this,t);var i=this.hostElement;if(i&&i.offsetHeight&&this.isDroppedDown){var n=(0,s.getActiveElement)();this.isAnimated&&""!=this._dropDown.style.opacity||(0,s.showPopup)(this._dropDown,i,!1,!1,null==this.dropDownCssClass),n instanceof HTMLElement&&n!=(0,s.getActiveElement)()&&n.focus()}},t.prototype._handleResize=function(){this.isDroppedDown&&this.refresh()},t.prototype._dropDownClick=function(e){e.stopPropagation()},t.prototype._expandSelection=function(){var e=this._tbx,t=e.value,i=e.selectionStart,n=e.selectionEnd;if(t&&i==n){var o=this._getCharType(t,i);if(o>-1){for(;n<t.length&&this._getCharType(t,n)==o;n++);for(;i>0&&this._getCharType(t,i-1)==o;i--);i!=n&&(0,s.setSelectionRange)(e,i,n)}}},t.prototype._getCharType=function(e,t){var i=e[t];return i>="0"&&i<="9"?0:i>="a"&&i<="z"||i>="A"&&i<="Z"?1:-1},t.prototype._keydown=function(e){if(!e.defaultPrevented&&!this._isHiddenEditor()){switch(e.keyCode){case s.Key.Escape:case s.Key.Enter:this.isDroppedDown&&(this.isDroppedDown=!1,this.containsFocus()||this.focus(),e.preventDefault());break;case s.Key.F4:this.toggleDropDown(e);break;case s.Key.Up:this.handleUpArrowKey(e);break;case s.Key.Down:this.handleDownArrowKey(e)}if(!e.defaultPrevented&&e.keyCode==s.Key.Escape&&(0,s.isIE)()){var t=this._tbx;if(e.target==t){var i=t.value;t.value=i+" ",t.value=i}}}},t.prototype.toggleDropDown=function(e){this.isHostVisible()&&(this.isDroppedDown=!this.isDroppedDown,e.preventDefault())},t.prototype.handleUpArrowKey=function(e){e.altKey?this.toggleDropDown(e):this.keyActionUpArrow!==fe.OpenDropdown||this.isDroppedDown||this.openDropDown(e)},t.prototype.handleDownArrowKey=function(e){e.altKey?this.toggleDropDown(e):this.keyActionDownArrow!==fe.OpenDropdown||this.isDroppedDown||(this.openDropDown(e),this._afterOpenDropdownByDownArrow())},t.prototype._afterOpenDropdownByDownArrow=function(){},t.prototype.openDropDown=function(e){this.isHostVisible()&&(this.isDroppedDown=!0,e.preventDefault())},t.prototype.isHostVisible=function(){var e=this.hostElement;return!(!e||!e.offsetHeight)},t.prototype._isHiddenEditor=function(){return(0,s.hasClass)(this._tbx,"wj-grid-ime")},t.prototype._keypress=function(e){"AltLeft"!=e.code&&"AltRight"!=e.code||e.preventDefault()},t.prototype._input=function(e){this._setText(this.text,!1)},t.prototype._btnclick=function(e){var t=this;e.defaultPrevented||0!=e.button||(this._isInvalidInputCancelled=!1,e.preventDefault(),this.isTouching?(this.isReadOnly=!0,this.isDroppedDown=!this.isDroppedDown,this.focus(),setTimeout((function(){t.isReadOnly=!1}),0)):(this.focus(),this.isDroppedDown=!this.isDroppedDown))},t.prototype._setText=function(e,t,i,n){var o=!1;(e=(e||"").toString())!=this._tbx.value&&(this._tbx.value=e,!i&&e||(this.onTextChanged(),o=!0)),e!=this._oldText&&(this._oldText=e,this._internalSettingText||o||this.onTextChanged()),n&&(this._tbx.value=this._tbx.value.trim()),this._updateState()},t.prototype._updateBtn=function(){this._btn.style.display=this._showBtn?"":"none",this._updateBtnAria()},t.prototype._updateBtnAria=function(){var e=this._btn.querySelector("button"),t=this.isDroppedDown,i=this.dropDown?this.dropDown.id:null;(0,s.setAttribute)(e,"aria-expanded",!!t),(0,s.setAttribute)(e,"aria-controls",t?i:null)},t.prototype._updateTbx=function(){this._updateTbxAria()},t.prototype._updateTbxAria=function(){var e=this._tbx,t=this.isDroppedDown,i=this.dropDown?this.dropDown.id:null;(0,s.setAttribute)(e,"aria-controls",t?i:null),(0,s.setAttribute)(e,"aria-expanded",t)},t.prototype._updateTbxAriaHaspopup=function(){var e=this._tbx,t=this.dropDown&&this.dropDown.getAttribute("role");(0,s.setAttribute)(e,"aria-haspopup",t)},t.prototype._createDropDown=function(){},t.prototype._commitText=function(e,t){},t.prototype._updateDropDown=function(){if(this.isDroppedDown){this._commitText();var e=this.dropDown;(0,s.setAttribute)(e,"dir",this.rightToLeft?"rtl":null),(0,s.showPopup)(e,this.hostElement,!1,this._animate,null==this.dropDownCssClass)}},t._ctrlTemplate="",t}(s.Control);(0,s._addCultureInfo)("Popup",{ariaLabels:{close:"close",backdrop:"backdrop",isDraggable:"draggable",isResizable:"resizable",popupVisible:"visible",popupHide:"hidden",popup:"popup"}}),function(e){e[e.None=0]="None",e[e.ClickOwner=1]="ClickOwner",e[e.ClickPopup=2]="ClickPopup",e[e.Click=3]="Click",e[e.BlurOwner=4]="BlurOwner",e[e.BlurPopup=8]="BlurPopup",e[e.Blur=12]="Blur",e[e.ClickOrBlur=15]="ClickOrBlur",e[e.DownOwner=16]="DownOwner",e[e.DownPopup=32]="DownPopup",e[e.Down=48]="Down",e[e.EnterOwner=64]="EnterOwner",e[e.EnterPopup=128]="EnterPopup",e[e.Enter=192]="Enter",e[e.LeaveOwner=256]="LeaveOwner",e[e.LeavePopup=512]="LeavePopup",e[e.Leave=768]="Leave"}(be||(be={})),function(e){e[e.None=0]="None",e[e.Left=1]="Left",e[e.Top=2]="Top",e[e.Right=4]="Right",e[e.Bottom=8]="Bottom",e[e.LeftTop=3]="LeftTop",e[e.RightTop=6]="RightTop",e[e.RightBottom=12]="RightBottom",e[e.LeftBottom=9]="LeftBottom"}(me||(me={}));var ye=function(e){function t(i,n){var o=e.call(this,i)||this;o._owner=null,o._ariaLabel=s.culture.Popup.ariaLabels.popup,o._modal=!1,o._position=s.PopupPosition.BelowLeft,o._showTrigger=be.ClickOwner,o._hideTrigger=be.Blur,o._hideAnim=[],o._fadeIn=!0,o._fadeOut=!0,o._removeOnHide=!0,o._draggable=!1,o._resizable=!1,o._result=null,o._resultEnter=null,o._resultSubmit=null,o._callback=null,o._visible=!1,o._ownerClickBnd=o._ownerClick.bind(o),o._ownerDownBnd=o._ownerDown.bind(o),o._ownerBlurBnd=o._ownerBlur.bind(o),o._ownerEnterBnd=o._ownerEnter.bind(o),o._ownerLeaveBnd=o._ownerLeave.bind(o),o._mousedownBnd=o._mousedown.bind(o),o._mousemoveBnd=o._mousemove.bind(o),o._mousedragBnd=o._mousedrag.bind(o),o._mouseupBnd=o._mouseup.bind(o),o._hideBnd=o.hide.bind(o),o._lastShow=0,o._initialOwner=null,o._activeEdge=me.None,o.showing=new s.Event,o.shown=new s.Event,o.hiding=new s.Event,o.hidden=new s.Event,o.resizing=new s.Event,o.resized=new s.Event,o.dragging=new s.Event,o.dragged=new s.Event,o.sizeChanging=new s.Event,o.sizeChanged=new s.Event,o.positionChanging=new s.Event,o.positionChanged=new s.Event;var r=o.hostElement;(0,s.addClass)(r,s.ControlClsNames.hostElement+" "+s.ControlClsNames.content+" "+te.hostElement),o.hostElement&&(o._initialOwner=o.hostElement.parentElement,(0,s.setAttribute)(o.hostElement,"role","dialog")),r.getAttribute("tabindex")||(r.tabIndex=0),(0,s.hidePopup)(r,!1);var l=o.addEventListener.bind(o);l(r,"compositionstart",(function(){o._composing=!0})),l(r,"compositionend",(function(){o._composing=!1})),l(window,"resize",(function(){!o.isVisible||o._dragged||o.isTouching||o.invalidate()})),l(r,"keydown",(function(e){if(!e.defaultPrevented){var i=e.ctrlKey&&e.altKey&&!e.shiftKey,n=e.ctrlKey&&e.shiftKey&&!e.altKey;if(i||n){var l=o.hostElement.getBoundingClientRect(),a=s.Rect.fromBoundingRect(l);if(i&&o.isDraggable){switch(e.preventDefault(),e.keyCode){case s.Key.Left:a.left=Math.max(0,a.left-10);break;case s.Key.Right:a.left=Math.min(window.innerWidth-a.width,a.left+10);break;case s.Key.Up:a.top=Math.max(0,a.top-10);break;case s.Key.Down:a.top=Math.min(window.innerHeight-a.height,a.top+10)}var h=new we(a);o.onPositionChanging(h)&&((0,s.setCss)(o.hostElement,{left:a.left+window.scrollX,top:a.top+window.scrollY,transform:"none"}),o.onPositionChanged())}else if(n&&o.isResizable){e.preventDefault();var c=window.getComputedStyle(o.hostElement),u=Math.max(parseInt(c.minWidth)||0,t._SZ_MIN),d=Math.max(parseInt(c.minHeight)||0,t._SZ_MIN);if(o._activeEdge===me.None)switch(e.keyCode){case s.Key.Up:o._activeEdge=me.Top;break;case s.Key.Down:o._activeEdge=me.Bottom;break;case s.Key.Left:o._activeEdge=me.Left;break;case s.Key.Right:o._activeEdge=me.Right}var p=o._activeEdge===me.Top||o._activeEdge===me.Bottom,f=o._activeEdge===me.Left||o._activeEdge===me.Right;if(p&&![s.Key.Up,s.Key.Down].includes(e.keyCode)||f&&![s.Key.Left,s.Key.Right].includes(e.keyCode))return;if(o._activeEdge!==me.None){var _=0;switch(e.keyCode){case s.Key.Up:case s.Key.Left:_=-10;break;case s.Key.Down:case s.Key.Right:_=10}switch(o._activeEdge){case me.Top:var g=Math.min(Math.max(a.top+_,0),a.bottom-d);a.height=a.bottom-g,a.top=g;break;case me.Bottom:var m=Math.min(Math.max(a.bottom+_,a.top+d),window.innerHeight);a.height=m-a.top;break;case me.Left:var b=Math.min(Math.max(a.left+_,0),a.right-u);a.width=a.right-b,a.left=b;break;case me.Right:var v=Math.min(Math.max(a.right+_,a.left+u),window.innerWidth);a.width=v-a.left}a.left=Math.max(0,Math.min(a.left,window.innerWidth-a.width)),a.top=Math.max(0,Math.min(a.top,window.innerHeight-a.height));var y=new we(a);o.onSizeChanging(y)&&((0,s.setCss)(o.hostElement,{left:a.left+window.scrollX,top:a.top+window.scrollY,width:a.width,height:a.height,transform:"none"}),o.onSizeChanged())}}}if(e.keyCode!=s.Key.Escape||o._composing||(e.preventDefault(),o.hide()),e.keyCode==s.Key.Enter&&!o._composing){var w=o.dialogResultEnter;w&&(e.preventDefault(),o._validateAndHide(w))}e.keyCode==s.Key.Tab&&o.modal&&(e.preventDefault(),(0,s.moveFocus)(r,e.shiftKey?-1:1))}})),l(document,"keyup",(function(e){e.ctrlKey||e.shiftKey||o._activeEdge===me.None||(o._activeEdge=me.None)})),l(r,"click",(function(e){var t=e.target;if(t instanceof HTMLElement){if(t instanceof HTMLButtonElement&&"submit"==t.type){var i=o.hostElement,n=o.dialogResultSubmit;i instanceof HTMLFormElement&&n&&i.reportValidity()&&(e.preventDefault(),o.hide(n))}var r=t.className.match(/\bwj-hide[\S]*\b/);r&&r.length>0&&(e.preventDefault(),e.stopPropagation(),o.hide(r[0]))}}));var a=o._toggle.bind(o),h=be;return o.addEventListener(r,"click",(function(e){o._ignoreClick||a(e,h.ClickPopup)}),!0),o.addEventListener(r,"mousedown",(function(e){o._ignoreClick=!1,a(e,h.DownPopup)}),!0),o.addEventListener(r,"mouseenter",(function(e){e.target==r&&a(e,h.EnterPopup)}),!0),o.addEventListener(r,"mouseleave",(function(e){e.target==r&&a(e,h.LeavePopup)}),!0),o.addEventListener(r,"blur",(function(e){o.containsFocus()||a(e,h.BlurPopup)}),!0),l(document,"wheel",(function(e){if(o.isVisible&&o._modal){for(var t=e.target;t&&t!=document.body;t=t.parentElement)if(t.scrollHeight>t.clientHeight)return;e.preventDefault()}})),o.initialize(n),o._updateAriaLabel(),o}return k(t,e),Object.defineProperty(t.prototype,"ariaLabelledBy",{get:function(){return this.hostElement.getAttribute("aria-labelledby")},set:function(e){(0,s._setAriaLabelBy)(this,this.hostElement,e,this._updateAriaLabel.bind(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"owner",{get:function(){return this._owner},set:function(e){var t=this._owner;t&&(this.removeEventListener(t,"click"),this.removeEventListener(t,"mousedown"),this.removeEventListener(t,"mouseenter"),this.removeEventListener(t,"mouseleave"),this.removeEventListener(t,"blur")),(t=this._owner=null!=e?(0,s.getElement)(e):null)&&(this.addEventListener(t,"click",this._ownerClickBnd,!0),this.addEventListener(t,"mousedown",this._ownerDownBnd,!0),this.addEventListener(t,"mouseenter",this._ownerEnterBnd,!0),this.addEventListener(t,"mouseleave",this._ownerLeaveBnd,!0),this.addEventListener(t,"blur",this._ownerBlurBnd,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(e){this._position=(0,s.asEnum)(e,s.PopupPosition)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"content",{get:function(){return this.hostElement.firstElementChild},set:function(e){e!=this.content&&(this.hostElement.innerHTML="",e instanceof HTMLElement&&this.hostElement.appendChild(e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showTrigger",{get:function(){return this._showTrigger},set:function(e){this._showTrigger=(0,s.asEnum)(e,be)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hideTrigger",{get:function(){return this._hideTrigger},set:function(e){this._hideTrigger=(0,s.asEnum)(e,be)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fadeIn",{get:function(){return this._fadeIn},set:function(e){this._fadeIn=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fadeOut",{get:function(){return this._fadeOut},set:function(e){this._fadeOut=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"removeOnHide",{get:function(){return this._removeOnHide},set:function(e){if((e=(0,s.asBoolean)(e))!=this.removeOnHide&&(this._removeOnHide=e,!this.isVisible)){var t=this.hostElement;e?(0,s.removeChild)(t):t&&document.body&&(t.style.display="none",document.body.appendChild(t))}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"modal",{get:function(){return this._modal},set:function(e){this._modal=(0,s.asBoolean)(e),(0,s.setAttribute)(this.hostElement,"aria-modal",e?"true":null)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDraggable",{get:function(){return this._draggable},set:function(e){this._draggable=(0,s.asBoolean)(e),this._updateAriaLabel()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isResizable",{get:function(){return this._resizable},set:function(e){this._resizable=(0,s.asBoolean)(e),this._updateAriaLabel()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dialogResult",{get:function(){return this._result},set:function(e){this._result=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dialogResultEnter",{get:function(){return this._resultEnter},set:function(e){this._resultEnter=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dialogResultSubmit",{get:function(){return this._resultSubmit},set:function(e){this._resultSubmit=(0,s.asString)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){var e=this.hostElement;return this._visible&&null!=e&&e.offsetHeight>0},enumerable:!0,configurable:!0}),t.prototype.show=function(e,t){var i=this;if(this._lastShow=Date.now(),!this.isVisible){var n=this.hostElement;this.dialogResult=null,this._callback=null,this._oldFocus=null,this._myFocus=null,this._hideAnim.forEach((function(e){clearInterval(e)})),this._hideAnim.length>0&&(this._hideAnim.length=0,this._bkDrop&&((0,s.hidePopup)(this._bkDrop,this.removeOnHide),this._bkDrop.style.opacity=""),(0,s.hidePopup)(n,this.removeOnHide),n.style.opacity="");var o=new s.CancelEventArgs;this.onShowing(o)&&(null!=e&&(this.modal=(0,s.asBoolean)(e)),null!=t&&(this._callback=(0,s.asFunction)(t)),this._oldFocus=(0,s.getActiveElement)(),(0,s.showPopup)(n,this._owner,this._position,this._fadeIn,!1,this._hideBnd),this._modal&&this._showBackdrop(),(0,s.setAttribute)(this._oldFocus,"aria-expanded","true"),this._composing=!1,this._visible=!0,this.onShown(o),this._updateAriaLabel(),this._clearTimeouts(),this.modal&&(this.addEventListener(window,"focus",(function(){if(!i.containsFocus()){var e=i._myFocus;e&&e.offsetHeight?e.focus():(0,s.moveFocus)(n,0)}})),this.addEventListener(n,"focusin",(function(){var e=(0,s.getActiveElement)();e&&(0,s.contains)(n,e)&&(e.tabIndex>-1||!i._myFocus)&&(i._myFocus=e)}))),this._resized=this._dragged=this._ignoreClick=!1,this._handleDragResize(!0),this.addEventListener(window,"touchstart",(function(e){i._hideTrigger&be.Blur&&!(0,s.contains)(n,e.target,!0)&&i.hide()})),setTimeout((function(){i.addEventListener(window,"click",(function(e){i._hideTrigger&be.BlurPopup&&i.isDisabled&&!(0,s.contains)(n,e.target,!0)&&i.hide()}))})),setTimeout((function(){if(!i.isDisabled&&!i.containsFocus()&&!i.isTouching){var e=n.querySelector("[autofocus]");e&&e.clientHeight>0&&!e.disabled&&e.tabIndex>-1&&!(0,s.closest)(e,"[disabled],."+s.ControlStateClsNames.disabled)?(e.focus(),(0,s.isFunction)(e.select)&&e.select()):(0,s.moveFocus)(n,0)}i.isDisabled||i.containsFocus()||(n.tabIndex=0,n.focus())}),100))}},t.prototype.hide=function(e){var i=this;if(this.removeEventListener(window,"touchstart"),this.removeEventListener(window,"click"),this.isVisible){(0,s.isUndefined)(e)||(this.dialogResult=e);var n=new s.CancelEventArgs,o=this.hostElement;if(this.onHiding(n)){this._handleDragResize(!1);for(var r=this.containsFocus()?this._oldFocus:null,l=o.querySelectorAll("."+s.ControlClsNames.hostElement+"."+j.hostElement),a=0;a<l.length;a++){var h=s.Control.getControl(l[a]);h instanceof ve&&(h.isDroppedDown=!1)}var c=this.removeOnHide,u=this.fadeOut;setTimeout((function(){if(i._updateState(),i.onHidden(n),i._callback&&i._callback(i),i.hideTrigger&be.LeavePopup){var e=s.Control.getControl((0,s.closest)(i.owner,"."+te.hostElement));if(e instanceof t&&0!=(e.hideTrigger&be.Leave)){var o=t._evtHover,r=o?document.elementFromPoint(o.clientX,o.clientY):null,l=s.Control.getControl((0,s.closest)(r,"."+te.hostElement));l instanceof t&&!l.isVisible&&(r=null),r&&(0,s.contains)(e.hostElement,r,!0)||e.hide()}}}),s.Control._FOCUS_INTERVAL+50),this._bkDrop&&this._hideAnim.push((0,s.hidePopup)(this._bkDrop,c,u)),this._hideAnim.push((0,s.hidePopup)(o,c,u)),(0,s.setAttribute)(this._oldFocus,"aria-expanded","false"),this._visible=!1,this._oldFocus=null,this._myFocus=null,this._updateAriaLabel(),this.removeEventListener(window,"focus"),this.removeEventListener(o,"focusin"),this.containsFocus()&&(0,s.getActiveElement)().blur(),this._clearTimeouts(),!this.isVisible&&r&&r.offsetHeight&&r.focus()}}},t.prototype.onShowing=function(e){return this.showing.raise(this,e),!e.cancel},t.prototype.onShown=function(e){this.shown.raise(this,e)},t.prototype.onHiding=function(e){return this.hiding.raise(this,e),!e.cancel},t.prototype.onHidden=function(e){this._wasVisible=!1,this.hidden.raise(this,e)},t.prototype.onResizing=function(e){return this.resizing.raise(this,e),!e.cancel},t.prototype.onResized=function(e){this.resized.raise(this,e)},t.prototype.onDragging=function(e){return this.dragging.raise(this,e),!e.cancel},t.prototype.onDragged=function(e){this.dragged.raise(this,e)},t.prototype.onSizeChanging=function(e){return this.sizeChanging.raise(this,e),!e.cancel},t.prototype.onSizeChanged=function(e){this.sizeChanged.raise(this,e)},t.prototype.onPositionChanging=function(e){return this.positionChanging.raise(this,e),!e.cancel},t.prototype.onPositionChanged=function(e){this.positionChanged.raise(this,e)},t.prototype.onLostFocus=function(t){if(e.prototype.onLostFocus.call(this,t),this._hideTrigger&be.BlurPopup&&!this.containsFocus()){var i=document.createEvent("Event");i.initEvent("blur",!0,!0),this._toggle(i,be.BlurPopup)}},t.prototype.dispose=function(){this._initialOwner.appendChild(this.hostElement),this._initialOwner=null,this.owner=null,this._bkDrop&&this._bkDrop.remove(),e.prototype.dispose.call(this)},t.prototype.refresh=function(t){void 0===t&&(t=!0);var i=this.hostElement;if(e.prototype.refresh.call(this,t),this.isVisible&&!this._refreshing&&i){this._refreshing=!0;for(var n=(0,s.getActiveElement)(),o=this._owner?this._owner.getBoundingClientRect():null,r=[],l=i.querySelectorAll("."+j.hostElement),a=0;a<l.length;a++){var h=s.Control.getControl(l[a]);h instanceof ve&&h.isDroppedDown&&(r.push(h),h.dropDown.style.display="none")}(0,s.showPopup)(i,o,this._position),r.forEach((function(e){e.dropDown.style.display="",e._updateDropDown()})),this._modal&&n instanceof HTMLElement&&n!=(0,s.getActiveElement)()&&n.focus(),this._refreshing=!1}},t.prototype._clearTimeouts=function(){this._toShow&&(clearTimeout(this._toShow),this._toShow=null),this._toHideLeave&&(clearTimeout(this._toHideLeave),this._toHideLeave=null),this._toHideBlur&&(clearTimeout(this._toHideBlur),this._toHideBlur=null)},t.prototype._handleDragResize=function(e){var t=this.hostElement,i=this._draggable?this._getHeaderElement():null,n=this.addEventListener.bind(this),o=this.removeEventListener.bind(this),r=this._mousemoveBnd,s=this._mousedownBnd;e?(n(t,"mousemove",r),n(t,"mousedown",s),n(t,"touchstart",s),i&&(i.style.touchAction="none")):(this._mousedownEvt=null,this._rcBounds=null,o(t,"mousemove",r),o(t,"mousedown",s),o(t,"touchstart",s),o(document,"mousemove",this._mousedragBnd),o(document,"mouseup",this._mouseupBnd),i&&(i.style.touchAction=""))},t.prototype._mousemove=function(e){if(!this._mousedownEvt){var t=this.hostElement,i=this._getEdges(t,e),n="",o=me;this._edges=i,this._resizable&&(i==o.LeftTop||i==o.RightBottom?n="nwse-resize":i==o.LeftBottom||i==o.RightTop?n="nesw-resize":i==o.Left||i==o.Right?n="ew-resize":i!=o.Top&&i!=o.Bottom||(n="ns-resize")),this._draggable&&!n&&this._getClosestHeader(e.target)&&(n="move"),t.style.cursor=n}},t.prototype._mousedown=function(e){if(!e.defaultPrevented){var t=e.touches&&e.touches.length>0?e.touches[0]:e;if(this._edges=this._getEdges(this.hostElement,t),this._edges||this._draggable&&this._getClosestHeader(e.target)){var i=new s.CancelEventArgs;if(this._edges?this.onResizing(i):this.onDragging(i)){this._mousedownEvt=t,this._rcBounds=this.hostElement.getBoundingClientRect();var n=this.addEventListener.bind(this),o=document,r=this._mousedragBnd,l=this._mouseupBnd;n(o,"mousemove",r),n(o,"touchmove",r),n(o,"mouseup",l),n(o,"touchend",l)}}this._ignoreClick=!1}},t.prototype._mouseup=function(){this._mousedownEvt=null,this._rcBounds=null,this._activeEdge=me.None;var e=this.removeEventListener.bind(this),t=document,i=this._mousedragBnd,n=this._mouseupBnd;e(t,"mousemove",i),e(t,"touchmove",i),e(t,"mouseup",n),e(t,"touchend",n),this._resized?this.onResized():this._dragged&&this.onDragged(),this._resized=this._dragged=this._ignoreClick=!1},t.prototype._mousedrag=function(e){if(!e.defaultPrevented){var i=this.hostElement,n=this._mousedownEvt,o=e.touches&&e.touches.length>0?e.touches[0]:e,r=o.clientX-n.clientX,l=o.clientY-n.clientY,a=this._rcBounds,h=this._edges,c=t._SZ_MIN,u=s.Rect.fromBoundingRect(a);if(h){var d=window.getComputedStyle(i),p=parseInt(d.getPropertyValue("min-width"))||c,f=parseInt(d.getPropertyValue("min-height"))||c;if(h&me.Left){var _=u.right-p;u.left=Math.min(u.left+r,_),u.width=Math.max(u.width-r,p)}else h&me.Right&&(u.width=Math.max(u.width+r,p));if(h&me.Top){var g=u.bottom-f;u.top=Math.min(u.top+l,g),u.height=Math.max(u.height-l,f)}else h&me.Bottom&&(u.height=Math.max(u.height+l,f));if(this.onSizeChanging(new we(u))&&((0,s.setCss)(i,{left:u.left+window.scrollX,top:u.top+window.scrollY,width:u.width,height:u.height,transform:"none"}),this._resized=this._dragged=this._ignoreClick=!0,this.onSizeChanged()),!window.ResizeObserver)for(var m=this.hostElement.children,b=0;b<m.length;b++)s.Control.invalidateAll(m[b])}else this._draggable&&(this._dragged||Math.abs(r)+Math.abs(l)>t._DRAG_THRESHOLD)&&(u.left=Math.max(a.left+r+(o.pageX-o.clientX),50-a.width),u.top=Math.max(a.top+l+(o.pageY-o.clientY),0),this.onPositionChanging(new we(u))&&((0,s.setCss)(i,{left:u.left,top:u.top,width:u.width,height:u.height,transform:"none"}),this._dragged=this._ignoreClick=!0,this.onPositionChanged()))}},t.prototype._getEdges=function(e,i){var n=0;if(this._resizable){var o=e.getBoundingClientRect(),r=t._SZ_EDGE;i.clientX-o.left<r&&(n|=me.Left),i.clientY-o.top<r&&(n|=me.Top),o.right-i.clientX<r&&(n|=me.Right),o.bottom-i.clientY<r&&(n|=me.Bottom)}return n},t.prototype._ownerClick=function(e){this._toggle(e,be.ClickOwner)},t.prototype._ownerDown=function(e){this._wasVisible=this.isVisible,this._toggle(e,be.DownOwner)},t.prototype._ownerBlur=function(e){(0,s.contains)(this._owner,(0,s.getActiveElement)())||this._toggle(e,be.BlurOwner)},t.prototype._ownerEnter=function(e){e.target==this._owner&&this._toggle(e,be.EnterOwner)},t.prototype._ownerLeave=function(e){e.target==this._owner&&this._toggle(e,be.LeaveOwner)},t.prototype._toggle=function(e,i){var n=this;if(e instanceof MouseEvent&&(t._evtHover=e),!("mouseenter"==e.type&&Date.now()-this._lastShow<300||e.defaultPrevented)){var o=0!=(this._hideTrigger&i),r=0!=(this._showTrigger&i),l=be;(o||r)&&this._clearTimeouts(),o&&this.isVisible&&(i&l.Leave?this._toHideLeave=setTimeout((function(){var e=t._evtHover,i=e?document.elementFromPoint(e.clientX,e.clientY):null;i&&(0,s.contains)(n.hostElement,i,!0)||n.hide()}),s.Control._LEAVE_DELAY):i&l.Blur?this._toHideBlur=setTimeout((function(){n.containsFocus()||(0,s.contains)(n._owner,(0,s.getActiveElement)())||n.hide()}),s.Control._FOCUS_INTERVAL+50):this.hide()),r&&i!=l.ClickPopup&&(this._wasVisible||(i&l.Enter?this._toShow=setTimeout((function(){n.show()}),s.Control._HOVER_DELAY):this.show()))}},t.prototype._getHeaderElement=function(){var e=this.hostElement;return e.querySelector("."+te.dialogHeader)||e.querySelector(".modal-header")},t.prototype._getClosestHeader=function(e){return(0,s.closest)(e,"."+te.dialogHeader)||(0,s.closest)(e,".modal-header")},t.prototype._showBackdrop=function(){var e=this;this._bkDrop||(this._bkDrop=document.createElement("div"),this._bkDrop.tabIndex=-1,(0,s.setAttribute)(this._bkDrop,"role","presentation"),(0,s.setAttribute)(this._bkDrop,"aria-hidden","true"),(0,s.setAttribute)(this._bkDrop,"aria-label",s.culture.Popup.ariaLabels.backdrop),(0,s.addClass)(this._bkDrop,te.popupBackDrop),this.addEventListener(this._bkDrop,"mousedown",(function(t){t.preventDefault(),t.stopPropagation(),e.hostElement.focus(),e.hideTrigger&be.Blur&&e.hide()}))),(0,s.setCss)(this._bkDrop,{zIndex:s.Control._POPUP_ZINDEX,display:""});var t=this.hostElement;t.parentElement.insertBefore(this._bkDrop,t)},t.prototype._validateAndHide=function(e){var t=this.hostElement;if(t instanceof HTMLFormElement)t.reportValidity()&&this.hide(e);else{var i=this.hostElement.querySelector(":invalid");i?i.focus():this.hide(e)}},t.prototype._updateAriaLabel=function(){this.hostElement&&(this.ariaLabelledBy?this._updateAriaLabelImp(""):this._updateAriaLabelImp(this._ariaLabel))},t.prototype._updateAriaLabelImp=function(e){var t=[];this.isDraggable&&t.push(s.culture.Popup.ariaLabels.isDraggable),this.isResizable&&t.push(s.culture.Popup.ariaLabels.isResizable),this.isVisible?t.push(s.culture.Popup.ariaLabels.popupVisible):t.push(s.culture.Popup.ariaLabels.popupHide);var i=t.join(",");(0,s.setAttribute)(this.hostElement,"aria-label",e?e+" "+i:i)},t._DRAG_THRESHOLD=6,t._SZ_EDGE=10,t._SZ_MIN=40,t}(s.Control),we=function(e){function t(t){var i=e.call(this)||this;return i._rc=t,i}return k(t,e),Object.defineProperty(t.prototype,"bounds",{get:function(){return this._rc},enumerable:!0,configurable:!0}),t}(s.CancelEventArgs);(0,s._addCultureInfo)("InputDate",{ariaLabels:{inputDateInput:"InputDate Input",inputDate:"Input Date",button:"Choose Date",dialog:"Calendar"}});var Ce=function(e){function t(t){var i=e.call(this)||this;return i._isUserInput=t,i}return k(t,e),Object.defineProperty(t.prototype,"isUserInput",{get:function(){return this._isUserInput},enumerable:!0,configurable:!0}),t}(s.CancelEventArgs),xe=function(e){function t(t,i){var n=e.call(this,t)||this;n._fmt="d",n._sep=" - ",n._rngs=null,n._showCal=!1,n._clsOnSel=!0,n._handleWheel=!0,n._preserveCalendarNavigation=!0,n._isTriggered=!1,n._rangeChanged=!1,n._textInitialized=!1,n._previousText="",n._keepInvalidText=!1,n._inputAriaLabel=s.culture.InputDate.ariaLabels.inputDateInput,n._currentInput="",n._ariaLabelledby=null,n._keyActionTab=_e.CloseAndMoveFocus,n.valueChanged=new s.Event,n.rangeEndChanged=new s.Event,n.rangeChanged=new s.Event,(0,s.addClass)(n.hostElement,G.hostElement);var o=s.culture.InputDate.ariaLabels;(0,s.setAttribute)(n._btn.querySelector("button"),"aria-haspopup","dialog"),(0,s.setAttribute)(n._dropDown,"role","dialog"),(0,s.setAriaLabel)(n._dropDown,o.dialog),(0,s.setAttribute)(n._dropDown,"aria-modal",!0),(0,s.setAttribute)(n._tbx,"role","combobox"),(0,s.setAttribute)(n._tbx,"aria-haspopup","dialog"),(0,s.setAriaLabel)(n._btn.querySelector("button"),o.button),n.dropDown.id=(0,s.getUniqueId)(n.hostElement.id+"_dropdown"),n._msk=new s._MaskProvider(n._tbx);var r=n.addEventListener.bind(n);(0,s.isIE9)()||(n.inputType="tel"),n._tbx.type.match(/^(tel|text|)$/i)||(n.inputType="text");var l=n._mouseWheel.bind(n);r(n.hostElement,"wheel",l);var a=n._lbx=new se(document.createElement("div"),{displayMemberPath:"name",selectedIndexChanged:function(e){var t=e.selectedItem,i=s.DateTime.fromDateTime,o=s.DateTime.sameDate;if(t&&t.from&&t.to){if(!o(t.from,n.value)||!o(t.to,n.rangeEnd)){var r=n.value;n.value=i(t.from,r),n.rangeEnd=i(t.to,r)}n._selectAll()}else n._cal.hostElement.style.display=""}}),h=n._cal=new ge(document.createElement("div"));h.tabOrder=a.tabOrder=-1;var c=n._dropDown;if((0,s.addClass)(c,G.inputDateDropDown),c.appendChild(a.hostElement),c.appendChild(h.hostElement),n.addEventListener(c,"click",(function(){n._isTriggered=!0,setTimeout((function(){n._isTriggered=!1}),50)}),!0),n.addEventListener(c,"keydown",(function(e){"Enter"===e.key&&(n._isTriggered=!0,setTimeout((function(){n._isTriggered=!1}),50))}),!0),"INPUT"==n._orgTag){var u=n._tbx.getAttribute("value");u&&(h.value=h.rangeEnd=s.Globalize.parseDate(u,"yyyy-MM-dd"))}return n.isRequired=!0,n._tbx.value=n._oldText=n._getText(),n.initialize(i),(n._textInitialized||n._tbx.value!==n._oldText)&&(n._oldText=n._tbx.value,n._currentInput="text",n._textInitialized=!0,n._commitText(),n.onTextChanged()),n._updateState(),h.valueChanged.addHandler((function(e,t){n._refreshText(),n.onValueChanged(t)})),h.rangeEndChanged.addHandler((function(e,t){h._rngMode()&&(n.onRangeEndChanged(t),n._closeOnChange(),h._clearingRangeEnd||n._refreshText())})),h.cancelButtonClicked.addHandler((function(e,t){n._closeOnChange()})),h.OKButtonClicked.addHandler((function(e,t){n._closeOnChange(),n._refreshText()})),h._enterKeyDownToSetValue.addHandler((function(e,t){n._closeOnChange()})),h.addEventListener(h.hostElement,"click",(function(e){if(h.selectionMode&&!h._rngMode()){var t=e.target,i=h.hitTest(t);(s.DateTime.sameDate(n.value,i)||(0,s.closest)(t,"[wj-part=btn-today]"))&&(n._closeOnChange(),n._refreshText())}})),n._updateInputAriaLabel(),n}return k(t,e),Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate=ve.controlTemplate),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),t.prototype._mouseWheel=function(e){if(this.handleWheel&&!e.defaultPrevented&&!this.isDroppedDown&&this.containsFocus()&&null!=this.value&&this._canChangeValue()){var t=this._tbx,i=t.selectionStart,n=t.selectionEnd,o=(0,s.clamp)(-e.deltaY,-1,1),r=this.value,l=s.Globalize.getFullFormat(this.format);null==l&&(l=this.format);var a=l.match((0,s.getSpecialCharsRegex)());if(n-i===t.value.length&&null!=a||this.selectionMode==ae.Range){for(var h=1;r=this.selectionMode==ae.Month?s.DateTime.addMonths(this.value,h*o):s.DateTime.addDays(this.value,h*o),!this._isValidDate(r)&&(null===this.max||r<this.max)&&(null===this.min||r>this.min);h++);this.value=r;var c=this._getText();(0,s.setSelectionRange)(t,0,c.length)}else this._updateDateTimeValue(o,a,l);e.preventDefault()}},Object.defineProperty(t.prototype,"value",{get:function(){return this._cal.value},set:function(e){this._cal.value=e,(this.text||this.isRequired)&&this._refreshText()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rangeEnd",{get:function(){return this._cal.rangeEnd},set:function(e){this._cal.rangeEnd=e,(this.text||this.isRequired)&&this._refreshText()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rangeMin",{get:function(){return this._cal.rangeMin},set:function(e){this._cal.rangeMin=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rangeMax",{get:function(){return this._cal.rangeMax},set:function(e){this._cal.rangeMax=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keepInvalidText",{get:function(){return this._keepInvalidText},set:function(e){if(new Set(["InputDateTime","WjInputDateTime"]).has(this.constructor.name))throw this._keepInvalidText=!1,"keepInvalidText property cannot be used with InputDateTime control";this._keepInvalidText=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._tbx.value},set:function(e){var t=(e||"").toString();t!=this.text&&(t!=this._tbx.value&&(this._tbx.value=t),t!=this._oldText&&(this._oldText=t,this._previousText=t),(0,s.isEmpty)(this._currentInput)&&(this._textInitialized=!0,this._currentInput="text",this._commitText()),this.onTextChanged(),this._currentInput="")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){return this._fmt},set:function(e){e!=this.format&&(this._fmt=(0,s.asString)(e),this._refreshText())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"separator",{get:function(){return this._sep},set:function(e){e!=this._sep&&(this._sep=(0,s.asString)(e,!1),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._msk.mask},set:function(e){this._msk.mask=(0,s.asString)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"closeOnSelection",{get:function(){return this._clsOnSel},set:function(e){this._clsOnSel=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"handleWheel",{get:function(){return this._handleWheel},set:function(e){e=(0,s.asBoolean)(e),this._handleWheel=e,e||(this.calendar.handleWheel=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"predefinedRanges",{get:function(){return this._rngs},set:function(e){this._rngs!=e&&((0,s.assert)(null==e||(0,s.isObject)(e),"Object expected"),this._rngs=e,this._lbx.itemsSource=this._getRanges(e),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alwaysShowCalendar",{get:function(){return this._showCal},set:function(e){this._showCal=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this._cal.min},set:function(e){this._cal.min=(0,s.asDate)(e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._cal.max},set:function(e){this._cal.max=(0,s.asDate)(e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"repeatButtons",{get:function(){return this._cal.repeatButtons},set:function(e){this._cal.repeatButtons=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showYearPicker",{get:function(){return this._cal.showYearPicker},set:function(e){this._cal.showYearPicker=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showMonthPicker",{get:function(){return this._cal.showMonthPicker},set:function(e){this._cal.showMonthPicker=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showHeader",{get:function(){return this._cal.showHeader},set:function(e){this._cal.showHeader=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weeksBefore",{get:function(){return this._cal.weeksBefore},set:function(e){this._cal.weeksBefore=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weeksAfter",{get:function(){return this._cal.weeksAfter},set:function(e){this._cal.weeksAfter=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectionMode",{get:function(){return this._cal.selectionMode},set:function(e){e!=this.selectionMode&&(this._cal.selectionMode=e,this._refreshText())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"monthCount",{get:function(){return this._cal.monthCount},set:function(e){this._cal.monthCount=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"calendar",{get:function(){return this._cal},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputElement",{get:function(){return this._tbx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputType",{get:function(){return this._tbx.type},set:function(e){e.match(/^(tel|text|)$/i)?this._tbx.type=(0,s.asString)(e):console.warn("invalid input type '"+e+"', don't use any input types other than 'tel' or 'text'")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"preserveCalendarNavigation",{get:function(){return this._preserveCalendarNavigation},set:function(e){this._preserveCalendarNavigation=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemValidator",{get:function(){return this._cal.itemValidator},set:function(e){e!=this.itemValidator&&(this._cal.itemValidator=(0,s.asFunction)(e),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemFormatter",{get:function(){return this._cal.itemFormatter},set:function(e){this._cal.itemFormatter=(0,s.asFunction)(e)},enumerable:!0,configurable:!0}),t.prototype.onValueChanged=function(e){this.valueChanged.raise(this,e)},t.prototype.onRangeEndChanged=function(e){this.rangeEndChanged.raise(this,e),this.rangeEnd&&(this.isDroppedDown?this._rangeChanged=!0:this.onRangeChanged(e))},t.prototype.onRangeChanged=function(e){this._rangeChanged=!1,this.rangeChanged.raise(this,e)},t.prototype.refresh=function(t){void 0===t&&(t=!0),e.prototype.refresh.call(this,t),this.hostElement&&(this._msk&&this._msk.refresh(),this._cal&&this._cal.refresh(),this._refreshText())},t.prototype.onIsDroppedDownChanging=function(t){if(this.isDroppedDown);else{var i=this._lbx,n=this._cal,o=i.collectionView,r=i.hostElement.style,l=n.hostElement.style;if(n._rngMode()&&(0,s.hasItems)(o)){var a=this._updateRangeSelection();r.display="",l.display=!this._showCal&&a&&a.from&&o.items.some((function(e){return!e.to}))?"none":""}else r.display="none",l.display="";n._mthMode()||(n.monthView=!0),n.value&&!this.preserveCalendarNavigation&&(n.displayMonth=n.value)}return e.prototype.onIsDroppedDownChanging.call(this,t)},t.prototype.onIsDroppedDownChanged=function(t){e.prototype.onIsDroppedDownChanged.call(this,t);var i=this.containsFocus();this.isDroppedDown?(i&&(this._tryFocus(this._cal)||this._tryFocus(this._lbx)||this.dropDown.focus()),this._lbx.showSelection(),this._cal.refresh()):(this._commitText(),this._rangeChanged&&this.onRangeChanged())},t.prototype._updateDropDown=function(){this._commitText();var t=getComputedStyle(this.hostElement);this._dropDown.style.minWidth=18*parseFloat(t.fontSize)+"px",this._cal.refresh(),e.prototype._updateDropDown.call(this)},t.prototype.onGotFocus=function(e){var t=this._tbx;this._elRef==t&&(this.isDroppedDown?this.dropDown.focus():this.selectAll()),this.containsFocus()||this.focus(),this.gotFocus.raise(this,e)},t.prototype._keydown=function(t){if(!(t.defaultPrevented||t.altKey||t.ctrlKey||t.metaKey)){if(this._isInvalidInputCancelled=!1,this._isHiddenEditor())return;var i=(0,s.getActiveElement)();switch(t.keyCode){case s.Key.Enter:if(this.showConfirmationButtons&&i!==this._tbx)return;this._currentInput="user",this._textInitialized=!1,this._commitText(!1,!0);break;case s.Key.Escape:this.text=this._getText(),this.selectAll();break;case s.Key.Tab:if(this.showConfirmationButtons&&i!==this._tbx){var n=this._cal.getFocusableElements(),o=n[0],r=n[n.length-1];t.shiftKey?i===o&&(t.preventDefault(),r.focus()):i===r&&(t.preventDefault(),o.focus())}else this.isDroppedDown&&(this.isDroppedDown=!1,this.containsFocus()||this.focus(),this.keyActionTab===_e.CloseAndKeepFocus&&t.preventDefault());this._currentInput="user",this._textInitialized=!1,this._commitText(!0);break;case s.Key.Up:case s.Key.Down:if(t.keyCode===s.Key.Up&&this.keyActionUpArrow===fe.OpenDropdown||t.keyCode===s.Key.Down&&this.keyActionDownArrow===fe.OpenDropdown)break;if(!this.isDroppedDown&&this.value&&this._canChangeValue()){this._currentInput="user",this._textInitialized=!1;var l=this._tbx,a=l.selectionStart,h=l.selectionEnd,c=(l.value,t.keyCode==s.Key.Up?1:-1),u=this.value,d=s.Globalize.getFullFormat(this.format);"g"==this.format&&d.includes("\u0433")&&(d=d.replace(/\"\u0433.\" /,"")),null==d&&(d=this.format);var p=d.match((0,s.getSpecialCharsRegex)());if(h-a===l.value.length&&null!=p||this.selectionMode==ae.Range){for(var f=1;u=this.selectionMode==ae.Month?s.DateTime.addMonths(this.value,f*c):s.DateTime.addDays(this.value,f*c),!this._isValidDate(u)&&(null===this.max||u<this.max)&&(null===this.min||u>this.min);f++);this.value=u;var _=this._getText();(0,s.setSelectionRange)(l,0,_.length)}else this._updateDateTimeValue(c,p,d);t.preventDefault()}}}e.prototype._keydown.call(this,t)},t.prototype._expandSelection=function(){if(this._cal._rngMode()){var t=this._tbx,i=t.value,n=t.selectionStart,o=t.selectionEnd,r=this._sep,l=i.indexOf(r);l>-1&&n==o&&(o<=l?(0,s.setSelectionRange)(t,0,l):n>=l+r.length&&(0,s.setSelectionRange)(t,l+r.length,t.value.length))}else e.prototype._expandSelection.call(this)},t.prototype._updateDateTimeValue=function(e,t,i){var n=this._tbx,o=n.selectionStart,r=n.value,l=this.value,a={},h={},c=0,u=0,d=0,p=[],f=[],_=n.value.match((0,s.getSpecialCharsRegex)());null==t||null==_?(p=[this.format],f=["0"],t=[""]):(t.forEach((function(e,n){var o=e.replaceAll('"',""),s=i.substring(c),l=r.substring(u),d=s.indexOf(e),p=l.indexOf(o);if(-1==p){var f=_[n];p=l.indexOf(f)}var g=s.substring(0,d);""!=g&&(a[g]=c,h[g]=u),c=c+d+e.length,u=u+p+o.length,n==t.length-1&&(g=i.substring(c),a[g]=c,h[g]=u)})),p=Object.keys(a),f=Object.values(h));var g=f.filter((function(e){return o>=parseInt(e.toString())}));g.length>0&&(d=g.length-1);for(var m=p[d],b=1;-1!=m.indexOf("d")?l=s.DateTime.addDays(this.value,b*e):-1!=m.indexOf("M")?l=s.DateTime.addMonths(this.value,b*e):-1!=m.indexOf("y")&&(l=s.DateTime.addYears(this.value,b*e)),!this._isValidDate(l)&&(null===this.max||l<this.max)&&(null===this.min||l>this.min);b++);this.value=l,this._reselectText(t,d)},t.prototype._reselectText=function(e,t){var i=this._getText(),n=this._tbx,o=0,r=-1,l=-1;if(1==e.length&&""==e[0])r=0,l=i.length;else{var a=n.value.match((0,s.getSpecialCharsRegex)());e.forEach((function(e,n){var s=e.replaceAll('"',""),h=i.substring(o);h.startsWith("\u0433.")&&(h=h.replace("\u0433. ",""),o+=3);var c=h.indexOf(s);if(0==c&&t++,-1==c){var u=a[n];c=h.indexOf(u)}var d=-1===c?h:h.substring(0,c);n==t&&-1==r&&(l=(r=o)+d.length),o=o+c+s.length}))}-1==r&&(r=o,l=n.value.length),(0,s.setSelectionRange)(n,r,l)},t.prototype._refreshText=function(){var e=this._getText();e==this.text&&e===this._oldText||(this._tbx.value=this._oldText=this._previousText=e,this.onTextChanged())},t.prototype._selectAll=function(){this.isDroppedDown||!this.containsFocus()||this.isTouching||this.selectAll()},t.prototype._closeOnChange=function(){var e=this;if(this._clsOnSel&&this._isTriggered){var t=this._cal;(!t._rngMode()||t.value&&t.rangeEnd)&&setTimeout((function(){e._isInvalidInputCancelled=!1,e.isDroppedDown=!1}))}},t.prototype._tryFocus=function(e){var t=e.hostElement;return!(!t||!t.offsetHeight)&&(t.focus(),!0)},t.prototype._clamp=function(e){return this._cal._clamp(e)},t.prototype._getText=function(){var e=s.Globalize.format,t=this._fmt,i=e(this.value,t);return this._cal._rngMode()&&i&&(this.rightToLeft?i=e(this.rangeEnd,t)+this._sep+i:i+=this._sep+e(this.rangeEnd,t)),i},t.prototype._commitText=function(e,t){var i=this._tbx.value;this._isInvalidInputCancelled=!1,(0,s.isEmpty)(this._currentInput)&&(this._textInitialized=!1,this._currentInput="user");var n=!1,o=this._fmt,r=this._cal,l=s.Globalize.parseDate,a=new Ce(!this._textInitialized);if(i)if(r._rngMode()){var h=i.split(this._sep),c=this.rightToLeft?h[1]:h[0];if(2==h.length&&c)if(d=l(c,o,this.value)){var u=l(this.rightToLeft?h[0]:h[1],o,this.value);s.DateTime.sameDate(d,this._clamp(d))?n=!0:this._shouldRaiseInvalidInput(t)&&this.onInvalidInput(a)?this._textInitialized&&this._keepInvalidText||(n=!0):(this._selectAll(),n=!1),n&&(u?(r.value=this._fromDateTime(d),s.DateTime.sameDate(u,this._clamp(u))?(r.rangeEnd=u&&u>=d?this._fromDateTime(u):d,this.text=this._getText()):this._triggerInvalidInputEvent(a,d,u,t)):this._shouldRaiseInvalidInput(t)&&this.onInvalidInput(a)?this._textInitialized&&this._keepInvalidText||(r.value=this._fromDateTime(d),r.rangeEnd=d,this.text=this._getText()):(this._isInvalidInputCancelled=!0,this._selectAll()))}else this._nullValueInvalidInput(a,t);else this._nullValueInvalidInput(a,t)}else(d=l(i,o,this.value))?s.DateTime.sameDate(d,this._clamp(d))?this.value=this._fromDateTime(d):this._triggerInvalidInputEvent(a,d,null,t):this._nullValueInvalidInput(a,t);else if(this.isRequired){var d;(d=l(i,o,this.value))?this.value=this._fromDateTime(d):this.containsFocus()||(this.text=this._getText())}else this.value=this.rangeEnd=null;this._currentInput="",e||this._selectAll()},t.prototype._triggerInvalidInputEvent=function(e,t,i,n){this._shouldRaiseInvalidInput(n)&&this.onInvalidInput(e)?this._textInitialized&&this._keepInvalidText||(this.value=this._fromDateTime(t),this.calendar._rngMode()&&(this.calendar.rangeEnd=i&&i>=t?this._fromDateTime(i):t)):(this.isDroppedDown||!this.containsFocus()||this.isTouching||this.focus(),this._isInvalidInputCancelled=!0,this._selectAll())},t.prototype._nullValueInvalidInput=function(e,t){this._shouldRaiseInvalidInput(t)&&this.onInvalidInput(e)?this._textInitialized&&this._keepInvalidText||(this.text=this._getText()):(this.isDroppedDown||!this.containsFocus()||this.isTouching||this.focus(),this._isInvalidInputCancelled=!0,this._selectAll())},t.prototype._fromDateTime=function(e){return s.DateTime.fromDateTime(e,this.value)},t.prototype._canChangeValue=function(){return!this.isReadOnly&&!this.isDisabled&&this.selectionMode!=ae.None},t.prototype._isValidDate=function(e){if(e){if(this._clamp(e)!=e)return!1;if(this.itemValidator&&!this.itemValidator(e))return!1}return!0},t.prototype._getRanges=function(e){var t=[];if((0,s.isObject)(e))for(var i in e){var n=e[i];t.push({name:i,from:n?n[0]:null,to:n?n[1]:null})}return new s.CollectionView(t,{currentItem:null})},t.prototype._updateRangeSelection=function(){var e=this._lbx,t=-1;if((0,s.hasItems)(e.collectionView))for(var i=this._lbx.collectionView.items,n=s.DateTime.sameDate,o=0;o<i.length;o++){var r=i[o];if(r.from){if(n(r.from,this.value)&&n(r.to,this.rangeEnd)){t=o;break}}else t=o}return e.selectedIndex=t,e.selectedItem},t.prototype._copy=function(e,t){if("text"===e){var i=(t||"").toString();return i!==this.text&&(this._tbx.value=i,this._textInitialized=!0),!0}return!1},Object.defineProperty(t.prototype,"showConfirmationButtons",{get:function(){return this._showConfirmationButtons},set:function(e){this._showConfirmationButtons=e,this._cal.focusMode=e,this._cal.showConfirmationButtons=e,this._cal.keyActionTab=e?ue.All:ue.None},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ariaLabelledBy",{get:function(){return this._ariaLabelledby},set:function(e){(0,s._setAriaLabelBy)(this,this._tbx,e,this._updateInputAriaLabel.bind(this))},enumerable:!0,configurable:!0}),t.prototype._updateInputAriaLabel=function(){this._tbx&&(this._tbx.id||this.ariaLabelledBy?(0,s.setAriaLabel)(this._tbx,null):(0,s.setAriaLabel)(this._tbx,this._inputAriaLabel))},t.prototype.getAriaLabelForScreenReader=function(){return s.culture.InputDate.ariaLabels.inputDate},Object.defineProperty(t.prototype,"keyActionTab",{get:function(){return this._keyActionTab},set:function(e){this._keyActionTab=(0,s.asEnum)(e,_e)},enumerable:!0,configurable:!0}),t.prototype._shouldRaiseInvalidInput=function(e){return(0,s.isNullOrUndefined)(e)?!this._containsFocus():e},t._ctrlTemplate="",t}(ve);(0,s._addCultureInfo)("InputDateRange",{ariaLabels:{inputDateRangeInput:"InputDateRange Input"}});var Ee=function(e){function t(t,i){var n=e.call(this,t,{selectionMode:ae.Range,showMonthPicker:"Outside",monthCount:2})||this;return n._inputAriaLabel=s.culture.InputDateRange.ariaLabels.inputDateRangeInput,(0,s.addClass)(n.hostElement,W.hostElement),n._tbx.value=n._oldText=n._getText(),n.initialize(i),n._tbx.value!==n._oldText&&(n._oldText=n._tbx.value,n._currentInput="text",n._commitText()),n._updateInputAriaLabel(),n}return k(t,e),Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate=xe.controlTemplate),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectionMode",{get:function(){return this.calendar.selectionMode},set:function(e){e=(0,s.asEnum)(e,ae),(0,s.assert)(e==ae.Range,'InputDateRange.selectionMode must be "Range"'),this.calendar.selectionMode=e},enumerable:!0,configurable:!0}),t.prototype._mouseWheel=function(e){if(!e.defaultPrevented&&!this.isDroppedDown&&this.containsFocus()&&null!=this.value&&this._canChangeValue()){var t=(0,s.clamp)(-e.deltaY,-1,1),i=this.value;this.value=this.selectionMode==ae.Month?s.DateTime.addMonths(i,t):s.DateTime.addDays(i,t),this.selectAll(),e.preventDefault()}},t.prototype.onGotFocus=function(e){var t=this._tbx;this._elRef!=t||this.isDroppedDown||this.selectAll(),this.containsFocus()||this.focus(),this.gotFocus.raise(this,e)},t.prototype._keydown=function(t){if(!(t.defaultPrevented||t.altKey||t.ctrlKey||t.metaKey)){if(this._isInvalidInputCancelled=!1,this._isHiddenEditor())return;switch(t.keyCode){case s.Key.Up:case s.Key.Down:if(!this.isDroppedDown&&this.value&&this._canChangeValue()){var i=t.keyCode==s.Key.Up?1:-1,n=this.selectionMode==ae.Month?s.DateTime.addMonths(this.value,i):s.DateTime.addDays(this.value,i);this.value=this._fromDateTime(n),this.selectAll(),t.preventDefault()}}}e.prototype._keydown.call(this,t)},t._ctrlTemplate="",t}(xe);(0,s._addCultureInfo)("InputColor",{ariaLabels:{inputColor:"Input Color"}});var Se=function(e){function t(t,i){var n=e.call(this,t)||this;n._textInitialized=!1,n.valueChanged=new s.Event,(0,s.addClass)(n.hostElement,K.hostElement);var o='<div class="'+K.inputColorBox+'"></div>';return n._ePreview=(0,s.createElement)(o,n.hostElement.firstElementChild),"INPUT"==n._orgTag&&(n._tbx.type="",n._commitText()),n.value="#ffffff",n.isRequired=!0,n._tbx.value=n._oldText=n.value,n.initialize(i),n._textInitialized&&n._tbx.value!==n._oldText&&(n._oldText=n._tbx.value,n.onTextChanged(),n._commitText(),n._textInitialized=!1),n.addEventListener(n._colorPicker.hostElement,"click",(function(e){var t=e.target;t&&"DIV"==t.tagName&&((0,s.closest)(t,'[wj-part="div-pal"]')||(0,s.closest)(t,'[wj-part="div-pv"]'))&&t.style.backgroundColor&&(n.isDroppedDown=!1)})),n._colorPicker.tabOrder=-1,n}return k(t,e),Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate=ve.controlTemplate),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){this.text=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._tbx.value},set:function(e){(e=(0,s.asString)(e))==this.text||!e&&this.isRequired||e&&!s.Color.fromString(e.replace(/\s+/g,""))||(this._setText(e,!0),this._commitText())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputType",{get:function(){return this._tbx.type},set:function(e){e.match(/^(tel|text|)$/i)?this._tbx.type=(0,s.asString)(e):console.warn("invalid input type '"+e+"', don't use any input types other than 'tel' or 'text'")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showAlphaChannel",{get:function(){return this._colorPicker.showAlphaChannel},set:function(e){this._colorPicker.showAlphaChannel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showColorString",{get:function(){return this._colorPicker.showColorString},set:function(e){this._colorPicker.showColorString=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"palette",{get:function(){return this._colorPicker.palette},set:function(e){this._colorPicker.palette=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"colorPicker",{get:function(){return this._colorPicker},enumerable:!0,configurable:!0}),t.prototype.onValueChanged=function(e){this.valueChanged.raise(this,e)},t.prototype.onIsDroppedDownChanged=function(t){e.prototype.onIsDroppedDownChanged.call(this,t),this.isDroppedDown&&!this.isTouching&&this.selectAll()},t.prototype._createDropDown=function(){var e=this;this._colorPicker=new oe(this._dropDown),(0,s.setCss)(this._dropDown,{minWidth:420,minHeight:200}),this._colorPicker.valueChanged.addHandler((function(){e.value=e._colorPicker.value}))},t.prototype._keydown=function(t){if(!t.defaultPrevented)switch(t.keyCode){case s.Key.Enter:this._commitText(),this.selectAll();break;case s.Key.Escape:this.text=this.value,this.selectAll();break;case s.Key.Tab:this.isDroppedDown&&(this.isDroppedDown=!1,this.containsFocus()||this.focus(),t.preventDefault())}e.prototype._keydown.call(this,t)},t.prototype._commitText=function(){if(this._value!=this.text){var e=!this.text||!this.text.trim();if(!this.isRequired&&e)return this._value="",this._ePreview.style.backgroundColor="",void this.onValueChanged();if(s.Color.fromString(this.text.replace(/\s+/g,""))){if(this.text&&this.text!==this.text.replace(/\s+/g,""))return void(this.text=this.text.replace(/\s+/g,""));var t=this._colorPicker;t.value=this.text,this._value=t.value,this._ePreview.style.backgroundColor=this.value,this.onValueChanged()}else this.onInvalidInput(new s.CancelEventArgs)&&(this.text=this._value?this._value:"")}},t.prototype._copy=function(e,t){if("text"===e){var i=(t||"").toString();return i!==this.text&&(this._tbx.value=i,this._textInitialized=!0),!0}return!1},t.prototype.getAriaLabelForScreenReader=function(){return s.culture.InputColor.ariaLabels.inputColor},t._ctrlTemplate="",t}(ve);(0,s._addCultureInfo)("ComboBox",{ariaLabels:{comboBoxInput:"ComboBox Input",comboBox:"Combo Box"}});var Ie=function(e){function t(t,i){var n=e.call(this,t)||this;n._editable=!1,n._trimText=!0,n._handleWheel=!0,n._delKey=0,n._draggingText=!1,n._textIsComposing="",n._pathHdr=new s.Binding(null),n._bsCollapse=!0,n._fmtItemHandlers=0,n._emptyValueAction=!1,n._oldIndexToBeRestoredOnBlur=null,n._restoreComboboxTbxVal=!1,n._isWheel=!1,n._selItems=null,n._oldFilter=null,n._keyActionTab=_e.CloseAndMoveFocus,n._keyActionPrintCharacters=fe.OpenDropdown,n._inputElementAriaLabel=s.culture.ComboBox.ariaLabels.comboBoxInput,n._ariaLabelledby=null,n.itemsSourceChanged=new s.Event,n.selectedIndexChanged=new s.Event;var o=n.hostElement;(0,s.addClass)(o,V.hostElement),n.dropDown.id=(0,s.getUniqueId)(o.id+"_dropdown"),n.autoExpandSelection=!1;var r=n._tbx;n.addEventListener(r,"compositionstart",(function(){n._composing=!0})),n.addEventListener(r,"compositionend",(function(){n._textIsComposing=n.text,n._composing=!1,n._setText(n._textIsComposing,!0),!n._textIsComposing&&n.isRequired&&(n._oldText="",n._oldIndexToBeRestoredOnBlur=null),setTimeout((function(){n._textIsComposing=""}))})),n.addEventListener(r,"drag",(function(){n._draggingText=!0})),n.addEventListener(o,"wheel",n._wheel.bind(n)),"SELECT"==n._orgTag&&n._lbx._initFromSelect(o);var l=n._lbx;return l.loadedItems.addHandler((function(e){n.selectedIndex>-1&&(n.selectedIndex=l.selectedIndex)})),l.tabOrder=-1,n.isRequired=!0,n.initialize(i),n._updateTbxAriaHaspopup(),n._updateInputAriaLabel(),n}return k(t,e),Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate=ve.controlTemplate),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemsSource",{get:function(){return this._lbx.itemsSource},set:function(e){this._lbx.itemsSource!=e&&(this._lbx.itemsSource=e,this.onItemsSourceChanged()),this._updateBtn()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collectionView",{get:function(){return this._lbx.collectionView},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"virtualizationThreshold",{get:function(){return this._lbx.virtualizationThreshold},set:function(e){this._lbx.virtualizationThreshold=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showGroups",{get:function(){return this._lbx.showGroups},set:function(e){this._lbx.showGroups=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayMemberPath",{get:function(){return this._lbx.displayMemberPath},set:function(e){if(this.displayMemberPath!==e){this._lbx.displayMemberPath=e;var t=this._getDisplayText(void 0,void 0,!0);this.text!=t&&this._setText(t,!0)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headerPath",{get:function(){return this._pathHdr.path},set:function(e){this._pathHdr.path=(0,s.asString)(e);var t=this._getDisplayText(void 0,void 0,!0);this.text!=t&&this._setText(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedValuePath",{get:function(){return this._lbx.selectedValuePath},set:function(e){this._lbx.selectedValuePath=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isContentHtml",{get:function(){return this._lbx.isContentHtml},set:function(e){if(e!=this.isContentHtml){this._lbx.isContentHtml=(0,s.asBoolean)(e);var t=this._getDisplayText(void 0,void 0,!0);this.text!=t&&this._setText(t,!0)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"caseSensitiveSearch",{get:function(){return this._lbx.caseSensitiveSearch},set:function(e){this._lbx.caseSensitiveSearch=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trimText",{get:function(){return this._trimText},set:function(e){e!=this._trimText&&(this._trimText=(0,s.asBoolean)(e),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemFormatter",{get:function(){return this._lbx.itemFormatter},set:function(e){this._lbx.itemFormatter=(0,s.asFunction)(e),this.selectedIndex=this._lbx.selectedIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formatItem",{get:function(){return this._lbx.formatItem},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this._lbx.selectedIndex},set:function(e){e!=this.selectedIndex&&(0,s.isNumber)(e)&&(this._lbx.selectedIndex=e);var t=this._lbx._oldSelectedIndex!=this.selectedIndex;e=this.selectedIndex;var i=this._getDisplayText(e,void 0,!0);if(this.text!=i||t){var n=this._internalSettingText;this._internalSettingText=this._lbx._ignoredItemChangedEvents,this._setText(i,!0),""!=this.text&&(this._emptyValueAction=!1),this._internalSettingText=n}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedItem",{get:function(){return this._lbx.selectedItem},set:function(e){this._lbx.selectedItem=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedValue",{get:function(){return this.collectionView?this._lbx.selectedValue:this.text},set:function(e){this.collectionView?this._lbx.selectedValue=e:null!=e&&(this.text=e.toString())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEditable",{get:function(){return this._editable},set:function(e){this._editable=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"handleWheel",{get:function(){return this._handleWheel},set:function(e){this._handleWheel=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxDropDownHeight",{get:function(){return this._lbx.maxHeight},set:function(e){this._lbx.maxHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxDropDownWidth",{get:function(){var e=this._dropDown,t=e?parseInt(e.style.maxWidth):null;return isNaN(t)?null:t},set:function(e){var t=this._dropDown.style;e=(0,s.asNumber)(e,!0),t.maxWidth=null==e?"":e+"px",t.minWidth=""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keyActionPrintCharacters",{get:function(){return this._keyActionPrintCharacters},set:function(e){this._keyActionPrintCharacters=(0,s.asEnum)(e,fe)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keyActionTab",{get:function(){return this._keyActionTab},set:function(e){this._keyActionTab=(0,s.asEnum)(e,_e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ariaLabelledBy",{get:function(){return this._ariaLabelledby},set:function(e){(0,s._setAriaLabelBy)(this,this._tbx,e,this._updateInputAndListBoxAriaLabel.bind(this))},enumerable:!0,configurable:!0}),t.prototype._updateInputAndListBoxAriaLabel=function(){this._updateInputAriaLabel()},t.prototype.getDisplayText=function(e,t){return void 0===e&&(e=this.selectedIndex),void 0===t&&(t=this._trimText),this._getDisplayText(e,t)},t.prototype._getDisplayText=function(e,t,i){void 0===e&&(e=this.selectedIndex),void 0===t&&(t=this._trimText);var n,o=this.collectionView;if(this.headerPath&&e>-1&&(0,s.hasItems)(o)){var r=o.items[e];n=null!=(n=r?this._pathHdr.getValue(r):null)?n.toString():"",this.isContentHtml&&(n=(0,s.toPlainText)(n))}else n=this._lbx._getDisplayText(e,i&&void 0!==this.itemFormatter&&!this._hasCustomFormatItem());return t?n.trim():n},t.prototype._hasCustomFormatItem=function(){return this.formatItem.hasHandlers},t.prototype.indexOf=function(e,t,i){void 0===i&&(i=!1);var n=this.collectionView,o=this.caseSensitiveSearch;if((0,s.hasItems)(n)&&null!=e){e=e.toString(),o||(e=e.toLowerCase()),this._trimText&&!i&&(-1!==this.indexOf(e,!1,!0)||(e=e.trim()));var r=this.selectedIndex,l=this._getDisplayText(r,void 0,!0);if(t){if(o||(l=l.toLowerCase()),e==l)return r}else if(!e&&""==l)return r;for(var a=0;a<n.items.length;a++)if(this._lbx.isItemEnabled(a))if(l=this._getDisplayText(a,void 0,!0),this.trimText&&(l=l.trim()),o||(l=l.toLowerCase()),t){if(l==e&&!1===this._emptyValueAction)return a}else if(e&&0==l.indexOf(e)||!e&&""==l&&!1===this._emptyValueAction)return a}return-1},Object.defineProperty(t.prototype,"listBox",{get:function(){return this._lbx},enumerable:!0,configurable:!0}),t.prototype.onItemsSourceChanged=function(e){this.itemsSourceChanged.raise(this,e)},t.prototype.onSelectedIndexChanged=function(e){this._updateBtn(),this.selectedIndexChanged.raise(this,e)},t.prototype.refresh=function(t){void 0===t&&(t=!0),e.prototype.refresh.call(this,t),this.hostElement&&(0,s.hasItems)(this.collectionView)&&(this._lbx.refresh(),this.selectedIndex>-1&&(this.selectedIndex=this._lbx.selectedIndex))},t.prototype.onLostFocus=function(t,i,n){this._trimText&&(this.text=this.text.trim()),this._composing&&(this._composing=!1,!this.text&&this.isRequired&&(this._oldText="",this._oldIndexToBeRestoredOnBlur=null),this._setText(this.text,!0)),(this.text||!this.isRequired||Array.isArray(this._selItems)&&this._selItems.length>0)&&!n||!(0,s.hasItems)(this.collectionView)||this.isRequired&&!this.isEditable&&this.text&&this.indexOf(this.text,!1)>-1&&this.indexOf(this.text,!0)<0||(void 0!==i&&(this.selectedIndex=-1!==i?i:0),null!==this._oldIndexToBeRestoredOnBlur?this.selectedIndex=-1!==this._oldIndexToBeRestoredOnBlur?this._oldIndexToBeRestoredOnBlur:0:null==this.collectionView.currentItem&&(this.selectedIndex=0));var o=this.text,r=this.collectionView?this.collectionView.items.length:0,l=this.selectedIndex;e.prototype.onLostFocus.call(this,t);var a=this.collectionView?this.collectionView.items.length:0,h=this.selectedIndex,c=this.text;l===h&&o===c&&(this._oldFilter&&(this.collectionView.filter=this._oldFilter,this._oldFilter=null),this._trySelectionUpdateOnItemsSourceChanged(a!==r,o))},t.prototype.onIsDroppedDownChanging=function(t){return this.isDroppedDown||this._hasItems()?e.prototype.onIsDroppedDownChanging.call(this,t):(t.cancel=!0,!1)},t.prototype.onIsDroppedDownChanged=function(t){e.prototype.onIsDroppedDownChanged.call(this,t),this.isDroppedDown&&(this._fmtItemHandlers=this.formatItem.handlerCount,this._lbx.showSelection()),this._updateTbxAria()},t.prototype._trySelectionUpdateOnItemsSourceChanged=function(e,t){if(e&&t){var i=this.indexOf(t,!0);i<0&&(i=this.indexOf(t,!1)),this.selectedIndex=i}},t.prototype._setIsDisabled=function(t){e.prototype._setIsDisabled.call(this,t),this._updateBtn()},t.prototype._updateBtn=function(){var t=this.collectionView,i=this._tbx,n=this._hasItems();e.prototype._updateBtn.call(this),this._btn.style.display=this._showBtn&&null!=t?"":"none",(0,s.enable)(this._btn,n&&!this.isDisabled),(0,s.setAttribute)(i,"role",n?"combobox":null),(0,s.setAttribute)(i,"aria-autocomplete",n?"both":null),this._updateTbxAria()},t.prototype._hasItems=function(){return(0,s.hasItems)(this.collectionView)},t.prototype._updateTbxAria=function(){e.prototype._updateTbxAria.call(this);var t=this._tbx,i=this.isDroppedDown,n=this.dropDown?this.dropDown.id:null,o=n&&(0,s.hasItems)(this.collectionView),r=this._lbx,l=r.selectedIndex,a=r.hostElement?r.hostElement.children:null,h=l>-1&&l<a.length?a[l].id:null;(0,s.setAttribute)(t,"aria-controls",o&&i?n:null),(0,s.setAttribute)(t,"aria-expanded",o?i:null),(0,s.setAttribute)(t,"aria-activedescendant",this.isDroppedDown&&h&&h.length?h:null)},t.prototype._updateInputAriaLabel=function(){var e=this._tbx;e&&(e.id||this._ariaLabelledby?(0,s.setAttribute)(e,"aria-label",null):(0,s.setAttribute)(e,"aria-label",this._inputElementAriaLabel))},t.prototype._createDropDown=function(){var e=this;this._lbx||(this._lbx=new se(this._dropDown),this._lbx._container=this.hostElement),this._lbx.maxHeight=200,this._lbx.selectedIndexChanged.addHandler((function(){e._updateBtn();var t=e._lbx.selectedIndex;e.selectedIndex=t,e.onSelectedIndexChanged()})),this._lbx.itemsChanged.addHandler((function(){e._updateBtn()}))},t.prototype._wheel=function(e){if(this._isWheel=!0,this.handleWheel&&!e.defaultPrevented&&!this.isDroppedDown&&!this.isReadOnly&&this.containsFocus()&&this.selectedIndex>-1){var t=this._findNext("",e.deltaY>0?1:-1);t>-1&&(this.selectedIndex=t),e.preventDefault()}this._isWheel=!1},t.prototype._dropDownClick=function(t){t.defaultPrevented||t.target!=this._dropDown&&(this.isDroppedDown=!1),this._restoreComboboxTbxVal&&(this._tbx.value=this._getDisplayText(this.selectedIndex,void 0,!0)),e.prototype._dropDownClick.call(this,t)},t.prototype._setText=function(t,i,n){if(void 0===n&&(n=!1),!this._composing&&!this._settingText){if(this._settingText=!0,this.containsFocus()){var o=this.formatItem.handlerCount;this._fmtItemHandlers!=o&&(this._fmtItemHandlers=o,this._lbx.loadList())}t=[null,void 0,NaN].includes(t)?"":t.toString();var r=this.selectedIndex,l=this.collectionView,a=this._getSelStart(),h=-1,c=!0;if(this.isEditable&&(this._delKey||this._getSelEnd()<t.length||!this.containsFocus())&&(i=!0,c=!1),r=this.indexOf(t,i),c&&(r<0&&i&&(r=this.indexOf(t,!1)),r<0&&a>0&&!n&&(r=this.indexOf(t.substr(0,a),!1)),!i)){var u=this.indexOf(t,!0);u>-1&&r>-1&&u!=r&&(r=u)}if(r<0&&this._delKey&&(r=this.indexOf(t,i)),r<0&&!this.isEditable&&(0,s.hasItems)(l)&&(t&&this.isRequired||this.containsFocus()&&(t||this.isRequired))){var d=this._oldText||"";r=Math.max(0,this.indexOf(d,!1)),a=0;for(var p=0;p<t.length&&p<d.length;p++)if(t[p]!=d[p]){a=p;break}}if((!this._delKey||!this.isEditable||this._delKey&&this.isEditable&&t==this._getDisplayText(r,void 0,!0))&&(!this._pristine||this._pristine&&!this.isEditable)||this._isWheel||this._delKey&&""==t&&r>-1){r>-1&&(h=a,t=this._getDisplayText(r,void 0,!0));var f=this._tbx;t!=f.value&&(f.value=t),h>-1&&this.containsFocus()&&!this.isTouching&&this._updateInputSelection(h)}l&&((!t||this.trimText&&""==t.trim()&&!this.containsFocus()&&this.isEditable)&&(r>-1?this._oldIndexToBeRestoredOnBlur=r:(this._oldIndexToBeRestoredOnBlur=this.indexOf(this._oldText,!0),this._oldIndexToBeRestoredOnBlur=this._oldIndexToBeRestoredOnBlur<0?this.indexOf(this._oldText,!1):this._oldIndexToBeRestoredOnBlur)),this._restoreComboboxTbxVal=t&&r>-1,l.moveCurrentToPosition(r)),this.containsFocus()||this.isEditable||this.isRequired||t!=t.trim()||!this.trimText||(this._tbx.value=this._getDisplayText(r,this.trimText,!0)),!this.containsFocus()&&r>-1&&this.isEditable&&(t=this._getDisplayText(r,this.trimText,!0)),!this.containsFocus()&&this._hasItems()&&r<0&&!this.isEditable&&!this.isRequired&&(t="");var _=!1;!t&&r<0&&this.isRequired&&!this.containsFocus()&&(_=!0),this.trimText&&!this.containsFocus()&&this.isEditable&&(this.isRequired&&""==t.trim()?_=!0:t=t.trim()),_&&(this.selectedIndex=this._oldIndexToBeRestoredOnBlur,this.selectedIndex<0&&(this.selectedIndex=0));var g=!this.containsFocus()&&!this.isEditable&&this.trimText;g&&(this._tbx.value=this._getDisplayText(r,!0,!0)),this._delKey=0,this._settingText=!1,e.prototype._setText.call(this,_?this._getDisplayText(this.selectedIndex,void 0,!0):t,i,_,g)}},t.prototype._findNext=function(e,t,i){void 0===i&&(i=this.selectedIndex);var n=this.collectionView,o=n?n.items.length:0,r=this._lbx,s=this.caseSensitiveSearch;if(n&&o&&t){s||(e=e.toLowerCase()),this.trimText&&(e=e.trim());for(var l=i+t;l>-1&&l<o;l+=t){var a=this._getDisplayText(l,void 0,!0);if(s||(a=a.toLowerCase()),0==a.indexOf(e)&&(!this.dropDown.children[l]||r.isItemEnabled(l)))return l}}return i},t.prototype._findNextWhenIsEditableFalse=function(e,t,i){void 0===i&&(i=this.selectedIndex);var n=this._findNext(e,t,i);return n!==i?n:-1},t.prototype._keydown=function(t){if(e.prototype._keydown.call(this,t),!t.defaultPrevented&&!this.isReadOnly&&!t.altKey&&(0,s.hasItems)(this.collectionView)&&this._elRef==this._tbx&&!this._isHiddenEditor()){this._delKey=0;var i=this._getSelStart(),n=this._getSelEnd();switch(t.keyCode){case s.Key.Tab:this.isDroppedDown&&(this.isDroppedDown=!1,this.keyActionTab===_e.CloseAndKeepFocus&&t.preventDefault());break;case s.Key.Back:case s.Key.Delete:case 88:if(!t.ctrlKey&&!t.metaKey&&88==t.keyCode)break;this._bsCollapse&&!this.isEditable&&i>0&&n==this._tbx.value.length&&(0,s.hasItems)(this.collectionView)&&(this._setSelRange(i-1,n),i-=1),this._delKey=t.keyCode;break;case s.Key.Up:case s.Key.Down:i==this.text.length&&(i=0),this.selectedIndex=this._findNext(this.text.substr(0,i),t.keyCode==s.Key.Up?-1:1),this._setSelRange(i,this.text.length),t.preventDefault();break;case s.Key.PageUp:this._lbx._selectPrevPage(),this.selectAll(),t.preventDefault();break;case s.Key.PageDown:this._lbx._selectNextPage(),this.selectAll(),t.preventDefault();break;case s.Key.Home:case s.Key.End:var o=this._tbx;(0,s.setAttribute)(o,"aria-activedescendant",null)}this.text.length>0&&["Backspace","Delete","x"].includes(t.key)&&0===i&&n===this.text.length||this._delKey&&1===this.text.length?this._emptyValueAction=!0:this._composing||(this._emptyValueAction=!1)}},t.prototype._afterOpenDropdownByDownArrow=function(){-1===this.selectedIndex&&(this.selectedIndex=0,this.selectAll())},t.prototype._input=function(e){this._handleDragTextState();var t=this._getSelStart(),i=this._getSelEnd(),n=this._delKey,o=this.text;this._shouldOpenDropdown()&&(this._controlDropdownVisibility(),this._tbx.value=o,this._setSelRange(t,i),this._delKey=n);var r=o.trim();!this.isEditable&&r?this._handleIsEditableFalseInput():this._updateComponentText(),this._updateEmptyValueFlag(),this._resetDragState()},t.prototype._handleDragTextState=function(){this._draggingText&&(this._emptyValueAction=""===this.text)},t.prototype._handleComposingState=function(){this._composing&&(this._composing=!1)},t.prototype._shouldOpenDropdown=function(){return this.keyActionPrintCharacters===fe.OpenDropdown},t.prototype._handleIsEditableFalseInput=function(){var e=this.text,t=this.text.length,i=this._findNextWhenIsEditableFalse(e,1,this.selectedIndex-1);if(-1===i&&-1===(i=this._findNextWhenIsEditableFalse(e,1,-1))){var n=e[e.length-1];t=1,-1===(i=this._findNextWhenIsEditableFalse(n,1))&&(i=this._findNextWhenIsEditableFalse(n,1,-1))}-1!==i?this._updateSelection(i,t):this._updateComponentText()},t.prototype._updateSelection=function(e,t){this._tbx.value=this._getDisplayText(e,void 0,!0),this._updateInputSelection(t);var i=this.collectionView;i&&i.moveCurrentToPosition(e)},t.prototype._updateComponentText=function(){var e=this._textIsComposing||this.text;this._setText(e,!1)},t.prototype._updateEmptyValueFlag=function(){this.text&&(this._emptyValueAction=!1)},t.prototype._controlDropdownVisibility=function(){this.text&&!this.isDroppedDown&&(this.isDroppedDown=!0)},t.prototype._resetDragState=function(){this._draggingText=!1},t.prototype._updateInputSelection=function(e){var t=this._tbx;this._elRef==t&&this._setSelRange(e,t.value.length)},t.prototype._getSelStart=function(){var e=this._tbx;return e&&e.value?e.selectionStart:0},t.prototype._getSelEnd=function(){var e=this._tbx;return e&&e.value?e.selectionEnd:0},t.prototype._setSelRange=function(e,t){var i=this._tbx;this._elRef!=i||i.readOnly||(0,s.setSelectionRange)(i,e,t)},t.prototype.getAriaLabelForScreenReader=function(){return s.culture.ComboBox.ariaLabels.comboBox},t._ctrlTemplate="",t}(ve);(0,s._addCultureInfo)("MultiSelect",{itemsSelected:"{count:n0} items selected",selectAll:"Select All",ariaLabels:{multiSelectInput:"MultiSelect Input",multiSelect:"Multi Select"}});var De=function(e){function t(t,i){var n=e.call(this,t)||this;return n._maxHdrItems=2,n._readOnly=!1,n._hdrFmt=null,n._inputElementAriaLabel=s.culture.MultiSelect.ariaLabels.multiSelectInput,n.checkedItemsChanged=new s.Event,(0,s.addClass)(n.hostElement,Q.hostElement),n._tbx.readOnly=!0,n.checkedMemberPath=null,n.removeEventListener(n.dropDown,"click"),n._lbx.itemsChanged.addHandler((function(){n._updateHeader(!1)})),n._lbx.checkedItemsChanged.addHandler((function(){n._updateHeader(!1),n.onCheckedItemsChanged()})),n.clickAction=pe.Toggle,n.initialize(i),n._updateInputAriaLabel(),n}return k(t,e),Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate=Ie.controlTemplate),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showSelectAllCheckbox",{get:function(){return this._msLbx.showSelectAllCheckbox},set:function(e){this._msLbx.showSelectAllCheckbox=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showFilterInput",{get:function(){return this._msLbx.showFilterInput},set:function(e){this._msLbx.showFilterInput=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"delay",{get:function(){return this._msLbx.delay},set:function(e){this._msLbx.delay=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"caseSensitiveSearch",{get:function(){return this._msLbx.caseSensitiveSearch},set:function(e){this._msLbx.caseSensitiveSearch=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filterInputPlaceholder",{get:function(){return this._msLbx.filterInputPlaceholder},set:function(e){this._msLbx.filterInputPlaceholder=(0,s.asString)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checkOnFilter",{get:function(){return this._msLbx.checkOnFilter},set:function(e){e!=this.checkOnFilter&&(this._msLbx.checkOnFilter=(0,s.asBoolean)(e),this.checkedItems=[])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectAllLabel",{get:function(){return this._msLbx.selectAllLabel},set:function(e){this._msLbx.selectAllLabel=(0,s.asString)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checkedMemberPath",{get:function(){return this._msLbx.checkedMemberPath},set:function(e){this._msLbx.checkedMemberPath=(0,s.asString)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxHeaderItems",{get:function(){return this._maxHdrItems},set:function(e){this._maxHdrItems!=e&&(this._maxHdrItems=(0,s.asNumber)(e),this._updateHeader())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headerFormat",{get:function(){return this._hdrFmt},set:function(e){e!=this._hdrFmt&&(this._hdrFmt=(0,s.asString)(e),this._updateHeader())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headerFormatter",{get:function(){return this._hdrFormatter},set:function(e){e!=this._hdrFormatter&&(this._hdrFormatter=(0,s.asFunction)(e),this._updateHeader())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checkedItems",{get:function(){return this._msLbx.checkedItems},set:function(e){this._msLbx.checkedItems=null==e?[]:(0,s.asArray)(e),this._updateHeader()},enumerable:!0,configurable:!0}),t.prototype.onCheckedItemsChanged=function(e){this.checkedItemsChanged.raise(this,e)},t.prototype.dispose=function(){this._lbx.dispose(),e.prototype.dispose.call(this)},t.prototype.onIsDroppedDownChanged=function(t){var i=this;e.prototype.onIsDroppedDownChanged.call(this,t),setTimeout((function(){if(i.isDroppedDown&&i.containsFocus())if(i.showFilterInput&&!i.isTouching)i._msLbx._filter.focus();else{var e=i.listBox;if(e.selectedIndex<0){var t=0,n=e.checkedItems;n.length&&(t=e.collectionView.items.indexOf(n[0])),e.selectedIndex=Math.max(0,t)}e.showSelection(!0),e.focus()}}))},t.prototype.onLostFocus=function(){this._msLbx.onLostFocus(),this.isDroppedDown=!1,e.prototype.onLostFocus.call(this)},t.prototype._createDropDown=function(){var t=this,i=(0,s.createElement)("<div></div>",this._dropDown);this._msLbx=new de(i),this._lbx=this._msLbx.listBox,this._lbx.itemsChanged.addHandler((function(){t.isDroppedDown&&t.refresh()})),e.prototype._createDropDown.call(this)},Object.defineProperty(t.prototype,"isReadOnly",{get:function(){return this._readOnly},set:function(e){this._readOnly=(0,s.asBoolean)(e),(0,s.toggleClass)(this.hostElement,s.ControlStateClsNames.readOnly,this.isReadOnly)},enumerable:!0,configurable:!0}),t.prototype.refresh=function(t){void 0===t&&(t=!0),e.prototype.refresh.call(this,t),this.hostElement&&this._updateHeader()},t.prototype._setText=function(e,t){},t.prototype._keydown=function(t){var i=t.altKey&&(38===t.keyCode||40===t.keyCode);this.isDroppedDown&&i&&this.showFilterInput?(this.isDroppedDown=!1,t.preventDefault()):(e.prototype._keydown.call(this,t),(0,s.hasClass)(this._tbx,"wj-grid-ime")||!t.defaultPrevented&&(0,s.hasItems)(this.collectionView)&&t.keyCode>32&&123!==t.keyCode&&(this.isDroppedDown=!0))},t.prototype._hasItems=function(){var e=this.collectionView,t=e?e.sourceCollection:null;return(0,s.hasItems)(e)||t&&t.length&&this.showFilterInput},t.prototype._updateHeader=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var i="";if((0,s.isFunction)(this._hdrFormatter))i=this._hdrFormatter(this);else{var n=this.checkedItems,o=[];if(this.displayMemberPath){var r=new s.Binding(this.displayMemberPath);o=n.reduce((function(e,t){return(t.binding?e.find((function(e){return e.binding===t.binding})):e.find((function(e){return r.getValue(e)===r.getValue(t)})))||e.push(t),e}),[]),n=o}if(n.length>0)if(n.length<=this._maxHdrItems){if(this.headerPath){var l=new s.Binding(this.headerPath);n=n.map((function(e){return l.getValue(e)}))}else if(this.displayMemberPath){var a=new s.Binding(this.displayMemberPath);n=n.map((function(e){return a.getValue(e)}))}this.isContentHtml&&(n=n.map((function(e){return(0,s.toPlainText)(e)}))),this.trimText&&(n=n.map((function(e){return e?e.toString().trim():""}))),i=n.join(", ")}else i=(0,s.format)(this.headerFormat||s.culture.MultiSelect.itemsSelected,{count:n.length})}var h=this.inputElement;i!=h.value&&(h.value=i,this.onTextChanged()),e&&this._lbx._updateCheckedList(this.checkedItems),this._updateState()},t.prototype.getAriaLabelForScreenReader=function(){return s.culture.MultiSelect.ariaLabels.multiSelect},t._DEF_CHECKED_PATH="$checked",t._ctrlTemplate="",t}(Ie);(0,s._addCultureInfo)("Menu",{ariaLabels:{menuButton:"Menu"}});var Re=function(e){function t(t,i){var n=e.call(this,t)||this;n._closing=!1,n._cmd=null,n._cmdPath=null,n._cmdParamPath=null,n._subPath=null,n._owner=null,n._isButton=!1,n._openOnHover=!1,n._closeOnLeave=!0,n._subMenu=null,n._hoverEnterBnd=n._hoverEnter.bind(n),n._hoverLeaveBnd=n._hoverLeave.bind(n),n._hoverOverBnd=n._hoverOver.bind(n),n._ariaLabel=s.culture.Menu.ariaLabels.menuButton,n._aFEnabledItem=!1,n.itemClicked=new s.Event;var o=n.hostElement,r=n._tbx,l=n._lbx,a=n.dropDown;(0,s.addClass)(o,$.hostElement),r.style.display="none";var h='<div wj-part="header" class="'+s.InputFormElementsClsNames.formControl+'"/>';return n._hdr=n._elRef=(0,s.createElement)(h),r.parentElement.insertBefore(n._hdr,n._tbx),o.tabIndex=n.isDisabled?-1:n._orgTabIndex,n.isRequired=!1,(0,s.setAttribute)(o,"role","button"),(0,s.setAttribute)(r,"role",null),(0,s.setAttribute)(r,"aria-autocomplete",null),(0,s.setAttribute)(r,"aria-owns",null),(0,s.setAttribute)(a,"role","menu"),l.itemRole="menuitem","SELECT"==n._orgTag&&(n.header=o.getAttribute("header"),n._lbx.itemsSource&&(n.commandParameterPath="cmdParam")),n.isContentHtml=!0,n.maxDropDownHeight=500,n.addEventListener(n._hdr,"click",(function(e){e.defaultPrevented||(n._clearHover(e),n._isButton?(n.isDroppedDown=!1,n._raiseCommand()):n.isDroppedDown=!n.isDroppedDown)})),n.addEventListener(n._hdr,"mousedown",(function(e){e.defaultPrevented||n._clearHover(e)})),l.lostFocus.addHandler((function(){n.containsFocus()||(n.isDroppedDown=!1)})),(0,s.addClass)(a,$.menuItems),l.formatItem.addHandler(n._formatMenuItem.bind(n)),n.initialize(i),(0,s.setAttribute)(o,"aria-expanded",!1),(0,s.setAttribute)(o,"aria-label",n._ariaLabel),(0,s.setAttribute)(o,"aria-haspopup","menu"),(0,s.setAttribute)(o,"aria-owns",a.id),(0,s.setAttribute)(o,"aria-controls",a.id),n}return k(t,e),Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate=Ie.controlTemplate),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ariaLabel",{get:function(){return this._ariaLabel},set:function(e){e!=this._ariaLabel&&(this._ariaLabel=e,(0,s.setAttribute)(this.hostElement,"aria-label",this._ariaLabel))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoSelectOnFocus",{get:function(){return this._aFEnabledItem},set:function(e){this._aFEnabledItem=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"header",{get:function(){return this._hdr.innerHTML},set:function(e){this._hdr.innerHTML=(0,s.asString)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"command",{get:function(){return this._cmd},set:function(e){this._cmd=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"commandPath",{get:function(){return this._cmdPath},set:function(e){this._cmdPath=(0,s.asString)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"commandParameterPath",{get:function(){return this._cmdParamPath},set:function(e){this._cmdParamPath=(0,s.asString)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subItemsPath",{get:function(){return this._subPath},set:function(e){e!=this._subPath&&(this._subPath=e,this.refresh(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"openOnHover",{get:function(){return this._openOnHover},set:function(e){this._openOnHover=(0,s.asBoolean)(e),this._updateHoverEvents()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"closeOnLeave",{get:function(){return this._closeOnLeave},set:function(e){this._closeOnLeave=(0,s.asBoolean)(e),this._updateHoverEvents()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isButton",{get:function(){return this._isButton},set:function(e){this._isButton=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"owner",{get:function(){return this._owner},set:function(e){this._owner=(0,s.asType)(e,HTMLElement,!0),this._enableDisableItems()},enumerable:!0,configurable:!0}),t.prototype.show=function(e){if(!this.isDroppedDown){var t=this._lbx._ignoredItemChangedEvents;if(this._lbx._ignoredItemChangedEvents=!0,this.selectedIndex=-1,this._lbx._ignoredItemChangedEvents=t,this.onIsDroppedDownChanging(new s.CancelEventArgs)){var i=this.dropDown,n=this.owner;!n&&e instanceof MouseEvent&&(n=e.target),n instanceof HTMLElement&&(i[s.Control._OWNR_KEY]=n),e instanceof MouseEvent&&this.openOnHover&&this.closeOnLeave&&(e=new s.Point(e.pageX-pageXOffset-2,e.pageY-pageYOffset-2)),(0,s.showPopup)(i,e,!1,this.isAnimated),this.onIsDroppedDownChanged()}}},t.prototype.hide=function(){this.isDroppedDown&&this.onIsDroppedDownChanging(new s.CancelEventArgs)&&((0,s.hidePopup)(this.dropDown),this.onIsDroppedDownChanged())},t.prototype.onItemClicked=function(e){this.itemClicked.raise(this,e)},t.prototype.refresh=function(t){void 0===t&&(t=!0),e.prototype.refresh.call(this,t),this.hostElement&&this._enableDisableItems()},t.prototype.onIsDroppedDownChanged=function(t){if(e.prototype.onIsDroppedDownChanged.call(this,t),(0,s.setAttribute)(this.hostElement,"aria-expanded",this.isDroppedDown),this.isDroppedDown){this._closing=!0;var i=this._lbx._ignoredItemChangedEvents;if(this._lbx._ignoredItemChangedEvents=!0,this._defaultItem=this.selectedItem,this.isRequired=!1,this.selectedIndex=-1,this._enableDisableItems(),this._closing=!1,this._lbx._ignoredItemChangedEvents=i,this._aFEnabledItem){for(var n=this.dropDown.children,o=0;o<n.length;o++)if(!n[o].classList.contains(s.ControlStateClsNames.disabled)){this.selectedIndex=o,n[o].focus();break}}else this.dropDown.focus()}else{if(!this.selectedItem){var r=this._lbx._checking;this._lbx._checking=!0,this.selectedItem=this._defaultItem,this._lbx._checking=r}var l=this._subMenu;l&&(l.isDroppedDown=!1)}},t.prototype._updateHoverEvents=function(){var e=this.hostElement,t=this.dropDown,i=this.addEventListener.bind(this),n=this.removeEventListener.bind(this),o="mouseleave";n(e,"mouseenter",this._hoverEnterBnd),n(e,o,this._hoverLeaveBnd),n(t,"mouseover",this._hoverOverBnd),n(t,o,this._hoverLeaveBnd),this._openOnHover&&(i(e,"mouseenter",this._hoverEnterBnd),i(t,"mouseover",this._hoverOverBnd),this._closeOnLeave&&(i(e,o,this._hoverLeaveBnd),i(t,o,this._hoverLeaveBnd)))},t.prototype._getSubItems=function(e){var t=this.subItemsPath,i=e&&t?e[t]:null;return(0,s.isArray)(i)&&i.length?i:null},t.prototype._formatMenuItem=function(e,t){var i=t.item;this._getSubItems(t.data)?((0,s.addClass)(i,$.subItems),(0,s.setAttribute)(i,"aria-expanded",!1)):"-"==i.innerHTML&&(i.innerHTML="",(0,s.addClass)(i,s.UtilitesClsNames.separator),(0,s.setAttribute)(i,"role","separator"))},t.prototype._keydown=function(i){if(!i.defaultPrevented){var n=this._getKeyCode(i);if(this.isDroppedDown)switch(n){case s.Key.Tab:this.isDroppedDown&&(this.isDroppedDown=!1,this.containsFocus()||this.focus(),i.preventDefault());break;case s.Key.Enter:case s.Key.Right:if(this._showSubMenu())return void i.preventDefault();break;case s.Key.Left:var o=s.Control.getControl(this.owner);if(o instanceof t){var r=o.dropDown,l=o.selectedIndex,a=l>-1?r.children[l]:r;return(0,s.setAttribute)(a,"aria-expanded",!1),a.removeAttribute("aria-owns"),a.focus(),void i.preventDefault()}}n==s.Key.Enter&&(this.isDroppedDown?this.selectedIndex>-1&&this._raiseCommand():(this.isDroppedDown=!0,i.preventDefault()))}e.prototype._keydown.call(this,i)},t.prototype._dropDownClick=function(t){if(!t.defaultPrevented&&t.target!=this.dropDown){if(this._clearHover(t),this._showSubMenu())return void t.preventDefault();this.selectedIndex>-1&&this._raiseCommand()}e.prototype._dropDownClick.call(this,t)},t.prototype._showSubMenu=function(){var e=this,i=this._getSubItems(this.selectedItem);if(!i)return null;var n=this.dropDown.children[this.selectedIndex],o=n.getBoundingClientRect(),r=new s.Point(o.right,o.top);if(0==o.height)return null;var l=this.rightToLeft||"rtl"==this.dropDown.getAttribute("dir");l&&(r.x=o.left);var a=this._subMenu;a&&(a.isDroppedDown=!1),a=new t(document.createElement("div"),{owner:this.hostElement,itemsSource:i,autoSelectOnFocus:this._aFEnabledItem,itemClicked:function(t,i){e.itemClicked.raise(t,i)},formatItem:function(t,i){e.formatItem.raise(t,i)}}),n&&((0,s.setAttribute)(n,"aria-expanded",!0),(0,s.setAttribute)(n,"aria-owns",a.dropDown.id));var h=this.collectionView,c=a.collectionView;h&&h.filter&&c&&!c.filter&&(c.filter=h.filter),"displayMemberPath,selectedValuePath,isContentHtml,command,commandPath,commandParameterPath,maxDropDownWidth,maxDropDownHeight,dropDownCssClass,isAnimated,subItemsPath,openOnHover,closeOnLeave".split(",").forEach((function(t){a[t]=e[t]}));var u=a.dropDown;return(0,s.setAttribute)(u,"dir",l?"rtl":null),a.show(r),u[s.Control._OWNR_KEY]=this.dropDown,a},t.prototype._raiseCommand=function(e){var i=this.selectedItem,n=this._getSubItems(i),o=this._getCommand(i);if(o&&!n){var r=this._getCommandParm(i);if(!this._canExecuteCommand(o,r))return;this._executeCommand(o,r)}var l=this.headerPath;if(l){var a=new s.Binding(l).getValue(i);a=null==a?"":a.toString(),this.header=this.isContentHtml?a:(0,s.escapeHtml)(a)}if(this.onItemClicked(e),this.containsFocus()){for(var h=this;h&&h.owner;){var c=s.Control.getControl(h.owner);if(!(c instanceof t))break;h=c}var u=h.owner;if(!u&&h.dropDown&&(u=h.dropDown[s.Control._OWNR_KEY]),h.isDroppedDown=!1,h.focus(),!h.containsFocus()&&u instanceof HTMLElement&&u.offsetHeight)if(s.isIE){var d=document.documentElement,p=d.scrollLeft,f=d.scrollTop;u.focus(),d.scrollLeft=p,d.scrollTop=f}else u.focus()}},t.prototype._getCommand=function(e){return(e&&this._cmdPath?e[this._cmdPath]:null)||this._cmd},t.prototype._getCommandParm=function(e){var t=this._cmdParamPath;return e&&t?e[t]:e},t.prototype._executeCommand=function(e,t){e&&!(0,s.isFunction)(e)&&(e=e.executeCommand),(0,s.isFunction)(e)&&e(t)},t.prototype._canExecuteCommand=function(e,t){if(e){var i=e.canExecuteCommand;if((0,s.isFunction)(i))return i(t)}return!0},t.prototype._enableDisableItems=function(){if(this.collectionView&&(this._cmd||this._cmdPath))for(var e=this.collectionView.items,t=0;t<e.length;t++){var i=e[t],n=this._getCommand(i);if(n){var o=this._lbx.hostElement.children[t],r=this._getCommandParm(i);(0,s.toggleClass)(o,s.ControlStateClsNames.disabled,!this._canExecuteCommand(n,r))}}},t.prototype._clearHover=function(e){this._toHover&&clearTimeout(this._toHover),this._toHover=null,t._evtHover=e},t.prototype._isTargetDisabled=function(e){return(0,s.hasClass)(e.target,s.ControlStateClsNames.disabled)},t.prototype._hoverEnter=function(e){var t=this;this._clearHover(e),this._toHover=setTimeout((function(){t._toHover=null,t.isDroppedDown=!0}),s.Control._HOVER_DELAY)},t.prototype._hoverOver=function(e){var t=this;this._clearHover(e),this._toHover=setTimeout((function(){t._toHover=null;var i=t.listBox.indexOf(e.target);i>-1&&!(0,s.hasClass)(e.target,s.ControlStateClsNames.disabled)&&(t.selectedIndex=i,t._subMenu=t._showSubMenu())}),s.Control._HOVER_DELAY)},t.prototype._hoverLeave=function(e){var i=this;this._clearHover(e),this.isDroppedDown&&(this._toHover=setTimeout((function(){var n=(e=t._evtHover)?document.elementFromPoint(e.clientX,e.clientY):null,o=(0,s.closest)(n,"."+X.hostElement+"."+$.menuItems),r=i._subMenu;o||(0,s.contains)(i.hostElement,n,!0)||(i.isDroppedDown=!1,r&&(r.isDroppedDown=!1))}),s.Control._LEAVE_DELAY))},t.prototype._setIsDisabled=function(t){e.prototype._setIsDisabled.call(this,t),this.hostElement.tabIndex=this.isDisabled?-1:this._orgTabIndex},t.prototype._setTabOrder=function(t){e.prototype._setTabOrder.call(this,t),this.hostElement.tabIndex=this.isDisabled?-1:this._orgTabIndex},t._ctrlTemplate="",t}(Ie);(0,s._addCultureInfo)("InputTime",{ariaLabels:{inputTime:"Input Time",inputTimeInput:"InputTime Input"}});var Te=function(e){function t(t,i){var n=e.call(this,t)||this;if(n._format="t",n._inputElementAriaLabel=s.culture.InputTime.ariaLabels.inputTimeInput,n.valueChanged=new s.Event,(0,s.addClass)(n.hostElement,J.hostElement),n.isEditable=!0,n._value=s.DateTime.newDate(),n._min=n._max=null,n._msk=new s._MaskProvider(n._tbx),(0,s.isIE9)()||(n._tbx.type="tel"),"INPUT"==n._orgTag){var o=n._tbx.getAttribute("value");o&&(n.value=s.Globalize.parseDate(o,"HH:mm:ss"))}return n.step=15,n.autoExpandSelection=!0,n.initialize(i),n._commitText(),n._updateInputAriaLabel(),n}return k(t,e),Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate=Ie.controlTemplate),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputElement",{get:function(){return this._tbx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputType",{get:function(){return this._tbx.type},set:function(e){this._tbx.type=(0,s.asString)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){(e=(0,s.asDate)(e,!this.isRequired))&&(e=this._clamp(e)),this._setText(e?s.Globalize.format(e,this.format):"",!0,!0),this.selectedItem&&this.selectedItem.value&&(e=s.DateTime.fromDateTime(e,this.selectedItem.value)),e==this._value||s.DateTime.equals(e,this._value)||(this._value=e,this.onValueChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._tbx.value},set:function(e){e==this.text||!this.text&&this.isRequired||(this._setText(e,!0),this._commitText()),!this.text&&this.isRequired&&(this.selectedIndex=this._oldIndexToBeRestoredOnBlur<0?0:this._oldIndexToBeRestoredOnBlur)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this._min},set:function(e){this._min=(0,s.asDate)(e,!0),this.isDroppedDown=!1,this._updateItems()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},set:function(e){this._max=(0,s.asDate)(e,!0),this.isDroppedDown=!1,this._updateItems()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"step",{get:function(){return this._step},set:function(e){e!=this.step&&(this._step=(0,s.asNumber)(e,!0),this.isDroppedDown=!1,this._updateItems())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){return this._format},set:function(e){e!=this.format&&(this._format=(0,s.asString)(e),this._tbx.value=s.Globalize.format(this.value,this.format),(0,s.hasItems)(this.collectionView)&&this._updateItems())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._msk.mask},set:function(e){this._msk.mask=(0,s.asString)(e)},enumerable:!0,configurable:!0}),t.prototype.onLostFocus=function(){e.prototype.onLostFocus.call(this)},t.prototype.onValueChanged=function(e){this.valueChanged.raise(this,e)},t.prototype.onItemsSourceChanged=function(t){e.prototype.onItemsSourceChanged.call(this,t),this._hasCustomItems=null!=this.itemsSource},t.prototype.refresh=function(t){void 0===t&&(t=!0),e.prototype.refresh.call(this,t),this.hostElement&&(this._msk.refresh(),this._tbx.value=s.Globalize.format(this.value,this.format),this._updateItems())},t.prototype.onSelectedIndexChanged=function(t){if(this.selectedIndex>-1&&!this._settingText){var i=this.value?this.value:s.DateTime.newDate(),n=null!=this.selectedItem.value?this.selectedItem.value:s.Globalize.parseDate(this.text,this.format,this.value);this.value=s.DateTime.fromDateTime(i,n)}e.prototype.onSelectedIndexChanged.call(this,t)},t.prototype._clamp=function(e){return null!=this._min&&this._getTime(e)<this._getTime(this._min)&&(e=s.DateTime.fromDateTime(e,this._min)),null!=this._max&&this._getTime(e)>this._getTime(this._max)&&(e=s.DateTime.fromDateTime(e,this._max)),e},t.prototype._wheel=function(t){if(this.handleWheel&&!t.defaultPrevented&&!this.isDroppedDown&&this.value&&this._canChangeValue()&&this.containsFocus()&&this.isEditable){var i=this._tbx,n=i.selectionStart,o=i.selectionEnd,r=(0,s.clamp)(-t.deltaY,-1,1),l=(this.value,s.culture.Globalize.calendar.patterns[this.format]);null==l&&(l=this.format);var a=l.match((0,s.getSpecialCharsRegex)());if(o-n===i.value.length&&(0,s.isNumber)(this.step)&&this.step>0){var h=s.DateTime.addMinutes(this.value,this.step*-r);h=this._clamp(h),this.value=h,this.selectAll()}else this._updateTimeValue(r,a,l);t.preventDefault()}e.prototype._wheel.call(this,t)},t.prototype._updateInputSelection=function(t){if(this._delKey)e.prototype._updateInputSelection.call(this,t);else{for(var i=this._tbx.value;t<i.length&&!i[t].match(/[a-z0-9]/i);)t++;(0,s.setSelectionRange)(this._tbx,t,this._tbx.value.length)}},t.prototype._updateItems=function(){if(!this._hasCustomItems){var e=[],t=new Date,i=new Date(t.getFullYear(),t.getMonth(),t.getDate()),n=new Date(t.getFullYear(),t.getMonth(),t.getDate(),23,59,59),o=this.step;if(this.min&&i.setHours(this.min.getHours(),this.min.getMinutes(),this.min.getSeconds()),this.max&&n.setHours(this.max.getHours(),this.max.getMinutes(),this.max.getSeconds()),(0,s.isNumber)(o)&&o>=1)for(var r=i;r<=n;r=s.DateTime.addMinutes(r,o))e.push({value:r,text:s.Globalize.format(r,this.format)});var l=this.value;this._settingText=!0,this.displayMemberPath="text",this.selectedValuePath="text",this.itemsSource=e,this._hasCustomItems=!1,this._settingText=!1,!l&&this.isRequired||(this.value=l)}},t.prototype._getTime=function(e){return 3600*e.getHours()+60*e.getMinutes()+e.getSeconds()},t.prototype._getText=function(){var e=s.Globalize.format,t=this._format;return e(this.value,t)},t.prototype._canChangeValue=function(){return!this.isReadOnly&&!this.isDisabled},t.prototype.getSeconds=function(e){return 3600*e.getHours()+60*e.getMinutes()+e.getSeconds()},t.prototype._keydown=function(t){if(!(t.defaultPrevented||t.altKey||t.ctrlKey||t.metaKey)){if(this._isHiddenEditor())return;switch(t.keyCode){case s.Key.Enter:this._commitText(),this.selectAll();break;case s.Key.Escape:this.text=s.Globalize.format(this.value,this.format),this.selectAll();break;case s.Key.Up:case s.Key.Down:if(!this.isDroppedDown&&this.value&&this._canChangeValue()&&this.isEditable){var i=this._tbx,n=i.selectionStart,o=i.selectionEnd,r=t.keyCode==s.Key.Up?1:-1,l=s.culture.Globalize.calendar.patterns[this.format];null==l&&(l=this.format);var a=l.match((0,s.getSpecialCharsRegex)());if(o-n==i.value.length)e.prototype._keydown.call(this,t);else{if(!(1==r&&(null===this.max||this.getSeconds(this.value)<this.getSeconds(this.max))||-1==r&&(null===this.min||this.getSeconds(this.value)>this.getSeconds(this.min))))return;this._updateTimeValue(r,a,l)}t.preventDefault()}}}e.prototype._keydown.call(this,t)},t.prototype._updateTimeValue=function(e,t,i){var n=this._tbx,o=n.selectionStart,r=n.value,l=this.value,a={},h={},c=0,u=0,d=0,p=[],f=[],_=n.value.match((0,s.getSpecialCharsRegex)());null==t||null==_?(p=[this.format],f=["0"],t=[""]):(t.forEach((function(e,n){var o=e.replaceAll('"',""),s=i.substring(c),l=r.substring(u),d=s.indexOf(e),p=l.indexOf(o),f=s.substring(0,d);a[f]=c,h[f]=u,c=c+d+e.length,u=u+p+o.length,n==t.length-1&&-1!=p&&(f=i.substring(c),a[f]=c,h[f]=u)})),p=Object.keys(a),f=Object.values(h));var g=f.filter((function(e){return o>=parseInt(e.toString())}));g.length>0&&(d=g.length-1);var m=p[d];-1!=m.indexOf("h")||-1!=m.indexOf("H")?l=s.DateTime.addHours(this.value,e):-1!=m.indexOf("m")?l=s.DateTime.addMinutes(this.value,e):-1!=m.indexOf("s")?l=s.DateTime.addSeconds(this.value,e):-1!=m.indexOf("t")&&(l=this.value.getHours()>=12?s.DateTime.addHours(this.value,-12):s.DateTime.addHours(this.value,12)),l.getDate()!=(new Date).getDate()&&(l=s.DateTime.fromDateTime(new Date,l)),this.value=l,this._reselectText(t,d)},t.prototype._reselectText=function(e,t){var i=this._getText(),n=this._tbx,o=0,r=-1,l=-1;e.forEach((function(e,n){var s=e.replaceAll('"',""),a=i.substring(o),h=a.indexOf(s),c=a.substring(0,h),u=""==c?a.length:c.length;n==t&&-1==r&&(l=(r=o)+u),o=o+h+s.length})),-1==r&&(r=o,l=n.value.length),(0,s.setSelectionRange)(n,r,l)},t.prototype._commitText=function(){if(this.text||this.isRequired){var e=this.value?s.Globalize.format(this.value,this.format):"";if(this.text!=e){var t=this.selectedItem&&this.selectedItem.value?this.selectedItem.value:s.Globalize.parseDate(this.text,this.format,this.value);t?(s.DateTime.sameTime(t,this._clamp(t))||this.onInvalidInput(new s.CancelEventArgs))&&(this.value=s.DateTime.fromDateTime(this.value,t)):this.onInvalidInput(new s.CancelEventArgs)&&(this.text=e)}}else this.value=null},t.prototype._copy=function(e,t){return"text"===e&&((t||"").toString()!==this.text&&this._setText(t,!0),!0)},t.prototype.getAriaLabelForScreenReader=function(){return s.culture.InputTime.ariaLabels.inputTime},t.prototype._input=function(e){this._draggingText&&(""===this.text?this._emptyValueAction=!0:this._emptyValueAction=!1),this._composing&&(this._composing=!1),this._setText(""!=this._textIsComposing?this._textIsComposing:this.text,!1),""!=this.text&&(this._emptyValueAction=!1),this._draggingText=!1},t._ctrlTemplate="",t}(Ie);(0,s._addCultureInfo)("InputDateTime",{ariaLabels:{inputDateTimeInput:"InputDateTime Input",tglDate:"Toggle Calendar",tglTime:"Toggle Time List"}});var Pe=function(e){function t(t,i){var n=e.call(this,t)||this;n._inputAriaLabel=s.culture.InputDateTime.ariaLabels.inputDateTimeInput,(0,s.addClass)(n.hostElement,q.hostElement);var o=s.culture.InputDateTime.ariaLabels;(0,s.setAriaLabel)(n._btn,o.tglDate),(0,s.setAriaLabel)(n._btnTm,o.tglTime),n._updateInputAriaLabel(),n.value=new Date,n.format="g",n._inputTime=new Te(document.createElement("div"),{valueChanged:function(e){var t=n.rangeEnd;n.value=s.DateTime.fromDateTime(n.value,e.value),n.calendar._rngMode()&&t&&(n.rangeEnd=s.DateTime.fromDateTime(t,e.value))},isDroppedDownChanged:function(e){e.listBox.containsFocus()&&n.inputElement.focus(),n._selectAll()},keyActionPrintCharacters:0,keyActionTab:0});var r=n.addEventListener.bind(n);n._btnTm=n.hostElement.querySelector('[wj-part="btn-tm"]'),r(n._btnTm,"mousedown",(function(e){n._btnclick(e)})),n._ddDate=n._dropDown;var l=n._ddTime=n._inputTime.dropDown;return r(l,"keydown",n._keydown.bind(n),!0),r(l,"blur",(function(){n._updateFocusState()}),!0),r(l,"click",(function(e){e.defaultPrevented||e.target!=l&&n.hostElement.focus()}),!0),n.initialize(i),n._tbx.value!==n._oldText&&n._commitText(),n}return k(t,e),Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate='<div class="'+s.ControlClsNames.template+'"><div class="'+N.input+'"><div class="'+N.inputGroup+" "+N.inputBtnVisible+'"><input wj-part="input" type="text" class="'+s.InputFormElementsClsNames.formControl+'"/><span class="'+N.inputGroupBtn+'"><button wj-part="btn" class="'+s.InputFormElementsClsNames.btn+" "+s.InputFormElementsClsNames.btnDefault+'" tabindex="-1"><span class='+s.GlyphClsNames.calendar+'></span></button><button wj-part="btn-tm" class="'+s.InputFormElementsClsNames.btn+" "+s.InputFormElementsClsNames.btnDefault+'" tabindex="-1"><span class='+s.GlyphClsNames.clock+'></span></button></span></div></div><div wj-part="dropdown" class="'+s.ControlClsNames.content+" "+j.dropDownPanel+'"></div></div>'),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeMin",{get:function(){return this._inputTime.min},set:function(e){this._inputTime.min=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeMax",{get:function(){return this._inputTime.max},set:function(e){this._inputTime.max=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeFormat",{get:function(){return this._inputTime.format},set:function(e){this._inputTime.format=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeStep",{get:function(){return this._inputTime.step},set:function(e){this._inputTime.step=e,this._btnTm.style.display=(0,s.isNumber)(e)&&e>0?"":"none"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputTime",{get:function(){return this._inputTime},enumerable:!0,configurable:!0}),t.prototype._fromDateTime=function(e){return e},t.prototype._btnclick=function(t){var i=(0,s.closest)(t.target,"button")==this._btn?this._ddDate:this._ddTime;this._setDropdown(i),e.prototype._btnclick.call(this,t)},t.prototype.dispose=function(){this._setDropdown(this._ddDate),e.prototype.dispose.call(this),this._inputTime.dispose()},t.prototype.refresh=function(t){void 0===t&&(t=!0),this._inputTime.refresh(),e.prototype.refresh.call(this,t)},t.prototype._updateBtn=function(){e.prototype._updateBtn.call(this),this._btnTm&&(this._btnTm.tabIndex=this._btn.tabIndex,this._btnTm.parentElement.style.display=this._btn.style.display)},t.prototype._setDropdown=function(e){if(this._dropDown==e)return!1;this.isDroppedDown&&(this.isDroppedDown=!1);var t=this.dropDownCssClass;return this.dropDownCssClass="",this._dropDown=e,this.dropDownCssClass=t,!0},t.prototype._updateDropDown=function(){var t=this._inputTime;this._dropDown==t.dropDown?(this._commitText(),e.prototype._updateDropDown.call(this),t.isRequired=this.isRequired&&null!=this.value,t.value=this.value,this.isDroppedDown&&t.listBox.showSelection()):e.prototype._updateDropDown.call(this)},t.prototype._mouseWheel=function(e){if(this.handleWheel&&!e.defaultPrevented&&!this.isDroppedDown&&this.containsFocus()&&null!=this.value&&this._canChangeValue()){var t=this._tbx,i=t.selectionStart,n=t.selectionEnd,o=(0,s.clamp)(-e.deltaY,-1,1),r=this.value,l=s.Globalize.getFullFormat(this.format);null==l&&(l=this.format);var a=l.match((0,s.getSpecialCharsRegex)());if(n-i===t.value.length&&null!=a||this.selectionMode==ae.Range){r=this.selectionMode==ae.Month?s.DateTime.addMonths(this.value,o):s.DateTime.addDays(this.value,o),this.value=r;var h=this._getText();(0,s.setSelectionRange)(t,0,h.length)}else(1==o&&(null===this.max||this.value<this.max)||-1==o&&(null===this.min||this.value>this.min))&&this._updateDateTimeValue(o,a,l);e.preventDefault()}},t.prototype._keydown=function(t){if(!(t.defaultPrevented||t.altKey||t.ctrlKey||t.metaKey)){if(this._isHiddenEditor())return;switch(t.keyCode){case s.Key.Up:case s.Key.Down:if(!this.isDroppedDown&&this.value&&this._canChangeValue()){var i=this._tbx,n=i.selectionStart,o=i.selectionEnd,r=(i.value,t.keyCode==s.Key.Up?1:-1),l=this.value,a=s.Globalize.getFullFormat(this.format);"g"==this.format&&a.includes("\u0433")&&(a=a.replace(/\"\u0433.\" /,"")),null==a&&(a=this.format);var h=a.match((0,s.getSpecialCharsRegex)());if(o-n===i.value.length&&null!=h||this.selectionMode==ae.Range){l=this.selectionMode==ae.Month?s.DateTime.addMonths(this.value,r):s.DateTime.addDays(this.value,r),this.value=l;var c=this._getText();(0,s.setSelectionRange)(i,0,c.length)}else(1==r&&(null===this.max||this.value<this.max)||-1==r&&(null===this.min||this.value>this.min))&&this._updateDateTimeValue(r,h,a);t.preventDefault()}}}e.prototype._keydown.call(this,t)},t.prototype._updateDateTimeValue=function(e,t,i){var n=this._tbx,o=n.selectionStart,r=n.value,l=this.value,a={},h={},c=0,u=0,d=0,p=[],f=[],_=n.value.match((0,s.getSpecialCharsRegex)());null==t||null==_?(p=[this.format],f=["0"],t=[""]):(t.forEach((function(e,n){var o=e.replaceAll('"',""),s=i.substring(c),l=r.substring(u);l.startsWith("\u0433.")&&(l=l.replace("\u0433. ",""),u+=3);var d=s.indexOf(e),p=l.indexOf(o);if(-1==p){var f=_[n];p=l.indexOf(f)}var g=s.substring(0,d);""!=g&&(a[g]=c,h[g]=u),c=c+d+e.length,u=u+p+o.length,n==t.length-1&&-1!==p&&(g=i.substring(c),a[g]=c,h[g]=u)})),p=Object.keys(a),f=Object.values(h));var g=f.filter((function(e){return o>=parseInt(e.toString())}));g.length>0&&(d=g.length-1);var m=new Date,b=new Date;null!==this.timeMax&&(m=new Date(this.value.getFullYear(),this.value.getMonth(),this.value.getDate(),this.timeMax.getHours(),this.timeMax.getMinutes(),this.timeMax.getSeconds())),null!==this.timeMin&&(b=new Date(this.value.getFullYear(),this.value.getMonth(),this.value.getDate(),this.timeMin.getHours(),this.timeMin.getMinutes(),this.timeMin.getSeconds()));var v=p[d];-1!=v.indexOf("d")?l=s.DateTime.addDays(this.value,e):-1!=v.indexOf("M")?l=s.DateTime.addMonths(this.value,e):-1!=v.indexOf("y")?l=s.DateTime.addYears(this.value,e):(1==e&&(null===this.timeMax||this.value<m)||-1==e&&(null===this.timeMin||this.value>b))&&(-1!=v.indexOf("h")||-1!=v.indexOf("H")?l=s.DateTime.addHours(this.value,e):-1!=v.indexOf("m")?l=s.DateTime.addMinutes(this.value,e):-1!=v.indexOf("s")?l=s.DateTime.addSeconds(this.value,e):-1!=v.indexOf("t")&&(l=this.value.getHours()>=12?s.DateTime.addHours(this.value,-12):s.DateTime.addHours(this.value,12)),(this.timeMax&&l>m||this.timeMin&&l<b)&&(l=this.value)),this.value=l,this._reselectText(t,d)},t.prototype._commitText=function(t,i){var n=this._tbx.value,o=s.Globalize.parseDate(n,this.format,this.value),r=new Date,l=new Date;o?(null!==this.timeMax&&(r=new Date(o.getFullYear(),o.getMonth(),o.getDate(),this.timeMax.getHours(),this.timeMax.getMinutes(),this.timeMax.getSeconds())),null!==this.timeMin&&(l=new Date(o.getFullYear(),o.getMonth(),o.getDate(),this.timeMin.getHours(),this.timeMin.getMinutes(),this.timeMin.getSeconds())),(this.timeMax&&o>r||this.timeMin&&o<l)&&(this.value=s.DateTime.fromDateTime(o,this.value)),e.prototype._commitText.call(this,t,i)):e.prototype._commitText.call(this,t,i)},t._ctrlTemplate="",t}(xe);(0,s._addCultureInfo)("AutoComplete",{ariaLabels:{autoCompleteInput:"AutoComplete Input",autoComplete:"Auto Complete"}});var Me=function(e){function t(t,i){var n=e.call(this,t)||this;return n._cssMatch=V.stateMatch,n._minLength=2,n._maxItems=6,n._itemCount=0,n._beginsWith=!1,n._delay=s.Control._SEARCH_DELAY,n._selItems=null,n._query="",n._inCallback=!1,n._srchProps=[],n._oldSelectedIndex=-1,n._inputElementAriaLabel=s.culture.AutoComplete.ariaLabels.autoCompleteInput,n._isBlurInput=!1,(0,s.addClass)(n.hostElement,O.hostElement),n._bsCollapse=!1,n.isEditable=!0,n.isRequired=!1,n.listBox.formatItem.addHandler(n._formatListItem,n),n._itemsSourceFnCallbackBnd=n._itemSourceFunctionCallback.bind(n),n.initialize(i),n._updateInputAriaLabel(),n}return k(t,e),Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate=Ie.controlTemplate),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minLength",{get:function(){return this._minLength},set:function(e){this._minLength=(0,s.asNumber)(e,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"beginsWithSearch",{get:function(){return this._beginsWith},set:function(e){this._beginsWith=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxItems",{get:function(){return this._maxItems},set:function(e){this._maxItems=(0,s.asNumber)(e,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"delay",{get:function(){return this._delay},set:function(e){this._delay=(0,s.asNumber)(e,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"searchMemberPath",{get:function(){return this._srchProp},set:function(e){this._srchProp=(0,s.asString)(e),this._srchProps=e?e.trim().split(/\s*,\s*/):[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemsSourceFunction",{get:function(){return this._itemsSourceFn},set:function(e){this._itemsSourceFn!==e&&(this._itemsSourceFn=(0,s.asFunction)(e),(0,s.isFunction)(this._itemsSourceFn)&&this.itemsSourceFunction(this.text,this.maxItems,this._itemsSourceFnCallbackBnd))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cssMatch",{get:function(){return this._cssMatch},set:function(e){this._cssMatch=(0,s.asString)(e)},enumerable:!0,configurable:!0}),t.prototype.onSelectedIndexChanged=function(t){this._settingText||e.prototype.onSelectedIndexChanged.call(this,t)},t.prototype._updateTbxAria=function(){e.prototype._updateTbxAria.call(this);var t=this._tbx;(0,s.setAttribute)(t,"aria-autocomplete","list")},t.prototype._keydown=function(t){if(!this._isHiddenEditor()){if(!t.defaultPrevented&&this.isDroppedDown)switch(t.keyCode){case s.Key.Up:case s.Key.Down:this.selectAll()}e.prototype._keydown.call(this,t)}},t.prototype._input=function(e){this._handleDragTextState(),this._handleComposingState(),this._updateComponentText(),this._updateEmptyValueFlag(),this._resetDragState()},t.prototype._commitText=function(e){var t=this;e&&this._composing&&this.isDroppedDown&&!(0,s.isFirefox)()&&!(0,s.isSafari)()&&""==this._textIsComposing&&(this._isBlurInput=!0,this.isDroppedDown=!1,setTimeout((function(){t.onLostFocus()}),this.delay+1)),e&&!this._composing&&((0,s.isFirefox)()||(0,s.isSafari)())&&(0,s.getActiveElement)()==this.inputElement&&this.onLostFocus()},t.prototype._setText=function(e){var t=this;if(this._isBlurInput&&0==this.text.length&&(this._tbx.value=e,this._isBlurInput=!1),this.trimText&&!this.containsFocus()&&"string"==typeof e&&(e=e.trim()),this._composing&&e!=this._oldText&&(this._oldText=e,this.onTextChanged()),!(this._inCallback||this._settingText||((0,s.isFirefox)()||(0,s.isSafari)())&&this._composing)){if(this._toSearch||(this._oldSelectedIndex=this.selectedIndex),this.selectedIndex>-1&&this._getDisplayText(void 0,void 0,!0)!=e&&(this._settingText=!0,this.selectedIndex=-1,this._settingText=!1),this._toSearch&&clearTimeout(this._toSearch),e!=this._oldText||e!=this.text){"string"!=typeof e&&(e="");var i=this._tbx,n=this._tbx.selectionStart;i.value!=e&&(i.value=e),this._isWheel&&this.containsFocus()&&this._updateInputSelection(n),this._oldText=e,this.onTextChanged();var o=this.collectionView;if(!e&&o){(this._query||this.selectedIndex<0)&&(this.isDroppedDown=!1),this._query=this._rxHighlight=null,o.filter=null;var r=this.itemsSourceFunction;if((0,s.isFunction)(r)&&(this.isDroppedDown=!1,r(this._query,this.maxItems,this._itemsSourceFnCallbackBnd)),this.isRequired&&!this.containsFocus()&&!Array.isArray(this._selItems)){var l=this._oldSelectedIndex>-1?this._oldSelectedIndex:0;this.selectedIndex=l}return void(-1==this.selectedIndex&&-1!=this._oldSelectedIndex&&this.onSelectedIndexChanged())}}if(e!=this._getDisplayText(void 0,void 0,!0)){!this.containsFocus()&&this.trimText&&(this.isRequired&&!this.text.trim().length?(l=this._oldSelectedIndex>-1?this._oldSelectedIndex:0,this.selectedIndex=l):this._tbx.value=this._tbx.value.trim());var a=!this.containsFocus()&&e.length<this.minLength;this.collectionView&&!this.containsFocus()&&(this.collectionView.filter=null);var h=this.indexOf(e,!0),c=this.indexOf(e,!1);if(a)return;if(!this.containsFocus()&&(!e||this.trimText&&!this.text.trim().length||null!=this.collectionView&&h<0&&c<0)&&this.isRequired&&!this.isEditable)(l=this._oldSelectedIndex>-1?this._oldSelectedIndex:(0,s.hasItems)(this.collectionView)?0:-1)!=this.selectedIndex&&(this.selectedIndex=l);else if((Array.isArray(this.itemsSource)||"function"==typeof this.itemsSourceFunction)&&!this.containsFocus()&&e&&h<0&&(c<0||c!=h)&&!this.isRequired&&!this.isEditable)this._tbx.value="",this.selectedIndex=-1,this.onSelectedIndexChanged();else{var u=this._delay>0?setTimeout:function(e,t){return e()};this._pendingSearchFn=function(){t._toSearch=null;var i=t.text;if(!t._composing&&i.trim().length>=t._minLength&&i!=t._query){t._query=i.trim(),i=(0,s.escapeRegExp)(i);var n=(0,s.escapeHtml)(i.trim()),o=t.caseSensitiveSearch?"":"i";t._beginsWith||(o+="g"),t._rxSrch=t._beginsWith?new RegExp("^"+i+".*",o):new RegExp("(?=.*"+i.replace(/ /g,")(?=.*")+")",o),t._rxHighlight=t._beginsWith?new RegExp("^"+i,o):new RegExp("("+n.replace(/\s+/g,"|")+")",o);var r=t.itemsSourceFunction;(0,s.isFunction)(r)?r(t._query,t.maxItems,t._itemsSourceFnCallbackBnd):t._updateItems()}!e.trim().length&&!t.isEditable&&t.indexOf(e,!0)<0&&(t.selectedIndex=-1),-1==t.selectedIndex&&-1!=t._oldSelectedIndex&&t.onSelectedIndexChanged()},this._toSearch=u(this._pendingSearchFn,this._delay)}}else""===this._tbx.value&&e&&(this._tbx.value=e)}},t.prototype.onLostFocus=function(t){var i=!1;if(this.isRequired&&!this.isEditable&&this.text&&this.text.length>=this.minLength){i=!0;var n=this.indexOf(this.text,!0);n<0&&(n=this.indexOf(this.text,!1)),n>-1&&(this._oldSelectedIndex=n),n<0&&(this._oldSelectedIndex=0)}this._toSearch&&(clearTimeout(this._toSearch),this.text!==this._getDisplayText(void 0,void 0,!0)&&this._pendingSearchFn&&this._pendingSearchFn(),i=!1);var o=this.collectionView;o&&0===o.items.length&&(this._oldFilter=o.filter,o.filter=null),e.prototype.onLostFocus.call(this,t,this._oldSelectedIndex,i)},t.prototype.onGotFocus=function(t){this._toSearch||(this._oldSelectedIndex=this.selectedIndex),e.prototype.onGotFocus.call(this,t)},t.prototype.reset=function(){this._oldSelectedIndex=-1},t.prototype._itemSourceFunctionCallback=function(e){this._inCallback=!0;var t=(0,s.asCollectionView)(e||[]);if(t.moveCurrentToPosition(-1),this.itemsSource=t,this._inCallback=!1,this.containsFocus()){var i=this._tbx,n=i.selectionStart,o=i.selectionEnd,r=this.collectionView;this.isDroppedDown=null!=r&&r.items.length>0,(0,s.setSelectionRange)(i,n,o),this.refresh()}},t.prototype.onIsDroppedDownChanged=function(t){if(e.prototype.onIsDroppedDownChanged.call(this,t),this.containsFocus()&&!this.isTouching){var i=this.collectionView;if(this.selectedIndex<0&&i){var n=i.items,o=this.text;1==n.length&&n[0]==o?this.selectedIndex=0:(0,s.setSelectionRange)(this._tbx,o.length)}}this._query=""},t.prototype._updateItems=function(){var e=this.collectionView;if(e){this._inCallback=!0,e.beginUpdate(),this._itemCount=0,e.filter=this._filter.bind(this),e.moveCurrentToPosition(-1),e.endUpdate(),this._inCallback=!1;var t=e.items.length,i=this._tbx,n=i.selectionStart,o=i.selectionEnd;if(this.text.trim()||(t=0),this.isDroppedDown=t>0&&this.containsFocus(),t||this.isEditable||(this.selectedIndex=-1),1==t&&this.selectedIndex<0){var r=this._getItemText(e.items[0],!1),l=i.value;this.caseSensitiveSearch||(r=r.toLowerCase(),l=l.toLowerCase()),(r==l||this.trimText&&r.trim()==l)&&(this.selectedIndex=0)}this.isDroppedDown&&(0,s.setSelectionRange)(i,n,o),this.refresh()}},t.prototype._filter=function(e){if(this._itemCount>=this._maxItems&&this._query)return!1;var t=[this._getItemText(e,!1)];this._srchProps&&this._srchProps.forEach((function(i){var n=e[i];null!=n&&t.push(n)})),this.isContentHtml&&(t=t.map((function(e){return e.replace(/(<[^>]*>|&[^;]*;)/g,"")})));for(var i=0;i<t.length;i++)if(this._rxSrch.test(t[i]))return this._itemCount++,!0;return!1},t.prototype._getItemText=function(e,t){var i=e?e.toString():"",n=t&&this.headerPath?this._pathHdr:this._lbx._pathDisplay;return n&&(i=null!=(i=n.getValue(e))?i.toString():""),i},t.prototype._formatListItem=function(e,t){var i=this;this._cssMatch&&this._rxHighlight&&this._query&&(t.item.innerHTML=t.item.innerHTML.replace(this._rxHighlight,(function(e,t,n,o){return i._enclosed(o,n,"<",">")||i._enclosed(o,n,"&",";")?e:'<span class="'+i._cssMatch+'">'+e+"</span>"})))},t.prototype._enclosed=function(e,t,i,n){for(var o=t;o>=0&&e[o]!=n;o--)if(e[o]==i)for(var r=t;r<e.length&&e[r]!=i;r++)if(e[r]==n)return!0;return!1},t.prototype._wheel=function(t){e.prototype._wheel.call(this,t)},t.prototype.getAriaLabelForScreenReader=function(){return s.culture.AutoComplete.ariaLabels.autoComplete},t.prototype._hasCustomFormatItem=function(){return this.formatItem.getHandler.length>1},t._ctrlTemplate="",t}(Ie);(0,s._addCultureInfo)("MultiAutoComplete",{ariaLabels:{multiAutoCompleteInput:"MultiAutoComplete Input"}});var Ae=function(e){function t(t,i){var n=e.call(this,t)||this;return n._maxSelItems=null,n._lastInputValue="",n._selPath=new s.Binding(null),n._notAddItm=!1,n._inputElementAriaLabel=s.culture.MultiAutoComplete.ariaLabels.multiAutoCompleteInput,n.selectedItemsChanged=new s.Event,(0,s.addClass)(n.hostElement,Z.hostElement),n._wjTpl=n.hostElement.querySelector("."+s.ControlClsNames.template),n._wjInput=n.hostElement.querySelector("."+N.input),n.showDropDownButton=!1,n._selItems=[],n.initialize(i),n.addEventListener(n.hostElement,"keyup",n._keyup.bind(n),!0),n.addEventListener(window,"resize",n._adjustInputWidth.bind(n)),n.addEventListener(n._tbx,"focus",(function(){n._itemOff()})),n._addHelperInput(),n._initSeltems(),n.listBox.itemsChanged.addHandler((function(){if(-1!==n.selectedIndex){var e=n.collectionView;(e&&("CollectionView"==e.constructor.name||"ODataVirtualCollectionView"==e.constructor.name)||e.virtualization)&&(n.selectedIndex=-1)}})),n._refreshHeader(),n._updateTabIndex(),n._updateInputAriaLabel(),n}return k(t,e),Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate=Me.controlTemplate),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showDropDownButton",{set:function(e){this._showBtn=!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxSelectedItems",{get:function(){return this._maxSelItems},set:function(e){this._maxSelItems!=e&&(this._maxSelItems=(0,s.asNumber)(e,!0),this._updateMaxItems(),this._refreshHeader(),this._clearSelIndex())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedMemberPath",{get:function(){return this._selPath.path},set:function(e){(e=(0,s.asString)(e))!==this.selectedMemberPath&&(this._selPath.path=e,this._initSeltems(),this._refreshHeader(),this.onSelectedItemsChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedItems",{get:function(){return this._selItems},set:function(e){e=Array.from(new Set(e));var t=this._selItems===e;if(t||null==this._selItems||null==e||this._selItems.length!==e.length||(t=this._selItems.every((function(t,i){return t===e[i]}))),this._selItems=(0,s.asArray)(e),!t){if(this.selectedMemberPath&&""!==this.selectedMemberPath&&this._selItems)for(var i=0;i<this._selItems.length;i++){var n=this._selItems[i];this._setSelItem(n,!1)}this._updateMaxItems(),this.onSelectedItemsChanged(),this._refreshHeader(),this._clearSelIndex()}},enumerable:!0,configurable:!0}),t.prototype.onSelectedItemsChanged=function(e){this.selectedItemsChanged.raise(this,e)},t.prototype.onIsDroppedDownChanged=function(t){!this.isDroppedDown&&this.selectedIndex>-1&&!this._notAddItm&&this._addItem(!0),this._notAddItm=!1,e.prototype.onIsDroppedDownChanged.call(this,t)},t.prototype.refresh=function(t){void 0===t&&(t=!0),e.prototype.refresh.call(this,t),this.hostElement&&(this._initSeltems(),this.isDroppedDown||this._refreshHeader())},t.prototype._keydown=function(t){if(!this.isReadOnly){if(!t.defaultPrevented)switch(t.keyCode){case s.Key.Back:this._lastInputValue=this._tbx.value;break;case s.Key.Enter:this._itemOff(),this._addItem(!0),(0,s.isIE)()&&(0,s.setSelectionRange)(this._tbx,this._tbx.textContent.length,this._tbx.textContent.length);break;case s.Key.Tab:this.isDroppedDown?(this._addItem(!1),this._tbx.value="",this._lbx.selectedIndex=-1,this.isDroppedDown=!1,this.containsFocus()||this.focus(),t.preventDefault()):this._updateFocus();break;case s.Key.Space:if(""!==this._tbx.value)return;this.isDroppedDown||this._tbx.disabled||(this.isDroppedDown=!0,this._clearSelIndex());break;case s.Key.Escape:this.isDroppedDown&&(this._notAddItm=!0);break;case s.Key.Left:this._itemOn(!this.rightToLeft);break;case s.Key.Right:this._itemOn(!!this.rightToLeft);break;case s.Key.Up:case s.Key.Down:var i=(0,s.getActiveElement)();if(t.altKey){if(this._tbx==i)return this.isDroppedDown=!this.isDroppedDown,this.isDroppedDown||this._tbx.focus(),void t.preventDefault()}else if(this._tbx!==i)return;default:if(t.keyCode===s.Key.Back||t.keyCode===s.Key.Delete)return;this._itemOff(),null!=this._maxSelItems&&this._selItems.length>=this._maxSelItems&&t.preventDefault()}this._tbx.disabled||e.prototype._keydown.call(this,t)}},t.prototype._updateState=function(){e.prototype._updateState.call(this),this._wjTpl&&((0,s.hasClass)(this.hostElement,s.ControlStateClsNames.focused)||this._itemOff())},t.prototype._keyup=function(e){if(!this.isReadOnly&&!e.defaultPrevented)switch(e.keyCode){case s.Key.Back:0===this._tbx.value.length&&0===this._lastInputValue.length&&this._delItem(!1);break;case s.Key.Delete:this._delItem(!0)}},t.prototype._addHelperInput=function(){var e=document.createElement("input");e.type="text",e.tabIndex=-1,e.className=Z.tokenHelper,e.readOnly=!0,this._wjTpl.insertBefore(e,this._wjInput),this._helperInput=e},t.prototype._refreshHeader=function(){for(var e=this.hostElement.querySelectorAll("."+Z.token),t=0;t<e.length;t++)this._wjTpl.removeChild(e[t]);var i=this.selectedItems;if(i&&0!==i.length){for(t=0;t<i.length;t++)this._insertToken(i[t]);this._wjInput.style.cssFloat=this.rightToLeft?"right":"left",this._adjustInputWidth()}else this._wjInput.style.cssFloat=this.rightToLeft?"right":"left",this._adjustInputWidth()},t.prototype._insertToken=function(e){var t=this._getItemText(e,!0);this.isContentHtml||(t=(0,s.escapeHtml)(t)),this._wjTpl.insertBefore(this._createItem(t),this._wjInput)},t.prototype._updateMaxItems=function(){null!=this._maxSelItems&&this._selItems&&this._selItems.length>this._maxSelItems&&(this._selItems=this._selItems.slice(0,this._maxSelItems))},t.prototype._updateFocus=function(){var e=this,i=this._wjTpl.querySelector("."+t._clsActive);i?((0,s.removeClass)(i,t._clsActive),setTimeout((function(){e._tbx.focus()}))):this._clearSelIndex()},t.prototype._addItem=function(e){this.selectedItems.indexOf(this.selectedItem)>-1?this._clearSelIndex():this.selectedIndex>-1&&(this._updateSelItems(this.selectedItem,!0),this._refreshHeader(),e&&this._clearSelIndex(),this._disableInput(!0))},t.prototype._delItem=function(e){var i,n,o=this._wjTpl.querySelector("."+t._clsActive),r=!1;e&&!o||(o?(n=this._getItemIndex(o))>-1&&(i=this._selItems[n],r=!0):this._selItems.length>0&&(i=this._selItems[this._selItems.length-1],r=!0),r&&(this._updateSelItems(i,!1),this._refreshHeader(),this._clearSelIndex(),this._disableInput(!1)),this._tbx.focus())},t.prototype._updateSelItems=function(e,t){if(t){if(this._selItems&&0!==this._selItems.length||(this._selItems=[]),null!=this._maxSelItems&&this._selItems.length>=this._maxSelItems)return;this._selItems.push(e)}else{var i=this._selItems.indexOf(e);this._selItems.splice(i,1)}this._hasSelectedMemeberPath()&&this._setSelItem(e,t),this.onSelectedItemsChanged()},t.prototype._createItem=function(e){var i=this,n=document.createElement("div"),o=document.createElement("span"),r=document.createElement("a");return n.appendChild(o),n.appendChild(r),n.className=Z.token,o.className=Z.tokenLabel,o.innerHTML=e,r.className=Z.tokenClose,r.href="#",r.tabIndex=-1,r.text="\xd7",n.style.cssFloat=this.rightToLeft?"right":"left",this.addEventListener(n,"click",(function(e){i._helperInput.focus();var o=i._wjTpl.querySelector("."+t._clsActive);o&&(0,s.removeClass)(o,t._clsActive),(0,s.addClass)(n,t._clsActive),e.stopPropagation(),e.preventDefault()})),this.addEventListener(r,"click",(function(e){if(!i.isReadOnly){var t=i._getItemIndex(n);if(t>-1){var o=i._selItems[t];i._updateSelItems(o,!1)}i._wjTpl.removeChild(n),i._adjustInputWidth(),i._disableInput(!1),i._tbx.focus(),e.stopPropagation(),e.preventDefault()}})),n},t.prototype._itemOn=function(e){var i,n,o,r=(0,s.getActiveElement)();if((this._tbx!=r||0===this._tbx.value.length)&&0!==(i=this._wjTpl.querySelectorAll("."+Z.token)).length)if(n=this._wjTpl.querySelector("."+t._clsActive),o=this._getItemIndex(n),e){if(0===o)return;-1===o?((0,s.addClass)(i[i.length-1],t._clsActive),this._helperInput.focus()):((0,s.removeClass)(n,t._clsActive),(0,s.addClass)(i[o-1],t._clsActive),this._helperInput.focus())}else if(!e){if(-1===o)return;o!==i.length-1?((0,s.removeClass)(n,t._clsActive),(0,s.addClass)(i[o+1],t._clsActive),this._helperInput.focus()):((0,s.removeClass)(n,t._clsActive),this._tbx.focus())}},t.prototype._itemOff=function(){var e=this._wjTpl.querySelector("."+t._clsActive);e&&(0,s.removeClass)(e,t._clsActive)},t.prototype._initSeltems=function(){if(this.selectedMemberPath){this._selItems.splice(0,this._selItems.length);var e=this.collectionView;if(e)for(var t=0;t<e.sourceCollection.length;t++)this._getSelItem(t)&&this._selItems.push(e.sourceCollection[t])}},t.prototype._getSelItem=function(e){var t=this.collectionView,i=t?t.sourceCollection[e]:null;return!(!(0,s.isObject)(i)||!this.selectedMemberPath)&&this._selPath.getValue(i)},t.prototype._setSelItem=function(e,t){this.itemsSource,(0,s.isObject)(e)&&this._selPath.getValue(e)!=t&&this._selPath.setValue(e,t)},t.prototype._clearSelIndex=function(){this.selectedIndex=-1},t.prototype._hasSelectedMemeberPath=function(){return this.selectedMemberPath&&""!==this.selectedMemberPath},t.prototype._disableInput=function(e){null!=this._maxSelItems&&(this._selItems.length<this._maxSelItems?(this._tbx.disabled=!1,this._tbx.focus()):(this._tbx.disabled=!0,this.hostElement.focus()))},t.prototype._adjustInputWidth=function(){this._tbx.style.width="60px";var e,t=(0,s.getElementRect)(this.hostElement),i=(0,s.getElementRect)(this._tbx),n=getComputedStyle(this._tbx),o=parseInt(n.paddingLeft,10),r=parseInt(n.paddingRight,10);e=this.rightToLeft?i.left+i.width-t.left-o-r-8:t.left+t.width-i.left-o-r-8,this._tbx.style.width=e+"px"},t.prototype._getItemIndex=function(e){for(var t=this.hostElement.querySelectorAll("."+Z.token),i=0;i<t.length;i++)if(e===t[i])return i;return-1},t.prototype._setIsDisabled=function(t){e.prototype._setIsDisabled.call(this,t),this._updateTabIndex()},t.prototype._setTabOrder=function(e){this._orgTabIndex=e,this._updateTabIndex()},t.prototype._updateTabIndex=function(){var e=this.hostElement;this._tbx.tabIndex=this.isDisabled?-1:this._orgTabIndex,e.tabIndex=-1},t._clsActive=Z.tokenActive,t._ctrlTemplate="",t}(Me);(0,s._registerModule)("wijmo.input",n);var He,ze=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ke=function(){return(ke=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Oe=null;function Le(){return Oe}if((0,s.isSafari)()){var Fe=navigator.userAgent.match(/version\/([\d\.]+)/i);if(null!=Fe){var Be=Fe[1],Ve=(Fe=Be.match(/(\d+)/g)).map((function(e){return parseInt(e)}));Oe={full:Be,major:Ve[0],minor:Ve[1]}}}var je,Ne={alt:"wj-alt",bigHeader:"wj-big-header",bottomLeft:"wj-bottomleft",cell:"wj-cell",cellCheck:"wj-cell-check",cellIndex:"wj-cell-index",cells:"wj-cells",colFooters:"wj-colfooters",colGroup:"wj-colgroup",colHeaders:"wj-colheaders",elemCollapse:"wj-elem-collapse",elemCollapseSpace:"wj-elem-collapse-space",elemDropDown:"wj-elem-dropdown",elemPin:"wj-elem-pin",errorTip:"wj-error-tip",focusHeaderCell:"wj-focus-header-cell",frozen:"wj-frozen",frozenClone:"wj-frozen-clone",frozenCol:"wj-frozen-col",frozenColLeft:"wj-frozen-col-left",frozenColRight:"wj-frozen-col-right",frozenColRightEdge:"wj-frozen-col-right-edge",frozenRow:"wj-frozen-row",frozenRowBottom:"wj-frozen-row-bottom",gridEditor:"wj-grid-editor",gridIme:"wj-grid-ime",gridListBox:"wj-grid-listbox",group:"wj-group",groupSummary:"wj-group-summary",hasDropDown:"wj-hasdropdown",header:"wj-header",headerAlt:"wj-header-alt",hostElement:"wj-flexgrid",lastFrozenRow:"wj-last-frozen-row",lastFrozenRowBottom:"wj-last-frozen-row-bottom",lastVisibleCol:"wj-last-visible-col",lastVisibleRow:"wj-last-visible-row",marker:"wj-marker",marquee:"wj-marquee",multiline:"wj-multiline",new:"wj-new",radioMap:"wj-radio-map",row:"wj-row",rowHeaders:"wj-rowheaders",sortAsc:"wj-sort-asc",sortDesc:"wj-sort-desc",sortIndex:"wj-sort-index",topLeft:"wj-topleft",whiteSpacePre:"wj-whitespace-pre",wrap:"wj-wrap",noDataOverlay:"wj-no-data-overlay",screenReaderOnly:"wj-sr-only"},Ke={editorsContainer:"wj-grid-editors-container"};!function(e){e[e.AutoComplete=0]="AutoComplete",e[e.DropDownList=1]="DropDownList",e[e.RadioButtons=2]="RadioButtons",e[e.Menu=3]="Menu"}(je||(je={}));var Ge,We=function(){function e(e,t,i){this._keyPath="",this._displayPath="",this._sortByVal=!0,this._editable=!1,this._useFilter=!1,this._serK=!0,this.mapChanged=new s.Event,!(0,s.isArray)(e)||t||i||(e=e.map((function(e){return{value:e}})),t=i="value"),this._cv=(0,s.asCollectionView)(e),this._keyPath=(0,s.asString)(t,!1),this._displayPath=(0,s.asString)(i,!1),this._cv.collectionChanged.addHandler(this.onMapChanged,this)}return Object.defineProperty(e.prototype,"sortByDisplayValues",{get:function(){return this._sortByVal},set:function(e){this._sortByVal=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"serializeKeys",{get:function(){return this._serK},set:function(e){if((e=(0,s.asBoolean)(e))!==this._serK){var t=this._map,i=t&&t.size;this._map=null,this._serK=e,i&&this.onMapChanged(s.EventArgs.empty)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"collectionView",{get:function(){return this._cv},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedValuePath",{get:function(){return this._keyPath},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayMemberPath",{get:function(){return this._displayPath},enumerable:!0,configurable:!0}),e.prototype.getDataItem=function(e){var t=this;if(!this._map){var i=this._cv.sourceCollection,n=new s._Map(this.serializeKeys);(0,s.isArray)(i)&&this._keyPath&&i.forEach((function(e){var i=e[t._keyPath];n.has(i)||n.set(i,e)})),this._map=n}return this._map.get(e)},e.prototype.getDisplayValue=function(e){var t=this._displayPath,i=this.getDataItem(e);return t&&i?i[t]:e},e.prototype.getKeyValue=function(e,t){var i=this._displayPath,n=this._indexOf(e,i,t,!0);return n<0&&(n=this._indexOf(e,i,t,!1)),n>-1?this._cv.sourceCollection[n][this._keyPath]:null},e.prototype.getDisplayValues=function(e){var t=this;return this._cv&&this._displayPath?this._cv.items.map((function(e){return e[t._displayPath]})):[]},e.prototype.getFilteredItems=function(e){return this._cv?this._cv.items:[]},Object.defineProperty(e.prototype,"useFilter",{get:function(){return this._useFilter},set:function(e){this._useFilter=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),e.prototype.getKeyValues=function(){var e=this;return this._cv&&this._keyPath?this._cv.items.map((function(t){return t[e._keyPath]})):[]},Object.defineProperty(e.prototype,"isEditable",{get:function(){return this._editable},set:function(e){this._editable=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"search",{get:function(){return this._search},set:function(e){e&&(this._search=(0,s.asFunction)(e))},enumerable:!0,configurable:!0}),e.prototype.onMapChanged=function(e){this._map=null,this.mapChanged.raise(this,e)},e.prototype._indexOf=function(e,t,i,n){var o=-1,r=-1;if(this._cv&&t){var l=null!=e?e.toString():"";l&&i&&(e=(0,s.toPlainText)(l));for(var a=n?l:l.toLowerCase(),h=this._cv.sourceCollection,c=0;c<h.length;c++){var u=h[c],d=u?u[t]:void 0;if(null!=d&&null!=d||(d=""),i&&(0,s.isString)(d)&&(d=(0,s.toPlainText)(d)),d==e?o=c:n||d.length!=a.length||d.toLowerCase()!=a?null!=d&&d.toString()==l&&(o=c):o=c,o==c){if(!this._cv.filter||this._cv.filter(u))return o;r<0&&(r=o)}}}return r},e}(),qe=function(){function e(e,t,i,n){void 0===e&&(e=-1),void 0===t&&(t=-1),void 0===i&&(i=e),void 0===n&&(n=t),this.setRange(e,t,i,n)}return e.prototype.setRange=function(e,t,i,n){void 0===e&&(e=-1),void 0===t&&(t=-1),void 0===i&&(i=e),void 0===n&&(n=t),this._row=(0,s.asInt)(e),this._col=(0,s.asInt)(t),this._row2=(0,s.asInt)(i),this._col2=(0,s.asInt)(n)},Object.defineProperty(e.prototype,"row",{get:function(){return this._row},set:function(e){this._row=(0,s.asInt)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"col",{get:function(){return this._col},set:function(e){this._col=(0,s.asInt)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"row2",{get:function(){return this._row2},set:function(e){this._row2=(0,s.asInt)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"col2",{get:function(){return this._col2},set:function(e){this._col2=(0,s.asInt)(e)},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this._row,this._col,this._row2,this._col2)},e.prototype.copy=function(e){this.setRange(e._row,e._col,e._row2,e._col2)},Object.defineProperty(e.prototype,"rowSpan",{get:function(){return Math.abs(this._row2-this._row)+1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnSpan",{get:function(){return Math.abs(this._col2-this._col)+1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRow",{get:function(){return Math.min(this._row,this._row2)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRow",{get:function(){return Math.max(this._row,this._row2)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftCol",{get:function(){return Math.min(this._col,this._col2)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightCol",{get:function(){return Math.max(this._col,this._col2)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isValid",{get:function(){return this._row>-1&&this._col>-1&&this._row2>-1&&this._col2>-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSingleCell",{get:function(){return this._row==this._row2&&this._col==this._col2},enumerable:!0,configurable:!0}),e.prototype.contains=function(t,i){var n=(0,s.tryCast)(t,e);if(n)return n.topRow>=this.topRow&&n.bottomRow<=this.bottomRow&&n.leftCol>=this.leftCol&&n.rightCol<=this.rightCol;if((0,s.isInt)(t)&&(0,s.isInt)(i))return t>=this.topRow&&t<=this.bottomRow&&i>=this.leftCol&&i<=this.rightCol;throw"contains expects a CellRange or row/column indices."},e.prototype.containsRow=function(e){return(0,s.asInt)(e)>=this.topRow&&e<=this.bottomRow},e.prototype.containsColumn=function(e){return(0,s.asInt)(e)>=this.leftCol&&e<=this.rightCol},e.prototype.intersects=function(e){return this.intersectsRow(e)&&this.intersectsColumn(e)},e.prototype.intersectsRow=function(e){return e&&!(this.bottomRow<e.topRow||this.topRow>e.bottomRow)},e.prototype.intersectsColumn=function(e){return e&&!(this.rightCol<e.leftCol||this.leftCol>e.rightCol)},e.prototype.getRenderSize=function(e){var t=new s.Size(0,0);if(this.isValid){for(var i=this.topRow;i<=this.bottomRow;i++)e.rows[i]&&(t.height+=e.rows[i].renderSize);for(var n=this.leftCol;n<=this.rightCol;n++)e.columns[n]&&(t.width+=e.columns[n].renderSize)}return t},e.prototype.equals=function(t){return t instanceof e&&this._row==t._row&&this._col==t._col&&this._row2==t._row2&&this._col2==t._col2},e.prototype.combine=function(t){return t?new e(Math.min(this.topRow,t.topRow),Math.min(this.leftCol,t.leftCol),Math.max(this.bottomRow,t.bottomRow),Math.max(this.rightCol,t.rightCol)):this},e.prototype.toString=function(){return(0,s.format)("({row}, {col})-({row2}, {col2})",this)},e}();!function(e){e[e.None=0]="None",e[e.Cell=1]="Cell",e[e.ColumnHeader=2]="ColumnHeader",e[e.RowHeader=3]="RowHeader",e[e.TopLeft=4]="TopLeft",e[e.ColumnFooter=5]="ColumnFooter",e[e.BottomLeft=6]="BottomLeft"}(Ge||(Ge={}));var Ue,Ye,Je,Xe=function(){function e(e,t,i,n,o){this._offsetY=0,this._rng=new qe,this._g=(0,s.asType)(e,Rt),this._ct=(0,s.asInt)(t),this._rows=(0,s.asType)(i,Et),this._cols=(0,s.asType)(n,xt),this._e=(0,s.asType)(o,HTMLElement),this._vrb=new qe,this._uid=(0,s.uidGenerator)()}return Object.defineProperty(e.prototype,"activeCell",{get:function(){return this._activeCell},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"grid",{get:function(){return this._g},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellType",{get:function(){return this._ct},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewRange",{get:function(){return this._getViewRange()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._cols.getTotalSize()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._rows.getTotalSize()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columns",{get:function(){return this._cols},enumerable:!0,configurable:!0}),e.prototype.getCellData=function(e,t,i){return t=this._toIndex(t),this._getCellData(e,t,i)},e.prototype._getCellData=function(e,t,i){var n,o,r=this._g,l=this._rows[(0,s.asNumber)(e,!1,!0)];if(!l)return null;n=this._cols[(0,s.asNumber)(t,!1,!0)];var a=r?r._getBindingColumn(this,e,n):n,h=null,c=l instanceof wt;if(c&&l.dataItem instanceof s.CollectionViewGroup&&!r.childItemsPath&&(h=l.dataItem),a&&l&&a.binding&&l.dataItem&&!h?o=a._binding.getValue(l.dataItem):l._ubv&&(o=l._ubv[n._hash]),null==o&&(o=this._getSpecialData(e,l,t,n,a,c,h,o)),i){var u=a.dataMap||l.dataMap;if(this.cellType==Ge.Cell&&a._edt&&a._edt._ctl instanceof De&&o){var d=new s.Binding(a._edt._ctl.displayMemberPath),p=d&&(0,s.isArray)(o)?o.map((function(e){return d.getValue(e)})):o;if((0,s.isArray)(p)&&p.length>0){var f=p.join(", ");o=(0,s.format)(f||s.culture.MultiSelect.itemsSelected,{count:p.length})}}else this.cellType==Ge.Cell&&u&&(o=u.getDisplayValue(o));o=null!=o?s.Globalize.format(o,a.format||l.format):""}return o},e.prototype.setCellData=function(e,t,i,n,o,r){void 0===n&&(n=!0),void 0===o&&(o=!0),void 0===r&&(r=!1);var l=this._g,a=this._rows[(0,s.asNumber)(e,!1,!0)],h=(0,s.asNumber)(this._toIndex(t),!1,!0),c=this._cols[h],u=s.DataType;if(!a)return!1;var d=l?l._getBindingColumn(this,e,c):c;if(!d)return!1;var p=d.dataMap||a.dataMap;if(this._ct==Ge.Cell){var f=d.getIsRequired(a),_=d.isContentHtml||a.isContentHtml;if(!r&&p&&null!=i){var g=p.getKeyValue(i,_);if(null==g&&null==p.getDisplayValue(null)){if(p.getDisplayValue(i)!=i);else if(!p.isEditable||p.displayMemberPath!=p.selectedValuePath){if(""!=i||f||!l.commitEmptyEdits)return!1;i=null}}else{var m=l.getRowDataItem(e,h);if(p.useFilter&&m){var b=p.getFilteredItems(m);if(!(b.length>0))return!1;if(b.filter((function(e){return e[p._keyPath]==g})).length>0)i=g;else{var v=b.filter((function(e){return e[p.displayMemberPath]==i}));v.length>0&&(i=v[0][p._keyPath])}}else i=g}}var y=u.Object,w=d.dataType||a.dataType,C=this.getCellData(e,t,!1);if(this.cellType==Ge.Cell&&d._edt&&d._edt._ctl instanceof De&&i&&(w=u.Array),y=w||(0,s.getType)(C),null==i||""===i&&n&&!p){if(f||!l.commitEmptyEdits&&(null==C||""===C))return!1;y!=u.String&&(i=null),n=!1}if("NaN"==i&&Number.isNaN(C)&&!l.commitEmptyEdits)return!1;if(n){var x=d.format||a.format;if(x||y!=u.Date||(x="d"),d.mask&&(0,s.isString)(i)&&y!=u.String&&(i=i.replace(/_/g,"")),i=(0,s.changeType)(i,y,x,C),y!=u.Object&&(0,s.getType)(i)!=y)return!1}}if(a.dataItem&&d.binding){var E=d._binding,S=a.dataItem,I=E.getValue(S);if(i!==I&&(p&&!p.serializeKeys||!s.DateTime.equals(i,I))){var D=l.collectionView,R=D instanceof s.CollectionView&&S!=D.currentEditItem&&D.trackChanges,T=null;if(R&&(T=D._extend({},S)),E.setValue(S,i),R){var P=new s.NotifyCollectionChangedEventArgs(s.NotifyCollectionChangedAction.Change,S,D.items.indexOf(S));D.onCollectionChanged(P,T)}}}else a._ubv||(a._ubv={}),a._ubv[c._hash]=i;return o&&l&&l.invalidate(),!0},e.prototype._getRowData=function(e){var t,i=this._g,n=this._rows[(0,s.asNumber)(e,!1,!0)],o=null,r=[];if(null!=n){var l=null,a=n instanceof wt;a&&n.dataItem instanceof s.CollectionViewGroup&&!i.childItemsPath&&(l=n.dataItem);for(var h=!l&&n.dataItem,c=0;c<i.columns.length;c++){var u=t=this._cols[c];h&&i&&(u=i._getBindingColumn(this,e,t)),u.binding?o=u._binding.getValue(n.dataItem):n._ubv&&(o=n._ubv[t._hash]),null==o&&(o=this._getSpecialData(e,n,c,t,u,a,l,o)),r[c]=o}}return r},e.prototype._getSpecialData=function(e,t,i,n,o,r,l,a){var h=a,c=Ge;switch(this._ct){case c.TopLeft:case c.ColumnHeader:e!=this._rows.length-1&&o==n||(h=o.header);break;case c.ColumnFooter:if(r&&o.aggregate!=s.Aggregate.None){var u=this._g.collectionView;if(u){var d=(0,s.tryCast)(u,s.CollectionView);h=d?d.getAggregate(o.aggregate,o.binding):(0,s.getAggregate)(o.aggregate,u.items,o.binding)}}break;case c.Cell:var p=void 0,f=this._g._isServerCollectionView(this._g.collectionView);if(f&&(p=this._g.collectionView),t instanceof wt)if(i==this._cols.firstVisibleIndex)h=t.getGroupHeader();else if(f&&p.groupOnServer&&(p.groupLazyLoading||p._virtualization)){var _=t.dataItem;h=p.getGroupAggregate(o.binding,_,o.aggregate)}else l&&o.aggregate!=s.Aggregate.None&&(h=l.getAggregate(o.aggregate,o.binding,this._g.collectionView,this._g))}return h},e.prototype.getCellBoundingRect=function(e,t,i){var n=this._g,o=this.rows[e],r=this.columns[this._toIndex(t)],l=this.rows._frozenInternal<0&&this.rows.isFrozen(e)&&n._hasScroll(this.rows)?this._g._szClient.height+o._antipos:o.pos,a=this.columns._frozenInternal<0&&this.columns.isFrozen(Number(t))&&n._hasScroll(this.columns)?this._g._szClient.width+r._antipos:r.pos,h=new s.Rect(a,l,r.renderSize,o.renderSize);if(n.rightToLeft&&(h.left=this.hostElement.clientWidth-h.right,(0,s.isIE)()||(h.left-=n._root.offsetWidth-n._root.clientWidth)),!i){var c=this.hostElement.getBoundingClientRect();h.left+=c.left,h.top+=c.top-this._offsetY}return this.rows.isFrozen(e)&&(this.rows._frozenInternal>0||!this.rows.isFrozen(this.rows._firstVisible))&&(h.top-=n.scrollPosition.y),this.columns.isFrozen(Number(t))&&(h.left-=n.scrollPosition.x*(n.rightToLeft?-1:1)),h},e.prototype.getCellElement=function(t,i){var n=this.hostElement.children,o=this._g.rows._frozenInternal<0?n.length:Math.min(t+2,n.length);i=this._toIndex(i);for(var r=0;r<o;r++)for(var s=n[r].children,l=this._g.columns._frozenInternal<0?s.length:Math.min(i+2,s.length),a=0;a<l;a++){var h=s[a],c=h[e._INDEX_KEY];if(c&&(c.row==t&&c.col==i||c.rng&&c.rng.contains(t,i)))return h}return null},e.prototype.getSelectedState=function(e,t,i){var n=this._g,o=n.selectionMode,r=n._selHdl.selection,s=Ue,l=Ye;if(o==s.None)return l.None;switch(t=this._toIndex(t),this._ct){case Ge.Cell:if(n.activePanelType!=this.cellType){i||(i=n.getMergedRange(this,e,t)||new qe(e,t));for(var a=i.leftCol;a<=i.rightCol;a++)if(n.columns[a]&&n.columns[a].isSelected)return l.Selected;for(var h=i.topRow;h<=i.bottomRow;h++)if(n.rows[h].isSelected)return l.Selected;return l.None}i||(i=n.getMergedRange(this,e,t));var c=n._getAnchorCell();if(i){if(i.contains(r.row,r.col)){if(!n.anchorCursor||null==c)return n.showMarquee?l.Active:l.Cursor;if(e==c.y&&t==c.x||i.row==c.y&&i.col==c.x)return n.showMarquee?l.Active:l.Cursor}if(i.intersects(r)&&n.anchorCursor&&null!=c&&(e==c.y&&t==c.x||i.row==c.y&&i.col==c.x))return n.showMarquee?l.Active:l.Cursor;if(i.intersects(r)&&o!=s.ListBox)return l.Selected;for(a=i.leftCol;a<=i.rightCol;a++)if(n.columns[a]&&n.columns[a].isSelected)return l.Selected;for(h=i.topRow;h<=i.bottomRow;h++)if(n.rows[h].isSelected)return l.Selected}if(n.anchorCursor&&null!=c){if(e==c.y&&t==c.x)return n.showMarquee?l.Active:l.Cursor}else if(r.row==e&&r.col==t)return n.showMarquee?l.Active:l.Cursor;if(n.rows[e].isSelected||n.columns[t].isSelected)return l.Selected;if(o==s.MultiRange)for(var u=n._selHdl.extendedSelection,d=0;d<u.length;d++)if(u[d].contains(e,t)||i&&i.intersects(u[d]))return l.Selected;if(i)switch(o){case s.Row:case s.RowRange:if(i.containsRow(r.row))return l.Selected}return o==s.ListBox?l.None:(r=this._getAdjustedSelection(r)).containsRow(e)&&r.containsColumn(t)?l.Selected:l.None;case Ge.ColumnHeader:if(n.activePanelType==Ge.ColumnHeader){if((i=n.getMergedRange(this,e,t,!1))&&i.contains(r))return l.Cursor;if(r.row==e&&r.col==t)return l.Cursor}if(n.activePanelType==Ge.Cell&&n.showSelectedHeaders&pt.Column&&(n.columns[t].isSelected||r.containsColumn(t)||r.intersectsColumn(i))&&(i&&(e=i.bottomRow),e==this.rows.length-1))return l.Selected;break;case Ge.RowHeader:if(n.activePanelType==Ge.RowHeader){if((i=n.getMergedRange(this,e,t,!1))&&i.contains(r))return l.Cursor;if(r.row==e&&r.col==t)return l.Cursor}if(n.activePanelType==Ge.Cell&&n.showSelectedHeaders&pt.Row&&(n.rows[e].isSelected||r.containsRow(e)||r.intersectsRow(i))&&(i&&(t=i.rightCol),t==this.columns.length-1))return l.Selected;break;case Ge.TopLeft:if(n.activePanelType==Ge.TopLeft){if(i||(i=n.getMergedRange(this,e,t,!1)),i&&i.contains(r))return l.Cursor;if(r.row==e&&r.col==t)return l.Cursor}break;case Ge.BottomLeft:if(n.activePanelType===Ge.BottomLeft){if(i||(i=n.getMergedRange(this,e,t,!1)),i&&i.contains(r))return l.Cursor;if(r.row==e&&r.col==t)return l.Cursor}break;case Ge.ColumnFooter:if(n.activePanelType===Ge.ColumnFooter){if(i||(i=n.getMergedRange(this,e,t,!1)),i&&i.contains(r))return l.Cursor;if(r.row==e&&r.col==t)return l.Cursor}}return l.None},Object.defineProperty(e.prototype,"hostElement",{get:function(){return this._e},enumerable:!0,configurable:!0}),e.prototype.isRangeValid=function(e){return e&&e.isValid&&e.bottomRow<this.rows.length&&e.rightCol<this.columns.length},e.prototype.getNextVisibleRow=function(e){void 0===e&&(e=0);for(var t=Math.max(e,0);t<this.rows.length;t++)if(this.rows[t].isVisible)return t;return-1},e.prototype.getLastVisibleRow=function(e){void 0===e&&(e=1/0);for(var t=Math.min(e,this.rows.length-1);t>=0;t--)if(this.rows[t].isVisible)return t;return-1},e.prototype.getNextVisibleColumn=function(e){void 0===e&&(e=0);for(var t=Math.max(e,0);t<this.columns.length;t++)if(this.columns[t].isVisible)return t;return-1},e.prototype.getLastVisibleColumn=function(e){void 0===e&&(e=1/0);for(var t=Math.min(e,this.columns.length-1);t>=0;t--)if(this.columns[t].isVisible)return t;return-1},e.prototype._toIndex=function(e){if((0,s.isString)(e)&&(e=this._cols.indexOf(e))<0)throw"Invalid column name or binding.";return e},e.prototype._getAdjustedSelection=function(e){var t=this._g,i=this._rng,n=Ue;switch(t.selectionMode){case n.Cell:i.setRange(e.row,e.col,e.row,e.col);break;case n.Row:i.setRange(e.row,0,e.row,t.columns.length-1);break;case n.RowRange:case n.ListBox:i.setRange(e.row,0,e.row2,t.columns.length-1);break;default:i.copy(e)}return i},e.prototype._getOffsetY=function(){return this._offsetY},e.prototype._updateContent=function(e,t,i,n){var o=this._g,r=this._e,l=this._rows,a=this._cols,h=this._ct;if(h==Ge.ColumnHeader||h==Ge.ColumnFooter||h==Ge.RowHeader){var c=o._ptScrl,u=r.style;h==Ge.RowHeader?u.top=c.y+"px":o.rightToLeft?u.right=c.x+"px":u.left=c.x+"px"}this._offsetY!=i&&(e=!1,this._offsetY=i);var d=this._getViewRange(),p=d;if(p.isValid){var f=l.length<=o._vtRows?l.length:0,_=a.length<=o._vtCols?a.length:0,g=l._frozenInternal>=0?Math.max(d.row-f,l._frozenInternal):Math.max(d.row-f,0),m=l._frozenInternal>=0?Math.min(d.row2+f,l.length-1):Math.min(d.row2+f,l.length-1+l._frozenInternal),b=a._frozenInternal>=0?Math.max(d.col-_,a._frozenInternal):Math.max(d.col-_,0),v=a._frozenInternal>=0?Math.min(d.col2+_,a.length-1):Math.min(d.col2+_,a.length-1+a._frozenInternal);p=new qe(g,b,m,v)}if(e&&!t&&this._vrb.contains(d)&&!l._frozenInternal&&!a._frozenInternal)return this._activeCell;e&&p.equals(this._vrb)||(t=!1),e&&!t&&this._ct!=Ge.TopLeft&&this._reorderCells(p,this._vrb),this._activeCell=null,this._vru=d,this._vrb=p,this._recycle=e;var y=this.grid.topLeftCells.hostElement.parentElement;return[pt.Row,pt.Column].includes(o.headersVisibility)?(0,s.setAttribute)(y,"aria-hidden",!0):y.removeAttribute("aria-hidden"),this._updateCells(t,0,n),this._activeCell},e.prototype._updateCells=function(e,t,i){var n=this,o=this._rows,r=function(){for(var o=n._vrb.topRow;o<=n._vrb.bottomRow&&o>-1;o++)t=n._renderRow(o,n._vrb,e,t,i)};o._frozenInternal>0?(!function(){for(var r=0;r<o._frozenInternal&&r<o.length;r++)t=n._renderRow(r,n._vrb,e,t,i)}(),r()):o._frozenInternal<0?(r(),function(){for(var r=o._lastFrozen;r<o.length;r++)t=n._renderRow(r,n._vrb,e,t,i)}()):r(),this._scanAndRemoveExtraCells(t)},e.prototype._scanAndRemoveExtraCells=function(e){for(var t=this._e;t.childElementCount>e;){var i=t.lastElementChild;(0,s.removeChild)(i),this._removeExtraCells(i,0)}},e.prototype._clearCells=function(){for(var t=this.hostElement,i=this._g.cellFactory,n=t.childElementCount-1;n>=0;n--){for(var o=t.children[n],r=o.childElementCount-1;r>=0;r--)delete o.children[r][e._INDEX_KEY],i.disposeCell(o.children[r]);(0,s.removeChild)(o)}t.innerHTML=""},e.prototype._reorderCells=function(e,t){var i=this;if(this._g._reorderCells&&t.isValid&&e.isValid&&e.intersects(t)){var n,o=function(e,t,n,o,r,l){(0,s.assert)(n<0,"Scroll delta must be a negative number");var a,h,c=-n,u=t+(o-r+1),d=e.childElementCount-u;if(d<c&&d>0?(a=d,h=c-d):(a=c,h=0),a>0){var p=i._createRange(e,u,u+a);p&&e.insertBefore(p.extractContents(),e.children[t])}if(h>0)for(var f=e.children[t],_=0;_<h;_++){var g=document.createElement("div");g.className=l,e.insertBefore(g,f)}};if(e.row!=t.row){var r=this._e;if(0!=(n=e.row-t.row)){var l=this._ct==Ge.Cell?1:0,a=r.childElementCount;if(this.rows._frozenInternal>0&&(l+=this.rows._frozenInternal),n>0){var h=l,c=Math.min(l+n,a);(f=this._createRange(r,h,c))&&r.appendChild(f.extractContents())}else o(r,l,n,e.row2,t.row,Ne.row)}}if(e.col!=t.col)if(r=this._e,0!=(n=e.col-t.col)){l=this._ct==Ge.Cell&&this._g.rowHeaderPath?1:0,this.columns._frozenInternal>=0&&(l+=this.columns._frozenInternal);for(var u=0;u<r.children.length;u++){var d=r.children[u],p=a=d.children.length;if(this.columns._frozenInternal<0&&(p+=this.columns._frozenInternal),(0,s.hasClass)(d,Ne.row))if(n>0){var f;h=l,c=Math.min(l+n,p),(f=this._createRange(d,h,c))&&d.appendChild(f.extractContents())}else o(d,l,n,e.col2,t.col,Ne.cell)}}}},e.prototype._createRange=function(e,t,i){if(i>t&&i<=e.children.length&&t>-1){this._docRange||(this._docRange=document.createRange());var n=this._docRange;return n.setStart(e,t),n.setEnd(e,i),n}return null},e.prototype._renderRowHdrCell=function(t,i,n){var o=t.children[0];return o||(o=(0,s.createElement)(e._HTML_CELL,t)),o.setAttribute("role",i<0?"columnheader":"rowheader"),o.textContent=n?n.toString():"",(0,s.setCss)(o,{position:"fixed",left:-32e3,top:-32e3,width:.1,height:.1,overflow:"hidden",opacity:"0"}),o[e._INDEX_KEY]={row:i,col:-1,panel:this},1},e.prototype._renderRow=function(e,t,i,n,o){var r=this._g,l=this.rows[e];if(l.renderSize<=0)return n;var a=this._e.children[n];a||(a=(0,s.createElement)('<div class="'+Ne.row+'"></div>',this._e));var h=this._g.columnHeaders&&this._g.columnHeaders.rows&&this._g.columnHeaders.rows.length||0,c=this._g.headersVisibility&pt.Column?h:0,u=function(e,t,i){return r._ariaId+"-"+e+"-"+t+"-"+i},d=function(t,i){for(var n=[],o=0;o<i;o++)n.push(u(t,e,o));return n.join(" ")};switch(this._ct){case Ge.ColumnHeader:if(r.headersVisibility&pt.Row&&r.headersVisibility&pt.Column){var p=[],f=d("tl",r.topLeftCells.columns.length);f&&p.push(f);var _=d("ch",this.columns.length);_&&p.push(_),(b=p.join(" "))&&(0,s.setAttribute)(a,"aria-owns",b)}(0,s.setAttribute)(a,"aria-rowindex",e+1);break;case Ge.TopLeft:(0,s.setAttribute)(a,"aria-rowindex",e+1);break;case Ge.Cell:if(r.headersVisibility&pt.Row){p=[];var g=d("rh",r.rowHeaders.columns.length);g&&p.push(g);var m=d("cell",r.cells.columns.length);m&&p.push(m);var b=p.join(" ");this._allowSetAriaOwns(b,a)?(0,s.setAttribute)(a,"aria-owns",b):(0,s.setAttribute)(a,"aria-owns")}(0,s.setAttribute)(a,"aria-rowindex",e+1+c);break;case Ge.RowHeader:(0,s.setAttribute)(a,"aria-rowindex",e+1+c);break;case Ge.BottomLeft:case Ge.ColumnFooter:if(r.headersVisibility&pt.Row){p=[];var v=d("bl",r.bottomLeftCells.columns.length);v&&p.push(v);var y=d("cf",r.columnFooters.columns.length);y&&p.push(y),(b=p.join(" "))&&(0,s.setAttribute)(a,"aria-owns",b)}var w=h+r.rows.length+e+1;(0,s.setAttribute)(a,"aria-rowindex",w)}if(this._ct==Ge.Cell){a.setAttribute("role","row");var C=Ue,x=l.isSelected;switch(r.selectionMode){case C.Row:case C.RowRange:x=x||this._g._selHdl.selection.containsRow(e)}(0,s.setAttribute)(a,"aria-selected",!!x||null),(0,s.setAttribute)(a,"aria-level",l instanceof wt?l.level+1:null),(0,s.setAttribute)(a,"aria-expanded",l instanceof wt?!l.isCollapsed:null),this.rows.ariaLabel&&(0,s.setAttribute)(a,"aria-label",this.rows.ariaLabel)}this._ct!==Ge.TopLeft&&this._ct!==Ge.ColumnFooter&&this._ct!==Ge.BottomLeft||a.setAttribute("role","row");var E=0;if(this._ct==Ge.Cell||this._ct==Ge.ColumnHeader){var S=this._g._getRowHeaderPath();if(S){var I=this._ct==Ge.Cell?[S.getValue(l.dataItem),e]:[S.path,-1],D=I[0],R=I[1];E=this._renderRowHdrCell(a,R,D)}}var T=t.clone();if(T.col=this.columns._frozenInternal>=0?0:this.columns.length+this.columns._frozenInternal,T.col2=this.columns._frozenInternal>=0?this.columns._frozenInternal-1:this.columns.length-1,this.columns._frozenInternal>=0)for(var P=0;P<this.columns._frozenInternal&&P<this.columns.length;P++)E=this._renderCell(a,e,P,T,i,E,o);else for(P=Math.max(0,this.columns.length+this.columns._frozenInternal);P<this.columns.length;P++)E=this._renderCell(a,e,P,T,i,E,o);if(t.leftCol>-1){var M=r.getMergedRange(this,e,t.leftCol,!1),A=-1;if(M)for(A=M.leftCol;!this.columns[A].isVisible&&A<M.rightCol;)A++;M&&A<t.leftCol&&(E=this._renderCell(a,e,A,t,i,E,o))}for(P=t.leftCol;P<=t.rightCol&&P>-1;P++)E=this._renderCell(a,e,P,t,i,E,o);return this._removeExtraCells(a,E),n+1},e.prototype._allowSetAriaOwns=function(e,t){return!!e&&!(0,s.hasClass)(t,"wj-detail-row")},e.prototype._renderCell=function(t,i,n,o,r,l,a){var h=this._g,c=this._ct==Ge.Cell||h.rows.length<=h._vtRows||h.columns.length<=h._vtCols?h.getMergedRange(this,i,n,!1):h.getMergedRange(this,i,n);if(c){for(var u=Math.max(o.row,c.row);u<i;u++)if(this.rows[u].renderSize)return l;for(u=Math.max(o.col,c.col);u<n;u++)if(this.columns[u].renderSize)return l;if(i>=c.row&&i<=c.row2&&n>c.col&&n<=c.col2&&this._ct===Ge.Cell&&c.isSingleCell)return l;var d=this.columns._frozenInternal;if(d&&c.col<d&&c.col2>=d&&n>c.col)return l;if(!this.columns[n].isVisible&&"DetailRow"!==this._rows[i].constructor.name)return l;if(c.leftCol!=n)for(var p=c.leftCol;p<n;p++)if(this.columns[p].isVisible)return l}var f=this.columns[n];if((!f||f.renderSize<=0)&&(!c||c.getRenderSize(this).width<=0))return l;var _=t.children[l];if(_&&!r&&this._recycle&&h._lazyRender&&!h.activeEditor){var g=_[e._INDEX_KEY];g&&g.row==i&&g.col==n&&g.rng==c&&(this.rows.isFrozen(i)||this.columns.isFrozen(n)||(r=!0))}var m=Ye,b=this.getSelectedState(i,n,c),v=b==m.Cursor||b==m.Active,y=!1;switch(this.cellType){case Ge.RowHeader:case Ge.ColumnHeader:case Ge.TopLeft:case Ge.BottomLeft:case Ge.ColumnFooter:y=!0}if(_&&r){(0,s.toggleClass)(_,s.ControlStateClsNames.active,v),(0,s.toggleClass)(_,y?Ne.focusHeaderCell:s.ControlStateClsNames.selected,b==m.Cursor),(0,s.toggleClass)(_,s.ControlStateClsNames.multiSelected,b==m.Selected);var w=_.querySelector(".wj-column-selector");return w?v||b!=m.None?(0,s.setAttribute)(_,"aria-selected",!!w.checked):(0,s.setAttribute)(_,"aria-selected",null):(0,s.setAttribute)(_,"aria-selected",!(!v&&b==m.None)||null),v&&(this._activeCell=_),l+1}if(_||(_=(0,s.createElement)(e._HTML_CELL,t)),(0,s.setAttribute)(_,"aria-colindex",a?n+1+a:n+1),v&&(this._activeCell=_),this._ct==Ge.Cell){(0,s.setAttribute)(_,"role","gridcell"),(0,s.setAttribute)(_,"aria-selected",!(b==m.None&&!v)||null);var C=!h.canEditCell(i,n)||null;(0,s.setAttribute)(_,"aria-readonly",C),(0,s.setAttribute)(_,"aria-required",C?null:f.getIsRequired())}return this._ct!==Ge.ColumnFooter&&this._ct!==Ge.BottomLeft||(0,s.setAttribute)(_,"role","gridcell"),h.cellFactory.updateCell(this,i,n,_,c),_[e._INDEX_KEY]={row:i,col:n,rng:c,panel:this},l+1},e.prototype._removeExtraCells=function(t,i){var n=this._g.cellFactory;for(this.cellType===Ge.RowHeader&&0===i&&(0,s.setAttribute)(t,"aria-hidden","true");t.childElementCount>i;){var o=t.lastElementChild;delete o[e._INDEX_KEY],(0,s.removeChild)(o),n.disposeCell(o)}},e.prototype._getViewRange=function(){var e=this._g,t=e._ptScrl,i=e._szClientSB,n=this._rows,o=this._cols,r=new qe(0,0,n.length-1,o.length-1);if(this._ct==Ge.Cell||this._ct==Ge.RowHeader){var s=-t.y+this._offsetY,l=i.height;(u=Math.min(Math.abs(n._frozenInternal),n.length-1))>0&&(n._frozenInternal>=0?(s+=f=n[u-1].pos,l-=f):l+=f=n[n.length-u]._antipos),n._frozenInternal>=0?u>0&&n[u].pos>i.height?r.row=r.row2=-1:(r.row=Math.min(n.length-1,Math.max(u,n.getItemAt(s))),r.row2=Math.max(r.row,n.getItemAt(s+l))):u>0&&n[n.length-u]._antipos+i.height<0?r.row=r.row2=-1:(r.row=Math.min(n.length+n._frozenInternal-1,n.getItemAt(s)),r.row2=Math.max(r.row,n.getItemAt(s+l)),e.columnFooters.rows.length>0&&(r.row2-=e.columnFooters.rows.length));var a=e.hostElement;if(e._clipToScreen&&a){var h=a.getBoundingClientRect(),c=-h.top-e.cells._e.offsetTop;h.top<0&&(r.row=Math.max(r.row,n.getItemAt(c)-1)),h.bottom>innerHeight&&(r.row2=Math.min(r.row2,n.getItemAt(c+innerHeight)+1))}}if(this._ct==Ge.Cell||this._ct==Ge.ColumnHeader){var u,d=-t.x,p=i.width;if((u=Math.min(Math.abs(o._frozenInternal),o.length-1))>0&&o._frozenInternal>0)d+=f=o[u-1].pos,p-=f;else if(u>0&&o._frozenInternal<0){var f;d+=f=o[0].pos}(o._frozenInternal>=0?u>0&&o[u].pos>i.width:u>0&&Math.abs(o[o.length-u]._antipos)>i.width)?r.col=r.col2=-1:o._frozenInternal>=0?(r.col=Math.min(o.length-1,Math.max(u,o.getItemAt(d))),r.col2=Math.max(r.col,o.getItemAt(d+p))):(r.col=Math.min(o.length-1,Math.max(0,o.getItemAt(d))),r.col2=Math.max(r.col,o.getItemAt(d+p-o._frozenColAreaWidth)))}return n.length<=Math.abs(n._frozenInternal)&&(r.row=r.row2=-1),o.length<=Math.abs(o._frozenInternal)&&(r.col=r.col2=-1),r},e.prototype._getFrozenPos=function(){var e=this._rows._frozenInternal,t=this._cols._frozenInternal,i=null,n=null,o=0,r=0;return e>0?o=(i=e>0?this._rows[e-1]:null)?i.pos+i.renderSize:0:e<0&&this._rows.lastFrozen&&(o=Math.min(this._rows.lastFrozen.pos,this._g._szClient.height+this._rows.lastFrozen._antipos)),t>0?r=(n=t>0?this._cols[t-1]:null)?n.pos+n.renderSize:0:t<0&&this._cols.lastFrozen&&(r=Math.min(this._cols.lastFrozen.pos,this._g._szClient.width+this._cols.lastFrozen._antipos)),new s.Point(r,o)},e.prototype.dispose=function(){this._clearCells(),this._docRange&&(this._docRange.detach(),this._docRange=null),this._g=null,this._e=null,this._rows=null,this._cols=null,this._activeCell=null},e._INDEX_KEY=Ne.cellIndex,e._HTML_CELL='<div class="'+Ne.cell+'" tabindex="-1"></div>',e}(),$e=function(e){function t(t,i,n){var o=e.call(this)||this;return o._p=(0,s.asType)(t,Xe,!0),o._rng=(0,s.asType)(i,qe,!0),o._data=n,o}return ze(t,e),Object.defineProperty(t.prototype,"panel",{get:function(){return this._p},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"range",{get:function(){return this._rng.clone()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"row",{get:function(){return this._rng.row},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"col",{get:function(){return this._rng.col},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!0,configurable:!0}),t.prototype.getRow=function(){return this._p&&this.row>-1?this._p.rows[this.row]:null},t.prototype.getColumn=function(e){var t=this._p,i=t&&this.col>-1?t.columns[this.col]:null;if(i&&e){var n=t.grid;i=t.cellType===Ge.ColumnHeader&&n._hasColumnGroups()?n._getColumnGroup(this.row,this.col):t.grid._getBindingColumn(t,this.row,i)}return i},t}(s.CancelEventArgs),Ze=function(e){function t(t,i,n,o){void 0===o&&(o=!0);var r=e.call(this,t,i)||this;return r._updateContent=!0,r._cell=(0,s.asType)(n,HTMLElement),r}return ze(t,e),Object.defineProperty(t.prototype,"cell",{get:function(){return this._cell},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updateContent",{get:function(){return this._updateContent},enumerable:!0,configurable:!0}),t}($e),Qe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._stayInEditMode=!1,t._refresh=!0,t}return ze(t,e),Object.defineProperty(t.prototype,"stayInEditMode",{get:function(){return this._stayInEditMode},set:function(e){this._stayInEditMode=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"refresh",{get:function(){return this._refresh},set:function(e){this._refresh=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"previousData",{get:function(){return null!=this._previousData?this._previousData:this._data},set:function(e){this._previousData=e},enumerable:!0,configurable:!0}),t}($e);function et(){return(0,s._getModule)("wijmo.input")}function tt(){return(0,s._getModule)("wijmo.grid.detail")}function it(){return(0,s._getModule)("wijmo.grid.multirow")}function nt(){return(0,s._getModule)("wijmo.grid.transposed")}function ot(){return(0,s._getModule)("wijmo.grid.transposedmultirow")}function rt(){return(0,s._getModule)("wijmo.rest")}function st(){return(0,s._getModule)("wijmo.odata")}function lt(){return(0,s._getModule)("wijmo.interop.grid")}!function(e){e[e.None=0]="None",e[e.Cell=1]="Cell",e[e.CellRange=2]="CellRange",e[e.Row=3]="Row",e[e.RowRange=4]="RowRange",e[e.ListBox=5]="ListBox",e[e.MultiRange=6]="MultiRange"}(Ue||(Ue={})),function(e){e[e.None=0]="None",e[e.Selected=1]="Selected",e[e.Cursor=2]="Cursor",e[e.Active=3]="Active"}(Ye||(Ye={})),function(e){e[e.None=0]="None",e[e.Next=1]="Next",e[e.Prev=2]="Prev",e[e.NextPage=3]="NextPage",e[e.PrevPage=4]="PrevPage",e[e.Home=5]="Home",e[e.End=6]="End",e[e.NextCell=7]="NextCell",e[e.PrevCell=8]="PrevCell",e[e.NextEditableCell=9]="NextEditableCell",e[e.PrevEditableCell=10]="PrevEditableCell"}(Je||(Je={}));var at,ht=function(){function e(e){this._sel=new qe(0,0),this._xSel=new s.ObservableArray,this._mode=Ue.CellRange,this._g=e,this._e=new $e(e.cells,new qe(0,0)),this._collectionChangedHandler=function(){e.invalidate()},this._xSel.collectionChanged.addHandler(this._collectionChangedHandler)}return Object.defineProperty(e.prototype,"selectionMode",{get:function(){return this._mode},set:function(e){e!=this._mode&&this._setSelectionMode(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selection",{get:function(){return this._sel},set:function(e){this.select(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extendedSelection",{get:function(){return this._xSel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellRangeEventArgs",{get:function(){return this._e},enumerable:!0,configurable:!0}),e.prototype.select=function(e,t,i,n){void 0===t&&(t=!0),void 0===i&&(i=!1),n||(n=this._g._gpCells);var o=this._g,r=this._e.range,l=this._sel,a=r,h=!1,c=Ue,u=o.activePanelType,d=n.cellType==Ge.RowHeader||n.cellType==Ge.ColumnHeader,p=n.cellType==Ge.BottomLeft||n.cellType==Ge.ColumnFooter,f=!d&&!p;if(o._mouseHdl._eMouse&&(o._mouseHdl._eMouse.ctrlKey||o._mouseHdl._eMouse.metaKey),(0,s.isNumber)(e)&&(0,s.isString)(t)){var _=n.columns.indexOf(t);if(_<0)throw"Invalid column name or binding.";r.setRange(e,_),t=!0}else(0,s.isNumber)(e)&&(0,s.isNumber)(t)?(r.setRange(e,t),t=!0):e instanceof qe?r.copy(e):(0,s.assert)(!1,"CellRange expected");switch(o.activePanel=n,o.selectionMode){case c.Cell:a.row2=a.row,a.col2=a.col;break;case c.Row:a.row2=a.row;break;case c.ListBox:h=!0}(d||p)&&(a.row2=a.row,a.col2=a.col);var g=a.equals(l)&&u==n.cellType;if(g&&h&&f)for(var m=0;m<o.rows.length;m++)if(o.rows[m].isSelected!==a.containsRow(m)){g=!1;break}if(g)return t&&n.isRangeValid(a)&&this._showSelection(),!0;var b=s.Control.getControl((0,s.closest)((0,s.getActiveElement)(),"."+Ne.hostElement));if(b&&b==o&&b.activeEditor&&!b.finishEditing())return!1;var v=this._e;if(v._rng=a,v.cancel=!1,!o.onSelectionChanging(v)&&!i)return!1;f&&h&&o.rows.forEach((function(e,t){e._setFlag(at.Selected,a.containsRow(t),!0)})),a.row=Math.min(a.row,n.rows.length-1),a.row2=Math.min(a.row2,n.rows.length-1),this._sel.copy(a),o.refreshCells(!1,!0,!0),t&&this._showSelection();var y=o.collectionView;if(y&&f){var w=o._getCvIndex(a.row);y.moveCurrentToPosition(w)}var C=(0,s.getActiveElement)();return this._g.errorTip&&(C.classList.contains(s.ControlStateClsNames.invalid)?this._g.errorTip._showAutoTip(void 0,C):this._g.errorTip.hide()),o.onSelectionChanged(v),!0},e.prototype.moveSelectionWithinSelectedPanel=function(e,t){var i=this._g,n=this._sel.clone(),o=i.activePanel,r=i.getMergedRange(o,n.row,n.col,!1);if(r||(r=new qe(n.row,n.col)),e>0){var s=o.getNextVisibleRow(r.bottomRow+e);if(s>=0&&(n.row=n.row2=s),!o.columns[n.col].isVisible){var l=o.getNextVisibleColumn(r.leftCol);l>=0&&(n.col=n.col2=l)}}else if(e<0){var a=o.getLastVisibleRow(r.topRow+e);a>=0&&(n.row=n.row2=a)}if(t>0){var h=o.getNextVisibleColumn(r.rightCol+t);h>=0&&(n.col=n.col2=h)}else if(t<0){var c=o.getLastVisibleColumn(r.leftCol+t);c>=0&&(n.col=n.col2=c)}n.equals(this._sel)||i.select(n,!0,o)},e.prototype.moveSelection=function(e,t,i){var n=this._g,o=this._sel,r=i&&n.anchorCursor?new qe(o.row2,o.col2):new qe(o.row,o.col),s=r.row,l=r.col,a=n.columns,h=Math.max(0,n._szClient.height-n.columnHeaders.height),c=Je,u=-1,d=n.getMergedRange(n.cells,s,l),p=0;if(d)if(t==c.Next||t==c.NextCell||t==c.NextEditableCell?l=d.rightCol:t!=c.Prev&&t!=c.PrevCell&&t!=c.PrevEditableCell||(l=d.leftCol),e==c.Next||e==c.NextCell||e==c.NextEditableCell){if(s=d.bottomRow,it()&&n instanceof it().MultiRow&&(p=r.row-d.topRow,d.bottomRow===n.rows.length-1))return}else if((e==c.Prev||e==c.PrevCell||e==c.PrevEditableCell)&&(s=d.topRow,it()&&n instanceof it().MultiRow&&(p=r.row-d.bottomRow,0===d.topRow)))return;switch(t){case c.NextCell:case c.NextEditableCell:if(u=l,(l=this._getNextColumnCell(s,u,t))!=u&&(d=n.getMergedRange(n.cells,s,l))&&l<d.col2&&(l=d.col2),l==u)for(;;){if(s==n.rows.length-1){l=r.col,s=r.row;break}var f=!1;if((s=this._getNextRowCell(s,l,t))>r.row){for(u=-1;u<a.length;){if((l=this._getNextColumnCell(s,u,t))==u){f=!0;break}(d=n.getMergedRange(n.cells,s,l))&&l<d.col2&&(l=d.col2);break}if(f)continue}break}n.select(s,l);break;case c.PrevCell:case c.PrevEditableCell:if(u=l,(l=this._getNextColumnCell(s,u,t))!=u&&(d=n.getMergedRange(n.cells,s,l))&&l>d.col&&(l=d.col),l==u)for(;;){if(0==s){l=r.col,s=r.row;break}if(f=!1,(s=this._getNextRowCell(s,l,t))<r.row){for(u=a.length;u>-1;){(l=this._getNextColumnCell(s,u,t))!=u?(d=n.getMergedRange(n.cells,s,l))&&l>d.col&&(l=d.col):f=!0;break}if(f)continue}break}n.select(s,l);break;default:s=this._getNextRowCell(s,l,e,h),s+=p,l=this._getNextColumnCell(s,l,t,h),i?n.selection=n.anchorCursor?new qe(o.row,o.col,s,l):new qe(s,l,o.row2,o.col2):n.select(s,l)}},e.prototype._getNextColumnCell=function(e,t,i,n){return void 0===n&&(n=0),this._g.columns.getNextCell(t,i,n)},e.prototype._getNextRowCell=function(e,t,i,n){return void 0===n&&(n=0),this._g.rows.getNextCell(e,i,n)},e.prototype._setSelectionMode=function(e){var t=this._g,i=t.rows;this._mode=e,this._xSel.clear(),i.length&&(this._adjustSelection(this._sel,e,!0),t.invalidate())},e.prototype._adjustSelection=function(e,t,i){void 0===i&&(i=!1);var n=this._g.rows,o=Ue,r=void 0;if(this._g.hostElement&&(r=this._g.hostElement.querySelector("input.wj-column-selector")instanceof HTMLInputElement),!r)for(var s=0;s<n.length;s++)n[s]._setFlag(at.Selected,!1,!0);var l=e.clone();switch(t){case o.None:l=new qe;break;case o.Cell:l=new qe(e.row,e.col);break;case o.ListBox:if(r)return;for(s=0;s<n.length;s++)n[s]._setFlag(at.Selected,l.containsRow(s),!0)}this.select(l,!1,i)},e.prototype._expandSelection=function(){var e=this._g,t=e.selectionMode;if(e.expandSelectionOnCopyPaste&&t){var i=this.selection,n=Ue;switch(t){case n.Cell:case n.Row:break;case n.ListBox:this._expandSelectedRows();break;case n.RowRange:i=new qe(i.topRow,0,i.bottomRow,e.columns.length-1);default:var o=this._expandSelectionRange(i);o&&this.select(o,!1)}}},e.prototype._deselectRange=function(e){var t=this.selection,i=this.extendedSelection;if(t.contains(e)){var n=i.length;return this._sel=n?i[n-1]:new qe,n&&i.removeAt(n-1),!0}for(var o=0;o<i.length;o++)if(i[o].contains(e))return i.removeAt(o),!0;return!1},e.prototype._expandSelectedRows=function(){(0,s.assert)(this.selectionMode==Ue.ListBox,"ListBox mode expected");for(var e=this._g,t=e.selectedRows.map((function(e){return e.index})),i=[],n=0;n<t.length;n++)for(var o=new qe(t[n],0,t[n],e.columns.length-1),r=this._expandSelectionRange(o)||o,l=r.topRow;l<=r.bottomRow;l++)-1===i.indexOf(l)&&i.push(l);i.sort(),this._selectRows(i)},e.prototype._expandSelectionRange=function(e){var t=this._g,i=t.cells,n=t.getMergedRange(i,e.topRow,e.leftCol,!1),o=t.getMergedRange(i,e.bottomRow,e.leftCol,!1),r=t.getMergedRange(i,e.topRow,e.rightCol,!1),s=t.getMergedRange(i,e.bottomRow,e.rightCol,!1);return n||o||r||s?(n=n||new qe(e.topRow,e.leftCol),o=o||new qe(e.bottomRow,e.leftCol),r=r||new qe(e.topRow,e.rightCol),s=s||new qe(e.bottomRow,e.rightCol),new qe(Math.min(n.topRow,o.topRow,r.topRow,s.topRow),Math.min(n.leftCol,o.leftCol,r.leftCol,s.leftCol),Math.max(n.bottomRow,o.bottomRow,r.bottomRow,s.bottomRow),Math.max(n.rightCol,o.rightCol,r.rightCol,s.rightCol))):null},e.prototype._selectRows=function(e){(0,s.assert)(this.selectionMode==Ue.ListBox,"ListBox mode expected");for(var t=this._g,i=0,n=!0;i<t.rows.length;i++){var o=t.rows[i],r=e&&e.indexOf(o.index)>-1;r&&n&&(n=!1,this.select(i,this.selection.col)),o.isSelected=r}},e.prototype._showSelection=function(){var e=this._g,t=this._sel.clone();e.activePanelType===Ge.ColumnHeader?t.row=-1:e.activePanelType===Ge.RowHeader?t.col=-1:(e.activePanelType===Ge.BottomLeft||e.activePanelType===Ge.ColumnFooter)&&(t.row=-1),e.activePanelType!==Ge.TopLeft&&(e.anchorCursor?e.scrollIntoView(t.row2,t.col2):e.scrollIntoView(t.row,t.col)),e.activePanelType!==Ge.Cell&&this._showHeaderSelection()},e.prototype._showHeaderSelection=function(){var e=this._g.activePanel.activeCell;if(e){var t=e.getBoundingClientRect(),i=0,n=0,o=document.documentElement.clientWidth,r=document.documentElement.clientHeight;t.y<0?i=t.y:t.y>r-2&&(i=t.y-r+t.height),t.x<0?n=t.x:t.x>o-2&&(n=t.x-o+t.width),0==i&&0==n||window.scrollBy(n,i)}},e.prototype._adjustReferenceCell=function(e,t,i){var n=this._g,o=n.getMergedRange(n.cells,e.row,e.col);if(o&&!o.isSingleCell){var r=Je;switch(t){case r.Next:case r.NextCell:case r.NextEditableCell:e.row=o.bottomRow;break;case r.Prev:case r.PrevCell:case r.PrevEditableCell:e.row=o.topRow}switch(i){case r.Next:case r.NextCell:case r.NextEditableCell:e.col=o.rightCol;break;case r.Prev:case r.PrevCell:case r.PrevEditableCell:e.col=o.leftCol}}},e.prototype.dispose=function(){this._xSel&&this._collectionChangedHandler&&(this._xSel.collectionChanged.removeHandler(this._collectionChangedHandler),this._collectionChangedHandler=null),this._g=null,this._e=null,this._xSel=null},e}();!function(e){e[e.Visible=1]="Visible",e[e.AllowResizing=2]="AllowResizing",e[e.AllowDragging=4]="AllowDragging",e[e.AllowMerging=8]="AllowMerging",e[e.AllowSorting=16]="AllowSorting",e[e.AutoGenerated=32]="AutoGenerated",e[e.Collapsed=64]="Collapsed",e[e.ParentCollapsed=128]="ParentCollapsed",e[e.Selected=256]="Selected",e[e.ReadOnly=512]="ReadOnly",e[e.HtmlContent=1024]="HtmlContent",e[e.WordWrap=2048]="WordWrap",e[e.MultiLine=4096]="MultiLine",e[e.HasTemplate=8192]="HasTemplate",e[e.RowDefault=3]="RowDefault",e[e.ColumnDefault=23]="ColumnDefault"}(at||(at={}));var ct,ut,dt,pt,ft,_t,gt,mt,bt=function(){function e(){this._type=null,this._align=null,this._inpType=null,this._mask=null,this._maxLen=null,this._required=null,this._fmt=null,this._map=null,this._ddCssClass=null,this._cssClass=null,this._cssClassAll=null,this._szMin=null,this._szMax=null,this._sz=null,this._pos=0,this._antipos=0,this._idx=-1,this._idxVis=-1,this._idxData=-1,this.gridChanged=new s.Event}return Object.defineProperty(e.prototype,"binding",{get:function(){return this._binding?this._binding.path:null},set:function(e){if(e!=this.binding){var t=(0,s.asString)(e);if(this._binding=t?new s.Binding(t):null,!this._type&&this.grid&&this._binding){var i=this.grid.collectionView;if(i&&i.sourceCollection&&i.sourceCollection.length){var n=i.sourceCollection[0];this._type=(0,s.getType)(this._binding.getValue(n))}}this.onPropertyChanged()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortMemberPath",{get:function(){return this._bindingSort?this._bindingSort.path:null},set:function(e){if(e!=this.sortMemberPath){var t=(0,s.asString)(e);this._bindingSort=t?new s.Binding(t):null,this.onPropertyChanged()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataType",{get:function(){return this._type},set:function(e){e=(0,s.asEnum)(e,s.DataType,!0),this._type!=e&&(this._type=e,this.grid&&this.grid.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputType",{get:function(){return this._inpType},set:function(e){this._inpType=(0,s.asString)(e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(e){this._mask=(0,s.asString)(e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxLength",{get:function(){return this._maxLen},set:function(e){this._maxLen=(0,s.asNumber)(e,!0,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(e){this._align!=e&&(this._align=e,this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"format",{get:function(){return this._fmt},set:function(e){this._fmt!=e&&(this._fmt=e,this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataMap",{get:function(){return this._map},set:function(e){this._map!=e&&(this._map&&this._map.mapChanged.removeHandler(this.onPropertyChanged,this),(0,s.isArray)(e)&&(e=new We(e,null,null)),this._map=(0,s.asType)(e,We,!0),this._map&&this._map.mapChanged.addHandler(this.onPropertyChanged,this),this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataMapEditor",{get:function(){return null!=this._mapEditor?this._mapEditor:je.DropDownList},set:function(e){e!=this._mapEditor&&(this._mapEditor=(0,s.asEnum)(e,je),this.grid&&this.grid.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showDropDown",{get:function(){return this.dataMapEditor==je.DropDownList},set:function(e){(0,s._deprecated)("showDropDown","dataMapEditor"),this.dataMapEditor=e?je.DropDownList:je.AutoComplete},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropDownCssClass",{get:function(){return this._ddCssClass},set:function(e){this._ddCssClass=(0,s.asString)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._getFlag(at.Visible)},set:function(e){this._setFlag(at.Visible,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVisible",{get:function(){return!!this._getFlag(at.Visible)&&(!this._getFlag(at.ParentCollapsed)||this instanceof kt)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pos",{get:function(){return this._list&&this._list._dirty&&this._list._update(),this._pos},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._list&&this._list._dirty&&this._list._update(),this._idx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visibleIndex",{get:function(){return this._list&&this._list._dirty&&this._list._update(),this.isVisible?this._idxVis:-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._sz},set:function(e){e!=this._sz&&(this._sz=(0,s.asNumber)(e,!0),this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderSize",{get:function(){var e=0,t=this._list;return this.isVisible&&((null==(e=this._sz)||e<0)&&(e=t?t.defaultSize:0),t&&null!=t.minSize&&e<t.minSize&&(e=t.minSize),t&&null!=t.maxSize&&e>t.maxSize&&(e=t.maxSize),null!=this._szMin&&e<this._szMin&&(e=this._szMin),null!=this._szMax&&e>this._szMax&&(e=this._szMax)),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowResizing",{get:function(){return this._getFlag(at.AllowResizing)},set:function(e){this._setFlag(at.AllowResizing,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowDragging",{get:function(){return this._getFlag(at.AllowDragging)},set:function(e){this._setFlag(at.AllowDragging,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowMerging",{get:function(){return this._getFlag(at.AllowMerging)},set:function(e){this._setFlag(at.AllowMerging,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSelected",{get:function(){return this._getFlag(at.Selected)},set:function(e){if(!!e!=this.isSelected){var t=this.grid;if(t){var i=this instanceof yt?new qe(this.index,0,this.index,t.columns.length-1):new qe(0,this.index,t.rows.length-1,this.index),n=new $e(t?t.cells:null,i);t.onSelectionChanging(n)&&this._setFlag(at.Selected,e,!0)&&(t.refreshCells(!1,!0,!0),t.onSelectionChanged(n))}else this._setFlag(at.Selected,e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isReadOnly",{get:function(){return this._getFlag(at.ReadOnly)},set:function(e){this._setFlag(at.ReadOnly,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRequired",{get:function(){return this._required},set:function(e){this._required=(0,s.asBoolean)(e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isContentHtml",{get:function(){return this._getFlag(at.HtmlContent)},set:function(e){this.isContentHtml!=e&&(this._setFlag(at.HtmlContent,e),this.grid&&this.grid.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wordWrap",{get:function(){return this._getFlag(at.WordWrap)},set:function(e){this._setFlag(at.WordWrap,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"multiLine",{get:function(){return this._getFlag(at.MultiLine)},set:function(e){this._setFlag(at.MultiLine,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cssClass",{get:function(){return this._cssClass},set:function(e){e!=this._cssClass&&(this._cssClass=(0,s.asString)(e),this.grid&&this.grid.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cssClassAll",{get:function(){return this._cssClassAll},set:function(e){e!=this._cssClassAll&&(this._cssClassAll=(0,s.asString)(e),this.grid&&this.grid.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"grid",{get:function(){return this._list?this._list._g:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"collectionView",{get:function(){return this.grid?this.grid.collectionView:null},enumerable:!0,configurable:!0}),e.prototype.onPropertyChanged=function(){this._list&&(this._list._dirty=!0,this.grid.invalidate())},e.prototype.onGridChanged=function(e){this.gridChanged.raise(this,e)},e.prototype._setList=function(e){e!=this._list&&(this._list=e,this.onGridChanged())},e.prototype._getFlag=function(e){return 0!=(this._f&e)},e.prototype._setFlag=function(e,t,i){return!!t!=this._getFlag(e)&&(this._f=t?this._f|e:this._f&~e,i||this.onPropertyChanged(),!0)},e}(),vt=function(e){function t(i){var n=e.call(this)||this;return n._hdr=null,n._plholder=null,n._name=null,n._agg=null,n._quickSize=null,n._descById=null,n._sortOrder=null,n._tpl=null,n._f=at.ColumnDefault,n._hash=t._ctr.toString(36),t._ctr++,(0,s.copy)(n,i),n._uid=(0,s.uidGenerator)(),n}return ze(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return null!=this._szStar?this._szStar:this.size},set:function(e){null!=t._parseStarSize(e)?(this._szStar=e,this.onPropertyChanged()):(this._szStar=null,this.size=(0,s.asNumber)(e,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minWidth",{get:function(){return this._szMin},set:function(e){e!=this._szMin&&(this._szMin=(0,s.asNumber)(e,!0,!0),this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxWidth",{get:function(){return this._szMax},set:function(e){e!=this._szMax&&(this._szMax=(0,s.asNumber)(e,!0,!0),this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"quickAutoSize",{get:function(){return this._quickSize},set:function(e){this._quickSize=(0,s.asBoolean)(e,!0)},enumerable:!0,configurable:!0}),t.prototype._getQuickAutoSize=function(){return!!this.grid._getQuickAutoSize()&&((0,s.isBoolean)(this._quickSize)?this._quickSize:!(this.isContentHtml||this.wordWrap||this.multiLine||this._getFlag(at.HasTemplate)))},Object.defineProperty(t.prototype,"renderWidth",{get:function(){return this.renderSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"header",{get:function(){return this._hdr?this._hdr:this.binding},set:function(e){this._hdr!=e&&(this._hdr=e,this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"placeholder",{get:function(){return this._plholder?this._plholder:this.header},set:function(e){this._plholder!=e&&(this._plholder=e,this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cellTemplate",{get:function(){return this._tpl},set:function(e){e!=this._tpl&&((0,s.assert)(null==e||(0,s.isString)(e)||(0,s.isFunction)(e),"cellTemplate should be a string or an ICellTemplateFunction."),this._tpl=e,this._setFlag(at.HasTemplate,null!=e&&""!=e),this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editor",{get:function(){var e=this._edt;return e?e.control:null},set:function(e){e!=this.editor&&(this._edt&&(this._edt.dispose(),this._edt=null),null!=e&&(e=(0,s.asType)(e,s.Control),this._edt=new Jt(this,e)))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowSorting",{get:function(){return this._getFlag(at.AllowSorting)},set:function(e){this._setFlag(at.AllowSorting,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sortOrder",{get:function(){return this._sortOrder},set:function(e){null!=e&&(e=(0,s.asEnum)(e,ut)),this._sortOrder!=e&&(this._sortOrder=e,this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentSort",{get:function(){var e=this.currentSortIndex;return e>-1?this.grid.collectionView.sortDescriptions[e].ascending?"+":"-":null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentSortIndex",{get:function(){var e=this.grid?this.grid.collectionView:null,t=e?e.sortDescriptions:null,i=t&&t.length?this._getBindingSort():null;if(i)for(var n=0;n<t.length;n++)if(t[n].property==i)return n;return-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"aggregate",{get:function(){return null!=this._agg?this._agg:s.Aggregate.None},set:function(e){(e=(0,s.asEnum)(e,s.Aggregate))!=this._agg&&(this._agg=e,this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"describedById",{get:function(){return this._descById},set:function(e){e!=this._descById&&(this._descById=(0,s.asString)(e),this.grid&&this.grid.invalidate())},enumerable:!0,configurable:!0}),t.prototype.getIsRequired=function(e){return null!=this._required?this._required:e&&null!=e.isRequired?e.isRequired:this.dataType==s.DataType.String?null!=this.dataMap||null!=this._mask&&this._mask.length>0:!e||e.dataType!=s.DataType.String||null!=e.dataMap||null!=e.mask&&e.mask.length>0},t.prototype.getAlignment=function(e){if(null!=this._align)return this._align;if(e&&null!=e.align)return e.align;if(!this._map)switch(this.dataType){case s.DataType.Boolean:return"center";case s.DataType.Number:return"right"}if(e&&!e.dataMap)switch(e.dataType){case s.DataType.Boolean:return"center";case s.DataType.Number:return"right"}return""},t.prototype._getBindingSort=function(){return this.sortMemberPath?this.sortMemberPath:this.binding?this.binding:null},t._parseStarSize=function(e){if((0,s.isString)(e)){var t=e.length;if(t>0&&"*"==e[t-1]){var i=1==t?1:parseFloat(e);if(i>0&&!isNaN(i))return i}}return null},t._ctr=0,t}(bt),yt=function(e){function t(t){var i=e.call(this)||this;return i.resizedManually=!1,i._f=at.ColumnDefault,i._data=t||null,i}return ze(t,e),Object.defineProperty(t.prototype,"dataItem",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataIndex",{get:function(){return this._list&&this._list._dirty&&this._list._update(),this._idxData},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.size},set:function(e){this.size=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderHeight",{get:function(){return this.renderSize},enumerable:!0,configurable:!0}),t}(bt),wt=function(e){function t(t){var i=e.call(this,t)||this;return i._level=-1,i._isSummary=!1,i.level=t instanceof s.CollectionViewGroup?t.level:-1,i.isReadOnly=!0,i}return ze(t,e),Object.defineProperty(t.prototype,"isSummary",{get:function(){return this._isSummary},set:function(e){e!=this._isSummary&&(this._isSummary=(0,s.asBoolean)(e),this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"level",{get:function(){return this._level},set:function(e){(0,s.asInt)(e),e!=this._level&&(this._level=e,this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasChildren",{get:function(){if(this.isSummary)return!1;if(null!=this.grid&&null!=this._list){this._list._update();var e=this.index<this._list.length-1?this._list[this.index+1]:null,i=(0,s.tryCast)(e,t),n=(0,s.tryCast)(e,kt);return null!=e&&null==n&&(null==i||i.level>this.level)}return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCollapsed",{get:function(){return this._getFlag(at.Collapsed)},set:function(e){!!e==this.isCollapsed||null==this._list||this.isSummary||this._setCollapsed((0,s.asBoolean)(e))},enumerable:!0,configurable:!0}),t.prototype.getGroupHeader=function(){if(this.isSummary)return"";var e=this.grid,t=e.groupHeaderFormat||s.culture.FlexGrid.groupHeaderFormat,i=this.dataItem;if(i&&i instanceof s.CollectionViewGroup&&!this.hasChildren&&!this.isSummary&&0==i.items.length&&(t=null),i instanceof s.CollectionViewGroup&&t&&e.showGroups&&!e.childItemsPath){var n=i.groupDescription.propertyName,o=i.name,r=e.getColumn(n),l=this.isContentHtml;if(r){l=l||r.isContentHtml,r.header&&(n=r.header);var a=r.dataMap;a&&(o=a.getDisplayValue(o)),r.dataType==(0,s.getType)(o)&&(o=s.Globalize.format(o,r.format))}else n=(0,s.toHeaderCase)(n);var h,c=e.collectionView;return h=e._isServerCollectionView(c)&&c.groupOnServer?c.getGroupAggregate(i.groupDescription.propertyName,i,s.Aggregate.CntAll):i.getAggregate(s.Aggregate.CntAll,null,e.collectionView),(0,s.format)(t,{name:(0,s.escapeHtml)(n),value:l?o:(0,s.escapeHtml)(o),level:i.level,count:h})}return""},t.prototype._setCollapsed=function(e){var i=this,n=this.grid,o=n.rows,r=this.getCellRange(),s=n.collectionView,l=n.isUpdating&&s&&s.groupOnServer&&s.groupLazyLoading;l&&(n._isGrpClpsChanging=!0);var a=new $e(n.cells,new qe(this.index,-1));n.onGroupCollapsedChanging(a)&&(n.deferUpdate((function(){o.deferUpdate((function(){i._setFlag(at.Collapsed,e,!0);for(var n=r.topRow+1;n<=r.bottomRow&&n>-1&&n<o.length;n++){o[n]._setFlag(at.ParentCollapsed,e,!0);var s=o[n];s instanceof t&&s.isCollapsed&&(n=s.getCellRange().bottomRow)}}))})),n.onGroupCollapsedChanged(a),l&&(n._isGrpClpsChanging=!1))},t.prototype.getCellRange=function(){for(var e=this._list,i=this.index,n=e.length-1,o=i+1;o<=n;o++){var r=e[o];if(r instanceof t&&r.level<=this.level){n=o-1;break}}if(this.grid.groupSummaryPosition===mt.Auto&&e.length>n&&e[n+1]instanceof t&&e[n+1].isSummary)do{n++}while(e[n+1]instanceof t&&e[n+1].isSummary&&e[n+1].dataItem==e[n].dataItem);return new qe(i,0,n,this.grid.columns.length-1)},t}(yt),Ct=function(e){function t(t,i){var n=e.call(this)||this;return n.frozenDetailChildren=0,n._frozen=0,n._frozenEnd=0,n._lastFrozen=-1,n._lastFrozenVisible=-1,n._lastUnfrozenVisible=-1,n._firstVisible=-1,n._vlen=0,n._szDef=28,n._szTot=0,n._szFrozen=0,n._szCustom=!1,n._dirty=!1,n._frozenColAreaWidth=0,n._g=(0,s.asType)(t,Rt),n._szDef=(0,s.asNumber)(i,!1,!0),n._uid=(0,s.uidGenerator)(),n}return ze(t,e),Object.defineProperty(t.prototype,"grid",{get:function(){return this._g},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultSize",{get:function(){return this._szDef},set:function(e){this._szCustom=!0,this._szDef!=e&&(this._szDef=(0,s.asNumber)(e,!1,!0),this._dirty=!0,this._g.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frozen",{get:function(){return this._frozen},set:function(e){(0,s.assert)((0,s.isNumber)(e),"Positive number expected"),(0,s.isNumber)(e)&&e!=this._frozen&&(this._frozen=(0,s.asNumber)(e,!1,!0),this._dirty=!0,this._g.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frozenEnd",{get:function(){return this._frozenEnd},set:function(e){(0,s.assert)((0,s.isNumber)(e),"Positive number expected"),(0,s.isNumber)(e)&&e!=this._frozenEnd&&(this._frozenEnd=(0,s.asNumber)(e,!1,!0),this._dirty=!0,this._g.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_frozenInternal",{get:function(){return this._frozen>0?this._frozen:-this._frozenEnd},set:function(e){e<0?(this.frozen=0,this.frozenEnd=-e):(this.frozen=e,this.frozenEnd=0)},enumerable:!0,configurable:!0}),t.prototype.isFrozen=function(e){return this._frozenInternal>=0?e<this._frozenInternal:e>=this._lastFrozen},Object.defineProperty(t.prototype,"minSize",{get:function(){return this._szMin},set:function(e){e!=this._szMin&&(this._szMin=(0,s.asNumber)(e,!0,!0),this._dirty=!0,this._g.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxSize",{get:function(){return this._szMax},set:function(e){e!=this._szMax&&(this._szMax=(0,s.asNumber)(e,!0,!0),this._dirty=!0,this._g.invalidate())},enumerable:!0,configurable:!0}),t.prototype.getTotalSize=function(){return this._dirty&&this._update(),this._szTot},t.prototype.getFrozenSize=function(){return this._dirty&&this._update(),this._szFrozen},Object.defineProperty(t.prototype,"visibleLength",{get:function(){return this._dirty&&this._update(),this._vlen},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastFrozen",{get:function(){return-1!=this._lastFrozen?this[this._lastFrozen]:null},enumerable:!0,configurable:!0}),t.prototype.getItemAt=function(e){if(this._dirty&&this._update(),e<=0&&this.length>0&&this[0].renderSize)return 0;for(var t,i,n=this.length,o=0,r=n-1;o<=r;)if((i=this[t=o+r>>>1])._pos>=e&&t>0)r=t-1;else{if(!(i._pos+i.renderSize<=e&&t<n-1)){for(;t>0&&!this[t].renderSize;)t--;for(;t<n-1&&!this[t].renderSize;)t++;return t}o=t+1}return r},t.prototype.getNextCell=function(e,t,i){void 0===i&&(i=0);var n,o=Je;switch(t){case o.Next:case o.NextCell:for(n=e+1;n<this.length;n++)if(this[n].renderSize>0)return n;break;case o.NextEditableCell:for(n=e+1;n<this.length;n++)if(this[n].renderSize>0&&!this[n].isReadOnly)return n;break;case o.Prev:case o.PrevCell:for(n=e-1;n>=0;n--)if(this[n].renderSize>0)return n;break;case o.PrevEditableCell:for(n=e-1;n>=0;n--)if(this[n].renderSize>0&&!this[n].isReadOnly)return n;break;case o.End:for(n=this.length-1;n>=0;n--)if(this[n].renderSize>0)return n;break;case o.Home:for(n=0;n<this.length;n++)if(this[n].renderSize>0)return n;break;case o.NextPage:return(n=this.getItemAt(this[e].pos+this[e].renderSize+i))<0?this.getNextCell(e,Je.End,i):n==e&&n<this.length-1&&this[n+1].renderSize?n+1:n;case o.PrevPage:return(n=this.getItemAt(this[e].pos-i))<0?this.getNextCell(e,Je.Home,i):n==e&&n>0&&this[n-1].renderSize?n-1:n}return e},t.prototype.canMoveElement=function(e,t,i){if(void 0===i&&(i=!0),t==e)return!1;if(e<0||e>=this.length||t>=this.length)return!1;if(i){t<0&&(t=this.length-1);for(var n=Math.min(e,t),o=Math.max(e,t),r=n;r<=o;r++)if(!this[r].allowDragging)return!1}return!(this[t]instanceof kt)},t.prototype.moveElement=function(e,t,i){if(void 0===i&&(i=!0),this.canMoveElement(e,t,i)){var n=this[e];return this.removeAt(e),t<0&&(t=this.length),this.insert(t,n),i&&(this.isFrozen(e)&&!this.isFrozen(t)?this._frozenInternal>=0?this._frozenInternal--:this._frozenInternal++:!this.isFrozen(e)&&this.isFrozen(t)&&(this._frozenInternal>=0?this._frozenInternal++:this._frozenInternal--)),!0}return!1},t.prototype.onCollectionChanged=function(t){void 0===t&&(t=s.NotifyCollectionChangedEventArgs.reset),this._dirty=!0,this._g.invalidate(),e.prototype.onCollectionChanged.call(this,t)},t.prototype.push=function(t){return t._setList(this),e.prototype.push.call(this,t)},t.prototype.splice=function(t,i){for(var n=this,o=[],r=2;r<arguments.length;r++)o[r-2]=arguments[r];for(var s=t;s<t+i&&s<this.length;s++){var l=this[s];l instanceof bt&&l._setList(null)}return o.forEach((function(e){return e._setList(n)})),e.prototype.splice.apply(this,[t,i].concat(o))},t.prototype.beginUpdate=function(){this._update(),e.prototype.beginUpdate.call(this)},t.prototype._setDefaultSize=function(e){this._szCustom||(this.defaultSize=e,this._szCustom=!1)},t.prototype._update=function(){if(this._dirty&&!this.isUpdating){this._dirty=!1,this._lastFrozen=-1,this._firstVisible=-1,this._lastUnfrozenVisible=-1,this._frozenColAreaWidth=0,this._szFrozen=0;var e=0,t=0,i=void 0,n=void 0;if(this._frozenInternal>=0){for(var o=0;o<this.length;o++)(n=this[o])._idx=o,n._idxVis=e,n._pos=t,n._setList(this),(i=n.renderSize)>0&&(t+=i,e++,o<this._frozenInternal&&(this._lastFrozen=o)),this._firstVisible<0&&n.visible&&(this._firstVisible=o),o<this._frozenInternal&&(this._szFrozen+=i);return this._vlen=e,this._szTot=t,!0}for(o=0;o<this.length;o++)(n=this[o])._idx=o,n._idxVis=e,n._pos=t,n._setList(this),(i=n.renderSize)>0&&(t+=i,e++),this._firstVisible<0&&n.visible&&(this._firstVisible=o),n.visible&&o<this.length+this._frozenInternal&&(this._lastUnfrozenVisible=o),o>=this.length+this._frozenInternal&&(this._szFrozen+=i);for(this._lastFrozen=Math.max(0,this.length+this._frozenInternal),this._lastFrozenVisible=this._lastFrozen;this._lastFrozenVisible<this.length&&!(this[this._lastFrozenVisible].renderSize>0);)this._lastFrozenVisible++;var r=0;for(o=this.length-1;o>=Math.max(0,this.length+this._frozenInternal);o--)i=(n=this[o]).renderSize,r-=this[o].renderSize,n._antipos=r,this._frozenColAreaWidth+=i;return this._vlen=e,this._szTot=t,!0}return!1},t}(s.ObservableArray),xt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ze(t,e),t.prototype.getColumn=function(e){var t=(0,s.isNumber)(e)?e:this.indexOf(e);return t>-1?this[t]:null},t.prototype.indexOf=function(t){if(t instanceof vt)return e.prototype.indexOf.call(this,t);for(var i=0;i<this.length;i++)if(this[i].name==t)return i;for(i=0;i<this.length;i++)if(this[i].binding==t)return i;return-1},Object.defineProperty(t.prototype,"describedById",{get:function(){return this._descById},set:function(e){e!=this._descById&&(this._descById=(0,s.asString)(e),this._g&&this._g.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstVisibleIndex",{get:function(){return this._dirty&&this._update(),this._firstVisible},enumerable:!0,configurable:!0}),t.prototype._updateStarSizes=function(e){var t,i=!1,n=0;e-=.5;for(var o=0;o<this.length;o++)(s=this[o]).isVisible&&(s._szStar?(n+=vt._parseStarSize(s._szStar),t=s):e-=s.renderWidth);if(t){var r=e;for(o=0;o<this.length;o++){var s;if((s=this[o]).isVisible&&s._szStar){var l=s._sz;s==t&&r>0?l=r:r-=l=Math.max(0,Math.round(vt._parseStarSize(s._szStar)/n*e)),l!=s._sz&&(s._sz=l,i=!0)}}return i&&(this._dirty=!0,this._update()),i}return!1},t}(Ct),Et=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._maxLevel=-1,t}return ze(t,e),Object.defineProperty(t.prototype,"ariaLabel",{get:function(){return this._ariaLabel},set:function(e){e!=this.ariaLabel&&(this._ariaLabel=(0,s.asString)(e),this._g&&this._g.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxGroupLevel",{get:function(){return this._dirty&&this._update(),this._maxLevel},enumerable:!0,configurable:!0}),t.prototype.getDetailRowCountUptoRow=function(e){var t=tt(),i=0,n=Math.abs(e),o=0,r=this.length-1,s=1,l=0;for(e<0&&(s=-1,l=1);n>0&&o<=r&&o>=0;){var a=r*l+o*s,h=this[a];if(h&&!(t&&h instanceof t.DetailRow)){var c=this[a+1];c&&t&&c instanceof t.DetailRow&&i++,n--}o++}return i},t.prototype._update=function(){var t=this;if(e.prototype._update.call(this)){var i=this.grid?this.grid.collectionView:null,n=i?i.items:null,o=0;return this._maxLevel=-1,this.forEach((function(e){e instanceof wt&&e.level>t._maxLevel&&(t._maxLevel=e.level);var i=e.dataItem;i&&n?i===n[o]?e._idxData=o:i===n[o+1]?e._idxData=++o:i!==n[e._idxData]&&(e._idxData=-1):e._idxData=-1})),!0}return!1},t}(Ct),St=function(){function e(e){this._updatingCollection=0,this._initialized=!1,this._grid=e,this._initializeColumnGroups(),this._initialized=!0}return Object.defineProperty(e.prototype,"columnGroups",{get:function(){return this._colGroups},enumerable:!0,configurable:!0}),e.prototype.createColumnGroups=function(e){this._initialized=!1,this._createColumnGroups(e),this._initialized=!0},e.prototype.hasColumnGroups=function(){return null!=this._colGroups&&this._colGroups.length>0},e.prototype.getGroupDefinitions=function(){return this._groupDefs},e.prototype.getColumnGroup=function(e,t){return this._getColumnGroup(e,t)},e.prototype.canMoveColumnGroup=function(e,t,i,n){if(e==i&&t==n)return!1;var o=this._grid,r=o.columnHeaders.rows,s=o.columns;if(e<0||e>=r.length||t<0||t>=s.length||i<0||i>=r.length||n<0||n>=s.length)return!1;var l=this._getColumnGroup(e,t),a=this._getColumnGroup(i,n);if(!l||!a||l==a)return!1;if(l.level<a.level&&l._containsGroup(a))return!1;var h=l.parentGroup,c=a.parentGroup;return!h||h===c||!h._isCollapseTo(l)},e.prototype.moveColumnGroup=function(e,t,i,n,o){if(this.canMoveColumnGroup(e,t,i,n)){var r=this._getColumnGroup(e,t),s=this._getColumnGroup(i,n);if(!r||!s||r==s)return!1;if(o&&!s.isEmpty)return!1;var l=this._getCollection(r),a=o?s.columns:this._getCollection(s);if(!l||!a)return!1;var h=o?0:a.indexOf(s);return!(h<0)&&(!o&&l!=a&&n>t&&h++,this._deferCollectionUpdate((function(){if(!l.remove(r))return!1;a.insert(h,r)})),!0)}return!1},e.prototype.handleCollectionChange=function(){this._initialized&&!this._updatingCollection&&(this._initialized=!1,this._buildColumnGroups(),this._initialized=!0)},e.prototype.handlePropertyChange=function(e){if(e&&this._initialized){var t=this._grid,i=e._rng,n=e.header;if(n!=e._curr_header)for(var o=i.topRow;o<=i.bottomRow;o++)for(var r=i.leftCol;r<=i.rightCol;r++)t.columnHeaders.setCellData(o,r,n),e._curr_header=n;e.columns.length>0&&t.invalidate()}},e.prototype._initializeColumnGroups=function(){var e=this._grid,t=new Dt;this._groupDefs=t,this._colGroups=t,this._colGroups._setOwner(e),this._colGroups._setChangeHandler(this)},e.prototype._createColumnGroups=function(e){this._grid,this._groupDefs=(0,s.asArray)(e),this._colGroups&&this._colGroups._setOwner(null),this._colGroups=Dt._parse(e),this._buildColumnGroups()},e.prototype._buildColumnGroups=function(){var e=this,t=this._grid;this._colGroups._removeChangeHandler(),this._assertColumnGroups(this._colGroups),t.autoGenerateColumns=!1,t.columns.clear(),this._colGroups._setOwner(t),this._colGroups.forEach((function(e){e._beginBuild()}));var i=0;this._colGroups.forEach((function(t){e._addColumnGroup(t),i=Math.max(i,t._getMaxLevel())})),this._colGroups.forEach((function(e){e._expandRange(i)}));var n=t.columnHeaders.rows;n.clear();for(var o=0;o<=i;o++){var r=new yt;n.splice(o,0,r),o<i&&(r.cssClassAll=Ne.colGroup)}for(o=0;o<n.length;o++)for(var l=0;l<t.columns.length;l++){var a=this._getColumnGroup(o,l);if(a){var h=a.header||(0,s.toHeaderCase)(a.binding);if(t.columnHeaders.setCellData(o,l,h),a.height){var c=t.columnHeaders.rows[o].height;t.columnHeaders.rows[o].height=c<=a.height?a.height:c}a._curr_header=a.header}}this._colGroups._setChangeHandler(this),this._colGroups.forEach((function(e){e._checkIfCollapsed()}))},e.prototype._getColumnGroup=function(e,t){var i=this._grid;if(e<i.columnHeaders.rows.length&&t<i.columns.length)for(var n=this._colGroups;n;){for(var o=n,r=0;r<n.length;r++){var s=n[r],l=s._rng;if(l.containsColumn(t)){if(l.containsRow(e)||0==s.columns.length)return s;n=s.columns;break}}if(n==o)break}return null},e.prototype._getCollection=function(e){var t=e.parentGroup;return t?t.columns:this._colGroups},e.prototype._assertColumnGroups=function(e){var t=this;(0,s.assert)(e instanceof Dt,"column groups contain items of invalid collection type"),e.forEach((function(e){(0,s.assert)(e instanceof It,"column groups contain items of invalid type"),t._assertColumnGroups(e.columns)}))},e.prototype._addColumnGroup=function(e){var t=this,i=this._grid;e._rng.col=i.columns.length,0==e.columns.length?i.columns.push(e):e.columns.forEach((function(e){t._addColumnGroup(e)})),e._rng.col2=i.columns.length-1},e.prototype._beginCollectionUpdate=function(){this._updatingCollection++},e.prototype._endCollectionUpdate=function(){this._updatingCollection--,this._updatingCollection<=0&&this.handleCollectionChange()},e.prototype._deferCollectionUpdate=function(e){try{this._beginCollectionUpdate(),e()}finally{this._endCollectionUpdate()}},e}(),It=function(e){function t(t,i){var n=e.call(this)||this;n._rng=new qe(0,-1),n._lvl=0,n._collapsed=!1,n._cols=new Dt,(0,s.copy)(n,t);var o=i&&i.columns;return o&&o.indexOf(n)<0&&o.push(n),n}return ze(t,e),t.prototype._copy=function(e,t){if("columns"==e){var i=(0,s.asArray)(t);return this._cols=Dt._parse(i),!0}return!1},Object.defineProperty(t.prototype,"columns",{get:function(){return this._cols},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnGroups",{get:function(){return this._cols},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._cgHeight},set:function(e){this._cgHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this._cols.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentGroup",{get:function(){var e=this._ownerList,i=e&&e.owner;return i instanceof t?i:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"level",{get:function(){for(var e=this,t=0;e.parentGroup;)e=e.parentGroup,t++;return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collapseTo",{get:function(){return this._collTo},set:function(e){(0,s.assert)((0,s.isArray)(e)||(0,s.isString)(e),"collapseTo should be an array or a string."),this._collTo!=e&&(this._collTo=e,this._updateCollapsedState())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCollapsed",{get:function(){return this._collapsed},set:function(e){var t=this.grid,i=null;e!=this._collapsed&&(t?(i=new $e(t.columnHeaders,this._rng,this),t.onColumnGroupCollapsedChanging(i)?this._collapsed=(0,s.asBoolean)(e):i=null):this._collapsed=(0,s.asBoolean)(e)),this._updateCollapsedState(),t&&i&&t.onColumnGroupCollapsedChanged(i)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"grid",{get:function(){var e=this._ownerList,i=e&&e.owner;return i instanceof t?i.grid:i instanceof Rt?i:null},enumerable:!0,configurable:!0}),t.prototype._beginBuild=function(){var e=this;this._lvl=0;for(var t=this.parentGroup;t;t=t.parentGroup)this._lvl++;setTimeout((function(){if(e.parentGroup&&0!==e._lvl&&e.parentGroup.width&&(null===e.width||void 0===e.width)){var t=0,i=0;e.parentGroup._cols.forEach((function(e){t+=e.width,null!==e.width&&void 0!==e.width||i++})),e.width=(e.parentGroup.width-t)/i}}),0),this._rng=new qe(0,-1),this._rng.row=this._rng.row2=this._lvl,this._cols.forEach((function(e){e._beginBuild()}))},t.prototype._setChangeHandler=function(e){this._changeHdl=e,this._cols._setChangeHandler(e)},t.prototype._removeChangeHandler=function(){this._changeHdl=null,this._cols._removeChangeHandler()},t.prototype._setOwnerList=function(e){e!=this._ownerList&&(this._ownerList=e)},t.prototype._checkIfCollapsed=function(){var e=this.grid;e&&e.columns&&(this._collapsed?this._updateCollapsedState():this._cols.forEach((function(e){e._checkIfCollapsed()})))},t.prototype._updateCollapsedState=function(){var e=this.grid,i=e?e.columns:null,n=this._rng,o=this._collapsed;if(i){this._cols.forEach((function(e){e instanceof t&&(e._collapsed=o,e._updateCollapsedState())}));for(var r=this._getCollapseToIndices(),s=n.leftCol;s<=n.rightCol;s++){var l=!o||r.indexOf(s)>-1;i[s]._setFlag(at.ParentCollapsed,!l)}}},t.prototype._getMaxLevel=function(){var e=this._lvl;return this.columns.forEach((function(t){e=Math.max(e,t._getMaxLevel())})),e},t.prototype._expandRange=function(e){var t=e-this._getMaxLevel();t>0&&(this._rng.row2+=t,this._cols.forEach((function(e){e._shiftRange(t)})));for(var i=this.grid.columns,n=this._rng,o=n.col;o<=n.col2;o++)i[o]._rng.row2=e},t.prototype._shiftRange=function(e){this._rng.row+=e,this._rng.row2+=e,this._cols.forEach((function(t){t._shiftRange(e)}))},t.prototype._containsGroup=function(e){for(var t=0;t<this._cols.length;t++){var i=this._cols[t];if(i==e||i._containsGroup(e))return!0}return!1},t.prototype._isCollapseTo=function(e){var t=this.grid,i=t?t.columns:null;if(!e||!i)return!1;var n=this._getCollapseToBindings();if(n&&n.length)for(var o=0;o<n.length;o++)switch(n[o]){case"$first":case"$last":continue;default:if(e===i.getColumn(n[o]))return!0}return!1},t.prototype._getCollapseToBindings=function(){var e=this.collapseTo;return(0,s.isString)(e)?[e]:e},t.prototype._getCollapseToIndices=function(){var e=this.grid,t=this._rng,i=this._getCollapseToBindings();if(i&&i.length){for(var n=[],o=e.columns,r=0;r<i.length;r++)switch(i[r]){case"$first":n.push(t.leftCol);break;case"$last":n.push(t.rightCol);break;default:var s=o.getColumn(i[r]),l=o.indexOf(s);s&&t.containsColumn(l)&&n.push(l)}if(n.length)return n}return[t.rightCol]},t.prototype.onPropertyChanged=function(){var t=this._changeHdl;t&&t.handlePropertyChange(this),e.prototype.onPropertyChanged.call(this)},t}(vt),Dt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ze(t,e),t.prototype.getColumn=function(e){return(0,s.isNumber)(e)?this._getColByIdx(e):this._findColByProp("name",e)||this._findColByProp("binding",e)},Object.defineProperty(t.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),t.prototype.push=function(t){return t._setOwnerList(this),e.prototype.push.call(this,t)},t.prototype.splice=function(t,i){for(var n=this,o=[],r=2;r<arguments.length;r++)o[r-2]=arguments[r];for(var s=t;s<t+i&&s<this.length;s++){var l=this[s];l instanceof It&&l._setOwnerList(null)}return o.forEach((function(e){return e._setOwnerList(n)})),e.prototype.splice.apply(this,[t,i].concat(o))},t._parse=function(e){var i=null;return e?e instanceof t?i=e:(i=new t,e.forEach((function(e){var t=e instanceof It?e:new It(e);i.indexOf(t)<0&&i.push(t)}))):i=new t,i},t.prototype._setChangeHandler=function(e){this._changeHdl=e,this.forEach((function(t){return t._setChangeHandler(e)}))},t.prototype._removeChangeHandler=function(){this._changeHdl=null,this.forEach((function(e){return e._removeChangeHandler()}))},t.prototype._setOwner=function(e){this._owner=e,this.forEach((function(e){return e.columns._setOwner(e)}))},t.prototype._getColByIdx=function(e){return e>-1&&e<this.length?this[e]:null},t.prototype._findColByProp=function(e,t){for(var i=0;i<this.length;i++){var n=this[i];if(n[e]===t)return n;if(null!==(n=n.columns._findColByProp(e,t)))return n}return null},t.prototype.onCollectionChanged=function(t){void 0===t&&(t=s.NotifyCollectionChangedEventArgs.reset);var i=this._changeHdl;i&&i.handleCollectionChange(),e.prototype.onCollectionChanged.call(this,t)},t}(s.ObservableArray);(0,s._addCultureInfo)("FlexGrid",{groupHeaderFormat:"{name}: <b>{value}</b> ({count:n0} items)",ariaLabels:{toggleDropDown:"Toggle Dropdown",toggleGroup:"Toggle Group",pinning:"Pinnable",pined:"Pinned",sortIndex:"Sort Index",pencil:"Item Being Edited",collapse:"Collapsed Column Header ",asterisk:"New Row Template",rowHeader:"Row Header",topleft:"Top Left",checked:"Checked",unchecked:"Unchecked",editCell:"Edit Cell",IMEInput:"IME Input",radioButtonChecked:"Radio Button Checked",newRowCell:"New Row Cell"},accessibilityHelperMessage:{insertRow:"insert before row {index}",deleteRow:"delete row {index}",pin:{pinColumnName:"Pin Column: {name}",unpinColumnName:"Unpin Column: {name}",pinColumnIndex:"Pin: {colIndex}",unpin:"Unpin"},sort:{sortAscending:"Column {name} Sorted Ascending",sortDescending:"Column {name} Sorted Descending",clearSort:"Clear sort"},frozen:{frozenColumn:"frozen column: {col} row: {row}",unfrozenColumn:"unfrozen column: {col} row: {row}"},imeHandler:{focusImeCell:"{value} {rowName} row {rowIndex} {colName} column {colIndex}"}}}),function(e){e[e.None=0]="None",e[e.SingleColumn=1]="SingleColumn",e[e.MultiColumn=2]="MultiColumn"}(ct||(ct={})),function(e){e[e.AscDesc=0]="AscDesc",e[e.DescAsc=1]="DescAsc",e[e.AscDescNone=2]="AscDescNone",e[e.DescAscNone=3]="DescAscNone"}(ut||(ut={})),function(e){e[e.None=0]="None",e[e.SingleColumn=1]="SingleColumn",e[e.ColumnRange=2]="ColumnRange",e[e.Both=3]="Both"}(dt||(dt={})),function(e){e[e.None=0]="None",e[e.Column=1]="Column",e[e.Row=2]="Row",e[e.All=3]="All"}(pt||(pt={})),function(e){e[e.Default=0]="Default",e[e.CSV=1]="CSV",e[e.QuoteAll=2]="QuoteAll",e[e.SkipMerged=4]="SkipMerged",e[e.Unformatted=8]="Unformatted",e[e.InvisibleRows=16]="InvisibleRows",e[e.InvisibleColumns=32]="InvisibleColumns",e[e.InvisibleCells=48]="InvisibleCells"}(ft||(ft={})),function(e){e[e.None=0]="None",e[e.Column=1]="Column",e[e.Row=2]="Row",e[e.All=3]="All"}(_t||(_t={})),function(e){e[e.Column=0]="Column",e[e.Row=1]="Row"}(gt||(gt={})),function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom",e[e.Auto=2]="Auto"}(mt||(mt={}));var Rt=function(e){function t(i,n){var o=e.call(this,i,null,!0)||this;o._activeCell=null,o._eNoData=null,o._srFocusHelper=null,o._srMessageHelper=null,o._imeContainer=null,o._eEditorsContainer=null,o._szClient=new s.Size(0,0),o._szClientSB=new s.Size(0,0),o._offsetY=0,o._cssPage=0,o._ptScrl=new s.Point(0,0),o._ptLastScrl=new s.Point(0,0),o._cellPadLeft=3,o._cellPadHorz=3,o._cellPadVert=0,o._clipToScreen=!1,o._anchorCell=null,o._spDiff=new s.Point(0,0),o._autoGenCols=!0,o._autoClipboard=!0,o._xOnCopyPaste=!0,o._autoScroll=!0,o._autoSearch=!1,o._caseSensitive=!1,o._readOnly=!1,o._indent=14,o._autoSizeMode=$t.Both,o._autoHeights=!1,o._quickSize=null,o._hdrVis=pt.All,o._hdrFoc=_t.None,o._alSorting=ct.SingleColumn,o._sortOrder=ut.AscDesc,o._alPinning=dt.None,o._alAddNew=!1,o._alDelete=!1,o._alResizing=Xt.Columns,o._alDragging=Zt.Columns,o._alMerging=Ht.None,o._ssHdr=pt.None,o._shSort=!0,o._shGroups=!0,o._shMarquee=!1,o._shPlcHld=!1,o._altStep=1,o._shErr=!0,o._shDropDown=!0,o._valEdt=!0,o._gHdrFmt=null,o._childItemsPath=null,o._sortRowIndex=null,o._editColIndex=null,o._deferResizing=!1,o._pSel=!0,o._pOutline=!0,o._stickyHdr=!1,o._anchorCursor=!1,o._copyHeaders=pt.None,o._bigChecks=!1,o._skipMerged=!1,o._commitEmptyEdits=!0,o._maxContent=!1,o._pasteEmptyCells=!0,o._groupSummaryPosition=mt.Top,o._noDataOverlayContent="",o._fzClone=null,o._vt=0,o._vtRows=0,o._vtCols=0,o._lazyRender=!0,o._refreshOnEdit=!0,o._reorderCells=!0,o._lastStickyScroll=0,o._scrollStickyThrottleTimeout=14,o._scrollEndTimer=null,o._contentEstimationLimit=100,o._isSilentScroll=!1,o._isISChanging=!1,o._isScrollingByWheel=!1,o.cachedDefaultHeight=-1,o.cachedHeights={},o._isSourceChanging=!1,o._canOverRuleCtrlPress=!1,o._isShiftTab=!1,o._touchEdit=!1,o._isGrpClpsChanging=!1,o._initialRestCvLoad=!0,o._grpClpsChng=!1,o.itemsSourceChanging=new s.Event,o.itemsSourceChanged=new s.Event,o.scrollPositionChanged=new s.Event,o.selectionChanging=new s.Event,o.selectionChanged=new s.Event,o.loadingRows=new s.Event,o.loadedRows=new s.Event,o.updatingLayout=new s.Event,o.updatedLayout=new s.Event,o.resizingColumn=new s.Event,o.resizedColumn=new s.Event,o.autoSizingColumn=new s.Event,o.autoSizedColumn=new s.Event,o.starSizedColumns=new s.Event,o.draggingColumn=new s.Event,o.draggingColumnOver=new s.Event,o.draggedColumn=new s.Event,o.pinningColumn=new s.Event,o.pinnedColumn=new s.Event,o.resizingRow=new s.Event,o.resizedRow=new s.Event,o.autoSizingRow=new s.Event,o.autoSizedRow=new s.Event,o.draggingRow=new s.Event,o.draggingRowOver=new s.Event,o.draggedRow=new s.Event,o.groupCollapsedChanging=new s.Event,o.groupCollapsedChanged=new s.Event,o.columnGroupCollapsedChanging=new s.Event,o.columnGroupCollapsedChanged=new s.Event,o.sortingColumn=new s.Event,o.sortedColumn=new s.Event,o.beginningEdit=new s.Event,o.prepareCellForEdit=new s.Event,o.cellEditEnding=new s.Event,o.cellEditEnded=new s.Event,o.rowEditStarting=new s.Event,o.rowEditStarted=new s.Event,o.rowEditEnding=new s.Event,o.rowEditEnded=new s.Event,o.rowAdded=new s.Event,o.deletingRow=new s.Event,o.deletedRow=new s.Event,o.copying=new s.Event,o.copied=new s.Event,o.pasting=new s.Event,o.pasted=new s.Event,o.pastingCell=new s.Event,o.pastedCell=new s.Event,o.formatItem=new s.Event((function(){o._clearCells()})),o.updatingView=new s.Event,o.updatedView=new s.Event,o._mappedColumns=null;var r=o.hostElement;(0,s.isIE)()&&(r.style.borderRadius="0");var l=o.getTemplate();if(o.applyTemplate(s.ControlClsNames.hostElement+" "+s.ControlClsNames.content+" "+s.ControlClsNames.content+" "+Ne.hostElement,l,{_root:"root",_eSz:"sz",_eCt:"cells",_fCt:"fcells",_eTL:"tl",_eBL:"bl",_eCHdr:"ch",_eRHdr:"rh",_eCFtr:"cf",_eTLCt:"tlcells",_eBLCt:"blcells",_eCHdrCt:"chcells",_eCFtrCt:"cfcells",_eRHdrCt:"rhcells",_eMarquee:"marquee",_eFocus:"focus",_eNoData:"no-data",_srFocusHelper:"sr-focus-helper",_srMessageHelper:"sr-message-helper",_imeContainer:"ime-container"}),(0,s.setCss)(o._root.parentElement,{position:"relative",left:"0",top:"0",width:"100%",height:"100%",overflow:"hidden",minWidth:"inherit",minHeight:"inherit",maxWidth:"inherit",maxHeight:"inherit"}),(0,s.setCss)(o._root,{position:"absolute",left:"0",top:"0",width:"100%",height:"100%",minWidth:"inherit",minHeight:"inherit",maxWidth:"inherit",maxHeight:"inherit",overflow:"auto",webkitOverflowScrolling:"touch"}),(0,s.setCss)(o._eCt,{position:"absolute"}),(0,s.setCss)(o._eMarquee,{display:"none"}),(0,s.setCss)(o._eMarquee.firstChild,{width:"100%",height:"100%"}),(0,s.setCss)(o._fCt,{position:"absolute",top:0,left:0,overflow:"hidden",pointerEvents:"none"}),(0,s.setCss)(o._eFocus,{position:"fixed",left:"-32000px"}),(0,s.setCss)(o._eSz,{position:"relative",visibility:"hidden"}),(0,s.setCss)(o._srFocusHelper,{position:"fixed",height:"100%"}),[o._eRHdr,o._eCFtr,o._eCHdr,o._eBL,o._eTL].forEach((function(e){(0,s.setCss)(e,{position:"absolute",overflow:"hidden",outline:"none"}),(0,s.setCss)(e.firstElementChild,{position:"relative"})})),[o._eMarquee,o._fCt,o._eSz].forEach((function(e){(0,s.setAttribute)(e,"aria-hidden",!0)})),o.itemsSource&&o.itemsSource.length>0&&((0,s.setAttribute)(o._root,"role","rowgroup"),(0,s.setAttribute)(o._eCHdr,"role","rowgroup")),(0,s.isIE9)()||(0,s.isIE10)()){var a=o._eMarquee;["click","dblclick","mousedown","mouseup"].forEach((function(e){o.addEventListener(a,e,(function(t){var i=a.style.display;a.style.display="none";var n=document.elementFromPoint(t.clientX,t.clientY);a.style.display=i;var o=document.createEvent("Event");for(var r in o.initEvent(e,!0,!0),t)try{o[r]=t[r]}catch(e){}n.dispatchEvent(o)}))}))}return r.tabIndex=-1,o._uid=(0,s.uidGenerator)(),o._ariaId=t._FLEXGRID_COUNT,t._FLEXGRID_COUNT++,o.deferUpdate((function(){var e=o._getDefaultRowHeight();o._rows=new Et(o,e),o._cols=new xt(o,4*e),o._hdrRows=new Et(o,e),o._hdrCols=new xt(o,Math.round(1.25*e)),o._ftrRows=new Et(o,e);var t=Ge;o._gpTL=new Xe(o,t.TopLeft,o._hdrRows,o._hdrCols,o._eTLCt),o._gpCHdr=new Xe(o,t.ColumnHeader,o._hdrRows,o._cols,o._eCHdrCt),o._gpRHdr=new Xe(o,t.RowHeader,o._rows,o._hdrCols,o._eRHdrCt),o._gpCells=new Xe(o,t.Cell,o._rows,o._cols,o._eCt),o._gpBL=new Xe(o,t.BottomLeft,o._ftrRows,o._hdrCols,o._eBLCt),o._gpCFtr=new Xe(o,t.ColumnFooter,o._ftrRows,o._cols,o._eCFtrCt),o.activePanel=o._gpCells,o._hdrRows.push(new yt),o._hdrCols.push(new vt({align:"center"})),o._cf=new Ft,o._keyHdl=new Qt(o),o._mouseHdl=new ri(o),o._edtHdl=new ii(o),o._selHdl=o._createSelHdl(),o._addHdl=new zt(o),o._grpHdl=new St(o),o._mrgMgr=new Ot,o._oMgr=new si,o._bndSortConverter=o._sortConverter.bind(o),o._errorTip=new s.Tooltip({isContentHtml:!1,showDelay:50,cssClass:Ne.errorTip}),o._errorTip._tooltipVisibleOnHover=!1,o._errorTip.forceRecreate=!0,o.selectionMode=Ue.CellRange,o._root.tabIndex=-1,o.rows.collectionChanged.addHandler(o._updateRowCount.bind(o)),o.columns.collectionChanged.addHandler(o._updateColumnCount.bind(o)),o.columnHeaders.rows.collectionChanged.addHandler(o._updateRowCount.bind(o)),o.addEventListener(o._eFocus,"focus",(function(e){o.rows.length||o._eNoData.focus()})),o.initialize(n)})),o.addEventListener(o._root,"scroll",(function(e){if((0,s.isChromiumBased)()&&o._handleSpaceDisorderOnScrollToEnd(),o._updateScrollPosition()||o._forceScrollUpdate){var t=o.activeEditor,i=o.activeCell,n=i?i.className:null,r=et(),l=r&&r.InputNumberClsNames.numeric;if(((0,s.hasClass)(i,"wj-detail")||(0,s.hasClass)(t,l))&&s.Control.sharedState.InvalidScroll)return void setTimeout((function(){s.Control.sharedState.InvalidScroll=!1}),0);o._forceScrollUpdate||s.Control.sharedState.InvalidScroll||o.finishEditing(),o._forceScrollUpdate=!1;var a=o._edtHdl._getCustomEditor(o),h=!(!t||!a)&&a.isOpen,c=o._edtHdl.validate;if(!h||!c){"React"===o.workingAs?requestAnimationFrame((function(){o._updateContent(!0),setTimeout((function(){s.Control.sharedState.InvalidScroll=!1}),0)})):(o._updateContent(!0),setTimeout((function(){s.Control.sharedState.InvalidScroll=!1}),0));var u=o.activeEditor,d=o.activeCell;u&&d&&t&&n?(u.value=t.value,d.className=n,o._setFocusNoScroll(u)):!u||d||s.Control.sharedState.InvalidScroll||o.finishEditing(!0)}o.columns._frozenInternal&&setTimeout((function(){var e=o.columnHeaders.hostElement.style,t=parseInt(e.left),i=o._ptScrl.x;Math.abs(t-i)>1&&o.invalidate()})),setTimeout((function(){o._isScrollingByWheel=!1,s.Control.sharedState.InvalidScroll=!1}),0)}})),o.addEventListener(r,"focus",(function(e){if(r.tabIndex>-1){var t=e.target;t instanceof HTMLElement&&t.tabIndex<0&&o._setFocus(!0)}}),!0),o.addEventListener(window,"resize",(function(){(0,s.isMobile)()||(o.finishEditing(!1),o.invalidate())})),o.addEventListener(document,"keydown",(function(e){"Tab"===e.key&&(e.shiftKey?o._isShiftTab=!0:o._isShiftTab=!1)})),o.addEventListener(o._srFocusHelper,"focus",(function(e){var t=(0,s._getFocusableElements)(document.body),i=t.indexOf(e.target),n=o._isShiftTab?i-1:i+1;i>-1&&t[n]?t[n].focus():e.target.blur()})),o.resizingColumn.addHandler(o._handleRowColResizing),o.resizingRow.addHandler(o._handleRowColResizing),o.resizedColumn.addHandler(o._getRowColResizedHandler(o,!1)),o.resizedRow.addHandler(o._getRowColResizedHandler(o,!0)),o.updatedLayout.addHandler(o.handleLoad.bind(o)),o.refreshed.addHandler(o._handleRefreshForA11y.bind(o)),o}return ze(t,e),Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate='<div>  <div wj-part="ch"><div wj-part="chcells" class="'+Ne.colHeaders+'"></div></div><div wj-part="root"><div wj-part="cells" class="'+Ne.cells+'"></div><div wj-part="no-data" class="'+Ne.noDataOverlay+'" tabindex="-1"></div><div wj-part="marquee" class="'+Ne.marquee+'"><div></div></div><div role="row" class="'+Ne.screenReaderOnly+'"><div wj-part="sr-focus-helper" tabindex="0" role="gridcell" aria-label="Focus helper"></div><div tabindex="-1" role="gridcell" aria-label="Message helper"><div wj-part="sr-message-helper" tabindex="-1" role="status" aria-live="polite" aria-atomic="true"></div></div></div><div role="row"><div wj-part="ime-container" role="gridcell"></div></div></div><div wj-part="fcells" aria-hidden="true" class="'+Ne.cells+" "+Ne.frozenClone+'"></div><div wj-part="rh"><div wj-part="rhcells" class="'+Ne.rowHeaders+'"></div></div><div wj-part="cf"><div wj-part="cfcells" class="'+Ne.colFooters+'"></div></div><div wj-part="bl"><div wj-part="blcells" class="'+Ne.bottomLeft+'"></div></div><div wj-part="tl"><div wj-part="tlcells" class="'+Ne.topLeft+'"></div></div><div role="row"><div wj-part="focus" class="'+Ne.cell+'" role="gridcell">0</div></div><div wj-part="sz"></div></div>'),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activePanel",{get:function(){return this._activePanel},set:function(e){this._activePanel=(0,s.asType)(e,Xe,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activePanelType",{get:function(){return this._activePanel?this._activePanel.cellType:Ge.Cell},enumerable:!0,configurable:!0}),t.prototype._handleSpaceDisorderOnScrollToEnd=function(){var e=new s.Size(this._szClientSB.width-(this._root.offsetWidth-this._root.clientWidth),this._szClientSB.height-(this._root.offsetHeight-this._root.clientHeight)),t=this._gpCells.width-e.width+this._ptScrl.x,i=this._gpCells.height-e.height+this._eCFtr.clientHeight+this._ptScrl.y,n=1==this._rtlDir?-1:1,o=n*(this._root.scrollLeft-this._ptLastScrl.x),r=this._root.scrollTop-this._ptLastScrl.y,l=new s.Point(this._ptLastScrl.x+o,this._ptLastScrl.y+r),a=this._gpCells.width+this._eRHdr.clientWidth-this._root.clientWidth,h=this._gpCells.height+this._eCHdr.clientHeight-this._root.clientHeight+this._eCFtr.clientHeight;if(this._ptLastScrl=new s.Point(this._root.scrollLeft,this._root.scrollTop),(t<1||l.x>a)&&o>0){var c=n*(this._gpCells.width-e.width);if(c!=this._root.scrollLeft)return this._szClient=e,this._root.scrollLeft=c,!0}else if((i<1||l.y>h)&&r>0){var u=this._gpCells.height-(e.height-this._eCFtr.clientHeight);if(this._root.scrollTop!=u)return this._szClient=e,this._root.scrollTop=u,!0}return!1},t.prototype._handleResize=function(){var t=this;this._rcBounds=null,this.activeEditor&&this.isTouching||this._touchEdit?setTimeout((function(){t.activeEditor||(t._touchEdit=!0,t.startEditing(!0))}),50):e.prototype._handleResize.call(this),this._touchEdit=!1},Object.defineProperty(t.prototype,"headersVisibility",{get:function(){return this._hdrVis},set:function(e){(e=(0,s.asEnum)(e,pt))!=this._hdrVis&&(this._hdrVis=e,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headersFocusability",{get:function(){return this._hdrFoc},set:function(e){(e=(0,s.asEnum)(e,_t))!=this._hdrFoc&&(this._hdrFoc=e,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stickyHeaders",{get:function(){return this._stickyHdr},set:function(e){e!=this._stickyHdr&&(this._stickyHdr=(0,s.asBoolean)(e),this._updateStickyHeaders(),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxContent",{get:function(){return this._maxContent},set:function(e){e!=this._maxContent&&(this._maxContent=(0,s.asBoolean)(e),this._adjustMaxContentWidth(),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"preserveSelectedState",{get:function(){return this._pSel},set:function(e){this._pSel=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"preserveOutlineState",{get:function(){return this._pOutline},set:function(e){this._pOutline=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchorCursor",{get:function(){return this._anchorCursor},set:function(e){this._anchorCursor=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"noDataOverlayContent",{get:function(){return this._noDataOverlayContent},set:function(e){this._noDataOverlayContent!=e&&(this._noDataOverlayContent=(0,s.asString)(e),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"copyHeaders",{get:function(){return this._copyHeaders},set:function(e){this._copyHeaders=(0,s.asEnum)(e,pt)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lazyRender",{get:function(){return this._lazyRender},set:function(e){this._lazyRender=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"refreshOnEdit",{get:function(){return this._refreshOnEdit},set:function(e){this._refreshOnEdit=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"virtualizationThreshold",{get:function(){return this._vt},set:function(e){this._vt=e,(0,s.isNumber)(e)?this._vtRows=this._vtCols=(0,s.asNumber)(e):e?(0,s.isArray)(e)&&2==e.length?(this._vtRows=(0,s.asNumber)(e[0]),this._vtCols=(0,s.asNumber)(e[1])):(0,s.assert)(!1,"virtualizationThreshold should be a number or an array with two numbers."):this._vtRows=this._vtCols=0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoGenerateColumns",{get:function(){return this._autoGenCols},set:function(e){this._autoGenCols=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoClipboard",{get:function(){return this._autoClipboard},set:function(e){this._autoClipboard=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"expandSelectionOnCopyPaste",{get:function(){return this._xOnCopyPaste},set:function(e){this._xOnCopyPaste=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoScroll",{get:function(){return this._autoScroll},set:function(e){this._autoScroll=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoSearch",{get:function(){return this._autoSearch},set:function(e){this._autoSearch=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"caseSensitiveSearch",{get:function(){return this._caseSensitive},set:function(e){this._caseSensitive=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnLayout",{get:function(){var e,i=this._hasColumnGroups(),n=i?It:vt,o=i?"columnGroups":"columns",r=t._getSerializableProperties(n),l=i?["collapseTo"]:[],a=["size"],h=new n,c=i?this.getColumnGroups():this.columns,u=function(e){var t=[];return e.forEach((function(e){var n={};if(r.forEach((function(t){var i=e[t];(function(e,t){return t!=h[e]&&a.indexOf(e)<0&&((0,s.isPrimitive)(t)||l.indexOf(e)>-1)})(t,i)&&(n[t]=i)})),i){var o=e.columns;o.length&&(n.columns=u(o))}t.push(n)})),t},d=u(c);return JSON.stringify(((e={})[o]=d,e))},set:function(e){var t=this,i=JSON.parse((0,s.asString)(e));(0,s.assert)(i,"Invalid columnLayout data."),this.columns.deferUpdate((function(){t.columns.clear(),t._hasColumnGroups()&&(t.columnGroups=new Dt),t.initialize(i)}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnGroups",{get:function(){return this._grpHdl.getGroupDefinitions()},set:function(e){this.columns.clear(),this._grpHdl.createColumnGroups((0,s.asArray)(e))},enumerable:!0,configurable:!0}),t.prototype.getColumnGroups=function(){return this._grpHdl.columnGroups},Object.defineProperty(t.prototype,"isReadOnly",{get:function(){return this._readOnly},set:function(e){e!=this._readOnly&&(this._readOnly=(0,s.asBoolean)(e),this.finishEditing(),this.invalidate(!0),this._addHdl.updateNewRowTemplate(),(0,s.toggleClass)(this.hostElement,s.ControlStateClsNames.readOnly,this.isReadOnly),this._setAria("aria-readonly",this.isReadOnly?"true":"false"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bigCheckboxes",{get:function(){return this._bigChecks},set:function(e){this._bigChecks=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skipMerged",{get:function(){return this._skipMerged},set:function(e){this._skipMerged=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pasteEmptyCells",{get:function(){return this._pasteEmptyCells},set:function(e){this._pasteEmptyCells=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDisabled",{get:function(){return this._e&&null!=this._e.getAttribute("disabled")},set:function(e){if((e=(0,s.asBoolean)(e,!0))!=this.isDisabled){var t=this._e;t&&((0,s.enable)(t,!e),this._updateTabIndex(),this.invalidate())}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imeEnabled",{get:function(){return null!=this._imeHdl},set:function(e){if((0,s.asBoolean)(e)!=this.imeEnabled&&this.finishEditing()){var t=this.containsFocus();this._imeHdl&&(this._imeHdl.dispose(),this._imeHdl=null),e&&(this._imeHdl=new Tt(this)),t&&this.focus()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowResizing",{get:function(){return this._alResizing},set:function(e){this._alResizing=(0,s.asEnum)(e,Xt)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"deferResizing",{get:function(){return this._deferResizing},set:function(e){this._deferResizing=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoSizeMode",{get:function(){return this._autoSizeMode},set:function(e){this._autoSizeMode=(0,s.asEnum)(e,$t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoRowHeights",{get:function(){return this._autoHeights},set:function(e){this._autoHeights=(0,s.asBoolean)(e),this._autoRowHeights()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"quickAutoSize",{get:function(){return this._quickSize},set:function(e){this._quickSize=(0,s.asBoolean)(e,!0)},enumerable:!0,configurable:!0}),t.prototype._getQuickAutoSize=function(){return(0,s.isBoolean)(this._quickSize)?this._quickSize:!this.formatItem.hasHandlers&&null==this.itemFormatter},Object.defineProperty(t.prototype,"allowSorting",{get:function(){return this._alSorting},set:function(e){(0,s.isBoolean)(e)&&(e=e?ct.SingleColumn:ct.None),this._alSorting=(0,s.asEnum)(e,ct)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sortOrder",{get:function(){return this._sortOrder},set:function(e){e=(0,s.asEnum)(e,ut),this._sortOrder!=e&&(this._sortOrder=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowPinning",{get:function(){return this._alPinning},set:function(e){e!=this._alPinning&&((0,s.isBoolean)(e)&&(e=e?dt.SingleColumn:dt.None),this._alPinning=(0,s.asEnum)(e,dt),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowAddNew",{get:function(){return this._alAddNew},set:function(e){e!=this._alAddNew&&(this._alAddNew=(0,s.asBoolean)(e),this._addHdl.updateNewRowTemplate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"newRowAtTop",{get:function(){return this._addHdl.newRowAtTop},set:function(e){this._addHdl.newRowAtTop=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowDelete",{get:function(){return this._alDelete},set:function(e){e!=this._alDelete&&(this._alDelete=(0,s.asBoolean)(e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowMerging",{get:function(){return this._alMerging},set:function(e){(e=(0,s.asEnum)(e,Ht))!=this._alMerging&&(this._alMerging=e,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showSelectedHeaders",{get:function(){return this._ssHdr},set:function(e){(e=(0,s.asEnum)(e,pt))!=this._ssHdr&&(this._ssHdr=e,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showMarquee",{get:function(){return this._shMarquee},set:function(e){e!=this._shMarquee&&(this._shMarquee=(0,s.asBoolean)(e),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showPlaceholders",{get:function(){return this._shPlcHld},set:function(e){this._shPlcHld=(0,s.asBoolean)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showSort",{get:function(){return this._shSort},set:function(e){e!=this._shSort&&(this._shSort=(0,s.asBoolean)(e),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showGroups",{get:function(){return this._shGroups},set:function(e){e!=this._shGroups&&(this._shGroups=(0,s.asBoolean)(e),this._bindGrid(!1))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alternatingRowStep",{get:function(){return this._altStep},set:function(e){e!=this._altStep&&(this._altStep=(0,s.asInt)(e,!1,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showAlternatingRows",{get:function(){return this._altStep>0},set:function(e){(0,s._deprecated)("showAlternatingRows","alternatingRowStep"),this.alternatingRowStep=e?1:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showErrors",{get:function(){return this._shErr},set:function(e){e!=this._shErr&&(this._clearCells(),this._shErr=(0,s.asBoolean)(e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"errorTip",{get:function(){return this._errorTip},set:function(e){e!=this._errorTip&&(this._clearCells(),this._errorTip=(0,s.asType)(e,s.Tooltip,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemValidator",{get:function(){return this._itemValidator},set:function(e){e!=this.itemValidator&&(this._itemValidator=(0,s.asFunction)(e),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validateEdits",{get:function(){return this._valEdt},set:function(e){this._setvalidateEdits(e)},enumerable:!0,configurable:!0}),t.prototype._setvalidateEdits=function(e){this._valEdt=(0,s.asBoolean)(e)},Object.defineProperty(t.prototype,"groupHeaderFormat",{get:function(){return this._gHdrFmt},set:function(e){e!=this._gHdrFmt&&(this._gHdrFmt=(0,s.asString)(e),this._bindGrid(!1))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowDragging",{get:function(){return this._alDragging},set:function(e){(e=(0,s.asEnum)(e,Zt))!=this._alDragging&&(this._alDragging=e,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ariaLabel",{get:function(){return this._ariaLabel?this._ariaLabel:this._gridRoleElement()?this._gridRoleElement().getAttribute("aria-label"):this._ariaLabel},set:function(e){this._ariaLabel=e,this._setAria("aria-label",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemsSource",{get:function(){return this._items},set:function(e){var t=this;if(e!=this._items){var i=new s.CancelEventArgs;if(this.onItemsSourceChanging(i)){var n=0;if(this._cv&&(n=(o=this._cv).currentPosition&&this._getRowIndex(o.currentPosition),this._isServerCollectionView(this._cv)&&((l=this.collectionView).loading.removeHandler(null,this),l.loaded.removeHandler(null,this)),o.currentChanged.removeHandler(null,this),o.collectionChanged.removeHandler(null,this),o instanceof s.CollectionView&&o.sortConverter==this._bndSortConverter&&(o.sortConverter=null),this._cv=null),this._items=e,this._cv=this._getCollectionView(e),this._cv&&!(0,s.isNullOrUndefined)(this._cv.currentPosition)&&(this._cv.currentPosition=n||0),this._lastCount=0,this._cv){var o,r,l;if((o=this._cv).collectionChanged.addHandler((function(e,i){return t._cvCollectionChanged(e,i)}),this),this._isServerCollectionView(this._cv))(l=this.collectionView).groupLazyLoading&&this._isFlexSheetInstance()&&console.error("groupLazyLoading is not supported for FlexSheet."),l.loading.addHandler((function(e,i){r=t.selection}),this),l.loaded.addHandler((function(e,i){return t._restCvLoadedHandler(e,i,r)}),this);o.currentChanged.addHandler((function(e,i){return t._cvCurrentChanged(e,i)}),this),o instanceof s.CollectionView&&(e&&(o.trackChanges=Boolean(e.trackChanges)),o.sortConverter&&!this._isFlexSheetInstance()||(o.sortConverter=this._bndSortConverter))}this._isISChanging=!0,this.disposed||this._bindGrid(!0),this._isISChanging=!1,this.onItemsSourceChanged(i)}}},enumerable:!0,configurable:!0}),t.prototype._restCvLoadedHandler=function(e,t,i){var n=this;e.groupLazyLoading&&this.deferUpdate((function(){n._isGrpClpsChanging=!0,n.rows.deferUpdate((function(){for(var e=0;e<n.rows.length;e++)n.rows[e]instanceof wt&&Object.keys(n.rows[e].dataItem.items[0]).length==n.rows[e].dataItem.level+1&&(n.rows[e].isCollapsed=!0)})),n._isGrpClpsChanging=!1})),e._virtualization&&(e.groupDescriptions.length&&this.deferUpdate((function(){n._loadVirtualizedItems()})),this._isGrpClpsChanging=!1),(e._virtualization||e.groupLazyLoading)&&this.selection&&-1==this.selection.row&&i&&-1!=i.row&&this.select(i,!1,this.cells),this._initialRestCvLoad&&(0==this.selectionMode&&-1!=this.selection.row&&this.select(-1,0),this._initialRestCvLoad=!1,this._isFlexSheetInstance()&&(this._selHdl.selection.col=this._selHdl.selection.col2=0))},t.prototype._loadVirtualizedItems=function(){for(var e=this.viewRange,t=this.collectionView,i=null,n=e.row;n<=e.row2;n++)!(this.rows[n]instanceof wt)&&this.rows[n].dataItem instanceof s._NullValue&&-1!==this.rows[n].visibleIndex?null===i&&(i=n):null!==i&&(t.setWindow(i-this._getGroupCount(i),n-1),i=null);null!==i&&t.setWindow(i-this._getGroupCount(i),e.row2)},Object.defineProperty(t.prototype,"collectionView",{get:function(){return this._cv},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editableCollectionView",{get:function(){return(0,s.tryCast)(this._cv,"IEditableCollectionView")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"childItemsPath",{get:function(){return this._childItemsPath},set:function(e){e!=this._childItemsPath&&((0,s.assert)(null==e||(0,s.isArray)(e)||(0,s.isString)(e),"childItemsPath should be an array or a string."),this._childItemsPath=e,this._bindGrid(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rowHeaderPath",{get:function(){return this._rowHdrPath?this._rowHdrPath.path:null},set:function(e){e!=this.rowHeaderPath&&(e=(0,s.asString)(e),this._rowHdrPath=e?new s.Binding(e):null,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cells",{get:function(){return this._gpCells},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnHeaders",{get:function(){return this._gpCHdr},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnFooters",{get:function(){return this._gpCFtr},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rowHeaders",{get:function(){return this._gpRHdr},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeftCells",{get:function(){return this._gpTL},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomLeftCells",{get:function(){return this._gpBL},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columns",{get:function(){return this._cols},enumerable:!0,configurable:!0}),t.prototype.getColumn=function(e,t){if(this._hasColumnGroups()&&t){var i=this.getColumnGroups();return null!==i?i.getColumn(e):null}return this.columns.getColumn(e)},Object.defineProperty(t.prototype,"frozenCells",{get:function(){return{top:this.rows.frozen,bottom:this.rows.frozenEnd,left:this.columns.frozen,right:this.columns.frozenEnd}},set:function(e){if(this._isFrozenObjectAllowed()){(0,s.assert)("object"==typeof e,"Object of type IGridFreezeOptions expected");var t={top:e.top?e.top:0,bottom:e.bottom?e.bottom:0,left:e.left?e.left:0,right:e.right?e.right:0},i=0;t.top?(i=this.rows.getDetailRowCountUptoRow(t.top),t.top+=i):t.bottom&&(i=this.rows.getDetailRowCountUptoRow(-t.bottom),t.bottom+=i),this.rows.frozen=t.top,this.rows.frozenEnd=t.bottom,i&&(this.rows.frozenDetailChildren=i),this.columns.frozen=t.left,this.columns.frozenEnd=t.right}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frozenRows",{get:function(){return this.rows.frozen-this.rows.frozenDetailChildren},set:function(e){var t=this.rows.getDetailRowCountUptoRow(e);this.rows.frozen=e+t,this.rows.frozenDetailChildren=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frozenColumns",{get:function(){return this.columns.frozen},set:function(e){this.columns.frozen=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cloneFrozenCells",{get:function(){return this._fzClone},set:function(e){e!=this._fzClone&&((0,s.setText)(this._fCt,null),this._fzClone=(0,s.asBoolean)(e,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sortRowIndex",{get:function(){return this._sortRowIndex},set:function(e){e!=this._sortRowIndex&&(this._sortRowIndex=(0,s.asNumber)(e,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editColumnIndex",{get:function(){return this._editColIndex},set:function(e){e!=this._editColIndex&&(this._editColIndex=(0,s.asNumber)(e,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollPosition",{get:function(){return this._ptScrl.clone()},set:function(e){var i=this._root,n=-e.x;if(this.rightToLeft)switch(t._getRtlMode()){case"rev":n=i.scrollWidth-i.clientWidth+e.x;break;case"neg":n=e.x;break;default:n=-e.x}i.scrollLeft!=n&&(i.scrollLeft=n),i.scrollTop!=-e.y&&(i.scrollTop=-e.y),this._updateScrollPosition()&&(this._forceScrollUpdate=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"commitEmptyEdits",{get:function(){return this._commitEmptyEdits},set:function(e){e!=this._commitEmptyEdits&&(this._commitEmptyEdits=(0,s.asBoolean)(e),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clientSize",{get:function(){return this._szClient},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"controlRect",{get:function(){return this._rcBounds||(this._rcBounds=(0,s.getElementRect)(this._root)),this._rcBounds},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollSize",{get:function(){return new s.Size(this._gpCells.width,this._heightBrowser)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewRange",{get:function(){return this._gpCells.viewRange},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cellFactory",{get:function(){return this._cf},set:function(e){e!=this._cf&&(this._clearCells(),this._cf=(0,s.asType)(e,Ft,!1))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemFormatter",{get:function(){return this._itemFormatter},set:function(e){e!=this._itemFormatter&&(this._clearCells(),this._itemFormatter=(0,s.asFunction)(e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"groupSummaryPosition",{get:function(){return this.childItemsPath?mt.Top:this._groupSummaryPosition},set:function(e){e!==this._groupSummaryPosition&&(this._groupSummaryPosition=(0,s.asEnum)(e,mt,!1),this._bindGrid(!1))},enumerable:!0,configurable:!0}),t.prototype.canEditCell=function(e,t){return this._edtHdl._allowEdit(e,t)},t.prototype.getCellData=function(e,t,i){return this.cells.getCellData(e,t,i)},t.prototype.getRowDataItem=function(e,t){return this.rows[(0,s.asNumber)(e,!1,!0)].dataItem},t.prototype._getRowData=function(e){return this.cells._getRowData(e)},t.prototype.getCellBoundingRect=function(e,t,i){return this.cells.getCellBoundingRect(e,t,i)},t.prototype.setCellData=function(e,t,i,n,o){return void 0===n&&(n=!0),void 0===o&&(o=!0),this.cells.setCellData(e,t,i,n,o)},t.prototype.hitTest=function(e,t){return(0,s.isNumber)(e)&&(0,s.isNumber)(t)&&(e=new s.Point(e,t)),(0,s.isBoolean)(t)&&t&&(this._rcBounds=null),new ti(this,e)},t.prototype.getClipString=function(e,t,i,n){var o;return o=this.skipMerged?ft.SkipMerged:null==t||(0,s.isBoolean)(t)?t?ft.CSV:ft.Default:t,(0,s.assert)((0,s.isNumber)(o),"Unexpected value for ClipStringOptions parameter."),this._edtHdl.getClipString(e,o,i,n)},t.prototype.setClipString=function(e,t){this._edtHdl.setClipString(e,t)},t.prototype.focus=function(e){this.isDisabled||this._setFocus(e)},t.prototype.dispose=function(){var i=this;this.disposed=!0,this._afClip&&(cancelAnimationFrame(this._afClip),this._afClip=null),this.finishEditing(!0),this.itemsSource=null,this.rows.clear(),this.columns.clear(),this._hdrRows.clear(),this._hdrCols.clear(),this._ftrRows.clear(),this._invalidateTimer&&(clearTimeout(this._invalidateTimer),this._invalidateTimer=null),this.collectionView&&(this.collectionView.collectionChanged.removeHandler(this._updateRowCount),this.collectionView.collectionChanged.removeHandler(this._updateColumnCount)),this._errorTip&&(this._errorTip=null),["_gpTL","_gpCHdr","_gpRHdr","_gpCells","_gpBL","_gpCFtr"].forEach((function(e){var t=i[e];t&&t.dispose(),i[e]=null})),["_root","_eTL","_eTLCt","_eCHdr","_eCHdrCt","_eRHdr","_eRHdrCt","_eCt","_eBL","_eBLCt","_eCFtrCt","_eCFtr","_fCt","_eFocus","_eSz","_eMarquee","_eNoData","_srFocusHelper","_imeContainer","_srMessageHelper"].forEach((function(e){return i[e]=null})),this._activeCell=null,this._activePanel=null,t._ctrlTemplate=null,["_mouseHdl","_keyHdl","_edtHdl","_selHdl","_addHdl","_grpHdl","_imeHdl","_mrgMgr","_oMgr"].forEach((function(e){i[e]&&i[e].dispose&&i[e].dispose(),i[e]=null})),Ft.dispose(),e.prototype.dispose.call(this)},t.prototype.refresh=function(t){void 0===t&&(t=!0),e.prototype.refresh.call(this,t),this.finishEditing(),t&&(this._updateColumnTypes(),this.scrollPosition=this._ptScrl,this._updateDefaultSizes(),clearTimeout(this._toInv),this._toInv=null),this.refreshCells(t);var i=this._e;i&&(this._szCtl=new s.Size(i.offsetWidth,i.offsetHeight))},t.prototype.refreshCells=function(e,t,i){this.isUpdating||(e?this._updateLayout():this._updateContent(t,i))},t.prototype.refreshRange=function(e){for(var t=e.topRow;t<=e.bottomRow;t++)for(var i=e.leftCol;i<=e.rightCol;i++){var n=this.cells.getCellElement(t,i);if(n){var o=n[Xe._INDEX_KEY];this.cellFactory.updateCell(this.cells,t,i,n,o.rng)}}this._useFrozenDiv()&&this._updateFrozenCells(!0,!0)},t.prototype.autoSizeColumn=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=4),this.autoSizeColumns(e,e,t,i)},t.prototype.autoSizeColumns=function(e,i,n,o){var r=this;void 0===n&&(n=!1),void 0===o&&(o=4);var l=0,a=n?this.topLeftCells:this.columnHeaders,h=n?this.bottomLeftCells:this.columnFooters,c=n?this.rowHeaders:this.cells,u=this.viewRange;e=null==e?0:(0,s.asInt)(e),i=null==i?c.columns.length-1:(0,s.asInt)(i),u.row=Math.max(0,u.row-1e3),u.row2=Math.min(u.row2+1e3,this.rows.length-1),this.finishEditing()&&this.columns.deferUpdate((function(){(0,s.setCss)(r._eCt,{width:r._gpCells.width});for(var n=(0,s.createElement)("<div "+t._WJS_MEASURE+'="true"/>',c.hostElement,{visibility:"hidden"}),d=r._getCanvasContext(),p=e;p<=i&&p>-1&&p<c.columns.length;p++){var f=c.columns[p];if(f.isVisible){if(l=0,r.autoSizeMode&$t.Headers){for(var _=0;_<a.rows.length;_++)a.rows[_].isVisible&&(l=Math.max(r._getDesiredWidth(a,_,p,n),l));for(_=0;_<h.rows.length;_++)h.rows[_].isVisible&&(l=Math.max(r._getDesiredWidth(h,_,p,n),l))}if(r.autoSizeMode&$t.Cells&&u.row>-1&&u.row2>-1)if(f._getQuickAutoSize())_=r._getWidestRow(c,u,p,d),l=Math.max(r._getDesiredWidth(c,_,p,n),l);else for(_=u.row;_<=u.row2&&_<c.rows.length;_++)c.rows[_].isVisible&&(l=Math.max(r._getDesiredWidth(c,_,p,n),l));l>0&&(f.width=l+o+2)}}r.cellFactory.disposeCell(n),(0,s.removeChild)(n)}))},t.prototype.autoSizeRow=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=0),this.autoSizeRows(e,e,t,i)},t.prototype.autoSizeRows=function(e,i,n,o){var r=this;void 0===n&&(n=!1),void 0===o&&(o=0);var l=0,a=1==n?this.topLeftCells:null==n?this.bottomLeftCells:this.rowHeaders,h=1==n?this.columnHeaders:null==n?this.columnFooters:this.cells;if(o=(0,s.asNumber)(o),e=null==e?0:(0,s.asInt)(e),(i=null==i?h.rows.length-1:(0,s.asInt)(i))>=e&&this.finishEditing()){(0,s.setCss)(this._eCt,{width:this._gpCells.width}),this.cachedHeights={};var c=(0,s.createElement)("<div "+t._WJS_MEASURE+'="true"/>',h.hostElement,{visibility:"hidden"});this.rows.deferUpdate((function(){for(var t={},n=r._autoSizeMode,s=$t,u=e;u<=i&&u>-1&&u<h.rows.length;u++)h.rows[u].isVisible&&(l=0,n&s.Headers&&(l=r._getDesiredRowHeight(a,u,c,t)),n&s.Cells&&(l=Math.max(r._getDesiredRowHeight(h,u,c,t),l)),l>0&&(h.rows[u].height=l+o))})),this.cellFactory.disposeCell(c),(0,s.removeChild)(c)}},Object.defineProperty(t.prototype,"treeIndent",{get:function(){return this._indent},set:function(e){e!=this._indent&&(this._indent=(0,s.asNumber)(e,!1,!0),this.columns.onCollectionChanged())},enumerable:!0,configurable:!0}),t.prototype.collapseGroupsToLevel=function(e){var t=this;this.finishEditing()&&(this._isServerCollectionView(this._cv)&&(this._grpClpsChng=!0),this.deferUpdate((function(){var i=t.rows;i.deferUpdate((function(){for(var t=0;t<i.length;t++){var n=i[t];n instanceof wt&&!n.isSummary&&(n.isCollapsed=n.level>=e)}}))}))),this._grpClpsChng=!1},Object.defineProperty(t.prototype,"selectionMode",{get:function(){return this._selHdl.selectionMode},set:function(e){(e=(0,s.asEnum)(e,Ue))!=this.selectionMode&&(this._selHdl.selectionMode=e,this._updateTabIndex())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selection",{get:function(){return this._selHdl.selection.clone()},set:function(e){this._selHdl.selection=e},enumerable:!0,configurable:!0}),t.prototype.select=function(e,t,i){return void 0===t&&(t=!0),this._selHdl.select(e,t,!1,i)},t.prototype.selectAll=function(){var e=this.rows.length,t=this.columns.length;return!(!e||!t)&&this.select(new qe(0,0,e-1,t-1),!1)},t.prototype.getSelectedState=function(e,t){return this.cells.getSelectedState(e,t)},Object.defineProperty(t.prototype,"selectedRows",{get:function(){var e=this,t=this.selectionMode,i=this.rows.filter((function(e){return e.isSelected}));if(0==i.length&&t!=Ue.None&&t!=Ue.ListBox){var n=[];this.selectedRanges.forEach((function(t){for(var i=t.topRow;i<=t.bottomRow&&i>-1&&i<e.rows.length;i++)n.indexOf(i)<0&&n.push(i)})),n.sort((function(e,t){return e-t})),i=n.map((function(t){return e.rows[t]}))}return i},set:function(e){var t=this;(0,s.assert)(this.selectionMode==Ue.ListBox,"This property can be set only in ListBox mode."),e=(0,s.asArray)(e),this.deferUpdate((function(){for(var i=0,n=!0;i<t.rows.length;i++){var o=t.rows[i],r=e&&e.indexOf(o)>-1;r&&n&&(n=!1,t.select(i,t.selection.col)),o.isSelected=r}}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedItems",{get:function(){var e=[];return this.selectedRows.forEach((function(t){var i=t?t.dataItem:null;i&&e.indexOf(i)<0&&e.push(i)})),e},set:function(e){var t=this;(0,s.assert)(this.selectionMode==Ue.ListBox,"This property can be set only in ListBox mode."),e=(0,s.asArray)(e),this.deferUpdate((function(){for(var i=0,n=!0;i<t.rows.length;i++){var o=t.rows[i],r=e&&e.indexOf(o.dataItem)>-1;r&&n&&(n=!1,t.select(i,t.selection.col)),o.isSelected=r}}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedRanges",{get:function(){var e=[this.selection];return this._selHdl.extendedSelection.forEach((function(t){e.push(t)})),e},set:function(e){if((e=(0,s.asArray)(e))&&e.length>0&&(this.select(e[0]),this.selectionMode==Ue.MultiRange)){var t=this._selHdl.extendedSelection;t.deferUpdate((function(){t.clear();for(var i=1;i<e.length;i++)t.push(e[i])}))}},enumerable:!0,configurable:!0}),t.prototype.scrollIntoView=function(e,t,i){var n=this;(null==this._maxOffsetY||this._rows._dirty||this._cols._dirty)&&e>-1&&this._updateLayout();var o=this.scrollPosition,r=this._szClient,l=r.width,a=r.height-this._gpCFtr.rows.getTotalSize(),h=this.cells._getFrozenPos();e=(0,s.asInt)(e),(0,s.isString)(t)&&(t=this.columns.indexOf(t)),t=(0,s.asInt)(t),e=e>=this.rows.length?-1:e,t=t>=this.columns.length?-1:t;var c=null;try{var u=this.getMergedRange(this.cells,e,t,!1);c=u;var d=this.cells._getFrozenPos();this.rows._frozenInternal>=0?u&&u.rowSpan>1&&this._rows[e].pos>d.y+-this.scrollPosition.y&&this._rows[e].renderHeight*u.rowSpan<this.hostElement.clientHeight&&this._edtHdl._getCustomEditor(this)&&(e=u.bottomRow):u&&u.rowSpan>1&&this._rows[u.bottomRow].pos+this._rows[u.bottomRow].renderHeight>d.y+-this.scrollPosition.y&&this._rows[u.bottomRow].pos-this._rows[u.topRow].pos+this._rows[u.bottomRow].renderHeight<this.clientSize.height&&(e=u.bottomRow)}catch(e){}var p=this._rows[e];if(e>-1&&e<this._rows.length&&!this._rows.isFrozen(e)){var f=this._getCssPage(p.pos);if(f!=this._cssPage){for(var _=this._maxOffsetY,g=Math.round(_*f);g>p.pos;f-=.1)g=Math.round(_*f);this._offsetY=g}var m=p.pos-this._offsetY,b=m+p.renderSize;b>a-o.y&&(o.y=Math.max(-m,a-b)),this.rows._frozenInternal>=0?m-h.y<-o.y&&(o.y=-(m-h.y)):(p.pos<-o.y&&(o.y=-p.pos),b+o.y-h.y>0&&(o.y-=b+o.y-h.y),0==Math.abs(o.y-(this._ptScrl.y-this._spDiff.y))&&(o.y=this._ptScrl.y)),f!=this._cssPage&&(this._cssPage=this._getCssPage(-o.y))}if((0,s.isString)(t)&&(t=this.columns.indexOf(t)),(t=(0,s.asInt)(t))>-1&&t<this._cols.length&&!this._cols.isFrozen(t)){var v=this._cols[t],y=v.pos+v.renderSize;y>-o.x+l&&(o.x=Math.max(-v.pos,l-y)),this.columns._frozenInternal>=0?v.pos-h.x<-o.x&&(o.x=-(v.pos-h.x)):(v.pos<-o.x&&(o.x=-v.pos),y+o.x-h.x>0&&(o.x-=y+o.x-h.x),0==Math.abs(o.x-(this._ptScrl.x-this._spDiff.x))&&(o.x=this._ptScrl.x),this.rightToLeft&&!this._rows.isFrozen(e)&&(0,s.isFirefox)()&&o.x++)}if(!o.equals(this._ptScrl,1,.8)){var w=1,C=1;return this.columns._frozenInternal<0&&(w=-1),this.rows._frozenInternal<0&&(C=-1),o.x!=this._ptScrl.x&&this._root.clientWidth-o.x<this._root.scrollWidth&&(0!==o.x?o.x-=1*w:this.rightToLeft&&(o.x+=1*w)),0!==o.y&&o.y<this._ptScrl.y&&this._root.clientHeight-o.y<this._root.scrollHeight&&(o.y-=1*C),this.scrollPosition=o,i&&(this._updateScrollPosition(),this._forceScrollUpdate=!1,this.refresh()),this._spDiff.x=this._ptScrl.x-o.x,this._spDiff.y=this._ptScrl.y-o.y,setTimeout((function(){var e=(0,s.getActiveElement)();e.classList.contains(s.ControlStateClsNames.invalid)&&n.errorTip._showAutoTip(void 0,e)}),50),!0}if(e>-1&&t>-1){var x=this._root,E=x.scrollWidth==x.clientWidth,S=x.scrollHeight==x.clientHeight;if(E||S){var I=(0,s.getScrollableParent)(this.hostElement);if(I.clientHeight==I.scrollHeight&&I.clientWidth==I.scrollWidth)return!1;var D=(0,s.getOffsetFromAncestor)(this.hostElement,I),R=this.cells.getCellElement(e,t),T=c||new qe(e,t),P=T.getRenderSize(this.cells),M=this.rows[T.topRow].pos+this._eCHdr.clientHeight,A=this.columns[T.leftCol].pos+this._eRHdr.clientWidth,H=R?R.clientWidth:P.width,z=R?R.clientHeight:P.height,k=M+D.top,O=A+D.left,L=k+z,F=O+H,B=I.clientWidth,V=I.clientHeight,j=I.scrollTop,N=I.scrollLeft,K=j+V,G=N+B;if(this.stickyHeaders&&(j+=this._eCHdr.clientHeight-1),this.rightToLeft&&(O=(F=D.left+x.clientWidth-this._eRHdr.clientWidth-this.columns[T.leftCol].pos)-H),j<=k&&L<=K&&N<=O&&F<=G)return!1;var W=0,q=0;if(S&&(j>k?q=k-j:K<L&&(q=L-K)),E&&(N>O?W=O-N:G<F&&(W=F-G)),I.scrollBy(W,q),W||q)return i&&(this._isSilentScroll=!0),!0}}return!1},t.prototype.isRangeValid=function(e){return e&&e.isValid&&e.bottomRow<this.rows.length&&e.rightCol<this.columns.length},t.prototype.startEditing=function(e,t,i,n,o){return void 0===e&&(e=!0),this._edtHdl.startEditing(e,t,i,n,o)},t.prototype.finishEditing=function(e){return this._edtHdl.finishEditing(e)},Object.defineProperty(t.prototype,"activeCell",{get:function(){return this._activeCell},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activeEditor",{get:function(){var e=this._edtHdl;return e?e.activeEditor:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editRange",{get:function(){var e=this._edtHdl.editRange;return e?e.clone():null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mergeManager",{get:function(){return this._mrgMgr},set:function(e){e!=this._mrgMgr&&(this._mrgMgr=(0,s.asType)(e,Ot,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"overlayManager",{get:function(){return this._oMgr},set:function(e){e!=this._oMgr&&(this._oMgr=(0,s.asType)(e,si,!0),this.invalidate())},enumerable:!0,configurable:!0}),t.prototype.getMergedRange=function(e,t,i,n){return void 0===n&&(n=!0),this._mrgMgr?this._mrgMgr.getMergedRange(e,t,i,n):null},Object.defineProperty(t.prototype,"keyActionTab",{get:function(){return this._keyHdl._kaTab},set:function(e){this._keyHdl._kaTab=(0,s.asEnum)(e,Yt)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keyActionEnter",{get:function(){return this._keyHdl._kaEnter},set:function(e){this._keyHdl._kaEnter=(0,s.asEnum)(e,Yt)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"preserveWhiteSpace",{get:function(){return(0,s.hasClass)(this.hostElement,t._WJS_WSPRE)},set:function(e){(0,s.toggleClass)(this.hostElement,t._WJS_WSPRE,(0,s.asBoolean)(e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showDropDown",{get:function(){return this._shDropDown},set:function(e){e!=this._shDropDown&&(this._shDropDown=(0,s.asBoolean)(e,!0),this.invalidate())},enumerable:!0,configurable:!0}),t.prototype.toggleDropDownList=function(){return this._tglDropDown||(this._tglDropDown=!0,this._edtHdl._toggleListBox(null),this._tglDropDown=!1),null!=this._edtHdl._lbx},Object.defineProperty(t,"defaultTypeWidth",{get:function(){return t._defTypeWidth},enumerable:!0,configurable:!0}),t.prototype.onItemsSourceChanging=function(e){return this.itemsSourceChanging.raise(this,e),!e.cancel},t.prototype.onItemsSourceChanged=function(e){this.itemsSourceChanged.raise(this,e)},t.prototype.onScrollPositionChanged=function(e){if(this.scrollPositionChanged.raise(this,e),this._isServerCollectionView(this.collectionView)){var t=this.collectionView;if(t._virtualization&&t.groupDescriptions.length>0){var i=this.showGroups?this._getGroupCount(this.viewRange.row):0;t.setWindow(Math.floor((this.viewRange.row-i)/this._getRowsPerItem()),Math.ceil((this.viewRange.row2-i)/this._getRowsPerItem()))}t._virtualization&&0==t.groupDescriptions.length&&t.setWindow(Math.floor(this.viewRange.row/this._getRowsPerItem()),Math.ceil(this.viewRange.row2/this._getRowsPerItem()))}},t.prototype.onSelectionChanging=function(e){return this.selectionChanging.raise(this,e),!e.cancel},t.prototype.onSelectionChanged=function(e){this.selectionChanged.raise(this,e)},t.prototype.onLoadingRows=function(e){return this.loadingRows.raise(this,e),!e.cancel},t.prototype.onLoadedRows=function(e){this.loadedRows.raise(this,e),this._autoRowHeights()},t.prototype.onUpdatingLayout=function(e){return this.updatingLayout.raise(this,e),!e.cancel},t.prototype.onUpdatedLayout=function(e){this.updatedLayout.raise(this,e)},t.prototype.onResizingColumn=function(e){return this.resizingColumn.raise(this,e),!e.cancel},t.prototype.onResizedColumn=function(e){this.resizedColumn.raise(this,e),this._autoRowHeights()},t.prototype.onAutoSizingColumn=function(e){return this.autoSizingColumn.raise(this,e),!e.cancel},t.prototype.onAutoSizedColumn=function(e){this.autoSizedColumn.raise(this,e)},t.prototype.onStarSizedColumns=function(e){this.starSizedColumns.raise(this,e),this._autoRowHeights()},t.prototype.onDraggingColumn=function(e){return this.draggingColumn.raise(this,e),!e.cancel},t.prototype.onDraggingColumnOver=function(e){return this.draggingColumnOver.raise(this,e),!e.cancel},t.prototype.onDraggedColumn=function(e){this.draggedColumn.raise(this,e)},t.prototype.onPinningColumn=function(e){return this.pinningColumn.raise(this,e),!e.cancel},t.prototype.onPinnedColumn=function(e){this.pinnedColumn.raise(this,e)},t.prototype.onResizingRow=function(e){return this.resizingRow.raise(this,e),!e.cancel},t.prototype.onResizedRow=function(e){this.resizedRow.raise(this,e)},t.prototype.onAutoSizingRow=function(e){return this.autoSizingRow.raise(this,e),!e.cancel},t.prototype.onAutoSizedRow=function(e){this.autoSizedRow.raise(this,e)},t.prototype.onDraggingRow=function(e){return this.draggingRow.raise(this,e),!e.cancel},t.prototype.onDraggingRowOver=function(e){return this.draggingRowOver.raise(this,e),!e.cancel},t.prototype.onDraggedRow=function(e){this.draggedRow.raise(this,e)},t.prototype.onGroupCollapsedChanging=function(e){if(this._isGrpClpsChanging||this.groupCollapsedChanging.raise(this,e),!e.cancel&&this._isServerCollectionView(this.collectionView)){var t=this.collectionView,i=this.rows[e.row];!this.isUpdating&&t.groupLazyLoading&&this.preserveOutlineState&&t._updateExpandedGroups(i.dataItem,i.isCollapsed),t.groupLazyLoading&&i.isCollapsed&&Object.keys(i.dataItem.items[0]).length<=t.groupDescriptions.length&&!this._isGrpClpsChanging&&t.lazyLoadGroup(i.dataItem)}return!e.cancel},t.prototype.onGroupCollapsedChanged=function(e){if(this._isGrpClpsChanging||this.groupCollapsedChanged.raise(this,e),this._isServerCollectionView(this.collectionView)&&this._cv._virtualization){var t=this.selection;t&&t.row>-1&&!this._grpClpsChng&&this._loadVirtualItems(t,e),t&&-1==t.row&&(t=e.range,this._loadVirtualItems(t,e))}},t.prototype._loadVirtualItems=function(e,t){var i=this.collectionView,n=this.viewRange,o=Math.floor((e.row-this._getGroupCount(e.row))/this._getRowsPerItem()+(this.rows[t.row].isCollapsed?this.rows[e.row].dataItem.items.length:0)),r=Math.ceil((n.row2-this._getGroupCount(n.row2))/this._getRowsPerItem());o<=r&&i._isVirtualRefreshNeeded(o,r)&&(this._isGrpClpsChanging=!0,i.setWindow(o,r))},t.prototype._getGroupCount=function(e){for(var t=0,i=0;i<e;i++)this.rows[i]instanceof wt&&t++;return t++},t.prototype.onColumnGroupCollapsedChanging=function(e){return this.columnGroupCollapsedChanging.raise(this,e),!e.cancel},t.prototype.onColumnGroupCollapsedChanged=function(e){this.columnGroupCollapsedChanged.raise(this,e)},t.prototype.onSortingColumn=function(e){return this.sortingColumn.raise(this,e),!e.cancel},t.prototype.onSortedColumn=function(e){this.sortedColumn.raise(this,e)},t.prototype.onBeginningEdit=function(e){return this._addHdl._beginningEdit(this,e),e.cancel||this.beginningEdit.raise(this,e),!e.cancel},t.prototype.onPrepareCellForEdit=function(e){this.prepareCellForEdit.raise(this,e)},t.prototype.onCellEditEnding=function(e){return this.cellEditEnding.raise(this,e),!e.cancel&&!e.stayInEditMode},t.prototype.onCellEditEnded=function(e){this.cellEditEnded.raise(this,e),this._autoRowHeights()},t.prototype.onRowEditStarting=function(e){return this._addHdl._rowEditStarting(this,e),e.cancel||this.rowEditStarting.raise(this,e),!e.cancel},t.prototype.onRowEditStarted=function(e){this.rowEditStarted.raise(this,e)},t.prototype.onRowEditEnding=function(e){this._addHdl._rowEditEnding(this,e),this.rowEditEnding.raise(this,e)},t.prototype.onRowEditEnded=function(e){this.rowEditEnded.raise(this,e),this._addHdl._rowEditEnded(this,e),this._autoRowHeights()},t.prototype.onRowAdded=function(e){return this.rowAdded.raise(this,e),!e.cancel},t.prototype.onDeletingRow=function(e){return this.deletingRow.raise(this,e),!e.cancel},t.prototype.onDeletedRow=function(e){this.deletedRow.raise(this,e)},t.prototype.onCopying=function(e){return this.copying.raise(this,e),!e.cancel},t.prototype.onCopied=function(e){this.copied.raise(this,e)},t.prototype.onPasting=function(e){return this.pasting.raise(this,e),!e.cancel},t.prototype.onPasted=function(e){this.pasted.raise(this,e)},t.prototype.onPastingCell=function(e){return this.pastingCell.raise(this,e),!e.cancel},t.prototype.onPastedCell=function(e){this.pastedCell.raise(this,e)},t.prototype.onFormatItem=function(e){this.formatItem.raise(this,e)},t.prototype.onUpdatingView=function(e){return this.updatingView.raise(this,e),!e.cancel},t.prototype.onUpdatedView=function(e){this.updatedView.raise(this,e)},t.prototype.getMergedRangeRawData=function(e,t,i,n){return void 0===n&&(n=!0),this._mrgMgr?it()&&this instanceof it().MultiRow||nt()&&this instanceof nt().TransposedGrid||ot()&&this instanceof ot().TransposedMultiRow?this._mrgMgr.getMergedRange(e,t,i,n):this._mrgMgr._getMergedRange?this._mrgMgr._getMergedRange(e,t,i,n,!1):this._mrgMgr.getMergedRange(e,t,i,n):null},t.prototype._createSelHdl=function(){return new ht(this)},t.prototype._getTabIndex=function(){return this._orgTabIndex},t.prototype._setTabOrder=function(e){this._orgTabIndex=e,this._updateTabIndex()},t.prototype._updateTabIndex=function(){var e=this.isDisabled?-1:this._orgTabIndex,t=this._imeHdl;t&&t._updateImeFocus();var i=this._activeCell,n=this._root,o=this._eFocus;i?(i.tabIndex=e,o.tabIndex=-1,n.tabIndex=-1):this.selectionMode!=Ue.None?(o.tabIndex=e,n.tabIndex=-1):(n.tabIndex=e,o.tabIndex=-1)},t.prototype._autoRowHeights=function(){var e=this;this._autoHeights&&(this.rows.length>100&&[this.columnHeaders,this.rowHeaders].forEach((function(e){e._updateContent(!0,!1,e._getOffsetY())})),clearTimeout(this._toAutoHeights),this._toAutoHeights=setTimeout((function(){e._toAutoHeights=null,e.editRange||e._autoSizeRows()}),s.Control._REFRESH_INTERVAL))},t.prototype._autoSizeRows=function(){var e=this.autoSizeMode,t=$t;e&t.Headers&&(this._autoSizeMode=t.Both,this.autoSizeRows(0,this.columnHeaders.rows.length-1,!0),this._autoSizeMode=e),e&t.Cells&&this.autoSizeRows()},t.prototype._getShowErrors=function(){return this.showErrors&&this._hasValidation},t.prototype._getHasValidation=function(){return this._hasValidation},t.prototype._getError=function(e,t,i,n){if((0,s.isFunction)(this.itemValidator)){if(e==this.cells)return this.itemValidator(t,i,n);if(e==this.rowHeaders){var o=e.rows,r=this.columns,l=o[t].dataItem,a=null,h=[],c=t;if(g=this.getMergedRange(e,t,i,!1))for(t=c=g.row;t<o.length&&(o[t].dataItem==l||g&&g.rowSpan>1&&g.row2>=t);t++)for(var u=0;u<r.length;u++)(a=this.itemValidator(t,u,!1))&&((b=this.getMergedRange(this.cells,t,u))&&(b.columnSpan>1&&b.col<u||b.rowSpan>1&&b.row<t)||h.push(a));else for(u=0;u<this.columns.length;u++){var d=this.itemValidator(t,u,!1);d&&h.push(d)}if(h.length){var p=!!(m=this.errorTip)&&m.isContentHtml;a=h.join(p?"<br/>":"\n")}return a}}var f=this._cv,_=f?f.getError:null;if((0,s.isFunction)(_)&&(o=e.rows,r=this.columns,(l=o[t].dataItem)&&!(l instanceof s.CollectionViewGroup)))if(e==this.cells)for(;t<o.length&&o[t].dataItem==l;t++)return _(l,(v=this._getBindingColumn(this.cells,t,r[i])).binding,n);else if(e==this.rowHeaders){if(!(a=_(l,null,!1))){var g,m;for(h=[],c=t,(g=this.getMergedRange(e,t,i,!1))&&(c=g.row),t=c;t<o.length&&(o[t].dataItem==l||g&&g.rowSpan>1&&g.row2>=t);t++)for(u=0;u<r.length;u++){var b,v=this._getBindingColumn(this.cells,t,r[u]),y=o[t].dataItem,w=y&&v&&v.binding?v._binding.getValue(y):null;if(a=v.binding&&y&&v.getIsRequired(o[t])&&this.editRange&&this.editRange.containsRow(t)&&(null==w||""===w)?this._edtHdl._getRequiredMsg():_(y,v.binding,!1))(b=this.getMergedRange(this.cells,t,u))&&(b.columnSpan>1&&b.col<u||b.rowSpan>1&&b.row<t)||h.push(a)}if(h.length)p=!!(m=this.errorTip)&&m.isContentHtml,a=h.join(p?"<br/>":"\n")}return a}return null},t.prototype._setAria=function(e,t){var i=this._gridRoleElement();i&&(0,s.setAttribute)(i,e,t)},t.prototype._setFocus=function(e){if(this.hostElement){var t=(0,s.getActiveElement)(),i=this.activeEditor,n=this._activeCell,o=this._eFocus,r=this._root,l=this._getTabIndex(),a=this.containsFocus();if(!e&&a&&this.selectionMode!=Ue.None){if(this.rows.length>0&&this.selection.row>=0&&this.selection.col>=0){var h=this._getBindingColumn(this.cells,this.selection.row,this.columns[this.selection.col]),c=h&&h._edt;this._isInputElement(t)||!n||(0,s.contains)(n,t)||this.imeEnabled||c||this._correctFocusOfActiveCell(n)}}else!e&&a||(i?(0,s.contains)(i,t)||(i.focus(),o.tabIndex=-1,r.tabIndex=-1):n?(0,s.contains)(n,t)||this._correctFocusOfActiveCell(n):(0,s.contains)(o,t)||t==r||(this.selectionMode!=Ue.None?(o.tabIndex=l,this._setFocusNoScroll(o)):(r.tabIndex=l,this._setFocusNoScroll(r))),this.containsFocus()||(this.selectionMode!=Ue.None?(o.tabIndex=l,this._setFocusNoScroll(o)):(r.tabIndex=l,this._setFocusNoScroll(r))))}},t.prototype._correctFocusOfActiveCell=function(e){var t=this._getTabIndex();(0,s.getActiveElement)()!=this._root?((0,s.isIE)()&&(0,s.hasClass)(e,Ne.group)&&(e=e.querySelector("."+Ft._WJC_COLLAPSE)||e),e.tabIndex=t):e.tabIndex=t,this._setFocusNoScroll(e),this._eFocus.tabIndex=-1},t.prototype._setFocusNoScroll=function(e){if((0,s.getActiveElement)()!=e){if((0,s.supportsFocusOptions)())this._imeHdl&&this._imeHdl._handlingCompositionStart||e.focus({preventScroll:!0});else{var t=this.scrollPosition,i=e.style,n=i.position;i.position="fixed",e.focus(),i.position=n,this.scrollPosition=t}this._fixScroll()}},t.prototype._clearAnchorCell=function(){this._anchorCell=null},t.prototype._setAnchorCell=function(e,t){var i=this.getMergedRange(this.cells,e,t);this._anchorCell=i?new s.Point(i.col,i.row):new s.Point(t,e)},t.prototype._getAnchorCell=function(){return this._anchorCell},t.prototype._updateDefaultSizes=function(){var e=this._getDefaultRowHeight();return this._rows._setDefaultSize(e),this._cols._setDefaultSize(4*e),this._hdrRows._setDefaultSize(e),this._hdrCols._setDefaultSize(Math.round(1.25*e)),this._ftrRows._setDefaultSize(e),e},t.prototype._getDefaultRowHeight=function(){var e=this.hostElement,t=this._eFocus,i=null;t.offsetHeight||(i=(0,s.createElement)('<div><div class="'+Ne.cell+'">0</div></div>',document.body),e&&i.setAttribute("class",e.getAttribute("class")),t=i.children[0]);var n=t.offsetHeight;return(isNaN(n)||n<=6)&&(n=28),(0,s.removeChild)(i),n},t.prototype._getCollectionView=function(e){return(0,s.asCollectionView)(e)},t.prototype._getCanvasContext=function(){var e=document.createElement("canvas").getContext("2d"),t=getComputedStyle(this.hostElement);return e.font=t.fontSize+" "+t.fontFamily.split(",")[0],e},t.prototype._getWidestRow=function(e,t,i,n){for(var o=0,r=0,l=1===this._getRowsPerItem()&&e.columns[i].dataType==s.DataType.Boolean,a=t.row;a<=t.row2;a++)if(e.rows[a].isVisible){var h=e.getCellData(a,i,!0),c=n.measureText(h).width,u=this.getMergedRange(e,a,i,!1);if(u&&u.columnSpan>1&&(c/=u.columnSpan),c>r&&(r=c,o=a),l)break;a+=u?u.rowSpan-1:0}return o},t.prototype._getDesiredWidth=function(e,t,i,n){var o=this.getMergedRange(e,t,i,!1),r=n.style;return this.cellFactory.updateCell(e,t,i,n,o),r.width=r.top=r.left="",n.offsetWidth/(o&&o.columnSpan>1?o.columnSpan:1)},t.prototype._getDesiredHeight=function(e,t,i,n){var o=n.style,r=this.getMergedRange(e,t,i,!1),s=r?r.rowSpan:1;this.cellFactory.updateCell(e,t,i,n,r);var l=n.innerHTML,a=this.cachedHeights[l],h=l.trim();if(!h||"<div></div>"===h){l="&nbsp;";var c=n;if(null==(a=this.cachedHeights[l])&&(h?c.firstElementChild.innerHTML=l:c.innerHTML=l,c.style.height=c.style.top=c.style.left=""),!e.rows[t].wordWrap&&!e.columns[i].wordWrap)return-1==this.cachedDefaultHeight&&(o.height=o.top=o.left="",this.cachedDefaultHeight=c.offsetHeight),this.cachedHeights[l]=this.cachedDefaultHeight,this.cachedDefaultHeight/s}return(null==a||a<n.scrollHeight)&&(o.height=o.top=o.left="",this.cachedHeights[l]=n.offsetHeight),this.cachedHeights[l]/s},t.prototype._getDesiredRowHeight=function(e,t,i,n){for(var o=0,r=(e.rows[t],this._getQuickAutoSize()),s=0;s<e.columns.length;s++)if(e.columns[s].isVisible){var l=this.getMergedRange(e,t,s,!1),a=void 0;if(r){var h={ct:e.cellType,col:s,spr:l&&l.rowSpan>1?l.rowSpan:1,spc:l&&l.columnSpan>1?l.columnSpan:1,data:e.getCellData(t,s,!0)||"1"},c=JSON.stringify(h);null==(a=n[c])&&(a=this._getDesiredHeight(e,t,s,i),n[c]=a)}else a=this._getDesiredHeight(e,t,s,i);o=Math.max(a,o),s+=l?l.columnSpan-1:0}return o},t.prototype._getSortRowIndex=function(){return null!=this._sortRowIndex?this._sortRowIndex:this.columnHeaders.rows.length-1},t.prototype._getDeleteColumnIndex=function(){return 0},t.prototype._getEditColumnIndex=function(){return null!=this._editColIndex?this._editColIndex:this.rowHeaders.columns.length-1},t.prototype._sortConverter=function(e,t,i,n){var o,r=this;if(n&&(this._mappedColumns=null,this._cv&&this._cv.sortDescriptions.forEach((function(e){(o=r.getColumn(e.property))&&o.dataMap&&(r._mappedColumns||(r._mappedColumns={}),r._mappedColumns[o.binding]=o.dataMap)})),this._mouseHdl._htDown&&this._mouseHdl._htDown.col>-1&&(o=this.columns[this._mouseHdl._htDown.col],this._mappedColumns&&o.dataMap&&(this._mappedColumns[o.binding]=o.dataMap))),this._mappedColumns){var s=this._mappedColumns[e.property];s&&s.sortByDisplayValues&&(i=s.getDisplayValue(i))}return i},t.prototype._bindGrid=function(e){var t=this;if(this.finishEditing(),this.deferUpdate((function(){var i;t.autoGenerateColumns&&0==t._lastCount&&(0,s.hasItems)(t._cv)&&(e=!0),t.preserveSelectedState&&(i=t._getMap())&&t.rows.forEach((function(e){e.isSelected&&e.dataItem&&i.set(e.dataItem,!0)}));var n=null,o=t.selection&&t.rows&&(t.rows[t.selection.row]instanceof wt||t.rows[t.selection.row2]instanceof wt);if(t.preserveSelectedState&&!t._isSourceChanging&&t._cv&&o){var r=t.selection,l=t.rows[t.selection.row]instanceof wt?t.selection.row:t.selection.row2;r.row>-1&&t.rows[l]&&(n=t.rows[l].dataItem)}var a,h=t._getMap();if(h&&t.rows.forEach((function(e){e.isReadOnly&&e.dataItem&&h.set(e.dataItem,!0)})),t.preserveOutlineState&&t.rows.maxGroupLevel>-1&&(a=t._getMap()))for(var c=0;c<t.rows.length;c++){var u=t.rows[c];if(u instanceof wt&&u.isCollapsed&&u.dataItem){var d=u.dataItem;d instanceof s.CollectionViewGroup&&(d=d._path),a.set(d,!0)}}e&&t.columns.deferUpdate((function(){t._bindColumns()}));var p=new s.CancelEventArgs;t.onLoadingRows(p)&&(t.rows.deferUpdate((function(){t._bindRows()})),t.onLoadedRows(p)),t._selHdl.extendedSelection.clear();var f=0;if(i&&i.size&&t.rows.forEach((function(e){var t=e.dataItem;t&&i.has(t)&&(e.isSelected=!0,f++)})),h&&h.size&&t.rows.forEach((function(e){var t=e.dataItem;t&&h.has(t)&&(e.isReadOnly=!0)})),0==f&&t.selectionMode==Ue.ListBox)for(c=(r=t.selection).topRow;c<=r.bottomRow&&c>-1&&c<t.rows.length;c++)t.rows[c]._setFlag(at.Selected,!0,!0);if(t._cv&&o&&n){var _=!1;for(r=t.selection.clone(),l=0;l<t.rows.length;l++)if(t.rows[l].dataItem===n){r.row=r.row2=l,_=!0;break}_||(r.row=-1,r.row2=-1),t._selHdl._adjustSelection(r,t.selectionMode,e&&!t._toInv)}if(a&&a.size&&(t._cv&&t._cv.groupOnServer&&t._cv._virtualization&&(t._isGrpClpsChanging=!0),t.rows.deferUpdate((function(){t.rows.forEach((function(e){if(e instanceof wt){var t=e.dataItem;t instanceof s.CollectionViewGroup&&(t=t._path),a.has(t)&&(e.isCollapsed=!0)}}))})),t._cv&&t._cv.groupOnServer&&t._cv._virtualization&&(t._isGrpClpsChanging=!1)),!t._lastCount){var g=t._cv;g&&g.items&&(t._lastCount=g.items.length)}})),this._cv){var i=e&&!this._toInv;this.activePanelType===Ge.Cell&&this._syncSelection(i)}else{var n=this.selection,o=new qe(-1,n.col,-1,n.col2);this.activePanelType===Ge.Cell&&this._selHdl._adjustSelection(o,this.selectionMode)}},t.prototype._getMap=function(){return window.Map?new Map:null},t.prototype._cvCollectionChanged=function(e,t){if(this._isSourceChanging=!0,this.autoGenerateColumns&&0==this.columns.length)this._bindGrid(!0),this._isSourceChanging=!1;else{var i=s.NotifyCollectionChangedAction;if(this.childItemsPath&&t.action!=i.Change)this._bindGrid(!1),this._isSourceChanging=!1;else{switch(t.action){case i.Change:return void this.invalidate();case i.Add:if(t.index==this._cv.items.length-1){var n=this.rows.length;return this.rows[n-1]instanceof kt&&n--,void this.rows.insert(n,new yt(t.item))}(0,s.assert)(!1,"added item should be the last one.");break;case i.Remove:var o=this._findRow(t.item);if(o>-1)return this.rows.removeAt(o),void this._syncSelection(!1);(0,s.assert)(!1,"removed item not found on grid.")}this._bindGrid(!1),this._isSourceChanging=!1}}},t.prototype._cvCurrentChanged=function(e,t){this._syncSelection(!1)},t.prototype._syncSelection=function(e){if(this._cv&&this.selectionMode!=Ue.None){var t=this._selHdl,i=t.selection,n=i.row>-1&&i.row<this.rows.length?this.rows[i.row]:null,o=n?n.dataItem:null,r=this._cv;if(r instanceof s.CollectionView&&r.isUpdating)return;if(this.newRowAtTop&&n instanceof kt)return;o instanceof s.CollectionViewGroup&&(o=null);var l=this._isISChanging;if(e||o!=r.currentItem||i.row>=this.rows.length||i.row2>=this.rows.length||l&&i.row!==i.row2||i.col>=this.columns.length||i.col2>=this.columns.length){var a=this.editableCollectionView;if(!this.childItemsPath||!a||!a.currentAddItem){var h=this._getRowIndex(r.currentPosition),c=this.getMergedRange(this._activePanel,h,i.col,!1);if(!(null!=c&&c._row<=i.row&&c._row2>=i.row2||h==i.row&&this.childItemsPath))if((i.row>=this.rows.length||i.row2>=this.rows.length||i.col>=this.columns.length||i.col2>=this.columns.length)&&this.columns.length>0&&this.rows.length>0)l&&(i=new qe,t._adjustSelection(i,this.selectionMode),this.selectionMode&&!this._updating&&this.scrollIntoView(i.row,-1));else if(-1===i.row&&-1===i.row2||h!=i.row){var u=l?i.col:i.col2;i=new qe(h,i.col,h,u),t._adjustSelection(i,this.selectionMode),this.selectionMode&&!this._updating&&this.scrollIntoView(i.row,-1)}}}}},t.prototype._getRowIndex=function(e){if(this._cv){var t=this.rows;if(e>-1){for(var i=this._cv.items[e];e<t.length;e++)if(t[e].dataItem===i)return e;return-1}if(1==t.length&&t[0]instanceof kt)return 0;var n=this.selection.row,o=n>-1?t[n]:null;return o&&(o instanceof wt||null==o.dataItem)?n:-1}return this.selection.row},t.prototype._getCvIndex=function(e){return e>-1&&e<this.rows.length?this.rows[e].dataIndex:-1},t.prototype._findRow=function(e){for(var t=0;t<this.rows.length;t++)if(this.rows[t].dataItem==e)return t;return-1},t.prototype._preWidth=function(){var e=this._root,t=this._hdrVis&pt.Row?this._hdrCols.getTotalSize():0;return e.clientWidth-t},t.prototype._updateLayout=function(){var e=new s.CancelEventArgs;if(this.onUpdatingLayout(e)){var i=this._hdrVis&pt.Row?this._hdrCols.getTotalSize():0,n=this._hdrVis&pt.Column?this._hdrRows.getTotalSize():0,o=this._ftrRows.getTotalSize(),r=this._rows.getTotalSize()+o;r<1&&(r=1),this._heightReal=r,this._heightBrowser=Math.min(r,t._getMaxSupportedCssHeight()),this._maxOffsetY=Math.max(0,r-this._heightBrowser),this.rows.length||(0,s.setCss)(this._eSz,{height:"0px"});var l=this.overlayManager.updateNoDataOverlay(this,this._eNoData),a=getComputedStyle(this._eFocus);this._cellPadVert=parseInt(a.paddingTop)+parseInt(a.paddingBottom),this._cellPadHorz=parseInt(a.paddingLeft)+parseInt(a.paddingRight),this._cellPadLeft=parseInt(this.rightToLeft?a.paddingRight:a.paddingLeft);var h=this._heightBrowser+n-o,c=this._gpCells.width,u=this._heightBrowser;!c&&this.rows.length&&(c=.1),!u&&this.columns.length&&(u=.1),this.rightToLeft?((0,s.setCss)(this._eTL,{right:0,top:0,width:i,height:n}),(0,s.setCss)(this._eCHdr,{right:i,top:0,height:n}),(0,s.setCss)(this._eRHdr,{right:0,top:n,width:i}),(0,s.setCss)(this._eCt,{right:i,top:n,width:c,height:u}),(0,s.setCss)(this._fCt,{right:i,top:n}),(0,s.setCss)(this._eBL,{right:0,top:h,width:i,height:o}),(0,s.setCss)(this._eCFtr,{right:i,top:h,height:o})):((0,s.setCss)(this._eTL,{left:0,top:0,width:i,height:n}),(0,s.setCss)(this._eCHdr,{left:i,top:0,height:n}),(0,s.setCss)(this._eRHdr,{left:0,top:n,width:i}),(0,s.setCss)(this._eCt,{left:i,top:n,width:c,height:u}),(0,s.setCss)(this._fCt,{left:i,top:n}),(0,s.setCss)(this._eBL,{left:0,top:h,width:i,height:o}),(0,s.setCss)(this._eCFtr,{left:i,top:h,height:o})),this._stickyHdr&&this._updateStickyHeaders();var d=this.rows._frozenInternal||this.columns._frozenInternal;(0,s.setCss)([this._eTL,this._eBL,this._eCFtr,this._eRHdr],{zIndex:d?"4":"3"}),(0,s.setCss)(this._eCHdr,{zIndex:d?"5":"3"}),(0,s.setCss)(this._eMarquee,{zIndex:d?"4":"1"}),this._eCHdr.closest("."+Ne.cell)&&(0,s.setCss)(this._eCHdr,{zIndex:d?"5":"2"}),(0,s.isIE)()&&(this._fCt.style.zIndex=d?"3":"");var p=this._root,f=p.offsetWidth-p.clientWidth,_=p.offsetHeight-p.clientHeight;(0,s.setCss)(this._eSz,{width:i+f+this._gpCells.width,height:n+_+this._heightBrowser+l});var g=null;this.columns._updateStarSizes(p.clientWidth-i)&&(g=p.clientWidth,(0,s.setCss)(this._eCt,{width:this._gpCells.width}),this.onStarSizedColumns()),this._szClient=new s.Size(p.clientWidth-i,p.clientHeight-n),this._szClientSB=new s.Size(p.offsetWidth-i,p.offsetHeight-n),this._rcBounds=null,this._updateScrollHandler(),this._updateContent(!1),f=p.offsetWidth-p.clientWidth,_=p.offsetHeight-p.clientHeight,(0,s.setCss)(this._eSz,{width:i+f+this._gpCells.width,height:n+_+this._heightBrowser+l});var m=new s.Size(this._szClient.width,this._szClient.height);this._szClient=new s.Size(p.clientWidth-i,p.clientHeight-n),!(this.columns._frozenInternal<0||this.rows._frozenInternal<0)||m.width==this._szClient.width&&m.height==this._szClient.height||this._updateContent(!1),g&&g!=p.clientWidth&&this.columns._updateStarSizes(p.clientWidth-i)&&((0,s.setCss)(this._eCt,{width:this._gpCells.width}),this._updateContent(!1)),(0,s.setCss)([this._eCHdr,this._eCFtr,this._fCt],{width:this._szClient.width}),(0,s.setCss)([this._eRHdr,this._fCt],{height:this._szClient.height}),o&&(h=Math.min(h,this._szClient.height+n-o),(0,s.setCss)([this._eBL,this._eCFtr],{top:h})),this._alignTheTail(this.rows),this._alignTheTail(this.columns),this.onUpdatedLayout(e)}},t.prototype.handleLoad=function(){var e=this._root.style.overflowX,t=this._root.style.overflowY;(0,s.setCss)(this._root,{"overflow-y":0!=this._root.scrollHeight&&this._root.scrollHeight===this._root.parentElement.clientHeight?"hidden":"auto","overflow-x":0!=this._root.scrollWidth&&this._root.scrollWidth===this._root.parentElement.clientWidth?"hidden":"auto"}),e==this._root.style.overflowX&&t==this._root.style.overflowY||this.invalidate()},t.prototype._updateStickyHeaders=function(){var e=!1,i=0;if(this._stickyHdr){for(var n=0,o=null,r=this.hostElement;r;r=r.parentElement)if("inline"!=getComputedStyle(r).display){var l=r.getBoundingClientRect();null==o&&(o=l.top),n=Math.max(n,l.top)}i=-(o=Math.max(0,n-o-1)),e=o>0,this._rcBounds=null}this._eTL.style.top=this._eCHdr.style.top=e?-i+"px":"",(0,s.toggleClass)(this._eTL,t._WJS_STICKY,e),(0,s.toggleClass)(this._eCHdr,t._WJS_STICKY,e)},t.prototype._updateScrollHandler=function(){this._clipToScreen=this._getClipToScreen();var e=this._stickyHdr||this._clipToScreen;e!=this._scrollHandlerAttached&&(this._scrollHandlerAttached=e,e?this.addEventListener(window,"scroll",this._scroll.bind(this),!0):this.removeEventListener(window,"scroll"))},t.prototype._getClipToScreen=function(){if(this.rows.length<=t._MIN_VIRT_ROWS)return!1;if(this._root.scrollHeight>this._root.clientHeight)return!1;for(var e=this.hostElement;e&&e!=document.documentElement;e=e.parentElement)if("auto"==getComputedStyle(e).overflow)return!1;return!0},t.prototype._scroll=function(e){var t=this;if((0,s.contains)(e.target,this.hostElement)){if(this._clipToScreen){var i=this;this._afClip&&cancelAnimationFrame(this._afClip),this._afClip=requestAnimationFrame((function(){i._isSilentScroll?queueMicrotask((function(){return i._isSilentScroll=!1})):(t._afClip=null,t.finishEditing(),t._updateContent(!0))}))}if(this._stickyHdr){var n=Date.now();n-this._lastStickyScroll>this._scrollStickyThrottleTimeout&&(this._afSticky&&cancelAnimationFrame(this._afSticky),this._afSticky=requestAnimationFrame((function(){t._afSticky=null;var e=new s.CancelEventArgs;t.onUpdatingLayout(e)&&(t._updateStickyHeaders(),t.onUpdatedLayout(e))})),this._lastStickyScroll=n),this._handleScrollEnd()}}},t.prototype._getCssPage=function(e){if(this._heightReal>this._heightBrowser){var t=this._szClient.height-this._gpCFtr.rows.getTotalSize();if(this._heightBrowser>t)return(0,s.clamp)(Math.round(e/(this._heightBrowser-t)*10)/10,0,1)}return 0},t.prototype._updateScrollPosition=function(){var e=this._root,i=e.scrollTop,n=e.scrollLeft;this.rightToLeft&&"rev"==t._getRtlMode()&&(n=e.scrollWidth-e.clientWidth-n);var o=new s.Point(-Math.abs(n),-i),r=this.columns.getTotalSize();return this.rightToLeft&&"rev"!=t._getRtlMode()&&(n=-n),(!(0,s.isSafari)()||!(n<0||r>this._szClient.width&&n+this._szClient.width>r))&&(!this._ptScrl.equals(o)&&(this._ptScrl=o,this._updateMarquee(),this.onScrollPositionChanged(),!0))},t.prototype._updateContent=function(e,t){var i=this,n=this._root,o=this.hostElement,r=this.cells.hostElement,l=this._activeCell,a=(0,s.getActiveElement)(),h=(0,s.contains)(o,a),c=(0,s.closest)(a,"."+Ne.hostElement)==o?a:null,u=new s.CancelEventArgs;if(this.onUpdatingView(u)){this._setAria("role",this.rows.maxGroupLevel<0?"grid":"treegrid"),this._hasValidation=(0,s.isFunction)(this._itemValidator)||this._cv&&(0,s.isFunction)(this._cv.getError);var d=!t&&this._errorTip&&this._errorTip._tips.length,p=this._getCssPage(-this._ptScrl.y);p!=this._cssPage&&(this._cssPage=p,this._offsetY=Math.round(this._maxOffsetY*p)),this._updateScrollPosition(),this._updateMarquee();var f=0,_=this._hdrVis;_&pt.Row&&(!t||this._ssHdr&_||this.headersFocusability&_t.Row)&&(f=this.rowHeaders.columns.length);var g=this._gpCells._updateContent(e,t,this._offsetY,f);switch(_&pt.Column&&(!t||this._ssHdr&_||this.headersFocusability&_t.Column)&&(this._gpCHdr._updateContent(e,t,0,f),this.rightToLeft||(this._eCHdr.scrollLeft=0)),_&pt.Row&&(!t||this._ssHdr&_||this.headersFocusability&_t.Row)&&(this._gpRHdr._updateContent(e,t,this._offsetY),this._eRHdr.scrollTop=0),!_||this.headersFocusability!==_t.All&&t||this._gpTL._updateContent(e,t,0),this._gpCFtr.rows.length&&(this._gpBL._updateContent(e,t,0),this._gpCFtr._updateContent(e,t,0)),this.activePanelType){case Ge.ColumnHeader:g=this._gpCHdr.activeCell;break;case Ge.RowHeader:g=this._gpRHdr.activeCell;break;case Ge.TopLeft:g=this._gpTL.activeCell;break;case Ge.BottomLeft:g=this._gpBL.activeCell;break;case Ge.ColumnFooter:g=this._gpCFtr.activeCell}if(d&&this._errorTip&&this._errorTip._tips.length&&(clearTimeout(this._toErrorTips),this._toErrorTips=setTimeout((function(){var e=i._errorTip;if(e){e.hide();for(var t=e._tips,n=0;n<t.length;n++){var o=t[n].element;o.offsetHeight&&(0,s.hasClass)(o,s.ControlStateClsNames.invalid)||(e.setTooltip(o,null),n--)}}}),40)),this._useFrozenDiv()&&(this._updateFrozenCells(t),g&&(0,s.hasClass)(g,Ne.frozen)&&(g=null)),this._fCt.style.display=this._fCt.childElementCount?"":"none",this._activeCell=g,c)if(c==n||c==this._eFocus||!(0,s.contains)(o,c)||(0,s.contains)(r,c)||this.imeEnabled){var m=g!==l;this._setFocus(m)}else if((0,s.getActiveElement)()!==c&&c.focus(),(0,s.isIE)()&&c instanceof HTMLInputElement&&!c.type.match(/checkbox|radio|range/i)){var b=c.selectionStart,v=c.selectionEnd;c.setSelectionRange(b,v)}!c&&g&&(g.tabIndex=this.isDisabled?-1:this._orgTabIndex),l&&l!=g&&(l.tabIndex=-1),this.selectionMode!=Ue.None?this._eFocus.tabIndex=null!=g||this.isDisabled?-1:this._orgTabIndex:(this._eFocus.tabIndex=-1,this._root.tabIndex=null!=g||this.isDisabled?-1:this._orgTabIndex),h&&this.focus(),this._fixScroll(),this._rcBounds=null,this._updateMarquee(),this.onUpdatedView(u)}},t.prototype._fixScroll=function(){var e=this._root;if(!this._updating){var t=this.hostElement,i=e?e.parentElement:null,n=this.rightToLeft;t&&(t.scrollTop&&(t.scrollTop=0),t.scrollLeft&&!n&&(t.scrollLeft=0)),i&&(i.scrollTop&&(i.scrollTop=0),i.scrollLeft&&!n&&(i.scrollLeft=0))}var o=Le();e&&o&&14==o.major&&o.minor>=1&&(e.style.transform="",e.style.transform="translateZ(0)")},t.prototype._clearCells=function(){for(var e in this)if("_"==e[0]){var t=this[e];t instanceof Xe&&t._clearCells()}this.invalidate()},t.prototype._useFrozenDiv=function(){return(0,s.isBoolean)(this._fzClone)?this._fzClone:(0,s.isIE)()||(0,s.isFirefox)()||(0,s.isSafari)()||(0,s.isMobile)()},t.prototype._updateFrozenCells=function(e,t){void 0===t&&(t=!1);var i=this._fCt;if((t||0===this.rows.frozen&&0===this.columns.frozen)&&(0,s.setText)(i,null),this.rows._frozenInternal||this.columns._frozenInternal){var n=this._eCt.querySelectorAll("."+Ne.frozen);if(e&&i.children.length==n.length){for(var o=0;o<n.length;o++)i.children[o].className=n[o].className;return}if((0,s.setText)(i,null),!this.activeEditor){var r=this._errorTip,l=navigator.userAgent.indexOf("MSIE")>=0;for(o=0;o<n.length;o++){var a=n[o];if((0,s.closest)(a,"."+Ne.hostElement)==this.hostElement){var h=a[Xe._INDEX_KEY],c=a.firstElementChild,u=null;if(h&&c){var d=h.panel,p=this._getBindingColumn(d,h.row,d.columns[h.col]);u=(0,s.isFunction)(p.cellTemplate)?c.onclick:null}if(l){var f="input[type=checkbox]",_=a.querySelector(f);a=a.cloneNode(!0),_&&(a.querySelector(f).checked=_.checked)}else{a=a.cloneNode(!0),lt()&&h&&a&&this.cellFactory instanceof lt().DirectiveCellFactoryBase&&this.cellFactory.updateCell(this.cells,h.row,h.col,a,this.mergeManager.getMergedRange(this.cells,h.row,h.col));var g=a.getAttribute("top-for-clone"),m=a.getAttribute("left-for-clone");g&&(a.style.top=g+"px"),m?this.rightToLeft?a.style.right=m+"px":a.style.left=m+"px":a.style.left=Math.round(parseFloat(a.style.left))+"px"}if(c=a.firstElementChild,u&&c&&(c.onclick=u),a[Xe._INDEX_KEY]=h,r){var b=r.getTooltip(n[o]);b&&r.setTooltip(a,b)}i.appendChild(a)}}}}},t.prototype._updateMarquee=function(){if(this.activePanelType==Ge.Cell){var e=this._eMarquee,t=this._getMarqueeRect();if(t&&t.width&&t.height){var i=this.cells.hostElement,n=e.firstChild,o=e.offsetWidth-n.offsetWidth,r=e.offsetHeight-n.offsetHeight;(0,s.setCss)(e,{width:t.width+o,height:t.height+r,top:t.top+i.offsetTop-r/2,left:t.left+i.offsetLeft-o/2,display:""})}else e.style.display="none"}else this._hideMarquee()},t.prototype._hideMarquee=function(){var e=this._eMarquee;(0,s.setCss)(e,{display:"none"})},t.prototype._getMarqueeRect=function(){if(!this._shMarquee||!this.selectionMode)return null;var e=this._selHdl.selection;if(!this.isRangeValid(e))return null;e=(e=(e=this.cells._getAdjustedSelection(e)).combine(this.getMergedRange(this.cells,e.topRow,e.leftCol,!1))).combine(this.getMergedRange(this.cells,e.bottomRow,e.rightCol,!1));var t=this.cells.getCellBoundingRect(e.topRow,e.leftCol,!0),i=this.cells.getCellBoundingRect(e.bottomRow,e.rightCol,!0);if(this.rows._frozenInternal){var n=this.rows._frozenInternal>=0?Math.min(this.rows.length,this.rows._frozenInternal):this.rows._lastFrozen,o=this.rows._frozenInternal>=0?this.cells.getCellBoundingRect(n-1,0,!0):this.cells.getCellBoundingRect(n,0,!0);this.rows._frozenInternal>=0?(e.topRow>=n&&t.top<o.bottom&&(t.top=o.bottom),e.bottomRow>=n&&i.bottom<o.bottom&&(i.height=o.bottom-i.top)):(e.bottomRow<n&&i.bottom>o.top&&(i.height-=i.bottom-o.top),e.topRow<n&&t.top>o.top&&(t.top=o.top),this.rows.isFrozen(this.rows._firstVisible)&&e.topRow===this.rows._firstVisible&&t.top++,(0,s.isChromiumBased)()&&!(0,s.isMobile)()&&(e.bottomRow>=n&&i.top--,e.topRow>=n&&t.top--))}if(this.columns._frozenInternal){var r=this.columns._frozenInternal>=0?Math.min(this.columns.length,this.columns._frozenInternal):this.columns._lastFrozen;o=this.columns._frozenInternal>=0?this.cells.getCellBoundingRect(0,r-1,!0):this.cells.getCellBoundingRect(0,r,!0),this.rightToLeft?this.columns._frozenInternal>=0?(e.leftCol>=r&&t.right>o.left&&(t.left=o.left-t.width),e.rightCol>=r&&i.left>o.left&&(i.left=o.left)):(e.rightCol<r&&i.left<o.right&&(i.left=o.right,t.right<=o.right&&(t.left=o.right,t.width=0)),e.leftCol<r&&t.right<o.right&&(t.left=o.right,t.width=0)):this.columns._frozenInternal>=0?(e.leftCol>=r&&t.left<o.right&&(t.left=o.right),e.rightCol>=r&&i.right<o.right&&(i.width=o.right-i.left)):(e.rightCol<r&&i.right>o.left&&(i.left-=i.right-o.left),e.leftCol<r&&t.left>o.left&&(t.left=o.left))}var l=0;return this.columns._frozenInternal<0&&(0,s.isChromiumBased)()&&!(0,s.isMobile)()&&this.columns.isFrozen(e.rightCol)&&t.right-i.left!=0&&(l=1),this.rightToLeft?new s.Rect(i.left,t.top,t.right-i.left-l,i.bottom-t.top):new s.Rect(t.left,t.top,i.right-t.left-l,i.bottom-t.top)},t.prototype._bindColumns=function(){for(var e=this.columns,i=0;i<e.length;i++)e[i]._getFlag(at.AutoGenerated)&&(e.removeAt(i),i--);var n=this._cv,o=n?n.items:null;o&&o.length&&this.autoGenerateColumns&&this._getColumnTypes(o).forEach((function(i){var n=new vt(i);n._setFlag(at.AutoGenerated,!0),n.name=n.binding,n.header=(0,s.toHeaderCase)(n.binding);var o=t._defTypeWidth[n.dataType];if(null!=o){if((0,s.isString)(o)){var r=Math.round(parseFloat(o));o=o.indexOf("*")>-1?r*e.defaultSize:r}(0,s.isNumber)(o)&&o>0&&(n.width=o)}e.push(n)})),this._updateColumnTypes()},t.prototype._getColumnTypes=function(e){return(0,s.getTypes)(e)},t.prototype._updateColumnTypes=function(){var e=this._cv;if((0,s.hasItems)(e)){var t=e.items[0];this.columns.forEach((function(e){null==e.dataType&&e._binding&&(e.dataType=(0,s.getType)(e._binding.getValue(t)))}))}},t.prototype._getMapEditor=function(e,t){return t&&t.editor?null!=t.editor.isDroppedDown?t.dataMapEditor:null:!e||!e.dataMap||e instanceof wt?t&&t.dataMap?t.dataMapEditor:null:e.dataMapEditor},t.prototype._getBindingColumn=function(e,t,i){return i},t.prototype._getBindingColumns=function(){return this.columns},t.prototype._getRowsPerItem=function(){return 1},t.prototype._isTransposed=function(){return!1},t.prototype._getRowHeaderPath=function(){return this._rowHdrPath},t.prototype._bindRows=function(){this.rows.clear();var e=this._cv;if(e&&e.items){var t=e.items,i=e.groups;if(this.childItemsPath)for(var n=0;n<t.length;n++)this._addNode(t,n,0);else if(null!=i&&i.length>0&&this.showGroups)for(n=0;n<i.length;n++)this._addGroup(i[n]);else for(n=0;n<t.length;n++)this._addBoundRow(t,n)}},t.prototype._addBoundRow=function(e,t){var i=new yt(e[t]),n=this.rows;i._list=n,n[n.length++]=i},t.prototype._addGroupRow=function(e){this.rows.push(new wt(e))},t.prototype._addNode=function(e,t,i){var n=e[t],o=this.childItemsPath,r=n[(0,s.isArray)(o)?o[i]:o],l=new wt(n);if(l.level=i,this.rows.push(l),(0,s.isArray)(r))for(var a=0;a<r.length;a++)this._addNode(r,a,i+1)},t.prototype._addGroup=function(e){if(this._addGroupRow(e),e.isBottomLevel)for(var t=e.items,i=0;i<t.length;i++)this._addBoundRow(t,i);else for(i=0;i<e.groups.length;i++)this._addGroup(e.groups[i]);if(this.groupSummaryPosition!=mt.Top){var n=e._clone();this._addGroupSummaryRow(n)}},t.prototype._addGroupSummaryRow=function(e){var t=new wt(e);t.isSummary=!0,this.rows.push(t)},t._getSerializableProperties=function(e){var t=[];for(e=e.prototype;e!=Object.prototype;e=Object.getPrototypeOf(e))for(var i=Object.getOwnPropertyNames(e),n=0;n<i.length;n++){var o=i[n],r=Object.getOwnPropertyDescriptor(e,o);r&&r.set&&r.get&&"_"!=o[0]&&!o.match(/^(disabled|required|showDropDown)$/)&&t.push(o)}return t},t.prototype._hasColumnGroups=function(){return this._grpHdl.hasColumnGroups()},t.prototype._getColumnGroup=function(e,t){return this._grpHdl.getColumnGroup(e,t)},t.prototype._canMoveColumnGroup=function(e,t,i,n){return this._grpHdl.canMoveColumnGroup(e,t,i,n)},t.prototype._moveColumnGroup=function(e,t,i,n,o){return this._grpHdl.moveColumnGroup(e,t,i,n,o)},t.prototype._copy=function(e,t){var i=this;if("columns"==e){var n=(0,s.asArray)(t);return n.some((function(e){return null!=e.columns}))?this.columnGroups=n:(this.columns.clear(),n.forEach((function(e){var t=new vt(e);i.columns.push(t)}))),!0}return!1},t.prototype._isInputElement=function(e){return e instanceof HTMLElement&&!(0,s.hasClass)(e,s.GlyphClsNames.btnGlyph)&&("true"==e.contentEditable||null!=e.tagName.match(/^(INPUT|TEXTAREA|BUTTON|A|SELECT|OPTION)$/i)||e instanceof HTMLSpanElement&&e.parentElement&&null!=e.parentElement.tagName.match(/^(INPUT|TEXTAREA|BUTTON|A|SELECT|OPTION)$/i)&&!(0,s.hasClass)(e.parentElement,s.GlyphClsNames.btnGlyph))},t.prototype._isNativeCheckbox=function(e){return e instanceof HTMLInputElement&&"checkbox"==e.type&&!e.disabled&&!e.readOnly&&(0,s.hasClass)(e,Ft._WJC_CHECKBOX)&&(0,s.closest)(e,"."+Ne.hostElement)==this.hostElement},t.prototype._wantsInput=function(e){return this._isInputElement(e)&&!this.activeEditor&&!this._isNativeCheckbox(e)&&!(0,s.hasClass)(e,Ne.gridIme)&&(0,s.contains)(document.body,e)},t._getMaxSupportedCssHeight=function(){if(!t._maxCssHeight){var e=265e5;(0,s.isIE)()?e=15e5:(0,s.isFirefox)()&&(e=175e5),t._maxCssHeight=e}return t._maxCssHeight},t._getRtlMode=function(){if(!t._rtlMode){var e=(0,s.createElement)('<div dir="rtl"><div></div></div>');(0,s.setCss)(e,{visibility:"hidden",width:100,height:100,overflow:"auto"}),(0,s.setCss)(e.firstChild,{width:2e3,height:2e3}),document.body.appendChild(e);var i=e.scrollLeft;e.scrollLeft=-1e3;var n=e.scrollLeft;(0,s.removeChild)(e),t._rtlMode=n<0?"neg":i>0?"rev":"std"}return t._rtlMode},t.prototype.getEmptyRequiredCell=function(e){return this._getEmptyRequiredCell(e)},t.prototype._getEmptyRequiredCell=function(e){if(e>=0)for(var t=0;t<this.columns.length;t++){var i=this.getCellData(e,t,!1);if(this.columns[t].visible&&this.columns[t].getIsRequired(this.rows[e])&&(""===i||null==i)){if(!this.columns[t].isReadOnly&&!this.rows[e].isReadOnly)return t;console.warn("Incorrect data. Cell ("+e+", "+t+") is  at the same time  required, empty and read-only")}}return null},t.prototype.adjustFrozenRowColSize=function(e,t,i){var n=t===gt.Column,o=n?this.columns:this.rows,r=n?this.columns._frozenInternal:this.rows._frozenInternal,s=n?this._szClient.width:this._szClient.height;if(!(e<0||e>=o.length)&&o.isFrozen(e)){var l=s-(n?r>=0?this.columns.slice(0,this.columns._frozenInternal).reduce((function(e,t){return e+t.renderSize}),0):this.columns.slice(this.columns.length+this.columns._frozenInternal,this.columns.length).reduce((function(e,t){return e+t.renderSize}),0):r>=0?this.rows.slice(0,this.rows._frozenInternal).reduce((function(e,t){return e+t.renderSize}),0):this.rows.slice(this.rows.length+this.rows._frozenInternal,this.rows.length).reduce((function(e,t){return e+t.renderSize}),0))-5,a=o[e].size||o[e].renderSize,h=i>l?a+l:a+i;o[e].size=h}},t.prototype._adjustMaxContentWidth=function(){if(0!==this.rows.length&&0!==this.columns.length&&this._maxContent){var e=document.createElement("div");e.style.visibility="hidden",this.hostElement.appendChild(e);for(var t=0,i=1/0,n=new Array(this.columns.length).fill(0),o=0;o<this.columns.length;o++){for(var r=0,s=1/0,l=Math.min(this._contentEstimationLimit,this.rows.length),a=0;a<l;a++){var h=Math.round(a*this.rows.length/l),c=this._getDesiredWidth(this.cells,h,o,e);r=Math.max(r,c),s=Math.min(s,c)}n[o]=r,t+=r,i=Math.min(i,s)}this.hostElement.removeChild(e);var u=window.innerWidth,d=this.hostElement.parentElement?this.hostElement.parentElement.offsetWidth:u,p=window.getComputedStyle(this.hostElement),f=this.hostElement.getBoundingClientRect();p.minWidth.includes("content")&&(this.hostElement.style.minWidth=Math.min.apply(Math,n)+"px"),"min-content"===p.maxWidth?this.hostElement.style.maxWidth=i+"px":"fit-content"===p.maxWidth||"max-content"===p.maxWidth?this.hostElement.style.maxWidth=t>d?d+"px":t+"px":this.hostElement.style.width=t>f.width?"100%":"",this.hostElement.parentElement.style.overflowX=t>u||t>d?"auto":"hidden";var _=window.innerHeight-(f.top+window.pageYOffset)-50;this.hostElement.style.maxHeight=_+"px"}},t.prototype._isAllCellsSelected=function(){var e=this.selection;return 1===this.selectedRanges.length&&this.columns.length===e.columnSpan&&this.rows.length===e.rowSpan},t.prototype._canResizeAllCellsWithoutCtrl=function(){return this._canOverRuleCtrlPress&&this.selectionMode===Ue.MultiRange},t.prototype._handleScrollEnd=function(){var e=this;null!==this._scrollEndTimer&&clearTimeout(this._scrollEndTimer),this._scrollEndTimer=window.setTimeout((function(){e._updateStickyHeaders()}),75)},t.prototype._updateLayoutOnPin=function(){var e=this._root,t=this._hdrVis&pt.Row?this._hdrCols.getTotalSize():0,i=this._hdrVis&pt.Column?this._hdrRows.getTotalSize():0,n=e.offsetWidth-e.clientWidth,o=e.offsetHeight-e.clientHeight,r=e.offsetWidth-t-n,s=e.offsetHeight-i-o,l=e.scrollTop,a=Math.abs(e.scrollLeft),h=this.cells.height-s,c=this.cells.width-r;l>h&&e.scrollTo({top:h,left:a}),a>c&&e.scrollTo({top:l,left:this.rightToLeft?-c:c})},t.prototype._hasScroll=function(e,t){if(void 0===t&&(t=0),e.length&&e._frozenInternal&&e._frozenInternal<0){if(e instanceof xt)return e.lastFrozen.pos+t>this._szClient.width+e.lastFrozen._antipos;if(e instanceof Et)return e.lastFrozen.pos+t>this._szClient.height+e.lastFrozen._antipos}return!1},t.prototype._alignTheTail=function(e){if(e._frozenInternal&&e._frozenInternal<0&&e._lastFrozen>0){var t=e[e._lastFrozen-1],i=t.pos+t.renderSize,n=this.scrollPosition;if(e instanceof xt){var o=this._szClient.width+e.lastFrozen._antipos;if(i+this._ptScrl.x<o){var r=o-i-this._ptScrl.x;n.x+=r,this.scrollPosition=n}}else e instanceof Et&&(o=this._szClient.height+e.lastFrozen._antipos,i+this._ptScrl.y<o&&(r=o-i-this._ptScrl.y,n.y+=r,this.scrollPosition=n))}},t.prototype._getRangesToResize=function(e,t,i){var n,o,r=i,s=this._getResizingInfo(t,e),l=s.isRowResizing,a=s.isColResizing,h=s.rangeBeingResized;return n=this.selection.containsColumn(h.col),o=this.selection.containsRow(h.row),(a&&!n||l&&!o)&&(r=[h]),r},t.prototype._getResizingInfo=function(e,t){var i=this._mouseHdl,n={isRowResizing:i._szRowCol instanceof yt,isColResizing:i._szRowCol instanceof vt,rangeBeingResized:null};if(e){var o=this.hitTest(t);n.isRowResizing=o.edgeBottom,n.isColResizing=o.edgeRight,n.rangeBeingResized=o.range}else i._szArgs&&(n.rangeBeingResized=i._szArgs.range);return n},t.prototype._handleRowColResizing=function(e,i){if(-1==i.row){if(!e.columns.isFrozen(i.col)||!i.data||!i.data.isPrimaryDragged)return;var n=i.getColumn(),o=(l=e.columns.getFrozenSize())-n.renderWidth+i.data.newSize,r=i.data.newSize>n.renderWidth,s=e.clientSize.width;o+t._MAX_FROZEN_GAP_LIMIT>s&&r&&(i.data.maxSize=s-l+n.renderWidth,i.data.internalCancel=!0)}else{if(!e.rows.isFrozen(i.row)||!i.data||!i.data.isPrimaryDragged)return;var l,a=i.getRow(),h=(o=(l=e.rows.getFrozenSize())-a.renderHeight+i.data.newSize,r=i.data.newSize>a.renderHeight,e.clientSize.height);o+t._MAX_FROZEN_GAP_LIMIT>h&&r&&(i.data.maxSize=h-l+a.renderHeight,i.data.internalCancel=!0)}},t.prototype._getRowColResizedHandler=function(e,i){var n=this,o=new Set;return i?function(i,n){n.data&&(n.data.isPrimaryDragged&&(o.clear(),queueMicrotask((function(){var i=e.rows.getFrozenSize(),n=Array.from(o).filter((function(t){return e.rows.isFrozen(t)}));if(i+t._MAX_FROZEN_GAP_LIMIT>e.clientSize.height&&n.length>0){var r=i-n.reduce((function(t,i){return t+e.rows[i].renderHeight}),0),s=e.clientSize.height-r-2,l=Math.floor(s/n.length);e.rows.deferUpdate((function(){n.forEach((function(t){return e.rows[t].height=l}))}))}}))),o.add(n.row))}:function(i,r){r.data&&(r.data.isPrimaryDragged&&(o.clear(),queueMicrotask((function(){var i=e.columns.getFrozenSize(),r=Array.from(o).filter((function(t){return e.columns.isFrozen(t)}));if(i+t._MAX_FROZEN_GAP_LIMIT>e.clientSize.width&&r.length>0){var l=i-r.reduce((function(t,i){return t+e.columns[i].renderWidth}),0),a=e.clientSize.width-l-2,h=Math.floor(a/r.length);e.columns.deferUpdate((function(){r.forEach((function(t){return e.columns[t].width=h}))}))}0==e.columns.getTotalSize()&&(n._invalidateTimer=setTimeout((function(){e.invalidate(),n._invalidateTimer=null}),s.Control._REFRESH_INTERVAL))}))),o.add(r.col))}},t.prototype._isFrozenObjectAllowed=function(){var e=this,t=!1;return"flexgrid,wjflexgrid".split(",").forEach((function(i){e.constructor.name.toLowerCase().startsWith(i)&&(t=!0)})),t},t.prototype._isFlexSheetInstance=function(){return"flexsheet,wjflexsheet".split(",").indexOf(this.constructor.name.toLowerCase())>-1},t.prototype._isServerCollectionView=function(e,t){return!t&&(t=this),rt()&&t.collectionView instanceof rt().RestCollectionView||st()&&t.collectionView instanceof st().ODataCollectionView},t.prototype._updateRowCount=function(e,t){var i=this._gridRoleElement();if(e.grid&&i){var n=e.grid.columnHeaders.rows.length,o=e.grid.rows.length;null!=n&&null!=o?this._setAria("aria-rowcount",o+n):i.removeAttribute("aria-rowcount")}},t.prototype._updateColumnCount=function(e,t){var i=this._gridRoleElement();e.grid&&i&&(null!=e.length&&e.grid?this._setAria("aria-colcount",e.length):i.removeAttribute("aria-colcount"))},t.prototype._ensureEditSelectionForParentGrid=function(){var e=(0,s.closest)(this.hostElement,"."+Ne.cell);if(e&&e[Ne.cellIndex]){var t=e[Ne.cellIndex],i=t.panel.grid,n=!1;i.editRange&&(i.finishEditing(),n=!0),i.selection&&i.selection.contains(t.row,t.col)||(i._selHdl._adjustSelection(new qe(t.row,t.col),i.selectionMode),n=!0),n&&i.refresh()}},t.prototype._gridRoleElement=function(){return this._root&&this._root.parentElement?this._root.parentElement:this.hostElement},t.prototype._modifyRole=function(e,t,i){i?e.removeAttribute("role"):e.getAttribute("role")||e.setAttribute("role",t)},t.prototype._handleRefreshForA11y=function(){var e=this._eCHdr.querySelector('[role="row"]>[role="columnheader"]'),t=this._root.querySelector('[role="row"]>[role="gridcell"]');this._modifyRole(this._eCHdr,"rowgroup",!e),this._modifyRole(this._root,"rowgroup",!t)},t.prototype.announceShortcut=function(e){var t=this._srMessageHelper;t&&(t.textContent=e)},t.prototype.destroyScreenReaderShortCutNotifier=function(){this._srMessageHelper&&this._srMessageHelper.remove(),this._srMessageHelper=null},t._WJS_STICKY=s.ControlStateClsNames.sticky,t._WJS_MEASURE=s.ControlStateClsNames.measuring,t._WJS_UPDATING=s.ControlStateClsNames.updating,t._WJS_WSPRE=Ne.whiteSpacePre,t._MIN_VIRT_ROWS=200,t._RESIZE_SCRL_GAP=5,t._MAX_FROZEN_GAP_LIMIT=2,t._FLEXGRID_COUNT=1,t._defTypeWidth=((He={})[s.DataType.Number]="0.714285714*",He),t._ctrlTemplate="",t}(s.Control),Tt=function(){function e(t){var i=this;this._updateImeFocusAsyncBnd=this._updateImeFocusAsync.bind(this),this._cmpstartBnd=this._compositionstart.bind(this),this._keypressBnd=this._keypress.bind(this),this._suspended=!1,this._handlingCompositionStart=!1,this._g=t;var n=(0,s.createElement)('<textarea class="'+Ne.gridEditor+" "+s.InputFormElementsClsNames.formControl+" "+Ne.gridIme+'"/>');(0,s.setCss)(n,e._cssHidden),(0,s.disableAutoComplete)(n),n.tabIndex=-1,(0,s.setAttribute)(n,"aria-label",s.culture.FlexGrid.ariaLabels.IMEInput),this._tbx=n,this._suspended=!1,this._maskProvider=new s._MaskProvider(n),t._imeContainer.appendChild(n),this._updateImeFocus();var o=t.hostElement,r=t.addEventListener.bind(t),l=this._updateImeFocusAsyncBnd;r(o,"blur",l,!0),r(o,"focus",l,!0),r(n,"compositionstart",this._cmpstartBnd),(0,s.isiOS)()&&r(o,"keypress",this._keypressBnd),t.selectionChanged.addHandler(l,this),t.cellEditEnded.addHandler(this._cellEditEnded,this),t.cellEditEnding.addHandler(this._cellEditEnding,this),r(o,"mousedown",(function(e){var i=(0,s.closest)((0,s.getActiveElement)(),"."+Ne.hostElement)==t.hostElement,n=t.hitTest(e);i&&n.panel==t.cells&&(0,s.hasClass)(n.target,Ne.cell)&&(t.isReadOnly||e.preventDefault())})),t.gotFocus.addHandler((function(){return i._updateImeFocus()}))}return e.prototype.dispose=function(){var e=this._g,t=e.hostElement,i=this._tbx,n=e.removeEventListener.bind(e),o=this._updateImeFocusAsyncBnd;n(t,"blur",o),n(t,"focus",o),n(t,"keypress",this._keypressBnd),n(i,"compositionstart",this._cmpstartBnd),e.selectionChanged.removeHandler(o),e.cellEditEnded.removeHandler(this._cellEditEnded),e.cellEditEnding.removeHandler(this._cellEditEnding),(0,s.removeChild)(i),this._suspended=!1},e.prototype._compositionstart=function(e){var t=this,i=this._g;if(!i.activeEditor){var n=i._selHdl.selection;this._handlingCompositionStart=!0;var o=i.startEditing(!1,n.row,n.col,!1,e);if(this._handlingCompositionStart=!1,o){if(i.activeEditor&&"checkbox"!=i.activeEditor.type){n=i.editRange;var r=i._getBindingColumn(i.cells,n.row,i.columns[n.col]),l=r&&r._edt,a=i.activeEditor,h=this._tbx,c=i.cells.hostElement,u=i.columns[n.col].pos+c.offsetLeft,d=i.rows[n.row].pos+c.offsetTop,p=i.getCellBoundingRect(n.row,n.col),f=i.cells.getCellElement(n.row,n.col);p.width=f.offsetWidth,p.height=f.offsetHeight,i.rows.isFrozen(n.row)&&(d+=i._root.scrollTop,i.rows._frozenInternal<0&&i._hasScroll(i.rows)&&(d=i._szClient.height+i.rows[n.row]._antipos+c.offsetTop+i._root.scrollTop)),i.columns.isFrozen(n.col)&&(u+=i._root.scrollLeft,i.columns._frozenInternal<0&&i._hasScroll(i.columns)&&(u=i._szClient.width+i.columns[n.col]._antipos+c.offsetLeft+i._root.scrollLeft));var _=f.querySelector("."+s.InputFormElementsClsNames.btn+"."+s.UtilitesClsNames.right);_&&(p.width-=_.offsetWidth),"minLength,maxLength,pattern".split(",").forEach((function(e){(0,s.setAttribute)(h,e,a.getAttribute(e))}));var g=a instanceof HTMLTextAreaElement;(0,s.setAttribute)(h,"wrap",g?"soft":"off");var m=getComputedStyle(f),b=m.paddingTop;if(n.rowSpan>1&&!g){var v=parseFloat(m.lineHeight);isNaN(v)&&(v=1.2*parseFloat(m.fontSize)),b=Math.max(0,(p.height-v)/2)+"px"}var y={position:"absolute",left:u,top:d,width:p.width-1,height:p.height-1,paddingTop:b,paddingLeft:m.paddingLeft,paddingRight:m.paddingRight,textAlign:m.textAlign,zIndex:f.style.zIndex};if(i.rightToLeft&&(y.right=parseInt(f.style.right)+parseInt(i.cells.hostElement.style.right),y.left=""),(0,s.setCss)(h,y),l){var w=l._tbx.getBoundingClientRect(),C=h.getBoundingClientRect(),x=window.getComputedStyle(h),E=parseFloat(x.left),S=parseFloat(x.right),I=parseFloat(x.top);i.rightToLeft?(0,s.setCss)(h,{right:S+C.right-w.right+"px",top:I+w.top-C.top+"px",width:w.width+"px",height:w.height+"px"}):(0,s.setCss)(h,{left:E+w.left-C.left+"px",top:I+w.top-C.top+"px",width:w.width+"px",height:w.height+"px"})}i._edtHdl._edt=h,h.select();var D=a.value;(0,s.isSafari)()?("\u3000"!=h.value&&" "!=h.value||(h.value=D),(0,s.setSelectionRange)(h,h.value.length)):setTimeout((function(){"\u3000"!=h.value&&" "!=h.value||(h.value=D),(0,s.setSelectionRange)(h,h.value.length)}),20),s.Control.sharedState.InvalidScroll=(0,s.isEdge)(),h.placeholder=a.placeholder,a.placeholder="",a.value=""}}else this._tbx.blur(),setTimeout((function(){t._tbx.focus(),i._setFocusNoScroll(i.hostElement)}),20)}},e.prototype._cellEditEnding=function(){var e=this._maskProvider;e&&e.mask&&e._valueChanged()},e.prototype._cellEditEnded=function(){var t=this._tbx,i=this._g;if(this._enableIme()){var n=(0,s.getActiveElement)();n.blur(),i._isScrollingByWheel?setTimeout((function(){n.focus(),i._setFocusNoScroll(i.hostElement),t.value="",n.focus()}),20):(n.focus(),i._setFocusNoScroll(i.hostElement),n.focus()),t.value="",(0,s.setCss)(t,e._cssHidden),this._updateImeFocus()}},e.prototype._keypress=function(e){e.defaultPrevented||e.target!=this._tbx||e.ctrlKey||e.altKey||e.metaKey||27==e.keyCode||this._g.activeEditor||(this._tbx.value="",this._compositionstart(e),e.stopPropagation())},e.prototype._updateImeFocus=function(){var e=this._g,t=this._tbx,i=(0,s.getActiveElement)(),n=e._getTabIndex();if(e.activeEditor||(0,s.closest)(i,"."+Ne.hostElement)!=e.hostElement)(e.isDisabled||n<0)&&t.tabIndex>=0&&(t.tabIndex=-1);else if(this._enableIme()&&!e._wantsInput(i)){i!=t&&(e.activeCell&&(e.activeCell.tabIndex=-1),t.tabIndex=n,t.disabled=!1,t.value="",this._showCellMessageForScreenReader(),e.isTouching||(window&&window.top!=window.self?((0,s.setSelectionRange)(t,0,0,!1),e._setFocusNoScroll(t)):((0,s.setSelectionRange)(t,0),t.focus())));var o=e._selHdl.selection,r=o.isValid?e._getBindingColumn(e.cells,o.row,e.columns[o.col]):null;this._maskProvider.mask=r?r.mask:null}else if(t.tabIndex=-1,t.disabled=!0,t.value="",i==t){t.blur();var l=e.activeCell;l?(l.tabIndex=n,l.focus()):e.focus()}},e.prototype._updateImeFocusAsync=function(){var e=this;this._toFocus&&clearTimeout(this._toFocus),this._toFocus=setTimeout((function(){e._toFocus=null,e._updateImeFocus()}),100)},e.prototype._resetTabIndex=function(){this._tbx.tabIndex=-1},e.prototype._suspendIME=function(){this._suspended=!0},e.prototype._resumeIME=function(){this._suspended=!1},e.prototype._enableIme=function(){var e=this._g,t=e._selHdl.selection;if(this._suspended)return!1;if(!e.canEditCell(t.row,t.col))return!1;var i=t.isValid?e._getBindingColumn(e.cells,t.row,e.columns[t.col]):null;return!(!i||i.dataType==s.DataType.Boolean)&&!(i&&i.dataMap&&i.dataMapEditor==je.RadioButtons||i.dataMapEditor==je.Menu)},e.prototype._showCellMessageForScreenReader=function(){var e=this,t=(0,s.getActiveElement)();if(t&&t!==this._tbx){var i=s.culture.FlexGrid.accessibilityHelperMessage.imeHandler.focusImeCell,n=t.parentElement.getAttribute("aria-rowindex"),o=t.getAttribute("aria-colindex"),r="",l="";if(t.id){var a=t.id.split("-"),h=Number(a[a.length-1]);!isNaN(h)&&this._g.columnHeaders.columns[h]&&this._g.columnHeaders.rows.forEach((function(t,i){0!==i&&(r+=" ");var n=e._g.columnHeaders.getCellData(i,h,!1);(0,s.isNullOrUndefined)(n)&&(n=""),r+=n}));var c=Number(a[a.length-2]);!isNaN(c)&&this._g.rowHeaders.rows[c]&&this._g.rowHeaders.columns.forEach((function(t,i){0!==i&&(l+=" ");var n=e._g.rowHeaders.getCellData(c,i,!1);(0,s.isNullOrUndefined)(n)&&(n=""),l+=n}))}i=(0,s.format)(i,{value:t.textContent,rowIndex:n,colIndex:o,colName:r,rowName:l}),this._g.announceShortcut(i)}},e._cssHidden={position:"fixed",width:"0px",left:-32e3,top:-32e3,overflow:"hidden"},e}();function Pt(e,t,i,n,o){var r=e.columns,l=r._frozenInternal,a=e.allowPinning;n&&a==dt.Both&&(a=o?dt.ColumnRange:dt.SingleColumn);var h=!r.isFrozen(t),c=l>=0?l:r._lastFrozen-1,u=l>=0?1:-1,d=h?t===c:t===c-u,p=e.rowHeaders.columns.length,f=s.culture.FlexGrid.accessibilityHelperMessage,_=e.getColumn(t).header,g=h?f.pin.pinColumnName:f.pin.unpinColumnName,m=new $e(e.cells,new qe(i,t));if(e.onPinningColumn(m)){var b=r._frozenInternal>=0?new Set(r.slice(0,r._frozenInternal).map((function(e,t){return t}))):new Set(r.slice(r.length+r._frozenInternal).map((function(e,t){return t+r.length+r._frozenInternal})));if(a==dt.SingleColumn)if(b.has(t)?b.delete(t):b.add(t),Mt(e,b),d)r._frozenInternal=h?r._frozenInternal+u:r._frozenInternal-u;else if(e._hasColumnGroups()){var v=e._getColumnGroup(i,t);e._canMoveColumnGroup(i,t,0,c)||v&&v._ownerList&&v._ownerList.owner&&v._ownerList.owner.collapseTo&&(v._ownerList.owner.collapseTo="");var y=v._ownerList.length>1?i:Math.max(i-1,0);if(r.isFrozen(t)){if(!y||!d||y&&e._getColumnGroup(i-1,t)!=e._getColumnGroup(i-1,t+1)){var w=l>=0?l:r._lastFrozen;e._moveColumnGroup(y,t,0,w,!1)}r._frozenInternal-=u}else e._moveColumnGroup(y,t,0,c,!1),r._frozenInternal+=u}else r.isFrozen(t)?(g=f.pin.unpinColumnName,r.moveElement(t,c-u,!1),r._frozenInternal-=u):(g=f.pin.pinColumnName,r.moveElement(t,c,!1),r._frozenInternal+=u);if(a==dt.ColumnRange){if(r._frozenInternal>=0)for(var C=0;C<=t;C++)b.add(C);else if(r._frozenInternal<0)for(C=t;C<r.length;C++)b.add(C);Mt(e,b),t+1!=l&&r._frozenInternal>=0?(r.frozen=t+1,g=f.pin.pinColumnIndex):-(r.length-t)!=l&&r._frozenInternal<0?(r._frozenInternal=-(r.length-t),g=f.pin.pinColumnIndex):(r._frozenInternal=0,g=f.pin.unpin)}e._updateLayoutOnPin(),e.onPinnedColumn(m),g=(0,s.format)(g,{name:_,colIndex:t+p+1}),e.announceShortcut(g)}}function Mt(e,t){var i=e.columns;if(Array.from(t).reduce((function(e,t){return e+i[t].renderSize}),0)+5>e._szClient.width){var n=Array.from(t).sort((function(e,t){return e-t})),o=e._szClient.width-5*n.length;e.columns.length<=t.size&&(o=e._szClient.width);var r=Math.round(o/n.length);n.forEach((function(e){i[e].width=r}))}e.invalidate()}function At(e,t,i,n,o,r,l){var a=e,h=a.allowSorting,c=a.collectionView,u=c?c.sortDescriptions:null;if(c&&c.canSort&&h!=ct.None){var d=t.columns[i],p=a._getBindingColumn(t,n,d),f=p?p._getBindingSort():null;if(p.allowSorting&&f){if(d&&p&&d._uid==p._uid){var _=a.getMergedRange(t,n,i,!1);if(_&&_.columnSpan>1)return}var g=new $e(t,new qe(n,i),o),m=s.culture.FlexGrid.accessibilityHelperMessage,b="";if(a.onSortingColumn(g)){a._edtHdl._commitRowEdits();for(var v=-1,y=null,w=0;w<u.length;w++)if(u[w].property==f){v=w,y=u[w];break}u.deferUpdate((function(){if(r&&l)u.clear(),b=m.sort.clearSort;else if(y){var e=null!=p.sortOrder?p.sortOrder:a.sortOrder;r||y.ascending&&(e===ut.DescAscNone||a.isTouching&&e===ut.DescAsc)||!y.ascending&&(e===ut.AscDescNone||a.isTouching&&e===ut.AscDesc)?(u.removeAt(v),b=m.sort.clearSort):(t=!y.ascending,u[v]=new s.SortDescription(f,t),b=t?m.sort.sortAscending:m.sort.sortDescending)}else{h!=ct.MultiColumn&&(u.clear(),b=m.sort.clearSort);var t=null==p.sortOrder?a.sortOrder==ut.AscDesc||a.sortOrder==ut.AscDescNone:p.sortOrder==ut.AscDesc||p.sortOrder==ut.AscDescNone,i=new s.SortDescription(f,t);u.push(i),b=t?m.sort.sortAscending:m.sort.sortDescending}})),b=(0,s.format)(b,{name:d.header}),a.announceShortcut(b),a.onSortedColumn(g)}}}}var Ht,zt=function(){function e(e){this._nrt=new kt,this._top=!1,this._keydownBnd=this._keydown.bind(this),this._committing=!1,this._pasting=!1,this._g=e,this._attach()}return Object.defineProperty(e.prototype,"newRowAtTop",{get:function(){return this._top},set:function(e){if(e!=this.newRowAtTop){this._top=(0,s.asBoolean)(e),this.updateNewRowTemplate();var t=this._g;this._top&&t.selectionMode==Ue.ListBox&&(t.rows.forEach((function(e,t){e._setFlag(at.Selected,0==t,!0)})),t.select(0,t.selection.col))}},enumerable:!0,configurable:!0}),e.prototype.updateNewRowTemplate=function(){var e=this._g,t=e.editableCollectionView,i=e.rows,n=this._nrt,o=t&&t.canAddNew&&e.allowAddNew&&!e.isReadOnly,r=i.indexOf(n),s=this._top?0:i.length-1,l=!1;if(!o&&r>-1){var a=e.selection;a.row==r&&e.select(a.row-1,a.col),i.removeAt(r)}else o&&(r<0?l=!0:r!=s&&(i.removeAt(r),l=!0),l&&(this._top?i.insert(0,n):i.push(n)),n&&(n._ubv=null,n._setFlag(at.ParentCollapsed,!1),this._top&&e.selectionMode==Ue.ListBox||n._setFlag(at.Selected,!1)))},e.prototype._attach=function(){var e=this._g;e&&(e.pasting.addHandler(this._pastingData,this),e.pasted.addHandler(this._pastedData,this),e.loadedRows.addHandler(this.updateNewRowTemplate,this),e.addEventListener(e.hostElement,"keydown",this._keydownBnd,!0))},e.prototype._detach=function(){var e=this._g;e&&(e.pasting.removeHandler(this._pastingData,this),e.pasted.removeHandler(this._pastedData,this),e.loadedRows.removeHandler(this.updateNewRowTemplate),e.removeEventListener(e.hostElement,"keydown",this._keydownBnd,!0))},e.prototype._keydown=function(e){!e.defaultPrevented&&e.keyCode==s.Key.Escape&&null==this._g.activeEditor&&this._top&&this._nrt.dataItem&&(this._nrt.dataItem=null,this._g.invalidate())},e.prototype._beginningEdit=function(e,t){if(!t.cancel){var i=e.rows[t.row];i instanceof kt&&this._handleEditStarting(e,t,i)}},e.prototype._pastingData=function(e,t){t.cancel||(this._pasting=!0)},e.prototype._pastedData=function(e,t){this._pasting=!1},e.prototype._rowEditStarting=function(e,t){if(this._pasting){var i=e.rows[t.row];i instanceof kt&&this._handleEditStarting(e,t,i)}},e.prototype._rowEditEnding=function(e,t){var i=e.editableCollectionView,n=this._nrt.dataItem;if(i&&this._top&&n&&!t.cancel){var o=i.currentAddItem;if(!o||o!=n)for(var r in o=i.addNew(),n)o[r]=n[r]}},e.prototype._rowEditEnded=function(e,t){var i=this,n=e.editableCollectionView;if(n&&!this._committing)if(this._top){if(t.cancel)return;var o=this._nrt.dataItem;if(o){this._committing=!0,this._nrt.dataItem=null;var r=this._g.rows,s=n.items.indexOf(o)+1;s<r.length&&t._rng.setRange(s,-1),e.onRowAdded(t)?n.commitNew():n.cancelNew(),this._committing=!1}var l=e.rows[t.row];setTimeout((function(){l instanceof kt&&(e._selHdl.extendedSelection.clear(),e.select(0,e.columns.firstVisibleIndex)),i.updateNewRowTemplate()}),20)}else n.isAddingNew&&n.commitNew()},e.prototype._handleEditStarting=function(e,t,i){var n=e.editableCollectionView;if(n&&n.canAddNew)if(this._top)if(null==this._nrt.dataItem){var o=null,r=n.sourceCollection,l=n.newItemCreator;o=(0,s.isFunction)(l)?l():r&&r.length?new r[0].constructor:{},this._nrt.dataItem=o}else n.currentAddItem&&(e.onRowAdded(t)||n.cancelNew());else{o=n.currentAddItem&&n.currentAddItem==i.dataItem?n.currentAddItem:n.addNew(),n.moveCurrentTo(o);var a=this._nrt.isSelected;this.updateNewRowTemplate(),a&&t.row>-1&&(e.rows[t.row].isSelected=!0),e.isUpdating||e.refresh(!0),e.onRowAdded(t)||n.cancelNew()}},e}(),kt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ze(t,e),t}(yt);!function(e){e[e.None=0]="None",e[e.Cells=1]="Cells",e[e.ColumnHeaders=2]="ColumnHeaders",e[e.RowHeaders=4]="RowHeaders",e[e.AllHeaders=6]="AllHeaders",e[e.All=7]="All"}(Ht||(Ht={}));var Ot=function(){function e(e){null!=e&&console.error('** WARNING: the "grid" parameter has been deprecated. Please remove it.')}return e.prototype.getMergedRange=function(e,t,i,n){return void 0===n&&(n=!0),this._getMergedRange(e,t,i,n)},e.prototype._getMergedRange=function(e,t,i,n,o){void 0===n&&(n=!0),void 0===o&&(o=!0);var r,l=e.grid,a=e.cellType,h=e.columns,c=e.rows,u=c[t],d=h[i];if(u instanceof kt)return null;if(!(u instanceof yt&&d instanceof vt))return null;if(e==l.columnHeaders){var p=l._getColumnGroup(t,i);if(p){var f=p._rng,_=e.columns;return _.isFrozen(f.col)!=_.isFrozen(f.col2)&&(f=f.clone(),_.isFrozen(i)?_._frozenInternal>0?f.col2=_._frozenInternal-1:f.col=_.length+_._frozenInternal:_._frozenInternal>0?f.col=_._frozenInternal:f.col2=_.length+_._frozenInternal-1),f}}if(l.showGroups&&!l.childItemsPath&&u instanceof wt&&u.dataItem instanceof s.CollectionViewGroup&&a==Ge.Cell){if(f=new qe(t,i),d.aggregate==s.Aggregate.None){for(var g=h._frozenInternal>=0?h._frozenInternal:h.length+h._frozenInternal;f.col>0&&h[f.col-1].aggregate==s.Aggregate.None&&f.col!=g;)f.col--;for(;f.col2<h.length-1&&h[f.col2+1].aggregate==s.Aggregate.None&&f.col2+1!=g;)f.col2++}for(;f.col<i&&!h[f.col].visible;)f.col++;return f.isSingleCell?null:f}var m=!1,b=Ht,v=Ge;switch(l.allowMerging){case b.None:m=!0;break;case b.Cells:m=a!=v.Cell;break;case b.ColumnHeaders:m=a!=v.ColumnHeader&&a!=v.TopLeft;break;case b.RowHeaders:m=a!=v.RowHeader&&a!=v.TopLeft;break;case b.AllHeaders:m=a==v.Cell}if(m)return null;if(a==v.Cell){var y=l.editableCollectionView,w=y?y.currentAddItem:null;if(w&&u.dataItem==w)return null}var C=e.grid.editableCollectionView;if(r=C?C.currentAddItem:null,h[i].allowMerging){f=new qe(t,i);var x=e._vrb,E=0,S=c.length-1;t>=c._frozenInternal?n&&(a==Ge.Cell||a==Ge.RowHeader)&&l._vtRows<c.length&&x&&(E=x.topRow,S=x.bottomRow):c.length>c._frozenInternal&&(S=c._frozenInternal-1);for(var I=e._getCellData(t,i,o),D=t-1;D>=E&&this._mergeCell(e,t,i,D,i,r,o,I);D--)f.row=D;for(var R=t+1;R<=S&&this._mergeCell(e,t,i,R,i,r,o,I);R++)f.row2=R;for(;f.row<t&&!c[f.row].visible;)f.row++;if(!f.isSingleCell)return f}if(c[t].allowMerging){f=new qe(t,i),x=e._vrb;var T=0,P=h.length-1;i>=h._frozenInternal?n&&(a==Ge.Cell||a==Ge.ColumnHeader)&&l._vtCols<h.length&&x&&(T=x.leftCol,P=x.rightCol):P=h._frozenInternal-1,I=e._getCellData(t,i,o);for(var M=i-1;M>=T&&this._mergeCell(e,t,i,t,M,r,o,I);M--)f.col=M;for(var A=i+1;A<=P&&this._mergeCell(e,t,i,t,A,r,o,I);A++)f.col2=A;for(;f.col<i&&!h[f.col].visible;)f.col++;if(!f.isSingleCell)return f}return null},e.prototype._mergeCell=function(e,t,i,n,o,r,l,a){void 0===l&&(l=!0),void 0===a&&(a=null);var h=e.rows[t],c=e.rows[n];if(!h||!c)return!1;if(h instanceof wt||h instanceof kt||c instanceof wt||c instanceof kt)return!1;if(r&&(h.dataItem==r||c.dataItem==r))return!1;if(t!=n&&e.rows.isFrozen(t)!=e.rows.isFrozen(n))return!1;if(i!=o&&e.columns.isFrozen(i)!=e.columns.isFrozen(o))return!1;if(t!=n){if(i>0&&(h.allowMerging&&this._mergeCell(e,t,i-1,t,i,r,l)||c.allowMerging&&this._mergeCell(e,n,i-1,n,i,r,l)))return!1;if(o<e.columns.length-1&&(h.allowMerging&&this._mergeCell(e,t,o,t,o+1,r,l)||c.allowMerging&&this._mergeCell(e,n,o,n,o+1,r,l)))return!1}var u=e._getCellData(n,o,l);return null==a&&(a=e._getCellData(t,i,l)),!!(a==u||(0,s.isDate)(a)&&s.DateTime.equals(a,u))},e}(),Lt="$WJ-MSKP",Ft=function(){function e(){}return e.prototype.updateCell=function(t,i,n,o,r,l){var a;o.style.cssText="";var h=t.grid,c=h.rightToLeft,u=t.rows,d=t.columns,p=u[i],f=d[n],_=i,g=n,m=p instanceof wt?p:null,b=!!m&&m.isSummary,v=m&&(h.groupSummaryPosition===mt.Bottom||h.groupSummaryPosition===mt.Auto&&!m.isCollapsed),y=p instanceof kt?p:null,w=!!(tt()&&p instanceof tt().DetailRow),C=f.renderWidth,x=p.renderHeight,E=t.cellType,S=Ne.cell,I="",D={display:""},R=Ge,T=0,P=0,M=!0;if(m&&n!=d.firstVisibleIndex?!b&&v&&(M=!1):b&&n==d.firstVisibleIndex&&(M=!1),0!=l&&o.firstElementChild&&(1==o.childNodes.length&&"checkbox"==o.firstElementChild.type||(o.textContent="")),h._useFrozenDiv()){if(o.getAttribute("left-for-clone")&&o.removeAttribute("left-for-clone"),o.getAttribute("top-for-clone")&&o.removeAttribute("top-for-clone"),d.isFrozen(n)&&d._frozenInternal<0){var A=h._szClient.width+f._antipos;(P=A<=f.pos?A:0)&&(0,s.isChromiumBased)()&&!(0,s.isMobile)()&&P--,P&&(0,s.setAttribute)(o,"left-for-clone",P)}if(u.isFrozen(i)&&u._frozenInternal<0){var H=h._szClient.height+p._antipos;(T=H<=p.pos?H:0)&&(0,s.isChromiumBased)()&&!(0,s.isMobile)()&&T--,T!=Math.floor(T)&&(T=Math.round(T)),T&&(h.columnFooters.rows.length>0&&(T-=h.columnFooters.height),(0,s.setAttribute)(o,"top-for-clone",T))}}r&&!r.isSingleCell&&(i=r.row,n=r.col,_=r.row2,g=r.col2,p=u[i],f=d[n],m=p instanceof wt?p:null,x=(Y=r.getRenderSize(t)).height,C=Y.width);var z,k,O,L,F,B,V=h._getBindingColumn(t,i,f),j=V?V.dataType:p?p.dataType:void 0;O=E==R.RowHeader||E==R.Cell&&(!m||h.childItemsPath),B=V&&V.isContentHtml||p&&p.isContentHtml,k=E==R.Cell?h._getMapEditor(p,V):null,z=null,V&&(z=V.dataMap),null==z&&p&&(z=p.dataMap),L=O&&k==je.RadioButtons,F=j==s.DataType.Boolean&&!z;var N=O&&k==je.Menu,K=f.pos,G=p.pos,W=h._ptScrl,q=u.length>u.frozenEnd,U=d.length>d.frozenEnd;if(h._useFrozenDiv()&&E==R.Cell&&!h.editRange)d.isFrozen(n)&&!u.isFrozen(_)?G+=W.y:u.isFrozen(i)&&!d.isFrozen(g)&&(K+=W.x);else{var Y=h._szClient;if(u.isFrozen(_)&&(u._frozenInternal>=0?(G=Math.min(G,Y.height),x=Math.min(x,Math.max(0,Y.height-G)),G-=W.y):(G=Math.min(p.pos,Y.height+p._antipos),u.isFrozen(u._firstVisible)||(G-=W.y),(0,s.isChromiumBased)()&&!(0,s.isMobile)()&&q&&(G-=1))),d.isFrozen(g)&&!w){var J=0!=Y.width?Y.width:h._preWidth();d._frozenInternal>=0?(K=Math.min(K,J),K-=W.x):(K=Math.min(f.pos,J+f._antipos),K-=W.x,(0,s.isChromiumBased)()&&!(0,s.isMobile)()&&U&&(K-=1))}}c?D.right=K+"px":D.left=K+"px",u.isFrozen(_)||(G-=t._getOffsetY()),D.top=G+"px",D.width=C+"px",D.height=x+"px";var X=0;d.isFrozen(n)&&(X+=1),u.isFrozen(i)&&(u._frozenInternal<0&&h.columnFooters.rows.length>0&&(D.top=G-h.columnFooters.height+"px"),X+=2,0===x&&(X=-1));var $=!1,Z=h.alternatingRowStep;if(!Z||r&&r.row!=r.row2||($=p.visibleIndex%(Z+1)==0,1==Z&&($=!$)),E==R.Cell)m&&(S+=" "+Ne.group),m&&b&&(S+=" "+Ne.groupSummary),$&&(S+=" "+Ne.alt),(u.isFrozen(i)||d.isFrozen(n))&&(S+=" "+Ne.frozen),y&&(S+=" "+Ne.new),p&&p.cssClass&&(S+=" "+p.cssClass),V&&V.cssClass&&(S+=" "+V.cssClass),h.headersVisibility&pt.Row&&(0,s.setAttribute)(o,"id",t.grid._ariaId+"-cell-"+i+"-"+n);else{S+=" "+Ne.header,$&&(S+=" "+Ne.headerAlt),p&&p.cssClass&&E==R.ColumnHeader&&(S+=" "+p.cssClass),V&&V.cssClass&&E==R.RowHeader&&(S+=" "+V.cssClass);var Q=!1;E!=R.ColumnHeader&&E!=R.TopLeft||h.allowResizing&Xt.Columns&&(Q=null!=h._mouseHdl._getResizeCol(t,g)),Q||E!=R.RowHeader||h.allowResizing&Xt.Rows&&(Q=null!=h._mouseHdl._getResizeRow(t,_)),Q&&(S+=" "+Ne.bigHeader)}var ee=E==R.Cell&&n==d.firstVisibleIndex&&m&&!jt(h,i,n),te=ee&&m.hasChildren,ie=E,ne=h._isTransposed(),oe=(ie==R.ColumnHeader&&!ne||ie==R.RowHeader&&ne)&&h._hasColumnGroups()?h._getColumnGroup(i,n):null;p&&p.cssClassAll&&(S+=" "+p.cssClassAll),V&&V.cssClassAll&&(null==oe||0==oe.columns.length)&&(S+=" "+V.cssClassAll),oe&&oe.cssClassAll&&oe.columns.length>0&&(S+=" "+oe.cssClassAll);var re=Ye,se=t.getSelectedState(i,n,r);se!=re.None&&E==R.Cell&&!F&&h.editRange&&h.editRange.contains(i,n)&&(se=re.None);var le=!1,ae=((a={})[R.RowHeader]="rh",a[R.ColumnHeader]="ch",a[R.TopLeft]="tl",a[R.BottomLeft]="bl",a[R.ColumnFooter]="cf",a)[E];switch(ae&&(h.headersVisibility&pt.Row&&"true"!==o.dataset.groupPanel&&(0,s.setAttribute)(o,"id",t.grid._ariaId+"-"+ae+"-"+i+"-"+n),le=!0),se){case re.Active:S+=" "+s.ControlStateClsNames.active;break;case re.Cursor:S+=le?" "+Ne.focusHeaderCell:" "+s.ControlStateClsNames.selected,S+=" "+s.ControlStateClsNames.active;break;case re.Selected:S+=" "+s.ControlStateClsNames.multiSelected}if(u.isFrozen(_))if(u._frozenInternal>0)S+=" "+Ne.frozenRow,_===u._lastFrozen&&(S+=" "+Ne.lastFrozenRow);else if(S+=" "+Ne.frozenRowBottom,i===u._lastFrozenVisible)S+=" "+Ne.lastFrozenRowBottom;else if(m&&u.length-i<Math.abs(u._frozenInternal)){for(var he=i-1,ce=!1;he>=u.length+u._frozenInternal;){if(u[he].isVisible){ce=!0;break}he--}ce||(S+=" "+Ne.lastFrozenRowBottom)}if(d._frozenInternal>0)g<=d._lastFrozen&&(S+=" "+Ne.frozenColLeft,g===d._lastFrozen&&(S+=" "+Ne.frozenCol));else if(d._frozenInternal<0&&g>=d._lastFrozen)if(S+=" "+Ne.frozenColRight,n===d._lastFrozenVisible)S+=" "+Ne.frozenColRightEdge;else if(d.length-n<Math.abs(d._frozenInternal)){for(var ue=n-1,de=!1;ue>=d.length+d._frozenInternal;){if(d[ue].isVisible){de=!0;break}ue--}de||(S+=" "+Ne.frozenColRightEdge)}u._frozenInternal<0&&_==u._lastUnfrozenVisible&&(S+=" "+Ne.lastVisibleRow),d._frozenInternal<0&&g==d._lastUnfrozenVisible&&(S+=" "+Ne.lastVisibleCol),(V&&V.wordWrap||p&&p.wordWrap)&&(S+=" "+Ne.wrap),(V&&V.multiLine||p&&p.multiLine)&&(S+=" "+Ne.multiline);var pe=V?V.getAlignment(p):void 0;if(pe&&(I=" "+s.UtilitesClsNames.align+"-"+pe),oe&&oe.align&&(I=" "+s.UtilitesClsNames.align+"-"+oe.align),D.paddingLeft=D.paddingRight=D.paddingTop=D.paddingBottom="",E==R.Cell&&h.rows.maxGroupLevel>-1&&n==d.firstVisibleIndex&&h.treeIndent){var fe=m?Math.max(0,m.level):u.maxGroupLevel+1,_e=Math.min(h.treeIndent*fe+h._cellPadLeft,C-h._cellPadHorz)+"px";c?D.paddingRight=_e:D.paddingLeft=_e}C<=h._cellPadHorz&&null==o.getAttribute(Rt._WJS_MEASURE)&&(D.paddingLeft=D.paddingRight=0),te&&(I=""),te?(0,s.setAttribute)(o,"aria-expanded",!m.isCollapsed):o.removeAttribute("aria-expanded");var ge=null,me=null;if(0!=l&&V){if(ge=t.getCellData(i,n,!1),me=t.getCellData(i,n,!0),m&&v&&!m.isSummary&&ie==R.Cell&&(me=""),te&&!m.isSummary){var be=Gt(m,o);me=m.getGroupHeader()||(0,s.escapeHtml)(me),(bt=document.createElement("span")).classList.add(Ne.elemCollapseSpace),o.innerHTML=be.outerHTML+bt.outerHTML+me}else if(E!=R.ColumnHeader||_!=h._getSortRowIndex()&&V==f)if(E==R.RowHeader&&!me&&function(){var e=!1;if(n==h._getEditColumnIndex()){var t=h.editableCollectionView,i=t?t.currentEditItem:null;me=o.innerHTML=i&&p.dataItem==i?Wt("pencil",Bt().pencil,!0):p instanceof kt?Wt("asterisk",Bt().asterisk,!0):"",e=!0}var r=V._tpl;return r&&(Vt(r,o,ge,me,p,V),e=!0),e}());else if(E!=R.Cell||j!=s.DataType.Boolean||z||m&&!(0,s.isBoolean)(ge))if(E==R.Cell&&N&&jt(h,i,n))B&&z&&!z.isEditable&&(me=(0,s.toPlainText)(me)),o.innerHTML="<span style='flex-grow:1'></span>",o.children[0].textContent=me,(we=document.createElement("input")).type="menu",we.value=me,h._edtHdl._edt=we;else if(E==R.Cell&&!L&&jt(h,i,n)){var ve=V.inputType||p.inputType;if(ve||(ve=j!=s.DataType.Number||z?"text":"tel"),!z&&!V.mask&&!p.mask){var ye=t.getCellData(i,n,!1);(0,s.isNumber)(ye)&&(me=function(e,t){t=t||"n";var i=s.Globalize._parseNumericFormat(t);switch(i.spec){case"d":case"x":break;case"e":t=t.replace(/[0-9]/g,"");break;default:t="p"==i.spec?"P15":"r",i.scale&&(t+=Array(i.scale/3+1).join(","))}return s.Globalize.formatNumber(e,t,!0)}(ye,V.format||p.format))}o.innerHTML=(V.multiLine||p.multiLine)&&"checkbox"!=ve?'<textarea wrap="soft"></textarea>':'<input type="'+ve+'"/>';var we=o.children[0];(0,s.addClass)(we,Ne.gridEditor+" "+s.InputFormElementsClsNames.formControl),(0,s.disableAutoComplete)(we),(0,s.setAriaLabel)(we,Bt().editCell),B&&z&&!z.isEditable&&(me=(0,s.toPlainText)(me)),we.value=me,we.tabIndex=-1,we.required=V.getIsRequired(p),(0,s.setAttribute)(we,"aria-required",we.required);var Ce=V.maxLength||p.maxLength;Ce&&(we.maxLength=Ce),we.style.textAlign=V.getAlignment(p);var xe=V.mask||p.mask;xe&&(we[Lt]=new s._MaskProvider(we,xe)),h.showPlaceholders&&(we.placeholder=V.placeholder||""),((0,s.isSafari)()||s.Control.sharedState.InvalidScroll)&&h._edtHdl&&h._edtHdl._edt&&(we.value=h._edtHdl._edt.value),h._edtHdl._edt=we}else{var Ee=null;if(L){var Se=[],Ie=t.getCellData(i,n,!1);z._cv.items.forEach((function(e,t){var o=e[z.selectedValuePath],r=o===Ie?" checked":"",l=h.isReadOnly||p.isReadOnly||f.isReadOnly||!h._edtHdl._allowEdit(i,n)?" disabled":"",a=(0,s.escapeHtml)(z.getDisplayValue(o));t===ge&&(Ee=a),Se.push('<label><input type="radio" tabindex="-1"'+r+l+' data-idx="'+t+'" value="'+a+'"><span>'+a+"</span></label>")})),o.innerHTML=Se.join(" "),Ee&&(Me=Bt(),(0,s.setAriaLabel)(o,Ee+" "+Me.radioButtonChecked)),S+=" "+e._WJC_RADIOMAP}var De=O?V._tpl:null;if(De&&M?Vt(De,o,ge,me,p,V):L||(E==R.Cell&&B?o.innerHTML=me:o.textContent=me||""),oe&&oe.collapseTo){var Re=oe._rng;if(Re&&(E==R.ColumnHeader&&Re.columnSpan>1||E==R.RowHeader&&Re.rowSpan>1)){var Te=oe.isCollapsed;o.innerHTML='<div role="button" class="'+e._WJC_COLLAPSE+'" aria-hidden="true">'+Wt(Te?"plus":"minus")+"</div>&nbsp;"+o.innerHTML,(0,s.setAttribute)(o,"aria-expanded",!Te),Te&&(0,s.addClass)(o,s.ControlStateClsNames.collapsed)}}}else{var Pe=o.firstChild;if(!m||M){if(!h._isNativeCheckbox(Pe)){var Me=Bt();o.innerHTML='<label><input type="checkbox" class="'+e._WJC_CHECKBOX+'" tabindex="-1" aria-label='+(ge?Me.checked:Me.unchecked)+"><span>&#8203</span></label>",Pe=o.querySelector("input")}(0,s.setAttribute)(o,"aria-selected",!0===ge?"true":"false"),(0,s.setChecked)(Pe,ge),Pe.disabled=!h.canEditCell(i,n),Pe.disabled&&(Pe.style.cursor="default")}else m&&(o.innerHTML="");h.editRange&&h.editRange.contains(i,n)&&(h._edtHdl._edt=Pe)}else{o.innerHTML=(0,s.escapeHtml)(me);var Ae=V.currentSort;if(Ae&&h.showSort){S+="+"==Ae?" "+Ne.sortAsc:" "+Ne.sortDesc;var He=function(e){var t,i,n=Bt(),o=e.grid.collectionView;if(o&&o.sortDescriptions.length>1){var r=e.currentSortIndex;r>-1&&(i=n.sortIndex+" "+(r+1),t='<span class="'+Ne.sortIndex+'" aria-hidden= "true">'+(r+1)+"</span>")}var s=Wt("+"==e.currentSort?"up":"down",i,!0);return t&&(s+=t),s}(V);o.innerHTML+="&nbsp;"+He}h.allowPinning&&(0,s.contains)(h.hostElement,o)&&Kt(o,h.columns.isFrozen(n),f.header)}var ze=r;if(ze||!h||oe?oe&&(ze=oe._rng):ze=h.getMergedRange(t,i,n),o.removeAttribute("aria-rowspan"),o.removeAttribute("aria-colspan"),o.removeAttribute("aria-rowindex"),ze&&!ze.isSingleCell){var ke=oe&&oe.isCollapsed,Oe=le&&oe&&!oe.isCollapsed,Le=le&&!oe;if(ke)E===Ge.ColumnHeader&&ze.rowSpan>1?(0,s.setAttribute)(o,"aria-rowspan",ze.rowSpan):E===Ge.RowHeader&&ze.columnSpan>1&&(0,s.setAttribute)(o,"aria-colspan",ze.columnSpan);else if((Oe||Le||!le)&&(ze.columnSpan>1&&(0,s.setAttribute)(o,"aria-colspan",ze.columnSpan),ze.rowSpan>1)){(0,s.setAttribute)(o,"aria-rowspan",ze.rowSpan);var Fe=(0,s.closest)(o,"."+Ne.row);if(Fe){var Be=Fe.getAttribute("aria-rowindex");Be&&""!==Be&&(0,s.setAttribute)(o,"aria-rowindex",Be)}}}if((k==je.DropDownList||k==je.Menu)&&h.showDropDown&&h.canEditCell(i,n)&&et()){var Ve=Nt();o.insertBefore(Ve,o.firstChild),jt(h,i,n)&&(S+=" "+Ne.hasDropDown)}}if(E==R.RowHeader||E==R.ColumnHeader){var Ke=E==R.RowHeader?!m&&!y&&p.allowDragging&&0!=(h.allowDragging&Zt.Rows):(oe||f).allowDragging&&0!=(h.allowDragging&Zt.Columns);(0,s.setAttribute)(o,"draggable",Ke?"true":null)}y&&(0,s.setAttribute)(o,"aria-label",Bt().newRowCell),E!==R.ColumnHeader&&E!=R.RowHeader||ei(o,f,t,h,me,E===R.RowHeader),R.TopLeft===E&&(0,s.setAttribute)(o,"role",Ut(me)?"gridcell":"rowheader"),S+=I,o.className!=S&&(o.className=S),D.zIndex=0===X?"":X;var We=o.style;for(var Ue in D)We[Ue]!==D[Ue]&&(We[Ue]=D[Ue]);if(h._edtHdl._edt&&h._edtHdl._edt.parentElement==o){var Je=h._root,Xe=Je.getBoundingClientRect(),$e=o.getBoundingClientRect(),Qe=Xe.top+Je.clientHeight-$e.top,it=Xe.left+Je.clientWidth-$e.left;if(d._frozenInternal<0){var nt=document.querySelector('[wj-part="rh"]').getBoundingClientRect(),ot=t._getFrozenPos();nt.left+nt.width>$e.left&&$e.width>ot.x&&U&&(it=ot.x,o.style.left=o.offsetLeft+it-ot.x+"px")}if(u._frozenInternal<0){var rt=document.querySelector('[wj-part="ch"]').getBoundingClientRect();ot=t._getFrozenPos(),rt.top+rt.height>$e.top&&$e.height>ot.y&&q&&(Qe=ot.y,o.style.top=o.offsetTop+Qe-ot.y+"px")}$e.height>Qe&&(o.style.height=Qe+"px"),$e.width>it&&(o.style.width=it+"px")}!1===l&&V&&(ge=t.getCellData(i,n,!1));var st=null==ge||""===ge,lt=E===R.RowHeader;if(E==R.Cell||lt){var at=h._getShowErrors(),ht=null!=h._edtHdl._edt,ct=h._edtHdl.editRange&&h._edtHdl.editRange.containsRow(i);if(at&&(!ht||!st&&!lt||ht&&!ct)){var ut,dt=u[i].dataItem;ut=V.binding&&dt&&V.getIsRequired(p)&&jt(h,i,n)&&st?h._edtHdl._getRequiredMsg():h._getError(t,i,n,!1),h._edtHdl._setCellError(o,ut)}}if(h.itemFormatter&&h.itemFormatter(t,i,n,o),h.formatItem.hasHandlers){var ft=e._fmtItemArgs;ft?(ft._p=t,ft._rng.setRange(i,n,_,g),ft._cell=o):ft=e._fmtItemArgs=new Ze(t,new qe(i,n,_,g),o),ft._updateContent=!1!==l,h.onFormatItem(ft)}var _t=m&&m.level>0,gt=O?V&&V._tpl:null;if(ee&&!te&&_t&&!1!==l&&V&&(!gt||!M)){be=Gt(m,o);var bt,vt=o.firstChild;(bt=document.createElement("span")).classList.add(Ne.elemCollapseSpace),o.insertBefore(be,vt),o.insertBefore(bt,vt)}},e.prototype.disposeCell=function(e){},e.prototype.getEditorValue=function(e){var t=e._edtHdl._edt;if(t instanceof HTMLInputElement)switch(t.type){case"checkbox":return t.checked;case"radio":return t.value}if(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement){var i=t[Lt],n=i?i._applyMask():t.value,o=t.maxLength;if((0,s.isNumber)(o)&&o>-1&&n.length>o){var r=s.culture.Globalize.numberFormat["%"]||"%",l=n.length&&n[n.length-1]==r;n=n.substr(0,o),l&&n.indexOf(r)<0&&(n+=r)}return n}return null},e.dispose=function(){e._ddBtn&&(e._ddBtn=null),e._tplCtx={row:null,col:null,value:null,text:null,item:null},e._fmtItemArgs=null},e._WJC_RADIOMAP=Ne.radioMap,e._WJC_CHECKBOX=Ne.cellCheck,e._WJC_COLLAPSE=Ne.elemCollapse,e._WJC_DROPDOWN=Ne.elemDropDown,e._WJC_PIN=Ne.elemPin,e._tplDdBtn=qt(e._WJC_DROPDOWN,"down"),e._tplCtx={row:null,col:null,value:null,text:null,item:null},e}();function Bt(){return s.culture.FlexGrid.ariaLabels}function Vt(e,t,i,n,o,r){var l=Ft._tplCtx;l.value=i,l.text=n,l.item=o.dataItem,l.row=o,l.col=r;var a=(0,s.isString)(e)?(0,s.evalTemplate)(e,l):e(l,t);null!=a&&(t.innerHTML=a)}function jt(e,t,i){return e.editRange&&e.editRange.contains(t,i)}function Nt(){var e=Ft._ddBtn;return e||(e=Ft._ddBtn=(0,s.createElement)(Ft._tplDdBtn),(0,s.setAriaLabel)(e,Bt().toggleDropDown),(0,s.setAttribute)(e,"aria-expanded",!1)),e.cloneNode(!0)}function Kt(e,t,i){var n=t?Bt().pined:Bt().pinning,o=qt(Ft._WJC_PIN,"pin",n),r=(0,s.createElement)(o);(0,s.toggleClass)(r,s.ControlStateClsNames.pinned,t),(0,s.setAttribute)(r,"aria-pressed",t),e.insertBefore(r,e.firstChild)}function Gt(e,t){var i=Ft._WJC_COLLAPSE,n=(e.isCollapsed?"":"down-")+(e.grid.rightToLeft?"left":"right"),o=(0,s.createElement)('<button class="'+s.InputFormElementsClsNames.btn+" "+s.GlyphClsNames.btnGlyph+" "+i+'" type="button" tabindex="-1">'+Wt(n)+"</button>");return(0,s.setAriaLabel)(o,Bt().toggleGroup),(0,s.setAttribute)(o,"aria-expanded",!e.isCollapsed),(0,s.setAttribute)(t,"aria-expanded",!e.isCollapsed),e.hasChildren||(o.style.visibility="hidden",(0,s.setAttribute)(o,"aria-hidden",!0),t.removeAttribute("aria-expanded")),o}function Wt(e,t,i){return void 0===i&&(i=!1),'<span class="'+s.GlyphClsNames.glyph+"-"+e+'"'+(t?' aria-label="'+t+'"':"")+(t&&i?' role="button"':"")+"></span>"}function qt(e,t,i){return'<button class="'+s.InputFormElementsClsNames.btn+" "+s.GlyphClsNames.btnGlyph+" "+s.UtilitesClsNames.right+" "+e+'" '+(void 0!==i?'aria-label = "'+i+'"':"")+' type="button" tabindex="-1">'+Wt(t)+"</button>"}function Ut(e){return null==e||0===e.length}var Yt,Jt=function(){function e(e,t){this._col=(0,s.asType)(e,vt),this._ctl=t,this._tbx=t.hostElement.querySelector("input"),(0,s.assert)(this._col instanceof vt,"Invalid Column"),(0,s.assert)(this._ctl instanceof s.Control,"Invalid edit control"),(0,s.assert)(this._tbx instanceof HTMLInputElement,"Input element not found in editor");var i=this._ctl;this._prop=(0,s.isUndefined)(i.value)?(0,s.isUndefined)(i.checkedItems)?(0,s.isUndefined)(i.text)?null:"text":"checkedItems":"value",(0,s.assert)(null!=this._prop,"value, text properties not found in editor");var n=et();n&&(this._isDropDown=i instanceof n.DropDown,this._isComboBox=i instanceof n.ComboBox,this._isAutoComplete=i instanceof n.AutoComplete,this._isInputDateTime=i instanceof n.InputDateTime,this._isInputNumber=i instanceof n.InputNumber,this._isInputMask=i instanceof n.InputMask),this._updateFocusBnd=this._updateFocus.bind(this),this._keydownBnd=this._keydown.bind(this),this._cmpstartBnd=this._cmpstart.bind(this),this._mousedownBnd=this._mousedown.bind(this),this._connect(),this._col.gridChanged.addHandler(this._connect,this),this._hideEditor(),this._updateFocus()}return Object.defineProperty(e.prototype,"grid",{get:function(){return this._g},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"column",{get:function(){return this._col},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"control",{get:function(){return this._ctl},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._disconnect(),this._isDropDown&&(this._isDropDown=!1),this._g=this._col=this._ctl=this._tbx=null},e.prototype._connect=function(){var e=this._col?this._col.grid:null;if(e!=this._g&&(this._disconnect(),e)){var t=e.hostElement,i=e.addEventListener.bind(e),n=this._updateFocusBnd;this._g=e,this._ensureEditorsContainer(e),this._hideEditor(),this._updateFocus(),i(t,"keydown",this._keydownBnd,!0),i(t,"mousedown",this._mousedownBnd,!0),i(t,"mouseup",n,!0),i(t,"blur",n,!0),i(t,"focus",n),i(this._tbx,"compositionstart",this._cmpstartBnd),e.gotFocus.addHandler(n,this),e.selectionChanged.addHandler(n,this),e.prepareCellForEdit.addHandler(this._prepareCellForEdit,this),e.cellEditEnding.addHandler(this._cellEditEnding,this),e.cellEditEnded.addHandler(this._cellEditEnded,this)}},e.prototype._disconnect=function(){var e=this._g;if(e){var t=e.hostElement,i=e.removeEventListener.bind(e),n=this._updateFocusBnd;i(t,"keydown",this._keydownBnd),i(t,"mousedown",this._mousedownBnd),i(t,"mouseup",n),i(t,"blur",n),i(t,"focus",n),i(this._tbx,"compositionstart",this._cmpstartBnd),e.gotFocus.removeHandler(n,this),e.selectionChanged.removeHandler(n,this),e.prepareCellForEdit.removeHandler(this._prepareCellForEdit,this),e.cellEditEnding.removeHandler(this._cellEditEnding,this),e.cellEditEnded.removeHandler(this._cellEditEnded,this),this._g=null}},e.prototype._prepareCellForEdit=function(e,t){if(!t.cancel&&t.getColumn(!0)==this._col){var i=this.grid,n=this._ctl,o=this._tbx,r=this._prop,l=t.range,a=t.data,h=a&&void 0!==a.type?a.type:"",c=i.getCellData(l.row,l.col,"text"==r||this._isInputMask),u=!1,d="rtl"==getComputedStyle(n.hostElement).direction;if(n._rtlDir=d,(0,s.toggleClass)(n.hostElement,s.UtilitesClsNames.rtl,d),this._isComboBox&&(""!=c&&(n._emptyValueAction=!1),i._imeHdl&&i._imeHdl._handlingCompositionStart&&(n._composing=!0),this._isInputDateTime&&n._setDropdown(n._ddDate)),this._isAutoComplete&&n.reset(),this._isInputMask&&(n._fullEdit=!0),"checkedItems"==r&&(n.showFilterInput&&(n.showFilterInput=!1,n.showFilterInput=!0),null!=c&&0!=c.length||(n[r]=[],n.selectedIndex=0)),null!=c||!n.isRequired){if("checkedItems"==r){var p=[];if(n.selectedValuePath)for(var f=function(e){var t=n.collectionView.items.findIndex((function(t){return null!=c[e][n.selectedValuePath]&&t[n.selectedValuePath]===c[e][n.selectedValuePath]}));t>=0&&(n._lbx.toggleItemChecked(t),p.push(n.collectionView.items[t]))},_=0;_<c.length;_++)f(_);else(0,s.isArray)(c)?p=c:c.length>0&&c.split(",").forEach((function(e){return p.push(e.trim())}));n[r]=p}else n[r]=c;if(this._isAutoComplete&&(clearTimeout(n._toSearch),(m=n.collectionView)&&(m.filter||n._rxHighlight)&&(n._rxHighlight=null,m.filter=null),c)){var g=n._findNext(c,1,-1);n.selectedIndex!=g&&(n.selectedIndex=g),!n.containsFocus()&&n._focus&&n.onGotFocus()}}switch(h){case"keydown":case"mousedown":var m;if((0,s.isUndefined)(a.keyCode)||a.keyCode==s.Key.F4||a.altKey)if(u=this._isDropDown,this._isAutoComplete&&(null==c||(0,s.isString)(c)))(m=n.collectionView)&&((m.filter||n._rxHighlight)&&(n._rxHighlight=null,m.filter=null),g=c?n._findNext(c,1,-1):-1,n.selectedIndex!=g&&(n.selectedIndex=g))}if(i.showPlaceholders&&!n.placeholder&&(o.placeholder=this._col.header),this.showEditor(),i._edtHdl._fullEdit=!0,0==h.indexOf("key")&&32==a.keyCode&&((0,s.setSelectionRange)(o,o.value.length),a.preventDefault()),(0,s.isIE)()&&!i.imeEnabled)if("keypress"==h&&a.key)setTimeout((function(){o.value=a.key,(0,s.setSelectionRange)(o,1);var e=document.createEvent("HTMLEvents");e.initEvent("input",!0,!1),o.dispatchEvent(e)})),a.preventDefault();else if("compositionstart"==h){var b=o.value.length;(0,s.setSelectionRange)(o,b)}this._isDropDown&&(n.isDroppedDown=u)}},e.prototype._cellEditEnding=function(e,t){if(!t.cancel&&t.getColumn(!0)==this._col){var i=this.grid,n=this._ctl,o=this._prop;if(this._isAutoComplete){var r=n.selectedIndex;if((0,s.isNumber)(r)&&r<0){var l=n.collectionView;l&&1==l.items.length?n.selectedIndex=0:this._col.isRequired&&(t.cancel=!0)}}if(!t.cancel&&o){var a=!1;if(this._isInputMask){var h=n;null!=h&&(i._edtHdl._setCustomEditorValue(h._msk._applyMask()),a=!0)}a||i._edtHdl._setCustomEditorValue(n[o])}}},e.prototype._cellEditEnded=function(e,t){this._hideEditor(),this._updateFocus()},e.prototype._cmpstart=function(e){var t=this;this.grid.imeEnabled&&((0,s.isIE)()?setTimeout((function(){t._activateEditor(e)})):this._activateEditor(e))},e.prototype._keydown=function(e){if(!e.defaultPrevented&&this._checkColumn(e.target))if(this.grid.activeEditor){if(e.keyCode==s.Key.Enter&&this._isDropDown){var t=this._ctl;t.isDroppedDown&&(t.isDroppedDown=!1,e.preventDefault(),e.stopImmediatePropagation())}}else if(this._isDropDown){var i=e.keyCode;switch(i){case s.Key.F4:case s.Key.Up:case s.Key.Down:(i==s.Key.F4||e.altKey)&&(this._activateEditor(e),e.preventDefault())}}},e.prototype._checkColumn=function(e){var t=this._g;if(!t.imeEnabled&&!t.isReadOnly||null!=e&&this._imeEditor()===e){var i=t._selHdl.selection;return t._getBindingColumn(t.cells,i.row,t.columns[i.col])==this._col&&!this._col.isReadOnly&&!t.rows[i.row].isReadOnly}return!1},e.prototype._mousedown=function(e){if(!e.defaultPrevented&&0==e.button&&!e.shiftKey&&!e.ctrlKey&&!e.metaKey&&this._isDropDown&&(0,s.closestClass)(e.target,Ft._WJC_DROPDOWN)){var t=this.grid,i=t.hitTest(e);t._edtHdl&&!t._edtHdl.validate||i._clickChildGrid||i.getColumn(!0)!=this._col||(t._ensureEditSelectionForParentGrid(),t.select(i.range),t.refresh(),this._activateEditor(e),e.preventDefault())}},e.prototype._activateEditor=function(e){var t=this.grid;if(!t.activeEditor){var i=t._selHdl.selection;if(i.isValid)return t.startEditing(!0,i.row,i.col,!0,e)}return!1},e.prototype.showEditor=function(){this.isOpen=!0;var t=this.grid,i=t.activeEditor,n=(0,s.closest)(i,"."+Ne.cell);if(n){var o=this._tbx,r=this._ctl.hostElement;(0,s.setCss)(r,e._cssVisible),(0,s.toggleClass)(o,Ne.gridIme,!1),n.innerHTML="",n.appendChild(r),t._edtHdl._edt=o,this._imeEditor()?this._initImeEditInput():(o.select(),o.focus(),i.value="")}},e.prototype._hideEditor=function(){this.isOpen=!1;var t=this.grid,i=this._ctl.hostElement,n=this._tbx;this._isDropDown&&(this._ctl.isDroppedDown=!1),n.setCustomValidity("");var o=n.value;n.value=o+" ",n.value=o,(0,s.setCss)(i,e._cssHidden),(0,s.toggleClass)(n,Ne.gridIme,!0),t&&i.parentElement!=t._eEditorsContainer&&(this._ensureEditorsContainer(t),t._eEditorsContainer.appendChild(i)),this._ctl._composing&&(this._ctl._composing=!1)},e.prototype._resetTabIndex=function(){this._tbx.tabIndex=-1},e.prototype._updateFocus=function(){var e=this.grid;if(e&&!e.activeEditor){var t=e.hostElement,i="."+Ne.hostElement,n=this._tbx,o=(0,s.getActiveElement)(),r=e._getTabIndex();if((0,s.closest)(o,i)==t)if((0,s.closest)(n,i)!=t)this._hideEditor();else if(e.imeEnabled)n.tabIndex>-1&&(n.tabIndex=-1);else{var l=e._selHdl.selection,a=e._getBindingColumn(e.cells,l.row,e.columns[l.col]);a&&a==this._col&&e.canEditCell(l.row,l.col)?o!==n&&(e.activeCell&&(e.activeCell.tabIndex=-1),n.tabIndex=r,n.readOnly||e.isTouching||(n.select(),n.focus())):n.tabIndex>-1&&(n.tabIndex=-1,o==n&&e.focus(!0))}}},e.prototype._initImeEditInput=function(){var t=this,i=this._imeEditor();if(i){var n=this._tbx,o=n&&n.style.color,r=this._ctl,l=function(){if(i.removeEventListener("compositionend",l),(0,s.setCss)(i,Tt._cssHidden),n){n.style.color=o;var a=function(){r.gotFocus.removeHandler(a),t._g._edtHdl._edt=n;var o=i.value;if(o){n.value=o,t._isInputMask?setTimeout((function(){e._setSelectionRange(n,o.length,o.length)}),0):e._setSelectionRange(n,o.length,o.length);var s=document.createEvent("HTMLEvents");s.initEvent("input",!0,!1),n.dispatchEvent(s)}};r.gotFocus.addHandler(a),n.focus()}};i.addEventListener("compositionend",l),n&&(n.style.color="transparent")}},e._setSelectionRange=function(e,t,i){if(void 0===i&&(i=t),(0,s.contains)(document.body,e)&&!e.disabled&&"none"!=e.style.display)try{e.setSelectionRange((0,s.asNumber)(t),(0,s.asNumber)(i),(0,s.isIE)()?null:"backward"),e.focus()}catch(e){}},e.prototype._imeEditor=function(){var e=this.grid;if(e&&e.imeEnabled){var t=(0,s.getActiveElement)();if(t&&(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement)&&(0,s.hasClass)(t,Ne.gridIme))return t}return null},e.prototype._ensureEditorsContainer=function(e){if(e&&!e._eEditorsContainer){e._eEditorsContainer=(0,s.createElement)('<div class="'+Ke.editorsContainer+'"></div>');var t=e._gridRoleElement();t&&"container"===t.parentElement.getAttribute("wj-part")?t.parentElement.appendChild(e._eEditorsContainer):e.hostElement.appendChild(e._eEditorsContainer)}},e._cssHidden={position:"fixed",left:-32e3,top:-32e3,width:"0px",height:"0px",overflow:"hidden",border:"none",display:"block"},e._cssVisible={position:"absolute",left:0,top:0,width:"100%",height:"100%",display:"inline-table"},e}();!function(e){e[e.None=0]="None",e[e.MoveDown=1]="MoveDown",e[e.MoveAcross=2]="MoveAcross",e[e.Cycle=3]="Cycle",e[e.CycleOut=4]="CycleOut",e[e.CycleEditable=5]="CycleEditable"}(Yt||(Yt={}));var Xt,$t,Zt,Qt=function(){function e(e){this._kaTab=Yt.None,this._kaEnter=Yt.MoveDown,this._isHeadersHandled=!1,this._g=e;var t=e.hostElement;e.addEventListener(t,"keypress",this._keypress.bind(this)),e.addEventListener(t,"keydown",this._keydownHeaders.bind(this)),e.addEventListener(t,"keydown",this._keydown.bind(this))}return e.prototype._keydownMetaHeaders=function(e){if(!e.defaultPrevented){var t=this._g,i=t._getKeyCode(e),n=e.ctrlKey||e.metaKey,o=(e.altKey,e.shiftKey),r=!1;switch(i){case s.Key.Left:case s.Key.Right:case s.Key.Up:case s.Key.Down:case s.Key.Enter:case s.Key.Delete:case s.Key.Back:case s.Key.F2:case s.Key.Home:case s.Key.End:r=!0;break;case s.Key.Space:(t.activePanelType===Ge.ColumnHeader&&!n||t.activePanelType===Ge.RowHeader&&!o||t.activePanelType===Ge.TopLeft)&&(r=!0)}r&&(e.preventDefault(),this._isHeadersHandled=!0)}},e.prototype._keydownHeaders=function(e){if(!e.defaultPrevented&&this._g.activePanelType!=Ge.Cell){var t=this._g,i=t.selection,n=e.ctrlKey||e.metaKey,o=e.shiftKey,r=e.altKey,l=e.target,a=(e.char||e.key,!1),h=t.activePanel,c=t.activePanelType,u=t._getKeyCode(e),d=this._getCustomEditor(t,i.row,i.col);if("INPUT"===l.tagName&&!d){var p=l.type;if("radio"!==p&&"checkbox"!==p)return}if(n||r||o)return this._keydownMetaHeaders(e);if(!a)switch(u){case s.Key.Left:if(t.headersFocusability===_t.All&&t.headersVisibility===pt.All)if(c===Ge.ColumnHeader){var f=h.getNextVisibleColumn();(t.getMergedRange(h,i.row,i.col)||new qe(i.row,i.col)).leftCol<=f&&(g=t._gpTL.getLastVisibleColumn())>=0&&(t.select(new qe(i.row,g),!0,t._gpTL),a=!0)}else c===Ge.ColumnFooter&&(f=h.getNextVisibleColumn(),(t.getMergedRange(h,i.row,i.col)||new qe(i.row,i.col)).leftCol<=f&&(g=t._gpBL.getLastVisibleColumn())>=0&&(t.select(new qe(i.row,g),!0,t._gpBL),a=!0));a||(t._selHdl.moveSelectionWithinSelectedPanel(0,-1),a=!0);break;case s.Key.Right:if(c===Ge.RowHeader){var _=h.getLastVisibleColumn();(t.getMergedRange(h,i.row,i.col)||new qe(i.row,i.col)).rightCol>=_&&(g=t._gpCells.getNextVisibleColumn())>=0&&(t.select(i.row,g),a=!0)}else if(c===Ge.TopLeft&&t.headersVisibility&pt.Column)_=h.getLastVisibleColumn(),(t.getMergedRange(h,i.row,i.col)||new qe(i.row,i.col)).rightCol>=_&&(g=t._gpCHdr.getNextVisibleColumn())>=0&&(t.select(i.row,g,t._gpCHdr),a=!0);else if(c===Ge.BottomLeft&&t.headersVisibility===pt.All){var g;if(_=h.getLastVisibleColumn(),(t.getMergedRange(h,i.row,i.col)||new qe(i.row,i.col)).rightCol>=_)(g=t._gpCFtr.getNextVisibleColumn())>=0&&(t.select(i.row,g,t._gpCFtr),a=!0)}a||(t._selHdl.moveSelectionWithinSelectedPanel(0,1),a=!0);break;case s.Key.Down:if(c===Ge.ColumnHeader){var m=h.getLastVisibleRow();(t.getMergedRange(h,i.row,i.col)||new qe(i.row,i.col)).bottomRow>=m&&(b=t._gpCells.getNextVisibleRow())>=0&&(t.select(b,i.col),a=!0)}else c===Ge.TopLeft&&t.headersVisibility&pt.Row?(m=h.getLastVisibleRow(),(t.getMergedRange(h,i.row,i.col)||new qe(i.row,i.col)).bottomRow>=m&&(b=t._gpRHdr.getNextVisibleRow())>=0&&(t.select(b,i.col,t._gpRHdr),a=!0)):c===Ge.RowHeader&&t.headersVisibility&pt.Row&&(m=h.getLastVisibleRow(),(t.getMergedRange(h,i.row,i.col)||new qe(i.row,i.col)).bottomRow>=m&&(b=t._gpBL.getNextVisibleRow())>=0&&(t.select(b,i.col,t._gpBL),a=!0));a||(t._selHdl.moveSelectionWithinSelectedPanel(1,0),a=!0);break;case s.Key.Up:if(t.headersFocusability===_t.All&&t.headersVisibility===pt.All)if(c===Ge.BottomLeft)m=h.getNextVisibleRow(),(t.getMergedRange(h,i.row,i.col)||new qe(i.row,i.col)).bottomRow<=m&&(b=t._gpRHdr.getLastVisibleRow())>=0&&(t.select(new qe(b,i.col),!0,t._gpRHdr),a=!0);else if(c===Ge.ColumnFooter)m=h.getNextVisibleRow(),(t.getMergedRange(h,i.row,i.col)||new qe(i.row,i.col)).bottomRow<=m&&(b=t._gpCells.getLastVisibleRow())>=0&&(t.select(new qe(b,i.col),!0),a=!0);else if(c===Ge.RowHeader){var b,v=h.getNextVisibleRow();if((t.getMergedRange(h,i.row,i.col)||new qe(i.row,i.col)).topRow<=v)(b=t._gpTL.getLastVisibleRow())>=0&&(t.select(new qe(b,i.col),!0,t._gpTL),a=!0)}a||(t._selHdl.moveSelectionWithinSelectedPanel(-1,0),a=!0);break;case s.Key.Tab:if(!(a=this._performKeyAction(t.keyActionTab,o))&&!t.activeCell)if(t.focus(!0),t.imeEnabled){var y=t._imeHdl;y&&y._resetTabIndex()}else d&&d._resetTabIndex();break;case s.Key.Enter:case s.Key.Space:var w=h.getCellElement(i.row,i.col);if(w){var C=w.querySelector("button");if(C)C.click(),a=!0;else{var x=w.querySelector('[role="button"]');if(x)x.click(),a=!0;else if(h.cellType===Ge.TopLeft){var E=Ue;t.selectionMode!==E.None&&t.selectionMode!==E.Cell&&(t.selectAll(),a=!0)}else{var S=w.querySelector("input");S&&!S.classList.contains("wj-column-selector")?(S.click(),a=!0):S||c!=Ge.ColumnHeader||(w.click(),a=!0)}}}a=!0;break;default:a=!0}a&&(e.preventDefault(),this._isHeadersHandled=!0)}},e.prototype._keydown=function(e){if(this._isHeadersHandled)this._isHeadersHandled=!1;else{var t=this._g,i=t._edtHdl,n=t.selection,o=e.ctrlKey||e.metaKey,r=e.shiftKey,l=e.altKey,a=e.target,h=e.char||e.key,c=!0;if(!o&&!l&&h&&1==h.length&&(0,s.closest)(a,"."+Ne.cell)&&a.firstElementChild&&(" "!=h||!r)){var u=a.querySelectorAll("."+Ft._WJC_RADIOMAP+" label input");if(u&&u.length){for(var d=-1,p=0;p<u.length;p++)if(u[p].checked){d=p;break}for(h=h.toLowerCase(),p=0;p<u.length;p++){var f=u[(d+p+1)%u.length];if(" "==h||f.value.toLowerCase()[0]==h){f.click();break}}return void e.preventDefault()}}if(!t._wantsInput(a)){var _=(0,s.tryCast)(t.rows[n.row],wt),g=t.editableCollectionView,m=t._getKeyCode(e),b=Je,v=Ue,y=e.defaultPrevented&&!(a instanceof HTMLInputElement),w=m===s.Key.Up||m===s.Key.Down||m===s.Key.Left||m===s.Key.Right||m===s.Key.PageDown||m===s.Key.PageUp||m===s.Key.Home||m===s.Key.End;if(((t.isRangeValid(n)||w)&&!y||o&&65==m)&&(!t.activeEditor||!i._keydown(e)||t._isNativeCheckbox(t.activeEditor))){if(t.autoClipboard){if(o&&(67==m||45==m)){var C=new $e(t.cells,n);if(t.onCopying(C)){var x=pt,E=0!=(t.copyHeaders&x.Column),S=0!=(t.copyHeaders&x.Row),I=t.getClipString(null,!1,E,S);(0,s._isMacOS)()||(I+="\r\n"),t._eFocus.focus(),s.Clipboard.copy(I),t.onCopied(C)}return void e.stopPropagation()}if(o&&86==m||r&&45==m)return t.isReadOnly||s.Clipboard.paste((function(e){t.setClipString(e)})),void e.stopPropagation()}switch((r||o)&&"Space"==e.code&&(m=s.Key.Space),m){case s.Key.Space:if(r&&n.isValid)switch(t.selectionMode){case v.CellRange:case v.MultiRange:case v.Row:case v.RowRange:case v.ListBox:t.select(new qe(n.row,0,n.row,t.columns.length-1),!1);var D=n.row-t.rowHeaders.viewRange.row;if(t.headersVisibility!==pt.Column){var R=null;t.rowHeaders.hostElement&&t.rowHeaders.hostElement.children[D]&&(R=t.rowHeaders.hostElement.children[D].querySelector("."+s.ForeignClsNames.SelectorClsNames.columnSelector)),R&&!t.rows[n.row].isSelected&&R.click()}}else if(o&&n.isValid)switch(t.selectionMode){case v.CellRange:case v.MultiRange:t.select(new qe(0,n.col,t.rows.length-1,n.col),!1)}else{if(c=this._startEditing(!0,e))setTimeout((function(){var e=t.activeEditor;e&&(e.disabled||e.readOnly&&!(0,s.closest)(e,"."+s.ControlClsNames.hostElement)?t.finishEditing():"checkbox"==e.type&&((0,s.setChecked)(e,e.indeterminate||!e.checked),t.finishEditing()))}));else if(t.rows.maxGroupLevel>-1&&this._isGroupCell()){var T=t.rows[n.row];this._toggleGroupCollapse(!T.isCollapsed,!0)}c=!0}break;case 65:if(o)switch(t.selectionMode){case v.None:case v.Cell:break;default:t.selectAll()}else c=!1;break;case s.Key.Left:if(o||l)c=!1;else{if(this._isGroupCell()&&!_.isCollapsed)this._toggleGroupCollapse(!0);else if(n.isValid&&n.isSingleCell&&t.headersFocusability&_t.Row&&t.headersVisibility&pt.Row&&t.activePanel.getNextVisibleColumn()>=(t.getMergedRange(t.activePanel,n.row,n.col)||new qe(n.row,n.col)).leftCol)return t.select(n.row,t._gpRHdr.columns.length-1,t._gpRHdr),void e.preventDefault();if(!o){if(t.selectionMode==v.None)return;this._moveSelWithValid(b.None,o?b.Home:b.Prev,r)}}break;case s.Key.Right:if(o||e.altKey)c=!1;else if(this._isGroupCell()&&_.isCollapsed)this._toggleGroupCollapse(!1);else{if(t.selectionMode==v.None)return;this._moveSelWithValid(b.None,o?b.End:b.Next,r)}break;case s.Key.Up:if(o)c=!1;else if(n.isValid&&n.isSingleCell&&t.headersFocusability&_t.Column&&t.headersVisibility&pt.Column){var P=t.activePanel.getNextVisibleRow();if((t.getMergedRange(t.activePanel,n.row,n.col)||new qe(n.row,n.col)).topRow<=P){var M=t._gpCHdr.getLastVisibleRow();if(M>=0)return t.select(M,n.col,t._gpCHdr),void e.preventDefault()}}if(!o)if(e.altKey&&i._toggleListBox(e))c=!0;else{if(t.selectionMode==v.None)return;this._moveSelWithValid(b.Prev,b.None,r)}break;case s.Key.Down:if(o)c=!1;else if(n.isValid&&n.isSingleCell&&t.headersFocusability&_t.Column&&t.headersVisibility&pt.Column){var A=t.activePanel.getLastVisibleRow();if((t.getMergedRange(t.activePanel,n.row,n.col)||new qe(n.row,n.col)).topRow>=A&&t._gpCFtr.getNextVisibleRow()>=0)return t.select(0,n.col,t._gpCFtr),void e.preventDefault()}if(!o)if(e.altKey&&i._toggleListBox(e))c=!0;else{if(t.selectionMode==v.None)return;this._moveSelWithValid(b.Next,b.None,r)}break;case s.Key.PageUp:if(this._moveSelWithValid(e.altKey?b.Home:b.PrevPage,b.None,r),t.rows._frozenInternal&&t.rows.isFrozen(t.selection.row)){var H=t.scrollPosition;H.y&&(t.scrollPosition=new s.Point(H.x,0))}break;case s.Key.PageDown:this._moveSelWithValid(e.altKey?b.End:b.NextPage,b.None,r);break;case s.Key.Home:this._moveSelWithValid(o?b.Home:b.None,b.Home,r);break;case s.Key.End:this._moveSelWithValid(o?b.End:b.None,b.End,r);break;case s.Key.Tab:if(!(c=this._performKeyAction(t.keyActionTab,r))&&!t.activeCell)if(t.focus(!0),t.imeEnabled){var z=t._imeHdl;z&&z._resetTabIndex()}else{var k=this._getCustomEditor(t,n.row,n.col);k&&k._resetTabIndex()}break;case s.Key.Enter:var O=t.rows[n.row];!r&&g&&null!=g.currentEditItem&&i._commitRowEdits(),O instanceof kt||(c=this._performKeyAction(t.keyActionEnter,r)),this._getCustomEditor(t,n.row,n.col)||t.focus(!0);break;case s.Key.Escape:if(c=!1,g&&(g.currentAddItem||g.currentEditItem)){var L=new $e(t.cells,t.selection);L.cancel=!0,t.onRowEditEnding(L),g.currentAddItem&&g.cancelNew(),g.currentEditItem&&g.cancelEdit(),t.onRowEditEnded(L),c=!0}t._mouseHdl.resetMouseState();break;case s.Key.Delete:case s.Key.Back:c=this._deleteSel(e);break;case s.Key.F2:c=this._startEditing(!0,e);break;case s.Key.F4:c=i._toggleListBox(e);break;case s.Key.MinusKey:case s.Key.HyphenMinusKey:c=!1,o&&t.allowDelete&&(c=this._deleteSel(e,!0));break;case s.Key.PlusKey:c=!1,e.ctrlKey&&(c=this._addSel(e));break;case s.Key.EqualPlusKey:c=!1,e.ctrlKey&&e.shiftKey&&(c=this._addSel(e));break;case s.Key.S:c=!1,o&&r&&(this._sortByKeyboard(e),c=!0);break;case s.Key.P:c=!1,o&&r&&(this._pinByKeyboard(e),c=!0);break;case s.Key.F:if(c=!1,o&&l){var F=this._g,B=0!==F.frozenColumns||0!==F.frozenRows,V=s.culture.FlexGrid.accessibilityHelperMessage,j=B?V.frozen.unfrozenColumn:V.frozen.frozenColumn;j=(0,s.format)(j,{col:B?F.frozenColumns:n.col,row:B?F.frozenRows:n.row}),F.announceShortcut(j),F.frozenColumns=B?0:n.col,F.frozenRows=B?0:n.row,c=!0}break;default:c=!1}c&&(t.containsFocus()||t.focus(),e.preventDefault(),e.stopPropagation())}}}},e.prototype._performKeyAction=function(e,t){var i=Yt,n=Je;switch(e){case i.MoveDown:return this._moveSel(t?n.Prev:n.Next,n.None,!1),!0;case i.MoveAcross:return this._moveSel(n.None,t?n.Prev:n.Next,!1),!0;case i.Cycle:return this._moveSel(n.None,t?n.PrevCell:n.NextCell,!1),!0;case i.CycleEditable:return this._moveSel(n.None,t?n.PrevEditableCell:n.NextEditableCell,!1),!0;case i.CycleOut:var o=this._g.selection;return this._moveSel(n.None,t?n.PrevCell:n.NextCell,!1),!o.equals(this._g.selection)}return!1},e.prototype._keypress=function(e){var t=this,i=this._g;if(!i._wantsInput(e.target)&&!e.defaultPrevented){var n=i._edtHdl;if(i.activeEditor)n._keypress(e);else if(e.charCode>s.Key.Space&&"AltLeft"!=e.code&&"AltRight"!=e.code)if(this._startEditing(!1,e)&&i.activeEditor){var o=(0,s.getActiveElement)();if(o instanceof HTMLInputElement&&"checkbox"!=o.type||o instanceof HTMLTextAreaElement){var r=i._selHdl.selection,l=i.getCellData(r.row,r.col,!0),a=i.getCellData(r.row,r.col,!1),h=s.culture.Globalize.numberFormat["%"]||"%",c=String.fromCharCode(e.charCode),u=(0,s.isNumber)(a)&&l.indexOf(h)>-1||""==l&&o.value==h,d=!0,p=function(){o.value=u?c+h:c,(0,s.setSelectionRange)(o,1),o.dispatchEvent(n._evtInput),n._keypress(e),n._edtValue=o.value!=l?o.value:null};if(i.imeEnabled){var f=this._getCustomEditor(i,r.row,r.col),_=f&&f.control;if(_&&!_._focus){var g=function(){_.gotFocus.removeHandler(g),d=!1,p()};_.gotFocus.addHandler(g)}}d&&p(),e.preventDefault()}}else if(i.autoSearch){var m=!1;if(r=i._selHdl.selection,e.charCode>32||32==e.charCode&&this._search){e.preventDefault(),this._search+=String.fromCharCode(e.charCode),this._toSearch&&clearTimeout(this._toSearch),this._toSearch=setTimeout((function(){t._toSearch=null,t._search=""}),s.Control._SEARCH_DELAY);var b=this._findNext(r.row,r.col);b<0&&this._search.length>1&&(this._search=this._search[this._search.length-1],b=this._findNext(r.row,r.col)),b>-1&&(m=!0,i.select(b,r.col))}m||(this._search="")}}},e.prototype._getCustomEditor=function(e,t,i){var n=e._getBindingColumn(e.cells,t,e.columns[i]);return n&&n._edt},e.prototype._findNext=function(e,t){var i=this._g,n=i.rows.length;(e<0||1==this._search.length)&&e++;var o=this._search,r=i.caseSensitiveSearch;r||(o=o.toLowerCase());for(var l=i.columns[t].isContentHtml,a=0;a<n;a++){var h=(e+a)%n,c=i.getCellData(h,t,!0).trim();if(l&&(c=(0,s.toPlainText)(c)),r||(c=c.toLowerCase()),0==c.indexOf(o))return h}return-1},e.prototype._moveSel=function(e,t,i){var n=this._g,o=n.selectionMode,r=n._selHdl;o!=Ue.None&&(o==Ue.MultiRange&&r.extendedSelection.clear(),r.moveSelection(e,t,i))},e.prototype._addSel=function(e){var t=this._g,i=t.editableCollectionView,n=t.selection,o=new qe,r=new Qe(t.cells,o,e);return!(!t._edtHdl._allowEdit()||!t.allowAddNew)&&(t.deferUpdate((function(){if(i&&i.beginUpdate(),t.onRowAdded(r)){var e=s.culture.FlexGrid.accessibilityHelperMessage.insertRow;t.announceShortcut((0,s.format)(e,{index:n.row})),t.rows.insert(n.row,new yt)}i&&i.endUpdate(!1)})),!0)},e.prototype._deleteSel=function(e,t){var i=this,n=this._g,o=n.rows,r=n.editableCollectionView,l=n.selection,a=[],h=new qe,c=new Qe(n.cells,h,e),u=Ue;if(!n._edtHdl._allowEdit())return!1;if(n.allowDelete&&(null==r||r.canRemove&&!r.isAddingNew&&!r.isEditingItem)){if(0==(a=o.filter((function(e){return e.isSelected}))).length)switch(n.selectionMode){case u.CellRange:case u.MultiRange:var d=n._getDeleteColumnIndex();n.selectedRanges.forEach((function(e){if(e.leftCol==d&&e.rightCol==n.columns.length-1||t)for(var i=e.topRow;i>-1&&i<=e.bottomRow;i++){var r=o[i];a.indexOf(r)<0&&a.push(r)}}));break;case u.Row:l.topRow>-1&&a.push(o[l.topRow]);break;case u.RowRange:for(var p=l.topRow;p>-1&&p<=l.bottomRow;p++)a.push(o[p])}a=a.reduce((function(e,t){return e.find((function(e){return e.dataItem===t.dataItem}))||e.push(t),e}),[])}if(a.length>0){var f=0;if(n.deferUpdate((function(){r&&r.beginUpdate();for(var e=a.length-1;e>=0;e--){var t=a[e];if(!(t instanceof kt)&&(h.setRange(t.index,-1),n.onDeletingRow(c),!c.cancel)){r&&t.dataItem?r.remove(t.dataItem):n.rows.removeAt(t.index),f++;var i=s.culture.FlexGrid.accessibilityHelperMessage.deleteRow;n.announceShortcut((0,s.format)(i,{index:l.row})),n.onDeletedRow(c)}}r&&r.endUpdate(!1)})),f>0){var _=l.topRow;for(_=Math.min(_,n.rows.length-1);_>0&&n.rows[_]instanceof kt;)_--;l.row=l.row2=_,n.select(l,!1),n.rows._frozenInternal>0&&n.rows.length<=n.rows._frozenInternal&&(n._ptScrl=new s.Point(n._ptScrl.x,0)),n.childItemsPath&&r&&r.refresh()}return!0}return 0==a.length&&(n.deferUpdate((function(){var t=n.scrollPosition,s=-1;switch(a=o.filter((function(e){return e.isSelected})),n.selectionMode){case u.Row:l.topRow>-1&&a.push(o[l.topRow]);break;case u.RowRange:for(var h=l.topRow;h>-1&&h<=l.bottomRow;h++)a.push(o[h])}var c=n.selectedRanges.length>1||a.length>1||l.isValid&&o[l.row].dataItem!=o[l.row2].dataItem;if(r&&r.beginUpdate(),a.length){var d=new qe(0,0,0,n.columns.length-1);a.forEach((function(t){d.row=d.row2=t.index,i._deleteRange(e,d),s=d.bottomRow}))}else i._deleteRange(e,l),s=l.bottomRow,n.selectionMode==u.MultiRange&&n._selHdl.extendedSelection.forEach((function(t){i._deleteRange(e,t),s=t.bottomRow}));if(n.select(l,!1),n.scrollPosition=t,r){if(c&&r.currentEditItem){r.commitEdit();var p=new $e(n.cells,new qe(s,-1));n.onRowEditEnding(p),n.onRowEditEnded(p)}r.endUpdate(!1)}})),!0)},e.prototype._deleteRange=function(e,t){var i=this._g,n=i.editableCollectionView,o=new qe,r=new Qe(i.cells,o,e),s=new $e(i.cells,new qe(t.topRow,-1));i._imeHdl&&i._imeHdl._suspendIME();for(var l=t.topRow;l<=t.bottomRow;l++){var a=i.rows[l];if(!a.isReadOnly)for(var h=t.leftCol;h<=t.rightCol;h++){var c=i._getBindingColumn(i.cells,l,i.columns[h]);if(!c.getIsRequired(a)&&!c.isReadOnly){var u=i.getCellData(l,h,!1);if(i.getCellData(l,h,!0)&&(o.setRange(l,h),r.cancel=!1,i.onBeginningEdit(r))){var d=a.dataItem,p=n?n.currentEditItem:null;p&&d!=p&&h===t.rightCol&&(i.onRowEditEnding(s),i.onRowEditEnded(s)),d!=p&&h===t.leftCol&&(s._rng.setRange(l,-1),i.onRowEditStarting(s),i.onRowEditStarted(s)),n&&(n.editItem(d),i._edtHdl._edItem=d),i.setCellData(l,h,"",!0,!1),r.previousData=u,i.onCellEditEnding(r),i.onCellEditEnded(r)}}}}i._imeHdl&&i._imeHdl._resumeIME()},e.prototype._startEditing=function(e,t,i,n){return this._g._edtHdl.startEditing(e,i,n,!0,t)},e.prototype._sortByKeyboard=function(e){var t=this._g,i=t.selection;At(t,t.activePanel,i.col,i.row,e)},e.prototype._pinByKeyboard=function(e){var t=this._g,i=t.selection;Pt(t,i.col,i.row,!1)},e.prototype._isGroupCell=function(){var e=this._g,t=e.selection,i=e.getMergedRange(e.cells,t.row,t.col),n=e.activePanel;if(!e.rows[t.row])return!1;var o=e.rows[t.row],r=e.rows[t.topRow].dataItem instanceof s.CollectionViewGroup,l=i&&0===i.leftCol,a=r&&l,h=0===t.leftCol||a;return n.cellType==Ge.Cell&&t.isValid&&h&&o&&o.hasChildren},e.prototype._toggleGroupCollapse=function(e,t){var i=this._g,n=i.selection,o=i.rows[n.row];o.hasChildren&&(o.isCollapsed=e,t&&i.scrollIntoView(n.row,-1))},e.prototype._moveSelWithValid=function(e,t,i){var n=this._g;n.isRangeValid(n.selection)?this._moveSel(e,t,i):n.select(n.rows._firstVisible,n.columns._firstVisible)},e.prototype.dispose=function(){this._g&&(this._toSearch&&(clearTimeout(this._toSearch),this._toSearch=null),this._g=null,this._search=null)},e}(),ei=function(e,t,i,n,o,r){void 0===r&&(r=!1);var l=Ut(o);if((0,s.setAttribute)(e,"role",l?"gridcell":r?"rowheader":"columnheader"),t.describedById||i.columns.describedById){var a=[t.describedById,i.columns.describedById].join(" ").trim();(0,s.setAttribute)(e,"aria-describedby",a||null)}if(n.allowSorting){var h=n._getBindingColumn(i,0,t);if(h&&!l)switch(h.currentSort){case"+":(0,s.setAttribute)(e,"aria-sort","ascending");break;case"-":(0,s.setAttribute)(e,"aria-sort","descending");break;default:e.removeAttribute("aria-sort")}}n.isReadOnly||((0,s.setAttribute)(e,"aria-readonly",t.isReadOnly),(0,s.setAttribute)(e,"aria-required",t.isReadOnly?null:t.getIsRequired()&&!r));var c=e.closest("."+Ne.row);(0,s.setAttribute)(c,"role","row")},ti=function(){function e(t,i){var n;if(this._row=-1,this._col=-1,this._edge=0,this._clickChildGrid=!1,this._mergedRange=null,i instanceof Element){if((0,s.closest)(i,"."+Ne.hostElement)!=t.hostElement)return;t=i,this._target=i}if(!(t instanceof Element)||t instanceof Rt){if(t instanceof Rt)this._target=t.hostElement,n=this._g=t;else{if(!(t instanceof Xe))throw"First parameter should be a FlexGrid or GridPanel.";this._target=t.hostElement,this._p=t,n=this._g=this._p.grid}if(i instanceof MouseEvent){this._target=i.target;var o=(0,s.closest)(this._target,"."+Ne.hostElement);"mousedown"==i.type&&null!=o&&t instanceof Rt&&o!=t.hostElement&&(this._clickChildGrid=!0),"mousedown"==i.type&&(n._rcBounds=null)}i=(0,s.mouseToPage)(i),this._pt=i.clone();var r=n.controlRect,l=n._szClient,a=n.topLeftCells,h=n._eTL,c=n.headersVisibility,u=pt,d=c&u.Row?a.columns.getTotalSize():0,p=c&u.Column?a.rows.getTotalSize():0,f=c&u.Column?p+h.offsetTop:0,_=n._eBL,g=_.offsetHeight,m=getComputedStyle(n.hostElement),b=m&&m.borderLeftWidth?parseFloat(m.borderLeftWidth):0,v=m&&m.borderTopWidth?parseFloat(m.borderTopWidth):0;if(i.x-=r.left-b,i.y-=r.top-v,n.rightToLeft&&(i.x=r.width-i.x),this._p||i.x>=0&&i.y>=h.offsetTop&&l&&i.x<=l.width+d&&i.y<=l.height+p&&(i.y<f?this._p=i.x<d?n.topLeftCells:n.columnHeaders:i.y<_.offsetTop?this._p=i.x<d?n.rowHeaders:n.cells:this._p=i.x<d?n.bottomLeftCells:n.columnFooters),null!=this._p){var y=this._p.rows,w=this._p.columns,C=this._p.cellType,x=Ge,E=this._p._getFrozenPos(),S=C==x.TopLeft||C==x.ColumnHeader?p:C==x.BottomLeft||C==x.ColumnFooter?g:y.getTotalSize(),I=C==x.TopLeft||C==x.BottomLeft||C==x.RowHeader?d:w.getTotalSize();C==x.RowHeader||C==x.Cell?(i.y-=p,this._inBottomFrozenArea=this._g.rows._frozenInternal&&this._g.rows._frozenInternal<0&&this._g._szClient.height&&this._g.rows.lastFrozen&&i.y>=Math.min(this._g.rows.lastFrozen.pos,this._g._szClient.height+this._g.rows.lastFrozen._antipos),this._p.rows._frozenInternal>=0?(i.y>E.y||E.y<=0)&&(i.y-=n._ptScrl.y,i.y+=this._p._getOffsetY()):(i.y<E.y||E.y>=this._g._szClient.height)&&(i.y-=n._ptScrl.y)):C!=x.BottomLeft&&C!=x.ColumnFooter||(i.y-=_.offsetTop),C!=x.ColumnHeader&&C!=x.Cell&&C!=x.ColumnFooter||(i.x-=d,this._inRightFrozenArea=this._g.columns._frozenInternal&&this._g.columns._frozenInternal<0&&this._g.columns.lastFrozen&&this._g._szClient.width&&i.x>=Math.min(this._g.columns.lastFrozen.pos,Math.min(this._g.columns.lastFrozen.pos,this._g._szClient.width+this._g.columns.lastFrozen._antipos)),this._p.columns._frozenInternal>=0?(i.x>E.x||E.x<=0)&&(i.x-=n._ptScrl.x):(i.x<E.x||E.x>=this._g._szClient.width)&&(i.x-=n._ptScrl.x)),C!=x.ColumnHeader&&C!=x.TopLeft||(i.y-=f-p),this._edge=0;var D=e._SZEDGE[this._g.isTouching?1:0];if(this._g.isTouching&&(D=e._SZEDGE[1],i.x-=D/2),this._row=i.y>S?-1:y.getItemAt(i.y),this._col=i.x>I?-1:w.getItemAt(i.x),(this._g.columns._frozenInternal<0||this._g.rows._frozenInternal<0)&&this.correctionForNegativeFrozen(i),this._row<0||this._col<0)return void(this._p=null);if(this._col>-1){var R=w[this._col],T=this.grid.columns._frozenInternal<0&&this.grid.columns.isFrozen(this._col)?Math.min(R.pos,n._szClient.width+R._antipos):R.pos;i.x-T<=D&&(this._edge|=1,i.x-T<=D/2&&(this._edge|=64));var P=T+R.renderSize-i.x;P<=D&&(this._edge|=4,P<=D/2&&(this._edge|=16))}if(this._row>-1){var M=y[this._row],A=this.grid.rows._frozenInternal<0&&this.grid.rows.isFrozen(this._row)?Math.min(M.pos,n._szClient.height+M._antipos):M.pos;i.y-A<=D&&(this._edge|=2,i.y-A<=D/2&&(this._edge|=128));var H=A+M.renderSize-i.y;H<=D&&(this._edge|=8,H<=D/2&&(this._edge|=32))}}this.panel&&(this._mergedRange=this.grid.getMergedRange(this.panel,this.row,this.col))}else{var z=(0,s.closest)(t,"."+Ne.cell),k=z?z[Xe._INDEX_KEY]:null;k&&(this._target=t,this._row=k.row,this._col=k.col,this._rng=k.rng,this._p=k.panel,this._g=k.panel.grid)}}return Object.defineProperty(e.prototype,"point",{get:function(){return this._pt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellType",{get:function(){return this._p?this._p.cellType:Ge.None},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"panel",{get:function(){return this._p},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"grid",{get:function(){return this._p?this._p.grid:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"row",{get:function(){return this._row},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mergedRange",{get:function(){return this._mergedRange},enumerable:!0,configurable:!0}),e.prototype.getRow=function(){return this._p&&this._row>-1?this._p.rows[this._row]:null},Object.defineProperty(e.prototype,"col",{get:function(){return this._col},enumerable:!0,configurable:!0}),e.prototype.getColumn=function(e){var t=this._p,i=t&&this._col>-1?t.columns[this._col]:null;if(i&&e){var n=t.grid;i=t.cellType===Ge.ColumnHeader&&n._hasColumnGroups()?n._getColumnGroup(this._row,this._col):n._getBindingColumn(t,this._row,i)}return i},Object.defineProperty(e.prototype,"range",{get:function(){return this._rng||(this._rng=new qe(this._row,this._col)),this._rng},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"edgeLeft",{get:function(){return this._considerMergedStatusOfCell(0!=(1&this._edge),"leftCol")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"edgeTop",{get:function(){return this._considerMergedStatusOfCell(0!=(2&this._edge),"topRow")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"edgeRight",{get:function(){return this._mergedRange&&this.panel.columns[this._mergedRange._col2]&&this.panel.columns[this._mergedRange._col2].isVisible?this._considerMergedStatusOfCell(0!=(4&this._edge),"rightCol"):0!=(4&this._edge)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"edgeFarRight",{get:function(){return this._considerMergedStatusOfCell(0!=(16&this._edge),"rightCol")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"edgeBottom",{get:function(){return this._mergedRange&&this.panel.rows[this._mergedRange._row2]&&this.panel.rows[this._mergedRange._row2].isVisible?this._considerMergedStatusOfCell(0!=(8&this._edge),"bottomRow"):0!=(8&this._edge)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"edgeFarBottom",{get:function(){return this._considerMergedStatusOfCell(0!=(32&this._edge),"bottomRow")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"edgeFarLeft",{get:function(){return 0!=(64&this._edge)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"edgeFarTop",{get:function(){return 0!=(128&this._edge)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),e.prototype.correctionForNegativeFrozen=function(e){var t=this._g._szClient.width,i=this._g._szClient.height;if(this._inRightFrozenArea||this._inBottomFrozenArea){if(this._inRightFrozenArea){for(var n=this._g.columns._lastFrozen;n<this._g.columns.length;n++)this._g.columns[n].isVisible&&e.x>=Math.min(this._g.columns[n].pos,t+this._g.columns[n]._antipos)&&e.x<=Math.min(this._g.columns[n].pos+this._g.columns[n].width,t)&&(this._col=n);this._col<this._g.columns.length+this._g.columns._frozenInternal&&(this._col=-1)}if(this._inBottomFrozenArea){for(n=this._g.rows._lastFrozen;n<this._g.rows.length;n++)this._g.rows[n].isVisible&&e.y>=Math.min(this._g.rows[n].pos,i+this._g.rows[n]._antipos)&&e.y<=Math.min(this._g.rows[n].pos+this._g.rows[n].height,i)&&(this._row=n);this._row<this._g.rows.length+this._g.rows._frozenInternal&&(this._row=-1)}}},e.prototype._considerMergedStatusOfCell=function(e,t){return!(!e||!(this.mergedRange&&this.mergedRange[t]===this.range[t]||null===this.mergedRange))},e._SZEDGE=[6,30],e}(),ii=function(){function e(e){var t=this;this._rng=null,this._edt=null,this._edItem=null,this._edtCanceled=!1,this._list=null,this._mapSearch=null,this._fullEdit=!1,this._evtInput=null,this._evtChange=null,this._cstEdtValue=null,this._validating=!1,this._map=null,this._composing=!1,this._g=e,this._evtInput=document.createEvent("HTMLEvents"),this._evtInput.initEvent("input",!0,!1),this._evtChange=document.createEvent("HTMLEvents"),this._evtChange.initEvent("change",!0,!1),e.selectionChanging.addHandler((function(e,i){return t._selectionChanging(i)})),e.lostFocus.addHandler((function(){var e=(0,s.getActiveElement)();e&&"fixed"==getComputedStyle(e).position?t.finishEditing():t._commitRowEdits()}));var i=e.hostElement;e.addEventListener(i,"mousedown",(function(i){if(!i.defaultPrevented&&0==i.button&&!e._mouseHdl._szRowCol){var n=e.hitTest(i);n.cellType!=Ge.Cell&&n.cellType!=Ge.None&&(t.finishEditing()||t.finishEditing(!0))}}),!0);var n=this;e.addEventListener(i,"compositionend",(function(){n._composing=!1,n._keypress.call(n,arguments)})),e.addEventListener(i,"compositionstart",(function(i){var n=t._getCustomEditor(e),o=null!=i?(0,s.closest)(i.target,"."+Ne.hostElement):null,r=s.Control.getControl(o),l=r&&r._edtHdl?null!=r._edtHdl.activeEditor:null!=t.activeEditor;if(!n||l||e.imeEnabled)t._composing=!0;else{var a=window.getSelection(),h=a.rangeCount>0?a.getRangeAt(0):null,c=document.activeElement;null!=c&&(c.blur(),window.getSelection().removeAllRanges(),setTimeout((function(){null!=h&&window.getSelection().addRange(h),c.focus()}),20))}}))}return e.prototype.startEditing=function(e,t,i,n,o){void 0===e&&(e=!0);var r=this._g,l=r._selHdl.selection;if(t=(0,s.asNumber)(t,!0,!0),i=(0,s.isString)(i)?r.columns.indexOf(i):(0,s.asNumber)(i,!0,!0),null==t&&(t=l.row),null==i&&(i=l.col),null==n&&(n=!0),!this._allowEdit(t,i))return!1;var a=r.getMergedRange(r.cells,t,i,!1);a||(a=new qe(t,i));var h=r.rows[t].dataItem;if(r.scrollIntoView(a.row,a.col,!0),!r.select(a,!0))return!1;if(!r.rows[t]||h!=r.rows[t].dataItem)return!1;if(this.activeEditor){if(a.equals(this._rng))return!0;if(!this.finishEditing())return!1}var c=new $e(r.cells,a,o);if(!r.onBeginningEdit(c))return!1;var u=r.editableCollectionView,d=!1;u&&((d=(h=r.rows[t].dataItem)!=u.currentEditItem)&&r.onRowEditStarting(c),u.editItem(h),d&&(r.onRowEditStarted(c),this._edItem=h));var p=r.rows[t],f=r._getBindingColumn(r.cells,t,r.columns[i]),_=f.dataMap||p.dataMap,g=je.RadioButtons,m=p.dataMap&&p.dataMapEditor==g||f.dataMap&&f.dataMapEditor==g;if((p.dataMap&&p.dataMapEditor==je.Menu||f.dataMap&&f.dataMapEditor==je.Menu)&&o&&"keypress"==o.type)return!1;if(this._fullEdit=(0,s.asBoolean)(e),this._rng=a,this._list=null,_&&(this._map=_),_&&!m&&!f.editor){var b=_.useFilter?_.getFilteredItems(r.getRowDataItem(t,i)):_.getDisplayValues(h);(f.isContentHtml||p.isContentHtml)&&(b=b.map((function(e){return(0,s.toPlainText)(e)}))),this._list=b,this._mapSearch=_.search}if(m){var v=r._activeCell||r.hostElement.querySelector("."+Ne.cell+"."+s.ControlStateClsNames.active);if(v){var y=o?o.target:null;if(y instanceof HTMLSpanElement&&(y=(0,s.closest)(y,"label")),y instanceof HTMLLabelElement&&(y=y.querySelector("input")),y instanceof HTMLInputElement)this._edt=y;else{var w=v.querySelectorAll("input[checked]");w.length>0?this._edt=w[0]:this._edt=v.querySelector("input")}this._updateRowHeaderCell(t)}}else a.isSingleCell?this._updateEditorCell(t,i,d):r.refresh(!1);var C=this._edt;if(C){if("checkbox"==C.type||"radio"==C.type||"menu"==C.type)this._fullEdit=!1;else if(n){var x=0,E=C.value.length,S=!1,I=s.culture.Globalize.numberFormat["%"]||"%",D=r.getCellData(t,i,!1);if((0,s.isNumber)(D)?S=C.value.indexOf(I)>-1:null==D&&(S=/^p/i.test(f.format))&&C.value.indexOf(I)<0&&(C.value+=I),S){var R=C.value;for(x=0,E=R.length;E>0&&(R[E-1]==I||" "==R[E-1]);)E--;for(;x<E&&R[x]==I;)x++}o&&"keydown"==o.type&&o.keyCode==s.Key.Space&&(x=E),this._setSelectionRange(C,x,E,!0,(0,s.isEdge)()),(0,s.isIE)()&&"right"==C.style.textAlign&&(C.style.paddingRight="1px")}r.onPrepareCellForEdit(c)}return n&&!r.containsFocus()&&r.focus(),null!=C&&!C.disabled&&!C.readOnly},e.prototype.finishEditing=function(e){var t=this._edt;if(!t||null==this._rng)return this._removeListBox(),!0;var i=this._g,n=this._rng,o=new Qe(i.cells,n),r=i.containsFocus();if(!e){var l=i.hostElement.querySelector("."+s.ControlClsNames.hostElement+"."+s.ControlStateClsNames.focused);if(l){var a=s.Control.getControl(l);a&&a instanceof et().AutoComplete&&""==t.value&&a.reset(),a&&(a.containsFocus()||a._focus)&&a.onLostFocus(o)}}if(o.cancel=e,!e&&i.validateEdits&&(C=this._getValidationError())){o.cancel=!0;var h=i.cells.getCellElement(n.row,n.col);h&&(this._setCellError(h,C),o.stayInEditMode=!0)}if(this._cstEdtValue=null,o.data=i.cells.getCellData(n.topRow,n.leftCol,!1),!i.onCellEditEnding(o)&&o.stayInEditMode)return r?setTimeout((function(){t.select()})):t.select(),this._fullEdit=!0,!1;if(!o.cancel){var c=null,u=!1;if(null!=this._lbx_SelectedValue)c=this._lbx_SelectedValue,u=!0;else{var d=this._cstEdtValue,p=this._map,f=this._lbx,_=i.columns[n.col].dataMapEditor===je.RadioButtons;if(d&&void 0!==d.value)c=d.value;else if(_&&this._edt.getAttribute("data-idx")){var g=parseInt(this._edt.getAttribute("data-idx"));c=p._cv.items[g][p.selectedValuePath]}else if(t&&f){var m=i._selHdl.selection,b=i.rows[m.row],v=i._getBindingColumn(i.cells,m.row,i.columns[m.col]);(t.value==this._lbx.selectedValue||(0,s.isString)(this._lbx.selectedValue)&&0==this._lbx.selectedValue.indexOf(t.value))&&(this._lbx_SelectedValue=this._findKeyValue(b.dataMap||v.dataMap,v.isContentHtml||b.isContentHtml)),c=this._lbx_SelectedValue}null==this._lbx_SelectedValue&&null==c&&(c=i.cellFactory.getEditorValue(i)),u=null!=this._lbx_SelectedValue||_}for(var y=n.topRow;y<=n.bottomRow&&y<i.rows.length;y++)for(var w=n.leftCol;w<=n.rightCol&&w<i.columns.length;w++){v=i._getBindingColumn(i.cells,y,i.columns[w]),b=i.rows[y];var C,x=!(p=v&&v.dataMap||b&&b.dataMap)||p.serializeKeys;if(!u&&p){if(this.isEqualValue(p.getDisplayValue(o.data),c))continue;if(p.useFilter){for(var E=i.getRowDataItem(y,w),S=p.getFilteredItems(E),I=!1,D=0;D<S.length&&!(I=S[D][p._displayPath]==c);D++);if(!I)continue}}if(!i.cells.setCellData(y,w,c,x,!1,u)&&i.validateEdits)if(C=this._getValidationError(!0)){o.cancel=!0;var R=i.cells.getCellElement(n.row,n.col);return R&&(this._setCellError(R,C),o.stayInEditMode=!0),!1}}t.value==this._edtValue&&t.dispatchEvent(this._evtChange)}this._edt=null,this._rng=null,this._list=null,this._edtValue=null,this._edtCanceled=o.cancel,this._removeListBox(),this._lbx_SelectedValue=null;var T=(0,s.closest)(t,"."+Ne.cell);return(0,s.contains)(T,(0,s.getActiveElement)())&&(i._setFocusNoScroll(T),i._isScrollingByWheel=!1),!o.cancel&&o.refresh&&i._refreshOnEdit?i.refresh(!1):this._updateEditorCell(n.row,n.col,!1),r&&i.focus(),i.onCellEditEnded(o),!0},e.prototype._setSelectionRange=function(e,t,i,n,o){if(void 0===n&&(n=!0),void 0===o&&(o=!1),!o)return(0,s.setSelectionRange)(e,t,i,n);if((0,s.contains)(document.body,e)&&!e.disabled&&e.offsetHeight){try{e.setSelectionRange(t,i,"backward")}catch(e){}if(n)try{return this._g._setFocusNoScroll(e),!0}catch(e){}}return!1},e.prototype._setCustomEditorValue=function(e){this._cstEdtValue={value:e}},e.prototype._getCustomEditor=function(e){var t=null,i=e.selection;if(null!=i&&i.isValid){var n=e._getBindingColumn(e.cells,i.row,e.columns[i.col]);t=n&&n._edt}return t},e.prototype._setCellError=function(e,t){var i=this._g;""==t&&(t=null),(0,s.toggleClass)(e,s.ControlStateClsNames.invalid,null!=t),(0,s.setAttribute)(e,"aria-invalid",null!=t?"true":null);var n=i.errorTip,o=i.activeEditor;n?(n.setTooltip(e,t),o&&(0,s.contains)(e,o)&&(0,s.setAttribute)(o,"title","")):(0,s.setAttribute)(e,"title",t),o&&e==i.activeCell&&!(0,s.contains)(e,o)&&n&&n.setTooltip(o,t)},Object.defineProperty(e.prototype,"activeEditor",{get:function(){return this._edt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editRange",{get:function(){return this._rng},enumerable:!0,configurable:!0}),e.prototype.getClipString=function(e,t,i,n){var o,r=this,l=this._g,a=l.selectionMode,h=[],c=0!=(t&ft.CSV),u=c?"\r\n":"\n",d=c?",":"\t",p=0!=(t&ft.InvisibleRows),f=Ue,_=null!=e;if(!e&&a!=f.ListBox)for(var g=l.rows,m=0;m<g.length;m++)if(g[m].isSelected){a=f.ListBox;break}if(!e)switch(l._selHdl._expandSelection(),e=l.selection,a){case f.Row:case f.RowRange:case f.ListBox:e.col=0,e.col2=l.columns.length-1;break;case f.MultiRange:var b=l.selectedRanges;if(b.length>1){var v=this._sameCols(b),y=this._sameRows(b);if(v||y){(b=b.slice()).sort((function(e,t){return e.topRow-t.topRow||e.leftCol-t.leftCol}));for(var w=0;w<b.length;w++)for(var C=b[w],x=w+1;x<b.length;x++)C.contains(b[x])&&(b.splice(x,1),x--);if(v){var E=[];return b.forEach((function(e){E.push(r.getClipString(e,t,i,n)),i=!1})),E.join(u)}var S;if(y)return b.forEach((function(e){var o=r.getClipString(e,t,i,n).split(u);null==S?(S=o,n=!1):o.forEach((function(e,t){S[t]+=d+e}))})),S.join(u)}}}var I=e.col>-1&&e.col2>-1;if(i&&I&&(o=l.columnHeaders).rows.forEach((function(i,s){if(p||i.isVisible){var l=r._getRowClipString(o,s,e,t,n);h.push(l)}})),e.row>-1&&e.row2>-1)if(o=l.cells,a!=f.ListBox||_){for((0,s.assert)(e.bottomRow<o.rows.length,"Row index must be less than the number of rows."),w=e.topRow;w<=e.bottomRow;w++)if(p||o.rows[w].isVisible){var D=this._getRowClipString(o,w,e,t,n);h.push(D)}}else o.rows.forEach((function(i,s){if(i.isSelected&&(p||i.isVisible)){var l=r._getRowClipString(o,s,e,t,n);h.push(l)}}));return h.join(u)},e.prototype._getRowClipString=function(e,t,i,n,o){var r=[],l=e.rows[t],a=ft,h=0!=(n&a.CSV),c=0!=(n&a.InvisibleColumns),u=0==(n&a.Unformatted),d=0!=(n&a.SkipMerged);if(l.isVisible){if(o)for(var p=e.cellType==Ge.ColumnHeader?e.grid.topLeftCells:e.grid.rowHeaders,f=0;f<p.columns.length;f++)if(c||p.columns[f].isVisible){var _=p.getCellData(t,f,!0);d&&this._skipMergedCell(e,null,t,f)&&(_=""),r.push(this._getCellClipString(_,n))}var g=l instanceof wt?l:null,m=(!!g&&g.isSummary,e.grid),b=g&&(m.groupSummaryPosition===mt.Bottom||m.groupSummaryPosition===mt.Auto&&!g.isCollapsed),v=g&&!g.isSummary&&b;if(i.col>-1&&i.col2>-1)for((0,s.assert)(i.rightCol<e.columns.length,"Column index must be less than the number of columns."),f=i.leftCol;f<=i.rightCol;f++)(c||e.columns[f].isVisible)&&(_=e.getCellData(t,f,u),v&&f!=e.columns.firstVisibleIndex&&(_=null),!_&&l instanceof wt&&f==e.columns.firstVisibleIndex&&(_=(0,s.toPlainText)(l.getGroupHeader())),d&&this._skipMergedCell(e,null,t,f)&&(_=""),r.push(this._getCellClipString(_,n)))}return r.join(h?",":"\t")},e.prototype._skipMergedCell=function(e,t,i,n){var o=e.grid.getMergedRange(e,i,n,!1);return!(!o||(t&&(o.row=Math.max(t.topRow,o.row),o.col=Math.max(t.leftCol,o.col)),o.row==i&&o.col==n))},e.prototype._getCellClipString=function(e,t){(0,s.isString)(e)||(e=(0,s.isDate)(e)?e.toJSON():null!=e?e.toString():""),e=e.replace(/\t/g," ");var i=0!=(t&ft.QuoteAll);return(i=i||/\n|^"|"$/.test(e))||0==(t&ft.CSV)||(i=e.indexOf(",")>-1),i&&(e='"'+(e=e.replace(/"/g,'""'))+'"'),e},e.prototype._sameRows=function(e){for(var t=e[0],i=1;i<e.length;i++)if(e[i].topRow!=t.topRow||e[i].bottomRow!=t.bottomRow)return!1;return!0},e.prototype._sameCols=function(e){for(var t=e[0],i=1;i<e.length;i++)if(e[i].leftCol!=t.leftCol||e[i].rightCol!=t.rightCol)return!1;return!0},e.prototype.setClipString=function(e,t){var i,n,o=this,r=this._g,l=r.editableCollectionView,a=this._parseClipString((0,s.asString)(e)),h=r._getRowsPerItem(),c=r.selection,u=!1,d=a.length;t&&(c=t),i=r.rows[c.topRow]instanceof kt&&r.newRowAtTop,n=c.rowSpan>1&&1===h||c.rowSpan-h!=0&&h>1,i&&n&&(u=!0,r.select(new qe(c.topRow,c.leftCol,c.topRow,c.rightCol)));var p=null==t,f=Ue;if(p)switch(r._selHdl._expandSelection(),t=r.selection,r.selectionMode){case f.Row:case f.RowRange:case f.ListBox:t.col=0,t.col2=r.columns.length-1;break;case f.MultiRange:var _=r.selectedRanges;if(_.length>1)return l&&l.beginUpdate(),_.forEach((function(t){r.setClipString(e,t)})),l&&l.endUpdate(),void(r.selectedRanges=_)}t=(0,s.asType)(t,qe),this._expandClipRows(a,t),u||(d=a.length);var g=0;if(a.length)for(var m=t.leftCol,b=r.columns.length,v=0;v<a[0].length;v++)for(var y=m+v+g;y<b&&!r.columns[y].visible;)g++,y++;var w=p?new qe(t.topRow,t.leftCol,Math.min(t.topRow+a.length-1,r.rows.length-1),Math.min(t.leftCol+a[0].length-1+g,r.columns.length-1)):t,C=new $e(r.cells,w,e);if(!r.onPasting(C))return!1;w=new qe(t.topRow,t.leftCol);var x=new $e(r.cells,new qe(t.topRow,-1)),E=!1,S=0,I=t.topRow,D=r.rows,R=r.columns,T=a.length>h,P=this._deferPaste(t,a.length);if((0,s.assert)(h>=1,"Invalid RPI value = "+h),r.deferUpdate((function(){var e=-1;l&&P&&(e=l.currentPosition,l.beginUpdate());for(var i=0;i<d&&I<D.length;i++,I++){var n=D[I];if(n.isVisible){if(!T||!n.isReadOnly){var c=n.dataItem,u=l?l.currentEditItem:null;if(u&&c!=u&&(r.onRowEditEnding(x),r.onRowEditEnded(x)),n instanceof kt&&l){if(P){if(n.dataItem=l.addNew(),x._rng.setRange(r.newRowAtTop?0:I,-1),!r.onRowEditStarting(x)){I--,l.cancelNew();continue}r.onRowEditStarted(x)}else if(1==h||(I+1)%h==1||0==i){if(x._rng.setRange(r.newRowAtTop?I%h:I,-1),!r.onRowEditStarting(x)){I--;continue}r.onRowEditStarted(x)}}else c!=u&&(x._rng.setRange(I,-1),r.onRowEditStarting(x),r.onRowEditStarted(x));for(var p=a[i],f=t.leftCol,_=0;_<p.length&&f<R.length;_++,f++){var g=R[f];if(g.isVisible){if(!T||!g.isReadOnly){var m=r.getMergedRange(r.cells,I,f,!1);if((!m||m.leftCol==f&&m.topRow==I)&&o._allowEdit(I,f)){var b=p[_],v=g.maxLength||n.maxLength;v&&(b=b.substr(0,v));var y=new $e(r.cells,new qe(I+S,f),b);if(r.onPastingCell(y)){l&&(l.editItem(c),o._edItem=l.currentEditItem);var C=r.getCellData(I,f,!1),M=y.data,A=et();if(A){var H=r._getBindingColumn(r.cells,I,r.columns[f]),z=H.editor,k=null,O=null;z instanceof A.InputNumber?(k=z.clamp.bind(z),M!=z.text&&(z._oldText=z.text,z._setText(M)),M=z.text,O=s.DataType.Number):(z instanceof A.InputDate||z instanceof A.InputTime)&&(k=z._clamp.bind(z),O=s.DataType.Date),k&&(M=(0,s.changeType)(M,O,H.format,C),(0,s.getType)(M)==O&&(M=k(M)))}(r.pasteEmptyCells||""!==M)&&r.setCellData(I,f,M)&&(y.data=C,r.onPastedCell(y),E=!0)}w.row2=Math.max(w.row2,I+S),w.col2=Math.max(w.col2,f)}}}else _--}if(o._edItem&&l instanceof s.CollectionView){var L=new s.NotifyCollectionChangedEventArgs(s.NotifyCollectionChangedAction.Change,o._edItem,I);l.onCollectionChanged(L,l._edtClone)}n instanceof kt&&l&&(P?(n.dataItem=null,E?(x._rng.setRange(r.newRowAtTop?0:I,-1),r.onRowEditEnding(x),r.onRowEditEnded(x),I--,S++,l.commitNew()):l.cancelNew()):T&&h>1&&(I+1)%h==0&&E&&(x._rng.setRange(r.newRowAtTop?I%h:I,-1),r.onRowEditEnding(x),r.onRowEditEnded(x),I-=h,S++))}}else i--}if(l)if(P)l.currentEditItem&&(l.commitEdit(),r.onRowEditEnding(x),r.onRowEditEnded(x)),l.moveCurrentToPosition(e),l.endUpdate(!0);else{var F=l.currentAddItem;!F&&0==t.row&&r.newRowAtTop&&D[0]instanceof kt&&D[0].dataItem&&"{}"!=JSON.stringify(D[0].dataItem)&&(F=D[0].dataItem),F?(l.editItem(F),o._edItem=F):D[0]instanceof kt&&D[0].dataItem&&(D[0].dataItem=null)}w.rowSpan>1&&0==w.topRow&&D[0]instanceof kt&&(w.row=w.row2=0),r.select(w)})),r.onPasted(C),E&&(0,s.closest)(r.hostElement,"form")){var M=document.createEvent("HTMLEvents"),A=(0,s.createElement)("<input>",r.hostElement);M.initEvent("change",!0,!1),A.dispatchEvent(M),(0,s.removeChild)(A)}},e.prototype._deferPaste=function(e,t){var i=this._g.rows,n=i.length;if(t>1){if(n>1&&i[0].dataItem!=i[1].dataItem)return!0;if(1==n&&i[0]instanceof kt)return!0}return!1},e.prototype._parseClipString=function(e){var t=[],i=(e=(e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n")).replace(/\n$/,"")).length,n=function(e){return"\n"===e||"\t"===e},o=0,r=0;for(o=0;o<i;o++){var s=!1,l=!1,a=!1;if('"'===e[o]){for(var h=o+1,c=!1;h<i;)if('"'===e[h]){if(!(h+1<i&&'"'===e[h+1])){c=!0;break}h+=2}else h++;c&&(s=!0)}for(r=o;r<i&&!a;r++){var u=e[r];'"'===u?s&&(l=!l):n(u)&&!l&&(this._parseClipCell(t,e,o,r,"\n"==u),o=r,r==i-1&&(o=r+1),a=!0)}if(r==i){this._parseClipCell(t,e,o,r,!1);break}}return 0==t.length&&t.push([""]),t},e.prototype._parseClipCell=function(e,t,i,n,o){e.length||e.push([]);var r=t.substr(i,n-i),s=r.length;if(s>2&&'"'==r[0]&&'"'==r[s-1]){var l=r.substr(1,s-2),a=function(e){return l.indexOf(e)>-1};(a('""')||a("\t")||a("\n"))&&(r=l.replace(/""/g,'"'))}else"\t"==r&&(r="");e[e.length-1].push(r),o&&e.push([])},e.prototype._expandClipRows=function(e,t){for(var i=e.length,n=0,o=0;o<i;o++)n=Math.max(n,e[o].length);for(var r=this._g,s=0,l=0,a=r._getRowsPerItem(),h=t.topRow;h<=t.bottomRow&&(r.rows[h].isVisible&&s++,!(0===h&&r.allowAddNew&&r.newRowAtTop&&a<=1));h++);for(var c=t.leftCol;c<=t.rightCol;c++)r.columns[c].isVisible&&l++;if((s>1||l>1)&&(1==s&&(s=i),1==l&&(l=n),l%n==0&&s%i==0)){for(c=n;c<l;c++)for(h=0;h<i;h++)e[h].push(e[h%i][c%n]);for(h=i;h<s;h++)e.push(e[h%i])}},e.prototype._updateEditorCell=function(e,t,i){var n=this._g;if(n._useFrozenDiv()&&(n.rows.isFrozen(e)||n.columns.isFrozen(t))||n.columns._frozenInternal<0||n._hasPendingUpdates())n.refresh(!1);else{var o=n.cells.getCellElement(e,t);o&&n.onUpdatingView(new s.CancelEventArgs)&&(this._updateCell(o),(i||n._getHasValidation())&&this._updateRowHeaderCell(e),n.onUpdatedView())}},e.prototype._updateRowHeaderCell=function(e){var t=this._g;if(t.headersVisibility&pt.Row){var i=t.rowHeaders,n=t._getEditColumnIndex(),o=i.getCellElement(e,n);o&&this._updateCell(o)}},e.prototype._updateCell=function(e){var t=new ti(e,null),i=Rt._WJS_UPDATING;t.panel&&((0,s.addClass)(e,i),t.grid.cellFactory.updateCell(t.panel,t.row,t.col,e,t.range),(0,s.removeClass)(e,i))},e.prototype._getValidationError=function(e){var t=this,i=this._g,n="";if(i&&this._rng&&!this._validating){var o=this._rng.row,r=this._rng.col,l=i.activeEditor,a=i.cellFactory.getEditorValue(i),h=i.getCellData(o,r,!1);if(e&&(n=i._getError(i.cells,o,r,!0)),!n&&i._getHasValidation()){if(l&&(n=l.validationMessage),!n){var c=i.columns[r],u=i.rows[o];!i._getBindingColumn(i.cells,o,c).getIsRequired(u)||null!=a&&""!==a||(n=this._getRequiredMsg())}!n&&i.setCellData(o,r,a,!0,!1)&&(n=i._getError(i.cells,o,r,!1),i.setCellData(o,r,h,!1,!1))}if(!n){var d=s.Control.getControl((0,s.closest)(l,"."+s.ControlClsNames.hostElement));if(d==i&&(0,s.hasClass)(l,Ne.gridIme)&&null!=i.activeCell&&(d=i.activeCell.firstChild["$WJ-CTRL"]),d&&d!=i&&d.invalidInput.hasHandlers){var p=function(e,s){s.cancel&&(n=i._getError(i.cells,o,r,!0)||t._getBadInputMsg(),s.cancel=""!=n)};this._validating=!0;var f=l.value;if(d.invalidInput.addHandler(p),d._containsFocus()){var _=(0,s.closest)(d.hostElement,"."+Ne.cell);_&&_.focus()}var g=d.isDroppedDown;d.onLostFocus(),d.invalidInput.removeHandler(p),l.value=f,n?l.select():g&&(d.isDroppedDown=!0,l.select()),this._validating=!1}}}return n},Object.defineProperty(e.prototype,"validate",{get:function(){return!this._getValidationError()},enumerable:!0,configurable:!0}),e.prototype._getRequiredMsg=function(){if(!e._msgRequired){var t=document.createElement("input");t.required=!0,e._msgRequired=t.validationMessage}return e._msgRequired},e.prototype._getBadInputMsg=function(){if(!e._msgBadInput){var t=document.createElement("input");t.pattern="x",t.value="a",e._msgBadInput=t.validationMessage||"Bad Input"}return e._msgBadInput},e.prototype._allowEdit=function(e,t){var i=this._g;if(i.isReadOnly||i.selectionMode==Ue.None)return!1;if(i.collectionView&&!i.editableCollectionView)return!1;if(null!=e){if(e<0||e>=i.rows.length)return!1;var n=i.rows[e];if(!n||n.isReadOnly||!n.isVisible)return!1}if(null!=t){if(t<0||t>=i.columns.length)return!1;var o=i._getBindingColumn(i.cells,e,i.columns[t]);if(!o||o.isReadOnly||!o.isVisible)return!1}return!0},e.prototype._commitRowEdits=function(){var e=this._g;if(this.finishEditing()&&this._edItem){var t=e.editableCollectionView;if(t&&(t.currentEditItem||t.currentAddItem)){var i=new $e(e.cells,e.selection);e.onRowEditEnding(i),t.commitEdit(),e.onRowEditEnded(i)}this._edItem=null}},e.prototype._keydown=function(e){var t=this._edt;switch(e.keyCode){case s.Key.F2:return this._fullEdit=!this._fullEdit,e.preventDefault(),!0;case s.Key.F4:return this._toggleListBox(e),e.preventDefault(),!0;case s.Key.Space:return!t||"checkbox"!=t.type||t.disabled||t.readOnly||((0,s.setChecked)(t,t.indeterminate||!t.checked),this.finishEditing(),e.preventDefault()),!0;case s.Key.Enter:if(e.preventDefault(),t&&e.altKey){var i=e.target;if(i instanceof HTMLTextAreaElement&&"soft"==i.wrap){this._composing&&(i.blur(),i.focus()),i.style.setProperty("ime-mode","auto","important");var n=i.value,o=i.selectionStart,r=i.selectionEnd;i.value=n.substr(0,o)+"\n"+n.substr(r),(0,s.setSelectionRange)(i,o+1),i.blur(),i.focus(),i.style.imeMode=""}return!0}if(t&&this._lbx){var l=this._g,a=l._selHdl.selection,h=l.rows[a.row],c=l._getBindingColumn(l.cells,a.row,l.columns[a.col]);return null!=t.value&&(t.value!=this._lbx.selectedValue&&0!=((0,s.isString)(this._lbx.selectedValue)&&this._lbx.selectedValue.indexOf(t.value))||""==t.value&&null!=this._lbx.selectedValue||(this._lbx_SelectedValue=this._findKeyValue(h.dataMap||c.dataMap,c.isContentHtml||h.isContentHtml))),this._toggleListBox(e),this.finishEditing(),!0}return!this.finishEditing();case s.Key.Tab:return e.preventDefault(),!this.finishEditing();case s.Key.Escape:return e.preventDefault(),this.finishEditing(!0),!0;case s.Key.Up:case s.Key.Down:case s.Key.Left:case s.Key.Right:case s.Key.PageUp:case s.Key.PageDown:case s.Key.Home:case s.Key.End:if(this._lbx)return this._keydownListBox(e);if(e.altKey)switch(e.keyCode){case s.Key.Up:case s.Key.Down:return this._toggleListBox(e),e.preventDefault(),!0}if(this._fullEdit)switch(e.keyCode){case s.Key.PageUp:case s.Key.PageDown:e.preventDefault()}else if(this.finishEditing())return!1}return!0},e.prototype._keydownListBox=function(e){var t=!0;if(this._lbx)switch(e.keyCode){case s.Key.Up:e.altKey?this._toggleListBox(e):this._lbx.selectedIndex>0&&this._lbx.selectedIndex--;break;case s.Key.Down:e.altKey?this._toggleListBox(e):this._lbx.selectedIndex++;break;case s.Key.Home:case s.Key.PageUp:this._lbx.selectedIndex=0;break;case s.Key.End:case s.Key.PageDown:this._lbx.selectedIndex=this._lbx.collectionView.items.length-1;break;default:t=!1}return!!t&&(e.preventDefault(),!0)},e.prototype._keypress=function(e){if("AltLeft"!=e.code&&"AltRight"!=e.code){var t=this._edt,i=null!=e.key&&e.key.length>0?e.key.charCodeAt(0):32,n=this._list;if((0,s.isEdge)()){var o=t;o&&(1==o.value.length||0==o.selectionStart&&o.selectionEnd==o.value.length)&&(s.Control.sharedState.InvalidScroll=!0)}if(t&&"checkbox"!=t.type&&(0,s.getActiveElement)()==t&&n&&n.length>0&&i>=32){var r=t.selectionStart,l=t.value.substr(0,r);if(""==l&&null==e.key)return;e.target==t&&i&&(l+=String.fromCharCode(i),r++);var a=this._mapSearch,h=-1,c=this._map;if(a)for(var u=0;u<n.length;u++){var d=n[u];if(a(null==d?d:d.toString(),l)){h=u;break}}else c&&c.useFilter?(h=this._findStringInObjArray(n,c.displayMemberPath,l,!0))<0&&!this._g.caseSensitiveSearch&&(h=this._findStringInObjArray(n,c.displayMemberPath,l,!1)):(h=this._findString(n,l,!0))<0&&!this._g.caseSensitiveSearch&&(h=this._findString(n,l,!1));if(h>-1){var p=this._lbx;p&&(p.selectedIndex=h);var f;f=c&&c.useFilter?n[h][c.displayMemberPath]:n[h],t.value=f,(0,s.setSelectionRange)(t,r,t.value.length),t.dispatchEvent(this._evtInput),e.preventDefault&&e.preventDefault()}else this._lbx&&(this._lbx_SelectedValue=null)}}else e.preventDefault()},e.prototype._findString=function(e,t,i){i||(t=t.toLowerCase());for(var n=0;n<e.length;n++){var o=e[n];if(null!=o&&(o=o.toString(),i||(o=o.toLowerCase()),0==o.indexOf(t)))return n}return-1},e.prototype._findStringInObjArray=function(e,t,i,n){n||(i=i.toLowerCase());for(var o=0;o<e.length;o++){var r=e[o];if(null!=r&&(r=r[t].toString(),n||(r=r.toLowerCase()),0==r.indexOf(i)))return o}return-1},e.prototype._toggleListBox=function(e,t){var i=this._g,n=i._selHdl.selection,o=i.isTouching;if(t||(t=n),this._lbx&&(this._removeListBox(),n.intersects(t)))return i.activeEditor?i.activeEditor.focus():i.containsFocus()||i.focus(),!0;if(!t.isValid)return!1;var r=i.rows[t.row],s=i._getBindingColumn(i.cells,t.row,i.columns[t.col]),l=r.dataMap||s.dataMap,a=i._getMapEditor(r,s);if(!l||a!=je.DropDownList&&a!=je.Menu||!et())return!1;if(null!=s.editor)return!1;if(!t.intersects(i.editRange)&&!this.startEditing(!0,t.row,t.col,!o,e))return!1;var h=this._lbx=this._createListBox();return requestAnimationFrame((function(){return h.showSelection()})),o&&h.focus(),!0},e.prototype._createListBox=function(){var e=this,t=this._g,i=t.activeEditor,n=this._rng,o=t.rows[n.row],r=t._getBindingColumn(t.cells,n.row,t.columns[n.col]),l=r.isContentHtml||o.isContentHtml,a=r.dataMap||o.dataMap,h=r.dropDownCssClass||o.dropDownCssClass,c=document.createElement("div");this._removeListBox(),(0,s.addClass)(c,j.dropDownPanel+" "+Ne.gridListBox),(0,s.addClass)(c,h),(0,s.setAttribute)(c,"dir",t.rightToLeft?"rtl":"ltr");var u=i?i.value:t.getCellData(n.row,n.col,!0),d=new se(c,{maxHeight:4*o.renderHeight,isContentHtml:l}),p=t.getRowDataItem(n.row,n.col);if(a.useFilter?(d.itemsSource=a.getFilteredItems(p),d.displayMemberPath=a._displayPath,d.selectedValuePath=a._keyPath):d.itemsSource=a.getDisplayValues(p),a._displayPath==a._keyPath)d.selectedValue=u;else{var f=t.getCellData(n.row,n.col,!1),_=-1,g=this._findDuplicateValues(a,u,l),m=a._cv.items.findIndex((function(t){return e.isEqualValue(t[a._keyPath],f,l)}));if(m>-1){var b=a._cv.items[m][a._displayPath];if(this.isEqualValue(u,b,l))if(1==g.length)_=m>=d.itemsSource.length||!this.isEqualValue(this._getListBoxItemField(d,a.useFilter,m),u,l)?d.itemsSource.findIndex((function(t){return e.isEqualValue(b,a.useFilter?t[d.displayMemberPath]:t,l)})):m;else for(var v=-1,y=0;y<d.itemsSource.length;y++)if(this.isEqualValue(this._getListBoxItemField(d,a.useFilter,y),b,l)&&(v++,this.isEqualValue(g[v],f,l))){_=y;break}}_<0&&(_=d.itemsSource.findIndex((function(t){return e.isEqualValue(u,a.useFilter?t[d.displayMemberPath]:t,l)}))),_>=0?d.selectedIndex=_:d.selectedValue=null}d.addEventListener(c,"keydown",(function(i){switch(i.keyCode){case s.Key.Enter:case s.Key.Escape:e._removeListBox(),t.focus()}})),d.addEventListener(c,"click",(function(){e._lbx&&(e._lbx_SelectedValue=e._findKeyValue(a,l)),e._removeListBox(),t.focus(),e.finishEditing()})),d.gotFocus.addHandler((function(){d.containsFocus()&&i&&!(0,s.isEdge)()&&i.focus()})),d.selectedIndexChanged.addHandler((function(){var i=t.activeEditor;if(i){var n=e._map,o=null==n?null:n._displayPath,r=e._list[d.selectedIndex];i.value=void 0===r||null==r?"":"object"==typeof r&&null!=o&&void 0!==r[o]?r[o]:r,i.dispatchEvent(e._evtInput),(0,s.setSelectionRange)(i,0,i.value.length)}}));var w=t.cells.getCellElement(n.row,n.col);if(w){(0,s.showPopup)(c,w,!1,!1,!1);var C=w.querySelector("."+Ft._WJC_DROPDOWN);(0,s.setAttribute)(C,"aria-expanded",!0)}else(0,s.showPopup)(c,t.getCellBoundingRect(n.row,n.col)),c[s.Control._OWNR_KEY]=t.hostElement;return d},e.prototype._getListBoxItemField=function(e,t,i){return i>=e.itemsSource.length?null:t?e.itemsSource[i][e.displayMemberPath]:e.itemsSource[i]},e.prototype._findKeyValue=function(e,t){if(void 0===t&&(t=!1),e.useFilter){if(this._lbx.selectedValue)return this._lbx.selectedValue;if(this._lbx.selectedItem&&this._lbx.selectedValuePath)return this._lbx.selectedItem[this._lbx.selectedValuePath]}var i=this._lbx.selectedValue,n=this._findDuplicateValues(e,i,t),o=e.getKeyValue(i);if(this._lbx.selectedIndex>0&&n.length>1){for(var r=-1,s=0;s<=this._lbx.selectedIndex;s++)this.isEqualValue(this._lbx.itemsSource[s],i,t)&&r++;r>=0&&(o=n[r])}return o},e.prototype._findDuplicateValues=function(e,t,i){void 0===i&&(i=!1);for(var n=[],o=e.getKeyValues(),r=0;r<o.length;r++)this.isEqualValue(e.getDisplayValue(o[r]),t,i)&&n.push(o[r]);return n},e.prototype._removeListBox=function(){var e=this._lbx;e&&(this._lbx=null,(0,s.hidePopup)(e.hostElement,(function(){e.dispose()})))},e.prototype.isEqualValue=function(e,t,i){return void 0===i&&(i=!1),e instanceof Date&&t instanceof Date?e.getTime()==t.getTime():(null!=e&&null!=e||(e=""),null!=t&&null!=t||(t=""),Number.isNaN(e)&&(e="NaN"),Number.isNaN(t)&&(t="NaN"),i&&((0,s.isString)(e)&&e.indexOf("<")>-1&&(e=(0,s.toPlainText)(e)),(0,s.isString)(t)&&t.indexOf("<")>-1&&(t=(0,s.toPlainText)(t))),e.toString()==t.toString())},e.prototype._selectionChanging=function(e){var t=this;if(!this._g.isReadOnly)if(this.finishEditing()){var i=this._g._selHdl.selection.row;if(i!=e.row){var n=this._g.rows.length;if((i>-1&&i<n?this._g.rows[i].dataItem:null)!=(e.row>-1&&e.row<n?this._g.rows[e.row].dataItem:null)){var o=!this._g.rows[i]||this._g.rows[i]&&Object.getPrototypeOf(this._g.rows[i])!==yt.prototype?null:this._g.getEmptyRequiredCell(i);if(null===o&&this._commitRowEdits(),this._g._getHasValidation()&&this._g.validateEdits){var r=this._g.editableCollectionView;null!==o&&r.currentAddItem&&(setTimeout((function(){t._g.select(new qe(i,o)),t.startEditing(!0,i,o,!0,e)})),e.cancel=!0)}}}}else e.cancel=!0},e._msgRequired="",e._msgBadInput="",e}(),ni=s.ControlStateClsNames.dragSrc,oi=Ne.hostElement;!function(e){e[e.None=0]="None",e[e.Columns=1]="Columns",e[e.Rows=2]="Rows",e[e.Both=3]="Both",e[e.ColumnsAllCells=4|e.Columns]="ColumnsAllCells",e[e.RowsAllCells=4|e.Rows]="RowsAllCells",e[e.BothAllCells=4|e.Both]="BothAllCells",e[e.ColumnsOverflow=8|e.Columns]="ColumnsOverflow",e[e.RowsOverflow=8|e.Rows]="RowsOverflow",e[e.BothOverflow=8|e.Both]="BothOverflow",e[e.ColumnsAllCellsOverflow=8|e.ColumnsAllCells]="ColumnsAllCellsOverflow",e[e.RowsAllCellsOverflow=8|e.RowsAllCells]="RowsAllCellsOverflow",e[e.BothAllCellsOverflow=8|e.BothAllCells]="BothAllCellsOverflow"}(Xt||(Xt={})),function(e){e[e.None=0]="None",e[e.Headers=1]="Headers",e[e.Cells=2]="Cells",e[e.Both=3]="Both"}($t||($t={})),function(e){e[e.None=0]="None",e[e.Columns=1]="Columns",e[e.Rows=2]="Rows",e[e.Both=3]="Both"}(Zt||(Zt={}));var ri=function(){function e(e){var t=this;this._wasAllRowColHidden=!1,this._scrollbarStatusAtMouseDown=null;var i=e.hostElement,n=e.addEventListener.bind(e),o=e.removeEventListener.bind(e);this._g=e,n(i,"mousedown",(function(i){e._rcBounds=null;var a=i.target,h=(0,s.closestClass)(a,oi),c=i.defaultPrevented&&null!=(0,s.closestClass)(a,Ft._WJC_DROPDOWN);if(c&&null==(h=(0,s.closestClass)(document.activeElement,oi))){var u=s.Control.getControl(document.activeElement),d=null;u.hostElement&&(u.hostElement["$WJ-OWNR"]&&u.hostElement["$WJ-OWNR"]["$WJ-CTRL"]?d=u.hostElement["$WJ-OWNR"]["$WJ-CTRL"].inputElement:u.hostElement.parentElement&&u.hostElement.parentElement["$WJ-OWNR"]&&u.hostElement.parentElement["$WJ-OWNR"]["$WJ-CTRL"]&&(d=u.hostElement.parentElement["$WJ-OWNR"]["$WJ-CTRL"].inputElement)),h=(0,s.closestClass)(d,oi)}var p=h&&h!=e.hostElement,f=p&&(h[s.Control._CTRL_KEY]._imeHdl||e.imeEnabled);if((!i.defaultPrevented||f||c)&&0==i.button){if(!i.defaultPrevented){var _=t._g.activeCell;if(!e.containsFocus()||!_||_.classList.contains(s.ControlStateClsNames.selected)){var g=a instanceof HTMLElement&&a.tabIndex>-1?a:e._eFocus;e._setFocusNoScroll(g)}setTimeout((function(){i.defaultPrevented||e.focus()}))}var m=e.hitTest(i),b=Ge;if(p||!e.activeEditor&&e._isInputElement(a)&&!t._hasRadioMap(i)&&!e._isNativeCheckbox(a)||c){switch(m.cellType){case b.Cell:if(p&&c||p||!e.activeEditor&&e._isInputElement(a)&&!t._hasRadioMap(i)&&!e._isNativeCheckbox(a)){var v=e.getMergedRange(m.panel,m.row,m.col,!1);e.select(null!=v?v:m.range,!1)}!i.defaultPrevented&&a instanceof HTMLElement&&"root"!=a.getAttribute("wj-part")&&a.focus();break;case b.ColumnHeader:case b.ColumnFooter:e.scrollIntoView(-1,m.col);break;case b.RowHeader:e.scrollIntoView(m.row,-1)}return!i.defaultPrevented&&(0,s.isIE)()&&m.cellType!=b.Cell&&e._isInputElement(a)&&a.focus(),t._isDown=!0,void(t._htDown=m)}if(e._isNativeCheckbox(a)&&(0,s.hasClass)(a,"wj-column-selector")&&(m.cellType===b.RowHeader||m.cellType===b.ColumnHeader))return;var y=document;o(y,"mousemove"),o(y,"mouseup"),n(y,"mousemove",r),n(y,"mouseup",l),t._isDown=!0,t._mousedown(i)}}));var r=function(e){t._mousemove(e)},l=function(e){t._isDown=!1,o(document,"mousemove"),o(document,"mouseup"),t._mouseup(e)};n(i,"mouseenter",(function(t){e._rcBounds=null})),n(i,"mousemove",this._hover.bind(this)),n(i,"dblclick",this._dblclick.bind(this)),n(i,"click",this._click.bind(this)),n(i,"selectstart",(function(t){e._isInputElement(t.target)||t.preventDefault()})),(0,s.isSafari)()&&n(i,"mousewheel",(function(t){t.defaultPrevented||!t.wheelDeltaY||t.ctrlKey||t.metaKey||(e._isScrollingByWheel=!0)})),n(i,"wheel",(function(i){if(!i.defaultPrevented&&i.deltaY&&!i.ctrlKey&&!i.metaKey){var n=e._root,o=i.deltaY;if((i.shiftKey?n.scrollWidth>n.clientWidth:n.scrollHeight>n.clientHeight)&&(0,s.closestClass)(i.target,oi)==e.hostElement){switch(i.deltaMode){case 1:o=e.rows.defaultSize*(o<0?-1:1);break;case 2:o=(i.shiftKey?n.clientWidth:n.clientHeight)*(o<0?-1:1);break;default:(0,s.isSafari)()&&(o=(0,s.clamp)(o,-150,150))}e._isScrollingByWheel=!0,(0,s.isEdge)()&&(s.Control.sharedState.InvalidScroll=!1),e.finishEditing(!1)&&(i.shiftKey?n.scrollLeft+=o:n.scrollTop+=o),clearTimeout(t.mouseWhellTimer),t.mouseWhellTimer=setTimeout((function(){e._isScrollingByWheel=!1}),1),i.preventDefault(),i.stopImmediatePropagation()}}})),n(i,"dragstart",this._dragstart.bind(this)),n(i,"dragover",this._dragover.bind(this)),n(i,"dragleave",this._dragleave.bind(this)),n(i,"drop",this._drop.bind(this)),n(i,"dragend",this._dragend.bind(this))}return e.prototype.resetMouseState=function(){var e=this._g,t=e.hostElement;this._updating&&(this._updating=!1,e.endUpdate()),this._dragSrc&&(0,s.removeClass)(this._dragSrc,ni),this._showDragMarker(null),t&&(t.style.cursor=""),(0,s.isSafari)()&&this._szRowCol&&e.invalidate(),e.removeEventListener(document,"mousemove"),e.removeEventListener(document,"mouseup"),this._eMouse=null,this._isDown=null,this._htDown=null,this._scrollbarStatusAtMouseDown=null,this._lbSelState=null,this._lbSelStateRows={},this._lbSel=null,this._szRowCol=null,this._szArgs=null,e._rcBounds=null,this._anchorCol=-1},e.prototype._mousedown=function(e){var t=this._g,i=e.target,n=t.hitTest(e),o=n.cellType,r=Ge,l=e.ctrlKey||e.metaKey;if(this._selDown=t.selection,this._selPanelType=t.activePanelType,this._ignoreClick=!1,null==n.panel&&null==t.cells||n.panel&&t.cells&&n.panel._uid==t.cells._uid){if((0,s.closestClass)(i,Ft._WJC_DROPDOWN)){var a=t.hitTest(i);return a.range&&this._selDown&&(!t.editRange||t.editRange.contains(n.row,n.col))||t.finishEditing(),t._ensureEditSelectionForParentGrid(),t._edtHdl._toggleListBox(e,a.range),e.preventDefault(),void(this._ignoreClick=!0)}var h=t.editRange;if(h&&h.contains(n.range))return void(s.Control.sharedState.InvalidScroll=(0,s.isEdge)())}var c=(0,s.getActiveElement)();if(i!=c||!t._isInputElement(i))if(o!=r.None){if(this._htDown=n,this._eMouse=e,this._anchorCol=n.col,this._scrollbarStatusAtMouseDown={row:t._hasScroll(t.rows),col:t._hasScroll(t.columns)},n.panel){var u={height:t._root.clientHeight,width:t._root.clientWidth},d={height:t.cells.hostElement.clientHeight,width:t.cells.hostElement.clientWidth};this._szInitial={row:n.getRow().renderHeight,col:n.getColumn().renderWidth,canHaveHScrl:u.width-t.rowHeaders.columns.getTotalSize()-d.width!=0,canHaveVScrl:u.height-t.columnHeaders.rows.getTotalSize()-d.height!=0}}else this._szInitial=null;if(null==this._szRowCol){var p=t.allowResizing,f=Xt;if((o==r.RowHeader||o==r.TopLeft)&&(n.edgeTop||n.edgeBottom)&&p&f.Rows&&this._getResizeRowHt(n))this._ignoreClick=!0;else if((o==r.ColumnHeader||o==r.TopLeft)&&(n.edgeLeft||n.edgeRight)&&p&f.Columns&&this._getResizeColHt(n))this._ignoreClick=!0;else{var _=t.allowDragging,g=Zt;switch(o){case r.Cell:case r.RowHeader:l&&t.selectionMode==Ue.ListBox&&(this._lbSelState=t.rows[n.row].isSelected,(0,s.closest)(i,"."+Ne.elemCollapse)&&(this._lbSelState=!1)),this._mouseSelect(e,e.shiftKey),o!=r.RowHeader||_&g.Rows||(e.preventDefault(),t.focus());break;case r.ColumnHeader:t.allowSorting||_&g.Columns||(0,s.closest)(i,"button")||this._mouseSelect(e,e.shiftKey)}}}else{var m=t._eFocus;c!=m&&(m.tabIndex=0,m.focus()),this._ignoreClick=!0,this._handleResizing(e)}}else t.finishEditing(),i!=t._root&&i!=t._fCt&&t._edtHdl._commitRowEdits()},e.prototype._mousemove=function(e){if(null==this._htDown&&(0,s.isEdge)()&&(s.Control.sharedState.InvalidScroll=!1),this._htDown&&!e.defaultPrevented){if(0==e.buttons&&this._eMouse&&e.timeStamp-this._eMouse.timeStamp>600)return void this.resetMouseState();if(this._eMouse=e,this._szRowCol)this._handleResizing(e);else{var t=this._g,i=t.allowDragging,n=Zt,o=Ge;switch(this._htDown.cellType){case o.Cell:this._mouseSelect(e,!0);break;case o.RowHeader:i&n.Rows||this._mouseSelect(e,!0);break;case o.ColumnHeader:i&n.Columns||t.allowSorting||this._mouseSelect(e,!0)}}}},e.prototype._mouseup=function(e){var t=this._g;if(!t.isTouching||!(this._dragSrc||e.target instanceof HTMLHtmlElement)){var i=t.hitTest(e),n=this._htDown;if(n&&!e.defaultPrevented&&(this._szArgs&&this._finishResizing(e,t._getRangesToResize(e,!1)),!this._szArgs&&(null==i.panel&&null==n.panel||i.panel&&n.panel&&i.panel._uid==n.panel._uid)&&i.row==n.row&&i.col==n.col)){var o=i.getColumn();if(o&&(!o._getFlag(at.HasTemplate)||o.cellTemplate)){var r=i.target;if(r!=n.target&&r instanceof HTMLElement){if(n.target instanceof HTMLInputElement){var s=i.point,l=n.point;Math.abs(s.x-l.x)+Math.abs(s.y-l.y)<10&&(r=r.querySelector("input")||r)}var a=document.createEvent("Event");for(var h in a.initEvent("click",!0,!0),e)/Key$|X$|Y$|^button|^(x|y|which)$/.test(h)&&(a[h]=e[h]);r.dispatchEvent(a)}}}this.resetMouseState()}},e.prototype._click=function(e){if(this._ignoreClick&&(this._ignoreClick=!1,e.preventDefault()),!e.defaultPrevented){var t=this._g,i=e.target,n=t.hitTest(i),o=(0,s.tryCast)(i,HTMLInputElement),r="input."+Ft._WJC_CHECKBOX;if(!o){var l=(0,s.closest)(i,"label");l&&(o=l.querySelector(r))}if(!o&&t.bigCheckboxes&&(o=i.querySelector(r)),t._isNativeCheckbox(o)){if(null==n.panel&&null==t.cells||n.panel&&t.cells&&n.panel._uid==t.cells._uid){var a=t.getCellData(n.row,n.col,!1);t.startEditing(!1,n.row,n.col,!1,e)?(t.activeEditor.checked=!a,t.finishEditing(),t.focus()):"boolean"!=typeof a&&null!=a||(o.checked=a)}return}if(this._hasRadioMap(e))return void this._handleClick(e);var h=e.ctrlKey||e.metaKey;if(t.rows.maxGroupLevel>-1&&(0,s.closestClass)(i,Ft._WJC_COLLAPSE)){var c=t.rows[n.row];if(null==n.panel&&null==t.cells||n.panel&&t.cells&&n.panel._uid==t.cells._uid&&c instanceof wt){if(!c.hasChildren)return;return h?t.collapseGroupsToLevel(c.isCollapsed?c.level+1:c.level):c.isCollapsed=!c.isCollapsed,void t.scrollIntoView(n.row,-1)}}if(!(h||e.shiftKey||t.activeEditor||t.activePanelType!==Ge.Cell||t._isInputElement(i))&&(null==n.panel&&null==t.cells||n.panel&&t.cells&&n.panel._uid==t.cells._uid)){var u=t._selHdl.selection,d=u.equals(this._selDown);if(!d&&t.cells){var p=this._selDown?t.getMergedRange(t.cells,this._selDown.row,this._selDown.col):null;if(p){var f=t.getMergedRange(t.cells,u.row,u.col);d=f&&f.equals(p)}}if(d&&this._selPanelType===Ge.Cell&&n.range.contains(u))return void t.startEditing(!0,null,null,!0,e)}this._handleClick(e)}},e.prototype._handleClick=function(e){var t=this._g,i=e.target,n=t.hitTest(i),o=e.ctrlKey||e.metaKey,r=n.panel;if(!e.defaultPrevented&&n.grid&&t&&n.grid._uid==t._uid){if(r&&t.cells&&r._uid==t.cells._uid&&this._hasRadioMap(e)){var l=t._getBindingColumn(n.panel,n.row,n.getColumn()),a=(0,s.closest)(i,"label"),h=a&&a.querySelector("input"),c=h&&parseInt(h.getAttribute("data-idx")),u=n.getColumn().dataMap||l&&l.dataMap||n.getRow().dataMap,d=void 0;return null!=c&&(d=u._cv.items[c][u.selectedValuePath]),void(h&&!h.disabled&&t.startEditing(!1,n.row,n.col,!1,e)&&t.finishEditing()&&(t._edtHdl._edtCanceled?e.preventDefault():t.cells.setCellData(n.row,n.col,void 0!==d?d:a.textContent,!0,t.refreshOnEdit,void 0!==d)))}if(!t._isInputElement(i)){if(r&&t.topLeftCells&&r._uid==t.topLeftCells._uid){var p=Ue;switch(t.selectionMode){case p.None:case p.Cell:break;default:t.selectAll()}return}if(r&&t.columnHeaders&&r._uid==t.columnHeaders._uid){if(t.allowPinning&&(0,s.closestClass)(i,Ft._WJC_PIN))this._clickPin(e,n);else if(!t._isTransposed()&&(0,s.closestClass)(e.target,Ft._WJC_COLLAPSE)){if(b=t._getColumnGroup(n.row,n.col))if(o)for(var f=b.isCollapsed,_=b.level,g=[],m=0;m<t.columns.length;m++)(b=t._getColumnGroup(n.row,m))&&b.collapseTo&&b.level==_&&g.indexOf(b)<0&&(g.push(b),b.isCollapsed=!f);else b.isCollapsed=!b.isCollapsed;t.scrollIntoView(-1,n.col)}else i instanceof HTMLSpanElement&&i.parentElement instanceof HTMLLabelElement&&(i=i.parentElement.querySelector("input")),i instanceof HTMLInputElement||this._clickSort(e,n),t.focus(),t.scrollIntoView(-1,n.col);return}if(r&&t.rowHeaders&&r._uid==t.rowHeaders._uid){var b;if(t._isTransposed()&&(0,s.closestClass)(e.target,Ft._WJC_COLLAPSE))if(b=t._getColumnGroup(n.row,n.col))if(o){f=b.isCollapsed,_=b.level,g=[];for(var v=0;v<t.rows.length;v++)(b=t._getColumnGroup(v,n.col))&&b.collapseTo&&b.level==_&&g.indexOf(b)<0&&(g.push(b),b.isCollapsed=!f)}else b.isCollapsed=!b.isCollapsed;return}if(r&&t.cells&&r._uid==t.cells._uid){if(n.row<0)return void this._clickSort(e,n);if((0,s.closestClass)(i,Ft._WJC_COLLAPSE)){var y=t.rows[n.row];return void(y instanceof wt&&(o?t.collapseGroupsToLevel(y.isCollapsed?y.level+1:y.level):y.isCollapsed=!y.isCollapsed))}(0,s.closestClass)(i,Ft._WJC_DROPDOWN)&&t._edtHdl._toggleListBox(e,n.range)}}}},e.prototype._hasRadioMap=function(e){var t=e.target;if((0,s.closest)(t,"label")){var i=(0,s.closestClass)(t,Ft._WJC_RADIOMAP);return(0,s.closestClass)(i,oi)==this._g.hostElement}return!1},e.prototype._clickSort=function(e,t){var i=e.ctrlKey||e.metaKey,n=e.shiftKey;At(this._g,t.panel,t.col,t.row,e,i,n)},e.prototype._clickPin=function(e,t){Pt(this._g,t.col,t.row,!0,e.shiftKey)},e.prototype._dblclick=function(e){if(!e.defaultPrevented){var t,i=this._g,n=i.hitTest(e),o=e.ctrlKey||e.metaKey,r=n.range,s=n.cellType,l=Ge,a=i.allowResizing,h=Xt,c=n._inRightFrozenArea&&i._hasScroll(i.columns),u=i._getRangesToResize(e,!0);if(u||(u=[i.selection]),(n.edgeRight&&!c||n.edgeLeft&&c)&&a&h.Columns){if(s==l.TopLeft)n.panel.columns[n.col].allowResizing&&(t=new $e(n.panel,new qe(-1,n.col)),i.onAutoSizingColumn(t)&&i.onResizingColumn(t)&&(this._ignoreClick=!0,i.autoSizeColumn(n.col,!0),i.onAutoSizedColumn(t),i.onResizedColumn(t),e.preventDefault()));else if(s==l.ColumnHeader||4&a){s==l.ColumnHeader&&(o||i._canResizeAllCellsWithoutCtrl())||(u=[r]);for(var d=0;d<u.length;d++)for(var p=u[d],f=s==l.RowHeader||s==l.BottomLeft,_=p.leftCol;_<=p.rightCol;_++)n.panel.columns[_].allowResizing&&(t=new $e(n.panel,new qe(-1,_)),i.onAutoSizingColumn(t)&&i.onResizingColumn(t)&&(this._ignoreClick=!0,i.autoSizeColumn(_,f),i.onResizedColumn(t),i.onAutoSizedColumn(t),e.preventDefault()))}this.resetMouseState()}else{var g=n._inBottomFrozenArea&&i._hasScroll(i.rows);if((n.edgeBottom&&!g||n.edgeTop&&g)&&a&h.Rows){if(s==l.TopLeft||s==l.BottomLeft)n.getRow().allowResizing&&(f=s==l.TopLeft||null,t=new $e(n.panel,new qe(n.row,-1)),i.onAutoSizingRow(t)&&i.onResizingRow(t)&&(this._ignoreClick=!0,i.autoSizeRow(n.row,f),i.onResizedRow(t),i.onAutoSizedRow(t),e.preventDefault()));else if(s==l.RowHeader||4&a){var m=n.panel;for(f=m==i.columnHeaders||m==i.columnFooters&&null,(o||i._canResizeAllCellsWithoutCtrl())&&m&&i.cells||(u=[r]),d=0;d<u.length;d++)for(var b=u[d],v=b.topRow;v<=b.bottomRow;v++)m.rows[v].allowResizing&&(t=new $e(m,new qe(v,-1)),i.onAutoSizingRow(t)&&i.onResizingRow(t)&&(this._ignoreClick=!0,i.autoSizeRow(v,f),i.onResizedRow(t),i.onAutoSizedRow(t),e.preventDefault()))}this.resetMouseState()}}}},e.prototype._hover=function(e){if(!this._isDown){var t=this._g,i=t.hitTest(e),n="";return this._szRowCol=this._getResizeColHt(i)||this._getResizeRowHt(i),this._szRowCol instanceof vt?(n="col-resize",this._wasAllRowColHidden=0===t.columns.visibleLength):this._szRowCol instanceof yt&&(n="row-resize",this._wasAllRowColHidden=0===t.rows.visibleLength),this._szStart=this._szRowCol?this._szRowCol.renderSize:0,t.hostElement.style.cursor=n,i}return null},e.prototype._getResizeColHt=function(e){var t,i=this._g,n=i.allowResizing,o=e.cellType,r=Ge;return n&Xt.Columns&&(o==r.ColumnHeader||o==r.TopLeft||4&n)&&(e._inRightFrozenArea&&i._hasScroll(i.columns)?(e.edgeLeft&&(t=e.getColumn()),e.edgeFarLeft&&(t=this._getResizeCol(e.panel,e.col,!0)||e.getColumn()),e.edgeRight&&(t=this._getResizeCol(e.panel,e.col)||t)):(e.edgeRight&&(t=e.getColumn()),e.edgeFarRight&&(t=this._getResizeCol(e.panel,e.col)||e.getColumn()),e.edgeLeft&&(t=this._getResizeCol(e.panel,e.col,!0)||t))),t&&t.allowResizing?t:null},e.prototype._getDvMarker=function(){return this._dvMarker||(this._dvMarker=(0,s.createElement)('<div class="'+Ne.marker+'">&nbsp;</div>')),this._dvMarker},e.prototype._getResizeRowHt=function(e){var t,i=this._g,n=i.allowResizing,o=Xt,r=e.cellType,s=Ge;return n&o.Rows&&(r==s.RowHeader||r==s.TopLeft||4&n)&&(e._inBottomFrozenArea&&i._hasScroll(i.rows)?(e.edgeTop&&(t=e.getRow()),e.edgeFarTop&&(t=this._getResizeRow(e.panel,e.row,!0)||e.getRow()),e.edgeBottom&&(t=this._getResizeRow(e.panel,e.row)||t)):(e.edgeBottom&&(t=e.getRow()),e.edgeFarBottom&&(t=this._getResizeRow(e.panel,e.row)||e.getRow()),e.edgeTop&&(t=this._getResizeRow(e.panel,e.row,!0)||t))),t&&t.allowResizing?t:null},e.prototype._getResizeCol=function(e,t,i){void 0===i&&(i=!1);var n=this._g,o=e.columns;if(i){for(var r=t-1;r>=0;r--)if((s=o[r]).isVisible)return this._asResizable(s);if(o==n.columns&&0!=(n.headersVisibility&pt.Row))for(r=(o=n.rowHeaders.columns).length-1;r>=0;r--)if((s=o[r]).isVisible)return this._asResizable(s);return null}for(r=t+1;r<o.length;r++)if((s=o[r]).isVisible)return this._asResizable(s);if(t==o.length-1&&o==n.rowHeaders.columns)for(o=n.columns,r=0;r<o.length;r++){var s;if((s=o[r]).isVisible)return this._asResizable(s)}return null},e.prototype._getResizeRow=function(e,t,i){void 0===i&&(i=!1);var n=this._g,o=e.rows;if(i){for(var r=t-1;r>=0;r--)if((s=o[r]).isVisible)return this._asResizable(s);if(o==n.rows&&0!=(n.headersVisibility&pt.Column))for(r=(o=n.columnHeaders.rows).length-1;r>=0;r--)if((s=o[r]).isVisible)return this._asResizable(s);return null}for(r=t+1;r<o.length;r++)if((s=o[r]).isVisible)return this._asResizable(s);if(t==o.length-1&&o==n.columnHeaders.rows)for(o=n.rows,r=0;r<o.length;r++){var s;if((s=o[r]).isVisible)return this._asResizable(s)}return null},e.prototype._asResizable=function(e){return 0==e.renderSize&&e.allowResizing?e:null},e.prototype._mouseSelect=function(e,t){var i=this,n=this._g;if(e&&this._htDown&&this._htDown.panel&&n.selectionMode!=Ue.None){var o=new ti(this._htDown.panel,e);this._handleSelection(o,t),!(0,s.isIE9)()&&e.button>=0&&e.target!=n._root&&((o=new ti(n,e)).panel||setTimeout((function(){i._isDown&&i._eMouse&&i._mouseSelect(i._eMouse,t)}),100))}},e.prototype._handleResizing=function(t){"mousedown"==t.type&&((0,s.isSafari)()?(0,s.setAttribute)(t.target,"draggable",null):t.preventDefault());var i=this._szRowCol,n=this._g,o=this._g.controlRect,r=n._szClientSB.width-n._szClient.width+Rt._RESIZE_SCRL_GAP,l=n._szClientSB.height-n._szClient.height+Rt._RESIZE_SCRL_GAP;if(i instanceof vt){var a=this._scrollbarStatusAtMouseDown?this._scrollbarStatusAtMouseDown.col:n._hasScroll(n.columns),h=(0,s.mouseToPage)(t).x,c=n.columns._frozenInternal&&n.columns._frozenInternal<0&&n.columns.isFrozen(i.index),u=Math.round(Math.max(e._SZ_MIN,this._szStart+(h-this._htDown.point.x)*(c&&a?-1:1)*(n.rightToLeft?-1:1))),d=(v=Math.round(o.left))+o.width;n.rightToLeft?v+=r:d-=r;var p=n.columns._frozenInternal<0&&n.columns.isFrozen(i.index),f=n.rightToLeft?-1:1;f=p?-f:f;var _=Math.abs(i.renderWidth-(this._szInitial?this._szInitial.col:0));if(n.columns.isFrozen(i.index)||!(8&n.allowResizing))if(h>d&&(!this._szInitial||this._szInitial.canHaveHScrl)){var g=Math.abs(Math.abs(this._htDown.point.x-d)-_)*f;u=Math.max(i.renderWidth+g,0)}else h<v&&(g=Math.abs(Math.abs(v-this._htDown.point.x)-_)*f,u=Math.max(i.renderWidth-g,0));if(i.renderSize!=u){if(null==this._szArgs){var m=n.rowHeaders.columns.indexOf(i)>-1?n.rowHeaders:n.cells;this._szArgs=new $e(m,new qe(-1,i.index))}this._szArgs.data={newSize:u,isPrimaryDragged:!0},this._szArgs.cancel=!1,n.onResizingColumn(this._szArgs)&&(this._szArgs.data.maxSize&&(u=this._szArgs.data.maxSize),n.deferResizing?this._showResizeMarker(u):i.width=u)}}var b=this._szRowCol;if(b instanceof yt){a=this._scrollbarStatusAtMouseDown?this._scrollbarStatusAtMouseDown.row:n._hasScroll(n.rows);var v,y=(0,s.mouseToPage)(t).y,w=n.rows._frozenInternal&&n.rows._frozenInternal<0&&n.rows.isFrozen(b.index);if(u=Math.round(Math.max(e._SZ_MIN,this._szStart+(y-this._htDown.point.y)*(w&&a?-1:1))),d=(v=Math.round(o.top))+o.height-l-n.columnFooters.rows.getTotalSize(),f=n.rows._frozenInternal<0&&n.rows.isFrozen(b.index)?-1:1,_=Math.abs(b.renderHeight-(this._szInitial?this._szInitial.row:0)),n.rows.isFrozen(b.index)||!(8&n.allowResizing))if(y>d&&(!this._szInitial||this._szInitial.canHaveVScrl)){var C=Math.abs(Math.abs(this._htDown.point.y-d)-_)*f;u=Math.max(b.renderHeight+C,0)}else y<v&&(C=Math.abs(Math.abs(v-this._htDown.point.y)-_)*f,u=Math.max(b.renderHeight-C,0));b.renderSize!=u&&(null==this._szArgs&&(m=n.columnHeaders.rows.indexOf(b)>-1?n.columnHeaders:n.columnFooters.rows.indexOf(b)>-1?n.columnFooters:n.cells,this._szArgs=new $e(m,new qe(b.index,-1))),this._szArgs.data={newSize:u,isPrimaryDragged:!0},this._szArgs.cancel=!1,n.onResizingRow(this._szArgs)&&(this._szArgs.data.maxSize&&(u=this._szArgs.data.maxSize),n.deferResizing?this._showResizeMarker(u):b.height=u))}this._szArgs&&t.preventDefault()},e.prototype._dragstart=function(e){var t=this._g,i=this._htDown,n=Zt,o=Ge;if(i){if(this._dragSrc=null,this._htDrag=null,this._chldColGrpMarker=!1,!this._szRowCol){var r=new $e(i.panel,i.range),l=t.allowDragging,a=i.cellType,h=i.panel.rows,c=i.getColumn(!0);if(c&&c.allowDragging&&(a==o.ColumnHeader||a==o.TopLeft)&&l&n.Columns&&(t.onDraggingColumn(r)?this._dragSrc=e.target:e.preventDefault()),!this._dragSrc&&i.row>-1&&h[i.row].allowDragging){var u=h[i.row];u instanceof wt||u instanceof kt||a==o.RowHeader&&l&n.Rows&&(t.onDraggingRow(r)?this._dragSrc=e.target:e.preventDefault())}}this._dragSrc&&e.dataTransfer&&!e.defaultPrevented&&(this._htDrag=i,(0,s._startDrag)(e.dataTransfer,"move"),e.stopPropagation(),(0,s.addClass)(this._dragSrc,ni),t.beginUpdate(),this._updating=!0)}},e.prototype._dragend=function(e){this._dragSrc=null,this._htDrag=null,this.resetMouseState()},e.prototype._dragover=function(e){var t=this._g,i=this._hitTest(e),n=this._dragSrc?this._htDrag:null,o=Ge,r=!1;if(this._htDown&&(i.row>this._htDown.row?this.isDetailRow(i.row+1)&&(i._row+=1):i.row<this._htDown.row&&this.isDetailRow(i.row)&&(i._row-=1)),n&&i.cellType==n.cellType){var l=new $e(i.panel,i.range,n);i.cellType==o.ColumnHeader&&t._hasColumnGroups()?(l.cancel=!t._canMoveColumnGroup(n.row,n.col,i.row,i.col),r=t.onDraggingColumnOver(l)):i.cellType==o.ColumnHeader?(l.cancel=!t.columns.canMoveElement(n.col,i.col),r=t.onDraggingColumnOver(l)):i.cellType==o.RowHeader?(l.cancel=!t.rows.canMoveElement(n.row,i.row),r=t.onDraggingRowOver(l)):i.cellType==o.TopLeft&&(l.cancel=!t.topLeftCells.columns.canMoveElement(n.col,i.col),r=t.onDraggingColumnOver(l))}if(r?(e.dataTransfer.dropEffect="move",e.preventDefault(),e.stopPropagation(),this._showDragMarker(i)):this._showDragMarker(null),n&&t.autoScroll){var a=t.controlRect,h=t.scrollPosition,c=s.Control._DRAG_SCROLL_EDGE,u=s.Control._DRAG_SCROLL_STEP;n.panel==t.columnHeaders?(e.pageX-a.left<c&&(h.x+=u),a.right-e.pageX<c&&(h.x-=u)):n.panel==t.rowHeaders&&(e.pageY-a.top<c&&(h.y+=u),a.bottom-e.pageY<c&&(h.y-=u)),h.equals(t._ptScrl)||(t.scrollPosition=h,t._rcBounds=null)}},e.prototype._dragleave=function(e){this._showDragMarker(null)},e.prototype._drop=function(e){var t=this._g,i=this._hitTest(e),n=this._dragSrc?this._htDrag:null,o=Ge;if(n&&i.cellType==n.cellType){var r=t.selection,s=new $e(i.panel,i.range,n);if(i.cellType==o.ColumnHeader&&t._hasColumnGroups()){var l=t._getColumnGroup(n.row,n.col).columns.length,a=l>0?l:1,h=t.columns._frozenInternal;t._moveColumnGroup(n.row,n.col,i.row,i.col,this._chldColGrpMarker),h>=0?n.col<h&&i.col>=h?t.columns._frozenInternal-=a:n.col>=h&&i.col<h&&(t.columns._frozenInternal+=a):n.col<t.columns.length+h&&i.col>=t.columns.length+h?t.columns._frozenInternal-=a:n.col>=t.columns.length+h&&i.col<t.columns.length+h&&(t.columns._frozenInternal+=a),t.activePanelType===Ge.ColumnHeader||t.activePanelType===Ge.TopLeft?t.select(r.row,i.col,t.columnHeaders):t.select(r.row,i.col),t.onDraggedColumn(s)}else if(i.cellType==o.ColumnHeader)t.columns.moveElement(n.col,i.col),t.activePanelType===Ge.ColumnHeader||t.activePanelType===Ge.TopLeft?t.select(r.row,i.col,t.columnHeaders):t.select(r.row,i.col),t.onDraggedColumn(s);else if(i.cellType==o.RowHeader){var c=i.row;i.row>this._htDown.row&&this.isDetailRow(i.row+1)?c+=1:i.row<this._htDown.row&&this.isDetailRow(i.row)&&(c-=1),this.isDetailRow(n.row)?this.moveDetailRow(n.row-1,c):this.isDetailRow(n.row+1)?this.moveDetailRow(n.row,c):t.rows.moveElement(n.row,c),t.select(i.row,r.col),t.onDraggedRow(s)}else i.cellType==o.TopLeft&&(t.topLeftCells.columns.moveElement(n.col,i.col),t.onDraggedColumn(s))}this.resetMouseState()},e.prototype._hitTest=function(e){var t=this._g;return t._rcBounds=null,t.hitTest(e)},e.prototype._showResizeMarker=function(e){var t,i=this._g,n=i._ptScrl,o=this._szArgs.panel.cellType,r=Ge,l=this._getDvMarker(),a=i.cells.hostElement;l.parentElement!=a&&a.appendChild(l),this._szRowCol instanceof vt?(t={left:this._szRowCol.pos+e-1,top:-1e3,right:"",bottom:0,width:3,height:""},o!=r.TopLeft&&o!=r.RowHeader||(t.left-=i._eTL.offsetWidth+n.x),o==r.Cell&&i.columns._frozenInternal>0&&i.columns.isFrozen(this._szRowCol.index)&&(t.left-=n.x),o==r.Cell&&i.columns._frozenInternal<0&&i.columns.isFrozen(this._szRowCol.index)&&(t.left=Math.min(this._szRowCol.pos,this._g._szClient.width+this._szRowCol._antipos)-e+this._szRowCol.renderWidth+1),i.rightToLeft&&(t.left=a.clientWidth-t.left-t.width)):this._szRowCol instanceof yt&&(t={left:-1e3,top:this._szRowCol.pos+e-1,right:0,bottom:"",width:"",height:3},o!=r.TopLeft&&o!=r.ColumnHeader||(t.top-=i._eTL.offsetHeight+n.y),o==r.Cell&&i.rows._frozenInternal>0&&i.rows.isFrozen(this._szRowCol.index)&&(t.top-=n.y),o==r.Cell&&i.rows._frozenInternal<0&&i.rows.isFrozen(this._szRowCol.index)&&(t.top=Math.min(this._szRowCol.pos,this._g._szClient.height+this._szRowCol._antipos)-e+this._szRowCol.renderHeight+1)),(0,s.setCss)(l,t)},e.prototype._showDragMarker=function(t){var i=this._getDvMarker();if(t&&t.panel){if(!t.range.equals(this._rngTarget)){this._rngTarget=t.range;var n=t.panel.hostElement;i.parentElement!=n&&n.appendChild(i);var o=this._g,r=o._ptScrl,l=Ge,a={left:0,top:0,width:6,height:6,right:"",bottom:""};switch(t.cellType){case l.ColumnHeader:var h=o._getColumnGroup(t.row,t.col);if(h){var c=h._rng,u=t.panel.rows,d=t.panel.columns;if(h.isEmpty&&null===h.binding){var p=u[c.bottomRow],f=d[c.leftCol],_=o.rightToLeft,g=_?i.parentElement.clientWidth-t.point.x:t.point.x,m=Math.max(f.renderWidth/5,e._SZ_MAX_COLGRP_EDGE),b=f.pos+m,v=f.pos+f.renderWidth-m,y=this._htDown&&t.col>this._htDown.col;if(!y&&g>b||y&&g<v){a.top=p.pos-a.height/2+p.renderHeight,a.left=_?i.parentElement.clientWidth-f.pos-f.renderWidth:f.pos,a.width=f.renderWidth,this._chldColGrpMarker=!0;break}}this._chldColGrpMarker=!1,a.top=0,a.height=0;for(var w=0;w<c.topRow;w++)a.top+=u[w].renderHeight;for(w=c.topRow;w<=c.bottomRow;w++)a.height+=u[w].renderHeight;if(a.left=0,this._htDown&&t.col>this._htDown.col){var C=d[c.rightCol];a.left=C.pos-a.width/2+C.renderWidth}else{var x=d[c.leftCol];a.left=x.pos-a.width/2}o.rightToLeft&&(a.left=i.parentElement.clientWidth-a.left-a.width);break}case l.TopLeft:case l.ColumnHeader:var E=t.panel.columns[t.col],S=o.columns._frozenInternal<0&&o.columns.isFrozen(t.col)?Math.min(E.pos,o._szClient.width+E._antipos):E.pos;a.left=S-a.width/2,a.height=t.panel.height,this._htDown&&t.col>this._htDown.col&&(a.left+=E.renderWidth),t.cellType==l.ColumnHeader&&o.columns.isFrozen(t.col)&&(a.left-=r.x),o.rightToLeft&&(a.left=i.parentElement.clientWidth-a.left-a.width);break;case l.RowHeader:var I=t.getRow(),D=o.rows._frozenInternal<0&&o.rows.isFrozen(t.row)?Math.min(I.pos,o._szClient.height+I._antipos):I.pos;a.top=D-a.height/2,a.width=t.panel.width,t.row>this._htDown.row&&(a.top+=I.renderHeight),o.rows.isFrozen(t.row)&&(a.top-=r.y)}(0,s.setCss)(i,a)}}else(0,s.removeChild)(i),this._rngTarget=null},e.prototype._finishResizing=function(t,i){var n=this._g,o=n.selection,r=this._szArgs,l=this._eMouse,a=l&&(l.ctrlKey||l.metaKey),h=Ge,c=this._wasAllRowColHidden&&this._htDown.cellType===h.TopLeft&&r.panel.cellType===h.Cell;if(r&&(!r.cancel||r.data&&r.data.internalCancel)){var u=r.data||{};i||(i=[n.selection]);var d=this._g.controlRect,p=n._szClientSB.width-n._szClient.width+Rt._RESIZE_SCRL_GAP,f=n._szClientSB.height-n._szClient.height+Rt._RESIZE_SCRL_GAP,_=(0,s.mouseToPage)(t),g=Math.round(d.left),m=g+d.width;n.rightToLeft?g+=p:m-=p;var b=Math.round(d.top),v=b+d.height-f-n.columnFooters.rows.getTotalSize(),y=_.y>=b&&_.y<v,w=_.x>=g&&_.x<m;if(r.col>-1&&this._szRowCol instanceof vt){var C=this._scrollbarStatusAtMouseDown?this._scrollbarStatusAtMouseDown.col:n._hasScroll(n.columns),x=r.col,E=(0,s.mouseToPage)(t).x,S=this._szRowCol,I=n.columns._frozenInternal&&n.columns._frozenInternal<0&&n.columns.isFrozen(S.index),D=Math.round(Math.max(e._SZ_MIN,this._szStart+(E-this._htDown.point.x)*(I&&C?-1:1)*(this._g.rightToLeft?-1:1)));if(this._htDown.cellType,h.TopLeft,w)r.panel.columns[x].width=Math.round(D);else if(n.deferResizing){var R=n.columns._frozenInternal<0&&n.columns.isFrozen(x),T=n.rightToLeft?-1:1;if(T=R?-T:T,n.columns.isFrozen(S.index)||!(8&n.allowResizing))if(_.x>m){var P=Math.abs(this._htDown.point.x-m)*T;D=Math.max(r.panel.columns[x].renderWidth+P,0)}else _.x<g&&(P=Math.abs(g-this._htDown.point.x)*T,D=Math.max(r.panel.columns[x].renderWidth-P,0));r.panel.columns[x].width=Math.round(D)}n.onResizedColumn(r);for(var M=0;M<i.length;M++)if(o=i[M],(a||n._canResizeAllCellsWithoutCtrl())&&(this._htDown.cellType==h.ColumnHeader||c)){for(var A=n.columns[x].size,H=o.leftCol;H<=o.rightCol;H++)n.columns[H].allowResizing&&H!=x&&((r=new $e(n.cells,new qe(-1,H))).data=ke({},u,{isPrimaryDragged:!1}),n.onResizingColumn(r)&&(n.columns[H].size=A,n.onResizedColumn(r)));n.columns.isFrozen(x)&&(n.columns[x].size=A)}t.preventDefault()}if(r.row>-1&&this._szRowCol instanceof yt){C=this._scrollbarStatusAtMouseDown?this._scrollbarStatusAtMouseDown.row:n._hasScroll(n.rows);var z=r.row,k=(0,s.mouseToPage)(t).y,O=this._szRowCol,L=n.rows._frozenInternal&&n.rows._frozenInternal<0&&n.rows.isFrozen(O.index);if(D=Math.round(Math.max(e._SZ_MIN,this._szStart+(k-this._htDown.point.y)*(L&&C?-1:1))),this._htDown.cellType,h.TopLeft,y)r.getRow().height=Math.round(D),"setHeights"in n&&(B=n).setHeights(Array.from(B.rows).map((function(e){return e.height})));else if(n.deferResizing){if(T=n.rows._frozenInternal<0&&n.rows.isFrozen(r.row)?-1:1,n.rows.isFrozen(O.index)||!(8&n.allowResizing))if(_.y>v){var F=Math.abs(this._htDown.point.y-v)*T;D=Math.max(r.getRow().renderHeight+F-n.columnFooters.rows.getTotalSize(),0)}else _.y<b&&(F=Math.abs(g-this._htDown.point.y)*T,D=Math.max(r.getRow().renderHeight-F-n.columnFooters.rows.getTotalSize(),0));var B;if(r.getRow().height=Math.round(D),"setHeights"in n)(B=n).setHeights(Array.from(B.rows).map((function(e){return e.height})))}for(n.onResizedRow(r),M=0;M<i.length;M++)if(o=i[M],(a||n._canResizeAllCellsWithoutCtrl())&&(this._htDown.cellType==h.RowHeader||c)){for(var V=n.rows[z].size,j=o.topRow;j<=o.bottomRow;j++)n.rows[j].allowResizing&&j!=z&&((r=new $e(n.cells,new qe(j,-1))).data=ke({},u,{isPrimaryDragged:!1}),n.onResizingRow(r)&&(n.rows[j].size=V,n.rows[j].resizedManually=!0,n.onResizedRow(r)));n.rows.isFrozen(z)&&(n.rows[z].size=V)}r.panel.rows[z].resizedManually=!0,t.preventDefault()}}},e.prototype._limitSizeByFrozen=function(e,t,i){void 0===i&&(i=5);var n=this._g;if(e instanceof vt){var o=n.columns._frozenInternal>0?n.columns.slice(0,n.columns._frozenInternal).reduce((function(e,t){return e+t.renderSize}),0):n.columns.slice(n.columns.length+n.columns._frozenInternal,n.columns.length).reduce((function(e,t){return e+t.renderSize}),0),r=o-e.renderSize+t,s=!n._hasScroll(n.columns)&&n.columns._frozenInternal<0?n._szClient.width-i-n.columns.lastFrozen.pos:n._szClient.width-i;r>=s&&(t=s-o+e.renderSize)}else if(e instanceof yt){var l=n.rows._frozenInternal>0?n.rows.slice(0,n.rows._frozenInternal).reduce((function(e,t){return e+t.renderSize}),0):n.rows.slice(n.rows.length+n.rows._frozenInternal,n.rows.length).reduce((function(e,t){return e+t.renderSize}),0),a=l-e.renderSize+t,h=!n._hasScroll(n.rows)&&n.rows._frozenInternal<0?n._szClient.height-i-n.rows.lastFrozen.pos:n._szClient.height-i;a>=h&&(t=h-l+e.renderSize)}return t},e.prototype._handleSelection=function(e,t){var i=this._g,n=i._selHdl.selection,o=new qe(e.row,e.col),r=Ge,l=Ue,a=null,h=this._eMouse&&(this._eMouse.ctrlKey||this._eMouse.metaKey),c=!1,u=e.col>=this._anchorCol;if(o.isValid)if(null==this._lbSelState){switch(e.cellType!=r.ColumnHeader&&i._clearAnchorCell(),e.cellType){case r.RowHeader:o.col=0,o.col2=i.columns.length-1;break;case r.ColumnHeader:switch(i.selectionMode){case l.Row:case l.Cell:o.row=o.row2=n.row,t=!1;break;default:o.row=0,o.row2=i.rows.length-1,null!=(a=i._getColumnGroup(e.row,e.col))&&(i.anchorCursor?(a._rng.col<=this._anchorCol&&this._anchorCol<=a._rng.col2&&(this._anchorCol=a._rng.col2),i._setAnchorCell(0,this._anchorCol)):a._rng.col<this._anchorCol&&this._anchorCol<=a._rng.col2&&(this._anchorCol=a._rng.col),u?(o.col=a._rng.col2,o.col2=a._rng.col):(o.col=a._rng.col,o.col2=a._rng.col2,n.col2<o.col2&&(n.col2=o.col2)))}}if(t&&(e.cellType==r.ColumnHeader?(i.anchorCursor?null==i._getAnchorCell()&&i.selectionMode!=Ue.Row&&i.selectionMode!=Ue.Cell&&i._setAnchorCell(n.row,n.col):i._clearAnchorCell(),o.row2=n.row2,!u&&n.col>n.col2?o.col2=n.col:o.col2=n.col2,null!=a&&u&&o.col2>a._rng.col&&(o.col2=a._rng.col)):i.anchorCursor?(o.row=n.row,o.col=n.col):(o.row2=n.row2,o.col2=n.col2),!o.isValid)){var d=this._htDown;d&&(o=new qe(d.row,d.col))}if((0,s.closestClass)(this._eMouse.target,Ft._WJC_COLLAPSE)&&(h=!1,c=!0),i.selectionMode==Ue.MultiRange){var p=i._selHdl,f=p.selection,_=p.extendedSelection,g=e.panel!=i.cells,m=p.cellRangeEventArgs;if(h){if(!t&&p._deselectRange(o)){if(p.selection.isValid&&(o=null),i._getProductInfo().indexOf("MultiRow")>-1){var b=[];for(D=0;D<_.length;D++)f.contains(_[D])&&b.push(D),m&&m.range.contains(_[D])&&!b.includes(D)&&b.push(D);if(b.length>0){for(var v=b.length-1;v>=0;v--)_.splice(b[v],1);b=[]}}}else if(f.isValid&&(g||!f.intersects(o)))if(i._getProductInfo().indexOf("MultiRow")>-1){var y=!1;for(b=[],f=p.selection.clone(),D=0;D<_.length&&!y;D++)_[D].equals(f)&&(y=!0),f.contains(_[D])&&b.push(D),m&&m.range.contains(_[D])&&!b.includes(D)&&b.push(D);if(b.length>0){for(v=b.length-1;v>=0;v--)_.splice(b[v],1);b=[]}y||_.push(f)}else{var w=p.selection;(g?this._splitRange(w):[w.clone()]).forEach((function(e){for(var t=!1,i=0;i<_.length&&!t;i++)_[i].equals(e)&&(t=!0);t||_.push(e)}))}}else _.clear()}if(o){if(i.select(o,!1),!c)switch(e.cellType){case r.RowHeader:i.scrollIntoView(e.row,-1);break;case r.ColumnHeader:i.scrollIntoView(-1,e.col);break;default:i.scrollIntoView(e.row,e.col)}}else{var C=new $e(i.cells,new qe(e.row,e.col));i.onSelectionChanging(C),i.onSelectionChanged(C),i.invalidate()}}else{var x=this._htDown.row,E=e.row,S=this._lbSel;x>E&&(E=x,x=e.row);var I=this._lbSelStateRows||{};if(this._lbSel)for(var D=S.row;D<=S.row2;D++)(D<x||D>E)&&(i.rows[D].isSelected=I[D]);for(D=x;D<=E;D++)I.hasOwnProperty(D)||(I[D]=i.rows[D].isSelected),i.rows[D].isSelected=!this._lbSelState;this._lbSel=new qe(x,0,E,0),i.scrollIntoView(e.row,e.col)}},e.prototype._splitRange=function(e){var t=this._g,i=t.columns.length,n=t.rows.length,o=[];if(e.columnSpan==i)for(var r=e.topRow;r<=e.bottomRow;r++)o.push(new qe(r,0,r,i-1));else if(e.rowSpan==n)for(var s=e.leftCol;s<=e.rightCol;s++)o.push(new qe(0,s,n-1,s));else o.push(e.clone());return o},e.prototype.isDetailRow=function(e){var t=this._g.rows[e];return!!t&&"DetailRow"===t.constructor.name},e.prototype.moveDetailRow=function(e,t){var i=this._g,n=i.rows[e],o=i.rows[e+1];e>t?(i.rows.splice(e,2),i.rows.splice(t,0,n,o)):e<t&&(i.rows.splice(e,2),i.rows.splice(t-1,0,n,o))},e.prototype.dispose=function(){this.mouseWhellTimer&&(clearTimeout(this.mouseWhellTimer),this.mouseWhellTimer=null),this._dvMarker&&this._dvMarker.parentNode&&(0,s.removeChild)(this._dvMarker),this._dvMarker=null,this._g=null,this._htDown=null,this._szRowCol=null,this._selDown=null},e._SZ_MIN=0,e._SZ_MAX_COLGRP_EDGE=50,e}(),si=function(){function e(){this._oldNoDataHeight=0}return e.prototype.updateNoDataContent=function(e,t){t.innerHTML=e.noDataOverlayContent},e.prototype.updateNoDataOverlay=function(e,t){var i=e.headersVisibility&pt.Column?e.columnHeaders.rows.getTotalSize():0,n=!(e.rows.length||!e.noDataOverlayContent);return(0,s.setCss)(t,{display:n?"flex":"none",position:"absolute",alignItems:"center",justifyContent:"center",top:i+"px",width:"100%",height:"calc(100% - "+i+"px)",minHeight:4*e.rows.defaultSize+"px",overflow:"auto"}),(0,s.setAttribute)(t,"aria-hidden","true"),n?(this.updateNoDataContent(e,t),(0,s.setCss)(t,{alignItems:t.clientHeight<t.scrollHeight?"start":"center"}),this._oldNoDataHeight&&Math.abs(t.clientHeight-this._oldNoDataHeight)<=2?this._oldNoDataHeight:(this._oldNoDataHeight=t.clientHeight,t.clientHeight)):0},e}();(0,s._registerModule)("wijmo.grid",o);var li=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function ai(){return(0,s._getModule)("wijmo.input")}function hi(){return(0,s._getModule)("wijmo.grid.detail")}var ci=o&&Ft;ci||(window.wijmo.grid={},window.wijmo.grid.CellFactory=function(){});var ui,di=function(e){function t(i){var n=e.call(this)||this;if(n._lastApplyTimeStamp=0,n._noApplyLag=!1,n._startingEditing=!1,n._cellStampCounter=0,n._composing=!1,n._autoSizeCache={},n._isCheckingHeight=!1,n._backupHeight=-1,n._cacheRow=null,n.grid=i,!t._templateTypes)for(var o in t._templateTypes=[],ui)isNaN(o)&&t._templateTypes.push(o);var r=n;return n._baseCf=i.cellFactory,i.cellFactory=n,n._evtInput=document.createEvent("HTMLEvents"),n._evtInput.initEvent("input",!0,!1),n._evtBlur=document.createEvent("HTMLEvents"),n._evtBlur.initEvent("blur",!1,!1),i.prepareCellForEdit.addHandler((function(e,t){r._noApplyLag=!0})),i.cellEditEnded.addHandler((function(e,n){var o=n.range,s=o.col;if(s<0||s<i.columns.length){var l=i._getBindingColumn(i.cells,o.row,i.columns[s]);l&&l[t.getTemplContextProp(ui.CellEdit)]||(r._editChar=null)}setTimeout((function(){r._noApplyLag=!1}),300)})),i.beginningEdit.addHandler((function(e,t){r._startingEditing=!0})),i.addEventListener(i.hostElement,"keydown",(function(e){r._startingEditing=!1}),!0),i.addEventListener(i.hostElement,"keypress",(function(e){var t=e.charCode>32?String.fromCharCode(e.charCode):null;t&&s.closest(e.target,"."+Ne.hostElement)===i.hostElement&&(!i.activeEditor||r._startingEditing?(r._editChar=t,setTimeout((function(){i.activeEditor||(r._editChar=null)}),0)):r._editChar&&(r._editChar+=t))}),!0),i.addEventListener(i.hostElement,"compositionstart",(function(e){r._composing=!0}),!0),i.addEventListener(i.hostElement,"compositionend",(function(e){r._composing=!1}),!0),i.updatedView.addHandler((function(e,t){n._updatedViewHandler()})),n}return li(t,e),t.prototype._updatedViewHandler=function(){var e=this;queueMicrotask((function(){e._autoSizeIfRequired()}))},t.prototype.canRender=function(e){return!!e},t.prototype.updateCell=function(e,i,n,o,r){this._cellStampCounter=(this._cellStampCounter+1)%1e7,o[t._cellStampProp]=this._cellStampCounter,o.style.overflow&&(o.style.overflow="");var l=i,a=n;r&&!r.isSingleCell&&(i=r.row,n=r.col);var h,c=e.grid,u=c.editRange,d=e.rows[i],p=d.dataItem,f=!1,_=!1,g=!1,m=!1;switch(e.cellType){case Ge.Cell:if(u&&u.row===i&&u.col===n)h=ui.CellEdit,_=g=!0;else if(d instanceof wt){var b=!((m=p instanceof s.CollectionViewGroup)||d.hasChildren);n==e.columns.firstVisibleIndex?h=b?ui.Cell:ui.GroupHeader:(h=b?ui.Cell:ui.Group,_=!0)}else d instanceof kt?h=ui.NewCellTemplate:hi()&&hi().DetailRow&&d instanceof hi().DetailRow||(h=ui.Cell);break;case Ge.ColumnHeader:h=ui.ColumnHeader;break;case Ge.RowHeader:h=c.collectionView&&c.collectionView.currentEditItem===p?ui.RowHeaderEdit:ui.RowHeader,f=!0;break;case Ge.TopLeft:h=ui.TopLeft,f=!0;break;case Ge.ColumnFooter:h=ui.ColumnFooter,_=!0;break;case Ge.BottomLeft:h=ui.BottomLeft,f=!0}var v=!1;if(null!=h){var y=null;if(m&&h==ui.GroupHeader?y=c.getColumn(p.groupDescription.propertyName):n>=0&&n<e.columns.length&&(y=e.cellType===Ge.ColumnHeader&&c._hasColumnGroups()?c._getColumnGroup(i,n):c._getBindingColumn(e,i,e.columns[n])),y){var w=t.getTemplContextProp,C=w(h),x=(f?c:y)[C];x||(h===ui.RowHeaderEdit?x=c[C=w(h=ui.RowHeader)]:h!==ui.Group&&h!==ui.GroupHeader||m||(x=y[C=w(h=ui.Cell)])),x&&this.canRender(x)&&(v=this._processTemplate(e,i,n,o,x,{needCellValue:_,isCvGroup:m,isEdit:g,riOriginal:l,ciOriginal:a,rng:r,templContextProp:C,col:y,row:d}))}}v||(this._doDisposeCell(o),this._baseCf.updateCell(e,l,a,o,r))},t.prototype._processTemplate=function(e,i,n,o,r,l){var a,h,c=this,u=l.needCellValue,d=l.isCvGroup,p=l.isEdit,f=e.grid,_=l.row,g=l.col,m=l.riOriginal,b=l.ciOriginal,v=l.rng,y=l.templContextProp,w=o[t._cellStampProp],C=this;u&&(a=e.getCellData(i,n,!1),h=e.getCellData(i,n,!0));var x=!!d&&_.isSummary,E=d&&(f.groupSummaryPosition===mt.Bottom||f.groupSummaryPosition===mt.Auto&&!_.isCollapsed),S=o.getAttribute(Rt._WJS_MEASURE),I=S&&"true"===S.toLowerCase();p&&(this.clearCell(o),this._baseCf.updateCell(e,m,b,o,v,!0));var D,R=p&&f.imeEnabled,T=R&&this._composing,P=o[y],M={cell:o,column:g,row:_,panel:e,rng:v,isEdit:p,isImeInput:R,isTrueImeInput:T,templateContext:r,templateCache:P,templateContextProperty:y,cellStamp:w,cellValue:a,cellValueFormatted:h},A=this.shouldInstantiate(M),H=!0;if(d&&!x&&n!=e.columns.firstVisibleIndex&&E&&(H=!1),A){if(p){var z=o.firstElementChild;z&&(R||o.focus(),z.style.display="none")}else this.clearCell(o);this._doDisposeCell(o),H&&(this.renderTemplate(M,!0),M.templateCache=P=o[y]),D=M.cellBindingsData}else H?this.renderTemplate(M,!1):this._doDisposeCell(o),D=M.cellBindingsData;if(r.cellOverflow&&(o.style.overflow=r.cellOverflow),I?this.applyImmediately(M):r.autoSizeRows&&!R&&this._markForAutoSize(i,n,e),p&&(H&&queueMicrotask((function(){c._updateEditRowSize(e,i,n,o)})),setTimeout((function(){R?c._initImeEditInput(M.cell,r):c._initEditInput(M.cell,r,null)}),0)),p){C._cellEditorVars=D.localVars;var k=function(e,t){if(f.cellEditEnding.removeHandler(k),!t.stayInEditMode){var i=s.getActiveElement();i&&i.dispatchEvent(C._evtBlur),s.contains(o,s.getActiveElement())&&o.focus()}if(C._triggerEditorEvents(o),!t.cancel&&!t.stayInEditMode)for(var n=D.localVars,r=0,l=Object.getOwnPropertyNames(D.bindings);r<l.length;r++){var a=l[r];D.bindings[a].setValue(n,D.localVars.values[a])}var h=o.querySelectorAll("."+j.hostElement);[].forEach.call(h,(function(e){var t=s.Control.getControl(e);t&&ai()&&t instanceof ai().DropDown&&(t.isDroppedDown=!1)}))},O=function(e,t){f.cellEditEnded.removeHandler(O),C._cellEditorVars=null};f.cellEditEnding.addHandler(k),f.cellEditEnded.addHandler(O)}else this._baseCf.updateCell(e,m,b,o,v,!1);return!0},t.prototype._updateEditRowSize=function(e,t,i,n){var o=this,r=e.rows[t],s=this.getHeight(e,t,i,n),l=0;if(this.grid.rowHeaders.columns[0]&&this.grid.rowHeaders.columns[0].isVisible)try{l=this.getHeight(this.grid.rowHeaders,t,0,this.grid.rowHeaders.getCellElement(t,0))}catch(e){}if(l>s&&(s=l),!r.resizedManually&&s>r.renderHeight){var a=r.height;r.height=s,this.grid._toInv&&(clearTimeout(this.grid._toInv),this.grid._listenResizeEvents=!1,this.grid.refreshCells(!0),setTimeout((function(){o.grid._listenResizeEvents=!0})));var h=function(e,i){r._editHandler=null,e.rowEditEnded.removeHandler(h),e.rows[t]&&(e.rows[t].height=a||null)};r._editHandler||(r._editHandler=h,this.grid.rowEditEnded.addHandler(h))}},t.prototype._autoSizePanelCells=function(e,t,i){for(var n,o=!1,r=0,s=!1,l=e.grid.editableCollectionView&&e.grid.editableCollectionView.currentEditItem,a=0,h=e.columns;a<h.length;a++)h[a].isVisible&&r++;for(var c=0,u=t.columns;c<u.length;c++)if(u[c].isVisible){s=!0;break}var d=e.rows.defaultSize;for(n in i)if(n=parseInt(n),e.rows[n]&&(!l||e.rows[n].dataItem!==l)&&!e.rows[n].resizedManually&&null==e.rows[n].detail){for(var p=Array.from(i[n].rowHeader),f=Array.from(i[n].cell),_=-1,g=0,m=p;g<m.length;g++){var b=m[g];(w=t.getCellElement(n,b))&&(!w.$__cellTemplRowHeaderEdit||w.$__cellTemplRowHeaderEdit&&l)&&(C=this.getHeight(t,n,b,w))>_&&(_=C)}for(var v=0,y=f;v<y.length;v++){var w,C;if(b=y[v],w=e.getCellElement(n,b))(C=this.getHeight(e,n,b,w))>_&&(_=C)}f.length!=r&&d>_&&(_=d),e.grid.headersVisibility&pt.Row&&s&&0===p.length&&d>_&&(_=d),!(e.rows[n].height&&e.rows[n].height>_)&&_>-1&&Math.abs(e.rows[n].height-_)>1&&(e.rows[n].height=_,o=!0)}return o},t.prototype.getHeight=function(e,t,i,n){var o=n.scrollHeight,r=e.rows,s=e.grid.getMergedRange(e,t,i,!1),l=s&&s.rowSpan||1;if(n.firstElementChild){var a=getComputedStyle(n),h=(parseFloat(a.paddingTop)||0)+(parseFloat(a.paddingBottom)||0),c=(parseFloat(a.borderBottomWidth)||0)+(parseFloat(a.borderTopWidth)||0),u=n.firstElementChild.scrollHeight+h+c;n.firstElementChild.childNodes.length>0&&0!=n.firstElementChild.scrollHeight&&(o=u)}return null!=r.maxSize&&(o=Math.min(o,r.maxSize)),o/l},t.prototype._autoSizeIfRequired=function(){var e=this.grid.editRange;if(e&&this.grid.columns[e.col]||this.grid._mouseHdl._isDown&&this.grid._mouseHdl._szArgs)this._autoSizeCache={};else{var t=this.grid.viewRange;if(this._autoSizeCache&&this._autoSizeCache.pendingCells)for(var i=t.topRow;i<=t.bottomRow;i++){if(this._autoSizeCache.pendingCells.cells&&this._autoSizeCache.pendingCells.cells[i])return void this._autoSizePendingCells();if(this._autoSizeCache.pendingCells.headers&&this._autoSizeCache.pendingCells.headers[i])return void this._autoSizePendingCells();if(this._autoSizeCache.pendingCells.footers&&this._autoSizeCache.pendingCells.footers[i])return void this._autoSizePendingCells()}}},t.prototype._autoSizePendingCells=function(){var e=!1,t=!1,i=!1;try{if(this.grid.beginUpdate(),!this._autoSizeCache||!this._autoSizeCache.pendingCells)return;this._autoSizeCache.pendingCells.headers&&(e=this._autoSizePanelCells(this.grid.columnHeaders,this.grid.topLeftCells,this._autoSizeCache.pendingCells.headers)),this._autoSizeCache.pendingCells.cells&&(t=this._autoSizePanelCells(this.grid.cells,this.grid.rowHeaders,this._autoSizeCache.pendingCells.cells)),this._autoSizeCache.pendingCells.footers&&(i=this._autoSizePanelCells(this.grid.columnFooters,this.grid.bottomLeftCells,this._autoSizeCache.pendingCells.footers)),this._autoSizeCache={}}finally{this.grid.endUpdate(e||t||i)}},t.prototype._markForAutoSize=function(e,t,i){var n,o=!1;switch(this._autoSizeCache.pendingCells||(this._autoSizeCache.pendingCells={}),i.cellType){case Ge.TopLeft:o=!0;case Ge.ColumnHeader:this._autoSizeCache.pendingCells.headers||(this._autoSizeCache.pendingCells.headers={}),n=this._autoSizeCache.pendingCells.headers;break;case Ge.RowHeader:o=!0;case Ge.Cell:this._autoSizeCache.pendingCells.cells||(this._autoSizeCache.pendingCells.cells={}),n=this._autoSizeCache.pendingCells.cells;break;case Ge.BottomLeft:o=!0;case Ge.ColumnFooter:this._autoSizeCache.pendingCells.footers||(this._autoSizeCache.pendingCells.footers={}),n=this._autoSizeCache.pendingCells.footers;break;default:return}n[e]||(n[e]={rowHeader:new Set,cell:new Set}),o?n[e].rowHeader.add(t):n[e].cell.add(t)},t.prototype.getEditorValue=function(t){if(this._cellEditorVars){var i=t.editRange;return i&&i.isValid&&this._triggerEditorEvents(t.cells.getCellElement(i.row,i.col)),this._cellEditorVars.value}return e.prototype.getEditorValue.call(this,t)},t.prototype.disposeCell=function(e){this._doDisposeCell(e)},t.prototype.disposeTemplate=function(e,t,i){t&&(t.rootElement=null,t.column=null,e[t.templateContextProperty]=null,t.templateContextProperty=null)},t.prototype.setBindingsData=function(e,t,i,n,o,r){e.row=t,e.col=i,e.item=n;var l={},a=e.cell||{},h={},c={localVars:a,bindings:h};if(a.row=t,a.col=i,a.item=n,a.value=o,a.valueFormatted=e.cellValueFormatted,a.values=l,r)for(var u=0,d=Object.getOwnPropertyNames(r);u<d.length;u++){var p=d[u],f=new s.Binding(r[p]);h[p]=f,l[p]=f.getValue(a)}return e.cell!==a&&(e.cell=a),c},t.prototype.checkHeight=function(e){var i=this;this._isCheckingHeight||setTimeout((function(){var n=e.cell;if(e.cellStamp===n[t._cellStampProp]){var o=n.scrollHeight,r=e.panel.rows,s=e.row.index,l=e.rng,a=l&&l.rowSpan||1,h=e.isEdit;if(null!=r.maxSize&&(o=Math.min(o,r.maxSize)),s<r.length&&r[s].renderHeight*a<o-1){var c=o/a;if(h){var u=i._isFullEdit(),d=i.grid;i._backupHeight=e.row.height,e.row.height=c,i._cacheRow=e.row,i._isCheckingHeight=!0,d.refresh(),d.startEditing(u),i._isCheckingHeight=!1}}h&&(e.isImeInput?i._initImeEditInput(e.cell,e.templateContext):i._initEditInput(e.cell,e.templateContext,null))}}),0)},t.prototype._restoreRowHeight=function(){!this._isCheckingHeight&&this._cacheRow&&(this._cacheRow.height=this._backupHeight,this._backupHeight=-1,this._cacheRow=null)},t.prototype.doDisposeCell=function(e){for(var i=t._templateTypes,n=0;n<i.length;n++){var o=t.getTemplContextProp(ui[i[n]]),r=e[o];if(r){var s=(r.column||this.grid)[o];this.disposeTemplate(e,r,s),i[n]==ui[ui.CellEdit]&&this._restoreRowHeight()}}},t.getTemplContextProp=function(e){return"$__cellTempl"+ui[e]},t.prototype._doDisposeCell=function(e){this.doDisposeCell(e)},t.prototype._initEditInput=function(e,i,n){var o=this;this.setEditorFocusFlag(!0);var r=!1!==this.getEditorFocusFlag();if(this.setEditorFocusFlag(null),this._setFullEdit(i),r){var s=this._findInitialInput(e);if(s){var l=function(){s.removeEventListener("focus",l),setTimeout((function(){var e=null!=n?n:o._editChar;e&&(s.value=e,o._editChar=null,t._setSelectionRange(s,e.length,e.length),s.dispatchEvent(o._evtInput))}),t._FOCUS_INTERVAL)};s.addEventListener("focus",l),s.focus()}}},t.prototype._initImeEditInput=function(e,i){var n=this,o=s.getActiveElement();if(o&&(o instanceof HTMLInputElement||o instanceof HTMLTextAreaElement)&&s.hasClass(o,Ne.gridIme)){var r=this._findInitialInput(e),l=r&&r.style.color,a=this._composing,h=function(){o.removeEventListener("compositionend",h),s.setCss(o,Tt._cssHidden),n.setEditorFocusFlag(!0),r&&(r.style.color=l),n._initEditInput(e,i,a?o.value:null)};if(a){if(o.addEventListener("compositionend",h),r){var c=r.getBoundingClientRect(),u=o.getBoundingClientRect(),d=window.getComputedStyle(o),p=parseFloat(d.left),f=parseFloat(d.top);s.setCss(o,{left:p+c.left-u.left+"px",top:f+c.top-u.top+"px",width:c.width+"px",height:c.height+"px"}),r.style.color="transparent"}}else setTimeout((function(){return h()}),t._FOCUS_INTERVAL)}},t.prototype._findInitialInput=function(e){var t=e&&e.rootElement&&e.rootElement.querySelectorAll("input,textarea")||e&&e.querySelectorAll("input,textarea");if(t)for(var i=0;i<t.length;i++){var n=t[i],o=window.getComputedStyle(n);if("none"!==o.display&&"visible"===o.visibility)return n}return null},t._setSelectionRange=function(e,t,i){if(void 0===i&&(i=t),s.contains(document.body,e)&&!e.disabled&&"none"!=e.style.display)try{e.setSelectionRange(s.asNumber(t),s.asNumber(i),s.isIE()?null:"backward"),e.focus()}catch(e){}},t.prototype._triggerEditorEvents=function(e){if(e)for(var t=e.querySelectorAll("."+s.ControlClsNames.hostElement),i=0;i<t.length;i++){var n=t[i],o=s.Control.getControl(n);o&&this.flushPendingEvents(o)}},t.prototype._isFullEdit=function(){var e=this.grid;return!e.activeEditor||e._edtHdl._fullEdit},t.prototype._setFullEdit=function(e){var t=this.grid;e.forceFullEdit&&t.activeEditor&&(t._edtHdl._fullEdit=!0)},t._cellStampProp="__wjCellStamp",t._FOCUS_INTERVAL=s.Control._FOCUS_INTERVAL+20,t}(Ft);ci||(window.wijmo.grid=null),function(e){e[e.Cell=0]="Cell",e[e.CellEdit=1]="CellEdit",e[e.ColumnHeader=2]="ColumnHeader",e[e.RowHeader=3]="RowHeader",e[e.RowHeaderEdit=4]="RowHeaderEdit",e[e.TopLeft=5]="TopLeft",e[e.GroupHeader=6]="GroupHeader",e[e.Group=7]="Group",e[e.NewCellTemplate=8]="NewCellTemplate",e[e.ColumnFooter=9]="ColumnFooter",e[e.BottomLeft=10]="BottomLeft"}(ui||(ui={})),(0,s._registerModule)("wijmo.interop.grid",r);var pi=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),fi=function(){return(fi=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},_i={inputs:w.inputs.concat(["allowAddNew","allowDelete","allowDragging","allowMerging","allowPinning","allowResizing","allowSorting","alternatingRowStep","anchorCursor","ariaLabel","autoClipboard","autoGenerateColumns","autoRowHeights","autoScroll","autoSearch","autoSizeMode","bigCheckboxes","caseSensitiveSearch","cellFactory","childItemsPath","cloneFrozenCells","columns","columnGroups","columnLayout","commitEmptyEdits","copyHeaders","deferResizing","editColumnIndex","errorTip","expandSelectionOnCopyPaste","frozenCells","frozenColumns","frozenRows","groupHeaderFormat","groupSummaryPosition","headersFocusability","headersVisibility","imeEnabled","isReadOnly","itemFormatter","itemValidator","itemsSource","keyActionEnter","keyActionTab","lazyRender","maxContent","mergeManager","newRowAtTop","pasteEmptyCells","preserveOutlineState","preserveSelectedState","preserveWhiteSpace","quickAutoSize","refreshOnEdit","rowHeaderPath","scrollPosition","scrollSize","selectedItems","selectedRanges","selectedRows","selection","selectionMode","showDropDown","showErrors","showGroups","showMarquee","showPlaceholders","showSelectedHeaders","showSort","skipMerged","sortOrder","sortRowIndex","stickyHeaders","treeIndent","validateEdits","virtualizationThreshold","noDataOverlayContent"]),events:w.events.concat(["autoSizedColumn","autoSizedRow","autoSizingColumn","autoSizingRow","beginningEdit","cellEditEnded","cellEditEnding","columnGroupCollapsedChanged","columnGroupCollapsedChanging","copied","copying","deletedRow","deletingRow","draggedColumn","draggedRow","draggingColumn","draggingColumnOver","draggingRow","draggingRowOver","formatItem","groupCollapsedChanged","groupCollapsedChanging","itemsSourceChanged","itemsSourceChanging","loadedRows","loadingRows","pasted","pastedCell","pasting","pastingCell","pinnedColumn","pinningColumn","prepareCellForEdit","resizedColumn","resizedRow","resizingColumn","resizingRow","rowAdded","rowEditEnded","rowEditEnding","rowEditStarted","rowEditStarting","scrollPositionChanged","selectionChanged","selectionChanging","sortedColumn","sortingColumn","starSizedColumns","updatedLayout","updatedView","updatingLayout","updatingView"])},gi=v((function(e,t){return function(e){var t=h.useRef({}),i=h.useRef(),n=h.useRef(),o=h.useRef(),r=h.useRef(),l=h.useRef({}),a=h.useRef(!1),u=h.useRef(null);e.customProps||(e.customProps={}),i.current||(i.current={},i.current.knowProperties=new Set(e.properties),i.current.knowEvents=new Set(e.events),i.current.knowCustomProps=new Set(Object.keys(e.customProps)));var d=e.props;r.current&&(d=I(e.props,t.current,i.current),t.current=e.props);var p={},f={},_={},g={},m=e.ref||null;for(var b in d)i.current.knowProperties.has(b)?p[b]=d[b]:i.current.knowEvents.has(b)?(f[b]=d[b],p[b]=d[b]):e.customProps[b]?g[b]=d[b]:E.has(b)||(_[b]=d[b]);if(r.current&&y)for(var b in f)delete p[b];var v=function(){m&&m.current&&(m.current.props=e.props),w();var t=[],i=p;if(o.current&&r.current&&!y){for(var n in o.current)r.current[n]&&(r.current[n]._handlersChanged&&(r.current[n]._cachedHandlersChanged=r.current[n]._handlersChanged,r.current[n]._handlersChanged=null,t.push(r.current[n])),r.current[n].removeHandler(o.current[n]));for(var l in i=c({},p),f)delete i[l],r.current[l].addHandler(f[l])}else if(!o.current)for(var l in i=c({},p),f)delete i[l];if(o.current=f,r.current){for(var a in(0,s.copy)(r.current,i,!1,!0),g)e.customProps[a](r.current,g[a]);!function(){for(var e=0,i=t;e<i.length;e++){var n=i[e];n._cachedHandlersChanged&&(n._handlersChanged=n._cachedHandlersChanged,n._cachedHandlersChanged=null)}t=[]}()}},w=function(){l.current=S({controlRef:r,childInfo:l.current},e.props.children)};return h.useLayoutEffect((function(){if(n.current&&!r.current){if(r.current=new e.constructor(n.current,p),e.prePropsInit&&e.prePropsInit(r.current),m)if((0,s.isFunction)(m)){var t=m({control:r.current,props:e.props});(0,s.isFunction)(t)&&(u.current=t)}else m.current&&m.current.control==r.current||(m.current={control:r.current,props:e.props});e.props.children&&v(),e.initControl&&e.initControl(r.current),e.props.initialized&&setTimeout((function(){r.current&&e.props.initialized(r.current)}))}else a.current&&(a.current=!1);return function(){if(r.current){var e=r.current;a.current=!0,queueMicrotask((function(){a.current&&(e.dispose(),r.current=null,l.current={},a.current=!1,u.current&&u.current())}))}}}),[]),r.current&&queueMicrotask((function(){return v()})),{renderResult:h.createElement("div",c({},_,{ref:n}),[]),wjControl:r.current}}({ref:t,properties:_i.inputs,events:_i.events,props:e,constructor:Rt,initControl:function(e){e.cellFactory=new xi(e)}}).renderResult})),mi={inputs:["align","allowDragging","allowMerging","allowResizing","binding","cssClass","cssClassAll","dataMap","dataMapEditor","dataType","dropDownCssClass","format","inputType","isContentHtml","isReadOnly","isRequired","isSelected","isVisible","mask","maxLength","multiLine","size","sortMemberPath","visible","wordWrap","placeholder"],events:["gridChanged"]},bi={inputs:mi.inputs.concat(["aggregate","allowSorting","cellTemplate","describedById","editor","header","maxWidth","minWidth","name","quickAutoSize","sortOrder","width"]),events:mi.events.slice()},vi=v((function(e,t){var i=T({ref:t,properties:bi.inputs,events:bi.events,props:e,constructor:vt,customConstructor:function(e,t){return e.autoGenerateColumns=!1,new vt(t)},needParentInstance:!1,parentProp:"columns",isParentPropArray:!0,assignedToParent:!0});return fi({$_wjComponent:!0},i)})),yi={inputs:bi.inputs.concat(["collapseTo","columns","height","isCollapsed"]),events:bi.events.slice()},wi=(v((function(e,t){var i=T({ref:t,properties:yi.inputs,events:yi.events,props:e,constructor:It,customConstructor:function(e,t){return e.autoGenerateColumns=!1,new It(t)},needParentInstance:!1,parentProp:"columnGroups",isParentPropArray:!0,assignedToParent:!0});return fi({$_wjComponent:!0},i)})),{inputs:["cellType","template","autoSizeRows"],events:[]}),Ci=(v((function(e,t){var i=T({ref:t,properties:wi.inputs,events:wi.events,props:e,constructor:Ci,needParentInstance:!0,parentProp:"",isParentPropArray:!1,assignedToParent:!1});return fi({$_wjComponent:!0},i)})),function(){function e(e,t){this.autoSizeRows=!0,this.parent=e,this.cellType=(0,s.asEnum)(t.cellType,ui,!1);var i=di.getTemplContextProp(this.cellType);this.template=(0,s.asFunction)(t.template,!0),e[i]=this}return e.prototype.initialize=function(e){this.removeBinding(),this.cellType=(0,s.asEnum)(null==e.cellType?this.cellType:e.cellType,ui,!1),this.template=void 0===e.template?this.template:(0,s.asFunction)(e.template,!0);var t=di.getTemplContextProp(this.cellType);this.parent[t]=this,this.autoSizeRows=void 0===e.autoSizeRows?this.autoSizeRows:(0,s.asBoolean)(e.autoSizeRows,!0)||!1,void 0!==e.template&&this.parent&&(this.parent.grid?this.parent.grid.invalidate():this.parent.invalidate&&this.parent.invalidate()),this.parent&&this.parent instanceof vt&&this.parent._setFlag(at.HasTemplate,!0,!0)},e.prototype.removeBinding=function(){var e=di.getTemplContextProp(this.cellType);delete this.parent[e],this.parent&&this.parent instanceof vt&&this.parent._setFlag(at.HasTemplate,!1,!0)},e.prototype.dispose=function(){this.removeBinding(),this.parent&&this.parent.grid?this.parent.grid.invalidate():this.parent&&this.parent.invalidate&&this.parent.invalidate()},e}()),xi=function(e){function t(t){var i=e.call(this,t)||this;return i._renderedCells=[],t.updatedView.addHandler((function(e){queueMicrotask((function(){return i._reRenderCells()}))}),i),i}return pi(t,e),t.prototype.shouldInstantiate=function(e){var t=e.templateCache;return null==t||t.column!==e.column||t.templateContextProperty!==e.templateContextProperty||e.cell.firstChild!=t.rootElement},t.prototype.renderTemplate=function(e,t){var i=e.row,n=e.templateContext,o=e.cell;if(e.cellBindingsData=this.setBindingsData({},i,e.column,i.dataItem,e.cellValue,n.valuePaths),e.cellBindingsData.localVars.valueFormatted=e.cellValueFormatted,this._renderCell(o,e),t){this._addRenderedCell(o);var r=e.templateCache={column:e.column,rootElement:o.firstElementChild,templateContextProperty:e.templateContextProperty};o[e.templateContextProperty]=r}},t.prototype.flushPendingUpdates=function(){_((function(){}))},t.prototype.applyImmediately=function(e){},t.prototype.flushPendingEvents=function(e){},t.prototype.getEditorFocusFlag=function(){return!0},t.prototype.setEditorFocusFlag=function(e){},t.prototype.disposeTemplate=function(t,i,n){i&&(z(t),this._removeRenderedCell(t),e.prototype.disposeTemplate.call(this,t,i,n))},t.prototype.clearCell=function(e){z(e)},t.prototype.canRender=function(e){return!(!e||!e.template)},t.prototype._renderCell=function(e,t){var i=t||e.__wjCellLastRenderedProp;if(i){var n=i&&i.templateContext.template,o=i.cellBindingsData.localVars;if(o.row&&!o.row.grid&&(o.row=i.panel.grid.rows[o.row.index]),!o.row)return;!function(e,t,i){if(void 0===i&&(i=!1),g<18)(0,A().render)(e,t);else{M()&&(i=!0);var n,o=m.findIndex((function(e){return e.host===t}));-1===o?(n=f.createRoot(t),m.push({host:t,root:n})):n=m[o].root,n.__scheduledForUnmount=!1,i?queueMicrotask((function(){_((function(){n.render(e)}))})):_((function(){n.render(e)}))}}(h.createElement("div",{},n&&n(o)),e),e.__wjCellLastRenderedProp=i}},t.prototype._addRenderedCell=function(e){var t=this._renderedCells;t.indexOf(e)<0&&t.push(e)},t.prototype._removeRenderedCell=function(e){var t=this._renderedCells,i=t.indexOf(e);i>-1&&t.splice(i,1)},t.prototype._reRenderCells=function(){var e=this;this._renderedCells.forEach((function(t){return e._renderCell(t)}))},t.prototype.checkHeight=function(e){var t=this;"$__cellTemplGroupHeader"!==e.templateContextProperty&&(this._isCheckingHeight||setTimeout((function(){if(!t._isCheckingHeight){var i=e.panel.rows,n=e.row.index;if(i[n]){var o=e.cell,r=o.style.height;o.style.height="0";var s=o.scrollHeight>7?o.scrollHeight:i[n].renderHeight;if(o.style.height=r,e.cellStamp===o[di._cellStampProp]){var l=e.rng,a=l&&l.rowSpan||1,h=e.isEdit;if(null!=i.maxSize&&(s=Math.min(s,i.maxSize)),n<i.length&&i[n].renderHeight<s-1||i[n].renderHeight>s+1&&!h&&e.panel.cellType===Ge.Cell&&1===a){var c=s/a;if(!e.row.resizedManually&&(null==e.row.height||e.row.height<c)&&(e.row.height=c),h){var u=t._isFullEdit(),d=t.grid;return t._backupHeight=e.row.height,e.row.height=c,t._cacheRow=e.row,t._isCheckingHeight=!0,d.refresh(),d.startEditing(u),t._isCheckingHeight=!1,void(e.isImeInput?t._initImeEditInput(e.cell,e.templateContext):t._initEditInput(e.cell,e.templateContext,null))}}else h&&(e.isImeInput?t._initImeEditInput(e.cell,e.templateContext):t._initEditInput(e.cell,e.templateContext,null))}}}}),2))},t}(di)},61379:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var n=i(9950);const o="undefined"!==typeof window?n.useInsertionEffect||n.useLayoutEffect:()=>{};function r(){throw new Error("INVALID_USEEVENT_INVOCATION: the callback from useEvent cannot be invoked before the component has mounted.")}const s=function(e){const t=n.useRef(r);o((()=>{t.current=e}),[e]);const i=n.useRef(null);return i.current||(i.current=function(){return t.current.apply(this,arguments)}),i.current}},44315:()=>{}}]);