"use strict";(self.webpackChunksiny_memo=self.webpackChunksiny_memo||[]).push([[653],{77753:(e,n,t)=>{t.d(n,{Z:()=>a});var c=t(61889),i=t(94721),s=t(97572),o=t(9035),r=t(95629),l=t(80184);const a=()=>{const{query:e}=(0,r.j)(),n=e.data;if(void 0!==n&&null!==n)return(0,l.jsxs)(l.Fragment,{children:[n.map(((e,n)=>(0,l.jsxs)(c.ZP,{container:!0,spacing:2,columns:{xs:5,sm:7,md:10,lg:12},id:"id_".concat(n+1),children:[(0,l.jsx)(c.ZP,{item:!0,xs:1,md:1,children:(0,l.jsx)(o.nf,{to:"/bible/".concat(e.cd1,"_").concat(e.cd2,"_").concat(e.cd3),state:{cd4:e.cd4},children:e.nm})}),(0,l.jsx)(c.ZP,{item:!0,xs:4,sm:6,md:9,lg:11,children:(0,l.jsx)(s.O,{show:!0,text:e.txt})})]},n))),(0,l.jsx)(i.Z,{})]})}},95629:(e,n,t)=>{t.d(n,{j:()=>a});var c=t(78609),i=t(72791),s=t(5434),o=t(71883),r=t(16763),l=t(50150);const a=()=>{const e=new r.S,{user:n}=(0,o.$)(),t=(0,l.a)({queryKey:["useBibleBookmark"],queryFn:()=>async function(){if(void 0===n.uid)return new Error("Error undefined");const e=(0,c.iH)(s.h3,"bible_mark/".concat(n.uid)),t=await(0,c.U2)(e),i=new Array;if(t.exists()){const e=t.val();return Object.values(e).map((e=>{"Y"===e.bookmark&&i.push(e)})),i}return new Error("Error exists")}(),enabled:!1});(0,i.useEffect)((()=>{void 0!==n&&t.refetch()}),[n]);return{query:t,setBibleBookmark:i=>{if(void 0===n)return;if(void 0===n)return;let o="N";void 0!==i.bookmark&&"N"!==i.bookmark||(o="Y"),i.bookmark=o;const r="bible_mark/".concat(n.uid,"/").concat(i.cd1,"_").concat(i.cd2,"_").concat(i.cd3,"_").concat(i.cd4);(0,c.t8)((0,c.iH)(s.h3,r),i),e.invalidateQueries({queryKey:["useBibleBookmark"]}),t.refetch()}}}},85653:(e,n,t)=>{t.r(n),t.d(n,{BibleDetail:()=>E,default:()=>F});var c=t(18796),i=t(95678),s=t(697),o=t(13239),r=t(49877),l=t(20890),a=t(72791),d=t(57689),m=t(5434),u=t(61889),x=t(94294),h=t(89164),b=t(97572),j=t(9035),f=t(81214),k=t(35328),v=(t(85703),t(38500),t(73776)),p=t(17237),g=t(95629),y=t(71883),Z=t(77753),_=t(41120),w=t(16763),B=t(80184);const I=e=>{const n=new Array;if(void 0===e.data||null===e.data)return;const t=e.bibleId.split("_");for(let c=1;c<=e.data.cd3;c++){const t={nm:"".concat(e.data.nm2).concat(c,"\uc7a5"),key:e.data.key};n.push(t)}return t&&3===t.length?(0,B.jsxs)(l.Z,{variant:"h6",sx:{display:"flex",alignItems:"center",flexDirection:"column",mb:4},children:[e.nm," ",t[2]," \uc7a5"]}):(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(l.Z,{variant:"h6",sx:{display:"flex",alignItems:"center",flexDirection:"column",mb:4},children:e.nm}),(0,B.jsx)(u.ZP,{container:!0,spacing:2,columns:{xs:4,sm:6,md:10,lg:12},children:n.map(((e,n)=>(0,B.jsx)(u.ZP,{item:!0,xs:1,md:1,children:(0,B.jsx)(j.nf,{to:"/bible/".concat(e.key,"_").concat(n+1),children:e.nm})},n)))})]})},P=e=>{const n=e.dataText;if(void 0===e.data||null===e.data)return;if(void 0===n||null===n)return;const t=e.bibleId.split("_");return e.bibleId&&3!==t.length?(0,B.jsx)(B.Fragment,{}):(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(l.Z,{variant:"h6",sx:{display:"flex",alignItems:"center",flexDirection:"column",mb:4},children:e.nm}),n.map(((n,t)=>{var c,i;void 0!==n.bm&&console.log("item",e.cd4,n);let o="text.primary";e.cd4+""===n.cd4&&(o="warning.main");const r=null===(c=e.bookmark)||void 0===c||null===(i=c.data)||void 0===i?void 0:i.filter((e=>e.cd1===n.cd1&&e.cd2===n.cd2&&e.cd3===n.cd3&&e.cd4===n.cd4&&"Y"===e.bookmark));return r&&r.length>0&&(n.bookmark="Y"),(0,B.jsxs)(u.ZP,{container:!0,spacing:2,columns:{xs:5,sm:6,md:10,lg:12},id:"id_".concat(t+1),children:[(0,B.jsx)(u.ZP,{item:!0,xs:1,md:1,children:(0,B.jsxs)(s.Z,{sx:{color:o,display:"flex"},children:[(0,B.jsx)(j.Jy,{sx:{alignItems:"center",textAlign:"top"},onClick:t=>e.onBookmark(n),children:n.nm}),r&&r.length>0&&(0,B.jsx)(p.Z,{sx:{color:"red"}})]})}),(0,B.jsx)(u.ZP,{item:!0,xs:4,sm:5,md:9,lg:11,children:(0,B.jsx)(s.Z,{sx:{color:o},children:(0,B.jsx)(b.O,{text:n.text})})})]},t)}))]})},E=e=>{var n,t;const[l,b]=(0,a.useState)(null),[j,p]=(0,a.useState)(!0),{query:E,setBibleBookmark:F}=(0,g.j)(),q=(0,a.useRef)(),{bibleId:C}=(0,d.UO)(),D=(0,d.TH)(),[S,O]=(0,a.useState)(!1),[T,A]=(0,a.useState)(!1),{user:H}=(0,y.$)(),N=null===D||void 0===D||null===(n=D.state)||void 0===n?void 0:n.word,Y=null===D||void 0===D||null===(t=D.state)||void 0===t?void 0:t.cd4,U=(0,d.s0)();new w.S;console.log("BibleDetail.bookmark=",E),(0,a.useEffect)((()=>{if(void 0!==C){(async()=>{const e=await K(C,N);b(e),p(!1)})(),O(!1),A(!0);const e=C.split("_");if(3===e.length){const n=q.current.cd3;O(1!==Number(e[2])),A(e[2]<n)}}}),[C]),(0,a.useEffect)((()=>{void 0!==Y&&setTimeout((()=>{W("","id_"+Y)}),1500)}),[l]);const W=(e,n)=>{const t=document.getElementById(n);t&&t.scrollIntoView({block:"center",behavior:"smooth"})},K=async(e,n)=>{if(""===e||void 0===e)return"";const t=e.split("_");if(!(t.length<1))if(q.current=k[t[0]][t[1]],console.log("bibleTitle=",q),3!==t.length);else{const e=(0,c.iH)(m.h3,"bible_".concat(t[0],"/").concat(t[1],"/").concat(t[2])),i=await(0,c.U2)(e);if(i.exists()){const e=i.val(),c=new Array;return Object.values(e).map((e=>{if(void 0===e)return;let i=e.txt;if(void 0!==n){const e=new RegExp(n,"gi");i=i.replace(e,"<span class='lightext'>".concat(n,"</span>"))}e.nm="".concat(q.current.nm2).concat(t[2],":").concat(e.cd4),e.text=i,c.push(e)})),c}}};if(""===C)return(0,B.jsx)(B.Fragment,{});const M=e=>{console.log("onMove",e);let n=C.split("_");n[2]=Number(n[2])+e,console.log("onMove.tmp",n),U("/bible/".concat(n[0],"_").concat(n[1],"_").concat(n[2]))};return(0,B.jsxs)(a.Fragment,{children:[(0,B.jsx)("div",{id:"back-to-top-anchor"}),(0,B.jsx)(Z.Z,{}),(0,B.jsx)(_.a,{children:null!==q.current&&void 0!==q.current&&null!==q.current.nm?q.current.nm:""}),(0,B.jsx)(I,{data:q.current,bibleId:C}),(0,B.jsx)(P,{dataText:l,data:q.current,searchWord:N,bibleId:C,cd4:Y,bookmark:E,onBookmark:e=>{void 0!==H&&F(e)}}),(0,B.jsxs)(h.Z,{sx:{p:0},children:[j&&(0,B.jsx)(s.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:(0,B.jsx)(o.Z,{sx:{mt:5}})}),C&&3===C.split("_").length?(0,B.jsx)(s.Z,{sx:{display:"flex",justifyContent:"space-between",mt:5},children:(0,B.jsxs)(u.ZP,{container:!0,spacing:1,children:[S?(0,B.jsx)(u.ZP,{item:!0,xs:T?6:12,children:(0,B.jsx)(v.Z,{children:(0,B.jsx)(x.Z,{type:"button",variant:"outlined",onClick:()=>M(-1),fullWidth:!0,children:"< \uc774\uc804"})})}):"",T?(0,B.jsx)(u.ZP,{item:!0,xs:S?6:12,children:(0,B.jsx)(v.Z,{children:(0,B.jsx)(x.Z,{type:"button",variant:"outlined",onClick:()=>M(1),fullWidth:!0,children:"\ub2e4\uc74c >"})})}):""]})}):""]}),(0,B.jsx)(f.p,{...e,id:"#back-to-top-anchor",children:(0,B.jsx)(r.Z,{color:"primary",size:"small","aria-label":"scroll back to top",children:(0,B.jsx)(i.Z,{})})})]})},F=E}}]);
//# sourceMappingURL=653.6c8b7822.chunk.js.map