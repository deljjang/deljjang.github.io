"use strict";(self.webpackChunksiny_memo=self.webpackChunksiny_memo||[]).push([[2360],{7041:(e,t,n)=>{n.d(t,{Ay:()=>s});var o=n(10226),i=n(58933),l=n(44414);const s=function(e){let{children:t,...n}=e;return(0,l.jsx)(o.A,{variant:"contained",component:i.P.div,whileHover:{scale:1,transition:{duration:.3}},whileTap:{scale:.9},...n,children:t})}},2360:(e,t,n)=>{n.r(t),n.d(t,{default:()=>B});var o=n(19808),i=n(9950),l=n(9798),s=n(68040),r=n(35937),c=n(9519),d=n(45957),a=n(23235),u=n(44414);const m=(0,a.A)((0,u.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel"),x=(0,a.A)((0,u.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");var h=n(40379),p=n(57988),g=n(59254),j=n(2235),f=n(16491),v=n(60899),y=n(8145),A=n(25333),b=n(82053),T=n(74745),C=n(59749),k=n(51536),w=n(9449),S=n(7041),D=n(85881);var I=n(86635);const L=(0,g.Ay)(j.A)((e=>{let{theme:t}=e;return{backgroundColor:"dark"===t.palette.mode?"#1A2027":"#fff",...t.typography.body2,padding:t.spacing(1),textAlign:"center",color:t.palette.text.secondary}})),R=e=>{var t;const{userId:n}=e,[o,l]=(e=>{const[t,n]=(0,i.useState)(e),[o,l]=(0,i.useState)([]),[s,r]=(0,i.useState)(),c=(0,i.useCallback)((e=>{const t=(0,C.P)((0,C.KR)(D.mr,e),(0,C.kT)("title"));(0,C.Zy)(t,(e=>{if(!e.exists())return;const t=e.val(),n=[];for(let l in t){const e=t[l];e.id=l,e.sort="".concat(e.ing,"_").concat(e.date,"_").concat(e.title),(""===s||void 0===s||(e.memo+"").toLowerCase().indexOf(s.toLowerCase())>-1)&&n.push(e)}const o=n.sort(((e,t)=>e.sort>t.sort?1:-1)).filter((e=>"1"===e.ing)),i=n.sort(((e,t)=>e.sort>t.sort?-1:1)).filter((e=>"2"===e.ing));l([...o,...i])}))}),[s]);return(0,i.useEffect)((()=>{""!==t&&c(t)}),[c,t,s]),[o,n,r]})(""),s=k.c9.now().setZone("Asia/Seoul").toFormat("yyyy-MM-dd"),r={edTitle:"",edDate:s},{register:c,handleSubmit:d,reset:a,getValues:g,setFocus:j,formState:{errors:R,isSubmitting:K,submitCount:B}}=(0,w.mN)({mode:"submit ",defaultValues:r}),Z=(0,i.useRef)();(0,i.useEffect)((()=>{c("edTitle",{required:"\ud574\ub2f9 \ud544\ub4dc\ub294 \ud544\uc218\uc785\ub2c8\ub2e4.",minLength:{value:3,message:"3\uae00\uc790 \uc774\uc0c1 \uc785\ub825\ud574\uc8fc\uc138\uc694."}}),c("edDate",{required:!0,minLength:10})})),(0,i.useEffect)((()=>{void 0!==n&&l("todo/".concat(n))}),[n]);const E=()=>{e.handleGoogleLogin()};if(void 0===n)return(0,u.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",marginTop:"50px",marginBottom:"100px"},children:[(0,u.jsx)(L,{children:"\ub85c\uadf8\uc778\uc744 \ud574\uc57c \uc774\uc6a9\uac00\ub2a5\ud569\ub2c8\ub2e4."}),(0,u.jsx)(S.Ay,{type:"button",size:"small",variant:"outlined",color:"success",sx:{mt:30},onClick:E,children:"\ub85c\uadf8\uc778"})]});function F(e,t){console.log("onSubmit.data=",e),console.log("onSubmit.e=",t),console.log("onSubmit.todoId=",Z.current),console.log("onSubmit.errors=",R);const o="todo/".concat(n,"/");if(void 0===Z.current){const e=(0,C.VC)((0,C.jf)((0,C.KR)(D.mr),o)).key;console.log("onSubmit.newKey",e),Z.current=e}(0,C.hZ)((0,C.KR)(D.mr,o+Z.current+"/title"),e.edTitle),(0,C.hZ)((0,C.KR)(D.mr,o+Z.current+"/date"),e.edDate),(0,C.hZ)((0,C.KR)(D.mr,o+Z.current+"/ing"),"1"),Z.current=void 0,a({edTitle:"",edDate:s})}return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(f.A,{sx:{width:"100%",flexGrow:1,m:2},children:[(0,u.jsx)("div",{id:"back-to-top-anchor"}),(0,u.jsx)("form",{onSubmit:d(F,(e=>console.error(e))),children:(0,u.jsxs)(v.Ay,{container:!0,spacing:2,columns:{xs:12,md:12},children:[(0,u.jsx)(v.Ay,{item:!0,xs:12,children:(0,u.jsx)(y.A,{type:"date",style:{paddingTop:"2px"},fullWidth:!0,placeholder:"\uc77c\uc790",...c("edDate"),variant:"standard"})}),(0,u.jsx)(v.Ay,{item:!0,xs:9,sm:10,children:(0,u.jsxs)(f.A,{sx:{display:"flex",alignItems:"normal",justifyContent:"center"},children:[(0,u.jsx)(y.A,{fullWidth:!0,style:{paddingTop:"2px"},placeholder:"Todo Input",...c("edTitle"),variant:"standard",error:!!R.edTitle}),(0,u.jsx)(A.A,{style:{marginTop:"-4px"},"aria-label":"bookmark",onClick:e=>(e=>{e.preventDefault(),console.log("onCancel.item="),a({edTitle:""}),Z.current=void 0})(e),children:(0,u.jsx)(m,{sx:{color:"action.active"}})})]})}),(0,u.jsx)(v.Ay,{item:!0,xs:3,sm:2,children:(0,u.jsx)(S.Ay,{variant:"outlined",fullWidth:!0,onClick:e=>async function(e){console.log("onInputBtn.errors=",R),console.log("onInputBtn.isSubmitting=",K),console.log("onInputBtn.edDate=",g("edDate")),console.log("onInputBtn.edTitle=",g("edTitle")),console.log("onInputBtn.submitCount=",B),e.preventDefault(),d(F)()}(e),color:"success",size:"small",disabled:K,children:"\uc785\ub825"})}),(0,u.jsx)(v.Ay,{item:!0,xs:12,sm:12,children:null!==R&&void 0!==R&&R.edTitle?(0,u.jsx)("p",{className:"error",children:null===(t=R.edTitle)||void 0===t?void 0:t.message}):null})]})}),null===o||void 0===o?void 0:o.map(((e,t)=>(0,u.jsxs)("div",{children:[(0,u.jsxs)(f.A,{sx:{display:"plex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[(0,u.jsx)(b.A,{component:"div",variant:"body2",color:"text.prime",children:e.date}),(0,u.jsxs)(f.A,{sx:{display:"plex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:["1"===e.ing&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(A.A,{"aria-label":"\uc644\ub8cc",onClick:t=>((e,t)=>{e.preventDefault(),window.confirm("\uc644\ub8cc\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(0,C.hZ)((0,C.KR)(D.mr,"todo/".concat(n,"/").concat(t.id,"/ing")),"2")})(t,e),children:(0,u.jsx)(x,{})}),(0,u.jsx)(A.A,{"aria-label":"edit",onClick:t=>((e,t)=>{e.preventDefault(),console.log("onEdit.item=",t),j("edTitle"),a({edTitle:t.title,edDate:t.date}),Z.current=t.id,console.log("onEdit.todoId=",Z.current)})(t,e),children:(0,u.jsx)(h.A,{})})]}),(0,u.jsx)(A.A,{"aria-label":"delete",onClick:t=>((e,t)=>{e.preventDefault(),window.confirm("\uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(0,C.hZ)((0,C.KR)(D.mr,"todo/".concat(n,"/").concat(t.id)),null)})(t,e),children:(0,u.jsx)(p.A,{sx:{color:"rgba(120, 0, 0, 3)"}})})]})]}),(0,u.jsx)(b.A,{component:"div",variant:"body",color:"text.prime",children:e.title}),(0,u.jsx)(T.A,{})]},t))),(0,u.jsx)(I.n,{})]}),(0,u.jsx)(T.A,{})]})};var K=n(72150);const B=()=>{const{user:e,handleGoogleLogin:t}=(0,c.b)();return(0,i.useEffect)((()=>{document.querySelector("title").innerHTML="".concat(K.A.templateName," :: Todo")}),[]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(d.B,{}),(0,u.jsxs)(o.A,{maxWidth:"lg",sx:{mt:3},children:[(0,u.jsx)(r.A,{title:"Todo",enable:!0}),(0,u.jsx)(i.Suspense,{fallback:(0,u.jsx)(l.R,{}),children:(0,u.jsx)(R,{userId:null===e||void 0===e?void 0:e.uid,handleGoogleLogin:t})})]}),(0,u.jsx)(s.A,{}),(0,u.jsx)("br",{}),(0,u.jsx)("br",{})]})}}}]);