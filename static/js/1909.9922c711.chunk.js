"use strict";(self.webpackChunksiny_memo=self.webpackChunksiny_memo||[]).push([[1909],{11298:(e,t,o)=>{o.d(t,{F:()=>m,Q9:()=>g,Zz:()=>r,_1:()=>d,vp:()=>c,y1:()=>u});var l=o(59749),n=o(8542),a=o(85881),i=o(98497),s=o(39751);const r=async(e,t)=>{console.log("fireDetailDelete.txtId=",e);const o=await(0,n.eC)(e);if(void 0===o)return void alert("\uc0ad\uc81c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.[code:d01]");const i=`${t}/${o.fullIndex}/`;return console.log("fireDetailDelete.treeLocate=",i),(0,l.hZ)((0,l.KR)(a.mr,i),null),(0,l.hZ)((0,l.KR)(a.mr,e),null),"OK"},c=async(e,t,o,i)=>{try{console.log("fireDetailMove.txtLocate=",e),console.log("fireDetailMove.base=",t),console.log("fireDetailMove.txtId=",o),console.log("fireDetailMove.moveId=",i);const s=await(0,n.eC)(e+"/"+i);if(console.log("fireDetailMove.toLocate=",e+"/"+i),console.log("fireDetailMove.toData=",s),void 0===s)return void alert("\uc774\ub3d9\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.[code:m10]");if(void 0===s.fullIndex)return void alert("\uc774\ub3d9\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.[code:m20]");const r=await(0,n.eC)(e+"/"+o);if(console.log("fireDetailMove.fromLocate=",e+"/"+o),console.log("fireDetailMove.fromData=",r),void 0===r)return void alert("\uc774\ub3d9\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.[code:m30]");if(void 0===r.fullIndex)return void alert("\uc774\ub3d9\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.[code:m40]");const c=await(0,n.eC)(`${t}/${r.fullIndex}`);console.log("onMoveSubmit.treeDataLocate=",`${t}/${r.fullIndex}`),console.log("onMoveSubmit.treeData=",c),c.fullIndex=`${s.fullIndex}/sub/${o}`,console.log("onMoveSubmit.treeLocate=",`${t}/${r.fullIndex}`);const d=`${t}/${s.fullIndex}/sub/${o}`;console.log("onMoveSubmit.postLocate=",d),(0,l.hZ)((0,l.KR)(a.mr,d),c);const u=`${t}/${r.fullIndex}`;console.log("onMoveSubmit.delLocate=",u),(0,l.hZ)((0,l.KR)(a.mr,u),null)}catch(s){console.log("catch",s)}},d=async(e,t,o,i)=>{try{console.log("fireDetailMove.base=",e),console.log("fireDetailMove.gbn=",t),console.log("fireDetailMove.txtId=",o),console.log("fireDetailMove.moveId=",i);const s=await(0,n.eC)(`${e}/${t}/sub/${o}`);console.log("onMoveSubmit.treeDataLocate=",`${e}/${t}/sub/${o}`),console.log("onMoveSubmit.treeData=",s);const r=`${e}/${i}/sub/${o}`;console.log("onMoveSubmit.postLocate=",r),(0,l.hZ)((0,l.KR)(a.mr,r),s);const c=`${e}_txt/${o}/gbn`;console.log("onMoveSubmit.gbnLocate=",c),(0,l.hZ)((0,l.KR)(a.mr,c),i);const d=`${e}/${t}/sub/${o}`;console.log("onMoveSubmit.delLocate=",d),(0,l.hZ)((0,l.KR)(a.mr,d),null)}catch(s){console.log("catch",s)}},u=async(e,t,o,n,i)=>{let s=!1,r=e;return void 0===r&&(s=!0,r=(0,l.VC)((0,l.jf)((0,l.KR)(a.mr),o)).key,console.log("fireDetailPostData.newKey=",r)),console.log("fireDetailPostData.txtLocate=",t),(0,l.hZ)((0,l.KR)(a.mr,t+r+"/title"),i.edTitle),(0,l.hZ)((0,l.KR)(a.mr,t+r+"/memo"),i.content),(0,l.hZ)((0,l.KR)(a.mr,t+r+"/date"),i.edDate),(0,l.hZ)((0,l.KR)(a.mr,t+r+"/gbn"),i.edGbn),console.log("fireDetailPostData.fullIndex=",n),void 0!==n&&(s?((0,l.hZ)((0,l.KR)(a.mr,t+r+"/fullIndex"),n),(0,l.hZ)((0,l.KR)(a.mr,`${o}${n}/sub/${r}/title`),i.edTitle)):((0,l.hZ)((0,l.KR)(a.mr,t+r+"/fullIndex"),`${n}/sub/${r}`),console.log(`path=${o}${n}/title`),(0,l.hZ)((0,l.KR)(a.mr,`${o}${n}/title`),i.edTitle))),r},g=async(e,t,o,n)=>{if(console.log("fireDetailDeleteImage.imageList=",n),void 0!==n)for(let i=0;i<n.length;i++){const r=n[i];if("Y"===r.del){(0,l.hZ)((0,l.KR)(a.mr,`${e}/${o}/image/${r.key}`),null),console.log("fireDetailDeleteImage.delete=",`${e}/${o}/image/${r.key}`);const n=await(0,s.KR)(a.Pf,`${t}/${o}/${r.key}.${r.ext}`);(0,s.XR)(n).then(()=>{console.log("fireDetailDeleteImage.storageRef=",n)}).catch(e=>{console.log("fireDetailDeleteImage.error=",e)})}}},m=async(e,t,o,n)=>{for(let r=0;r<n.length;r++){const c=n[r].object,d=(0,i.A)(c.name),u={ext:d,name:c.name,use:"Y"},g=(0,l.VC)((0,l.jf)((0,l.KR)(a.mr),e+"/image")).key;console.log("fireDetailImage.image.newKey",g),console.log("fireDetailImage.image.postData",u),(0,l.hZ)((0,l.KR)(a.mr,`${e}/${o}/image/${g}`),u);const m=await(0,s.KR)(a.Pf,`${t}/${o}/${g}.${d}`),x=await(0,s.D)(m,c);console.log("fireDetailImage.uploadBytes=",x)}}},26232:(e,t,o)=>{o.d(t,{A:()=>R});var l=o(60899),n=o(8145),a=o(74745),i=o(16491),s=o(9950),r=(o(17687),o(39714),o(35254)),c=o.n(r),d=o(76660),u=o(10939),g=o(57988),m=o(2235),x=o(25333),h=o(82053),f=o(46639),p=o(7041),b=o(9449),v=o(44414);const D=e=>{const[t,o]=(0,s.useState)(e.imgList);return t&&t.length>0&&t.map((l,n)=>{const{key:s,name:r,url:c,del:d,ext:u}=l;return void 0!==d?"":(0,v.jsxs)("div",{children:[(0,v.jsxs)(i.A,{display:"flex",flexDirection:"row",alignItems:"center",sx:{justifyContent:"space-between"},children:["mp4"===u&&(0,v.jsx)(h.A,{style:{width:"50px",textAlign:"center"},variant:"body",children:u}),"jpg"===u&&(0,v.jsx)("img",{src:c,style:{width:"50px"}}),(0,v.jsx)("div",{children:r}),(0,v.jsxs)("div",{style:{display:"flex"},children:[c&&(0,v.jsx)(p.Ay,{variant:"outlined",color:"success",onClick:o=>{o.preventDefault(),(o=>{t.map(t=>{if(t.key===o)return e.onInsert(t),!1})})(s)},children:"\ucd94\uac00"}),(0,v.jsx)(x.A,{"aria-label":"delete",onClick:()=>(l=>{console.log("onDeleteClick.key=",l);const n=t.map(e=>(console.log("onDeleteClick.file.key=",e.key),e.key===l&&(e.del="Y"),e));o(n),console.log("onDeleteClick.tempFiles=",n),e.onClick(n)})(s),children:(0,v.jsx)(g.A,{sx:{color:"red"}})})]})]}),(0,v.jsx)(a.A,{})]},n)})},y=e=>{const{control:t}=e,o=(0,b.FH)({control:t,name:"content"}),[l,n]=(0,s.useState)(!1),[r]=(0,s.useState)(!1),[c,d]=(0,s.useState)([]),[p,y]=(0,s.useState)(e.imageList),j=(0,s.useRef)(0);(0,s.useEffect)(()=>{d([])},[]);const $=(0,s.useCallback)(e=>{var t;e.preventDefault(),null!==(t=e.dataTransfer)&&void 0!==t&&t.files&&n(!0)},[]),A=(0,s.useCallback)(e=>{e.preventDefault(),n(!1)},[]),C=(0,s.useCallback)(t=>{let o=[],l=c;o="drop"===t.type?t.dataTransfer.files:t.target.files;for(const e of o){const t=URL.createObjectURL(e);l=[...l,{id:j.current++,object:e,url:t}]}console.log("onChangeFiles.tempFiles=",l),e.onFileUpload(l),d(l)},[c,e]),k=(0,s.useCallback)(t=>{y(t),e.onDelete(t)},[e]),S=(0,s.useCallback)(t=>{const o=c.filter(e=>e.id!==t);e.onFileUpload(o),d(o)},[c,e]),w=(0,s.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),n(!1),C(e)},[C]);return(0,v.jsxs)(i.A,{children:[(0,v.jsxs)(m.A,{variant:"outlined",onDragOver:$,onDragLeave:A,onDrop:w,cursor:"pointer",sx:{"&:hover":{cursor:"pointer"}},style:{border:l?"1px dashed red":"1px dashed gray",paddingLeft:5,paddingRight:5,marginBottom:10,textAlign:"center",cursor:"pointer",backgroundColor:l?"secondary":"transparent",position:"relative"},children:[(0,v.jsx)("input",{type:"file",id:"fileUpload",style:{display:"none"},multiple:!0,onChange:C}),(0,v.jsx)("label",{htmlFor:"fileUpload",children:(0,v.jsxs)(i.A,{display:"flex",flexDirection:"row",alignItems:"center",children:[(0,v.jsx)(x.A,{color:"primary","aria-label":"upload picture",component:"span",children:(0,v.jsx)(u.A,{style:{fontSize:40}})}),(0,v.jsx)(h.A,{children:"\ud30c\uc77c \uc5c5\ub85c\ub4dc"})]})}),r&&(0,v.jsx)(f.A,{size:24,style:{position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)(D,{imgList:p,onInsert:t=>{let l=o;"jpg"===t.ext?l+=`<img src='${t.url}'/>`:"mp4"===t.ext&&(l+=`<video preload="auto" controls="" src='${t.url}'></video>`),e.setContent(l)},onClick:k}),c.length>0&&c.map((e,t)=>{const{id:o,object:{name:l},url:n}=e;return(0,v.jsxs)("div",{children:[(0,v.jsxs)(i.A,{display:"flex",flexDirection:"row",alignItems:"center",sx:{justifyContent:"space-between"},children:[(0,v.jsx)("img",{src:n,style:{width:"50px"}}),(0,v.jsx)("div",{children:l}),(0,v.jsx)(x.A,{"aria-label":"delete",onClick:()=>S(o),children:(0,v.jsx)(g.A,{sx:{color:"red"}})})]},t),(0,v.jsx)(a.A,{})]},t)})]})]})};var j=o(62486),$=o(15777),A=o(51536);const C=e=>{let{onSubmit:t,onCancel:o,isSubmitting:l}=e;return(0,v.jsxs)(i.A,{sx:{my:2,display:"flex"},children:[(0,v.jsx)(p.Ay,{variant:"outlined",color:"success",disabled:l,onClick:e=>{e.preventDefault(),t(e)},children:"\uc800\uc7a5"}),(0,v.jsx)(p.Ay,{type:"button",variant:"outlined",onClick:o,children:"\ucde8\uc18c"})]})};var k=o(4159),S=o.n(k),w=o(29088),M=o(30836);r.Quill.register("modules/imageDrop",$.z),j.A.configure({languages:["javascript","ruby","python","java","cpp","kotlin","sql"]});const I={syntax:{highlight:e=>j.A.highlightAuto(e).value},toolbar:[[{header:"1"},{header:"2"},{header:"3"},{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","video"],["clean"],["code-block"]],imageDrop:!0,clipboard:{matchVisual:!1}},L=["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","video","clean","code-block","code-custom"],R=e=>{const t=(0,s.useRef)(),[o,r]=(0,s.useState)(e.imageList),u=(0,s.useRef)(),g=e.newMode,m=(0,s.useRef)([]),{height:x,width:h}=(0,d.A)(),f=A.c9.now().setZone("Asia/Seoul").toFormat("yyyy-MM-dd"),p={edTitle:e.title,edGbn:e.gbn?e.gbn:"",edDate:e.date?e.date:f,content:e.content},{register:D,handleSubmit:j,trigger:$,control:k,setValue:R,getValues:K,watch:Y,formState:{errors:Z,isSubmitting:z}}=(0,b.mN)({mode:"onChange",defaultValues:p});D("edDate",{required:!0,minLength:10}),D("edGbn",{required:!0}),(0,s.useEffect)(()=>{m.current=[],t.current=e.content,u.current=!1},[e.content]);const V=async t=>{console.log("onPostSubmit.newMode=",g),console.log("onPostSubmit.values=",t),g?e.onNewSubmit(t,m.current):await e.onPostSubmit(t,o,m.current)};const F=Y("content");return(0,v.jsx)(i.A,{sx:{my:2,mb:"50px",width:"100%"},children:(0,v.jsxs)("form",{onSubmit:j(V),style:{width:"100%",minHeight:"300px",maxWidth:`${h}px - 20px`,maxHeight:{height:x},display:"flex",flexDirection:"column"},children:[(0,v.jsx)(C,{onSubmit:e=>(console.log("onSaveBtn.content=",t.current),console.log("onSaveBtn.edGbn=",K("edGbn")),console.log("onSaveBtn.errors=",Z),console.log("onSaveBtn.isSubmitting=",z),void j(V)()),onCancel:e.onCancel,isSubmitting:z}),(0,v.jsx)(y,{control:k,onDelete:e=>{console.log("onDelete.imageList=",e),r(e)},onInsert:e=>{let o=t.current;"jpg"===e.ext?o+=`<img src='${e.url}'/>`:"mp4"===e.ext&&(o+=`<video preload="auto" controls="" src='${e.url}'></video>`),t.current=o},setContent:e=>{t.current=e},onFileUpload:e=>{console.log("handleFileUpload",e),m.current=e},imageList:e.imageList}),(0,v.jsxs)(l.Ay,{container:!0,spacing:3,children:[(0,v.jsx)(l.Ay,{item:!0,xs:12,md:12,children:(0,v.jsx)(n.A,{...D("edTitle",{required:"\ud574\ub2f9 \ud544\ub4dc\ub294 \ud544\uc218\uc785\ub2c8\ub2e4.",minLength:{value:3,message:"3\uae00\uc790 \uc774\uc0c1 \uc785\ub825\ud574\uc8fc\uc138\uc694."}}),fullWidth:!0,label:"\uc81c\ubaa9",placeholder:"\uc81c\ubaa9",variant:"filled",size:"small",error:!!Z.edTitle})}),(0,v.jsx)(w.A,{id:"edGbn",name:"edGbn",label:"\uad6c\ubd84",mdSize:6,control:k,defaultValue:K("edGbn"),selectList:[{value:"",text:"None"},{value:"react",text:"React"},{value:"mui",text:"MUI"},{value:"android",text:"Android"},{value:"java",text:"JAVA"},{value:"image",text:"\uadf8\ub9bc / \uc0ac\uc9c4"},{value:"etc",text:"\uae30\ud0c0"}],error:!!Z.edGbn,onChange:e=>{e.preventDefault();const t=e.target.value;console.log("edGbn=",K("edGbn")),R("edGbn",t)}}),(0,v.jsx)(M.A,{id:"edDate",label:"\uc77c\uc790",mdSize:6,value:S()(K("edDate")),...D("edDate"),defaultValue:S()(K("edDate")),onChange:function(e){console.log("handleChangeDate=",e);let t=S()(e);t.format("YYYY-MM-DD HH:mm:ss"),console.log("handleChangeDate.dayjs=",t.format("YYYY-MM-DD HH:mm:ss")),R("edDate",t.format("YYYY-MM-DD")),$("edDate")}})]}),(0,v.jsx)(c(),{fullWidth:!0,theme:"snow",id:"content",name:"content",type:"div",value:F,style:{minWidth:"400px",border:"1px solid primary.main",minHeight:"200px",height:"400px",maxHeight:"450px"},sx:{width:`${h}px - 50px`},modules:I,formats:L,onChange:function(e){console.log("handleChange=",e),t.current=e,R("content",e),$("content")}}),(0,v.jsx)(a.A,{})]})})}},29088:(e,t,o)=>{o.d(t,{A:()=>s});o(9950);var l=o(60899),n=o(70006),a=o(23266),i=o(44414);const s=e=>{let{label:t,defaultValue:o=1,selectList:s,variant:r,margin:c,xsSize:d=12,mdSize:u=6,...g}=e;console.log("SinySelect.defaultValue=",o);const m=`${name}-label`;return(0,i.jsx)(l.Ay,{item:!0,xs:d,md:u,children:(0,i.jsx)(n.A,{labelId:m,label:t,onChange:g.onChange,defaultValue:o,variant:r||"filled",margin:c||"none",fullWidth:!0,size:"small",...g,children:s.map((e,t)=>(0,i.jsx)(a.A,{value:e.value,children:e.text},t))})})}},30836:(e,t,o)=>{o.d(t,{A:()=>i});var l=o(60899),n=o(44608),a=(o(9950),o(44414));const i=e=>{let{id:t,label:o,defaultValue:i,onChange:s,xsSize:r=12,mdSize:c=6,...d}=e;return(0,a.jsx)(l.Ay,{item:!0,xs:r,md:c,children:(0,a.jsx)(n.l,{variant:"filled",format:"YYYY-MM-DD",id:t,label:o,defaultValue:i,onChange:s,fullWidth:!0,slotProps:{textField:{size:"small"}},sx:{"& .MuiInputBase-root":{}},...d})})}},53743:(e,t,o)=>{o.d(t,{X:()=>r,L:()=>s});var l=o(62486),n=(o(18088),o(59254)),a=o(44414);l.A.configure({languages:["javascript","ruby","python","java","cpp","kotlin","sql"]});const i=(0,n.Ay)("pre")(e=>{let{props:t}=e;return{...t,color:"rgb(206 204 226)",backgroundColor:"rgb(27 27 27 / 87%)",textAlign:"left",paddingLeft:"3px",width:"100%",wordBreak:"break-word",wordWrap:"break-word",whiteSpace:"pre",overflowX:"auto",borderLeft:"2px solid #358ccb"}});function s(e){let t=0;const o=e.replace(/<span class="hljs-comment">(.|\n)*?<\/span>/g,e=>e.replace(/\r?\n/g,()=>'\n<span class="hljs-comment">')),l=o.split(/\r?\n/).length-1;return`<table class='code-table'>${o.split(/\r?\n/).map((e,o)=>l===o&&""===e?"":`<tr>\n              <td class='line-number' data-pseudo-content=${++t}></td>\n              <td class='line-content'>${e}</td>\n            </tr>`).join("")}</table>`}function r(e){const t=s(l.A.highlightAuto(e.text).value);return(0,a.jsx)(i,{...e,children:(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:t}})})}},98497:(e,t,o)=>{function l(e){var t=e.length,o=e.lastIndexOf(".");return e.substring(o+1,t).toLowerCase()}o.d(t,{A:()=>l})}}]);