"use strict";(self.webpackChunksiny_memo=self.webpackChunksiny_memo||[]).push([[1889],{21587:(e,t,n)=>{n.d(t,{ZP:()=>r});var o=n(31095),i=n(42830),l=n(46417);function s(e){let{children:t,...n}=e;return(0,l.jsx)(o.Z,{variant:"contained",component:i.E.div,whileHover:{scale:1,transition:{duration:.3}},whileTap:{scale:.9},...n,children:t})}s.defaultProps={type:"scale"};const r=s},41889:(e,t,n)=>{n.r(t),n.d(t,{default:()=>E});var o=n(47825),i=n(47313),l=n(37029),s=n(77789),r=n(85461),c=n(96821),d=n(19705),a=n(81171),u=n(46417);const x=(0,a.Z)((0,u.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel"),m=(0,a.Z)((0,u.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");var h=n(71207),p=n(51997),g=n(17592),j=n(70501),f=n(41806),v=n(9019),b=n(24631),Z=n(47131),y=n(61113),T=n(19536),C=n(12725),k=n(94762),w=n(75627),S=n(21587),D=n(2024);var I=n(59941);const L=(0,g.ZP)(j.Z)((e=>{let{theme:t}=e;return{backgroundColor:"dark"===t.palette.mode?"#1A2027":"#fff",...t.typography.body2,padding:t.spacing(1),textAlign:"center",color:t.palette.text.secondary}})),P=e=>{var t;const{userId:n}=e,[o,l]=(e=>{const[t,n]=(0,i.useState)(e),[o,l]=(0,i.useState)([]),[s,r]=(0,i.useState)(),c=(0,i.useCallback)((e=>{const t=(0,C.IO)((0,C.iH)(D.h3,e),(0,C.g2)("title"));(0,C.jM)(t,(e=>{if(!e.exists())return;const t=e.val(),n=[];for(let l in t){const e=t[l];e.id=l,e.sort="".concat(e.ing,"_").concat(e.date,"_").concat(e.title),(""===s||void 0===s||(e.memo+"").toLowerCase().indexOf(s.toLowerCase())>-1)&&n.push(e)}const o=n.sort(((e,t)=>e.sort>t.sort?1:-1)).filter((e=>"1"===e.ing)),i=n.sort(((e,t)=>e.sort>t.sort?-1:1)).filter((e=>"2"===e.ing));l([...o,...i])}))}),[s]);return(0,i.useEffect)((()=>{""!==t&&c(t)}),[c,t,s]),[o,n,r]})(""),s=k.ou.now().setZone("Asia/Seoul").toFormat("yyyy-MM-dd"),r={edTitle:"",edDate:s},{register:c,handleSubmit:d,reset:a,getValues:g,setFocus:j,formState:{errors:P,isSubmitting:H,submitCount:E}}=(0,w.cI)({mode:"submit ",defaultValues:r}),B=(0,i.useRef)();(0,i.useEffect)((()=>{c("edTitle",{required:"\ud574\ub2f9 \ud544\ub4dc\ub294 \ud544\uc218\uc785\ub2c8\ub2e4.",minLength:{value:3,message:"3\uae00\uc790 \uc774\uc0c1 \uc785\ub825\ud574\uc8fc\uc138\uc694."}}),c("edDate",{required:!0,minLength:10})})),(0,i.useEffect)((()=>{void 0!==n&&l("todo/".concat(n))}),[n]);const F=()=>{e.handleGoogleLogin()};if(void 0===n)return(0,u.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",marginTop:"50px",marginBottom:"100px"},children:[(0,u.jsx)(L,{children:"\ub85c\uadf8\uc778\uc744 \ud574\uc57c \uc774\uc6a9\uac00\ub2a5\ud569\ub2c8\ub2e4."}),(0,u.jsx)(S.ZP,{type:"button",size:"small",variant:"outlined",color:"success",sx:{mt:30},onClick:F,children:"\ub85c\uadf8\uc778"})]});function M(e,t){console.log("onSubmit.data=",e),console.log("onSubmit.e=",t),console.log("onSubmit.todoId=",B.current),console.log("onSubmit.errors=",P);const o="todo/".concat(n,"/");if(void 0===B.current){const e=(0,C.VF)((0,C.iU)((0,C.iH)(D.h3),o)).key;console.log("onSubmit.newKey",e),B.current=e}(0,C.t8)((0,C.iH)(D.h3,o+B.current+"/title"),e.edTitle),(0,C.t8)((0,C.iH)(D.h3,o+B.current+"/date"),e.edDate),(0,C.t8)((0,C.iH)(D.h3,o+B.current+"/ing"),"1"),B.current=void 0,a({edTitle:"",edDate:s})}return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(f.Z,{sx:{width:"100%",flexGrow:1,m:2},children:[(0,u.jsx)("div",{id:"back-to-top-anchor"}),(0,u.jsx)("form",{onSubmit:d(M,(e=>console.error(e))),children:(0,u.jsxs)(v.ZP,{container:!0,spacing:2,columns:{xs:12,md:12},children:[(0,u.jsx)(v.ZP,{item:!0,xs:12,children:(0,u.jsx)(b.Z,{type:"date",style:{paddingTop:"2px"},fullWidth:!0,placeholder:"\uc77c\uc790",...c("edDate"),variant:"standard"})}),(0,u.jsx)(v.ZP,{item:!0,xs:9,sm:10,children:(0,u.jsxs)(f.Z,{sx:{display:"flex",alignItems:"normal",justifyContent:"center"},children:[(0,u.jsx)(b.Z,{fullWidth:!0,style:{paddingTop:"2px"},placeholder:"Todo Input",...c("edTitle"),variant:"standard",error:!!P.edTitle}),(0,u.jsx)(Z.Z,{style:{marginTop:"-4px"},"aria-label":"bookmark",onClick:e=>(e=>{e.preventDefault(),console.log("onCancel.item="),a({edTitle:""}),B.current=void 0})(e),children:(0,u.jsx)(x,{sx:{color:"action.active"}})})]})}),(0,u.jsx)(v.ZP,{item:!0,xs:3,sm:2,children:(0,u.jsx)(S.ZP,{variant:"outlined",fullWidth:!0,onClick:e=>async function(e){console.log("onInputBtn.errors=",P),console.log("onInputBtn.isSubmitting=",H),console.log("onInputBtn.edDate=",g("edDate")),console.log("onInputBtn.edTitle=",g("edTitle")),console.log("onInputBtn.submitCount=",E),e.preventDefault(),d(M)()}(e),color:"success",size:"small",disabled:H,children:"\uc785\ub825"})}),(0,u.jsx)(v.ZP,{item:!0,xs:12,sm:12,children:null!==P&&void 0!==P&&P.edTitle?(0,u.jsx)("p",{className:"error",children:null===(t=P.edTitle)||void 0===t?void 0:t.message}):null})]})}),null===o||void 0===o?void 0:o.map(((e,t)=>(0,u.jsxs)("div",{children:[(0,u.jsxs)(f.Z,{sx:{display:"plex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[(0,u.jsx)(y.Z,{component:"div",variant:"body2",color:"text.prime",children:e.date}),(0,u.jsxs)(f.Z,{sx:{display:"plex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:["1"===e.ing&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(Z.Z,{"aria-label":"\uc644\ub8cc",onClick:t=>((e,t)=>{e.preventDefault(),window.confirm("\uc644\ub8cc\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(0,C.t8)((0,C.iH)(D.h3,"todo/".concat(n,"/").concat(t.id,"/ing")),"2")})(t,e),children:(0,u.jsx)(m,{})}),(0,u.jsx)(Z.Z,{"aria-label":"edit",onClick:t=>((e,t)=>{e.preventDefault(),console.log("onEdit.item=",t),j("edTitle"),a({edTitle:t.title,edDate:t.date}),B.current=t.id,console.log("onEdit.todoId=",B.current)})(t,e),children:(0,u.jsx)(h.Z,{})})]}),(0,u.jsx)(Z.Z,{"aria-label":"delete",onClick:t=>((e,t)=>{e.preventDefault(),window.confirm("\uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(0,C.t8)((0,C.iH)(D.h3,"todo/".concat(n,"/").concat(t.id)),null)})(t,e),children:(0,u.jsx)(p.Z,{sx:{color:"rgba(120, 0, 0, 3)"}})})]})]}),(0,u.jsx)(y.Z,{component:"div",variant:"body",color:"text.prime",children:e.title}),(0,u.jsx)(T.Z,{})]},t))),(0,u.jsx)(I.d,{})]}),(0,u.jsx)(T.Z,{})]})};var H=n(78419);const E=()=>{const{user:e,handleGoogleLogin:t}=(0,c.$)();return(0,i.useEffect)((()=>{document.querySelector("title").innerHTML="".concat(H.Z.templateName," :: Todo")}),[]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(d.O,{}),(0,u.jsxs)(o.Z,{maxWidth:"lg",sx:{mt:3},children:[(0,u.jsx)(r.Z,{title:"Todo",enable:!0}),(0,u.jsx)(i.Suspense,{fallback:(0,u.jsx)(l.g,{}),children:(0,u.jsx)(P,{userId:null===e||void 0===e?void 0:e.uid,handleGoogleLogin:t})})]}),(0,u.jsx)(s.Z,{}),(0,u.jsx)("br",{}),(0,u.jsx)("br",{})]})}}}]);