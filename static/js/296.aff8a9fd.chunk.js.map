{"version":3,"file":"static/js/296.aff8a9fd.chunk.js","mappings":"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","sources":["components/BibleBookmarkText.js","firebase/useBibleBookmark.js","components/button/BibleButtonlist.js","views/bible/BibleMain.js"],"sourcesContent":["import { Divider, Grid } from '@mui/material';\r\nimport { HtmlText } from './HtmlText';\r\nimport { LinkItem } from './LinkItem';\r\nimport { useBibleBookmark } from '../firebase/useBibleBookmark';\r\n\r\nconst BibleBookmarkText = () => {\r\n  // const data = new Array();\r\n  const { query } = useBibleBookmark();\r\n  const data = query.data;\r\n\r\n  // console.log('BibleText.dataText=', props.dataText);\r\n  // console.log('BibleBookmarkText.data=', data);\r\n\r\n  if (data === undefined || data === null) return;\r\n\r\n  return (\r\n    <>\r\n      {data.map((item, idx) => {\r\n        // console.log('BibleText.item=', item);\r\n        return (\r\n          <Grid\r\n            container\r\n            spacing={2}\r\n            columns={{ xs: 5, sm: 7, md: 10, lg: 12 }}\r\n            key={idx}\r\n            id={`id_${idx + 1}`}\r\n          >\r\n            <Grid item xs={1} md={1}>\r\n              <LinkItem\r\n                to={`/bible/${item.cd1}_${item.cd2}_${item.cd3}`}\r\n                state={{ cd4: item.cd4 }}\r\n              >\r\n                {item.nm}\r\n              </LinkItem>\r\n            </Grid>\r\n            <Grid item xs={4} sm={6} md={9} lg={11}>\r\n              <HtmlText show={true} text={item.txt} />\r\n            </Grid>\r\n          </Grid>\r\n        );\r\n      })}\r\n      <Divider />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default BibleBookmarkText;\r\n","import { get, onValue, ref, set } from 'firebase/database';\r\nimport { useEffect, useState } from 'react';\r\nimport { firebaseDB } from './firebase';\r\nimport { useFireUser } from './useFireUser';\r\nimport { QueryClient, useQuery, useSuspenseQuery } from '@tanstack/react-query';\r\n\r\n// 북마크 관련\r\n// use :\r\n// const bookmark = useBibleBookmark();\r\nexport const useBibleBookmark = () => {\r\n  const queryClient = new QueryClient();\r\n  const { user } = useFireUser();\r\n\r\n  // const queryClient = new QueryClient();\r\n  // const id = queryClient.getQueryData('userId');\r\n  // console.log('useBibleBookmark.id=', id);\r\n  // let userId; // 'I3cTgdCxwjhBBno4mtZYvnODPJu1';\r\n\r\n  const query = useQuery({\r\n    queryKey: ['useBibleBookmark'],\r\n    // queryFn: () => new Promise(() => {getBookmarkData()}),\r\n    queryFn: ()=> getBookmarkData(),\r\n    // The query will not execute until the userId exists\r\n    enabled: false,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if(user !== undefined) {\r\n      // console.log('useEffect.user=', user);\r\n      query.refetch();\r\n    }\r\n  }, [user]);\r\n\r\n  async function getBookmarkData() {\r\n    // console.log('getBookmarkData.user', user.uid);\r\n    if (user.uid === undefined) {\r\n      return new Error('Error undefined');\r\n    }\r\n    const locate = ref(firebaseDB, `bible_mark/${user.uid}`);\r\n\r\n    const snapshot = await get(locate);\r\n    const result = new Array();\r\n    // console.log('useBookmark.snapshot', snapshot);\r\n\r\n    if (!snapshot.exists()) {\r\n      // console.log('getBookmarkData.exists', snapshot);\r\n      return new Error('Error exists');\r\n    } else {\r\n      const data = snapshot.val();\r\n      // console.log('useBookmark.data=', data);\r\n      Object.values(data).map((item) => {\r\n        item.bookmark === 'Y' && result.push(item);\r\n      });\r\n      // console.log('getBookmarkData.result=', result);\r\n      return result;\r\n    }\r\n  }\r\n\r\n  // song_mark\r\n  // bible_mark\r\n  const setBibleBookmark = (item) => {\r\n    if (user === undefined) return;\r\n\r\n    /* \r\n    {nm: '잠31:2', text: '내 아들아 내가 무엇을 말하랴 내 태에서 난 아들아 내가 무엇을 말하랴 서원대로 얻은 아들아 내가 무엇을 말하랴', \r\n    key: '1_20', cd1: '1', cd2: '20', …}\r\n    */\r\n\r\n    if (user === undefined) return;\r\n\r\n    let value = 'N';\r\n    if (item.bookmark === undefined || item.bookmark === 'N') {\r\n      value = 'Y';\r\n    }\r\n    item.bookmark = value;\r\n\r\n    // console.log('setBibleBookmark.item=', item);\r\n\r\n    const locate = `bible_mark/${user.uid}/${item.cd1}_${item.cd2}_${item.cd3}_${item.cd4}`;\r\n    set(ref(firebaseDB, locate), item);\r\n\r\n    queryClient.invalidateQueries({ queryKey: ['useBibleBookmark'] })\r\n    query.refetch();\r\n\r\n    /*     const val = bookmark === 'Y' ? 'N' : 'Y';\r\n    setBookmark(val);\r\n\r\n    */\r\n  }\r\n\r\n  // console.log('useBibleBookmark.query.data=', query.data);\r\n  return {query, setBibleBookmark};\r\n  //return query\r\n}; // end of useBibleBookmark\r\n","import { Grid } from '@mui/material';\r\nimport AniButton from './AniButton';\r\nimport { TitleItem } from '../TitleItem';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\n// 성경버튼리스트\r\n// use :\r\n/*\r\n<BibleButtonlist\r\n  bibleData={data[0]}\r\n  nm={'구약'}\r\n/>\r\n*/\r\nexport const BibleButtonlist = ({ bibleData, nm }) => {\r\n  const navigate = useNavigate();\r\n  const data = new Array();\r\n\r\n  //key 1 : 구약 39\r\n  //key 2 : 신약 27\r\n  // const len = key === 1 ? 39 : 27;\r\n  Object.values(bibleData).map((item, idx) => {\r\n    // console.log('SubTreeItem.for', idx, item);\r\n    if (item.key === undefined || item.nm === undefined) return;\r\n    data.push(item);\r\n  });\r\n\r\n  // console.log('bibleData.bibleData=', bibleData)\r\n\r\n  const onDetail = (id) => {\r\n    // console.log('onDetail.id=', id);\r\n    if (id === '1') {\r\n      navigate(`/bible/old`);\r\n    } else if (id === '2') {\r\n      navigate(`/bible/new`);\r\n    } else if (id === '3') {\r\n      navigate(`/bible/song`);\r\n    } else if (id === 'search') {\r\n      navigate(`/bible/search`);\r\n    } else navigate(`/bible/${id}`);\r\n  };\r\n\r\n  // console.log('BibleButtonlist.nm=', nm);\r\n  //구약 : 'primary'\r\n  //신약 : 'success'\r\n  const color = bibleData.key === '1' ? 'primary' : 'success';\r\n\r\n  return (\r\n    <>\r\n      <TitleItem>{nm}</TitleItem>\r\n\r\n      <Grid container spacing={2} columns={{ xs: 4, md: 12 }}>\r\n        {data?.map((item, idx) => {\r\n          // if (item.key === undefined || item.nm === undefined)\r\n          //   return <div key={idx}></div>;\r\n\r\n          return (\r\n            <Grid item xs={2} md={3} key={idx}>\r\n              <AniButton\r\n                type='button'\r\n                variant='outlined'\r\n                color={color}\r\n                onClick={() => onDetail(item.key, item)}\r\n                fullWidth\r\n              >\r\n                {item.nm}\r\n              </AniButton>\r\n            </Grid>\r\n          );\r\n        })}\r\n      </Grid>\r\n    </>\r\n  );\r\n};\r\n","import KeyboardArrowUpIcon from '@mui/icons-material/KeyboardArrowUp';\r\nimport Fab from '@mui/material/Fab';\r\nimport React, { Suspense } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport BibleBookmarkText from '../../components/BibleBookmarkText';\r\nimport { BibleButtonlist } from '../../components/button/BibleButtonlist';\r\nimport { Loading } from '../../components/Loading';\r\nimport { ScrollToTop } from '../../components/screen/ScrollToTop';\r\nimport '../MemoDetail.css';\r\n\r\nconst BibleMain = (props) => {\r\n  // const { data } = useTreeBibleData();\r\n  const data = props.data;\r\n  const location = useLocation();\r\n  // const { user } = useFireUser();\r\n  const { pathname } = location;\r\n\r\n  // console.log('BibleMain.data=', data);\r\n\r\n  const onDetail = (id, item) => {\r\n    // console.log('onDetail', id, item);\r\n    props.onDetail(id, item);\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div id=\"back-to-top-anchor\"></div>\r\n      <BibleBookmarkText />\r\n      <Suspense fallback={<Loading />}>\r\n        {data && data.length > 2 && pathname !== '/bible/new' && (\r\n          <>\r\n            <BibleButtonlist bibleData={data[0]} nm={'구약'} />\r\n          </>\r\n        )}\r\n      </Suspense>\r\n      <Suspense fallback={<Loading />}>\r\n        {data && data.length > 2 && pathname !== '/bible/old' && (\r\n          <>\r\n            <BibleButtonlist\r\n              // onDetail={onDetail}\r\n              bibleData={data[1]}\r\n              nm={'신약'}\r\n            />\r\n          </>\r\n        )}\r\n      </Suspense>\r\n      <ScrollToTop {...props} id={'#back-to-top-anchor'}>\r\n        <Fab color=\"primary\" size=\"small\" aria-label=\"scroll back to top\">\r\n          <KeyboardArrowUpIcon />\r\n        </Fab>\r\n      </ScrollToTop>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default BibleMain;\r\n"],"names":["BibleBookmarkText","query","useBibleBookmark","data","undefined","_jsxs","_Fragment","children","map","item","idx","Grid","container","spacing","columns","xs","sm","md","lg","id","concat","_jsx","LinkItem","to","cd1","cd2","cd3","state","cd4","nm","HtmlText","show","text","txt","Divider","queryClient","QueryClient","user","useFireUser","useQuery","queryKey","queryFn","async","uid","Error","locate","ref","firebaseDB","snapshot","get","result","Array","exists","val","Object","values","bookmark","push","getBookmarkData","enabled","useEffect","refetch","setBibleBookmark","value","set","invalidateQueries","BibleButtonlist","_ref","bibleData","navigate","useNavigate","key","color","TitleItem","AniButton","type","variant","onClick","onDetail","fullWidth","props","location","useLocation","pathname","React","Suspense","fallback","Loading","length","ScrollToTop","Fab","size","KeyboardArrowUpIcon"],"sourceRoot":""}