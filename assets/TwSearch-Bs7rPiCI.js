import{j as s,v as g,aK as j,aP as b,aQ as T,r as a,u as w,I as D,k as L,c as N,aR as R,R as M,y as W}from"./index-CPSBwlOO.js";import{T as C}from"./Footer-CbfK390d.js";import{L as l}from"./Loading-Bp6mAYPT.js";import{u as E}from"./useQuery-BgMdX0oY.js";import{b as I,T as _}from"./TailList-Bji3L6Zo.js";import q from"./TwDetail-BM2RBAPb.js";import{f as F}from"./fireMemoDetail-Cqw6uwKl.js";import{T as P}from"./TwBadge-CpWJpqdj.js";import"./Divider-BmyVlHWi.js";import"./dividerClasses-COlCZOv-.js";import"./Link-DHp72JhJ.js";import"./Container-Dce-qEIt.js";import"./styled-LXhoKDBy.js";import"./CircularProgress-Dk57mbU1.js";import"./useBaseQuery-B55M03QU.js";import"./HtmlCode-Bm5dAOFn.js";import"./copy-VIwE5YPZ.js";import"./toPropertyKey-DCwh5dYN.js";import"./SinyImageList-B99I7Bcx.js";import"./index-Chjiymov.js";import"./ImageListItem-DCGGYWep.js";import"./isMuiElement-Bo5VC5fy.js";import"./ComponentCard-gXguAFO4.js";import"./CodeText-DRCLr2Yt.js";import"./commonUtil-BS5d7XYx.js";import"./AniButton-DlYkdnda.js";import"./Button-7laBIn3Q.js";import"./fireDatabase-BA1WhNvM.js";import"./fireStorage-BmY7lRAk.js";const B=({uid:t,state:r})=>{const e=E({queryKey:["blogMainSearch",r&&r?.s?r.s:""],queryFn:()=>I(r?.s,t===g?g:"")});return e.isLoading?s.jsx(l,{}):e.error?s.jsxs("div",{children:["Error: ",e.error.message]}):s.jsx(_,{query:e,index:"1",s:r&&r?.s?r.s:"",sx:{mt:2}})},K=({uid:t,state:r})=>{const[e,c]=j(b),[i,n]=j(T);return a.useEffect(()=>{i!==r.s&&(c(m=>({...m,[r.s]:e[r.s]===void 0?1:e[r.s]+1})),n(r.s))},[r]),s.jsx(Q,{title:"Search",className:"mt-6",children:s.jsx("div",{className:"mt-5"})})},Q=({title:t,children:r,className:e=""})=>{const c=w(),i=D(b),n=[];for(const o in i)n.push(o);const m=o=>{c("/tw/search",{state:{s:o}})};return s.jsxs("div",{className:`rounded-2xl border border-gray-200 
      bg-white dark:border-gray-800 dark:bg-white/[0.03] 
      overflow-hidden w-full ${e}
      mb-5
      `,children:[s.jsx("div",{className:"flex flex-col px-4 py-2",children:s.jsx("h3",{className:"text-base font-medium text-gray-800 dark:text-white/90",children:t})}),s.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-5 lg:grid-cols-7 ga-1 p-2 sm:p-4 border-t bg-stone-100 dark:bg-stone-950 border-gray-100 dark:border-gray-800 ",children:[n.map((o,u)=>s.jsx("div",{children:s.jsx(P,{className:"cursor-pointer",variant:"light",color:"dark",onClick:()=>m(o),children:o})},u)),s.jsx("div",{children:r})]})]})};function gs(){const t=L(),r=t.state,{user:e}=N(),c=a.useRef(r.s),[i,n]=a.useState(),[m]=R(),o=m.get("g"),[u,y]=a.useState(),[S,p]=a.useState(!0),x=o==="h"?"home":"memo";return a.useEffect(()=>{const v=async f=>{if(f!==""){const k=await F(x,e?.uid,f,c.current);y(k),p(!1)}};p(!0);const h=t.pathname.split("/"),d=h.length>2?h[h.length-1]:"";n(d),d!=null&&d!=="search"&&v(d)},[t.pathname]),s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",alignContent:"center",justifyContent:"center"},children:[s.jsxs(a.Suspense,{fallback:s.jsx(l,{}),children:[s.jsx(M,{children:s.jsx(W,{path:"/:memoId",element:s.jsx(q,{rootDb:x,isLoading:S,memoDetailData:u})})}),i==="search"?s.jsx(K,{uid:e?.uid,state:r}):"",e===null?s.jsx(l,{}):i==="search"&&r.s!==""&&s.jsx(a.Suspense,{fallback:s.jsx(l,{}),children:s.jsx(B,{index:"1",uid:e?.uid,state:r})})]}),s.jsx(C,{})]})}export{gs as default};
