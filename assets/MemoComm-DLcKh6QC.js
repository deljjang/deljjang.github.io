const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MemoSheetGrid-Cp9nxeoj.js","assets/index-BQN1J123.js","assets/router-v4BRDFYV.js","assets/vendor-CCYiWZgt.js","assets/index-BSdnneOM.css","assets/App-BDW7-lXS.js","assets/App-C0oX4rhs.css","assets/IpInfo-BiOCxoqC.js","assets/close-NDi5wdfK.js","assets/MemoDetailEdit-ka1i3_nl.js","assets/useWindowDimensions-D4V3h9qm.js","assets/HtmlBadge-B_rWWyJz.js","assets/luxon-MrBZWWSV.js","assets/TwCheckbox-C7L1v1jc.js","assets/TwTextArea-CMRiNkmj.js","assets/TwDatePicker-BtHnb_pM.js","assets/TwSelect-C3DjngeP.js","assets/MemoDetailEdit-CXguKeju.css","assets/MemoDetailUtil-LpcXszEY.js","assets/TwTodo-CZonB6j4.js"])))=>i.map(i=>d[i]);
import{j as l,_ as ut}from"./index-BQN1J123.js";import{aU as cs,aV as us,aW as De,aX as Zt,aY as Qn,aZ as eo,a_ as ds,a$ as hs,b0 as ms,b1 as fs,b2 as ps,b3 as gs,b4 as to,b5 as vs,b6 as xs,b7 as Ut,b8 as Ue,b9 as no,ba as hn,bb as oo,bc as kt,bd as Xt,a1 as bs,a3 as ws,a4 as ys,be as Es,a7 as Cs,f as we,bf as dt,aA as ht,n as Ke,g as Me,h as pe,bg as ks,bh as mn,a as H,bi as Ns,bj as so,aD as js,ad as Ss,bk as Ms,bl as Nt,bm as mt,w as ee,l as me,bn as Ls,bo as fn,bp as _s,bq as pn,br as Ts,K as Is,bs as Ps,bt as Rs,bu as Os,bv as Ds,s as As,bw as At,m as lt,bx as zs,P as gn,_ as vn,H as $s,ae as Fs,af as Ws,by as Hs,bz as Vs,bA as ro,bB as xn,bC as Bs,bD as Zs,bE as Us,bF as Xs,bG as Ys,bH as bn,bI as Ks,bJ as Gs,bK as qs,av as Js,bL as Qs,bM as er,bN as tr,aw as nr,bO as or,bP as sr,u as rr,bQ as jt}from"./App-BDW7-lXS.js";import{r,d as ar,c as lr,a as ao,u as ft,N as wn,R as Ge,e as ir,f as Ie}from"./router-v4BRDFYV.js";import{I as cr}from"./IpInfo-BiOCxoqC.js";import{S as lo}from"./close-NDi5wdfK.js";const ot=new WeakMap;let st;const io=(e,t,n)=>(o,s)=>s&&s[0]?s[0][e+"Size"]:us(o)&&"getBBox"in o?o.getBBox()[t]:o[n],ur=io("inline","width","offsetWidth"),dr=io("block","height","offsetHeight");function hr({target:e,borderBoxSize:t}){ot.get(e)?.forEach(n=>{n(e,{get width(){return ur(e,t)},get height(){return dr(e,t)}})})}function mr(e){e.forEach(hr)}function fr(){typeof ResizeObserver>"u"||(st=new ResizeObserver(mr))}function pr(e,t){st||fr();const n=cs(e);return n.forEach(o=>{let s=ot.get(o);s||(s=new Set,ot.set(o,s)),s.add(t),st?.observe(o)}),()=>{n.forEach(o=>{const s=ot.get(o);s?.delete(t),s?.size||st?.unobserve(o)})}}const rt=new Set;let Re;function gr(){Re=()=>{const e={get width(){return window.innerWidth},get height(){return window.innerHeight}};rt.forEach(t=>t(e))},window.addEventListener("resize",Re)}function vr(e){return rt.add(e),Re||gr(),()=>{rt.delete(e),!rt.size&&typeof Re=="function"&&(window.removeEventListener("resize",Re),Re=void 0)}}function xr(e,t){return typeof e=="function"?vr(e):pr(e,t)}function co(e,t){let n;const o=()=>{const{currentTime:s}=t,i=(s===null?0:s.value)/100;n!==i&&e(i),n=i};return De.preUpdate(o,!0),()=>Zt(o)}function br(...e){const t=!Array.isArray(e[0]),n=t?0:-1,o=e[0+n],s=e[1+n],a=e[2+n],i=e[3+n],c=Qn(s,a,i);return t?c(o):c}function wr(e,t,n){const o=e.get();let s=null,a=o,i;const c=typeof o=="string"?o.replace(/[\d.-]/g,""):void 0,u=()=>{s&&(s.stop(),s=null)},m=()=>{u(),s=new ds({keyframes:[En(e.get()),En(a)],velocity:e.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...n,onUpdate:i})};if(e.attach((d,h)=>{a=d,i=f=>h(yn(f,c)),De.postRender(m)},u),eo(t)){const d=t.on("change",f=>e.set(yn(f,c))),h=e.on("destroy",d);return()=>{d(),h()}}return u}function yn(e,t){return t?e+t:e}function En(e){return typeof e=="number"?e:parseFloat(e)}const yr=50,Cn=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),Er=()=>({time:0,x:Cn(),y:Cn()}),Cr={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function kn(e,t,n,o){const s=n[t],{length:a,position:i}=Cr[t],c=s.current,u=n.time;s.current=e[`scroll${i}`],s.scrollLength=e[`scroll${a}`]-e[`client${a}`],s.offset.length=0,s.offset[0]=0,s.offset[1]=s.scrollLength,s.progress=hs(0,s.scrollLength,s.current);const m=o-u;s.velocity=m>yr?0:ms(s.current-c,m)}function kr(e,t,n){kn(e,"x",t,n),kn(e,"y",t,n),t.time=n}function Nr(e,t){const n={x:0,y:0};let o=e;for(;o&&o!==t;)if(fs(o))n.x+=o.offsetLeft,n.y+=o.offsetTop,o=o.offsetParent;else if(o.tagName==="svg"){const s=o.getBoundingClientRect();o=o.parentElement;const a=o.getBoundingClientRect();n.x+=s.left-a.left,n.y+=s.top-a.top}else if(o instanceof SVGGraphicsElement){const{x:s,y:a}=o.getBBox();n.x+=s,n.y+=a;let i=null,c=o.parentNode;for(;!i;)c.tagName==="svg"&&(i=c),c=o.parentNode;o=i}else break;return n}const zt={start:0,center:.5,end:1};function Nn(e,t,n=0){let o=0;if(e in zt&&(e=zt[e]),typeof e=="string"){const s=parseFloat(e);e.endsWith("px")?o=s:e.endsWith("%")?e=s/100:e.endsWith("vw")?o=s/100*document.documentElement.clientWidth:e.endsWith("vh")?o=s/100*document.documentElement.clientHeight:e=s}return typeof e=="number"&&(o=t*e),n+o}const jr=[0,0];function Sr(e,t,n,o){let s=Array.isArray(e)?e:jr,a=0,i=0;return typeof e=="number"?s=[e,e]:typeof e=="string"&&(e=e.trim(),e.includes(" ")?s=e.split(" "):s=[e,zt[e]?e:"0"]),a=Nn(s[0],n,o),i=Nn(s[1],t),a-i}const Mr={All:[[0,0],[1,1]]},Lr={x:0,y:0};function _r(e){return"getBBox"in e&&e.tagName!=="svg"?e.getBBox():{width:e.clientWidth,height:e.clientHeight}}function Tr(e,t,n){const{offset:o=Mr.All}=n,{target:s=e,axis:a="y"}=n,i=a==="y"?"height":"width",c=s!==e?Nr(s,e):Lr,u=s===e?{width:e.scrollWidth,height:e.scrollHeight}:_r(s),m={width:e.clientWidth,height:e.clientHeight};t[a].offset.length=0;let d=!t[a].interpolate;const h=o.length;for(let f=0;f<h;f++){const p=Sr(o[f],m[i],u[i],c[a]);!d&&p!==t[a].interpolatorOffsets[f]&&(d=!0),t[a].offset[f]=p}d&&(t[a].interpolate=Qn(t[a].offset,ps(o),{clamp:!1}),t[a].interpolatorOffsets=[...t[a].offset]),t[a].progress=gs(0,1,t[a].interpolate(t[a].current))}function Ir(e,t=e,n){if(n.x.targetOffset=0,n.y.targetOffset=0,t!==e){let o=t;for(;o&&o!==e;)n.x.targetOffset+=o.offsetLeft,n.y.targetOffset+=o.offsetTop,o=o.offsetParent}n.x.targetLength=t===e?t.scrollWidth:t.clientWidth,n.y.targetLength=t===e?t.scrollHeight:t.clientHeight,n.x.containerLength=e.clientWidth,n.y.containerLength=e.clientHeight}function Pr(e,t,n,o={}){return{measure:s=>{Ir(e,o.target,n),kr(e,n,s),(o.offset||o.target)&&Tr(e,n,o)},notify:()=>t(n)}}const Ze=new WeakMap,jn=new WeakMap,St=new WeakMap,Sn=e=>e===document.scrollingElement?window:e;function uo(e,{container:t=document.scrollingElement,...n}={}){if(!t)return to;let o=St.get(t);o||(o=new Set,St.set(t,o));const s=Er(),a=Pr(t,e,s,n);if(o.add(a),!Ze.has(t)){const c=()=>{for(const h of o)h.measure(vs.timestamp);De.preUpdate(u)},u=()=>{for(const h of o)h.notify()},m=()=>De.read(c);Ze.set(t,m);const d=Sn(t);window.addEventListener("resize",m,{passive:!0}),t!==document.documentElement&&jn.set(t,xr(t,m)),d.addEventListener("scroll",m,{passive:!0}),m()}const i=Ze.get(t);return De.read(i,!1,!0),()=>{Zt(i);const c=St.get(t);if(!c||(c.delete(a),c.size))return;const u=Ze.get(t);Ze.delete(t),u&&(Sn(t).removeEventListener("scroll",u),jn.get(t)?.(),window.removeEventListener("resize",u))}}const Mn=new Map;function Rr(e){const t={value:0},n=uo(o=>{t.value=o[e.axis].progress*100},e);return{currentTime:t,cancel:n}}function ho({source:e,container:t,...n}){const{axis:o}=n;e&&(t=e);const s=Mn.get(t)??new Map;Mn.set(t,s);const a=n.target??"self",i=s.get(a)??{},c=o+(n.offset??[]).join(",");return i[c]||(i[c]=!n.target&&xs()?new ScrollTimeline({source:t,axis:o}):Rr({container:t,...n})),i[c]}function Or(e,t){const n=ho(t);return e.attachTimeline({timeline:t.target?void 0:n,observe:o=>(o.pause(),co(s=>{o.time=o.iterationDuration*s},n))})}function Dr(e){return e.length===2}function Ar(e,t){return Dr(e)?uo(n=>{e(n[t.axis].progress,n)},t):co(e,ho(t))}function zr(e,{axis:t="y",container:n=document.scrollingElement,...o}={}){if(!n)return to;const s={axis:t,container:n,...o};return typeof e=="function"?Ar(e,s):Or(e,s)}const $r=()=>({scrollX:Ue(0),scrollY:Ue(0),scrollXProgress:Ue(0),scrollYProgress:Ue(0)}),nt=e=>e?!e.current:!1;function Fr({container:e,target:t,...n}={}){const o=Ut($r),s=r.useRef(null),a=r.useRef(!1),i=r.useCallback(()=>(s.current=zr((c,{x:u,y:m})=>{o.scrollX.set(u.current),o.scrollXProgress.set(u.progress),o.scrollY.set(m.current),o.scrollYProgress.set(m.progress)},{...n,container:e?.current||void 0,target:t?.current||void 0}),()=>{s.current?.()}),[e,t,JSON.stringify(n.offset)]);return no(()=>{if(a.current=!1,nt(e)||nt(t)){a.current=!0;return}else return i()},[i]),r.useEffect(()=>{if(a.current)return hn(!nt(e)),hn(!nt(t)),i()},[i]),o}function mo(e){const t=Ut(()=>Ue(e)),{isStatic:n}=r.useContext(oo);if(n){const[,o]=r.useState(e);r.useEffect(()=>t.on("change",o),[])}return t}function fo(e,t){const n=mo(t()),o=()=>n.set(t());return o(),no(()=>{const s=()=>De.preRender(o,!1,!0),a=e.map(i=>i.on("change",s));return()=>{a.forEach(i=>i()),Zt(o)}}),n}function Wr(e){kt.current=[],e();const t=fo(kt.current,e);return kt.current=void 0,t}function Hr(e,t,n,o){if(typeof e=="function")return Wr(e);const s=br(t,n,o);return Array.isArray(e)?Ln(e,s):Ln([e],([a])=>s(a))}function Ln(e,t){const n=Ut(()=>[]);return fo(e,()=>{n.length=0;const o=e.length;for(let s=0;s<o;s++)n[s]=e[s].get();return t(n)})}function Vr(e,t={}){const{isStatic:n}=r.useContext(oo),o=()=>eo(e)?e.get():e;if(n)return Hr(o);const s=mo(o());return r.useInsertionEffect(()=>wr(s,e,t),[s,JSON.stringify(t)]),s}const Br=({className:e})=>l.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),Zr=({className:e})=>l.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})});async function Ur(e,t,n=""){if(t==null||t==="")return"";if(e==="home"){const m=await Xt("home/tree");if(m!=null)try{return JSON.parse(m)}catch(d){console.error("Error parsing JSON data:",d)}}const o=e==="home"?"home_txt":n===""?`${e}_tree/${t}`:`${e}_txt/${t}`,s=bs(ws(ys,o)),a=await Es(s);if(!a.exists()||!a.exists())return null;const i=a.val(),c=[{text:"1.React",id:"react",key:"react",parent:"root"},{text:"2.CSS",id:"css",key:"css",parent:"root"},{text:"3.Android",id:"android",key:"android",parent:"root"},{text:"4.Java",id:"java",key:"java",parent:"root"},{text:"5.이미지",id:"image",key:"image",parent:"root"},{text:"6.Etc",id:"etc",key:"etc",parent:"root"}],u=[];e==="home"&&u.push(...c);for(const m in i){const d=i[m];d.id=m;const h={id:m,key:m,text:d.title,parent:e==="home"?d.gbn:d.parent};e==="memo"?(h.icon=d.bm==="Y"?l.jsx(Br,{className:"w-4 h-4 text-red-500"}):d.icon==="Y"?l.jsx(Zr,{className:"w-4 h-4 text-green-500"}):null,h.droppable=!0):h.droppable=!1,!((n===""||n===void 0||n===null)&&(h.parent===void 0||h.parent===null||h.parent===""))&&(e==="home"||n===""||n===void 0||n===null?u.push(h):(d.id=m,(d.memo+"").toLowerCase().indexOf(n.toLowerCase())>-1&&(h.parent="root",h.droppable=!1,u.push(h))))}return u.sort((m,d)=>m.title>d.title?1:-1),e==="home"&&Cs("home/tree",JSON.stringify(u)),u}const Xr=({isOpen:e,onClose:t,data:n})=>{const{t:o}=we();if(!e||!n)return null;const{label:s,value:a,items:i}=n;return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:t,children:l.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-lg shadow-xl w-11/12 md:w-1/2 lg:w-1/3 max-h-[80vh] flex flex-col",onClick:c=>c.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center border-b p-4 dark:border-zinc-600",children:[l.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:s}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:bg-gray-200 dark:hover:bg-zinc-700 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center",children:l.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),l.jsxs("div",{className:"p-4 overflow-y-auto",children:[l.jsxs("p",{className:"text-base leading-relaxed text-gray-600 dark:text-gray-300 mb-4",children:[o("count","개수"),": ",l.jsx("span",{className:"font-bold",children:a.toLocaleString()})]}),l.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:o("main_list","주요 목록")}),l.jsx("ul",{className:"list-disc list-inside bg-gray-50 dark:bg-zinc-700 p-3 rounded-md",children:i&&i.length>0?i.map((c,u)=>l.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:c.text},u)):l.jsx("li",{className:"text-gray-500",children:o("no_results","결과 없음")})})]})]})})};function Yr({series:e,labels:t,onDataPointClick:n}){const[o,s]=r.useState({labels:[],colors:dt,dataLabels:{style:{colors:["#333"]}},responsive:[{breakpoint:480,options:{chart:{width:"100%"},legend:{position:"bottom"}}}]});return r.useEffect(()=>{s(a=>({...a,labels:t}))},[t]),l.jsx("div",{className:"bg-amber-50 dark:bg-gray-900 shadow-md rounded-sm",children:e&&e.length>0?l.jsx(ht,{type:"donut",series:e,options:o}):l.jsx("div",{className:"text-center text-gray-500",children:"표시할 데이터가 없습니다."})})}function Kr({series:e,labels:t,onDataPointClick:n}){const[o,s]=r.useState({chart:{type:"radar",toolbar:{show:!1},events:{dataPointSelection:(a,i,c)=>{n&&n(c.dataPointIndex)}}},colors:dt,plotOptions:{radar:{polygons:{distributed:!0}}},dataLabels:{enabled:!1},xaxis:{categories:[]},legend:{show:!0},tooltip:{theme:"dark",style:{fontSize:"12px"},y:{formatter:a=>a.toLocaleString()}}});return r.useEffect(()=>{s(a=>({...a,xaxis:{...a.xaxis,categories:t}}))},[t]),l.jsx("div",{className:"bg-white dark:bg-black shadow-md rounded-sm w-full h-full",children:e&&e.length>0&&e[0].data.length>0?l.jsx(ht,{type:"radar",series:e,options:o}):l.jsx("div",{className:"text-center text-gray-500 py-10",children:"표시할 데이터가 없습니다."})})}function Gr({series:e,labels:t,onDataPointClick:n}){const[o,s]=r.useState({labels:[],chart:{events:{dataPointSelection:(a,i,c)=>{n&&n(c.dataPointIndex)}}},colors:dt,plotOptions:{pie:{startAngle:-90,endAngle:90,offsetY:10}},grid:{padding:{bottom:-80}},dataLabels:{style:{colors:["#333"]}},responsive:[{breakpoint:480,options:{chart:{width:"100%"},legend:{position:"bottom"}}}],tooltip:{theme:"dark",style:{fontSize:"12px"},y:{formatter:a=>a.toLocaleString()}},legend:{show:!0}});return r.useEffect(()=>{s(a=>({...a,labels:t}))},[t]),l.jsx("div",{className:"bg-amber-50 dark:bg-gray-900 shadow-md rounded-sm p-2",children:e&&e.length>0&&l.jsx(ht,{type:"donut",series:e,options:o})})}function qr({series:e,labels:t,showDownload:n=!0,onDataPointClick:o}){const[s,a]=r.useState({chart:{type:"bar",toolbar:{tools:{download:n}},events:{dataPointSelection:(i,c,u)=>{o&&o(u.dataPointIndex)}}},colors:dt,plotOptions:{bar:{borderRadius:4,horizontal:!1,distributed:!0}},dataLabels:{enabled:!1},xaxis:{categories:[]},legend:{show:!1},tooltip:{theme:"dark",style:{fontSize:"12px"},y:{formatter:i=>i.toLocaleString()}}});return r.useEffect(()=>{a(i=>({...i,xaxis:{...i.xaxis,categories:t}}))},[t]),l.jsx("div",{className:"bg-white dark:bg-black shadow-md rounded-sm w-full p-2",children:e&&e.length>0&&e[0].data&&e[0].data.length>0?l.jsx(ht,{type:"bar",series:e,options:s,height:"350"}):l.jsx("div",{className:"text-center text-gray-500 py-10",children:"표시할 데이터가 없습니다."})})}const Jr=({rootDb:e})=>{const{user:t}=Ke(),{t:n}=we(),o=Me(),s=pe(j=>{try{return ks(e)(j)}catch(F){return console.warn("HomeChartForm selector error:",F),{labels:[],series:[],status:"idle",error:null}}}),[a,i]=r.useState(!0),[c,u]=r.useState("donut"),[m,d]=r.useState(!1),[h,f]=r.useState(null),[p,v]=r.useState([]),[x,N]=r.useState([]),[C,L]=r.useState({labels:[],series:[]}),g=["#6366f1","#3b82f6","#22c55e","#ef4444","#f97316","#eab308","#8b5cf6","#d946ef","#14b8a6","#a855f7"],_=[{value:"donut",label:n("donut_chart","도넛 차트")},{value:"bar",label:n("bar_chart","수평 막대 차트")},{value:"radar",label:n("radar_chart","레이더 차트")},{value:"verticalBar",label:n("vertical_bar_chart","수직 막대 차트")},{value:"semiDonut",label:n("semi_donut_chart","반원 도넛 차트")}],T=r.useCallback(j=>{let F=[];if(v(j||[]),j&&j.length>0){const S=j.filter(k=>k.parent==="root").sort((k,z)=>k.text.localeCompare(z.text)),W=(k,z)=>{const U=z.filter(I=>I.parent===k);let B=U.length;for(const I of U)B+=W(I.id,z);return B};F=S.map(k=>({node:k,count:W(k.id,j)})).filter(k=>k.count>=10);const A=F.map(k=>k.node.text),R=F.map(k=>k.count),y={labels:A,series:R};N(F),L(y),o(mn({rootDb:e,data:y}))}else L({labels:[],series:[]}),o(mn({rootDb:e,data:{labels:[],series:[]}}));i(!1)},[e,o]),b=r.useCallback(async()=>{i(!0);const j=await Ur(e==="sheet"?"memo":e,t?.uid);T(j)},[e,t?.uid,T]);r.useEffect(()=>{t?.uid&&(s?.labels&&Array.isArray(s.labels)&&s.labels.length>0?(L(s),i(!1)):b())},[e,t?.uid,s?.labels?.length,b]);const w=j=>{if(j<0||j>=x.length)return;const F=x[j].node,S=F.text,W=(k,z)=>{const U=z.filter(I=>I.parent===k);let B=[...U];return U.forEach(I=>{B=[...B,...W(I.id,z)]}),B},R=W(F.id,p).length,y=p.filter(k=>k.parent===F.id);f({label:S,value:R,items:y}),d(!0)},P=()=>l.jsx("div",{className:"w-full h-full flex justify-center items-center p-4",children:l.jsxs("div",{className:"w-full h-full bg-gray-200 dark:bg-zinc-800 rounded-md animate-pulse relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-1/4 left-1/4 w-1/2 h-1/2 bg-gray-300 dark:bg-zinc-700 rounded-full opacity-50"}),l.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-1/3 h-1/3 bg-gray-300 dark:bg-zinc-700 rounded-lg opacity-50"})]})}),E=()=>{b()},$=l.jsxs("div",{className:`HomeChartForm ${H.between}`,children:[l.jsx("div",{children:n("count_stats")}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("select",{value:c,onChange:j=>u(j.target.value),className:"rounded-md border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-200 focus:ring-indigo-500 focus:border-indigo-500 text-sm","aria-label":n("select_chart_type","차트 종류 선택"),children:_.map(j=>l.jsx("option",{value:j.value,children:j.label},j.value))}),l.jsx("button",{onClick:E,className:"rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors ","aria-label":n("reload_chart"),children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-600 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h5M20 20v-5h-5M4 4l1.5 1.5A9 9 0 0121.5 12M20 20l-1.5-1.5A9 9 0 012.5 12"})})})]})]});return l.jsxs("div",{className:`w-full justify-center ${H.card} `,children:[l.jsx("div",{className:"flex pl-6 py-4",children:l.jsx(Ns,{title:$})}),a?l.jsx(P,{}):l.jsxs("div",{className:"w-full justify-center items-center",children:[c==="donut"&&l.jsx(Yr,{series:C.series,labels:C.labels,colors:g,onDataPointClick:w}),c==="bar"&&l.jsx(so,{series:[{name:n("count"),data:C.series}],labels:C.labels,colors:g,onDataPointClick:w}),c==="radar"&&l.jsx(Kr,{series:[{name:n("count"),data:C.series}],labels:C.labels,colors:g,onDataPointClick:w}),c==="verticalBar"&&l.jsx(qr,{series:[{name:n("count"),data:C.series}],labels:C.labels,colors:g,onDataPointClick:w}),c==="semiDonut"&&l.jsx(Gr,{series:C.series,labels:C.labels,colors:g,onDataPointClick:w})]}),l.jsx(Xr,{isOpen:m,onClose:()=>d(!1),data:h})]})},Qr=()=>{const[e,t]=r.useState({labels:[],series:[]}),[n,o]=r.useState(null),[s,a]=r.useState({isOpen:!1}),{t:i}=we();return r.useEffect(()=>{(async()=>{const u=await Xt("home_cnt");if(u){o(u);const d=Object.keys(u).sort().reverse().slice(0,10),h=d.map(p=>p.split("-").slice(1).join("-")),f=d.map(p=>Object.keys(u[p]).length);t({labels:h,series:f})}})()},[]),l.jsxs("div",{className:`w-full justify-center ${H.card} `,children:[l.jsx("div",{className:"flex pl-6 py-4",children:i("visitors.count")}),l.jsx(so,{series:[{name:i("count"),data:e.series}],labels:e.labels,showDownload:!1,onDataPointSelection:(c,u,m)=>{const d=m.dataPointIndex;if(n&&d>-1){const f=Object.keys(n).sort().reverse()[d],p=n[f],v=Object.keys(p).join("<br/>");console.log("filteredNodes=",v),a({isOpen:!0,title:`${f} ${i("visitors.count")}`,message:v,onClose:()=>a({isOpen:!1})})}}}),l.jsx(js,{...s})]})},ea=({rootDb:e})=>{const{user:t}=Ke(),{t:n}=we(),o=n(e==="memo"?"appMemo":"home_mng"),s=l.jsx("div",{className:`displayTitle text-center  ${H.text3Xl} ${H.textIndigo}`,children:o});return l.jsx(l.Fragment,{children:l.jsx(Ss,{title:s,className:"MemoMain mt-3 mb-5",children:l.jsxs("div",{className:"grid gird-cols-1 md:grid-cols-5 items-center gap-3",children:[t===null?l.jsx("p",{className:`${H.textRed500} ${H.textLgFontSemiboldLeft} ${H.mdColSpan3}`,children:n("login_used")}):l.jsx("p",{className:`${H.textGray600DarkZinc400} text-left ${H.mdColSpan3}`,dangerouslySetInnerHTML:{__html:n("memo_main_guide").replace(`
`,"<br/>")}}),l.jsx("div",{className:`w-full ${H.flexCenter} md:col-span-2`,children:l.jsx(cr,{})})]})})})},po="carousel",pt="controller",ta="navigation",na="no-scroll",Yt="portal",oa="root",go="toolbar",sa="download",Xe="fullscreen",Ye="thumbnails",_n="zoom",Mt="loading",Lt="error",_t="complete",ra="placeholder",aa=e=>`active-slide-${e}`,vo="fullsize",Ae="flex_center",la="no_scroll",xo="no_scroll_padding",Kt="slide",bo="slide_wrapper",ia="slide_wrapper_interactive",xe="prev",be="next",$t="swipe",ze="close",wo="onPointerDown",yo="onPointerMove",Eo="onPointerUp",Co="onPointerLeave",ko="onPointerCancel",Gt="onKeyDown",ca="onKeyUp",qt="onWheel",ua="Escape",da="ArrowLeft",ha="ArrowRight",ma="button",it="icon",No="contain",Tn="cover",jo="Unknown action type",So="yarl__";function te(...e){return[...e].filter(Boolean).join(" ")}function O(e){return`${So}${e}`}function Z(e){return`--${So}${e}`}function Le(e,t){return`${e}${t?`_${t}`:""}`}function _e(e){return t=>Le(e,t)}function Se(e,t){var n;return(n=e?.[t])!==null&&n!==void 0?n:t}function Mo(e,t,n){return Se(e,"{index} of {total}").replace(/\{index}/g,`${tn(n,t.length)+1}`).replace(/\{total}/g,`${t.length}`)}function qe(...e){return()=>{e.forEach(t=>{t()})}}function ce(e,t,n){return()=>{const o=r.useContext(n);if(!o)throw new Error(`${e} must be used within a ${t}.Provider`);return o}}function Jt(){return typeof window<"u"}function Qt(e,t=0){const n=10**t;return Math.round((e+Number.EPSILON)*n)/n}function ye(e){return e.type===void 0||e.type==="image"}function en(e,t){return e.imageFit===Tn||e.imageFit!==No&&t===Tn}function gt(e){return typeof e=="string"?Number.parseInt(e,10):e}function ct(e){if(typeof e=="number")return{pixel:e};if(typeof e=="string"){const t=gt(e);return e.endsWith("%")?{percent:t}:{pixel:t}}return{pixel:0}}function fa(e,t){const n=ct(t),o=n.percent!==void 0?e.width/100*n.percent:n.pixel;return{width:Math.max(e.width-2*o,0),height:Math.max(e.height-2*o,0)}}function pa(){return(Jt()?window?.devicePixelRatio:void 0)||1}function tn(e,t){return t>0?(e%t+t)%t:0}function nn(e){return e.length>0}function on(e,t){return e[tn(t,e.length)]}function Ft(e,t){return nn(e)?on(e,t):void 0}function Lo(e){return ye(e)?e.src:void 0}function vt(e,t,n){if(!n)return e;const{buttons:o,...s}=e,a=o.findIndex(c=>c===t),i=r.isValidElement(n)?r.cloneElement(n,{key:t},null):n;if(a>=0){const c=[...o];return c.splice(a,1,i),{buttons:c,...s}}return{buttons:[i,...o],...s}}function _o(e,t,n=0){return Math.min(e.preload,Math.max(e.finite?t.length-1:Math.floor(t.length/2),n))}const ga=Number(r.version.split(".")[0])>=19;function va(e){return{inert:ga?e:e?"":void 0}}function xa(e){e.scrollTop}const Wt={open:!1,close:()=>{},index:0,slides:[],render:{},plugins:[],toolbar:{buttons:[ze]},labels:{},animation:{fade:250,swipe:500,easing:{fade:"ease",swipe:"ease-out",navigation:"ease-in-out"}},carousel:{finite:!1,preload:2,padding:"16px",spacing:"30%",imageFit:No,imageProps:{}},controller:{ref:null,focus:!0,aria:!1,touchAction:"none",closeOnPullUp:!1,closeOnPullDown:!1,closeOnBackdropClick:!1,preventDefaultWheelX:!0,preventDefaultWheelY:!1,disableSwipeNavigation:!1},portal:{},noScroll:{disabled:!1},on:{},styles:{},className:""};function fe(e,t){return{name:e,component:t}}function K(e,t){return{module:e,children:t}}function To(e,t,n){return e.module.name===t?n(e):e.children?[K(e.module,e.children.flatMap(o=>{var s;return(s=To(o,t,n))!==null&&s!==void 0?s:[]}))]:[e]}function Pe(e,t,n){return e.flatMap(o=>{var s;return(s=To(o,t,n))!==null&&s!==void 0?s:[]})}function ba(e,t=[],n=[]){let o=e;const s=p=>{const v=[...o];for(;v.length>0;){const x=v.pop();if(x?.module.name===p)return!0;x?.children&&v.push(...x.children)}return!1},a=(p,v)=>{if(p===""){o=[K(v,o)];return}o=Pe(o,p,x=>[K(v,[x])])},i=(p,v)=>{o=Pe(o,p,x=>[K(x.module,[K(v,x.children)])])},c=(p,v,x)=>{o=Pe(o,p,N=>{var C;return[K(N.module,[...x?[K(v)]:[],...(C=N.children)!==null&&C!==void 0?C:[],...x?[]:[K(v)]])]})},u=(p,v,x)=>{o=Pe(o,p,N=>[...x?[K(v)]:[],N,...x?[]:[K(v)]])},m=p=>{i(pt,p)},d=(p,v)=>{o=Pe(o,p,x=>[K(v,x.children)])},h=p=>{o=Pe(o,p,v=>v.children)},f=p=>{n.push(p)};return t.forEach(p=>{p({contains:s,addParent:a,append:i,addChild:c,addSibling:u,addModule:m,replace:d,remove:h,augment:f})}),{config:o,augmentation:p=>n.reduce((v,x)=>x(v),p)}}const Io=r.createContext(null),Po=ce("useA11yContext","A11yContext",Io);function wa({children:e}){const[t,n]=r.useState(!1),[o,s]=r.useState(!1),a=r.useMemo(()=>({focusWithin:t,trackFocusWithin:(c,u)=>{const m=d=>h=>{var f;h.currentTarget.contains(h.relatedTarget)||n(d),(f=d?c:u)===null||f===void 0||f(h)};return{onFocus:m(!0),onBlur:m(!1)}},autoPlaying:o,setAutoPlaying:s}),[t,o]);return r.createElement(Io.Provider,{value:a},e)}const Ro=r.createContext(null),$e=ce("useDocument","DocumentContext",Ro);function ya({nodeRef:e,children:t}){const n=r.useMemo(()=>{const o=a=>{var i;return((i=a||e.current)===null||i===void 0?void 0:i.ownerDocument)||document};return{getOwnerDocument:o,getOwnerWindow:a=>{var i;return((i=o(a))===null||i===void 0?void 0:i.defaultView)||window}}},[e]);return r.createElement(Ro.Provider,{value:n},t)}const Oo=r.createContext(null),Je=ce("useEvents","EventsContext",Oo);function Ea({children:e}){const[t]=r.useState({});r.useEffect(()=>()=>{Object.keys(t).forEach(o=>delete t[o])},[t]);const n=r.useMemo(()=>{const o=(i,c)=>{var u;(u=t[i])===null||u===void 0||u.splice(0,t[i].length,...t[i].filter(m=>m!==c))};return{publish:(...[i,c])=>{var u;(u=t[i])===null||u===void 0||u.forEach(m=>m(c))},subscribe:(i,c)=>(t[i]||(t[i]=[]),t[i].push(c),()=>o(i,c)),unsubscribe:o}},[t]);return r.createElement(Oo.Provider,{value:n},e)}const Do=r.createContext(null),q=ce("useLightboxProps","LightboxPropsContext",Do);function Ao({children:e,...t}){return r.createElement(Do.Provider,{value:t},e)}const zo=r.createContext(null),ue=ce("useLightboxState","LightboxStateContext",zo),$o=r.createContext(null),Ca=ce("useLightboxDispatch","LightboxDispatchContext",$o);function ka(e,t){switch(t.type){case"swipe":{const{slides:n}=e,o=t?.increment||0,s=e.globalIndex+o,a=tn(s,n.length),i=Ft(n,a),c=o||t.duration!==void 0?{increment:o,duration:t.duration,easing:t.easing}:void 0;return{slides:n,currentIndex:a,globalIndex:s,currentSlide:i,animation:c}}case"update":return t.slides!==e.slides||t.index!==e.currentIndex?{slides:t.slides,currentIndex:t.index,globalIndex:t.index,currentSlide:Ft(t.slides,t.index)}:e;default:throw new Error(jo)}}function Na({slides:e,index:t,children:n}){const[o,s]=r.useReducer(ka,{slides:e,currentIndex:t,globalIndex:t,currentSlide:Ft(e,t)});r.useEffect(()=>{s({type:"update",slides:e,index:t})},[e,t]);const a=r.useMemo(()=>({...o,state:o,dispatch:s}),[o,s]);return r.createElement($o.Provider,{value:s},r.createElement(zo.Provider,{value:a},n))}const Fo=r.createContext(null),xt=ce("useTimeouts","TimeoutsContext",Fo);function ja({children:e}){const[t]=r.useState([]);r.useEffect(()=>()=>{t.forEach(o=>window.clearTimeout(o)),t.splice(0,t.length)},[t]);const n=r.useMemo(()=>{const o=i=>{t.splice(0,t.length,...t.filter(c=>c!==i))};return{setTimeout:(i,c)=>{const u=window.setTimeout(()=>{o(u),i()},c);return t.push(u),u},clearTimeout:i=>{i!==void 0&&(o(i),window.clearTimeout(i))}}},[t]);return r.createElement(Fo.Provider,{value:n},e)}const Fe=r.forwardRef(function({label:t,className:n,icon:o,renderIcon:s,onClick:a,style:i,...c},u){const{styles:m,labels:d}=q(),h=Se(d,t);return r.createElement("button",{ref:u,type:"button",title:h,"aria-label":h,className:te(O(ma),n),onClick:a,style:{...i,...m.button},...c},s?s():r.createElement(o,{className:O(it),style:m.icon}))});function Wo(e,t){const n=o=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24","aria-hidden":"true",focusable:"false",...o},t);return n.displayName=e,n}function oe(e,t){return Wo(e,r.createElement("g",{fill:"currentColor"},r.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),t))}function Sa(e,t){return Wo(e,r.createElement(r.Fragment,null,r.createElement("defs",null,r.createElement("mask",{id:"strike"},r.createElement("path",{d:"M0 0h24v24H0z",fill:"white"}),r.createElement("path",{d:"M0 0L24 24",stroke:"black",strokeWidth:4}))),r.createElement("path",{d:"M0.70707 2.121320L21.878680 23.292883",stroke:"currentColor",strokeWidth:2}),r.createElement("g",{fill:"currentColor",mask:"url(#strike)"},r.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),t)))}const Ma=oe("Close",r.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),La=oe("Previous",r.createElement("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})),_a=oe("Next",r.createElement("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})),Ta=oe("Loading",r.createElement(r.Fragment,null,Array.from({length:8}).map((e,t,n)=>r.createElement("line",{key:t,x1:"12",y1:"6.5",x2:"12",y2:"1.8",strokeLinecap:"round",strokeWidth:"2.6",stroke:"currentColor",strokeOpacity:1/n.length*(t+1),transform:`rotate(${360/n.length*t}, 12, 12)`})))),Ia=oe("Error",r.createElement("path",{d:"M21.9,21.9l-8.49-8.49l0,0L3.59,3.59l0,0L2.1,2.1L0.69,3.51L3,5.83V19c0,1.1,0.9,2,2,2h13.17l2.31,2.31L21.9,21.9z M5,18 l3.5-4.5l2.5,3.01L12.17,15l3,3H5z M21,18.17L5.83,3H19c1.1,0,2,0.9,2,2V18.17z"})),ie=Jt()?r.useLayoutEffect:r.useEffect;function sn(){const[e,t]=r.useState(!1);return r.useEffect(()=>{var n,o;const s=(n=window.matchMedia)===null||n===void 0?void 0:n.call(window,"(prefers-reduced-motion: reduce)");t(s?.matches);const a=i=>t(i.matches);return(o=s?.addEventListener)===null||o===void 0||o.call(s,"change",a),()=>{var i;return(i=s?.removeEventListener)===null||i===void 0?void 0:i.call(s,"change",a)}},[]),e}function Pa(e){let t=0,n=0,o=0;const a=window.getComputedStyle(e).transform.match(/matrix.*\((.+)\)/);if(a){const i=a[1].split(",").map(gt);i.length===6?(t=i[4],n=i[5]):i.length===16&&(t=i[12],n=i[13],o=i[14])}return{x:t,y:n,z:o}}function Ht(e,t){const n=r.useRef(void 0),o=r.useRef(void 0),s=sn();return ie(()=>{var a,i,c;if(e.current&&n.current!==void 0&&!s){const{keyframes:u,duration:m,easing:d,onfinish:h}=t(n.current,e.current.getBoundingClientRect(),Pa(e.current))||{};if(u&&m){(a=o.current)===null||a===void 0||a.cancel(),o.current=void 0;try{o.current=(c=(i=e.current).animate)===null||c===void 0?void 0:c.call(i,u,{duration:m,easing:d})}catch(f){console.error(f)}o.current&&(o.current.onfinish=()=>{o.current=void 0,h?.()})}}n.current=void 0}),{prepareAnimation:a=>{n.current=a},isAnimationPlaying:()=>{var a;return((a=o.current)===null||a===void 0?void 0:a.playState)==="running"}}}function Ho(){const e=r.useRef(null),t=r.useRef(void 0),[n,o]=r.useState();return{setContainerRef:r.useCallback(a=>{e.current=a,t.current&&(t.current.disconnect(),t.current=void 0);const i=()=>{if(a){const c=window.getComputedStyle(a),u=m=>parseFloat(m)||0;o({width:Math.round(a.clientWidth-u(c.paddingLeft)-u(c.paddingRight)),height:Math.round(a.clientHeight-u(c.paddingTop)-u(c.paddingBottom))})}else o(void 0)};i(),a&&typeof ResizeObserver<"u"&&(t.current=new ResizeObserver(i),t.current.observe(a))},[]),containerRef:e,containerRect:n}}function at(){const e=r.useRef(void 0),{setTimeout:t,clearTimeout:n}=xt();return r.useCallback((o,s)=>{n(e.current),e.current=t(o,s>0?s:0)},[t,n])}function V(e){const t=r.useRef(e);return ie(()=>{t.current=e}),r.useCallback((...n)=>{var o;return(o=t.current)===null||o===void 0?void 0:o.call(t,...n)},[])}function In(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function Vt(e,t){return r.useMemo(()=>e==null&&t==null?null:n=>{In(e,n),In(t,n)},[e,t])}function Ra(e,t=!1){const n=r.useRef(!1);ie(()=>{t&&n.current&&(n.current=!1,e())},[t,e]);const o=r.useCallback(()=>{n.current=!0},[]),s=r.useCallback(()=>{n.current=!1},[]);return{onFocus:o,onBlur:s}}function bt(){const[e,t]=r.useState(!1);return ie(()=>{t(window.getComputedStyle(window.document.documentElement).direction==="rtl")},[]),e}function Vo(){const[e]=r.useState({}),t=r.useCallback((s,a)=>{var i;(i=e[s])===null||i===void 0||i.forEach(c=>{a.isPropagationStopped()||c(a)})},[e]),n=r.useMemo(()=>({onPointerDown:s=>t(wo,s),onPointerMove:s=>t(yo,s),onPointerUp:s=>t(Eo,s),onPointerLeave:s=>t(Co,s),onPointerCancel:s=>t(ko,s),onKeyDown:s=>t(Gt,s),onKeyUp:s=>t(ca,s),onWheel:s=>t(qt,s)}),[t]),o=r.useCallback((s,a)=>(e[s]||(e[s]=[]),e[s].unshift(a),()=>{const i=e[s];i&&i.splice(0,i.length,...i.filter(c=>c!==a))}),[e]);return{registerSensors:n,subscribeSensors:o}}function Pn(e,t){const n=r.useRef(0),o=at(),s=V((...a)=>{n.current=Date.now(),e(a)});return r.useCallback((...a)=>{o(()=>{s(a)},t-(Date.now()-n.current))},[t,s,o])}const Tt=_e("slide"),It=_e("slide_image");function Ne({slide:e,offset:t,render:n,rect:o,imageFit:s,imageProps:a,onClick:i,onLoad:c,onError:u,style:m}){var d,h,f,p,v,x,N,C;const[L,g]=r.useState(Mt),{publish:_}=Je(),{setTimeout:T}=xt(),b=r.useRef(null);r.useEffect(()=>{t===0&&_(aa(L))},[t,L,_]);const w=V(I=>{("decode"in I?I.decode():Promise.resolve()).catch(()=>{}).then(()=>{I.parentNode&&(g(_t),T(()=>{c?.(I)},0))})}),P=r.useCallback(I=>{b.current=I,I?.complete&&w(I)},[w]),E=r.useCallback(I=>{w(I.currentTarget)},[w]),$=V(()=>{g(Lt),u?.()}),j=en(e,s),F=(I,Y)=>Number.isFinite(I)?I:Y,S=F(Math.max(...((h=(d=e.srcSet)===null||d===void 0?void 0:d.map(I=>I.width))!==null&&h!==void 0?h:[]).concat(e.width?[e.width]:[]).filter(Boolean)),((f=b.current)===null||f===void 0?void 0:f.naturalWidth)||0),W=F(Math.max(...((v=(p=e.srcSet)===null||p===void 0?void 0:p.map(I=>I.height))!==null&&v!==void 0?v:[]).concat(e.height?[e.height]:[]).filter(Boolean)),((x=b.current)===null||x===void 0?void 0:x.naturalHeight)||0),A=S&&W?{maxWidth:`min(${S}px, 100%)`,maxHeight:`min(${W}px, 100%)`}:{maxWidth:"100%",maxHeight:"100%"},R=(N=e.srcSet)===null||N===void 0?void 0:N.sort((I,Y)=>I.width-Y.width).map(I=>`${I.src} ${I.width}w`).join(", "),y=()=>o&&!j&&e.width&&e.height?o.height/e.height*e.width:Number.MAX_VALUE,k=R&&o&&Jt()?`${Math.round(Math.min(y(),o.width))}px`:void 0,{style:z,className:U,...B}=a||{};return r.createElement(r.Fragment,null,r.createElement("img",{ref:P,onLoad:E,onError:$,onClick:i,draggable:!1,className:te(O(It()),j&&O(It("cover")),L!==_t&&O(It("loading")),U),style:{...A,...m,...z},...B,alt:(C=e.alt)!==null&&C!==void 0?C:"",sizes:k,srcSet:R,src:e.src}),L!==_t&&r.createElement("div",{className:O(Tt(ra))},L===Mt&&(n?.iconLoading?n.iconLoading():r.createElement(Ta,{className:te(O(it),O(Tt(Mt)))})),L===Lt&&(n?.iconError?n.iconError():r.createElement(Ia,{className:te(O(it),O(Tt(Lt)))}))))}const Oa=r.forwardRef(function({className:t,children:n,onFocus:o,onBlur:s,...a},i){const c=r.useRef(null),{trackFocusWithin:u}=Po();return r.createElement(ya,{nodeRef:c},r.createElement("div",{ref:Vt(i,c),className:te(O("root"),t),...u(o,s),...a},n))});var J;(function(e){e[e.NONE=0]="NONE",e[e.SWIPE=1]="SWIPE",e[e.PULL=2]="PULL",e[e.ANIMATION=3]="ANIMATION"})(J||(J={}));function Bo(e,t,n,o,s){r.useEffect(()=>s?()=>{}:qe(e(wo,t),e(yo,n),e(Eo,o),e(Co,o),e(ko,o)),[e,t,n,o,s])}var le;(function(e){e[e.NONE=0]="NONE",e[e.SWIPE=1]="SWIPE",e[e.PULL=2]="PULL"})(le||(le={}));const Pt=30;function Da({disableSwipeNavigation:e,closeOnBackdropClick:t},n,o,s,a,i,c,u,m,d,h,f,p,v,x,N){const C=r.useRef(0),L=r.useRef([]),g=r.useRef(void 0),_=r.useRef(0),T=r.useRef(le.NONE),b=r.useCallback(S=>{g.current===S.pointerId&&(g.current=void 0,T.current=le.NONE);const W=L.current;W.splice(0,W.length,...W.filter(A=>A.pointerId!==S.pointerId))},[]),w=r.useCallback(S=>{b(S),S.persist(),L.current.push(S)},[b]),P=r.useCallback(S=>L.current.find(({pointerId:W})=>S.pointerId===W),[]),E=V(S=>{w(S)}),$=(S,W)=>h&&S>W||d&&S<-W,j=V(S=>{const W=P(S);if(W)if(g.current===S.pointerId){const A=Date.now()-_.current,R=C.current;T.current===le.SWIPE?Math.abs(R)>.3*s||Math.abs(R)>5&&A<a?u(R,A):m(R):T.current===le.PULL&&($(R,2*Pt)?v(R,A):x(R)),C.current=0,T.current=le.NONE}else{const{target:A}=S;t&&A instanceof HTMLElement&&A===W.target&&(A.classList.contains(O(Kt))||A.classList.contains(O(bo)))&&N()}b(S)}),F=V(S=>{const W=P(S);if(W){const A=g.current===S.pointerId;if(S.buttons===0){A&&C.current!==0?j(S):b(W);return}const R=S.clientX-W.clientX,y=S.clientY-W.clientY;if(g.current===void 0){const k=z=>{w(S),g.current=S.pointerId,_.current=Date.now(),T.current=z};Math.abs(R)>Math.abs(y)&&Math.abs(R)>Pt&&o(R)?e||(k(le.SWIPE),i()):Math.abs(y)>Math.abs(R)&&$(y,Pt)&&(k(le.PULL),f())}else A&&(T.current===le.SWIPE?(C.current=R,c(R)):T.current===le.PULL&&(C.current=y,p(y)))}});Bo(n,E,F,j)}function Aa({preventDefaultWheelX:e,preventDefaultWheelY:t}){const n=r.useRef(null),o=V(s=>{const a=Math.abs(s.deltaX)>Math.abs(s.deltaY);(a&&e||!a&&t||s.ctrlKey)&&s.preventDefault()});return r.useCallback(s=>{var a;s?s.addEventListener("wheel",o,{passive:!1}):(a=n.current)===null||a===void 0||a.removeEventListener("wheel",o),n.current=s},[o])}function za(e,t,n,o,s,a,i,c,u){const m=r.useRef(0),d=r.useRef(0),h=r.useRef(void 0),f=r.useRef(void 0),p=r.useRef(0),v=r.useRef(void 0),x=r.useRef(0),{setTimeout:N,clearTimeout:C}=xt(),L=r.useCallback(()=>{h.current&&(C(h.current),h.current=void 0)},[C]),g=r.useCallback(()=>{f.current&&(C(f.current),f.current=void 0)},[C]),_=V(()=>{e!==J.SWIPE&&(m.current=0,x.current=0,L(),g())});r.useEffect(_,[e,_]);const T=V(w=>{f.current=void 0,m.current===w&&u(m.current)}),b=V(w=>{if(w.ctrlKey||Math.abs(w.deltaY)>Math.abs(w.deltaX))return;const P=E=>{p.current=E,C(v.current),v.current=E>0?N(()=>{p.current=0,v.current=void 0},300):void 0};if(e===J.NONE){if(Math.abs(w.deltaX)<=1.2*Math.abs(p.current)){P(w.deltaX);return}if(!n(-w.deltaX))return;if(d.current+=w.deltaX,L(),Math.abs(d.current)>30)d.current=0,P(0),x.current=Date.now(),a();else{const E=d.current;h.current=N(()=>{h.current=void 0,E===d.current&&(d.current=0)},s)}}else if(e===J.SWIPE){let E=m.current-w.deltaX;if(E=Math.min(Math.abs(E),o)*Math.sign(E),m.current=E,i(E),g(),Math.abs(E)>.2*o){P(w.deltaX),c(E,Date.now()-x.current);return}f.current=N(()=>T(E),2*s)}else P(w.deltaX)});r.useEffect(()=>t(qt,b),[t,b])}const Rn=_e("container"),Zo=r.createContext(null),ge=ce("useController","ControllerContext",Zo);function $a({children:e,...t}){var n;const{carousel:o,animation:s,controller:a,on:i,styles:c,render:u}=t,{closeOnPullUp:m,closeOnPullDown:d,preventDefaultWheelX:h,preventDefaultWheelY:f}=a,[p,v]=r.useState(),x=ue(),N=Ca(),[C,L]=r.useState(J.NONE),g=r.useRef(0),_=r.useRef(0),T=r.useRef(1),{registerSensors:b,subscribeSensors:w}=Vo(),{subscribe:P,publish:E}=Je(),$=at(),j=at(),F=at(),{containerRef:S,setContainerRef:W,containerRect:A}=Ho(),R=Vt(Aa({preventDefaultWheelX:h,preventDefaultWheelY:f}),W),y=r.useRef(null),k=Vt(y,void 0),{getOwnerDocument:z}=$e(),U=bt(),B=M=>(U?-1:1)*(typeof M=="number"?M:1),I=V(()=>{var M;return(M=S.current)===null||M===void 0?void 0:M.focus()}),Y=V(()=>t),re=V(()=>x),ne=r.useCallback(M=>E(xe,M),[E]),Ee=r.useCallback(M=>E(be,M),[E]),ve=r.useCallback(()=>E(ze),[E]),Te=M=>!(o.finite&&(B(M)>0&&x.currentIndex===0||B(M)<0&&x.currentIndex===x.slides.length-1)),Qe=M=>{var X;g.current=M,(X=S.current)===null||X===void 0||X.style.setProperty(Z("swipe_offset"),`${Math.round(M)}px`)},D=M=>{var X,Q;_.current=M,T.current=(()=>{const Ve=d&&M>0?M:m&&M<0?-M:0;return Math.min(Math.max(Qt(1-Ve/60*(1-.5),2),.5),1)})(),(X=S.current)===null||X===void 0||X.style.setProperty(Z("pull_offset"),`${Math.round(M)}px`),(Q=S.current)===null||Q===void 0||Q.style.setProperty(Z("pull_opacity"),`${T.current}`)},{prepareAnimation:ae}=Ht(y,(M,X,Q)=>{if(y.current&&A)return{keyframes:[{transform:`translate(0, ${M.rect.y-X.y+Q.y}px)`,opacity:M.opacity},{transform:"translate(0, 0)",opacity:1}],duration:M.duration,easing:s.easing.fade}}),We=(M,X)=>{if(m||d){D(M);let Q=0;y.current&&(Q=s.fade*(X?2:1),ae({rect:y.current.getBoundingClientRect(),opacity:T.current,duration:Q})),F(()=>{D(0),L(J.NONE)},Q),L(J.ANIMATION),X||ve()}},{prepareAnimation:rs,isAnimationPlaying:as}=Ht(y,(M,X,Q)=>{var de;if(y.current&&A&&(!((de=x.animation)===null||de===void 0)&&de.duration)){const se=ct(o.spacing),Ve=(se.percent?se.percent*A.width/100:se.pixel)||0;return{keyframes:[{transform:`translate(${B(x.globalIndex-M.index)*(A.width+Ve)+M.rect.x-X.x+Q.x}px, 0)`},{transform:"translate(0, 0)"}],duration:x.animation.duration,easing:x.animation.easing}}}),He=V(M=>{var X,Q;const de=M.offset||0,se=de?s.swipe:(X=s.navigation)!==null&&X!==void 0?X:s.swipe,Ve=!de&&!as()?s.easing.navigation:s.easing.swipe;let{direction:et}=M;const tt=(Q=M.count)!==null&&Q!==void 0?Q:1;let yt=J.ANIMATION,he=se*tt;if(!et){const Be=A?.width,dn=M.duration||0,Ct=Be?se/Be*Math.abs(de):se;tt!==0?(dn<Ct?he=he/Ct*Math.max(dn,Ct/5):Be&&(he=se/Be*(Be-Math.abs(de))),et=B(de)>0?xe:be):he=se/2}let Et=0;et===xe?Te(B(1))?Et=-tt:(yt=J.NONE,he=se):et===be&&(Te(B(-1))?Et=tt:(yt=J.NONE,he=se)),he=Math.round(he),j(()=>{Qe(0),L(J.NONE)},he),y.current&&rs({rect:y.current.getBoundingClientRect(),index:x.globalIndex}),L(yt),E($t,{type:"swipe",increment:Et,duration:he,easing:Ve})});r.useEffect(()=>{var M,X;!((M=x.animation)===null||M===void 0)&&M.increment&&(!((X=x.animation)===null||X===void 0)&&X.duration)&&$(()=>N({type:"swipe",increment:0}),x.animation.duration)},[x.animation,N,$]);const ln=[w,Te,A?.width||0,s.swipe,()=>L(J.SWIPE),M=>Qe(M),(M,X)=>He({offset:M,duration:X,count:1}),M=>He({offset:M,count:0})],ls=[()=>{d&&L(J.PULL)},M=>D(M),M=>We(M),M=>We(M,!0)];Da(a,...ln,m,d,...ls,ve),za(C,...ln);const cn=V(()=>{a.focus&&z().querySelector(`.${O(Yt)} .${O(Rn())}`)&&I()});r.useEffect(cn,[cn]);const un=V(()=>{var M;(M=i.view)===null||M===void 0||M.call(i,{index:x.currentIndex})});r.useEffect(un,[x.globalIndex,un]),r.useEffect(()=>qe(P(xe,M=>He({direction:xe,...M})),P(be,M=>He({direction:be,...M})),P($t,M=>N(M))),[P,He,N]);const is=r.useMemo(()=>({prev:ne,next:Ee,close:ve,focus:I,slideRect:A?fa(A,o.padding):{width:0,height:0},containerRect:A||{width:0,height:0},subscribeSensors:w,containerRef:S,setCarouselRef:k,toolbarWidth:p,setToolbarWidth:v}),[ne,Ee,ve,I,w,A,S,k,p,v,o.padding]);return r.useImperativeHandle(a.ref,()=>({prev:ne,next:Ee,close:ve,focus:I,getLightboxProps:Y,getLightboxState:re}),[ne,Ee,ve,I,Y,re]),r.createElement("div",{ref:R,className:te(O(Rn()),O(Ae)),style:{...C===J.SWIPE?{[Z("swipe_offset")]:`${Math.round(g.current)}px`}:null,...C===J.PULL?{[Z("pull_offset")]:`${Math.round(_.current)}px`,[Z("pull_opacity")]:`${T.current}`}:null,...a.touchAction!=="none"?{[Z("controller_touch_action")]:a.touchAction}:null,...c.container},tabIndex:-1,...b},A&&r.createElement(Zo.Provider,{value:is},e,(n=u.controls)===null||n===void 0?void 0:n.call(u)))}const Fa=fe(pt,$a);function Ce(e){return Le(po,e)}function On(e){return Le(Kt,e)}function Wa({slide:e,offset:t}){const n=r.useRef(null),{currentIndex:o,slides:s}=ue(),{slideRect:a,focus:i}=ge(),{render:c,carousel:{imageFit:u,imageProps:m},on:{click:d},styles:{slide:h},labels:f}=q(),{getOwnerDocument:p}=$e(),v=t!==0;r.useEffect(()=>{var N;v&&(!((N=n.current)===null||N===void 0)&&N.contains(p().activeElement))&&i()},[v,i,p]);const x=()=>{var N,C,L,g;let _=(N=c.slide)===null||N===void 0?void 0:N.call(c,{slide:e,offset:t,rect:a});return!_&&ye(e)&&(_=r.createElement(Ne,{slide:e,offset:t,render:c,rect:a,imageFit:u,imageProps:m,onClick:v?void 0:()=>d?.({index:o})})),_?r.createElement(r.Fragment,null,(C=c.slideHeader)===null||C===void 0?void 0:C.call(c,{slide:e}),((L=c.slideContainer)!==null&&L!==void 0?L:(({children:T})=>T))({slide:e,children:_}),(g=c.slideFooter)===null||g===void 0?void 0:g.call(c,{slide:e})):null};return r.createElement("div",{ref:n,className:te(O(On()),!v&&O(On("current")),O(Ae)),...va(v),style:h,role:"group","aria-roledescription":Se(f,"Slide"),"aria-label":Mo(f,s,o+t)},x())}function Ha(){const e=q().styles.slide;return r.createElement("div",{className:O(Kt),style:e})}function Va({carousel:e,labels:t}){const{slides:n,currentIndex:o,globalIndex:s}=ue(),{setCarouselRef:a}=ge(),{autoPlaying:i,focusWithin:c}=Po(),u=ct(e.spacing),m=ct(e.padding),d=_o(e,n,1),h=[];if(nn(n))for(let f=o-d;f<=o+d;f+=1){const p=on(n,f),v=s-o+f,x=e.finite&&(f<0||f>n.length-1);h.push(x?{key:v}:{key:[`${v}`,Lo(p)].filter(Boolean).join("|"),offset:f-o,slide:p})}return r.createElement("div",{ref:a,className:te(O(Ce()),h.length>0&&O(Ce("with_slides"))),style:{[`${Z(Ce("slides_count"))}`]:h.length,[`${Z(Ce("spacing_px"))}`]:u.pixel||0,[`${Z(Ce("spacing_percent"))}`]:u.percent||0,[`${Z(Ce("padding_px"))}`]:m.pixel||0,[`${Z(Ce("padding_percent"))}`]:m.percent||0},role:"region","aria-live":i&&!c?"off":"polite","aria-roledescription":Se(t,"Carousel"),"aria-label":Se(t,"Photo gallery")},h.map(({key:f,slide:p,offset:v})=>p?r.createElement(Wa,{key:f,slide:p,offset:v}):r.createElement(Ha,{key:f})))}const Ba=fe(po,Va);function Uo(){const{carousel:e}=q(),{slides:t,currentIndex:n}=ue(),o=t.length===0||e.finite&&n===0,s=t.length===0||e.finite&&n===t.length-1;return{prevDisabled:o,nextDisabled:s}}function Xo(e){var t;const n=bt(),{publish:o}=Je(),{animation:s}=q(),{prevDisabled:a,nextDisabled:i}=Uo(),c=((t=s.navigation)!==null&&t!==void 0?t:s.swipe)/2,u=Pn(()=>o(xe),c),m=Pn(()=>o(be),c),d=V(h=>{switch(h.key){case ua:o(ze);break;case da:(n?i:a)||(n?m:u)();break;case ha:(n?a:i)||(n?u:m)();break}});r.useEffect(()=>e(Gt,d),[e,d])}function Dn({label:e,icon:t,renderIcon:n,action:o,onClick:s,disabled:a,style:i}){return r.createElement(Fe,{label:e,icon:t,renderIcon:n,className:O(`navigation_${o}`),disabled:a,onClick:s,style:i,...Ra(ge().focus,a)})}function Za({render:{buttonPrev:e,buttonNext:t,iconPrev:n,iconNext:o},styles:s}){const{prev:a,next:i,subscribeSensors:c}=ge(),{prevDisabled:u,nextDisabled:m}=Uo();return Xo(c),r.createElement(r.Fragment,null,e?e():r.createElement(Dn,{label:"Previous",action:xe,icon:La,renderIcon:n,style:s.navigationPrev,disabled:u,onClick:a}),t?t():r.createElement(Dn,{label:"Next",action:be,icon:_a,renderIcon:o,style:s.navigationNext,disabled:m,onClick:i}))}const Ua=fe(ta,Za),An=O(la),Xa=O(xo);function Ya(e){return"style"in e}function zn(e,t,n){const o=window.getComputedStyle(e),s=n?"padding-left":"padding-right",a=n?o.paddingLeft:o.paddingRight,i=e.style.getPropertyValue(s);return e.style.setProperty(s,`${(gt(a)||0)+t}px`),()=>{i?e.style.setProperty(s,i):e.style.removeProperty(s)}}function Ka({noScroll:{disabled:e},children:t}){const n=bt(),{getOwnerDocument:o,getOwnerWindow:s}=$e();return r.useEffect(()=>{if(e)return()=>{};const a=[],i=s(),{body:c,documentElement:u}=o(),m=Math.round(i.innerWidth-u.clientWidth);if(m>0){a.push(zn(c,m,n));const d=c.getElementsByTagName("*");for(let h=0;h<d.length;h+=1){const f=d[h];Ya(f)&&i.getComputedStyle(f).getPropertyValue("position")==="fixed"&&!f.classList.contains(Xa)&&a.push(zn(f,m,n))}}return c.classList.add(An),()=>{c.classList.remove(An),a.forEach(d=>d())}},[n,e,o,s]),r.createElement(r.Fragment,null,t)}const Ga=fe(na,Ka);function $n(e){return Le(Yt,e)}function Fn(e,t,n){const o=e.getAttribute(t);return e.setAttribute(t,n),()=>{o?e.setAttribute(t,o):e.removeAttribute(t)}}function qa({children:e,animation:t,styles:n,className:o,on:s,portal:a,close:i,labels:c}){const[u,m]=r.useState(!1),[d,h]=r.useState(!1),f=r.useRef([]),p=r.useRef(null),{setTimeout:v}=xt(),{subscribe:x}=Je(),C=sn()?0:t.fade;r.useEffect(()=>(m(!0),()=>{m(!1),h(!1)}),[]);const L=V(()=>{f.current.forEach(b=>b()),f.current=[]}),g=V(()=>{var b;h(!1),L(),(b=s.exiting)===null||b===void 0||b.call(s),v(()=>{var w;(w=s.exited)===null||w===void 0||w.call(s),i()},C)});r.useEffect(()=>x(ze,g),[x,g]);const _=V(b=>{var w,P,E;xa(b),h(!0),(w=s.entering)===null||w===void 0||w.call(s);const $=(E=(P=b.parentNode)===null||P===void 0?void 0:P.children)!==null&&E!==void 0?E:[];for(let j=0;j<$.length;j+=1){const F=$[j];["TEMPLATE","SCRIPT","STYLE"].indexOf(F.tagName)===-1&&F!==b&&(f.current.push(Fn(F,"inert","")),f.current.push(Fn(F,"aria-hidden","true")))}f.current.push(()=>{var j,F;(F=(j=p.current)===null||j===void 0?void 0:j.focus)===null||F===void 0||F.call(j)}),v(()=>{var j;(j=s.entered)===null||j===void 0||j.call(s)},C)}),T=r.useCallback(b=>{b?_(b):L()},[_,L]);return u?ar.createPortal(r.createElement(Oa,{ref:T,className:te(o,O($n()),O(xo),d&&O($n("open"))),"aria-modal":!0,role:"dialog","aria-label":Se(c,"Lightbox"),style:{...t.fade!==Wt.animation.fade?{[Z("fade_animation_duration")]:`${C}ms`}:null,...t.easing.fade!==Wt.animation.easing.fade?{[Z("fade_animation_timing_function")]:t.easing.fade}:null,...n.root},onFocus:b=>{p.current||(p.current=b.relatedTarget)}},e),a.root||document.body):null}const Ja=fe(Yt,qa);function Qa({children:e}){return r.createElement(r.Fragment,null,e)}const el=fe(oa,Qa);function tl(e){return Le(go,e)}function nl({toolbar:{buttons:e},render:{buttonClose:t,iconClose:n},styles:o}){const{close:s,setToolbarWidth:a}=ge(),{setContainerRef:i,containerRect:c}=Ho();ie(()=>{a(c?.width)},[a,c?.width]);const u=()=>t?t():r.createElement(Fe,{key:ze,label:"Close",icon:Ma,renderIcon:n,onClick:s});return r.createElement("div",{ref:i,style:o.toolbar,className:O(tl())},e?.map(m=>m===ze?u():m))}const ol=fe(go,nl);function Yo(e,t){var n;return r.createElement(e.module.component,{key:e.module.name,...t},(n=e.children)===null||n===void 0?void 0:n.map(o=>Yo(o,t)))}function sl(e,t={}){const{easing:n,...o}=e,{easing:s,...a}=t;return{easing:{...n,...s},...o,...a}}function rl({carousel:e,animation:t,render:n,toolbar:o,controller:s,noScroll:a,on:i,plugins:c,slides:u,index:m,...d}){const{animation:h,carousel:f,render:p,toolbar:v,controller:x,noScroll:N,on:C,slides:L,index:g,plugins:_,...T}=Wt,{config:b,augmentation:w}=ba([K(Ja,[K(Ga,[K(Fa,[K(Ba),K(ol),K(Ua)])])])],c||_),P=w({animation:sl(h,t),carousel:{...f,...e},render:{...p,...n},toolbar:{...v,...o},controller:{...x,...s},noScroll:{...N,...a},on:{...C,...i},...T,...d});return P.open?r.createElement(Ao,{...P},r.createElement(Na,{slides:u||L,index:gt(m||g)},r.createElement(ja,null,r.createElement(Ea,null,r.createElement(wa,null,Yo(K(el,b),P)))))):null}const al={minZoom:1,maxZoomPixelRatio:1,zoomInMultiplier:2,doubleTapDelay:300,doubleClickDelay:500,doubleClickMaxStops:2,keyboardMoveDistance:50,wheelZoomDistanceFactor:100,pinchZoomDistanceFactor:100,scrollToZoom:!1};function ll(e){return Math.min(Math.max(e,Number.EPSILON),1)}function Ko(e){const{minZoom:t,...n}={...al,...e};return{minZoom:ll(t),...n}}function il(e,t,n,o){const s=r.useRef(void 0),a=r.useRef(void 0),{zoom:i}=q().animation,c=sn(),u=V(()=>{var m,d,h;if((m=s.current)===null||m===void 0||m.cancel(),s.current=void 0,a.current&&o?.current){try{s.current=(h=(d=o.current).animate)===null||h===void 0?void 0:h.call(d,[{transform:a.current},{transform:`scale(${e}) translateX(${t}px) translateY(${n}px)`}],{duration:c?0:i??500,easing:s.current?"ease-out":"ease-in-out"})}catch(f){console.error(f)}a.current=void 0,s.current&&(s.current.onfinish=()=>{s.current=void 0})}});return ie(u,[e,t,n,u]),r.useCallback(()=>{a.current=o?.current?window.getComputedStyle(o.current).transform:void 0},[o])}function cl(e,t){const{on:n}=q(),o=V(()=>{var s;t||(s=n.zoom)===null||s===void 0||s.call(n,{zoom:e})});r.useEffect(o,[e,o])}function wt(){const{zoom:e}=q();return Ko(e)}function ul(e,t){var n,o;let s={width:0,height:0},a={width:0,height:0};const{currentSlide:i}=ue(),{imageFit:c}=q().carousel,{maxZoomPixelRatio:u}=wt();if(e&&i){const d={...i,...t};if(ye(d)){const h=en(d,c),f=Math.max(...(((n=d.srcSet)===null||n===void 0?void 0:n.map(v=>v.width))||[]).concat(d.width?[d.width]:[])),p=Math.max(...(((o=d.srcSet)===null||o===void 0?void 0:o.map(v=>v.height))||[]).concat(d.height?[d.height]:[]));f>0&&p>0&&e.width>0&&e.height>0&&(a=h?{width:Math.round(Math.min(f,e.width/e.height*p)),height:Math.round(Math.min(p,e.height/e.width*f))}:{width:f,height:p},a={width:a.width*u,height:a.height*u},s=h?{width:Math.min(e.width,a.width,f),height:Math.min(e.height,a.height,p)}:{width:Math.round(Math.min(e.width,e.height/p*f,f)),height:Math.round(Math.min(e.height,e.width/f*p,p))})}}const m=s.width?Math.max(Qt(a.width/s.width,5),1):1;return{imageRect:s,maxZoom:m}}function Wn(e,t){return((e.clientX-t.clientX)**2+(e.clientY-t.clientY)**2)**.5}function Hn(e,t,n=100,o=2){return e*Math.min(1+Math.abs(t/n),o)**Math.sign(t)}function dl(e,t,n,o,s,a,i,c,u){const m=r.useRef([]),d=r.useRef(0),h=r.useRef(void 0),{globalIndex:f}=ue(),{getOwnerWindow:p}=$e(),{containerRef:v,subscribeSensors:x}=ge(),{keyboardMoveDistance:N,zoomInMultiplier:C,wheelZoomDistanceFactor:L,scrollToZoom:g,doubleTapDelay:_,doubleClickDelay:T,doubleClickMaxStops:b,pinchZoomDistanceFactor:w}=wt(),P=r.useCallback(y=>{if(v.current){const{pageX:k,pageY:z}=y,{scrollX:U,scrollY:B}=p(),{left:I,top:Y,width:re,height:ne}=v.current.getBoundingClientRect();return[k-I-U-re/2,z-Y-B-ne/2]}return[]},[v,p]),E=V(y=>{const{key:k,metaKey:z,ctrlKey:U}=y,B=z||U,I=()=>{y.preventDefault(),y.stopPropagation()};if(e>1){const Y=(re,ne)=>{I(),c(re,ne)};k==="ArrowDown"?Y(0,N):k==="ArrowUp"?Y(0,-N):k==="ArrowLeft"?Y(-N,0):k==="ArrowRight"&&Y(N,0)}k==="+"||B&&k==="="?(I(),s()):k==="-"||B&&k==="_"?(I(),a()):B&&k==="0"&&(I(),i(1))}),$=V(y=>{if((y.ctrlKey||g)&&Math.abs(y.deltaY)>Math.abs(y.deltaX)){y.stopPropagation(),i(Hn(e,-y.deltaY,L),!0,...P(y));return}e>1&&(y.stopPropagation(),g||c(y.deltaX,y.deltaY))}),j=r.useCallback(y=>{const k=m.current;k.splice(0,k.length,...k.filter(z=>z.pointerId!==y.pointerId))},[]),F=r.useCallback(y=>{j(y),y.persist(),m.current.push(y)},[j]),S=V(y=>{var k;const z=m.current;if(y.pointerType==="mouse"&&y.buttons>1||!(!((k=u?.current)===null||k===void 0)&&k.contains(y.target)))return;e>1&&y.stopPropagation();const{timeStamp:U}=y;if(z.length===0&&U-d.current<(y.pointerType==="touch"?_:T)){d.current=0;const B=e>=1?e!==n?e*Math.max(n**(1/b),C):1:e!==t?e/Math.max(t**(-1/b),C):1;i(B,!1,...P(y))}else d.current=U;F(y),z.length===2&&(h.current=Wn(z[0],z[1]))}),W=V(y=>{const k=m.current,z=k.find(U=>U.pointerId===y.pointerId);if(k.length===2&&h.current){y.stopPropagation(),F(y);const U=Wn(k[0],k[1]),B=U-h.current;Math.abs(B)>0&&(i(Hn(e,B,w),!0,...k.map(I=>P(I)).reduce((I,Y)=>Y.map((re,ne)=>I[ne]+re/2))),h.current=U);return}e>1&&(y.stopPropagation(),z&&(k.length===1&&c((z.clientX-y.clientX)/e,(z.clientY-y.clientY)/e),F(y)))}),A=r.useCallback(y=>{const k=m.current;k.length===2&&k.find(z=>z.pointerId===y.pointerId)&&(h.current=void 0),j(y)},[j]),R=r.useCallback(()=>{const y=m.current;y.splice(0,y.length),d.current=0,h.current=void 0},[]);Bo(x,S,W,A,o),r.useEffect(R,[f,R]),r.useEffect(()=>o?()=>{}:qe(R,x(Gt,E),x(qt,$)),[o,x,R,E,$])}function hl(e,t,n){const[o,s]=r.useState(1),[a,i]=r.useState(0),[c,u]=r.useState(0),m=il(o,a,c,n),{currentSlide:d,globalIndex:h}=ue(),{containerRect:f,slideRect:p}=ge(),{minZoom:v,zoomInMultiplier:x}=wt(),N=d&&ye(d)?d.src:void 0,C=!N||!n?.current;ie(()=>{s(1),i(0),u(0)},[h,N]);const L=r.useCallback((w,P,E)=>{const $=E||o,j=a-(w||0),F=c-(P||0),S=(e.width*$-p.width)/2/$,W=(e.height*$-p.height)/2/$;i(Math.min(Math.abs(j),Math.max(S,0))*Math.sign(j)),u(Math.min(Math.abs(F),Math.max(W,0))*Math.sign(F))},[o,a,c,p,e.width,e.height]),g=r.useCallback((w,P,E,$)=>{const j=Qt(Math.min(Math.max(w+.001<t?w:t,v),t),5);j!==o&&(P||m(),L(E?E*(1/o-1/j):0,$?$*(1/o-1/j):0,j),s(j))},[o,v,t,L,m]),_=V(()=>{o>1&&(o>t&&g(t,!0),L())});ie(_,[f.width,f.height,_]);const T=r.useCallback(()=>{const w=o*x;g(o<1&&w>1?1:w)},[o,x,g]),b=r.useCallback(()=>{const w=o/x;g(o>1&&w<1?1:w)},[o,x,g]);return{zoom:o,offsetX:a,offsetY:c,disabled:C,changeOffsets:L,changeZoom:g,zoomIn:T,zoomOut:b}}const Go=r.createContext(null),rn=ce("useZoom","ZoomControllerContext",Go);function ml({children:e}){const[t,n]=r.useState(),{slideRect:o}=ge(),{ref:s,minZoom:a}=wt(),{imageRect:i,maxZoom:c}=ul(o,t?.imageDimensions),{zoom:u,offsetX:m,offsetY:d,disabled:h,changeZoom:f,changeOffsets:p,zoomIn:v,zoomOut:x}=hl(i,c,t?.zoomWrapperRef);cl(u,h),dl(u,a,c,h,v,x,f,p,t?.zoomWrapperRef);const N=r.useMemo(()=>({zoom:u,minZoom:a,maxZoom:c,offsetX:m,offsetY:d,disabled:h,zoomIn:v,zoomOut:x,changeZoom:f}),[u,a,c,m,d,h,v,x,f]);r.useImperativeHandle(s,()=>N,[N]);const C=r.useMemo(()=>({...N,setZoomWrapper:n}),[N,n]);return r.createElement(Go.Provider,{value:C},e)}const fl=oe("ZoomIn",r.createElement(r.Fragment,null,r.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),r.createElement("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"}))),pl=oe("ZoomOut",r.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"})),Vn=r.forwardRef(function({zoomIn:t,onLoseFocus:n},o){const s=r.useRef(!1),a=r.useRef(!1),{zoom:i,minZoom:c,maxZoom:u,zoomIn:m,zoomOut:d,disabled:h}=rn(),{render:f}=q(),p=h||(t?i>=u:i<=c);return r.useEffect(()=>{p&&s.current&&a.current&&n(),p||(s.current=!0)},[p,n]),r.createElement(Fe,{ref:o,disabled:p,label:t?"Zoom in":"Zoom out",icon:t?fl:pl,renderIcon:t?f.iconZoomIn:f.iconZoomOut,onClick:t?m:d,onFocus:()=>{a.current=!0},onBlur:()=>{a.current=!1}})});function gl(){const e=r.useRef(null),t=r.useRef(null),{focus:n}=ge(),o=r.useCallback(i=>{var c,u;!((c=i.current)===null||c===void 0)&&c.disabled?n():(u=i.current)===null||u===void 0||u.focus()},[n]),s=r.useCallback(()=>o(e),[o]),a=r.useCallback(()=>o(t),[o]);return r.createElement(r.Fragment,null,r.createElement(Vn,{zoomIn:!0,ref:e,onLoseFocus:a}),r.createElement(Vn,{ref:t,onLoseFocus:s}))}function vl(){const{render:e}=q(),t=rn();return e.buttonZoom?r.createElement(r.Fragment,null,e.buttonZoom(t)):r.createElement(gl,null)}function xl(e){var t;return(((t=e.srcSet)===null||t===void 0?void 0:t.length)||0)>0}function bl({current:e,preload:t},{type:n,source:o}){switch(n){case"fetch":return e?{current:e,preload:o}:{current:o};case"done":return o===t?{current:o}:{current:e,preload:t};default:throw new Error(jo)}}function wl(e){var t,n;const[{current:o,preload:s},a]=r.useReducer(bl,{}),{slide:i,rect:c,imageFit:u,render:m,interactive:d}=e,h=i.srcSet.sort((T,b)=>T.width-b.width),f=(t=i.width)!==null&&t!==void 0?t:h[h.length-1].width,p=(n=i.height)!==null&&n!==void 0?n:h[h.length-1].height,v=en(i,u),x=Math.max(...h.map(T=>T.width)),N=Math.min((v?Math.max:Math.min)(c.width,f*(c.height/p)),x),C=pa(),L=V(()=>{var T;const b=(T=h.find(w=>w.width>=N*C))!==null&&T!==void 0?T:h[h.length-1];(!o||h.findIndex(w=>w.src===o)<h.findIndex(w=>w===b))&&a({type:"fetch",source:b.src})});ie(L,[c.width,c.height,C,L]);const g=V(T=>a({type:"done",source:T})),_={WebkitTransform:d?"initial":"translateZ(0)"};return v||Object.assign(_,c.width/c.height<f/p?{width:"100%",height:"auto"}:{width:"auto",height:"100%"}),r.createElement(r.Fragment,null,s&&s!==o&&r.createElement(Ne,{key:"preload",...e,offset:void 0,slide:{...i,src:s,srcSet:void 0},style:{position:"absolute",visibility:"hidden",..._},onLoad:()=>g(s),render:{...m,iconLoading:()=>null,iconError:()=>null}}),o&&r.createElement(Ne,{key:"current",...e,slide:{...i,src:o,srcSet:void 0},style:_}))}function yl({render:e,slide:t,offset:n,rect:o}){var s;const[a,i]=r.useState(),c=r.useRef(null),{zoom:u,maxZoom:m,offsetX:d,offsetY:h,setZoomWrapper:f}=rn(),p=u>1,{carousel:v,on:x}=q(),{currentIndex:N}=ue();ie(()=>n===0?(f({zoomWrapperRef:c,imageDimensions:a}),()=>f(void 0)):()=>{},[n,a,f]);let C=(s=e.slide)===null||s===void 0?void 0:s.call(e,{slide:t,offset:n,rect:o,zoom:u,maxZoom:m});if(!C&&ye(t)){const L={slide:t,offset:n,rect:o,render:e,imageFit:v.imageFit,imageProps:v.imageProps,onClick:n===0?()=>{var g;return(g=x.click)===null||g===void 0?void 0:g.call(x,{index:N})}:void 0};C=xl(t)?r.createElement(wl,{...L,slide:t,interactive:p,rect:n===0?{width:o.width*u,height:o.height*u}:o}):r.createElement(Ne,{onLoad:g=>i({width:g.naturalWidth,height:g.naturalHeight}),...L})}return C?r.createElement("div",{ref:c,className:te(O(vo),O(Ae),O(bo),p&&O(ia)),style:n===0?{transform:`scale(${u}) translateX(${d}px) translateY(${h}px)`}:void 0},C):null}const El=({augment:e,addModule:t})=>{e(({zoom:n,toolbar:o,render:s,controller:a,...i})=>{const c=Ko(n);return{zoom:c,toolbar:vt(o,_n,r.createElement(vl,null)),render:{...s,slide:u=>{var m;return ye(u.slide)?r.createElement(yl,{render:s,...u}):(m=s.slide)===null||m===void 0?void 0:m.call(s,u)}},controller:{...a,preventDefaultWheelY:c.scrollToZoom},...i}}),t(fe(_n,ml))},ke={ref:null,position:"bottom",width:120,height:80,border:1,borderRadius:4,padding:4,gap:16,imageFit:"contain",vignette:!0,hidden:!1,showToggle:!1},an=e=>({...ke,...e});function qo(){const{thumbnails:e}=q();return an(e)}const je=e=>Le(Ye,e),G=e=>je(Le("thumbnail",e)),Cl=oe("VideoThumbnail",r.createElement("path",{d:"M10 16.5l6-4.5-6-4.5v9zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})),kl=oe("UnknownThumbnail",r.createElement("path",{d:"M23 18V6c0-1.1-.9-2-2-2H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zM8.5 12.5l2.5 3.01L14.5 11l4.5 6H5l3.5-4.5z"}));function Nl({slide:e,render:t,rect:n,imageFit:o}){var s;const a=(s=t.thumbnail)===null||s===void 0?void 0:s.call(t,{slide:e,render:t,rect:n,imageFit:o});if(a)return a;const i={render:t,rect:n,imageFit:o};if(e.thumbnail)return r.createElement(Ne,{slide:{src:e.thumbnail},...i});if(ye(e))return r.createElement(Ne,{slide:e,...i});const c=O(G(it));return e.type==="video"?r.createElement(r.Fragment,null,e.poster&&r.createElement(Ne,{slide:{src:e.poster},...i}),r.createElement(Cl,{className:c})):r.createElement(kl,{className:c})}const jl=_e("active"),Rt=_e("fadein"),Ot=_e("fadeout"),Sl=_e("placeholder"),Bn="delay",Zn="duration";function Ml({slide:e,index:t,onClick:n,fadeIn:o,fadeOut:s,placeholder:a,onLoseFocus:i}){const c=r.useRef(null),{render:u,styles:m,labels:d}=q(),{slides:h,globalIndex:f}=ue(),{getOwnerDocument:p}=$e(),{width:v,height:x,imageFit:N}=qo(),C={width:v,height:x},L=t===f,g=V(i);return r.useEffect(()=>{s&&p().activeElement===c.current&&g()},[s,g,p]),r.createElement("button",{ref:c,type:"button",className:te(O(Ae),O(G()),L&&O(G(jl())),o&&O(G(Rt())),s&&O(G(Ot())),a&&O(G(Sl()))),style:{...o?{[Z(G(Rt(Zn)))]:`${o.duration}ms`,[Z(G(Rt(Bn)))]:`${o.delay}ms`}:null,...s?{[Z(G(Ot(Zn)))]:`${s.duration}ms`,[Z(G(Ot(Bn)))]:`${s.delay}ms`}:null,...m.thumbnail},onClick:n,"aria-current":L?!0:void 0,"aria-label":Mo(d,h,t)},e&&Nl({slide:e,render:u,rect:C,imageFit:N}))}function Un(e){return["top","bottom"].includes(e)}function Xn(e,t){return t+2*(e.border+e.padding)+e.gap}function Ll(e){const{thumbnail:t,poster:n}=e||{thumbnail:"placeholder"};return typeof t=="string"&&t||typeof n=="string"&&n||e&&Lo(e)||void 0}function Yn({visible:e,containerRef:t}){const n=r.useRef(null),o=bt(),{publish:s,subscribe:a}=Je(),{carousel:i,styles:c,labels:u}=q(),{slides:m,globalIndex:d,animation:h}=ue(),{registerSensors:f,subscribeSensors:p}=Vo();Xo(p);const v=qo(),{position:x,width:N,height:C,border:L,borderStyle:g,borderColor:_,borderRadius:T,padding:b,gap:w,vignette:P}=v,E=h?.duration!==void 0&&h?.increment||0,$=h?.duration||0,{prepareAnimation:j}=Ht(n,R=>({keyframes:Un(x)?[{transform:`translateX(${(o?-1:1)*Xn(v,N)*E+R}px)`},{transform:"translateX(0)"}]:[{transform:`translateY(${Xn(v,C)*E+R}px)`},{transform:"translateY(0)"}],duration:$,easing:h?.easing})),F=V(()=>{let R=0;if(t.current&&n.current){const y=t.current.getBoundingClientRect(),k=n.current.getBoundingClientRect();R=Un(x)?k.left-y.left-(y.width-k.width)/2:k.top-y.top-(y.height-k.height)/2}j(R)});r.useEffect(()=>qe(a($t,F)),[a,F]);const S=_o(i,m),W=[];if(nn(m))for(let R=d-S-Math.abs(E);R<=d+S+Math.abs(E);R+=1){const k=i.finite&&(R<0||R>m.length-1)||E<0&&R<d-S||E>0&&R>d+S?null:on(m,R),z=[`${R}`,Ll(k)].filter(Boolean).join("|");W.push({key:z,index:R,slide:k})}const A=R=>()=>{R>d?s(be,{count:R-d}):R<d&&s(xe,{count:d-R})};return r.createElement("div",{className:te(O(je("container")),O(Ae)),style:{...e?null:{display:"none"},...N!==ke.width?{[Z(G("width"))]:`${N}px`}:null,...C!==ke.height?{[Z(G("height"))]:`${C}px`}:null,...L!==ke.border?{[Z(G("border"))]:`${L}px`}:null,...g?{[Z(G("border_style"))]:g}:null,..._?{[Z(G("border_color"))]:_}:null,...T!==ke.borderRadius?{[Z(G("border_radius"))]:`${T}px`}:null,...b!==ke.padding?{[Z(G("padding"))]:`${b}px`}:null,...w!==ke.gap?{[Z(G("gap"))]:`${w}px`}:null,...c.thumbnailsContainer}},r.createElement("nav",{ref:n,style:c.thumbnailsTrack,className:te(O(je("track")),O(Ae)),"aria-label":Se(u,"Thumbnails"),tabIndex:-1,...f},W.map(({key:R,index:y,slide:k})=>{const z=$/Math.abs(E||1),U=E>0&&y>d+S-E&&y<=d+S||E<0&&y<d-S-E&&y>=d-S?{duration:z,delay:((E>0?y-(d+S-E):d-S-E-y)-1)*z}:void 0,B=E>0&&y<d-S||E<0&&y>d+S?{duration:z,delay:(E>0?E-(d-S-y):-E-(y-(d+S)))*z}:void 0;return r.createElement(Ml,{key:R,index:y,slide:k,fadeIn:U,fadeOut:B,placeholder:!k,onClick:A(y),onLoseFocus:()=>{var I;return(I=n.current)===null||I===void 0?void 0:I.focus()}})})),P&&r.createElement("div",{className:O(je("vignette"))}))}const Jo=r.createContext(null),_l=ce("useThumbnails","ThumbnailsContext",Jo);function Tl({children:e,...t}){const{ref:n,position:o,hidden:s}=an(t.thumbnails),[a,i]=r.useState(!s),c=r.useRef(null),u=r.useMemo(()=>({visible:a,show:()=>i(!0),hide:()=>i(!1)}),[a]);return r.useImperativeHandle(n,()=>u,[u]),r.createElement(Ao,{...t},r.createElement(Jo.Provider,{value:u},r.createElement("div",{ref:c,className:te(O(je()),O(je(`${o}`)))},["start","top"].includes(o)&&r.createElement(Yn,{containerRef:c,visible:a}),r.createElement("div",{className:O(je("wrapper"))},e),["end","bottom"].includes(o)&&r.createElement(Yn,{containerRef:c,visible:a}))))}const Qo=()=>r.createElement(r.Fragment,null,r.createElement("path",{strokeWidth:2,stroke:"currentColor",strokeLinejoin:"round",fill:"none",d:"M3 5l18 0l0 14l-18 0l0-14z"}),r.createElement("path",{d:"M5 14h4v3h-4zM10 14h4v3h-4zM15 14h4v3h-4z"})),Il=oe("ThumbnailsVisible",Qo()),Pl=Sa("ThumbnailsHidden",Qo());function Rl(){const{visible:e,show:t,hide:n}=_l(),{render:o}=q();return o.buttonThumbnails?r.createElement(r.Fragment,null,o.buttonThumbnails({visible:e,show:t,hide:n})):r.createElement(Fe,{label:e?"Hide thumbnails":"Show thumbnails",icon:e?Il:Pl,renderIcon:e?o.iconThumbnailsVisible:o.iconThumbnailsHidden,onClick:e?n:t})}function Ol({augment:e,contains:t,append:n,addParent:o}){e(({thumbnails:a,toolbar:i,...c})=>{const u=an(a);return{toolbar:vt(i,Ye,u.showToggle?r.createElement(Rl,null):null),thumbnails:u,...c}});const s=fe(Ye,Tl);t(Xe)?n(Xe,s):o(pt,s)}const Dl={auto:!1,ref:null},es=e=>({...Dl,...e}),ts=r.createContext(null),Al=ce("useFullscreen","FullscreenContext",ts);function zl({fullscreen:e,on:t,children:n}){const{auto:o,ref:s}=es(e),a=r.useRef(null),[i,c]=r.useState(),[u,m]=r.useState(!1),d=r.useRef(!1),{getOwnerDocument:h}=$e();ie(()=>{var g,_,T,b;const w=h();c(!((b=(T=(_=(g=w.fullscreenEnabled)!==null&&g!==void 0?g:w.webkitFullscreenEnabled)!==null&&_!==void 0?_:w.mozFullScreenEnabled)!==null&&T!==void 0?T:w.msFullscreenEnabled)!==null&&b!==void 0&&b))},[h]);const f=r.useCallback(()=>{var g;const _=h(),T=_.fullscreenElement||_.webkitFullscreenElement||_.mozFullScreenElement||_.msFullscreenElement;return((g=T?.shadowRoot)===null||g===void 0?void 0:g.fullscreenElement)||T},[h]),p=r.useCallback(()=>{const g=a.current;try{g.requestFullscreen?g.requestFullscreen().catch(()=>{}):g.webkitRequestFullscreen?g.webkitRequestFullscreen():g.mozRequestFullScreen?g.mozRequestFullScreen():g.msRequestFullscreen&&g.msRequestFullscreen()}catch{}},[]),v=r.useCallback(()=>{if(!f())return;const g=h();try{g.exitFullscreen?g.exitFullscreen().catch(()=>{}):g.webkitExitFullscreen?g.webkitExitFullscreen():g.mozCancelFullScreen?g.mozCancelFullScreen():g.msExitFullscreen&&g.msExitFullscreen()}catch{}},[f,h]);r.useEffect(()=>{const g=h(),_=()=>{m(f()===a.current)};return qe(...["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"].map(T=>(g.addEventListener(T,_),()=>g.removeEventListener(T,_))))},[f,h]);const x=V(()=>{var g;return(g=t.enterFullscreen)===null||g===void 0?void 0:g.call(t)}),N=V(()=>{var g;return(g=t.exitFullscreen)===null||g===void 0?void 0:g.call(t)});r.useEffect(()=>{u&&(d.current=!0),d.current&&(u?x:N)()},[u,x,N]);const C=V(()=>{var g;return(g=o?p:null)===null||g===void 0||g(),v});r.useEffect(C,[C]);const L=r.useMemo(()=>({fullscreen:u,disabled:i,enter:p,exit:v}),[u,i,p,v]);return r.useImperativeHandle(s,()=>L,[L]),r.createElement("div",{ref:a,className:te(O(Xe),O(vo))},r.createElement(ts.Provider,{value:L},n))}const $l=oe("EnterFullscreen",r.createElement("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"})),Fl=oe("ExitFullscreen",r.createElement("path",{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"}));function Wl(){var e;const{fullscreen:t,disabled:n,enter:o,exit:s}=Al(),{render:a}=q();return n?null:a.buttonFullscreen?r.createElement(r.Fragment,null,(e=a.buttonFullscreen)===null||e===void 0?void 0:e.call(a,{fullscreen:t,disabled:n,enter:o,exit:s})):r.createElement(Fe,{disabled:n,label:t?"Exit Fullscreen":"Enter Fullscreen",icon:t?Fl:$l,renderIcon:t?a.iconExitFullscreen:a.iconEnterFullscreen,onClick:t?s:o})}function Hl({augment:e,contains:t,addParent:n}){e(({fullscreen:o,toolbar:s,...a})=>({toolbar:vt(s,Xe,r.createElement(Wl,null)),fullscreen:es(o),...a})),n(t(Ye)?Ye:pt,fe(Xe,zl))}const Vl={download:void 0},ns=e=>({...Vl,...e});function Bl(e,t){const n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=()=>{Bt(n.response,t)},n.onerror=()=>{console.error("Failed to download file")},n.send()}function Zl(e){const t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Dt(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{const n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}}function Bt(e,t){const n=document.createElement("a");n.rel="noopener",n.download=t||"",n.download||(n.target="_blank"),typeof e=="string"?(n.href=e,n.origin!==window.location.origin?Zl(n.href)?Bl(e,t):(n.target="_blank",Dt(n)):Dt(n)):(n.href=URL.createObjectURL(e),setTimeout(()=>URL.revokeObjectURL(n.href),3e4),setTimeout(()=>Dt(n),0))}const Ul=oe("DownloadIcon",r.createElement("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z"}));function Xl(){const{render:e,on:t,download:n}=q(),{download:o}=ns(n),{currentSlide:s,currentIndex:a}=ue();if(e.buttonDownload)return r.createElement(r.Fragment,null,e.buttonDownload());const i=s&&(s.downloadUrl||typeof s.download=="string"&&s.download||typeof s.download=="object"&&s.download.url||ye(s)&&s.src)||void 0,c=o?s?.download!==!1:!!i,u=()=>{if(s&&i){const d=s.downloadFilename||typeof s.download=="object"&&s.download.filename||void 0;Bt(i,d)}},m=()=>{var d;s&&((o||u)({slide:s,saveAs:Bt}),(d=t.download)===null||d===void 0||d.call(t,{index:a}))};return r.createElement(Fe,{label:"Download",icon:Ul,renderIcon:e.iconDownload,disabled:!c,onClick:m})}function Yl({augment:e}){e(({toolbar:t,download:n,...o})=>({toolbar:vt(t,sa,r.createElement(Xl,null)),download:ns(n),...o}))}const Kl=({size:e=24,color:t="currentColor",className:n,...o})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,className:n,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...o,children:[l.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),l.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),Gl=({size:e=24,color:t="currentColor",className:n,...o})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,className:n,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...o,children:[l.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),l.jsx("path",{d:"m15 5 4 4"})]}),ql=({size:e=24,color:t="currentColor",className:n,...o})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,className:n,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...o,children:[l.jsx("path",{d:"M5 12h14"}),l.jsx("path",{d:"M12 5v14"})]}),Jl=({size:e=24,color:t="currentColor",className:n,...o})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,className:n,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...o,children:[l.jsx("path",{d:"M3 6h18"}),l.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),l.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),Ql=({size:e=24,color:t="currentColor",className:n,...o})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,className:n,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...o,children:l.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),ei=({size:e=24,color:t="currentColor",className:n,...o})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,className:n,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...o,children:[l.jsx("polyline",{points:"23 4 23 10 17 10"}),l.jsx("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]}),os=({size:e=20,color:t="currentColor",className:n,...o})=>l.jsx("svg",{width:e,height:e,className:n,fill:t,viewBox:"0 0 20 20",...o,children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),ti=({size:e=20,color:t="currentColor",className:n,...o})=>l.jsx("svg",{width:e,height:e,className:n,fill:t,viewBox:"0 0 20 20",...o,children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),Oe=({size:e=20,color:t="currentColor",className:n,...o})=>l.jsx("svg",{width:e,height:e,className:n,fill:t,viewBox:"0 0 20 20",...o,children:l.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),ss=({size:e=20,color:t="currentColor",className:n,...o})=>l.jsx("svg",{width:e,height:e,className:n,fill:t,viewBox:"0 0 20 20",...o,children:l.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),ni=({size:e=24,color:t="currentColor",className:n,...o})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,className:n,fill:t,viewBox:"0 0 24 24",...o,children:l.jsx("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),oi=({size:e=24,color:t="currentColor",className:n,...o})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,className:n,fill:"none",viewBox:"0 0 24 24",stroke:t,...o,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),si=({size:e=24,color:t="currentColor",className:n,...o})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,className:n,fill:"none",viewBox:"0 0 24 24",stroke:t,...o,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),Kn={success:os,error:ti,info:Oe,warning:Oe},ri=()=>{const e=Me(),{message:t,type:n,open:o}=pe(Ms)||{open:!1};r.useEffect(()=>{if(o){const i=setTimeout(()=>{e(Nt())},3e3);return()=>clearTimeout(i)}},[o,e]);const s=Kn[n]||Kn.info,a=(i,c)=>{Math.abs(c.offset.x)>100&&e(Nt())};return l.jsx(mt,{children:o&&l.jsx(ee.div,{initial:{opacity:0,y:50,scale:.3},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.5,transition:{duration:.2}},transition:{type:"spring",stiffness:400,damping:25},className:"fixed bottom-5 left-1/2 -translate-x-1/2 z-10000",drag:"x",dragConstraints:{left:0,right:0},dragSnapToOrigin:!0,onDragEnd:a,children:l.jsxs("div",{className:"flex items-center p-4 text-gray-600 bg-white rounded-lg shadow-lg dark:bg-zinc-800 dark:text-zinc-300 dark:border dark:border-zinc-700 max-w-md",role:"alert",children:[l.jsx("div",{className:`inline-flex items-center justify-center flex-shrink-0 w-8 h-8 ${n==="success"?"text-green-500":""}`,children:l.jsx(s,{className:"w-5 h-5"})}),l.jsx("div",{className:"ml-3 text-sm font-normal",children:t}),l.jsxs("button",{type:"button",className:"ml-auto -mx-1.5 -my-1.5 bg-white text-gray-400 hover:text-gray-900 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex h-8 w-8 dark:text-zinc-400 dark:hover:text-white dark:bg-zinc-800 dark:hover:bg-zinc-700","aria-label":"Close",onClick:()=>e(Nt()),children:[l.jsx("span",{className:"sr-only",children:"Close"}),l.jsx(ss,{className:"w-5 h-5"})]})]})})})},Gn=({rootDb:e,memoId:t,master:n,onEdit:o,onUtil:s,onNewMemo:a,onDelete:i,onCopy:c})=>{const{t:u}=we(),m=Me(),d=async()=>{try{await m(Ls({rootDb:e,memoId:t})),m(fn({message:u("memo_cache_reset_successfully"),type:"success"}))}catch(h){console.error("Failed to reset Redux state:",h),m(fn({message:u("error_while_resetting_state"),type:"error"}))}};return l.jsxs("div",{className:"mx-auto grid w-full max-w-lg grid-cols-6 items-center justify-center gap-2 px-4 py-2 text-center",children:[n&&l.jsx(me,{size:"sm",variant:"outlined",color:"brand",onClick:s,className:"gap-1.5",children:l.jsxs("div",{className:"flex items-center justify-center",children:[l.jsx(Kl,{className:"size-4"}),l.jsx("span",{className:"ml-2 whitespace-nowrap",children:u("util")})]})}),l.jsx(me,{size:"sm",variant:"outlined",color:"brand",onClick:o,className:"gap-1.5",children:l.jsxs("div",{className:"flex items-center justify-center",children:[l.jsx(Gl,{className:"size-4"}),l.jsx("span",{className:"ml-2 whitespace-nowrap",children:u("edit")})]})}),l.jsx(me,{size:"sm",variant:"outlined",color:"brand",onClick:a,className:"gap-1.5",children:l.jsxs("div",{className:"flex items-center justify-center",children:[l.jsx(ql,{className:"size-4"}),l.jsx("span",{className:"ml-2 whitespace-nowrap",children:u("new")})]})}),l.jsx(me,{size:"sm",variant:"outlined",color:"error",onClick:i,className:"gap-1.5",children:l.jsxs("div",{className:"flex items-center justify-center",children:[l.jsx(Jl,{className:"size-4"}),l.jsx("span",{className:"ml-2 whitespace-nowrap",children:u("delete")})]})}),c&&l.jsx(me,{size:"sm",variant:"outlined",color:"secondary",onClick:c,className:"gap-1.5",children:l.jsxs("div",{className:"flex items-center justify-center",children:[l.jsx(Ql,{className:"size-4"}),l.jsx("span",{className:"ml-2 whitespace-nowrap",children:u("public")})]})}),n&&l.jsx(me,{size:"sm",variant:"outlined",color:"danger",onClick:d,className:"gap-1.5",children:l.jsxs("div",{className:"flex items-center justify-center",children:[l.jsx(ei,{className:"size-4"}),l.jsx("span",{className:"ml-2 whitespace-nowrap",children:u("reset")})]})})]})},qn={info:l.jsx(Oe,{className:"h-6 w-6 text-blue-500"}),success:l.jsx(os,{className:"h-6 w-6 text-green-500"}),warning:l.jsx(Oe,{className:"h-6 w-6 text-yellow-500"}),error:l.jsx(Oe,{className:"h-6 w-6 text-red-500"}),danger:l.jsx(Oe,{className:"h-6 w-6 text-red-500"})},ai={info:"blue",success:"green",warning:"yellow",error:"red",danger:"red"},li=()=>{const e=Me(),{t}=we(),{open:n,title:o,message:s,color:a}=pe(_s),i=()=>{e(pn({confirmed:!0}))},c=()=>{e(pn({confirmed:!1}))},u=qn[a]||qn.info,m=ai[a]||"indigo";return l.jsx(mt,{children:n&&l.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:c,children:l.jsxs(ee.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"relative bg-white dark:bg-zinc-800 rounded-lg shadow-xl w-full max-w-md m-4",onClick:d=>d.stopPropagation(),children:[l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"flex-shrink-0 mr-4",children:u}),l.jsxs("div",{className:"flex-grow",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",id:"modal-title",children:o}),l.jsx("div",{className:"mt-2",children:l.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-300",children:s})})]}),l.jsx("button",{onClick:c,className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-zinc-700",children:l.jsx(ss,{className:"w-5 h-5 text-gray-500"})})]})}),l.jsxs("div",{className:"bg-gray-50 dark:bg-zinc-900/50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse rounded-b-lg",children:[l.jsx(me,{color:m,onClick:i,className:"w-full sm:w-auto sm:ml-3",children:t("confirm")}),l.jsx(me,{variant:"outlined",color:"secondary",onClick:c,className:"w-full sm:w-auto mt-2 sm:mt-0",children:t("cancel")})]})]})})})},ii=({rootDb:e,searchWord:t})=>{const{user:n}=Ke(),{memoId:o}=lr(),s=Me(),a=pe(D=>D.ui.modal),i=pe(D=>D.tabs[e]?.activeTab||null),{memoMap:c,isLoading:u,onBookmark:m}=Ts(e,n,o),[d,h]=r.useState(!1),[f,p]=r.useState(!1),[v,x]=r.useState(!1),[N,C]=r.useState(!1),[L,g]=r.useState(0),{t:_}=we(),{register:T,handleSubmit:b,reset:w,getValues:P,watch:E}=Is({defaultValues:{title:"",memo:""}}),$=E("memo");r.useEffect(()=>{w({title:c?.title||"",memo:c?.memo||""})},[c,w]);const{scrollYProgress:j}=Fr(),F=Vr(j,{stiffness:100,damping:30,restDelta:.001}),S=ao(),A=ft()?.state?.fullIndex,R=pe(D=>D.treeData.data),y=async()=>{if(!n||!o||e!=="memo"){s(xn({title:_("error"),message:"Only private memos can be copied.",color:"error"}));return}try{await s(Bs({userId:n.uid,memoId:o,memoMap:c,successMessage:_("copy_completed")})).unwrap()}catch(D){console.error("Copy failed:",D)}},k=b(D=>{s(Ps({rootDb:e,memoId:o,newMemoContent:D.memo})).unwrap().then(()=>{p(!1)}).catch(ae=>{console.error("메모 저장 중 오류 발생:",ae),p(!1)})}),z=()=>{p(!0)},U=()=>{h(!0)},B=b(D=>{s(Rs({rootDb:e,userId:n.uid,memoId:o,newTitle:D.title})).unwrap().then(()=>{h(!1),s({type:"tabs/updateTabTitle",payload:{id:o,title:D.title,rootDb:e}}),s({type:"bookmark/updateBookmarkTitle",payload:{id:o,title:D.title}}),s(Os({id:o,newTitle:D.title}))}).catch(ae=>{console.error("제목 업데이트 중 오류 발생:",ae),h(!1)})}),I=D=>{D.key==="Enter"?(D.preventDefault(),B()):D.key==="Escape"&&h(!1)},Y=()=>{const D=`/${e==="memo"?"m":e}/edit/${o}`;S(D,{state:{fullIndex:A}})},re=()=>{const D=`/${e==="memo"?"m":e}/util/${o}`;S(D,{state:{fullIndex:A}})},ne=()=>{const D=`/${e==="memo"?"m":e}/insert/${o}`;S(D,{state:{fullIndex:A}})},Ee=()=>{y()},ve=D=>{g(D),C(!0)},Te=()=>{s(xn({title:_("delete_confirm_title"),message:_("delete_confirm_message"),color:"warning"}))},Qe=async()=>{try{s({type:"tabs/setDeleteId",payload:o}),await s(Hs({rootDb:e,userId:n.uid,memoId:o,successMessage:"메모가 삭제되었습니다.",loadingType:"deleting",loadingMessage:"메모를 삭제하고 있습니다..."})).unwrap(),e==="memo"&&await s(Vs({userId:n.uid,nodeId:o,currentTreeData:R})).unwrap(),s(ro({tabId:o,rootDb:e})),S(`/${e==="memo"?"m":e}`)}catch(D){console.error("삭제 중 오류 발생:",D)}};return r.useEffect(()=>{!a.open&&a.isConfirmed&&(Qe(),s(Ds()))},[a.open,a.isConfirmed,s]),r.useEffect(()=>{const D=localStorage.getItem(`scrollPos-memo-${o}`);D&&setTimeout(()=>window.scrollTo(0,parseInt(D,10)),100);let ae;const We=()=>{clearTimeout(ae),ae=setTimeout(()=>{localStorage.setItem(`scrollPos-memo-${o}`,window.scrollY.toString())},200)};return window.addEventListener("scroll",We),()=>window.removeEventListener("scroll",We)},[o]),r.useEffect(()=>{c?.title&&As({title:c.title,description:""})},[c]),o===""||n===void 0?null:u||i!==o?l.jsx(At,{}):c?l.jsxs("div",{className:"MemoDetail min-w-screen-sm pt-3 pb-0 relative rounded-t-lg",children:[l.jsx(ri,{}),l.jsx(rl,{open:N,close:()=>C(!1),slides:c?.image?.map(D=>({src:D.url,download:D.name}))||[],index:L,plugins:[El,Ol,Hl,Yl],classNames:{icon:"dark:text-white"}}),l.jsx(li,{}),l.jsx(ee.div,{className:`progress-bar sticky ${v?"top-32":"top-20"} z-10`,style:{scaleX:F}}),l.jsxs("div",{className:"MemoDetail_body",children:[l.jsxs("div",{className:`sticky ${v?"top-16":"top-0"} ${H.card} backdrop-blur-sm z-10`,children:[l.jsxs("div",{className:"p-3 sm:p-4",children:[l.jsxs("div",{className:H.between,children:[l.jsxs("p",{className:`${H.truncate} ${H.textXs} ${H.textGray500DarkZinc400}`,children:[l.jsx(wn,{to:e==="memo"?"/m":"/home",className:"hover:!text-gray-900 dark:hover:!text-white",children:e==="memo"?"MEMO":"HOME"}),c?.path?.map((D,ae)=>c.path.length===ae+1?` > ${D?.title}`:l.jsxs(Ge.Fragment,{children:[" "," > ",l.jsx(wn,{to:e==="memo"?`/m/${D.id}`:`/home/${D.id}`,className:"hover:!text-gray-900 dark:hover:!text-white",children:D?.title})]},ae))]}),l.jsx(ee.button,{whileTap:{scale:.8},className:`${H.flexShrink0} ${H.roundedFull} p-2 ${H.buttonHoverGrayLight}`,"aria-label":_("bookmark"),onClick:m,children:c?.bookmark==="Y"?l.jsx(ni,{className:`${H.h5W5} ${H.textRed500}`}):l.jsx(oi,{className:`${H.h5W5} ${H.textGray500}`})})]}),d?l.jsx("input",{...T("title"),type:"text",onKeyDown:I,onBlur:B,className:`w-full bg-transparent border-b-2 border-blue-500 focus:outline-none 
													${H.heading2XlBoldSm3Xl} ${H.textGray900}`,autoFocus:!0}):l.jsx("div",{onDoubleClick:U,className:`MemoDetail_Title text-left ${H.heading2XlBoldSm3Xl} ${H.textGray900} cursor-pointer`,children:c?.title}),l.jsx("button",{onClick:()=>x(!v),className:`${H.floatingActionButton} absolute top-11 sm:top-14 right-2 sm:right-3`,children:l.jsx(ee.div,{animate:{rotate:v?135:0},children:l.jsx(si,{className:"h-6 w-6"})})})]}),l.jsx(ee.div,{initial:!1,animate:{height:v?"auto":0,opacity:v?1:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:l.jsx("div",{className:"border-t border-gray-200 bg-gray-50 dark:border-zinc-800 dark:bg-zinc-900/50",children:l.jsx(Gn,{master:n?.uid===lt,rootDb:e,memoId:o,onEdit:Y,onUtil:re,onNewMemo:ne,onDelete:Te,onCopy:e==="memo"?Ee:null})})})]}),c&&c.html==="sheet"&&l.jsx(zs,{rootDb:e,detailData:c}),l.jsxs("div",{className:`MemoDetail_Content ${c?.memo?.length>0?`${H.card} my-4 p-2 sm:p-4`:"p-1"}`,onDoubleClick:z,children:[f?l.jsxs("div",{className:`${H.card} p-4`,children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(gn,{children:_("input")}),l.jsx("textarea",{...T("memo"),className:"w-full min-h-[100px] p-2 border rounded dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:`${($||"").split(/\r\n|\r|\n/g).length}`,autoFocus:!0})]}),l.jsxs("div",{children:[l.jsx(gn,{children:_("preview")}),l.jsx("div",{className:"prose dark:prose-invert max-w-none p-2 border rounded min-h-[100px] overflow-y-auto dark:bg-gray-700 dark:border-gray-600",children:l.jsx(vn,{postData:$,highlightWord:""})})]})]}),l.jsxs("div",{className:"mt-2 flex justify-end gap-2",children:[l.jsx(me,{variant:"outlined",color:H.button.indigo,size:"sm",onClick:()=>p(!1),children:_("cancel")}),l.jsx(me,{color:H.button.indigo,onClick:k,children:_("save")})]})]}):c&&c.html!=="sheet"?c?.html==="N"?l.jsx(vn,{postData:c?.memo,highlightWord:t}):c?.html!=="N"&&c?.memo&&l.jsx($s,{text:c.memo}):"",l.jsx(Fs,{imageList:c?.image,onImageClick:ve}),!c&&l.jsx("div",{className:"flex justify-center py-12",children:l.jsx("div",{className:`${H.flexCenter} py-12`})})]})]}),l.jsx(Ws,{rootDb:e,memoId:o,enableEdit:!0}),l.jsx(ee.div,{initial:!1,animate:{height:v?"auto":0,opacity:v?1:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:l.jsx("div",{className:`${H.line}`,children:l.jsx(Gn,{master:n?.uid===lt,rootDb:e,onEdit:Y,onUtil:re,onNewMemo:ne,onDelete:Te,onCopy:e==="memo"?Ee:null})})})]}):l.jsx("div",{className:"p-4 text-center text-gray-500",children:"메모를 찾을 수 없거나 접근 권한이 없습니다."})},ci=Ge.lazy(()=>ut(()=>import("./MemoSheetGrid-Cp9nxeoj.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),Jn=Ge.lazy(()=>ut(()=>import("./MemoDetailEdit-ka1i3_nl.js"),__vite__mapDeps([9,1,2,3,4,5,6,10,11,12,13,14,15,16,7,8,17]))),ui=Ge.lazy(()=>ut(()=>import("./MemoDetailUtil-LpcXszEY.js"),__vite__mapDeps([18,1,2,3,4,5,6,10,14,15,16,11,7,8]))),di=Ge.lazy(()=>ut(()=>import("./TwTodo-CZonB6j4.js"),__vite__mapDeps([19,1,2,3,4,5,6,12,10,15,16]))),hi=({rootDb:e,user:t,memoId:n,isLoading:o,onBookmark:s,handleCloseTab:a})=>{const i=ft();return l.jsx(r.Suspense,{fallback:l.jsx(At,{}),children:l.jsx(mt,{children:l.jsxs(ir,{location:i,children:[l.jsx(Ie,{path:"todo",element:l.jsx(ee.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:l.jsx(di,{})})}),l.jsx(Ie,{path:"sheet/:sheetId?",element:l.jsx(ee.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:l.jsx(ci,{})})}),l.jsx(Ie,{path:"edit/:memoId",element:l.jsx(ee.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:l.jsx(Jn,{rootDb:e,isLoading:o})})}),l.jsx(Ie,{path:"insert/:memoId",element:l.jsx(ee.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:l.jsx(Jn,{rootDb:e,isLoading:o})})}),l.jsx(Ie,{path:"util/:memoId",element:l.jsx(ee.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:l.jsx(ui,{rootDb:e,isLoading:o})})}),l.jsx(Ie,{path:":memoId",element:l.jsx(ee.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:o?l.jsx(At,{}):l.jsx(ii,{rootDb:e,onBookmark:s,onDeleteTab:()=>{a&&a(null,{id:n})}})})})]},i.pathname)})})},mi=e=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...e,children:l.jsx("path",{fillRule:"evenodd",d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zM6 20V4h7v5h5v11H6zM8 12h3v3H8v-3zm0 4h3v3H8v-3zm4-4h3v3h-3v-3zm0 4h3v3h-3v-3z",clipRule:"evenodd"})}),fi=({tabInfo:e,handleCloseTab:t,isActive:n,onClickTab:o})=>{const{t:s}=we(),{user:a}=Ke(),{attributes:i,listeners:c,setNodeRef:u,transform:m,transition:d,isDragging:h}=Zs({id:e.id}),f={transform:Us.Transform?.toString(m),transition:d,zIndex:h?1:"auto"};return l.jsxs("div",{ref:u,style:f,...i,...c,"data-tab-id":e.id,onClick:o,title:e.title,className:`SortableTab group relative flex flex-shrink-0 items-center pl-3 pr-2 py-1.5 text-sm rounded-t-md transition-colors duration-200 min-w-28 max-w-48 border-b-2 cursor-pointer
				${n?"bg-gray-200 dark:bg-zinc-700 border-blue-500 text-gray-800 dark:text-gray-100":"border-transparent text-secondary hover:bg-gray-200/70 dark:hover:bg-zinc-700/70"}
				${h?"opacity-50 shadow-lg":""}`,children:[e.rootDb==="memo"?l.jsx(Xs,{className:`w-5 h-5 mr-1 flex-shrink-0 transition-transform duration-200 ${n?"scale-110":""}`,fill:"currentColor"}):e.rootDb==="sheet"?l.jsx(mi,{className:`w-5 h-5 mr-1 flex-shrink-0 transition-transform duration-200 ${n?"scale-110":""}`}):null,l.jsx("span",{className:"truncate pr-1",style:{fontFamily:"sans-serif"},children:e.title||s("loading")}),l.jsx("button",{onClick:p=>{p.preventDefault(),p.stopPropagation(),t(e.id)},className:`ml-auto flex-shrink-0 p-1 rounded-full transition-opacity duration-200 opacity-0 group-hover:opacity-100
					text-gray-500 dark:text-gray-400 
					hover:bg-gray-300/50 dark:hover:bg-gray-600/50 hover:text-gray-700 dark:hover:text-white
				`,children:l.jsx(lo,{className:"w-3 h-3"})})]})},pi=r.memo(({rootDb:e,user:t})=>{const n=r.useRef(null),[o,s]=r.useState({left:!1,right:!1}),[a,i]=r.useState(!0),c=r.useRef(0),u=ao(),m=ft(),d=m.pathname.split("/").pop(),h=Me(),{tabs:f,activeTab:p}=pe(b=>b.tabs[e]||{tabs:[],activeTab:null}),v=pe(b=>b?.tabs?.deleteId||null),x=r.useRef(null);r.useEffect(()=>{if((async()=>{if(v!==d&&d&&d!=="insert"&&m.pathname!=="/m"&&m.pathname!=="/home")if(f.some(P=>P.id===d))p!==d&&f.some(P=>P.id===d)&&x.current===null&&h(bn({activeTabId:d,rootDb:e}));else{let P="Loading...";try{let E;if(e==="sheet"?E=`memo_sheet/${t?.uid}/${d}/title`:e==="memo"?E=`${e}_txt/${t?.uid}/${d}/title`:e==="home"&&(E=`${e}_txt/${d}/title`),E){const $=await Xt(E);$&&(P=$)}}catch(E){console.error("Error fetching tab title:",E)}h(or({id:d,path:m.pathname,rootDb:e,title:P}))}})(),x.current=null,v){const w=setTimeout(()=>{h(Ys())},2e3);return()=>clearTimeout(w)}},[d,m.pathname,e,p,t?.uid,v,f,h]);const N=r.useCallback(()=>{const b=n.current;if(b){const w=b.scrollWidth>b.clientWidth,P=b.scrollLeft===0,E=b.scrollLeft+b.clientWidth>=b.scrollWidth-1;s($=>{const j={left:w&&!P,right:w&&!E};return $.left===j.left&&$.right===j.right?$:j})}},[]);r.useEffect(()=>{const b=()=>{const w=window.pageYOffset||document.documentElement.scrollTop;w>c.current?i(!1):i(!0),c.current=w<=0?0:w};return window.addEventListener("scroll",b),()=>{window.removeEventListener("scroll",b)}},[]);const C=b=>{n.current?.scrollBy({left:b==="left"?-200:200,behavior:"smooth"})},L=r.useCallback(b=>{const w=f.findIndex(P=>P.id===b);if(w!==-1&&(h(ro({tabId:b,rootDb:e})),h({type:"tabs/setDeleteId",payload:b}),p===b))if(f.length>1){const P=w>0?w-1:0,E=f[P===w?P+1:P];u(E.path)}else u(e==="memo"?"/m":"/home")},[f,p,h,u,e]),g=r.useCallback(b=>{const w=b.split("/").pop();x.current=w,h(bn({activeTabId:w,rootDb:e})),requestAnimationFrame(()=>{u(b)})},[h,u]),_=r.useCallback(()=>{h(Ks({rootDb:e}))},[h]),T=r.useCallback(b=>{const{active:w,over:P}=b;if(P&&w.id!==P.id){const E=f.findIndex(j=>j.id===w.id),$=f.findIndex(j=>j.id===P.id);h(Gs({tabs:qs(f,E,$),rootDb:e}))}},[f,h]);return r.useEffect(()=>{N();const b=n.current;return b?.addEventListener("scroll",N),window.addEventListener("resize",N),()=>{b?.removeEventListener("scroll",N),window.removeEventListener("resize",N)}},[N,f.length]),l.jsx("div",{className:`MemoTabs sticky ${a?"top-18":"top-1"} z-1000 rounded-t-md bg-gray-50/70 dark:bg-zinc-800/70 backdrop-blur-sm shadow-sm`,children:l.jsxs("div",{className:"relative flex items-center justify-between ",children:[o.left&&l.jsx("button",{onClick:()=>C("left"),className:"absolute left-0 z-10 p-1 border border-gray-200 dark:border-gray-700 text-gray-500 dark:text-gray-400 bg-white dark:bg-zinc-900 dark:hover:!text-white hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full group",children:l.jsx(Js,{className:"w-5 h-5 fill-current"})}),l.jsx(Qs,{id:"memo-tabs",onDragEnd:T,children:l.jsx("div",{ref:n,className:"MemoTabs relative flex items-center overflow-x-scroll scrollbar-hide whitespace-nowrap",children:l.jsx(er,{items:f.map(b=>b.id),strategy:tr,children:l.jsx(mt,{children:f.map(b=>l.jsx(ee.div,{layout:!0,initial:{opacity:0,scale:.8},transition:{type:"spring",stiffness:350,damping:30},animate:{opacity:1,scale:1},exit:{opacity:0,width:0,paddingLeft:0,paddingRight:0,transition:{duration:.3}},children:l.jsx(fi,{tabInfo:b,onClickTab:()=>g(b.path),handleCloseTab:L,isActive:b.id===p})},b.id))})})})}),l.jsxs("div",{className:"flex items-center",children:[o.right&&l.jsx("button",{onClick:()=>C("right"),className:"z-10 p-1 border border-gray-200 dark:border-gray-700 text-gray-500 dark:text-gray-400 bg-white dark:bg-zinc-900 dark:hover:!text-white hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full group",children:l.jsx(nr,{className:"w-5 h-5 fill-current"})}),f.length>0&&l.jsx("button",{onClick:_,className:"ml-2 mr-2 p-1.5 text-gray-500 dark:text-gray-400 hover:text-gray-800 dark:hover:text-white hover:bg-gray-200 dark:hover:bg-gray-700 rounded-md",title:"Close all tabs",children:l.jsx(lo,{className:"w-4 h-4"})})]})]})})}),gi=()=>{const{user:e}=Ke(),t=pe(sr),n=ft(),o=Me(),{isExpanded:s}=rr(),{rootDb:a,memoId:i}=r.useMemo(()=>{const c=n.pathname;let u;c.startsWith("/m")?u="memo":c.startsWith("/home")&&(u="home");const m=c.split("/").pop()||"";return{rootDb:u,memoId:m}},[n.pathname]);return r.useEffect(()=>{(n.pathname==="/home"||n.pathname==="/m")&&o({type:"tabs/setActiveTab",payload:{activeTabId:null,rootDb:a}})},[n.pathname,o]),l.jsxs(l.Fragment,{children:[t&&l.jsx(pi,{rootDb:a,user:e}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("main",{className:"flex-1 max-w-screen-lg",children:[l.jsx(hi,{rootDb:a,user:e,memoId:i}),n.pathname==="/m"&&l.jsx(ea,{rootDb:a}),n.pathname.startsWith("/m/")&&e?.uid===lt&&l.jsx("div",{className:"block lg:hidden flex-1",children:l.jsx(jt,{type:"grid"})}),(n.pathname==="/m"||n.pathname==="/home")&&e?.uid===lt&&l.jsxs("div",{className:`grid grid-cols-1 ${s?"lg:grid-cols-2":"md:grid-cols-2"} gap-4 mt-5`,children:[l.jsx("div",{className:"block lg:hidden flex-1",children:l.jsx(jt,{})}),l.jsx(Qr,{}),l.jsx(Jr,{rootDb:a})]})]}),l.jsx("aside",{className:"hidden lg:block flex-1 min-w-45 max-w-64 pt-3",children:(a==="memo"||a==="sheet")&&l.jsx(jt,{})})]})]})},Ei=Object.freeze(Object.defineProperty({__proto__:null,default:gi},Symbol.toStringTag,{value:"Module"}));export{Ei as M,ri as T,Vr as a,Fr as u};
