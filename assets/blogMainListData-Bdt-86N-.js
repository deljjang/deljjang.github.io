import{u as h,j as n,bG as b,p as y,y as p,bm as u,A as m,D as x,E as f,dZ as v,d_ as j,bn as N}from"./index-CjFOdZ7J.js";import{H as w}from"./HtmlCode-454GHr9J.js";import{S as C}from"./pencil-D3sftFZ8.js";import{S as k}from"./SortableBlock-BVKHG8zW.js";const O=({query:e,className:l,s:a,lnk:s="tw/search",index:r})=>{const{isExpanded:o}=h(),d=o?"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2":"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 2xl:grid-cols-3";return n.jsx("div",{className:`${d} gap-2 px-2
      ${l}`,children:e.data.map((t,i)=>(t.key=i,n.jsx(L,{lnk:s,post:t,s:a,index:i},t.key)))})};function L({post:e,s:l,lnk:a}){e.url==="-NoG3-MpbKsP4j1Aaq0O"&&console.log("TwListItem.post=",e.notion);const s={p:"text-base",h1:"text-3xl font-bold my-4",h2:"text-2xl font-bold my-3",code:"font-mono bg-gray-100 dark:bg-zinc-700 p-4 rounded-md text-sm",todo:"flex items-center gap-2 my-1",link:"text-blue-600 dark:text-blue-400 hover:underline",quote:"border-l-4 border-gray-300 dark:border-zinc-600 pl-4 italic text-gray-500 dark:text-gray-400 my-2",image:"my-4",divider:"my-4",handsontable:"my-4",youtube:"my-4",table:"my-4 w-full"},r=e.g==="m"?n.jsx("span",{className:"menu-item-icon-size menu-item-icon-active",children:n.jsx(C,{})}):null,o=a==="blog"?`/${a}/${e.url?e.url:e.id}`:`/${a}/${e.url?e.url:e.id}?s=${l}&g=${e.g?e.g:"m"}`;return n.jsx(b,{to:o,state:{s:l},className:"no-underline",children:n.jsx($,{title:e.title,icon:r,children:n.jsxs("div",{className:"max-h-[140px] overflow-hidden mt-1 text-gray-500 text-theme-sm dark:text-gray-400",children:[e.html==="N"?n.jsx(w,{postData:e.memo}):e.memo!==null&&n.jsx(y,{text:e.memo,runHighlight:!1}),e.notion&&n.jsx("div",{className:"space-y-2",children:e.notion.map(d=>n.jsx(k,{id:d.id,block:d,styleClasses:s,readOnly:!0},d.id))})]})})},e.key)}const $=({title:e,children:l,className:a="",desc:s="",icon:r=null})=>n.jsxs("div",{className:`${p.roundedXl} border border-gray-200 
      bg-white dark:border-gray-800 dark:bg-white/[0.03] 
      overflow-hidden ${a}`,children:[n.jsxs("div",{className:"flex flex-col px-4 py-3",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[r&&n.jsx("span",{className:"flex-shrink-0",children:r}),n.jsx("h3",{className:"text-base font-medium text-gray-800 dark:text-white/90",children:e})]}),s&&n.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:s})]}),n.jsx("div",{className:"p-4 border-t bg-stone-100 dark:bg-stone-950 border-gray-100 dark:border-gray-800 sm:p-6",children:n.jsx("div",{children:l})})]});async function D(e,l=""){if(e==null||e==="")return"";let a=l===""?`memo/${e}`:`memo_txt/${e}`;e==="home"&&(a="home/");const s=u(m(x,a)),r=await f(s);if(!r.exists()||!r.exists())return;const o=r.val(),d=[];for(let t in o){const i=o[t];i.up===void 0?(i.id=t,i.fullIndex=t):(i.id=i.up,i.fullIndex=i.up),l===""||l===void 0?(i.sub!==null&&(i.children=g(i,i.up)),d.push(i)):(i.id=t,(i.memo+"").toLowerCase().indexOf(l.toLowerCase())>-1&&d.push(i))}return d.sort((t,i)=>t.title>i.title?1:-1),d}function g(e,l){const a=[];if(e===void 0||e.sub===void 0)return a;for(let s in e.sub){let r=e.sub[s];r.id=s,r.key=s}return Object.values(e.sub).sort((s,r)=>r.title-s.title).map(s=>{s.id=s.key,s.fullIndex=l+"/sub/"+s.key,s.sub!==null&&(s.children=g(s,s.fullIndex)),a.push(s)}),a}async function S(e){const l=j[e],a=u(m(x,"home_txt"),N("gbn"),v(l.id)),s=await f(a);if(!s.exists())return;const r=s.val(),o=[{title:"React",url:"-Nn8_VCOrqSvLCqp89KJ"},{title:"Android",url:"-NnHx-gx3DMgMWLvIW8F"},{title:"JAVA",url:"-Nn8cfz1D61YG_M_911F"},{title:"그림 / 사진",url:"-NnHs-GndQ5y00GDI_rN"},{title:"MUI",url:"-NnBulBVEYke6NAxzIHY"}],d=[];for(let t in r)o.filter(c=>c.url===t).length>0||(r[t].url=t,d.push(r[t]));return d.sort((t,i)=>t.title>i.title?1:-1),d}async function q(e,l){const a=u(m(x,"home_txt")),s=await f(a);if(!s.exists())return;const r=s.val(),o=[];for(let t in r)if(r[t].url=t,r[t].id=t,r[t].g="h",e===""||e===void 0)o.push(r[t]);else{const i=r[t].memo+"",c=r[t].title+"";(i.toLowerCase().indexOf(e.toLowerCase())>-1||c.toLowerCase().indexOf(e.toLowerCase())>-1)&&o.push(r[t])}if(l==null||l===""||e==="")return o.sort((t,i)=>t.title>i.title?1:-1),o;const d=await D(l,e);return o.push(...d),o.sort((t,i)=>t.title>i.title?1:-1),o}export{O as T,S as a,q as b};
