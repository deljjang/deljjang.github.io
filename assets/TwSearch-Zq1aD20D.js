import{f as k,j as e,u as v,af as S,o as L,p as N,ag as D,m as f,a as $,k as C,r as n,ah as T,ai as M,aj as E,L as x,ak as I}from"./index-B6VPhsle.js";import R from"./TwDetail-CWyuFApm.js";import{T as z}from"./TwSearchBox-ClZ3Jcnh.js";const q=()=>e.jsx("div",{className:"w-full max-w-4xl mx-auto mt-2 space-y-4 p-4",children:[...Array(5)].map((a,s)=>e.jsxs("div",{className:"p-4 border border-gray-200 dark:border-zinc-700 rounded-lg animate-pulse",children:[e.jsx("div",{className:"h-5 bg-gray-300 dark:bg-zinc-600 rounded w-3/4 mb-3"}),e.jsx("div",{className:"space-y-2",children:e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-zinc-600 rounded w-5/6"})})]},s))}),P=({uid:a,state:s})=>{const r=k({queryKey:["blogMainSearch",s&&s?.s?s.s:""],queryFn:()=>D(s?.s,a===f?f:"")});return r.isLoading?e.jsx(q,{}):r.error?e.jsxs("div",{children:["Error: ",r.error.message]}):e.jsx(F,{query:r,index:"1",s:s&&s?.s?s.s:"",sx:{mt:2}})},F=({query:a,className:s,s:r,lnk:i="tw/search",index:t})=>{const{isExpanded:o}=v(),u=o?"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2":"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 2xl:grid-cols-3";return e.jsx("div",{className:`TwList w-full ${u} gap-2 px-2
      ${s}`,children:a.data.map((l,d)=>(l.key=d,e.jsx(A,{lnk:i,post:l,s:r,index:d},l.key)))})};function A({post:a,s,lnk:r}){const i=a.g==="m"?e.jsx("span",{className:"menu-item-icon-size menu-item-icon-active",children:e.jsx(S,{})}):null,t=r==="blog"?`/${r}/${a.url?a.url:a.id}`:`/${r}/${a.url?a.url:a.id}?s=${s}&g=${a.g?a.g:"m"}`;return e.jsx(L,{to:t,state:{s},className:"RouterLink w-full no-underline",children:e.jsx(B,{icon:i,children:a.title})},a.key)}const B=({children:a,className:s="",icon:r=null})=>e.jsx("div",{className:`ComponentCard w-full ${N.roundedXl} border border-gray-200 
      bg-white dark:border-gray-800 dark:bg-white/[0.03] 
      overflow-hidden ${s}`,children:e.jsx("div",{className:"flex flex-col px-4 py-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[r&&e.jsx("span",{className:"flex-shrink-0",children:r}),e.jsx("h3",{className:"text-base font-medium text-gray-800 dark:text-white/90",children:a})]})})});function W(){const a=$(),s=a.state,{user:r}=C(),i=n.useRef(s===null?"":s.s),[t,o]=n.useState(),[u]=T(),l=u.get("g"),[d,b]=n.useState(),[p,g]=n.useState(!0),h=l==="h"?"home":"memo";return n.useEffect(()=>{const y=async j=>{if(j!==""){const w=await I(h,r?.uid,j,i.current);b(w),g(!1)}};g(!0);const m=a.pathname.split("/"),c=m.length>2?m[m.length-1]:"";o(c),c!=null&&c!=="search"&&y(c)},[a.pathname]),e.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",alignContent:"center",justifyContent:"center"},children:e.jsxs(n.Suspense,{fallback:e.jsx(x,{}),children:[e.jsx(M,{children:e.jsx(E,{path:"/:memoId",element:e.jsx(R,{rootDb:h,isLoading:p,memoDetailData:d})})}),t==="search"?e.jsx(z,{state:s,gubun:"tw"}):"",r===null?e.jsx(x,{}):t==="search"&&s!==null&&s?.s!==""&&e.jsx(n.Suspense,{fallback:e.jsx(x,{}),children:e.jsx(P,{index:"1",uid:r?.uid,state:s})})]})})}export{W as default};
