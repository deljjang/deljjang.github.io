import{j as e,v as u,k as D,c as b,r,aP as L,R as M,y as R}from"./index-CoWIuthT.js";import{T as v}from"./Footer-DeciVAm5.js";import{L as a}from"./Loading-BtD4c6Hg.js";import{u as w}from"./useQuery-4ZOv7yU-.js";import{b as E,T as I}from"./TailList-B5uC7xAD.js";import k from"./TwDetail-DTDhjbJI.js";import{f as q}from"./fireMemoDetail-BcpmG-wn.js";import{T as F}from"./TwSearchBox-CXRNlSG3.js";import"./TwLinkItem-Pvt-iOO8.js";import"./Divider-DWcVIiOj.js";import"./dividerClasses-CeIIVvDs.js";import"./Link-DpyYoJ5U.js";import"./Container-DZ1UVo58.js";import"./styled-apW6rL1w.js";import"./CircularProgress-DIMFkZSv.js";import"./useBaseQuery-C3VxzFbR.js";import"./HtmlCode-xGOsiKi1.js";import"./copy-DYJeQoOB.js";import"./TwBadge-BRbfJe7g.js";import"./toPropertyKey-DCwh5dYN.js";import"./SinyImageList-2cTkvJbF.js";import"./index-Chjiymov.js";import"./ImageListItem-CWTYcDun.js";import"./isMuiElement-BIEwDL61.js";import"./ComponentCard-Da4Do28q.js";import"./CodeText-o73ztkps.js";import"./commonUtil-BDYb5XYI.js";import"./AniButton-BPzFl8Br.js";import"./Button-CQWJT_5P.js";import"./fireDatabase-daKzXSTI.js";import"./fireStorage-DveXoABh.js";const P=({uid:o,state:t})=>{const s=w({queryKey:["blogMainSearch",t&&t?.s?t.s:""],queryFn:()=>E(t?.s,o===u?u:"")});return s.isLoading?e.jsx(a,{}):s.error?e.jsxs("div",{children:["Error: ",s.error.message]}):e.jsx(I,{query:s,index:"1",s:t&&t?.s?t.s:"",sx:{mt:2}})};function ut(){const o=D(),t=o.state;console.log("TailSearch.state=",t);const{user:s}=b(),d=r.useRef(t===null?"":t.s),[m,f]=r.useState(),[x]=L(),h=x.get("g"),[j,g]=r.useState(),[S,c]=r.useState(!0),l=h==="h"?"home":"memo";return r.useEffect(()=>{const y=async p=>{if(p!==""){const T=await q(l,s?.uid,p,d.current);g(T),c(!1)}};c(!0);const n=o.pathname.split("/"),i=n.length>2?n[n.length-1]:"";f(i),i!=null&&i!=="search"&&y(i)},[o.pathname]),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",alignContent:"center",justifyContent:"center"},children:[e.jsxs(r.Suspense,{fallback:e.jsx(a,{}),children:[e.jsx(M,{children:e.jsx(R,{path:"/:memoId",element:e.jsx(k,{rootDb:l,isLoading:S,memoDetailData:j})})}),m==="search"?e.jsx(F,{state:t,gubun:"tw"}):"",s===null?e.jsx(a,{}):m==="search"&&t!==null&&t?.s!==""&&e.jsx(r.Suspense,{fallback:e.jsx(a,{}),children:e.jsx(P,{index:"1",uid:s?.uid,state:t})})]}),e.jsx(v,{})]})}export{ut as default};
