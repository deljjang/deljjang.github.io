import{j as o,bg as h,bx as b,w as p,bZ as d,z as x,A as m,E as f,cb as v,cc as j,b_ as N}from"./index-D_7jOBRN.js";import{H as y}from"./HtmlCode-BNLUT3Fd.js";import{H as w}from"./HtmlText-XjhNshmh.js";const T=({query:e,className:n,s:r,lnk:t="tw/search",index:i})=>o.jsx("div",{className:`grid grid-cols-1 sm:grid-cols-1 
      md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-2 px-2
      ${n}`,children:e.data.map((a,c)=>(a.key=c,o.jsx(C,{lnk:t,post:a,s:r,index:c},a.key)))});function C({post:e,s:n,lnk:r}){const t=e.g==="m"?o.jsx("span",{className:"menu-item-icon-size menu-item-icon-active",children:o.jsx(h,{})}):null,i=r==="blog"?`/${r}/${e.url?e.url:e.id}`:`/${r}/${e.url?e.url:e.id}?s=${n}&g=${e.g?e.g:"m"}`;return o.jsx(b,{to:i,state:{s:n},className:"no-underline",children:o.jsx(L,{title:e.title,icon:t,children:o.jsx("div",{className:"max-h-[140px] overflow-hidden mt-1 text-gray-500 text-theme-sm dark:text-gray-400",children:e.html==="N"?o.jsx(y,{postData:e.memo}):e.memo!==null&&o.jsx(w,{text:e.memo,runHighlight:!1})})})},e.key)}const L=({title:e,children:n,className:r="",desc:t="",icon:i=null})=>o.jsxs("div",{className:`${p.roundedXl} border border-gray-200 
      bg-white dark:border-gray-800 dark:bg-white/[0.03] 
      overflow-hidden ${r}`,children:[o.jsxs("div",{className:"flex flex-col px-4 py-3",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[i&&o.jsx("span",{className:"flex-shrink-0",children:i}),o.jsx("h3",{className:"text-base font-medium text-gray-800 dark:text-white/90",children:e})]}),t&&o.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:t})]}),o.jsx("div",{className:"p-4 border-t bg-stone-100 dark:bg-stone-950 border-gray-100 dark:border-gray-800 sm:p-6",children:o.jsx("div",{children:n})})]});async function D(e,n=""){if(e==null||e==="")return"";let r=n===""?`memo/${e}`:`memo_txt/${e}`;e==="home"&&(r="home/");const t=d(x(m,r)),i=await f(t);if(!i.exists()){console.log("getFireData.null");return}if(!i.exists()){console.log("getTreeMemoData.exists");return}const a=i.val(),c=[];for(let s in a){const l=a[s];l.up===void 0?(l.id=s,l.fullIndex=s):(l.id=l.up,l.fullIndex=l.up),n===""||n===void 0?(l.sub!==null&&(l.children=g(l,l.up)),c.push(l)):(s==="-OZNT48PGjAjZLiXNY8F"&&console.log("blogMainSearch.data[i]=",a[s]),l.id=s,(l.memo+"").toLowerCase().indexOf(n.toLowerCase())>-1&&c.push(l))}return c.sort((s,l)=>s.title>l.title?1:-1),c}function g(e,n){const r=[];if(e===void 0||e.sub===void 0)return r;for(let t in e.sub){let i=e.sub[t];i.id=t,i.key=t}return Object.values(e.sub).sort((t,i)=>i.title-t.title).map(t=>{t.id=t.key,t.fullIndex=n+"/sub/"+t.key,t.sub!==null&&(t.children=g(t,t.fullIndex)),r.push(t)}),r}async function H(e){const n=j[e],r=d(x(m,"home_txt"),N("gbn"),v(n.id)),t=await f(r);if(!t.exists()){console.log("getFireData.null");return}const i=t.val(),a=[{title:"React",url:"-Nn8_VCOrqSvLCqp89KJ"},{title:"Android",url:"-NnHx-gx3DMgMWLvIW8F"},{title:"JAVA",url:"-Nn8cfz1D61YG_M_911F"},{title:"그림 / 사진",url:"-NnHs-GndQ5y00GDI_rN"},{title:"MUI",url:"-NnBulBVEYke6NAxzIHY"}],c=[];for(let s in i)a.filter(u=>u.url===s).length>0||(i[s].url=s,c.push(i[s]));return c.sort((s,l)=>s.title>l.title?1:-1),c}async function _(e,n){const r=d(x(m,"home_txt")),t=await f(r);if(!t.exists()){console.log("getFireData.null");return}const i=t.val(),a=[];for(let s in i)if(i[s].url=s,i[s].id=s,i[s].g="h",e===""||e===void 0)a.push(i[s]);else{const l=i[s].memo+"",u=i[s].title+"";(l.toLowerCase().indexOf(e.toLowerCase())>-1||u.toLowerCase().indexOf(e.toLowerCase())>-1)&&a.push(i[s])}if(n==null||n===""||e==="")return a.sort((s,l)=>s.title>l.title?1:-1),a;const c=await D(n,e);return a.push(...c),a.sort((s,l)=>s.title>l.title?1:-1),a}export{T,H as a,_ as b};
