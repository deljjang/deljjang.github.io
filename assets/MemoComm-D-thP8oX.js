const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MemoSheet-J6l1Rgnk.js","assets/index-D7hKsLfU.js","assets/index-Dn_9B4Ow.css","assets/TwToast-COcrUXF4.js","assets/ComponentCard-Df2fG5Yb.js","assets/fireMemoDetail-DaPYcyp-.js","assets/HomeChartSemiDonut-D0AlL_KN.js","assets/Favorite-Di_n7M2B.js","assets/HtmlCode-n6jfa_zJ.js","assets/copy-DEDG5Pq1.js","assets/TwRadio-lylqT-dn.js","assets/TwBadge-DZDjApQU.js","assets/HtmlCode-DzoQz3cC.js","assets/HtmlCode-B8o9Ra4O.css","assets/toPropertyKey-DCwh5dYN.js","assets/SinyImageList-Crzp9pcg.js","assets/ImageListItem-rdtbZjrI.js","assets/CodeText-Bift78hM.js","assets/CodeText-f22R9RB0.css","assets/MemoDetailGrid-BA5Ixpp2.js","assets/IpInfo-DSkTuU45.js","assets/angle-right-pPpIZ52i.js","assets/MemoDetail-UhCuASow.css","assets/MemoSheetGrid-M_5d5nsM.js","assets/MemoDetailEdit-BLft-LKC.js","assets/useMemoMutation-B-74935_.js","assets/Delete-lHKP4_gh.js","assets/Divider-OntW7A_2.js","assets/TwCheckbox-WgQDaJJB.js","assets/TwTextArea-C0dC0CHm.js","assets/SinySelect-Ctl2AZU8.js","assets/Grid-yxh0XiYD.js","assets/index-DGzM_iM7.js","assets/TextField-D2_SMvHd.js","assets/InputAdornment-DqPeZ9Y-.js","assets/Popper-OV_XIfVF.js","assets/Button-CLyIDGSz.js","assets/Chip-80WgbgTB.js","assets/MemoDetailEdit-Cmdt2tIm.css","assets/TwMemoDetailUtil-l-minD78.js","assets/HomeChartVisitors-Q2PcKSLt.js","assets/MemoBookMark-YOjn_5-5.js","assets/folder-DpJ0w6rO.js"])))=>i.map(i=>d[i]);
import{e4 as Ae,e5 as An,e6 as Tr,e7 as Dr,e8 as Lr,e9 as $r,ea as zr,eb as Ar,ec as In,ed as Ir,ee as Or,ef as On,eg as Ke,eh as _n,r as d,ei as _r,ej as Bn,ek as ln,el as Br,cd as le,z as Bt,i as Fn,em as Hn,G as P,bm as Fr,A as Ft,D as Ht,E as Hr,j as o,bw as Wr,q as _e,bi as Wn,en as Pr,h as Se,y as T,ch as Vr,bp as Pn,bq as Vn,a2 as Ce,k as O,aK as Ge,O as Yr,eo as Xr,ck as Wt,bf as X,J as cn,n as Yn,c5 as dn,c6 as un,cb as qr,ca as Kr,c7 as Gr,o as Pt,f as vt,ep as Dt,m as Lt,p as Ur,bS as Qr,R as Jr,c as je,_ as Ne,eq as Zr,K as es,er as ts,bW as ns,es as rs}from"./index-D7hKsLfU.js";import{f as ss,s as os,g as is,a as as,b as ls}from"./fireMemoDetail-DaPYcyp-.js";import{H as cs,a as ds,b as us}from"./HomeChartSemiDonut-D0AlL_KN.js";import{F as fs}from"./Favorite-Di_n7M2B.js";import{a as hs,C as gs}from"./ComponentCard-Df2fG5Yb.js";import{b as ms,H as ps}from"./HtmlCode-n6jfa_zJ.js";import{S as vs}from"./SinyImageList-Crzp9pcg.js";import{c as xs}from"./CodeText-Bift78hM.js";/* empty css                   */import{T as bs,M as ys}from"./MemoDetailGrid-BA5Ixpp2.js";import{I as ws}from"./IpInfo-DSkTuU45.js";import{S as Xn,a as Cs,b as js}from"./angle-right-pPpIZ52i.js";function qn(e,t){let n;const r=()=>{const{currentTime:s}=t,a=(s===null?0:s.value)/100;n!==a&&e(a),n=a};return Ae.update(r,!0),()=>An(r)}const dt=new WeakMap;let ye;function Ss(e,t){if(t){const{inlineSize:n,blockSize:r}=t[0];return{width:n,height:r}}else return e instanceof SVGElement&&"getBBox"in e?e.getBBox():{width:e.offsetWidth,height:e.offsetHeight}}function Ns({target:e,contentRect:t,borderBoxSize:n}){var r;(r=dt.get(e))===null||r===void 0||r.forEach(s=>{s({target:e,contentSize:t,get size(){return Ss(e,n)}})})}function ks(e){e.forEach(Ns)}function Es(){typeof ResizeObserver>"u"||(ye=new ResizeObserver(ks))}function Rs(e,t){ye||Es();const n=Tr(e);return n.forEach(r=>{let s=dt.get(r);s||(s=new Set,dt.set(r,s)),s.add(t),ye?.observe(r)}),()=>{n.forEach(r=>{const s=dt.get(r);s?.delete(t),s?.size||ye?.unobserve(r)})}}const ut=new Set;let Ue;function Ms(){Ue=()=>{const e={width:window.innerWidth,height:window.innerHeight},t={target:window,size:e,contentSize:e};ut.forEach(n=>n(t))},window.addEventListener("resize",Ue)}function Ts(e){return ut.add(e),Ue||Ms(),()=>{ut.delete(e),!ut.size&&Ue&&(Ue=void 0)}}function Ds(e,t){return typeof e=="function"?Ts(e):Rs(e,t)}const Ls=50,fn=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),$s=()=>({time:0,x:fn(),y:fn()}),zs={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function hn(e,t,n,r){const s=n[t],{length:i,position:a}=zs[t],l=s.current,u=n.time;s.current=e[`scroll${a}`],s.scrollLength=e[`scroll${i}`]-e[`client${i}`],s.offset.length=0,s.offset[0]=0,s.offset[1]=s.scrollLength,s.progress=Dr(0,s.scrollLength,s.current);const c=r-u;s.velocity=c>Ls?0:Lr(s.current-l,c)}function As(e,t,n){hn(e,"x",t,n),hn(e,"y",t,n),t.time=n}function Is(e,t){const n={x:0,y:0};let r=e;for(;r&&r!==t;)if(r instanceof HTMLElement)n.x+=r.offsetLeft,n.y+=r.offsetTop,r=r.offsetParent;else if(r.tagName==="svg"){const s=r.getBoundingClientRect();r=r.parentElement;const i=r.getBoundingClientRect();n.x+=s.left-i.left,n.y+=s.top-i.top}else if(r instanceof SVGGraphicsElement){const{x:s,y:i}=r.getBBox();n.x+=s,n.y+=i;let a=null,l=r.parentNode;for(;!a;)l.tagName==="svg"&&(a=l),l=r.parentNode;r=a}else break;return n}const $t={start:0,center:.5,end:1};function gn(e,t,n=0){let r=0;if(e in $t&&(e=$t[e]),typeof e=="string"){const s=parseFloat(e);e.endsWith("px")?r=s:e.endsWith("%")?e=s/100:e.endsWith("vw")?r=s/100*document.documentElement.clientWidth:e.endsWith("vh")?r=s/100*document.documentElement.clientHeight:e=s}return typeof e=="number"&&(r=t*e),n+r}const Os=[0,0];function _s(e,t,n,r){let s=Array.isArray(e)?e:Os,i=0,a=0;return typeof e=="number"?s=[e,e]:typeof e=="string"&&(e=e.trim(),e.includes(" ")?s=e.split(" "):s=[e,$t[e]?e:"0"]),i=gn(s[0],n,r),a=gn(s[1],t),i-a}const Bs={All:[[0,0],[1,1]]},Fs={x:0,y:0};function Hs(e){return"getBBox"in e&&e.tagName!=="svg"?e.getBBox():{width:e.clientWidth,height:e.clientHeight}}function Ws(e,t,n){const{offset:r=Bs.All}=n,{target:s=e,axis:i="y"}=n,a=i==="y"?"height":"width",l=s!==e?Is(s,e):Fs,u=s===e?{width:e.scrollWidth,height:e.scrollHeight}:Hs(s),c={width:e.clientWidth,height:e.clientHeight};t[i].offset.length=0;let f=!t[i].interpolate;const g=r.length;for(let m=0;m<g;m++){const h=_s(r[m],c[a],u[a],l[i]);!f&&h!==t[i].interpolatorOffsets[m]&&(f=!0),t[i].offset[m]=h}f&&(t[i].interpolate=$r(t[i].offset,zr(r),{clamp:!1}),t[i].interpolatorOffsets=[...t[i].offset]),t[i].progress=Ar(0,1,t[i].interpolate(t[i].current))}function Ps(e,t=e,n){if(n.x.targetOffset=0,n.y.targetOffset=0,t!==e){let r=t;for(;r&&r!==e;)n.x.targetOffset+=r.offsetLeft,n.y.targetOffset+=r.offsetTop,r=r.offsetParent}n.x.targetLength=t===e?t.scrollWidth:t.clientWidth,n.y.targetLength=t===e?t.scrollHeight:t.clientHeight,n.x.containerLength=e.clientWidth,n.y.containerLength=e.clientHeight}function Vs(e,t,n,r={}){return{measure:()=>Ps(e,r.target,n),update:s=>{As(e,n,s),(r.offset||r.target)&&Ws(e,n,r)},notify:()=>t(n)}}const qe=new WeakMap,mn=new WeakMap,Nt=new WeakMap,pn=e=>e===document.documentElement?window:e;function Vt(e,{container:t=document.documentElement,...n}={}){let r=Nt.get(t);r||(r=new Set,Nt.set(t,r));const s=$s(),i=Vs(t,e,s,n);if(r.add(i),!qe.has(t)){const l=()=>{for(const m of r)m.measure()},u=()=>{for(const m of r)m.update(In.timestamp)},c=()=>{for(const m of r)m.notify()},f=()=>{Ae.read(l,!1,!0),Ae.read(u,!1,!0),Ae.update(c,!1,!0)};qe.set(t,f);const g=pn(t);window.addEventListener("resize",f,{passive:!0}),t!==document.documentElement&&mn.set(t,Ds(t,f)),g.addEventListener("scroll",f,{passive:!0})}const a=qe.get(t);return Ae.read(a,!1,!0),()=>{var l;An(a);const u=Nt.get(t);if(!u||(u.delete(i),u.size))return;const c=qe.get(t);qe.delete(t),c&&(pn(t).removeEventListener("scroll",c),(l=mn.get(t))===null||l===void 0||l(),window.removeEventListener("resize",c))}}function Ys({source:e,container:t,axis:n="y"}){e&&(t=e);const r={value:0},s=Vt(i=>{r.value=i[n].progress*100},{container:t,axis:n});return{currentTime:r,cancel:s}}const kt=new Map;function Kn({source:e,container:t=document.documentElement,axis:n="y"}={}){e&&(t=e),kt.has(t)||kt.set(t,{});const r=kt.get(t);return r[n]||(r[n]=Or()?new ScrollTimeline({source:t,axis:n}):Ys({source:t,axis:n})),r[n]}function Xs(e){return e.length===2}function Gn(e){return e&&(e.target||e.offset)}function qs(e,t){return Xs(e)||Gn(t)?Vt(n=>{e(n[t.axis].progress,n)},t):qn(e,Kn(t))}function Ks(e,t){if(e.flatten(),Gn(t))return e.pause(),Vt(n=>{e.time=e.duration*n[t.axis].progress},t);{const n=Kn(t);return e.attachTimeline?e.attachTimeline(n,r=>(r.pause(),qn(s=>{r.time=r.duration*s},n))):Ir}}function Gs(e,{axis:t="y",...n}={}){const r={axis:t,...n};return typeof e=="function"?qs(e,r):Ks(e,r)}function vn(e,t){_r(!!(!t||t.current))}const Us=()=>({scrollX:Ke(0),scrollY:Ke(0),scrollXProgress:Ke(0),scrollYProgress:Ke(0)});function Qs({container:e,target:t,layoutEffect:n=!0,...r}={}){const s=On(Us);return(n?_n:d.useEffect)(()=>(vn("target",t),vn("container",e),Gs((a,{x:l,y:u})=>{s.scrollX.set(l.current),s.scrollXProgress.set(l.progress),s.scrollY.set(u.current),s.scrollYProgress.set(u.progress)},{...r,container:e?.current||void 0,target:t?.current||void 0})),[e,t,JSON.stringify(r.offset)]),s}function Js(e){const t=On(()=>Ke(e)),{isStatic:n}=d.useContext(Bn);if(n){const[,r]=d.useState(e);d.useEffect(()=>t.on("change",r),[])}return t}function xn(e){return typeof e=="number"?e:parseFloat(e)}function Zs(e,t={}){const{isStatic:n}=d.useContext(Bn),r=d.useRef(null),s=Js(ln(e)?xn(e.get()):e),i=d.useRef(s.get()),a=d.useRef(()=>{}),l=()=>{const c=r.current;c&&c.time===0&&c.sample(In.delta),u(),r.current=Br({keyframes:[s.get(),i.current],velocity:s.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...t,onUpdate:a.current})},u=()=>{r.current&&r.current.stop()};return d.useInsertionEffect(()=>s.attach((c,f)=>n?f(c):(i.current=c,a.current=f,Ae.update(l),s.get()),u),[JSON.stringify(t)]),_n(()=>{if(ln(e))return e.on("change",c=>s.set(xn(c)))},[s]),s}const eo=async(e,t)=>{const n=[];let r=t;if(!e||!r)return n;for(;r&&r!=="root";){const s=await le(`memo_tree/${e}/${r}`);if(!s)break;n.unshift({id:r,...s}),r=s.parent}return n};function to(e,t,n,r){const s=Bt(),{data:i,isLoading:a}=Fn({queryKey:["memoDetail",e,t?.uid,n],queryFn:async()=>{if(!n||!t||n==="insert")return{};if(e==="memo"||e==="home"){const c=await ss(e,t.uid,n);if(c&&e==="memo"){c.path=await eo(t?.uid,n);const f=await le(`memo_tree/${t.uid}/${n}/bm`);c.bookmark=f==="Y"?"Y":"N"}return c||{}}else if(e==="sheet")return{title:await le(`memo_sheet/${t.uid}/${n}/title`)}},enabled:!!t&&!!n,staleTime:1e3*60*5}),{mutate:l}=Hn({mutationFn:async c=>{const f=e==="memo"?`memo_tree/${t.uid}/${n}/bm`:`home_txt/${n}/bookmark`;await P(f,c)},onMutate:async c=>{await s.cancelQueries({queryKey:["memoDetail",e,t?.uid,n]});const f=s.getQueryData(["memoDetail",e,t?.uid,n]);return s.setQueryData(["memoDetail",e,t?.uid,n],g=>({...g,bookmark:c})),{previousMemoDetail:f}},onError:(c,f,g)=>{s.setQueryData(["memoDetail",e,t?.uid,n],g.previousMemoDetail)},onSettled:()=>{s.invalidateQueries({queryKey:["memoDetail",e,t?.uid,n],refetchType:"all"}),s.invalidateQueries({queryKey:["twTreeData",e],refetchType:"all"}),s.invalidateQueries({queryKey:["bookmarks",t?.uid],refetchType:"all"}),r(!0)}});return{memoDetailData:i,isLoading:a,onBookmark:()=>{if(!i)return;const c=i.bookmark==="Y"?"N":"Y";l(c)}}}async function no(e,t,n=""){if(t==null||t==="")return"";if(e==="home"){const c=await le("home/tree");if(c!=null)try{return JSON.parse(c)}catch(f){console.error("Error parsing JSON data:",f)}}const r=e==="home"?"home_txt":n===""?`${e}_tree/${t}`:`${e}_txt/${t}`,s=Fr(Ft(Ht,r)),i=await Hr(s);if(!i.exists()||!i.exists())return null;const a=i.val(),l=[{text:"1.React",id:"react",key:"react",parent:"root"},{text:"2.CSS",id:"css",key:"css",parent:"root"},{text:"3.Android",id:"android",key:"android",parent:"root"},{text:"4.Java",id:"java",key:"java",parent:"root"},{text:"5.이미지",id:"image",key:"image",parent:"root"},{text:"6.Etc",id:"etc",key:"etc",parent:"root"}],u=[];e==="home"&&u.push(...l);for(const c in a){const f=a[c];f.id=c;const g={id:c,key:c,text:f.title,parent:e==="home"?f.gbn:f.parent};e==="memo"?(g.icon=f.bm==="Y"?o.jsx(fs,{className:"text-red-500"}):f.icon==="Y"?o.jsx(Wr,{}):null,g.droppable=!0):g.droppable=!1,!((n===""||n===void 0||n===null)&&(g.parent===void 0||g.parent===null||g.parent===""))&&(e==="home"||n===""||n===void 0||n===null?u.push(g):(f.id=c,(f.memo+"").toLowerCase().indexOf(n.toLowerCase())>-1&&(g.parent="root",g.droppable=!1,u.push(g))))}return u.sort((c,f)=>c.title>f.title?1:-1),e==="home"&&P("home/tree",JSON.stringify(u)),u}const ro=({rootDb:e})=>{const{user:t}=_e(),[n,r]=Wn(Pr(e)),{t:s}=Se(),[i,a]=d.useState({labels:[],series:[]}),l=["#6366f1","#3b82f6","#22c55e","#ef4444","#f97316","#eab308","#8b5cf6","#d946ef","#14b8a6","#a855f7"],u=async()=>{const g=await no(e==="sheet"?"memo":e,t?.uid);c(g)};d.useEffect(()=>{n&&n.labels&&n.labels.length>0?a(n):u()},[e,t,n,r]);const c=g=>{if(g&&g.length>0){const m=g.filter(v=>v.parent==="root").sort((v,y)=>v.text.localeCompare(y.text)),h=(v,y)=>{const j=y.filter(N=>N.parent===v);let R=j.length;for(const N of j)R+=h(N.id,y);return R},x=m.map(v=>v.text),p=m.map(v=>h(v.id,g)),b={labels:x,series:p};a(b),r(b)}},f=()=>{u()};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:`HomeChartForm ${T.between} bg-[#f1f1f1] dark:bg-[#181818] p-2`,children:[o.jsx("div",{className:"px-6 py-5",children:o.jsx(hs,{title:s("count_stats")})}),o.jsx("button",{onClick:f,className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors mr-2","aria-label":s("reload_chart"),children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-600 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h5M20 20v-5h-5M4 4l1.5 1.5A9 9 0 0121.5 12M20 20l-1.5-1.5A9 9 0 012.5 12"})})})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 w-full gap-2 justify-center",children:[o.jsx(cs,{series:i.series,labels:i.labels,colors:l}),o.jsx(Vr,{series:[{name:s("count"),data:i.series}],labels:i.labels,colors:l}),o.jsx(ds,{series:[{name:s("count"),data:i.series}],labels:i.labels,colors:l}),o.jsx(us,{series:i.series,labels:i.labels,colors:l})]})]})},so=async(e,t)=>(await le(e)===void 0||P(e,null),P(t,null),"OK"),La=async({rootDb:e,uid:t,newData:n=!1,key:r,values:s})=>{const i=e==="memo"?`${e}_txt/${t}/`:`${e}_txt/`,a=e==="memo"?`${e}_tree/${t}/`:`${e}/`;let l=r;n&&(l=Pn(Vn(Ft(Ht),a)).key),console.log("setFireDetailData.values=",s);const u=i+l;return P(u+"/title",s.edTitle),s.htmlCheck==="N"||s.htmlCheck==="sheet"?P(u+"/memo",s.memoTxt):P(u+"/memo",s.content),P(u+"/date",s.edDate),P(u+"/gbn",s.edGbn),P(u+"/html",s.htmlCheck),n&&e!=="home"&&(P(`${a}/${l}/key`,l),P(`${a}/${l}/parent`,r)),e!=="home"&&(P(`${a}${l}/title`,s.edTitle),P(`${a}${l}/icon`,s.iconCheck)),l},$a=async(e,t,n,r)=>{if(r!==void 0)for(let s=0;s<r.length;s++){const i=r[s];i.del==="Y"&&(P(`${e}/${n}/image/${i.key}`,null),os(t,n,i))}},za=async(e,t,n,r)=>{for(let s=0;s<r.length;s++){const i=r[s].object,l={ext:is(i.name),name:i.name,use:"Y",sever:""},u=Pn(Vn(Ft(Ht),e+"/image")).key,c=await as(t,n,u,i);l.sever=ls(c.metadata.name);const f=`${e}${n}/image/${l.sever}`;P(f,l)}},bn=e=>{const{t}=Se();return o.jsxs("div",{className:"mx-auto grid w-full max-w-md grid-cols-4 items-center justify-center gap-2 px-4 py-2 text-center",children:[e.master&&o.jsx(Ce,{size:"sm",variant:"outlined",color:"brand",onClick:e.onUtil,className:"gap-1.5",children:o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),o.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),o.jsx("span",{className:"ml-2 whitespace-nowrap",children:t("util")})]})}),o.jsx(Ce,{size:"sm",variant:"outlined",color:"brand",onClick:e.onEdit,className:"gap-1.5",children:o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),o.jsx("path",{d:"m15 5 4 4"})]}),o.jsx("span",{className:"ml-2 whitespace-nowrap",children:t("edit")})]})}),o.jsx(Ce,{size:"sm",variant:"outlined",color:"brand",onClick:e.onNewMemo,className:"gap-1.5",children:o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M5 12h14"}),o.jsx("path",{d:"M12 5v14"})]}),o.jsx("span",{className:"ml-2 whitespace-nowrap",children:t("new")})]})}),o.jsx(Ce,{size:"sm",variant:"outlined",color:"error",onClick:e.onDelete,className:"gap-1.5",children:o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M3 6h18"}),o.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),o.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),o.jsx("span",{className:"ml-2 whitespace-nowrap",children:t("delete")})]})})]})};function oo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.useMemo(()=>r=>{t.forEach(s=>s(r))},t)}const xt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Be(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Yt(e){return"nodeType"in e}function q(e){var t,n;return e?Be(e)?e:Yt(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Xt(e){const{Document:t}=q(e);return e instanceof t}function nt(e){return Be(e)?!1:e instanceof q(e).HTMLElement}function Un(e){return e instanceof q(e).SVGElement}function Fe(e){return e?Be(e)?e.document:Yt(e)?Xt(e)?e:nt(e)||Un(e)?e.ownerDocument:document:document:document}const ce=xt?d.useLayoutEffect:d.useEffect;function qt(e){const t=d.useRef(e);return ce(()=>{t.current=e}),d.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function io(){const e=d.useRef(null),t=d.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=d.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function et(e,t){t===void 0&&(t=[e]);const n=d.useRef(e);return ce(()=>{n.current!==e&&(n.current=e)},t),n}function rt(e,t){const n=d.useRef();return d.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function ht(e){const t=qt(e),n=d.useRef(null),r=d.useCallback(s=>{s!==n.current&&t?.(s,n.current),n.current=s},[]);return[n,r]}function zt(e){const t=d.useRef();return d.useEffect(()=>{t.current=e},[e]),t.current}let Et={};function st(e,t){return d.useMemo(()=>{if(t)return t;const n=Et[e]==null?0:Et[e]+1;return Et[e]=n,e+"-"+n},[e,t])}function Qn(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,a)=>{const l=Object.entries(a);for(const[u,c]of l){const f=i[u];f!=null&&(i[u]=f+e*c)}return i},{...t})}}const Ie=Qn(1),gt=Qn(-1);function ao(e){return"clientX"in e&&"clientY"in e}function Kt(e){if(!e)return!1;const{KeyboardEvent:t}=q(e.target);return t&&e instanceof t}function lo(e){if(!e)return!1;const{TouchEvent:t}=q(e.target);return t&&e instanceof t}function At(e){if(lo(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return ao(e)?{x:e.clientX,y:e.clientY}:null}const Oe=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Oe.Translate.toString(e),Oe.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),yn="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function co(e){return e.matches(yn)?e:e.querySelector(yn)}const uo={display:"none"};function fo(e){let{id:t,value:n}=e;return O.createElement("div",{id:t,style:uo},n)}function ho(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return O.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function go(){const[e,t]=d.useState("");return{announce:d.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const Jn=d.createContext(null);function mo(e){const t=d.useContext(Jn);d.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function po(){const[e]=d.useState(()=>new Set),t=d.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[d.useCallback(r=>{let{type:s,event:i}=r;e.forEach(a=>{var l;return(l=a[s])==null?void 0:l.call(a,i)})},[e]),t]}const vo={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},xo={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function bo(e){let{announcements:t=xo,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=vo}=e;const{announce:i,announcement:a}=go(),l=st("DndLiveRegion"),[u,c]=d.useState(!1);if(d.useEffect(()=>{c(!0)},[]),mo(d.useMemo(()=>({onDragStart(g){let{active:m}=g;i(t.onDragStart({active:m}))},onDragMove(g){let{active:m,over:h}=g;t.onDragMove&&i(t.onDragMove({active:m,over:h}))},onDragOver(g){let{active:m,over:h}=g;i(t.onDragOver({active:m,over:h}))},onDragEnd(g){let{active:m,over:h}=g;i(t.onDragEnd({active:m,over:h}))},onDragCancel(g){let{active:m,over:h}=g;i(t.onDragCancel({active:m,over:h}))}}),[i,t])),!u)return null;const f=O.createElement(O.Fragment,null,O.createElement(fo,{id:r,value:s.draggable}),O.createElement(ho,{id:l,announcement:a}));return n?Ge.createPortal(f,n):f}var B;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(B||(B={}));function mt(){}function yo(e,t){return d.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function wo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const se=Object.freeze({x:0,y:0});function Co(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function jo(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function So(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function No(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function wn(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const ko=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=wn(t,t.left,t.top),i=[];for(const a of r){const{id:l}=a,u=n.get(l);if(u){const c=Co(wn(u),s);i.push({id:l,data:{droppableContainer:a,value:c}})}}return i.sort(jo)};function Eo(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),a=s-r,l=i-n;if(r<s&&n<i){const u=t.width*t.height,c=e.width*e.height,f=a*l,g=f/(u+c-f);return Number(g.toFixed(4))}return 0}const Ro=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const i of r){const{id:a}=i,l=n.get(a);if(l){const u=Eo(l,t);u>0&&s.push({id:a,data:{droppableContainer:i,value:u}})}}return s.sort(So)};function Mo(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Zn(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:se}function To(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((a,l)=>({...a,top:a.top+e*l.y,bottom:a.bottom+e*l.y,left:a.left+e*l.x,right:a.right+e*l.x}),{...n})}}const Do=To(1);function Lo(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function $o(e,t,n){const r=Lo(t);if(!r)return e;const{scaleX:s,scaleY:i,x:a,y:l}=r,u=e.left-a-(1-s)*parseFloat(n),c=e.top-l-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),f=s?e.width/s:e.width,g=i?e.height/i:e.height;return{width:f,height:g,top:c,right:u+f,bottom:c+g,left:u}}const zo={ignoreTransform:!1};function He(e,t){t===void 0&&(t=zo);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:c,transformOrigin:f}=q(e).getComputedStyle(e);c&&(n=$o(n,c,f))}const{top:r,left:s,width:i,height:a,bottom:l,right:u}=n;return{top:r,left:s,width:i,height:a,bottom:l,right:u}}function Cn(e){return He(e,{ignoreTransform:!0})}function Ao(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Io(e,t){return t===void 0&&(t=q(e).getComputedStyle(e)),t.position==="fixed"}function Oo(e,t){t===void 0&&(t=q(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=t[s];return typeof i=="string"?n.test(i):!1})}function Gt(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(Xt(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!nt(s)||Un(s)||n.includes(s))return n;const i=q(e).getComputedStyle(s);return s!==e&&Oo(s,i)&&n.push(s),Io(s,i)?n:r(s.parentNode)}return e?r(e):n}function er(e){const[t]=Gt(e,1);return t??null}function Rt(e){return!xt||!e?null:Be(e)?e:Yt(e)?Xt(e)||e===Fe(e).scrollingElement?window:nt(e)?e:null:null}function tr(e){return Be(e)?e.scrollX:e.scrollLeft}function nr(e){return Be(e)?e.scrollY:e.scrollTop}function It(e){return{x:tr(e),y:nr(e)}}var F;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(F||(F={}));function rr(e){return!xt||!e?!1:e===document.scrollingElement}function sr(e){const t={x:0,y:0},n=rr(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,a=e.scrollTop>=r.y,l=e.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:a,isRight:l,maxScroll:r,minScroll:t}}const _o={x:.2,y:.2};function Bo(e,t,n,r,s){let{top:i,left:a,right:l,bottom:u}=n;r===void 0&&(r=10),s===void 0&&(s=_o);const{isTop:c,isBottom:f,isLeft:g,isRight:m}=sr(e),h={x:0,y:0},x={x:0,y:0},p={height:t.height*s.y,width:t.width*s.x};return!c&&i<=t.top+p.height?(h.y=F.Backward,x.y=r*Math.abs((t.top+p.height-i)/p.height)):!f&&u>=t.bottom-p.height&&(h.y=F.Forward,x.y=r*Math.abs((t.bottom-p.height-u)/p.height)),!m&&l>=t.right-p.width?(h.x=F.Forward,x.x=r*Math.abs((t.right-p.width-l)/p.width)):!g&&a<=t.left+p.width&&(h.x=F.Backward,x.x=r*Math.abs((t.left+p.width-a)/p.width)),{direction:h,speed:x}}function Fo(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:a}=window;return{top:0,left:0,right:i,bottom:a,width:i,height:a}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function or(e){return e.reduce((t,n)=>Ie(t,It(n)),se)}function Ho(e){return e.reduce((t,n)=>t+tr(n),0)}function Wo(e){return e.reduce((t,n)=>t+nr(n),0)}function Po(e,t){if(t===void 0&&(t=He),!e)return;const{top:n,left:r,bottom:s,right:i}=t(e);er(e)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Vo=[["x",["left","right"],Ho],["y",["top","bottom"],Wo]];class Ut{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Gt(n),s=or(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,a,l]of Vo)for(const u of a)Object.defineProperty(this,u,{get:()=>{const c=l(r),f=s[i]-c;return this.rect[u]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Qe{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Yo(e){const{EventTarget:t}=q(e);return e instanceof t?e:Fe(e)}function Mt(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var ne;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(ne||(ne={}));function jn(e){e.preventDefault()}function Xo(e){e.stopPropagation()}var $;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})($||($={}));const ir={start:[$.Space,$.Enter],cancel:[$.Esc],end:[$.Space,$.Enter,$.Tab]},qo=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case $.Right:return{...n,x:n.x+25};case $.Left:return{...n,x:n.x-25};case $.Down:return{...n,y:n.y+25};case $.Up:return{...n,y:n.y-25}}};class ar{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Qe(Fe(n)),this.windowListeners=new Qe(q(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ne.Resize,this.handleCancel),this.windowListeners.add(ne.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ne.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&Po(r),n(se)}handleKeyDown(t){if(Kt(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=ir,coordinateGetter:a=qo,scrollBehavior:l="smooth"}=s,{code:u}=t;if(i.end.includes(u)){this.handleEnd(t);return}if(i.cancel.includes(u)){this.handleCancel(t);return}const{collisionRect:c}=r.current,f=c?{x:c.left,y:c.top}:se;this.referenceCoordinates||(this.referenceCoordinates=f);const g=a(t,{active:n,context:r.current,currentCoordinates:f});if(g){const m=gt(g,f),h={x:0,y:0},{scrollableAncestors:x}=r.current;for(const p of x){const b=t.code,{isTop:v,isRight:y,isLeft:j,isBottom:R,maxScroll:N,minScroll:S}=sr(p),M=Fo(p),w={x:Math.min(b===$.Right?M.right-M.width/2:M.right,Math.max(b===$.Right?M.left:M.left+M.width/2,g.x)),y:Math.min(b===$.Down?M.bottom-M.height/2:M.bottom,Math.max(b===$.Down?M.top:M.top+M.height/2,g.y))},D=b===$.Right&&!y||b===$.Left&&!j,I=b===$.Down&&!R||b===$.Up&&!v;if(D&&w.x!==g.x){const z=p.scrollLeft+m.x,K=b===$.Right&&z<=N.x||b===$.Left&&z>=S.x;if(K&&!m.y){p.scrollTo({left:z,behavior:l});return}K?h.x=p.scrollLeft-z:h.x=b===$.Right?p.scrollLeft-N.x:p.scrollLeft-S.x,h.x&&p.scrollBy({left:-h.x,behavior:l});break}else if(I&&w.y!==g.y){const z=p.scrollTop+m.y,K=b===$.Down&&z<=N.y||b===$.Up&&z>=S.y;if(K&&!m.x){p.scrollTo({top:z,behavior:l});return}K?h.y=p.scrollTop-z:h.y=b===$.Down?p.scrollTop-N.y:p.scrollTop-S.y,h.y&&p.scrollBy({top:-h.y,behavior:l});break}}this.handleMove(t,Ie(gt(g,this.referenceCoordinates),h))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}ar.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=ir,onActivation:s}=t,{active:i}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const l=i.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),s?.({event:e.nativeEvent}),!0)}return!1}}];function Sn(e){return!!(e&&"distance"in e)}function Nn(e){return!!(e&&"delay"in e)}class Qt{constructor(t,n,r){var s;r===void 0&&(r=Yo(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:i}=t,{target:a}=i;this.props=t,this.events=n,this.document=Fe(a),this.documentListeners=new Qe(this.document),this.listeners=new Qe(r),this.windowListeners=new Qe(q(a)),this.initialCoordinates=(s=At(i))!=null?s:se,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(ne.Resize,this.handleCancel),this.windowListeners.add(ne.DragStart,jn),this.windowListeners.add(ne.VisibilityChange,this.handleCancel),this.windowListeners.add(ne.ContextMenu,jn),this.documentListeners.add(ne.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Nn(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Sn(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(ne.Click,Xo,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ne.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:a,options:{activationConstraint:l}}=i;if(!s)return;const u=(n=At(t))!=null?n:se,c=gt(s,u);if(!r&&l){if(Sn(l)){if(l.tolerance!=null&&Mt(c,l.tolerance))return this.handleCancel();if(Mt(c,l.distance))return this.handleStart()}if(Nn(l)&&Mt(c,l.tolerance))return this.handleCancel();this.handlePending(l,c);return}t.cancelable&&t.preventDefault(),a(u)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===$.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Ko={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Jt extends Qt{constructor(t){const{event:n}=t,r=Fe(n.target);super(t,Ko,r)}}Jt.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const Go={move:{name:"mousemove"},end:{name:"mouseup"}};var Ot;(function(e){e[e.RightClick=2]="RightClick"})(Ot||(Ot={}));class Uo extends Qt{constructor(t){super(t,Go,Fe(t.event.target))}}Uo.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Ot.RightClick?!1:(r?.({event:n}),!0)}}];const Tt={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Qo extends Qt{constructor(t){super(t,Tt)}static setup(){return window.addEventListener(Tt.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Tt.move.name,t)};function t(){}}}Qo.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r?.({event:n}),!0)}}];var Je;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Je||(Je={}));var pt;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(pt||(pt={}));function Jo(e){let{acceleration:t,activator:n=Je.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:a=5,order:l=pt.TreeOrder,pointerCoordinates:u,scrollableAncestors:c,scrollableAncestorRects:f,delta:g,threshold:m}=e;const h=ei({delta:g,disabled:!i}),[x,p]=io(),b=d.useRef({x:0,y:0}),v=d.useRef({x:0,y:0}),y=d.useMemo(()=>{switch(n){case Je.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case Je.DraggableRect:return s}},[n,s,u]),j=d.useRef(null),R=d.useCallback(()=>{const S=j.current;if(!S)return;const M=b.current.x*v.current.x,w=b.current.y*v.current.y;S.scrollBy(M,w)},[]),N=d.useMemo(()=>l===pt.TreeOrder?[...c].reverse():c,[l,c]);d.useEffect(()=>{if(!i||!c.length||!y){p();return}for(const S of N){if(r?.(S)===!1)continue;const M=c.indexOf(S),w=f[M];if(!w)continue;const{direction:D,speed:I}=Bo(S,w,y,t,m);for(const z of["x","y"])h[z][D[z]]||(I[z]=0,D[z]=0);if(I.x>0||I.y>0){p(),j.current=S,x(R,a),b.current=I,v.current=D;return}}b.current={x:0,y:0},v.current={x:0,y:0},p()},[t,R,r,p,i,a,JSON.stringify(y),JSON.stringify(h),x,c,N,f,JSON.stringify(m)])}const Zo={x:{[F.Backward]:!1,[F.Forward]:!1},y:{[F.Backward]:!1,[F.Forward]:!1}};function ei(e){let{delta:t,disabled:n}=e;const r=zt(t);return rt(s=>{if(n||!r||!s)return Zo;const i={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[F.Backward]:s.x[F.Backward]||i.x===-1,[F.Forward]:s.x[F.Forward]||i.x===1},y:{[F.Backward]:s.y[F.Backward]||i.y===-1,[F.Forward]:s.y[F.Forward]||i.y===1}}},[n,t,r])}function ti(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return rt(s=>{var i;return t==null?null:(i=r??s)!=null?i:null},[r,t])}function ni(e,t){return d.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,r)}));return[...n,...i]},[]),[e,t])}var tt;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(tt||(tt={}));var _t;(function(e){e.Optimized="optimized"})(_t||(_t={}));const kn=new Map;function ri(e,t){let{dragging:n,dependencies:r,config:s}=t;const[i,a]=d.useState(null),{frequency:l,measure:u,strategy:c}=s,f=d.useRef(e),g=b(),m=et(g),h=d.useCallback(function(v){v===void 0&&(v=[]),!m.current&&a(y=>y===null?v:y.concat(v.filter(j=>!y.includes(j))))},[m]),x=d.useRef(null),p=rt(v=>{if(g&&!n)return kn;if(!v||v===kn||f.current!==e||i!=null){const y=new Map;for(let j of e){if(!j)continue;if(i&&i.length>0&&!i.includes(j.id)&&j.rect.current){y.set(j.id,j.rect.current);continue}const R=j.node.current,N=R?new Ut(u(R),R):null;j.rect.current=N,N&&y.set(j.id,N)}return y}return v},[e,i,n,g,u]);return d.useEffect(()=>{f.current=e},[e]),d.useEffect(()=>{g||h()},[n,g]),d.useEffect(()=>{i&&i.length>0&&a(null)},[JSON.stringify(i)]),d.useEffect(()=>{g||typeof l!="number"||x.current!==null||(x.current=setTimeout(()=>{h(),x.current=null},l))},[l,g,h,...r]),{droppableRects:p,measureDroppableContainers:h,measuringScheduled:i!=null};function b(){switch(c){case tt.Always:return!1;case tt.BeforeDragging:return n;default:return!n}}}function lr(e,t){return rt(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function si(e,t){return lr(e,t)}function oi(e){let{callback:t,disabled:n}=e;const r=qt(t),s=d.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return d.useEffect(()=>()=>s?.disconnect(),[s]),s}function bt(e){let{callback:t,disabled:n}=e;const r=qt(t),s=d.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return d.useEffect(()=>()=>s?.disconnect(),[s]),s}function ii(e){return new Ut(He(e),e)}function En(e,t,n){t===void 0&&(t=ii);const[r,s]=d.useState(null);function i(){s(u=>{if(!e)return null;if(e.isConnected===!1){var c;return(c=u??n)!=null?c:null}const f=t(e);return JSON.stringify(u)===JSON.stringify(f)?u:f})}const a=oi({callback(u){if(e)for(const c of u){const{type:f,target:g}=c;if(f==="childList"&&g instanceof HTMLElement&&g.contains(e)){i();break}}}}),l=bt({callback:i});return ce(()=>{i(),e?(l?.observe(e),a?.observe(document.body,{childList:!0,subtree:!0})):(l?.disconnect(),a?.disconnect())},[e]),r}function ai(e){const t=lr(e);return Zn(e,t)}const Rn=[];function li(e){const t=d.useRef(e),n=rt(r=>e?r&&r!==Rn&&e&&t.current&&e.parentNode===t.current.parentNode?r:Gt(e):Rn,[e]);return d.useEffect(()=>{t.current=e},[e]),n}function ci(e){const[t,n]=d.useState(null),r=d.useRef(e),s=d.useCallback(i=>{const a=Rt(i.target);a&&n(l=>l?(l.set(a,It(a)),new Map(l)):null)},[]);return d.useEffect(()=>{const i=r.current;if(e!==i){a(i);const l=e.map(u=>{const c=Rt(u);return c?(c.addEventListener("scroll",s,{passive:!0}),[c,It(c)]):null}).filter(u=>u!=null);n(l.length?new Map(l):null),r.current=e}return()=>{a(e),a(i)};function a(l){l.forEach(u=>{const c=Rt(u);c?.removeEventListener("scroll",s)})}},[s,e]),d.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,a)=>Ie(i,a),se):or(e):se,[e,t])}function Mn(e,t){t===void 0&&(t=[]);const n=d.useRef(null);return d.useEffect(()=>{n.current=null},t),d.useEffect(()=>{const r=e!==se;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?gt(e,n.current):se}function di(e){d.useEffect(()=>{if(!xt)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n?.()}},e.map(t=>{let{sensor:n}=t;return n}))}function ui(e,t){return d.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=a=>{i(a,t)},n},{}),[e,t])}function cr(e){return d.useMemo(()=>e?Ao(e):null,[e])}const Tn=[];function fi(e,t){t===void 0&&(t=He);const[n]=e,r=cr(n?q(n):null),[s,i]=d.useState(Tn);function a(){i(()=>e.length?e.map(u=>rr(u)?r:new Ut(t(u),u)):Tn)}const l=bt({callback:a});return ce(()=>{l?.disconnect(),a(),e.forEach(u=>l?.observe(u))},[e]),s}function hi(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return nt(t)?t:e}function gi(e){let{measure:t}=e;const[n,r]=d.useState(null),s=d.useCallback(c=>{for(const{target:f}of c)if(nt(f)){r(g=>{const m=t(f);return g?{...g,width:m.width,height:m.height}:m});break}},[t]),i=bt({callback:s}),a=d.useCallback(c=>{const f=hi(c);i?.disconnect(),f&&i?.observe(f),r(f?t(f):null)},[t,i]),[l,u]=ht(a);return d.useMemo(()=>({nodeRef:l,rect:n,setRef:u}),[n,l,u])}const mi=[{sensor:Jt,options:{}},{sensor:ar,options:{}}],pi={current:{}},ft={draggable:{measure:Cn},droppable:{measure:Cn,strategy:tt.WhileDragging,frequency:_t.Optimized},dragOverlay:{measure:He}};class Ze extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const vi={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ze,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:mt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:ft,measureDroppableContainers:mt,windowRect:null,measuringScheduled:!1},xi={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:mt,draggableNodes:new Map,over:null,measureDroppableContainers:mt},yt=d.createContext(xi),dr=d.createContext(vi);function bi(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ze}}}function yi(e,t){switch(t.type){case B.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case B.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case B.DragEnd:case B.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case B.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new Ze(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case B.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const a=new Ze(e.droppable.containers);return a.set(n,{...i,disabled:s}),{...e,droppable:{...e.droppable,containers:a}}}case B.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const i=new Ze(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function wi(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=d.useContext(yt),i=zt(r),a=zt(n?.id);return d.useEffect(()=>{if(!t&&!r&&i&&a!=null){if(!Kt(i)||document.activeElement===i.target)return;const l=s.get(a);if(!l)return;const{activatorNode:u,node:c}=l;if(!u.current&&!c.current)return;requestAnimationFrame(()=>{for(const f of[u.current,c.current]){if(!f)continue;const g=co(f);if(g){g.focus();break}}})}},[r,t,s,a,i]),null}function Ci(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,i)=>i({transform:s,...r}),n):n}function ji(e){return d.useMemo(()=>({draggable:{...ft.draggable,...e?.draggable},droppable:{...ft.droppable,...e?.droppable},dragOverlay:{...ft.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function Si(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const i=d.useRef(!1),{x:a,y:l}=typeof s=="boolean"?{x:s,y:s}:s;ce(()=>{if(!a&&!l||!t){i.current=!1;return}if(i.current||!r)return;const c=t?.node.current;if(!c||c.isConnected===!1)return;const f=n(c),g=Zn(f,r);if(a||(g.x=0),l||(g.y=0),i.current=!0,Math.abs(g.x)>0||Math.abs(g.y)>0){const m=er(c);m&&m.scrollBy({top:g.y,left:g.x})}},[t,a,l,r,n])}const ur=d.createContext({...se,scaleX:1,scaleY:1});var we;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(we||(we={}));const Ni=d.memo(function(t){var n,r,s,i;let{id:a,accessibility:l,autoScroll:u=!0,children:c,sensors:f=mi,collisionDetection:g=Ro,measuring:m,modifiers:h,...x}=t;const p=d.useReducer(yi,void 0,bi),[b,v]=p,[y,j]=po(),[R,N]=d.useState(we.Uninitialized),S=R===we.Initialized,{draggable:{active:M,nodes:w,translate:D},droppable:{containers:I}}=b,z=M!=null?w.get(M):null,K=d.useRef({initial:null,translated:null}),G=d.useMemo(()=>{var V;return M!=null?{id:M,data:(V=z?.data)!=null?V:pi,rect:K}:null},[M,z]),Z=d.useRef(null),[he,ke]=d.useState(null),[Y,Ee]=d.useState(null),re=et(x,Object.values(x)),C=st("DndDescribedBy",a),k=d.useMemo(()=>I.getEnabled(),[I]),E=ji(m),{droppableRects:L,measureDroppableContainers:H,measuringScheduled:ee}=ri(k,{dragging:S,dependencies:[D.x,D.y],config:E.droppable}),_=ti(w,M),Re=d.useMemo(()=>Y?At(Y):null,[Y]),ge=Mr(),de=si(_,E.draggable.measure);Si({activeNode:M!=null?w.get(M):null,config:ge.layoutShiftCompensation,initialRect:de,measure:E.draggable.measure});const A=En(_,E.draggable.measure,de),We=En(_?_.parentElement:null),oe=d.useRef({activatorEvent:null,active:null,activeNode:_,collisionRect:null,collisions:null,droppableRects:L,draggableNodes:w,draggingNode:null,draggingNodeRect:null,droppableContainers:I,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Me=I.getNodeFor((n=oe.current.over)==null?void 0:n.id),ue=gi({measure:E.dragOverlay.measure}),Te=(r=ue.nodeRef.current)!=null?r:_,De=S?(s=ue.rect)!=null?s:A:null,Zt=!!(ue.nodeRef.current&&ue.rect),en=ai(Zt?null:A),Ct=cr(Te?q(Te):null),me=li(S?Me??_:null),ot=fi(me),it=Ci(h,{transform:{x:D.x-en.x,y:D.y-en.y,scaleX:1,scaleY:1},activatorEvent:Y,active:G,activeNodeRect:A,containerNodeRect:We,draggingNodeRect:De,over:oe.current.over,overlayNodeRect:ue.rect,scrollableAncestors:me,scrollableAncestorRects:ot,windowRect:Ct}),tn=Re?Ie(Re,D):null,nn=ci(me),Cr=Mn(nn),jr=Mn(nn,[A]),Le=Ie(it,Cr),$e=De?Do(De,it):null,Pe=G&&$e?g({active:G,collisionRect:$e,droppableRects:L,droppableContainers:k,pointerCoordinates:tn}):null,rn=No(Pe,"id"),[pe,sn]=d.useState(null),Sr=Zt?it:Ie(it,jr),Nr=Mo(Sr,(i=pe?.rect)!=null?i:null,A),jt=d.useRef(null),on=d.useCallback((V,U)=>{let{sensor:Q,options:ve}=U;if(Z.current==null)return;const te=w.get(Z.current);if(!te)return;const J=V.nativeEvent,ie=new Q({active:Z.current,activeNode:te,event:J,options:ve,context:oe,onAbort(W){if(!w.get(W))return;const{onDragAbort:ae}=re.current,fe={id:W};ae?.(fe),y({type:"onDragAbort",event:fe})},onPending(W,xe,ae,fe){if(!w.get(W))return;const{onDragPending:Ye}=re.current,be={id:W,constraint:xe,initialCoordinates:ae,offset:fe};Ye?.(be),y({type:"onDragPending",event:be})},onStart(W){const xe=Z.current;if(xe==null)return;const ae=w.get(xe);if(!ae)return;const{onDragStart:fe}=re.current,Ve={activatorEvent:J,active:{id:xe,data:ae.data,rect:K}};Ge.unstable_batchedUpdates(()=>{fe?.(Ve),N(we.Initializing),v({type:B.DragStart,initialCoordinates:W,active:xe}),y({type:"onDragStart",event:Ve}),ke(jt.current),Ee(J)})},onMove(W){v({type:B.DragMove,coordinates:W})},onEnd:ze(B.DragEnd),onCancel:ze(B.DragCancel)});jt.current=ie;function ze(W){return async function(){const{active:ae,collisions:fe,over:Ve,scrollAdjustedTranslate:Ye}=oe.current;let be=null;if(ae&&Ye){const{cancelDrop:Xe}=re.current;be={activatorEvent:J,active:ae,collisions:fe,delta:Ye,over:Ve},W===B.DragEnd&&typeof Xe=="function"&&await Promise.resolve(Xe(be))&&(W=B.DragCancel)}Z.current=null,Ge.unstable_batchedUpdates(()=>{v({type:W}),N(we.Uninitialized),sn(null),ke(null),Ee(null),jt.current=null;const Xe=W===B.DragEnd?"onDragEnd":"onDragCancel";if(be){const St=re.current[Xe];St?.(be),y({type:Xe,event:be})}})}}},[w]),kr=d.useCallback((V,U)=>(Q,ve)=>{const te=Q.nativeEvent,J=w.get(ve);if(Z.current!==null||!J||te.dndKit||te.defaultPrevented)return;const ie={active:J};V(Q,U.options,ie)===!0&&(te.dndKit={capturedBy:U.sensor},Z.current=ve,on(Q,U))},[w,on]),an=ni(f,kr);di(f),ce(()=>{A&&R===we.Initializing&&N(we.Initialized)},[A,R]),d.useEffect(()=>{const{onDragMove:V}=re.current,{active:U,activatorEvent:Q,collisions:ve,over:te}=oe.current;if(!U||!Q)return;const J={active:U,activatorEvent:Q,collisions:ve,delta:{x:Le.x,y:Le.y},over:te};Ge.unstable_batchedUpdates(()=>{V?.(J),y({type:"onDragMove",event:J})})},[Le.x,Le.y]),d.useEffect(()=>{const{active:V,activatorEvent:U,collisions:Q,droppableContainers:ve,scrollAdjustedTranslate:te}=oe.current;if(!V||Z.current==null||!U||!te)return;const{onDragOver:J}=re.current,ie=ve.get(rn),ze=ie&&ie.rect.current?{id:ie.id,rect:ie.rect.current,data:ie.data,disabled:ie.disabled}:null,W={active:V,activatorEvent:U,collisions:Q,delta:{x:te.x,y:te.y},over:ze};Ge.unstable_batchedUpdates(()=>{sn(ze),J?.(W),y({type:"onDragOver",event:W})})},[rn]),ce(()=>{oe.current={activatorEvent:Y,active:G,activeNode:_,collisionRect:$e,collisions:Pe,droppableRects:L,draggableNodes:w,draggingNode:Te,draggingNodeRect:De,droppableContainers:I,over:pe,scrollableAncestors:me,scrollAdjustedTranslate:Le},K.current={initial:De,translated:$e}},[G,_,Pe,$e,w,Te,De,L,I,pe,me,Le]),Jo({...ge,delta:D,draggingRect:$e,pointerCoordinates:tn,scrollableAncestors:me,scrollableAncestorRects:ot});const Er=d.useMemo(()=>({active:G,activeNode:_,activeNodeRect:A,activatorEvent:Y,collisions:Pe,containerNodeRect:We,dragOverlay:ue,draggableNodes:w,droppableContainers:I,droppableRects:L,over:pe,measureDroppableContainers:H,scrollableAncestors:me,scrollableAncestorRects:ot,measuringConfiguration:E,measuringScheduled:ee,windowRect:Ct}),[G,_,A,Y,Pe,We,ue,w,I,L,pe,H,me,ot,E,ee,Ct]),Rr=d.useMemo(()=>({activatorEvent:Y,activators:an,active:G,activeNodeRect:A,ariaDescribedById:{draggable:C},dispatch:v,draggableNodes:w,over:pe,measureDroppableContainers:H}),[Y,an,G,A,v,C,w,pe,H]);return O.createElement(Jn.Provider,{value:j},O.createElement(yt.Provider,{value:Rr},O.createElement(dr.Provider,{value:Er},O.createElement(ur.Provider,{value:Nr},c)),O.createElement(wi,{disabled:l?.restoreFocus===!1})),O.createElement(bo,{...l,hiddenTextDescribedById:C}));function Mr(){const V=he?.autoScrollEnabled===!1,U=typeof u=="object"?u.enabled===!1:u===!1,Q=S&&!V&&!U;return typeof u=="object"?{...u,enabled:Q}:{enabled:Q}}}),ki=d.createContext(null),Dn="button",Ei="Draggable";function Ri(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const i=st(Ei),{activators:a,activatorEvent:l,active:u,activeNodeRect:c,ariaDescribedById:f,draggableNodes:g,over:m}=d.useContext(yt),{role:h=Dn,roleDescription:x="draggable",tabIndex:p=0}=s??{},b=u?.id===t,v=d.useContext(b?ur:ki),[y,j]=ht(),[R,N]=ht(),S=ui(a,t),M=et(n);ce(()=>(g.set(t,{id:t,key:i,node:y,activatorNode:R,data:M}),()=>{const D=g.get(t);D&&D.key===i&&g.delete(t)}),[g,t]);const w=d.useMemo(()=>({role:h,tabIndex:p,"aria-disabled":r,"aria-pressed":b&&h===Dn?!0:void 0,"aria-roledescription":x,"aria-describedby":f.draggable}),[r,h,p,b,x,f.draggable]);return{active:u,activatorEvent:l,activeNodeRect:c,attributes:w,isDragging:b,listeners:r?void 0:S,node:y,over:m,setNodeRef:j,setActivatorNodeRef:N,transform:v}}function Mi(){return d.useContext(dr)}const Ti="Droppable",Di={timeout:25};function Li(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const i=st(Ti),{active:a,dispatch:l,over:u,measureDroppableContainers:c}=d.useContext(yt),f=d.useRef({disabled:n}),g=d.useRef(!1),m=d.useRef(null),h=d.useRef(null),{disabled:x,updateMeasurementsFor:p,timeout:b}={...Di,...s},v=et(p??r),y=d.useCallback(()=>{if(!g.current){g.current=!0;return}h.current!=null&&clearTimeout(h.current),h.current=setTimeout(()=>{c(Array.isArray(v.current)?v.current:[v.current]),h.current=null},b)},[b]),j=bt({callback:y,disabled:x||!a}),R=d.useCallback((w,D)=>{j&&(D&&(j.unobserve(D),g.current=!1),w&&j.observe(w))},[j]),[N,S]=ht(R),M=et(t);return d.useEffect(()=>{!j||!N.current||(j.disconnect(),g.current=!1,j.observe(N.current))},[N,j]),d.useEffect(()=>(l({type:B.RegisterDroppable,element:{id:r,key:i,disabled:n,node:N,rect:m,data:M}}),()=>l({type:B.UnregisterDroppable,key:i,id:r})),[r]),d.useEffect(()=>{n!==f.current.disabled&&(l({type:B.SetDroppableDisabled,id:r,key:i,disabled:n}),f.current.disabled=n)},[r,i,n,l]),{active:a,rect:m,isOver:u?.id===r,node:N,over:u,setNodeRef:S}}function wt(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function $i(e,t){return e.reduce((n,r,s)=>{const i=t.get(r);return i&&(n[s]=i),n},Array(e.length))}function at(e){return e!==null&&e>=0}function zi(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Ai(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const lt={scaleX:1,scaleY:1},Ii=e=>{var t;let{rects:n,activeNodeRect:r,activeIndex:s,overIndex:i,index:a}=e;const l=(t=n[s])!=null?t:r;if(!l)return null;const u=Oi(n,a,s);if(a===s){const c=n[i];return c?{x:s<i?c.left+c.width-(l.left+l.width):c.left-l.left,y:0,...lt}:null}return a>s&&a<=i?{x:-l.width-u,y:0,...lt}:a<s&&a>=i?{x:l.width+u,y:0,...lt}:{x:0,y:0,...lt}};function Oi(e,t,n){const r=e[t],s=e[t-1],i=e[t+1];return!r||!s&&!i?0:n<t?s?r.left-(s.left+s.width):i.left-(r.left+r.width):i?i.left-(r.left+r.width):r.left-(s.left+s.width)}const fr=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const i=wt(t,r,n),a=t[s],l=i[s];return!l||!a?null:{x:l.left-a.left,y:l.top-a.top,scaleX:l.width/a.width,scaleY:l.height/a.height}},ct={scaleX:1,scaleY:1},_i=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:i,overIndex:a}=e;const l=(t=i[n])!=null?t:r;if(!l)return null;if(s===n){const c=i[a];return c?{x:0,y:n<a?c.top+c.height-(l.top+l.height):c.top-l.top,...ct}:null}const u=Bi(i,s,n);return s>n&&s<=a?{x:0,y:-l.height-u,...ct}:s<n&&s>=a?{x:0,y:l.height+u,...ct}:{x:0,y:0,...ct}};function Bi(e,t,n){const r=e[t],s=e[t-1],i=e[t+1];return r?n<t?s?r.top-(s.top+s.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const hr="Sortable",gr=O.createContext({activeIndex:-1,containerId:hr,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:fr,disabled:{draggable:!1,droppable:!1}});function mr(e){let{children:t,id:n,items:r,strategy:s=fr,disabled:i=!1}=e;const{active:a,dragOverlay:l,droppableRects:u,over:c,measureDroppableContainers:f}=Mi(),g=st(hr,n),m=l.rect!==null,h=d.useMemo(()=>r.map(S=>typeof S=="object"&&"id"in S?S.id:S),[r]),x=a!=null,p=a?h.indexOf(a.id):-1,b=c?h.indexOf(c.id):-1,v=d.useRef(h),y=!zi(h,v.current),j=b!==-1&&p===-1||y,R=Ai(i);ce(()=>{y&&x&&f(h)},[y,h,x,f]),d.useEffect(()=>{v.current=h},[h]);const N=d.useMemo(()=>({activeIndex:p,containerId:g,disabled:R,disableTransforms:j,items:h,overIndex:b,useDragOverlay:m,sortedRects:$i(h,u),strategy:s}),[p,g,R.draggable,R.droppable,j,h,b,u,m,s]);return O.createElement(gr.Provider,{value:N},t)}const Fi=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return wt(n,r,s).indexOf(t)},Hi=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:i,newIndex:a,previousItems:l,previousContainerId:u,transition:c}=e;return!c||!r||l!==i&&s===a?!1:n?!0:a!==s&&t===u},Wi={duration:200,easing:"ease"},pr="transform",Pi=Oe.Transition.toString({property:pr,duration:0,easing:"linear"}),Vi={roleDescription:"sortable"};function Yi(e){let{disabled:t,index:n,node:r,rect:s}=e;const[i,a]=d.useState(null),l=d.useRef(n);return ce(()=>{if(!t&&n!==l.current&&r.current){const u=s.current;if(u){const c=He(r.current,{ignoreTransform:!0}),f={x:u.left-c.left,y:u.top-c.top,scaleX:u.width/c.width,scaleY:u.height/c.height};(f.x||f.y)&&a(f)}}n!==l.current&&(l.current=n)},[t,n,r,s]),d.useEffect(()=>{i&&a(null)},[i]),i}function vr(e){let{animateLayoutChanges:t=Hi,attributes:n,disabled:r,data:s,getNewIndex:i=Fi,id:a,strategy:l,resizeObserverConfig:u,transition:c=Wi}=e;const{items:f,containerId:g,activeIndex:m,disabled:h,disableTransforms:x,sortedRects:p,overIndex:b,useDragOverlay:v,strategy:y}=d.useContext(gr),j=Xi(r,h),R=f.indexOf(a),N=d.useMemo(()=>({sortable:{containerId:g,index:R,items:f},...s}),[g,s,R,f]),S=d.useMemo(()=>f.slice(f.indexOf(a)),[f,a]),{rect:M,node:w,isOver:D,setNodeRef:I}=Li({id:a,data:N,disabled:j.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...u}}),{active:z,activatorEvent:K,activeNodeRect:G,attributes:Z,setNodeRef:he,listeners:ke,isDragging:Y,over:Ee,setActivatorNodeRef:re,transform:C}=Ri({id:a,data:N,attributes:{...Vi,...n},disabled:j.draggable}),k=oo(I,he),E=!!z,L=E&&!x&&at(m)&&at(b),H=!v&&Y,ee=H&&L?C:null,Re=L?ee??(l??y)({rects:p,activeNodeRect:G,activeIndex:m,overIndex:b,index:R}):null,ge=at(m)&&at(b)?i({id:a,items:f,activeIndex:m,overIndex:b}):R,de=z?.id,A=d.useRef({activeId:de,items:f,newIndex:ge,containerId:g}),We=f!==A.current.items,oe=t({active:z,containerId:g,isDragging:Y,isSorting:E,id:a,index:R,items:f,newIndex:A.current.newIndex,previousItems:A.current.items,previousContainerId:A.current.containerId,transition:c,wasDragging:A.current.activeId!=null}),Me=Yi({disabled:!oe,index:R,node:w,rect:M});return d.useEffect(()=>{E&&A.current.newIndex!==ge&&(A.current.newIndex=ge),g!==A.current.containerId&&(A.current.containerId=g),f!==A.current.items&&(A.current.items=f)},[E,ge,g,f]),d.useEffect(()=>{if(de===A.current.activeId)return;if(de!=null&&A.current.activeId==null){A.current.activeId=de;return}const Te=setTimeout(()=>{A.current.activeId=de},50);return()=>clearTimeout(Te)},[de]),{active:z,activeIndex:m,attributes:Z,data:N,rect:M,index:R,newIndex:ge,items:f,isOver:D,isSorting:E,isDragging:Y,listeners:ke,node:w,overIndex:b,over:Ee,setNodeRef:k,setActivatorNodeRef:re,setDroppableNodeRef:I,setDraggableNodeRef:he,transform:Me??Re,transition:ue()};function ue(){if(Me||We&&A.current.newIndex===R)return Pi;if(!(H&&!Kt(K)||!c)&&(E||oe))return Oe.Transition.toString({...c,property:pr})}}function Xi(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e?.draggable)!=null?n:t.draggable,droppable:(r=e?.droppable)!=null?r:t.droppable}}$.Down,$.Right,$.Up,$.Left;const xr=d.forwardRef(({size:e="md",color:t="default",name:n,placeholder:r,value:s,onChange:i,className:a="",allClassName:l="",min:u,max:c,step:f,disabled:g=!1,control:m,rules:h=null,defaultValue:x="",onKeyDownCapture:p,error:b,helperText:v,...y},j)=>{const N=m?._formState?.errors?.[n]?"error":t,S=z=>{i&&i(z)},M={sm:`h-9 px-3 py-2 ${T.textSm}`,md:`h-11 px-4 py-2.5 ${T.textSm}`,lg:"h-12 px-4 py-3 text-base"},w={default:"bg-transparent text-gray-800 border-gray-300 focus:border-brand-300 focus:ring-brand-500/20 dark:border-gray-700 dark:text-white/90 dark:focus:border-brand-800",success:"border-green-500 focus:border-green-300 focus:ring-green-500/20 dark:text-green-400 dark:border-green-500 dark:focus:border-green-800",error:"border-red-500 focus:border-red-300 focus:ring-red-500/20 dark:text-red-400 dark:border-red-500 dark:focus:border-red-800"},D="text-gray-500 border-gray-300 bg-gray-100 cursor-not-allowed opacity-60 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-700",I=`w-full ${T.roundedLg} border appearance-none shadow-theme-xs placeholder:text-gray-400 focus:outline-none focus:ring-3 dark:bg-zinc-950 dark:placeholder:text-white/30`;return o.jsxs("div",{className:`relative ${l}`,children:[o.jsx("input",{type:"text",name:n,placeholder:r,ref:j,onChange:S,min:u,max:c,step:f,disabled:g,onKeyDownCapture:p,className:`
          ${I}
          ${M[e]}
          ${g?D:w[N]}
          ${a}
        `,...y}),v&&o.jsx("p",{className:`mt-1 ${T.textSm} text-red-600 dark:text-red-400`,children:v})]})});xr.displayName="TwInputRef";const br=O.forwardRef(({title:e,children:t,className:n="",desc:r="",icon:s=null,isDraggable:i=!1},a)=>{const l=d.useRef(null),[u,c]=d.useState({x:0,y:0,isInitialized:!1}),[f,g]=d.useState(!1),m=d.useRef({x:0,y:0});d.useEffect(()=>{if(i&&l.current&&!u.isInitialized){const v=l.current.getBoundingClientRect(),y=window.innerWidth/2-672/2<=0?0:window.innerWidth/2-672/2;c({x:y,y:window.innerHeight/2-v.height/2,isInitialized:!0})}},[i,u.isInitialized]);const h=v=>{if(!i||!l.current)return;g(!0);const y=l.current.getBoundingClientRect();m.current={x:v.clientX-y.left,y:v.clientY-y.top},v.preventDefault()},x=v=>{if(!f)return;const y=v.clientX-m.current.x<=0?0:v.clientX-m.current.x,j=v.clientY-m.current.y<=120?120:v.clientY-m.current.y;c({...u,x:y,y:j})},p=()=>{g(!1)};d.useEffect(()=>(f?(window.addEventListener("mousemove",x),window.addEventListener("mouseup",p)):(window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",p)),()=>{window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",p)}),[f]);const b=i?{position:"absolute",top:u.y,left:u.x,cursor:f?"grabbing":"default"}:{};return o.jsxs("div",{ref:v=>{l.current=v,a&&(a.current=v)},className:`MoveCard ${T.card} ${n}`,style:{...b},children:[o.jsxs("div",{className:`flex px-6 py-5 items-center ${i?"cursor-grab":""}`,onMouseDown:h,children:[s!==null?s:"",o.jsxs("div",{className:"flex-grow",children:[o.jsx("h3",{className:`${T.textBase} ${T.fontMedium} text-gray-800 dark:text-white/90`,children:e}),r&&o.jsx("p",{className:`mt-1 ${T.textSm} text-gray-500 dark:text-gray-400`,children:r})]})]}),o.jsx("div",{className:`border-t border-gray-100 dark:border-gray-800 
        p-4 sm:p-6 overflow-x-auto`,children:o.jsx("div",{className:"space-y-6 whitespace-normal",children:t})})]})});br.displayName="MoveCard";const yr=d.forwardRef(({name:e,options:t,rules:n,control:r,placeholder:s="Select Option",className:i="",allClassName:a="",...l},u)=>o.jsxs("div",{className:`relative ${a}`,children:[o.jsxs("select",{className:`h-11 w-full appearance-none ${T.roundedLg} border border-gray-300 
          bg-transparent px-4 py-2.5 pr-11 text-sm shadow-theme-xs placeholder:text-gray-400 
          focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 
          dark:border-gray-700 dark:bg-zinc-950 dark:text-white/90 dark:placeholder:text-white/30 
          dark:focus:border-brand-800 dark:bg-dark-900
          ${i}`,ref:u,...l,children:[o.jsx("option",{value:"",disabled:!0,className:"text-gray-700 dark:bg-zinc-950 dark:text-gray-400",children:s}),t.map(c=>o.jsx("option",{value:c.value,className:"text-gray-700 dark:bg-zinc-950 dark:text-gray-400",children:c.label},c.value))]}),o.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 h-11",children:o.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}));yr.displayName="TwSelectRef";const qi=({isOpen:e,onClose:t,onCreate:n})=>{const r={visible:{opacity:1},hidden:{opacity:0}},s={hidden:{y:"-50px",opacity:0,scale:.95},visible:{y:"0",opacity:1,scale:1,transition:{duration:.2,ease:"easeOut"}},exit:{y:"50px",opacity:0,scale:.95,transition:{duration:.15,ease:"easeIn"}}},{t:i}=Se(),{control:a,handleSubmit:l}=Yr({defaultValues:{columns:[{title:"col_0",type:"text",width:100,data:"col_0"},{title:"col_1",type:"text",width:100,data:"col_1"},{title:"col_2",type:"text",width:100,data:"col_2"}]}}),{fields:u,append:c,remove:f}=Xr({control:a,name:"columns"}),g=[{value:"text",label:i("column_type_text")},{value:"numeric",label:i("column_type_numeric")},{value:"date",label:i("column_type_date")},{value:"checkbox",label:i("column_type_checkbox")}],m=h=>{const x=h.columns.map((p,b)=>({...p,data:(p.title||"").toLowerCase().replace(/\s+/g,"_")||`col_${b}`}));n(x)};return o.jsx(Wt,{children:e&&o.jsx(X.div,{className:"fixed inset-0 bg-black/70 bg-opacity-50 z-180 flex justify-center items-center",variants:r,initial:"hidden",animate:"visible",exit:"hidden",children:o.jsx(X.div,{variants:s,initial:"hidden",animate:"visible",exit:"exit",onClick:h=>h.stopPropagation(),children:o.jsx(br,{isDraggable:!0,className:"w-full max-w-sm sm:max-w-xl max-h-[61vh] overflow-y-auto",title:i("handsontable_column_setup","Handsontable Column Setup"),children:o.jsxs("form",{onSubmit:l(m),children:[o.jsx("h3",{className:"text-md font-semibold mb-2",children:i("columns")}),o.jsx("div",{className:"space-y-3",children:u.map((h,x)=>o.jsxs("div",{className:`grid grid-cols-1 sm:grid-cols-5 gap-2 items-center p-2 ${T.border} rounded-md`,children:[o.jsx("div",{className:"sm:col-span-2",children:o.jsx(cn,{name:`columns.${x}.title`,control:a,defaultValue:h.title,render:({field:p})=>o.jsx(xr,{...p,placeholder:i("column_title")})})}),o.jsx("div",{className:"sm:col-span-2",children:o.jsx(cn,{name:`columns.${x}.type`,control:a,defaultValue:h.type,render:({field:p})=>o.jsx(yr,{...p,options:g,className:"dark:bg-gray-700"})})}),o.jsx("div",{className:"flex items-center justify-end",children:o.jsx(Ce,{type:"button",size:"sm",color:"warning",onClick:()=>f(x),disabled:u.length<=1,children:i("delete")})})]},h.id))}),o.jsxs("div",{className:"flex justify-between items-center mt-6",children:[o.jsx(Ce,{type:"button",onClick:()=>c({title:"",type:"text",data:""}),children:i("add_column")}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Ce,{type:"button",variant:"outlined",onClick:t,children:i("cancel")}),o.jsx(Ce,{type:"submit",children:i("create")})]})]})]})})})})})},wr=({id:e,children:t,onDragEnd:n})=>{const r=wo(yo(Jt,{activationConstraint:{distance:8}}));return o.jsx(Ni,{id:e,sensors:r,collisionDetection:ko,onDragEnd:n,children:t})},Ki=({id:e,block:t,styleClasses:n,onUpdateBlock:r,isCodeEditing:s,setIsCodeEditing:i})=>{const a=l=>{i(!1),r(e,{content:l.target.value})};return o.jsx(o.Fragment,{children:s?o.jsx("textarea",{defaultValue:t.content,onBlur:a,autoFocus:!0,className:`${n.code} w-full min-h-[100px] focus:outline-none focus:ring-2 focus:ring-blue-500`}):o.jsx(o.Fragment,{children:o.jsx(ms,{language:t.language||"javascript",postData:`${t.content}`})})})},Gi=()=>o.jsx("hr",{className:"border w-full border-gray-300 dark:border-gray-500 my-2 mr-4"}),Ui=["#FFADAD","#FFD6A5","#FDFFB6","#CAFFBF","#9BF6FF","#A0C4FF","#BDB2FF","#FFC6FF"],Qi=["#000000","#D00000","#AE4600","#006400","#00529B","#0018A8","#5A00A8","#A800A8"],Ji=({id:e,block:t,onUpdateBlock:n})=>{const r=d.useRef(null),s=d.useRef(null),i=f=>{n(e,{content:f})},a=async(f,g,m)=>{const h=r.current?.hotInstance;if(!h)return;const x=t.content.columns.map((p,b)=>({...p,width:h.getColWidth(b)}));n(e,{content:{...t.content,columns:x}})},l=(f,g,m,h)=>{s.current={row:f,col:g,row2:m,col2:h}},u=(f,g)=>{if(console.log("handleColorClick=",f,g),!r.current?.hotInstance||!s.current)return;const{row:h,col:x,row2:p,col2:b}=s.current,v=Math.min(h,p),y=Math.max(h,p),j=Math.min(x,b),R=Math.max(x,b),N=g==="bg"?"colorData":"colorTextData",S=t.content[N]?[...t.content[N]]:[];let M=!1;for(let w=v;w<=y;w++){S[w]||(S[w]=Array(t.content.columns.length).fill(""));for(let D=j;D<=R;D++)S[w][D]!==f&&(S[w][D]=f,M=!0)}for(let w=0;w<S.length;w++)S[w]===void 0&&(S[w]=Array(t.content.columns.length).fill(""));M&&n(e,{content:{...t.content,[N]:S}})},c=(f,g,m)=>{if(f.preventDefault(),!r.current?.hotInstance)return;const x=m==="bg"?"colorData":"colorTextData",p=t.content[x]?[...t.content[x]]:[];let b=!1;for(let v=0;v<p.length;v++)if(p[v])for(let y=0;y<p[v].length;y++)p[v][y]===g&&(p[v][y]=m==="bg"?"":void 0,b=!0);b&&n(e,{content:{...t.content,[x]:p}})};return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"absolute top-10 right-1 opacity-0 group-hover:opacity-100 transition-opacity z-180",children:o.jsxs("div",{className:"items-center bg-white/80 dark:bg-zinc-800/80 backdrop-blur-sm border border-gray-200 dark:border-zinc-700 rounded-lg shadow-lg p-1 space-x-2",children:[o.jsx("div",{children:o.jsx("div",{className:"flex space-x-1",children:Ui.map(f=>o.jsx("button",{onClick:()=>u(f,"bg"),onContextMenu:g=>c(g,f,"bg"),className:"w-4 h-4 rounded-full border",style:{backgroundColor:f}},f))})}),o.jsx("div",{children:o.jsx("div",{className:"flex space-x-1",children:Qi.map((f,g)=>o.jsx("button",{onClick:()=>u(f,"text"),onContextMenu:m=>c(m,f,"text"),className:"w-4 h-4 rounded-full border flex items-center justify-center text-white text-sm font-bold",style:{backgroundColor:f},children:g%2===0?"A":"a"},f))})})]})}),o.jsx(bs,{hotRef:r,columns:t.content.columns,rowData:t.content.data,colorData:t.content.colorData,colorTextData:t.content.colorTextData,gridData:t.content,onGridDataChange:i,afterSelection:l,handleAfterColumnResize:a,isDraggable:!1,onColorClick:u,onColorRightClick:c})]})},Zi=({id:e,block:t,onUpdateBlock:n})=>{const r=d.useRef(null),s=i=>{i.preventDefault(),i.stopPropagation();const a=i.clientX,l=r.current.offsetWidth,u=f=>{const g=l+(f.clientX-a);r.current&&(r.current.style.width=`${g}px`)},c=()=>{document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",c),n&&r.current&&n(e,{width:r.current.offsetWidth})};document.addEventListener("mousemove",u),document.addEventListener("mouseup",c)};return o.jsxs("div",{className:"relative",children:[o.jsx("img",{ref:r,src:t.content,alt:"Uploaded content",className:"h-auto rounded-md",style:{width:t.width?`${t.width}px`:"auto",maxWidth:"100%"}}),o.jsx("div",{onMouseDown:s,className:"absolute bottom-0 right-0 w-4 h-4 bg-blue-500 cursor-se-resize opacity-0 group-hover:opacity-100 transition-opacity"})]})},ea=({id:e,block:t,onUpdateBlock:n,onDelete:r})=>{const s=d.useRef(null),i=(m,h,x)=>{const p={...t.content};p.rows[h][x].text=m.currentTarget.innerHTML,n(e,{content:p})},a=()=>{const m={...t.content},h=m.rows[0]?.length||1;m.rows.push(Array(h).fill({text:""})),n(e,{content:m})},l=m=>{if(t.content.rows.length<=1)return;const h={...t.content};h.rows.splice(m,1),n(e,{content:h})},u=()=>{const m={...t.content};m.rows.forEach(h=>h.push({text:""})),n(e,{content:m})},c=m=>{if(t.content.rows[0]?.length<=1)return;const h={...t.content};h.rows.forEach(x=>x.splice(m,1)),n(e,{content:h})},f=m=>{m.preventDefault(),m.stopPropagation();const h=m.clientX,x=s.current;if(!x)return;const p=x.offsetWidth,b=y=>{const j=p+(y.clientX-h);x.style.width=`${j}px`},v=()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",v),n&&x&&n(e,{width:x.offsetWidth})};document.addEventListener("mousemove",b),document.addEventListener("mouseup",v)},g=(m,h)=>{m.preventDefault(),m.stopPropagation();const x=m.clientX,b=m.currentTarget.parentElement.offsetWidth,v=j=>{const R=b+(j.clientX-x);if(R>30){const N=s.current.querySelector("table");if(N){const S=N.querySelector("colgroup");S&&S.children[h]&&(S.children[h].style.width=`${R}px`)}}},y=j=>{document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",y);const R=b+(j.clientX-x),N=[...t.content.colWidths||[]];N[h]=Math.max(R,30),n(e,{content:{...t.content,colWidths:N}})};document.addEventListener("mousemove",v),document.addEventListener("mouseup",y)};return o.jsxs("div",{className:"flex items-start group relative w-full",children:[o.jsxs("button",{onClick:a,className:"absolute -bottom-2.5 left-1/2 -translate-x-1/2 w-full h-5 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-10",children:[o.jsx("div",{className:"w-6 h-px bg-blue-500"}),o.jsx("div",{className:"absolute w-5 h-5 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs",children:"＋"})]}),o.jsxs("div",{ref:s,className:"relative w-full",style:{width:t.width?`${t.width}px`:"100%"},children:[o.jsxs("button",{onClick:u,className:"absolute top-1/2 -right-2.5 -translate-y-1/2 h-full w-5 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-10",children:[o.jsx("div",{className:"h-6 w-px bg-blue-500"}),o.jsx("div",{className:"absolute w-5 h-5 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs",children:"＋"})]}),o.jsxs("table",{className:"w-full border-collapse border border-gray-300 dark:border-zinc-600 table-fixed",children:[o.jsx("colgroup",{children:t.content.rows[0]?.map((m,h)=>o.jsx("col",{style:{width:t.content.colWidths?.[h]?`${t.content.colWidths[h]}px`:"auto"}},h))}),o.jsx("thead",{children:o.jsx("tr",{children:t.content.rows[0]?.map((m,h)=>o.jsxs("th",{className:"relative border-none p-0 h-4 group/col",children:[o.jsx("button",{onClick:()=>c(h),className:"absolute -top-2.5 left-1/2 -translate-x-1/2 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-xs opacity-0 group-hover/col:opacity-100 transition-opacity z-10",children:"－"}),o.jsx("div",{onMouseDown:x=>g(x,h),className:"absolute top-0 right-0 h-full w-1.5 cursor-col-resize opacity-0 group-hover/col:opacity-100",children:o.jsx("div",{className:"h-full w-px bg-blue-500"})})]},h))})}),o.jsx("tbody",{children:t.content.rows.map((m,h)=>o.jsxs("tr",{className:"relative group/row",children:[o.jsx("button",{onClick:()=>l(h),className:"absolute -left-2.5 top-1/2 -translate-y-1/2 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-xs opacity-0 group-hover/row:opacity-100 transition-opacity z-10",children:"－"}),m.map((x,p)=>o.jsx("td",{contentEditable:!0,suppressContentEditableWarning:!0,onBlur:b=>i(b,h,p),className:"border border-gray-300 dark:border-zinc-600 p-2 focus:outline-blue-500 overflow-hidden whitespace-nowrap",dangerouslySetInnerHTML:{__html:x.text}},p))]},h))})]}),o.jsx("div",{onMouseDown:f,className:"absolute bottom-0 right-0 w-4 h-4 bg-blue-500 cursor-se-resize opacity-0 group-hover:opacity-100 transition-opacity"})]}),o.jsx("button",{onClick:()=>r(e),className:"p-1 text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity absolute -top-2 -right-2 bg-white dark:bg-zinc-800 rounded-full","aria-label":"Delete block",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[o.jsx("path",{d:"M3 6h18"}),o.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),o.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})},Ln=({id:e,block:t,styleClasses:n,onUpdate:r})=>{const s=d.useRef(null),[i,a]=d.useState(!1),l=u=>{a(!1),r&&r(e,u.currentTarget.innerHTML)};return o.jsx("div",{ref:s,contentEditable:"true",suppressContentEditableWarning:!0,onFocus:()=>a(!0),onBlur:l,className:`${n[t.style]||n.p} w-full focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-sm px-1 min-h-[1em]`,dangerouslySetInnerHTML:{__html:t.content}})},ta=({id:e,block:t,styleClasses:n,onUpdate:r,onUpdateBlock:s})=>{const i=d.useRef(null),[a,l]=d.useState(!1),u=f=>{l(!1),r&&r(e,f.currentTarget.innerHTML)},c=()=>{s(e,{checked:!t.checked})};return o.jsxs("div",{className:n.todo,children:[o.jsx("input",{type:"checkbox",checked:t.checked||!1,onChange:c,className:"form-checkbox h-5 w-5 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),o.jsx("div",{ref:i,contentEditable:"true",suppressContentEditableWarning:!0,onFocus:()=>l(!0),onBlur:u,className:`w-full focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-sm px-1 min-h-[1em] ${t.checked?"line-through text-gray-400 dark:text-gray-500":""}`,dangerouslySetInnerHTML:{__html:t.content}})]})},na=({block:e})=>o.jsx("div",{className:"w-full aspect-w-16 aspect-h-9",children:o.jsx("iframe",{src:`https://www.youtube.com/embed/${e.content}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"w-full h-full rounded-md"})}),ra=e=>{const{attributes:t,listeners:n,setNodeRef:r,transform:s,transition:i,isDragging:a}=vr({id:e}),l={transform:Oe.Transform.toString(s),transition:a?"opacity 0.2s ease-in-out":"transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.2s ease-in-out",zIndex:a?10:"auto",opacity:a?.8:1};return{attributes:t,listeners:n,setNodeRef:r,style:l,isDragging:a}},sa=d.memo(({id:e,block:t,styleClasses:n,onUpdateBlock:r,onUpdate:s,onStyleChange:i,onDelete:a,onDuplicate:l})=>{const{attributes:u,listeners:c,setNodeRef:f,style:g}=ra(e),[m,h]=d.useState(!1),[x,p]=d.useState(!1),b=()=>{switch(t.style){case"handsontable":return o.jsx(Ji,{id:e,block:t,onUpdateBlock:r,isCodeEditing:m,setIsCodeEditing:h});case"divider":return o.jsx(Gi,{});case"todo":return o.jsx(ta,{id:e,block:t,styleClasses:n,onUpdate:s,onUpdateBlock:r});case"quote":return o.jsx(Ln,{id:e,block:t,styleClasses:n,onUpdate:s});case"code":return o.jsx(Ki,{id:e,block:t,styleClasses:n,onUpdateBlock:r,isCodeEditing:m,setIsCodeEditing:h});case"youtube":return o.jsx(na,{block:t});case"table":return o.jsx(ea,{id:e,block:t,onUpdateBlock:r,onDelete:a});case"image":return o.jsx(Zi,{id:e,block:t,onUpdateBlock:r});default:return o.jsx(Ln,{id:e,block:t,styleClasses:n,onUpdate:s})}};return o.jsxs("div",{ref:f,style:g,className:"group relative rounded-md hover:bg-gray-200 group-hover:bg-gray-50 dark:group-hover:bg-zinc-800/50 dark:hover:bg-zinc-800/50",children:[o.jsx("div",{className:"absolute top-1 right-1 flex flex-col items-end opacity-0 group-hover:opacity-100 transition-opacity z-[170] space-y-1",children:o.jsxs("div",{className:"flex items-center bg-white dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 rounded-md shadow-sm p-1 space-x-1",children:[o.jsx("button",{...u,...!x&&!m&&c,className:"p-1 cursor-grab text-gray-400 hover:text-gray-600",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[o.jsx("circle",{cx:"12",cy:"12",r:"1"}),o.jsx("circle",{cx:"12",cy:"5",r:"1"}),o.jsx("circle",{cx:"12",cy:"19",r:"1"})]})}),o.jsxs("select",{value:t.style,onChange:v=>i(e,v.target.value),className:"bg-gray-50 border border-gray-300 text-gray-900 text-xs rounded focus:ring-blue-500 focus:border-blue-500 block p-1 dark:bg-zinc-700 dark:border-zinc-600 dark:placeholder-zinc-400 dark:text-white",children:[o.jsx("option",{value:"p",children:"P"}),o.jsx("option",{value:"h1",children:"H1"}),o.jsx("option",{value:"h2",children:"H2"}),o.jsx("option",{value:"todo",children:"Todo"}),o.jsx("option",{value:"quote",children:"Quote"}),o.jsx("option",{value:"divider",children:"Divider"}),o.jsx("option",{value:"handsontable",children:"Handsontable"}),o.jsx("option",{value:"code",children:"Code"})]}),t.style==="code"&&o.jsx("select",{value:t.language||"javascript",onChange:v=>r(e,{language:v.target.value}),className:"bg-gray-50 border border-gray-300 text-gray-900 text-xs rounded focus:ring-blue-500 focus:border-blue-500 block p-1 dark:bg-zinc-700 dark:border-zinc-600 dark:placeholder-zinc-400 dark:text-white",children:["javascript","css","html","python","java","csharp","sql","bash","json","typescript"].map(v=>o.jsx("option",{value:v,children:v},v))}),o.jsx("button",{onClick:()=>a(e),className:"p-1 text-gray-400 hover:text-red-500",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[o.jsx("path",{d:"M3 6h18"}),o.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),o.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})}),o.jsxs("div",{className:"flex w-full",onDoubleClick:()=>h(!0),children:[o.jsx("div",{role:"button","aria-expanded":"false","aria-label":"드래그","aria-haspopup":"dialog",...u,...!x&&!m&&c,className:"cursor-grab",children:o.jsx("svg",{"aria-hidden":"true",role:"graphics-symbol",viewBox:"0 0 10 10",fill:"currentcolor",className:"dragHandle mt-1 mr-1 opacity-0 group-hover:opacity-100 transition-opacity",style:{width:"14px",height:"14px",display:t,flexShrink:0},children:o.jsx("path",{d:"M3,2 C2.44771525,2 2,1.55228475 2,1 C2,0.44771525 2.44771525,0 3,0 C3.55228475,0 4,0.44771525 4,1 C4,1.55228475 3.55228475,2 3,2 Z M3,6 C2.44771525,6 2,5.55228475 2,5 C2,4.44771525 2.44771525,4 3,4 C3.55228475,4 4,4.44771525 4,5 C4,5.55228475 3.55228475,6 3,6 Z M3,10 C2.44771525,10 2,9.55228475 2,9 C2,8.44771525 2.44771525,8 3,8 C3.55228475,8 4,8.44771525 4,9 C4,9.55228475 3.55228475,10 3,10 Z M7,2 C6.44771525,2 6,1.55228475 6,1 C6,0.44771525 6.44771525,0 7,0 C7.55228475,0 8,0.44771525 8,1 C8,1.55228475 7.55228475,2 7,2 Z M7,6 C6.44771525,6 6,5.55228475 6,5 C6,4.44771525 6.44771525,4 7,4 C7.55228475,4 8,4.44771525 8,5 C8,5.55228475 7.55228475,6 7,6 Z M7,10 C6.44771525,10 6,9.55228475 6,9 C6,8.44771525 6.44771525,8 7,8 C7.55228475,8 8,8.44771525 8,9 C8,9.55228475 7.55228475,10 7,10 Z"})})}),b()]})]})}),oa=()=>{const{user:e}=_e(),{memoId:t}=Yn(),{t:n}=Se(),[r,s]=d.useState([]),[i,a]=d.useState(""),[l,u]=d.useState("p"),c=d.useRef(null),f=d.useRef(null),[g,m]=d.useState(!1),[h,x]=d.useState(""),[p,b]=d.useState(!1),[v,y]=d.useState(0),j=d.useRef(!0);d.useEffect(()=>{if(e&&t){const C=`memo_txt/${e.uid}/${t}/notion`;le(C).then(k=>{console.log("data=",k),k&&s(k),j.current=!1})}},[e,t]),d.useEffect(()=>{if(!j.current&&e&&t){const C=`memo_txt/${e.uid}/${t}/notion`;P(C,r)}},[r,e,t]);const R=[{command:"p",label:"Paragraph"},{command:"h1",label:"Heading 1"},{command:"h2",label:"Heading 2"},{command:"todo",label:"To-do list"},{command:"quote",label:"Quote"},{command:"code",label:"Code Block"},{command:"image",label:"Image"},{command:"divider",label:"Divider"},{command:"handsontable",label:"Handsontable"},{command:"table",label:"Table"},{command:"youtube",label:"YouTube Video"}],N=h?R.filter(C=>C.label.toLowerCase().includes(h.toLowerCase())):R,S=C=>{if(g){C.key==="ArrowDown"?(C.preventDefault(),y(k=>(k+1)%N.length)):C.key==="ArrowUp"?(C.preventDefault(),y(k=>(k-1+N.length)%N.length)):C.key==="Enter"?(C.preventDefault(),N[v]&&he(N[v].command)):C.key==="Escape"&&(C.preventDefault(),m(!1));return}if(C.key==="Enter"&&!C.shiftKey){C.preventDefault();const k=c.current?.innerHTML||"";if(k.trim()==="/"){c.current&&(c.current.innerHTML=""),m(!1);return}if(c.current?.textContent.trim()===""&&!k.includes("<img"))return;const E={id:Date.now(),content:i,style:l,...l==="todo"&&{checked:!1}};s([...r,E]),a(""),c.current&&(c.current.innerHTML="")}},M=C=>{const k=C.currentTarget.textContent;k.startsWith("/")?(m(!0),x(k.substring(1)),y(0)):m(!1),a(C.currentTarget.innerHTML)},w=(C,k)=>{s(E=>E.map(L=>L.id===C?{...L,content:k}:L))},D=(C,k)=>{s(E=>E.map(L=>L.id===C?{...L,style:k}:L))},I=(C,k)=>{s(E=>E.map(L=>L.id===C?{...L,...k}:L))},z=C=>{const k=r.find(E=>E.id===C);if(k&&k.style==="image"&&k.content)try{const E=dn(un,k.content);qr(E).catch(L=>{console.error("Error deleting image from storage:",L)})}catch(E){console.error("Error creating storage reference from URL:",E)}s(E=>E.filter(L=>L.id!==C))},K=C=>{s(k=>{const E=k.findIndex(_=>_.id===C);if(E===-1)return k;const H={...k[E],id:Date.now()},ee=[...k];return ee.splice(E+1,0,H),ee})},G=C=>{const{active:k,over:E}=C;console.log("active=",k),console.log("over=",E),k.id!==E.id&&s(L=>{const H=L.findIndex(_=>_.id===k.id),ee=L.findIndex(_=>_.id===E.id);return wt(L,H,ee)})},Z=C=>{const k=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,E=C.match(k);return E&&E[2].length===11?E[2]:null},he=C=>{if(C==="image")f.current?.click();else if(C==="divider"){const k={id:Date.now(),style:"divider",content:""};s(E=>[...E,k])}else if(C==="handsontable")b(!0);else if(C==="code"){const k={id:Date.now(),style:"code",language:"javascript",content:""};s(E=>[...E,k])}else if(C==="table"){const k={id:Date.now(),style:"table",content:{rows:[[{text:""},{text:""}],[{text:""},{text:""}]]}};s(E=>[...E,k])}else if(C==="youtube"){const k=prompt("Enter YouTube URL:");if(k){const E=Z(k);if(E){const L={id:Date.now(),style:"youtube",content:E};s(H=>[...H,L])}else alert("Invalid YouTube URL")}}else u(C),c.current?.focus();c.current&&(c.current.innerHTML=""),a(""),m(!1),x("")},ke=C=>{const k={id:Date.now(),style:"handsontable",content:{data:[Array(C.length).fill("")],columns:C,colHeaders:C.map(E=>E.title),rowHeaders:!0,height:"auto",licenseKey:"non-commercial-and-evaluation"}};s(E=>[...E,k]),b(!1)},Y=async C=>{const k=C.target.files[0];if(!k||!e||!t)return;const E=`memo_txt_images/${e.uid}/${t}/${Date.now()}_${k.name}`,L=dn(un,E);try{const H=await Kr(L,k),ee=await Gr(H.ref),_={id:Date.now(),content:ee,style:"image"};s(Re=>[...Re,_])}catch(H){console.error("Image upload failed:",H)}},Ee=n("notion_input_placeholder","Type '/' for commands, or just start writing..."),re={p:"text-base",h1:"text-3xl font-bold my-4",h2:"text-2xl font-bold my-3",code:"font-mono bg-gray-100 dark:bg-zinc-700 p-4 rounded-md text-sm",todo:"flex items-center gap-2 my-1",quote:"border-l-4 border-gray-300 dark:border-zinc-600 pl-4 italic text-gray-500 dark:text-gray-400 my-2",image:"my-4",divider:"my-4",handsontable:"my-4",youtube:"my-4",table:"my-4 w-full"};return o.jsxs("div",{className:`${T.card} mt-1 py-4 border-gray-200 dark:border-zinc-700`,children:[o.jsx(wr,{onDragEnd:G,children:o.jsx(mr,{items:r,strategy:_i,children:o.jsx("div",{className:"mb-4 space-y-2",children:r.map(C=>o.jsx(sa,{id:C.id,block:C,styleClasses:re,onUpdateBlock:I,onUpdate:w,onStyleChange:D,onDelete:z,onDuplicate:K},C.id))})})}),o.jsxs("div",{className:"relative",children:[g&&o.jsx(X.div,{className:"absolute bottom-full mb-2 w-full sm:w-64 bg-white z-180 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 rounded-lg shadow-xl",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.1},children:o.jsxs("div",{className:"p-2",children:[o.jsx("p",{className:"text-xs text-gray-500 px-2 pb-1 font-semibold",children:"BLOCKS"}),N.length>0?N.map((C,k)=>o.jsx("button",{onClick:()=>he(C.command),className:`w-full text-left px-2 py-1.5 rounded text-sm ${k===v?"bg-gray-100 dark:bg-zinc-700":""} hover:bg-gray-100 dark:hover:bg-zinc-700`,children:C.label},C.command)):o.jsx("p",{className:"px-2 py-1.5 text-sm text-gray-500",children:"No results"})]})}),o.jsx("input",{type:"file",ref:f,onChange:Y,accept:"image/*",className:"hidden"}),o.jsx("div",{ref:c,contentEditable:"true",onInput:M,onKeyDown:S,"data-placeholder":Ee,className:`notion-selectable w-full bg-transparent focus:outline-none text-gray-800 dark:text-gray-200 
						min-h-[2.5rem] p-2 border border-transparent focus:border-blue-500 rounded-md
						empty:before:content-[attr(data-placeholder)] empty:before:text-gray-400 empty:before:dark:text-gray-500 empty:before:cursor-text`})]}),o.jsx(qi,{isOpen:p,onClose:()=>b(!1),onCreate:ke})]})},ia=({rootDb:e,memoDetailData:t,onBookmark:n,searchWord:r,onDeleteTab:s})=>{const[i,a]=d.useState(!1),[l,u]=d.useState(!1),{t:c}=Se(),{scrollYProgress:f}=Qs(),g=Zs(f,{stiffness:100,damping:30,restDelta:.001}),m=Pt(),{memoId:h}=Yn(),p=vt()?.state?.fullIndex,{user:b}=_e(),v=Bt(),y=Hn({mutationFn:async()=>{const w=e==="memo"?`${e}_txt/${b.uid}/${h}`:`${e}_txt/${h}`,D=e==="memo"?`${e}_tree/${b.uid}/${h}`:`${e}/${h}`;return await so(w,D)},onSuccess:()=>{v.invalidateQueries({queryKey:["twTreeData",e]}),s&&s(h),m(`/${e==="memo"?"m":e}`)},onError:w=>{console.error("삭제 중 오류 발생:",w)}}),j=()=>{const w=`/${e==="memo"?"m":e}/edit/${h}`;m(w,{state:{fullIndex:p}})},R=()=>{const w=`/${e==="memo"?"m":e}/util/${h}`;m(w,{state:{fullIndex:p}})},N=()=>{const w=`/${e==="memo"?"m":e}/insert/${h}`;m(w,{state:{fullIndex:p}})},S=()=>{a(!0)},M=()=>{a(!1),y.mutate()};return d.useEffect(()=>{function w(){const D=t.scrollY?t.scrollY:0;window.scrollTo({top:D}),t&&t.html!=="N"&&document.querySelectorAll("pre").forEach(I=>{I.innerHTML=xs(I.innerHTML)})}t&&t.memo!==null&&(w(),t.image&&t.image.map((D,I)=>D))},[t]),h===""||b===void 0?o.jsx(o.Fragment,{}):o.jsxs("div",{className:"py-2",children:[o.jsx(X.div,{className:"progress-bar",style:{scaleX:g}}),o.jsxs("div",{className:"overflow-hidden ",children:[o.jsxs("div",{className:"p-2 sm:p-4",children:[o.jsxs("div",{className:T.between,children:[o.jsxs("p",{className:`${T.truncate} ${T.textXs} ${T.textGray500DarkZinc400}`,children:[o.jsx(Dt,{to:e==="memo"?"/m":"/hmoe",className:`${T.navLinkHoverText}`,children:e==="memo"?"MEMO":"HOME"}),t?.path?.map((w,D)=>t.path.length===D+1?` > ${w?.title}`:o.jsxs(O.Fragment,{children:[" "," > ",o.jsx(Dt,{to:e==="memo"?`/m/${w.id}`:`/home/${w.id}`,className:`${T.navLinkHoverText}`,children:w?.title})]},D))]}),o.jsx(X.button,{whileTap:{scale:.8},className:`${T.flexShrink0} ${T.roundedFull} p-2 ${T.buttonHoverGrayLight}`,"aria-label":c("bookmark"),onClick:n,children:t?.bookmark==="Y"?o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`${T.h5W5} ${T.textRed500}`,fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}):o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`${T.h5W5} ${T.textGray500}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})})]}),o.jsx("button",{onClick:()=>u(!l),className:`text-left ${T.heading2XlBoldSm3Xl} ${T.textGray900}`,children:t?.title})]}),!l&&o.jsx("div",{className:`${T.line}`}),o.jsx(X.div,{initial:!1,animate:{height:l?"auto":0,opacity:l?1:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:o.jsx("div",{className:`${T.line}`,children:o.jsx(bn,{master:b?.uid===Lt,rootDb:e,onEdit:j,onUtil:R,onNewMemo:N,onDelete:S})})}),t&&t.html==="sheet"&&o.jsx(ys,{rootDb:e,detailData:t}),o.jsxs("div",{className:t?.memo?.length>0?"p-2 sm:p-4":"p-1",children:[t&&t.html!=="sheet"?t?.html==="N"?o.jsx(ps,{postData:t?.memo,highlightWord:r}):t?.html!=="N"&&t?.memo&&o.jsx(Ur,{text:t.memo}):"",o.jsx(vs,{imageList:t?.image}),!t&&o.jsx("div",{className:"flex justify-center py-12",children:o.jsx("div",{className:`${T.flexCenter} py-12`})})]})]}),o.jsx(oa,{}),o.jsx(X.div,{initial:!1,animate:{height:l?"auto":0,opacity:l?1:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:o.jsx("div",{className:`${T.line}`,children:o.jsx(bn,{master:b?.uid===Lt,rootDb:e,onEdit:j,onUtil:R,onNewMemo:N,onDelete:S})})}),o.jsx(Qr,{isOpen:i,size:"sm",color:"warning",title:c("delete_confirm_title"),message:c("delete_confirm_message"),onClose:()=>a(!1),onConfirm:M})]})},aa=({rootDb:e})=>{const{user:t}=_e(),{t:n}=Se(),r=n(e==="memo"?"appMemo":"home_mng"),s=o.jsx("div",{className:"text-center",children:o.jsx("h1",{className:`text-3xl font-bold ${T.textIndigo}`,children:r})});return o.jsx(o.Fragment,{children:o.jsx(gs,{title:s,className:"my-5",children:o.jsxs("div",{className:"grid gird-cols-1 md:grid-cols-5 items-center gap-3",children:[t===null?o.jsx("p",{className:`${T.textRed500} ${T.textLgFontSemiboldLeft} ${T.mdColSpan3}`,children:n("login_used")}):o.jsx("p",{className:`${T.textGray600DarkZinc400} text-left ${T.mdColSpan3}`,dangerouslySetInnerHTML:{__html:n("memo_main_guide").replace(`
`,"<br/>")}}),o.jsx("div",{className:`w-full ${T.flexCenter} md:col-span-2`,children:o.jsx(ws,{})})]})})})},la=O.lazy(()=>Ne(()=>import("./MemoSheet-J6l1Rgnk.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]))),ca=O.lazy(()=>Ne(()=>import("./MemoSheetGrid-M_5d5nsM.js"),__vite__mapDeps([23,1,2,3,19,8,9,4,10,11,12,13,14]))),$n=O.lazy(()=>Ne(()=>import("./MemoDetailEdit-BLft-LKC.js"),__vite__mapDeps([24,1,2,25,26,27,11,28,29,8,9,4,10,12,13,14,30,31,32,33,34,35,36,37,5,6,7,15,16,17,18,19,20,21,38,22]))),da=O.lazy(()=>Ne(()=>import("./TwMemoDetailUtil-l-minD78.js"),__vite__mapDeps([39,1,2,29,5,8,9,4,10,11,12,13,14,25,26,27,6,7,15,16,17,18,19,20,21,22]))),ua=O.lazy(()=>Ne(()=>import("./index-D7hKsLfU.js").then(e=>e.eW),__vite__mapDeps([1,2]))),fa=O.lazy(()=>Ne(()=>import("./HomeChartVisitors-Q2PcKSLt.js"),__vite__mapDeps([40,1,2,4]))),ha=O.lazy(()=>Ne(()=>import("./MemoBookMark-YOjn_5-5.js"),__vite__mapDeps([41,1,2,4,42])).then(e=>({default:e.MemoBookMark}))),zn=()=>o.jsxs("div",{className:`w-full ${T.card} relative overflow-hidden p-4`,children:[o.jsxs("div",{className:"animate-pulse",children:[o.jsx("div",{className:"h-6 bg-gray-300 dark:bg-zinc-700 rounded-md w-3/4"}),o.jsx("div",{className:"mt-4 h-4 bg-gray-300 dark:bg-zinc-700 rounded-md w-1/2"})]}),o.jsx("div",{className:`${T.line} my-4`}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-3 animate-pulse",children:[o.jsx("div",{className:"h-4 bg-gray-300 dark:bg-zinc-700 rounded w-full",style:{animationDelay:"0.1s"}}),o.jsx("div",{className:"h-4 bg-gray-300 dark:bg-zinc-700 rounded w-5/6",style:{animationDelay:"0.2s"}}),o.jsx("div",{className:"h-4 bg-gray-300 dark:bg-zinc-700 rounded w-full",style:{animationDelay:"0.3s"}})]}),o.jsx("br",{}),o.jsxs("div",{className:"space-y-3 animate-pulse",children:[o.jsx("div",{className:"h-4 bg-gray-300 dark:bg-zinc-700 rounded w-full",style:{animationDelay:"0.4s"}}),o.jsx("div",{className:"h-4 bg-gray-300 dark:bg-zinc-700 rounded w-4/6",style:{animationDelay:"0.5s"}})]}),o.jsx("div",{className:"space-y-3 animate-pulse pt-4",children:o.jsx("div",{className:"h-4 bg-gray-300 dark:bg-zinc-700 rounded w-full",style:{animationDelay:"0.6s"}})})]})]}),ga=({rootDb:e,ui:t,user:n,memoId:r,memoDetailData:s,isLoading:i,onBookmark:a,handleCloseTab:l})=>{const u=vt();return o.jsxs(d.Suspense,{fallback:o.jsx(zn,{}),children:[o.jsx(Wt,{mode:"wait",children:o.jsxs(Jr,{location:u,children:[o.jsx(je,{path:"todo",element:o.jsx(X.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:o.jsx(ua,{})})}),o.jsx(je,{path:"sheet/:sheetId?",element:o.jsx(X.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:o.jsx(ca,{detailData:s})})}),o.jsx(je,{path:"edit/:memoId",element:o.jsx(X.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:o.jsx($n,{rootDb:e,isLoading:i,memoDetailData:s,ui:t})})}),o.jsx(je,{path:"insert/:memoId",element:o.jsx(X.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:o.jsx($n,{rootDb:e,isLoading:i,memoDetailData:s,ui:t})})}),o.jsx(je,{path:"util/:memoId",element:o.jsx(X.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:o.jsx(da,{rootDb:e,isLoading:i,memoDetailData:s})})}),o.jsx(je,{path:":memoId",element:o.jsx(o.Fragment,{children:i?o.jsx(zn,{}):o.jsx(ia,{rootDb:e,memoDetailData:s,onBookmark:a,onDeleteTab:()=>l(null,{id:r})})})}),o.jsx(je,{path:"*",element:o.jsx(X.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:o.jsx(aa,{rootDb:e,ui:t})})})]},u.pathname)}),(e==="memo"||e==="sheet")&&n===null?null:o.jsx(la,{}),(e==="memo"||e==="sheet")&&o.jsx(ha,{ui:t}),(r===""||r==="m")&&n?.uid===Lt&&o.jsxs(o.Fragment,{children:[o.jsx(fa,{}),o.jsx("div",{className:`mt-5 ${T.card}`,children:o.jsx(ro,{rootDb:e})})]})]})},ma=e=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...e,children:o.jsx("path",{fillRule:"evenodd",d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zM6 20V4h7v5h5v11H6zM8 12h3v3H8v-3zm0 4h3v3H8v-3zm4-4h3v3h-3v-3zm0 4h3v3h-3v-3z",clipRule:"evenodd"})}),pa=({tabInfo:e,handleCloseTab:t,isActive:n})=>{const{t:r}=Se(),{user:s}=_e(),{attributes:i,listeners:a,setNodeRef:l,transform:u,transition:c,isDragging:f}=vr({id:e.id}),g={transform:Oe.Transform?.toString(u),transition:c,zIndex:f?1:"auto"},{data:m}=Fn({queryKey:["tabTitle",e.rootDb,s?.uid,e.id],queryFn:async()=>e.rootDb==="sheet"?await le(`memo_sheet/${s?.uid}/${e.id}/title`):e.rootDb==="memo"?await le(`${e.rootDb}_txt/${s?.uid}/${e.id}/title`):e.rootDb==="home"?await le(`${e.rootDb}_txt/${e.id}/title`):e.title,enabled:!!s&&!!e.id,staleTime:1/0,placeholderData:e.title});return o.jsxs(Dt,{ref:l,style:g,...i,...a,"data-tab-id":e.id,to:e.path,title:m,end:!0,className:({isActive:h})=>`group relative flex flex-shrink-0 items-center pl-3 pr-2 py-1.5 text-sm rounded-t-md transition-colors duration-200 min-w-28 max-w-48 border-b-2
				${h?"bg-gray-200 dark:bg-zinc-700 border-blue-500 text-gray-800 dark:text-gray-100":"border-transparent text-gray-500 dark:text-gray-400 hover:bg-gray-200/70 dark:hover:bg-zinc-700/70"}
				${f?"opacity-50 shadow-lg":""}`,children:[e.rootDb==="memo"?o.jsx(Zr,{className:`w-5 h-5 mr-1 flex-shrink-0 transition-transform duration-200 ${n?"scale-110":""}`,fill:"currentColor"}):e.rootDb==="sheet"?o.jsx(ma,{className:`w-5 h-5 mr-1 flex-shrink-0 transition-transform duration-200 ${n?"scale-110":""}`}):null,o.jsx("span",{className:"truncate pr-1",style:{fontFamily:"sans-serif"},children:m||r("loading")}),o.jsx("button",{onClick:h=>t(h,e),className:`ml-auto flex-shrink-0 p-1 rounded-full transition-opacity duration-200 opacity-0 group-hover:opacity-100
					text-gray-500 dark:text-gray-400 
					hover:bg-gray-300/50 dark:hover:bg-gray-600/50 hover:text-gray-700 dark:hover:text-white
				`,children:o.jsx(Xn,{className:"w-3 h-3"})})]})},va=({openTabs:e,setOpenTabs:t,handleCloseTab:n,handleCloseAllTabs:r,activeId:s})=>{const i=d.useRef(null),[a,l]=d.useState({left:!1,right:!1}),[u,c]=d.useState({left:0,width:0}),f=d.useCallback(()=>{const h=i.current;if(h){const x=h.scrollWidth>h.clientWidth,p=h.scrollLeft===0,b=h.scrollLeft+h.clientWidth>=h.scrollWidth-1;l(v=>{const y={left:x&&!p,right:x&&!b};return v.left===y.left&&v.right===y.right?v:y})}},[]),g=h=>{i.current?.scrollBy({left:h==="left"?-200:200,behavior:"smooth"})},m=h=>{const{active:x,over:p}=h;console.log("active=",x,"over=",p),x.id!==p.id&&t(b=>{const v=b.findIndex(j=>j.id===x.id),y=b.findIndex(j=>j.id===p.id);return wt(b,v,y)})};return d.useEffect(()=>{f();const h=i.current;return h?.addEventListener("scroll",f),window.addEventListener("resize",f),()=>{h?.removeEventListener("scroll",f),window.removeEventListener("resize",f)}},[e,f]),d.useEffect(()=>{const h=setTimeout(()=>{const x=i.current?.querySelector(`[data-tab-id="${s}"]`);if(x){const{offsetLeft:p,offsetWidth:b}=x;c({left:p,width:b})}},0);return()=>clearTimeout(h)},[s,e]),o.jsxs("div",{className:"relative flex items-center justify-between ",children:[a.left&&o.jsx("button",{onClick:()=>g("left"),className:"absolute left-0 z-10 p-1 border border-gray-200 dark:border-gray-700 text-gray-500 dark:text-gray-400 bg-white dark:bg-zinc-900 dark:hover:!text-white hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full group",children:o.jsx(Cs,{className:"w-5 h-5 fill-current"})}),o.jsx(wr,{id:"memo-tabs",onDragEnd:m,children:o.jsx("div",{ref:i,className:"MemoTabs relative flex items-center overflow-x-scroll scrollbar-hide whitespace-nowrap",children:o.jsx(mr,{items:e.map(h=>h.id),strategy:Ii,children:o.jsx(Wt,{children:e.map(h=>o.jsx(X.div,{layout:!0,initial:{opacity:0,scale:.8},transition:{type:"spring",stiffness:350,damping:30},animate:{opacity:1,scale:1},exit:{opacity:0,width:0,paddingLeft:0,paddingRight:0,transition:{duration:.3}},children:o.jsx(pa,{tabInfo:h,handleCloseTab:n,isActive:h.id===s})},h.id))})})})}),o.jsxs("div",{className:"flex items-center",children:[a.right&&o.jsx("button",{onClick:()=>g("right"),className:"z-10 p-1 border border-gray-200 dark:border-gray-700 text-gray-500 dark:text-gray-400 bg-white dark:bg-zinc-900 dark:hover:!text-white hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full group",children:o.jsx(js,{className:"w-5 h-5 fill-current"})}),e.length>0&&o.jsx("button",{onClick:r,className:"ml-2 mr-2 p-1.5 text-gray-500 dark:text-gray-400 hover:text-gray-800 dark:hover:text-white hover:bg-gray-200 dark:hover:bg-gray-700 rounded-md",title:"Close all tabs",children:o.jsx(Xn,{className:"w-4 h-4"})})]})]})};function xa(e,t,n,r,s){const i=n?.uid,[a,l]=d.useState(()=>{try{const x=localStorage.getItem(`openTabs_${i}`);return x?JSON.parse(x):[]}catch(x){return console.error("Failed to parse openTabs from localStorage",x),[]}}),u=d.useRef(),c=vt(),f=Pt(),g=d.useCallback(async x=>{if(e&&r&&r!=="insert"&&c.pathname!=="/m"&&c.pathname!=="/home"){const p={id:r,path:c.pathname,icon:null,rootDb:t,title:x?.title};if(c.pathname.startsWith("/m/sheet/")){const b=await le(`memo_sheet/${n?.uid}/${r}/title`);p.title=b}else r==="sheet"&&(p.title="Main Sheet");!a.some(b=>b.id===p.id)&&u.current!==r?(u.current=r,l(b=>[...b,p])):(u.current="",l(b=>b.map(v=>v.id===p.id?{...v,title:p.title||v.title}:v)))}},[s,e]);d.useEffect(()=>{s&&g(s)},[s,e]),d.useEffect(()=>{if(i)try{localStorage.setItem(`openTabs_${i}`,JSON.stringify(a))}catch(x){console.error("Failed to save openTabs to localStorage",x)}},[a,i]);const m=d.useCallback((x,p)=>{x?.preventDefault(),x?.stopPropagation(),u.current="";const b=a.findIndex(y=>y.id===p.id),v=a.filter(y=>y.id!==p.id);if(l(v),c.pathname.includes(p.id)){const y=v.length>0?v[Math.max(0,b-1)].path:`/${t==="memo"||t==="sheet"?"m":t}`;f(y,{relative:"path"})}},[a,c.pathname,t,f]),h=d.useCallback(()=>{u.current="",l([]),f(`/${t==="memo"||t==="sheet"?"m":t}`)},[t,f]);return{openTabs:a,setOpenTabs:l,handleCloseTab:m,handleCloseAllTabs:h}}const ba=()=>{const e=Pt(),{user:t}=_e(),n=es(ts),[r,s]=d.useState(!1),i=d.useRef(0),a=vt(),{rootDb:l,memoId:u}=d.useMemo(()=>{const S=a.pathname,M=S.startsWith("/m/sheet")?"sheet":S.startsWith("/m")?"memo":S.startsWith("/home")?"home":S.startsWith("/bible")?"bible":"default",w=S.split("/").pop()||"";return{rootDb:M,memoId:w}},[a.pathname]),c=a?.state?.reflash===!0,f=Bt(),{ui:g}=ns(),[m,h]=Wn(rs),{memoDetailData:x,isLoading:p,onBookmark:b}=to(l,t,u,h),{openTabs:v,setOpenTabs:y,handleCloseTab:j,handleCloseAllTabs:R}=xa(n,l,t,u,x);d.useEffect(()=>{c&&f.invalidateQueries({queryKey:["memoDetail",l,t?.uid,u]})},[c,a.pathname,f,l,t?.uid,u]);const N=d.useCallback(()=>{const S=window.pageYOffset||document.documentElement.scrollTop;s(S>i.current),i.current=S<=0?0:S},[]);return d.useEffect(()=>{const S=()=>{const M=window.pageYOffset||document.documentElement.scrollTop;M>i.current?s(!1):s(!0),i.current=M<=0?0:M};return window.addEventListener("scroll",S),()=>{window.removeEventListener("scroll",S)}},[N]),d.useEffect(()=>{t===null&&a.pathname!=="/m"&&e("/m")},[t]),o.jsxs(o.Fragment,{children:[n&&o.jsx("div",{className:`sticky ${r?"top-18":"top-1"} z-1000 rounded-t-md bg-gray-50/70 dark:bg-zinc-800/70 backdrop-blur-sm shadow-sm`,children:o.jsx(va,{openTabs:v,setOpenTabs:y,handleCloseTab:j,handleCloseAllTabs:R,activeId:u})}),o.jsx(ga,{rootDb:l,ui:g,user:t,memoId:u,memoDetailData:x,isLoading:p,onBookmark:b,handleCloseTab:j})]})},Aa=Object.freeze(Object.defineProperty({__proto__:null,default:ba},Symbol.toStringTag,{value:"Module"}));export{br as M,xr as T,yr as a,Zs as b,za as c,Aa as d,$a as f,La as s,Qs as u};
