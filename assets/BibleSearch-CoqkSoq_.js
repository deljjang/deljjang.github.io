import{f as m,h as d,r as o,i as h,j as t,L as b,t as f,a as g,p as c}from"./index-CyozgB4c.js";import{T as p}from"./TitleItem-DPMGYYvN.js";import u from"./bible-7rshX_PU.js";/* empty css                   */import{T as x}from"./TwSearchBox-nHg7Z4An.js";import{G as i}from"./Grid-DyTBhOVV.js";import"./TwBadge-BAlYFcoQ.js";const j=r=>{if(!(r.bibleList===void 0||r.bibleList===null))return r.bibleList.map((e,n)=>{const a=e.id.split("_"),s=`${a[0]}_${a[1]}_${a[2]}`;return t.jsxs(i,{container:!0,spacing:2,columns:{xs:5,sm:6,md:10,lg:12},children:[t.jsx(i,{item:!0,xs:1,md:1,children:e.nm}),t.jsx(i,{item:!0,xs:4,sm:5,md:9,lg:11,children:t.jsxs(g,{to:`/bible/${s}`,state:{cd4:e.cd4,word:r.word},children:[t.jsx(c,{show:!0,text:e.ko}),t.jsx("div",{className:"text-sm text-red-600 dark:text-gray-700",children:t.jsx(c,{show:!0,text:e.en})})]})})]},n)})},L=(r,e)=>{if(r==="")return alert(e("search_word_required")),[];const n=new Array;for(let a in u){let s={...u[a]};if(s.ko.match(r)||s.en&&s.en.match(r)){const l=new RegExp(r,"gi");s.ko=s.ko.replace(l,`<span class='lightext'>${r}</span>`),s.en=s.en.replace(l,`<span class='lightext'>${r}</span>`),n.push(s)}}return n},w=()=>{const e=m().state,{t:n}=d(),a=o.useRef(e===null?"":e.s),s=h({queryKey:["getBibleData",e&&e?.s?e.s:""],queryFn:()=>L(e?.s,n)});return o.useEffect(()=>{a.current=e===null?"":e.s,s.refetch()},[e]),s.isLoading?t.jsxs(t.Fragment,{children:[t.jsx(x,{state:e,gubun:"bible"}),t.jsx(b,{})]}):s.error?t.jsxs("div",{children:[n("error_prefix"),s.error.message]}):t.jsxs("div",{children:[t.jsx(x,{state:e,gubun:"bible"}),t.jsxs(p,{children:[n("search_result_prefix"),f(s.data?s.data?.length:"0")]}),t.jsx(j,{bibleList:s.data,word:a.current})]})};export{w as BibleSearch,w as default};
