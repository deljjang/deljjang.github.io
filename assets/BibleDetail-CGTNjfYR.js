import{b,H as L,x as G,d as H,I as J,j as e,R as M,C as P,B as j,K as Y,A as q,k as B,M as K,G as U,N as V,J as W}from"./index-BxpGGms0.js";import{u as z,B as O}from"./BibleBookmarkText-Bq5yhxcq.js";import{A as C}from"./AniButton-BGEvcXWV.js";import{H as Q}from"./HtmlText-fr7bOlLJ.js";import{T as X}from"./TitleItem-DN76Z01k.js";import{b as A}from"./bibleTxt-CDg_iih8.js";/* empty css                   */import{G as f}from"./Grid-D6vJG72p.js";import"./Button-DVowsEE8.js";import"./index-BaRFHk8r.js";/* empty css                   */const Z=n=>{const{t:u}=q(),h=new Array;if(n.data===void 0||n.data===null)return;const r=n.bibleId.split("_");for(let o=1;o<=n.data.cd3;o++){const d={nm:`${n.data.nm2}${o}${u("chapter")}`,key:n.data.id+"_"+o};h.push(d)}return r&&r.length===3?e.jsxs(B,{variant:"h6",sx:{display:"flex",alignItems:"center",flexDirection:"column",mb:4},children:[n.nm," ",r[2]," ",u("chapter")]}):e.jsxs(e.Fragment,{children:[e.jsx(B,{variant:"h6",sx:{display:"flex",alignItems:"center",flexDirection:"column",mb:4},children:n.nm}),e.jsx(f,{container:!0,spacing:2,columns:{xs:4,sm:6,md:10,lg:12},children:h.map((o,d)=>e.jsx(f,{item:!0,xs:1,md:1,children:e.jsx(K,{to:`/bible/${o.key}`,children:o.nm})},d))})]})},tt=n=>{const u=n.dataText;if(n.data===void 0||n.data===null||u==null)return;const h=n.bibleId.split("_");return n.bibleId&&h.length!==3?e.jsx(e.Fragment,{}):e.jsxs(e.Fragment,{children:[e.jsx(B,{variant:"h6",sx:{display:"flex",alignItems:"center",flexDirection:"column",mb:4},children:n.nm}),u.map((r,o)=>{let d="text.primary";n.cd4+""===r.cd4&&(d="warning.main");const i=n.bookmark?.data?.filter(s=>s.cd1===r.cd1&&s.cd2===r.cd2&&s.cd3===r.cd3&&s.cd4===r.cd4&&s.bookmark==="Y");return i&&i.length>0&&(r.bookmark="Y"),e.jsxs(f,{container:!0,spacing:2,columns:{xs:5,sm:6,md:10,lg:12},id:`id_${o+1}`,children:[e.jsx(f,{item:!0,xs:1,md:1,children:e.jsxs(j,{sx:{color:d,display:"flex"},children:[e.jsx(U,{sx:{alignItems:"center",textAlign:"top"},onClick:()=>n.onBookmark(r),children:r.nm}),i&&i.length>0&&e.jsx(V,{sx:{color:"red"}})]})}),e.jsx(f,{item:!0,xs:4,sm:5,md:9,lg:11,children:e.jsx(j,{sx:{color:d},children:e.jsx(Q,{text:r.text})})})]},o)})]})},mt=()=>{const[n,u]=b.useState(null),[h,r]=b.useState(!0),{query:o,setBibleBookmark:d}=z(),i=b.useRef(),{bibleId:s}=L(),y=G(),[T,I]=b.useState(!1),[$,_]=b.useState(!1),{user:D}=H(),k=y?.state?.word,g=y?.state?.cd4,F=J();b.useEffect(()=>{if(s!==void 0){(async()=>{const l=await R(s,k);u(l),r(!1)})(),I(!1),_(!0);const a=s.split("_");if(i.current&&a.length===3){const l=i.current.cd3;I(Number(a[2])!==1),_(a[2]<l)}}},[s,k]),b.useEffect(()=>{g!==void 0&&setTimeout(()=>{E("","id_"+g)},1500)},[n,g]);const E=(c,a)=>{const l=document.getElementById(a);l&&l.scrollIntoView({block:"center",behavior:"smooth"})},N=c=>{D!==void 0&&d(c)},R=async(c,a)=>{if(c===""||c===void 0)return"";const l=c.split("_");if(l.length<1)return;l.length>1&&W.map(m=>{m.id===l[0]+"_"+l[1]&&(i.current=m)});const p=new Array;if(l.length===3){for(let m in A){if(!m.includes(c+"_"))continue;let x=A[m];x.id=m;let v=x.txt;if(a!==void 0){const S=new RegExp(a,"gi");v=v.replace(S,`<span class='lightext'>${a}</span>`)}x.nm=`${i.current.nm2}${l[2]}:${x.cd4}`,x.text=v,p.push(x)}return p.sort((m,x)=>m.cd4-x.cd4),p}};if(s==="")return e.jsx(e.Fragment,{});const w=c=>{let a=s.split("_");a[2]=Number(a[2])+c,F(`/bible/${a[0]}_${a[1]}_${a[2]}`)};return e.jsxs(M.Fragment,{children:[e.jsx("div",{id:"back-to-top-anchor"}),e.jsx(O,{}),e.jsx(X,{children:i.current!==null&&i.current!==void 0&&i.current.nm!==null?i.current.text:""}),e.jsx(Z,{data:i.current,bibleId:s}),e.jsx(tt,{dataText:n,data:i.current,searchWord:k,bibleId:s,cd4:g,bookmark:o,onBookmark:N}),e.jsxs(P,{sx:{p:0},children:[h&&e.jsx(j,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:e.jsx(Y,{sx:{mt:5}})}),s&&s.split("_").length===3?e.jsx(j,{sx:{display:"flex",justifyContent:"space-between",mt:5},children:e.jsxs(f,{container:!0,spacing:1,children:[T?e.jsx(f,{item:!0,xs:$?6:12,children:e.jsx(C,{type:"button",variant:"outlined",onClick:()=>w(-1),fullWidth:!0,children:`< ${t("prev")}`})}):"",$?e.jsx(f,{item:!0,xs:T?6:12,children:e.jsx(C,{type:"button",variant:"outlined",onClick:()=>w(1),fullWidth:!0,children:`${t("next")} >`})}):""]})}):""]})]})};export{mt as BibleDetail,mt as default};
