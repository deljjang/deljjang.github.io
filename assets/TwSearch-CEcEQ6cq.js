import{j as e,t as u,i as D,c as L,r as s,aL as b,R as M,w}from"./index-C4z9J2Ef.js";import{T as R}from"./Footer-DyBAakON.js";import{L as a}from"./Loading-gih7BK9G.js";import{u as E}from"./useQuery-DG7oi9TD.js";import{b as I,T as q}from"./TailList-bUsH4uC1.js";import v from"./TwDetail-_GFIkSow.js";import{f as F}from"./fireMemoDetail-CgIgL1Pp.js";import{T as k}from"./TwSearchBox-C3A_aZWj.js";import"./LinkItem-DL7pXYMS.js";import"./Typography-DXs1x-fk.js";import"./TwLinkItem-COen50pY.js";import"./Divider-Bu7aYtBY.js";import"./dividerClasses-msxjNmdb.js";import"./Link-B6uLBbSu.js";import"./Container-DY130CHK.js";import"./styled-vX66gXit.js";import"./CircularProgress-DCWyGW4B.js";import"./useBaseQuery-B9YwAEs5.js";import"./HtmlCode-JJvfx6ZI.js";import"./copy-Bx70zRiv.js";import"./TwBadge-DuJNy4w_.js";import"./toPropertyKey-DCwh5dYN.js";import"./SinyImageList-z8f-SZbA.js";import"./index-Chjiymov.js";import"./ImageListItem-BHnb0enP.js";import"./isMuiElement-BY2WwkrE.js";import"./ComponentCard-Cadul57N.js";import"./CodeText-Kh0dUOvx.js";import"./commonUtil-DUqhD9Cj.js";import"./AniButton-CwptjzB-.js";import"./Button-xxZ7_Yo2.js";import"./fireDatabase-DQOw8NBI.js";import"./fireStorage-BM_j1mhi.js";const C=({uid:o,state:t})=>{const r=E({queryKey:["blogMainSearch",t&&t?.s?t.s:""],queryFn:()=>I(t?.s,o===u?u:"")});return r.isLoading?e.jsx(a,{}):r.error?e.jsxs("div",{children:["Error: ",r.error.message]}):e.jsx(q,{query:r,index:"1",s:t&&t?.s?t.s:"",sx:{mt:2}})};function ft(){const o=D(),t=o.state;console.log("TailSearch.state=",t);const{user:r}=L(),d=s.useRef(t===null?"":t.s),[m,f]=s.useState(),[x]=b(),h=x.get("g"),[j,g]=s.useState(),[S,c]=s.useState(!0),l=h==="h"?"home":"memo";return s.useEffect(()=>{const T=async p=>{if(p!==""){const y=await F(l,r?.uid,p,d.current);g(y),c(!1)}};c(!0);const n=o.pathname.split("/"),i=n.length>2?n[n.length-1]:"";f(i),i!=null&&i!=="search"&&T(i)},[o.pathname]),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",alignContent:"center",justifyContent:"center"},children:[e.jsxs(s.Suspense,{fallback:e.jsx(a,{}),children:[e.jsx(M,{children:e.jsx(w,{path:"/:memoId",element:e.jsx(v,{rootDb:l,isLoading:S,memoDetailData:j})})}),m==="search"?e.jsx(k,{state:t,gubun:"tw"}):"",r===null?e.jsx(a,{}):m==="search"&&t!==null&&t?.s!==""&&e.jsx(s.Suspense,{fallback:e.jsx(a,{}),children:e.jsx(C,{index:"1",uid:r?.uid,state:t})})]}),e.jsx(R,{})]})}export{ft as default};
