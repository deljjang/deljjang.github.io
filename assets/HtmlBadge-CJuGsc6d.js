import{j as e}from"./index-Brzv_azi.js";import{bY as R,b as L,q as I,bZ as B,h as k,ak as j}from"./App-Cv3KQKEX.js";import{r as l}from"./router-v4BRDFYV.js";const U=s=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:e.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"})}),S=s=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:e.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})}),z=s=>{const{control:a}=s;R({control:a,name:"content"});const{t:c}=L(),[g,o]=l.useState(!1),[d]=l.useState(!1),[u,f]=l.useState([]),[y,i]=l.useState(s.imageList),r=l.useRef(0);l.useEffect(()=>{f([])},[]);const n=l.useCallback(t=>{t.preventDefault(),t.dataTransfer?.files&&o(!0)},[]),h=l.useCallback(t=>{t.preventDefault(),o(!1)},[]),v=l.useCallback(t=>{let m=[],x=u;t.type==="drop"?m=t.dataTransfer.files:m=t.target.files;for(const N of m){const D=URL.createObjectURL(N);x=[...x,{id:r.current++,object:N,url:D}]}s.onFileUpload(x),f(x)},[u,s]),C=l.useCallback(t=>{i(t),s.onDelete(t)},[s]),p=t=>{s.onInsert(t)},w=t=>s.onRename(t),b=l.useCallback(t=>{const m=u.filter(x=>x.id!==t);s.onFileUpload(m),f(m)},[u,s]),F=l.useCallback(t=>{t.preventDefault(),t.stopPropagation(),o(!1),v(t)},[v]);return e.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[e.jsx("div",{children:e.jsxs("div",{variant:"outlined",onDragOver:n,onDragLeave:h,onDrop:F,className:`relative mb-2.5 cursor-pointer p-1.5 text-center ${g?"border-red-500 bg-gray-100 dark:bg-gray-800":"border-gray-400"}`,style:{borderStyle:"dashed",borderWidth:"1px"},children:[e.jsx("input",{type:"file",id:"fileUpload",className:"hidden",multiple:!0,onChange:v}),e.jsx("label",{htmlFor:"fileUpload",children:e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx("span",{className:"inline-flex items-center justify-center p-2 text-blue-500",children:e.jsx(U,{className:"size-10"})}),e.jsx("p",{children:c("file_upload")})]})}),d&&e.jsx("div",{className:"absolute top-1/2 left-1/2 -mt-3 -ml-3",children:e.jsx("div",{className:"w-6 h-6 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})})]})}),e.jsx(T,{imgList:y,onInsert:p,onRename:w,onClick:C}),u.length>0&&u.map((t,m)=>{const{id:x,object:{name:N},url:D}=t;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-row items-center justify-between",children:[e.jsx("img",{src:D,alt:N,className:"w-[50px]"}),e.jsx("div",{children:N}),e.jsx("button",{type:"button","aria-label":"delete",onClick:()=>b(x),children:e.jsx(S,{className:"text-red-500"})})]},m),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 my-1"})]},m)})]})},T=s=>{const[a,c]=l.useState(s.imgList),{t:g}=L(),[o,d]=l.useState(""),u=i=>(a.map(r=>{if(r.key===i)return s.onInsert(r),!1}),!1),f=i=>(d(i),a.map(r=>{if(r.key===i)return s.onRename(r).then(h=>{h&&(r.key=h.key,r.name=h.name,c([...a]),d(""))}),!1}),!1),y=i=>{const r=a.map(n=>(n.key===i&&(n.del="Y"),n));c(r),s.onClick(r)};return a&&a.length>0&&a.map((i,r)=>{const{key:n,name:h,url:v,del:C,ext:p}=i,w=/(jpg|jpeg|png|gif|bmp|webp|svg)/i;return C!==void 0?"":e.jsxs("div",{children:[e.jsxs("div",{className:`${I.between} gap-1`,children:[p==="mp4"&&e.jsx("p",{className:"w-[50px] text-center text-sm",children:p}),w.test(p)&&e.jsx("img",{src:v,alt:h,className:"max-h-12 max-w-12"}),e.jsxs("div",{className:"flex truncate items-center",children:[o===n&&e.jsx(B,{}),e.jsx("p",{className:"truncate",children:h})]}),e.jsxs("div",{className:"flex",children:[v&&e.jsxs("div",{className:"gap-3",children:[e.jsx(k,{onClick:b=>{b.preventDefault(),f(n)},children:g("edit")}),e.jsx(k,{onClick:b=>{b.preventDefault(),u(n)},children:g("add")})]}),e.jsx("button",{type:"button","aria-label":"delete",onClick:()=>y(n),className:"p-2",children:e.jsx(S,{className:"text-red-700"})})]})]}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 my-1"})]},r)})},$=({onSubmit:s,onCancel:a,isSubmitting:c,newMode:g=!1})=>{const{t:o}=L();return e.jsxs("div",{className:"flex justify-end mb-1.5 gap-1",children:[e.jsx(k,{variant:"outlined",color:"success",disabled:c,isLoading:c,onClick:d=>{d.preventDefault(),s(d)},children:o(g?"new":"save")}),e.jsx(k,{variant:"outlined",color:"error",onClick:d=>{d.preventDefault(),a()},children:o("cancel")})]})},H=["React","JavaScript","Bash","Html","CSS","SQL","Java","Kotlin","C++","C#","Command","Script","Python","Ruby","Go","Swift","Rust"];function J({onClick:s}){return e.jsxs("div",{className:"grid grid-cols-4 gap-2 xsm:grid-cols-5 sm:grid-cols-7 md:grid-cols-7 lg:grid-cols-8",children:[e.jsx(j,{className:"cursor-pointer",variant:"light",color:"success",onClick:()=>s(`<box>
</box>`),children:"<Box>"}),e.jsx(j,{className:"cursor-pointer",variant:"light",color:"success",onClick:()=>s(`<a href="/data/memo/" target="_blank" class="ahover">
</a>`),children:"Link"}),e.jsx(j,{className:"cursor-pointer",variant:"light",color:"success",onClick:()=>s('<img src="/data/memo/"></img>'),children:"image"}),e.jsx(j,{className:"cursor-pointer",variant:"light",color:"success",onClick:()=>s('<video preload="auto" controls="" src="/memo/" style="width: 100%; height: 100%;"></video>'),children:"video"}),e.jsx(j,{className:"cursor-pointer",variant:"light",color:"success",onClick:()=>s('<hr style="width=100%"/>'),children:"line"}),H.map((a,c)=>e.jsx(j,{className:"cursor-pointer",variant:"light",color:"dark",onClick:()=>s(`<code>lang="${a}" highlight=""`),children:a},c))]})}export{z as D,J as H,$ as T};
