import{j as e}from"./index-B8hDyh-S.js";import{c as S,e as v,aa as L,m as j,u as N,ab as k,q as D,i as T,L as x,ac as $}from"./App-B7wpVSnF.js";import{r as n,L as C,u as E,h as R,e as I,f as z}from"./router-v4BRDFYV.js";import M from"./TwDetail-C3AgIQSL.js";import{T as P}from"./TwSearchBox-C2rKBhmx.js";import"./vendor-CCYiWZgt.js";const q=()=>e.jsx("div",{className:"w-full max-w-4xl mx-auto mt-2 space-y-4 p-4",children:[...Array(5)].map((s,a)=>e.jsxs("div",{className:"p-4 border border-gray-200 dark:border-zinc-700 rounded-lg animate-pulse",children:[e.jsx("div",{className:"h-5 bg-gray-300 dark:bg-zinc-600 rounded w-3/4 mb-3"}),e.jsx("div",{className:"space-y-2",children:e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-zinc-600 rounded w-5/6"})})]},a))}),A=({uid:s,state:a})=>{const r=S(),{data:t,isLoading:i,error:l}=v(o=>o.blogSearch),c=a?.s||"";return n.useEffect(()=>{r(L({searchTerm:c,uid:s===j?j:""}))},[r,c,s]),i?e.jsx(q,{}):l?e.jsxs("div",{children:["Error: ",l]}):t?e.jsx(B,{data:t,index:"1",s:c,sx:{mt:2}}):null},B=({data:s,className:a,s:r,lnk:t="tw/search",index:i})=>{const{isExpanded:l}=N(),c=l?"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2":"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 2xl:grid-cols-3";return e.jsx("div",{className:`TwList w-full ${c} gap-2 px-2
      ${a}`,children:s.map((o,m)=>e.jsx(F,{lnk:t,post:o,s:r,index:m},m))})};function F({post:s,s:a,lnk:r}){const t=s.g==="m"?e.jsx("span",{className:"menu-item-icon-size menu-item-icon-active",children:e.jsx(k,{})}):null,i=r==="blog"?`/${r}/${s.url?s.url:s.id}`:`/${r}/${s.url?s.url:s.id}?s=${a}&g=${s.g?s.g:"m"}`;return e.jsx(C,{to:i,state:{s:a},className:"RouterLink w-full no-underline",children:e.jsx(U,{icon:t,children:s.title})},s.key)}const U=({children:s,className:a="",icon:r=null})=>e.jsx("div",{className:`ComponentCard w-full ${D.roundedXl} border border-gray-200 
      bg-white dark:border-gray-800 dark:bg-white/[0.03] 
      overflow-hidden ${a}`,children:e.jsx("div",{className:"flex flex-col px-4 py-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[r&&e.jsx("span",{className:"flex-shrink-0",children:r}),e.jsx("h3",{className:"text-base font-medium text-gray-800 dark:text-white/90",children:s})]})})});function K(){const s=E(),a=s.state,{user:r}=T(),t=n.useRef(a===null?"":a.s),[i,l]=n.useState(),[c]=R(),o=c.get("g"),[m,p]=n.useState(),[b,h]=n.useState(!0),g=o==="h"?"home":"memo";return n.useEffect(()=>{const w=async f=>{if(f!==""){const y=await $(g,r?.uid,f,t.current);p(y),h(!1)}};h(!0);const u=s.pathname.split("/"),d=u.length>2?u[u.length-1]:"";l(d),d!=null&&d!=="search"&&w(d)},[s.pathname]),e.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",alignContent:"center",justifyContent:"center"},children:e.jsxs(n.Suspense,{fallback:e.jsx(x,{}),children:[e.jsx(I,{children:e.jsx(z,{path:"/:memoId",element:e.jsx(M,{rootDb:g,isLoading:b,memoDetailData:m})})}),i==="search"?e.jsx(P,{state:a,gubun:"tw"}):"",r===null?e.jsx(x,{}):i==="search"&&a!==null&&a?.s!==""&&e.jsx(n.Suspense,{fallback:e.jsx(x,{}),children:e.jsx(A,{index:"1",uid:r?.uid,state:a})})]})})}export{K as default};
