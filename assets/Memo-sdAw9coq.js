const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-B94BYDmb.js","assets/index-LOQAwg0L.js","assets/index-twIN5572.css","assets/createSvgIcon-CqvoKJmi.js","assets/useControlled-DjS2YtnO.js","assets/ownerWindow-DvT1GKkC.js","assets/isMuiElement-D3TT8HXg.js","assets/fireDatabase-DpAIoJuO.js","assets/fireStorage-JCx0r4IH.js","assets/SinyDate-DododDKu.js","assets/Grid-Bz0Xjg5Y.js","assets/useTheme-36GxGCmH.js","assets/index-C2HANitj.js","assets/Typography-B2LqM6rC.js","assets/Menu-CfJlI2eo.js","assets/useSlotProps-Ch0itXTG.js","assets/resolveComponentProps-DpvZJ71N.js","assets/IconButton-s3y1W3P5.js","assets/TextField-CUyL8BV9.js","assets/InputAdornment-DTEtQOAB.js","assets/Popper-CXGEPDgh.js","assets/Button-thPfpKtS.js","assets/Chip-T4fVZf0K.js","assets/index.esm-B572D79s.js","assets/TwButton-B10xoOy3.js","assets/Loading-DTaH1fF_.js","assets/Container-CV418Mg7.js","assets/styled-BYcVyRMu.js","assets/CircularProgress-B1tNOaPY.js","assets/Divider-BznROXQJ.js","assets/dividerClasses-BrV9Qz6C.js","assets/index-Cmdt2tIm.css","assets/MemoMain-CsliOJPG.js"])))=>i.map(i=>d[i]);
import{r as Oe,a as _e,g as Ae,b as x,q as Ve,e as ht,o as bt,c as Be,f as We,d as vt,u as Z,j as s,h as ue,T as Nt,i as It,m as Te,_ as fe,k as E,l as yt,n as He,p as Ke,s as ze,t as Ue,v as qe,w as K,x as Ge,y as re,z as X,A as St,B as Ct,C as P,D as Ye,E as Ie,F as jt,H as wt,G as Tt,I as he,J as Je,K as Qe,L as kt,M as Et,R as Dt,N as ie}from"./index-LOQAwg0L.js";import{u as Rt}from"./useSuspenseQuery-I_r7Fg_9.js";import{L as W}from"./Loading-DTaH1fF_.js";import{g as Mt,S as $t,T as Pt}from"./index-Bkkm5bWN.js";import{g as Lt,a as Ft,s as Ot,b as _t,c as At}from"./fireDatabase-DpAIoJuO.js";import{r as Xe}from"./createSvgIcon-CqvoKJmi.js";import{D as Vt}from"./DndProvider-Cr1eqqz-.js";import{D as O}from"./Divider-BznROXQJ.js";import{L as Bt}from"./Link-BfeZwlwS.js";import{T as H}from"./Typography-B2LqM6rC.js";import{T as Wt}from"./TwInput-Bs-cmxzt.js";import{T as de}from"./TwButton-B10xoOy3.js";import{T as Ht}from"./Footer-Bf8STuCP.js";import{L as ae,a as Kt}from"./LinkItem-icX41xpf.js";import{u as zt}from"./useSlotProps-Ch0itXTG.js";import{o as Ze}from"./ownerWindow-DvT1GKkC.js";import{u as Ut}from"./useTheme-36GxGCmH.js";import{C as et}from"./Collapse-DGfjMulG.js";import{F as qt}from"./Favorite-Cme6V4A8.js";import{u as tt,a as ot,F as Gt,f as Yt,b as Jt,D as Qt,l as Xt,I as Zt,c as ke,d as Ee,e as eo}from"./index-B94BYDmb.js";import{A as B}from"./AniButton-DT2LiUW-.js";import{M as to}from"./Menu-CfJlI2eo.js";import{S as oo}from"./SinyImageList-BPmjUyIf.js";import{H as nt}from"./HtmlCode-BbEesJIU.js";import{c as no}from"./CodeText-gK7AMmlm.js";import{s as st}from"./commonUtil-CeCzortn.js";import{I as so}from"./IconButton-s3y1W3P5.js";import{C as lo}from"./CircularProgress-B1tNOaPY.js";import{D as ro}from"./datetime-BDx6lZXm.js";import{u as io}from"./index.esm-B572D79s.js";import{S as ao}from"./SinyDate-DododDKu.js";import{S as co}from"./SinySelect-Djd-SDz0.js";import{T as ce}from"./TwBadge-C9c7iSPo.js";import{T as uo}from"./TwCheckbox-BQ05nFet.js";import{T as fo}from"./TwTextArea-Beiwyp0B.js";import{T as mo}from"./TextField-CUyL8BV9.js";import{f as go}from"./fireMemoDetail-E3kehMxt.js";import"./useBaseQuery-B4t_Nw9s.js";import"./Container-CV418Mg7.js";import"./styled-BYcVyRMu.js";import"./useControlled-DjS2YtnO.js";import"./isMuiElement-D3TT8HXg.js";import"./dividerClasses-BrV9Qz6C.js";import"./TwLinkItem-D3UDvagG.js";import"./resolveComponentProps-DpvZJ71N.js";import"./fireStorage-JCx0r4IH.js";import"./Button-thPfpKtS.js";import"./ImageListItem-siIcZcZq.js";/* empty css                 */import"./copy-DC0puQkH.js";import"./ComponentCard-C33xUGK7.js";import"./TwRadio-DZZ7BoXh.js";import"./toPropertyKey-DCwh5dYN.js";import"./Grid-Bz0Xjg5Y.js";import"./index-C2HANitj.js";import"./InputAdornment-DTEtQOAB.js";import"./Popper-CXGEPDgh.js";import"./Chip-T4fVZf0K.js";import"./MenuItem-B6S3zunN.js";var Y={},De;function xo(){if(De)return Y;De=1;var e=Oe();Object.defineProperty(Y,"__esModule",{value:!0}),Y.default=void 0;var t=e(Xe()),o=_e();return Y.default=(0,t.default)((0,o.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight"),Y}var po=xo();const ye=Ae(po);var J={},Re;function ho(){if(Re)return J;Re=1;var e=Oe();Object.defineProperty(J,"__esModule",{value:!0}),J.default=void 0;var t=e(Xe()),o=_e();return J.default=(0,t.default)((0,o.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),J}var bo=ho();const Se=Ae(bo),vo=e=>{const[t,o]=x.useState([]),n=()=>{const l=Ve(Be(We,`memo_txt/${e}`),bt("bookmark"),ht("Y"));vt(l,r=>{if(!r.exists())return;const f=r.val(),i=[];for(let u in f){const c=f[u];c.key=u,i.push(c)}i.sort((u,c)=>u.title>c.title?1:-1),o(i)})};return x.useEffect(()=>{n()},[e]),t};function No({initTreeData:e,uid:t}){const[o,n]=x.useState(),l=i=>n(i),r=Z();if(x.useEffect(()=>{(async()=>{const u=[];if(e)for(const c of e){const d=c.fullIndex.split("/");let m="root";if(d.length>1)for(let a=0;a<d.length;a++){const g=d[a];if(g!=="sub"&&d.length>a){const h=await Lt(`memo_txt/${t}/${g}/title`),v={id:g,text:h,droppable:!1,parent:m};m=g,u.filter(N=>N.id===g).length===0&&u.push(v)}}const b={id:c.key,text:c.title,droppable:!1,parent:m};u.filter(a=>a.id===b.id).length===0&&u.push(b)}for(const c of u){const d=c.id;c.cnt=u.filter(m=>m.parent===d).length}n(u)})()},[e]),o==null||o.length===0)return s.jsx(W,{});const f=i=>{console.log("node",i),r(`/memo/${i.id}`)};return s.jsx(Vt,{backend:$t,options:Mt(),children:s.jsx(Pt,{tree:o,rootId:"root",onDrop:l,render:(i,{depth:u,isOpen:c,onToggle:d})=>s.jsxs("div",{className:"w-60 flex items-center justify-between hover:bg-gray-300 dark:hover:bg-gray-700 rounded-sm ",style:{paddingLeft:u*20+(i.cnt===0?5:0)},children:[s.jsxs("div",{className:"flex items-center",children:[i.cnt>0&&s.jsx("div",{onClick:d,children:c?s.jsx(Se,{}):s.jsx(ye,{})}),s.jsx("div",{className:"cursor-pointer",onClick:()=>f(i),children:i.text})]}),i.cnt>0&&s.jsxs("div",{className:"text-gray-500 text-sm",children:["(",i.cnt,")"]})]})})})}function Io(e){const{user:t}=ue(),o=Z(),n=vo(t?.uid);return t===void 0?s.jsx(s.Fragment,{}):s.jsxs("div",{className:"tail-bookmark justify-items-center",sx:{display:"flex",alignItems:"center",flexDirection:"column",width:"100%"},children:[s.jsx(O,{}),s.jsx(Nt,{children:"BookMark"}),s.jsx("div",{className:`tail-bookmark 
        grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-1 
        justify-items-center 
        w-full`,children:n&&n.map((l,r)=>s.jsx("div",{children:s.jsx(Bt,{component:"button",variant:"body",onClick:()=>{e.onSelected(l.key),o(`/memo/${l.key}`)},children:s.jsx(H,{variant:"body1",children:l.title})})},r))}),s.jsx(O,{}),s.jsx(No,{initTreeData:n,uid:t?.uid})]})}const yo=e=>{const t=x.useRef(null);function o(){e.onSearchDataBtn(t.current.value)}function n(){return e.onNewMemoBtn(),!1}function l(r){r.which===13&&o()}return s.jsxs(s.Fragment,{children:[s.jsx(Wt,{id:"edSearch",type:"edSearch",name:"edSearch",inputRef:t,placeholder:"Enter Search...",fullWidth:!0,sx:{pt:0,pl:2,pr:2,pb:1},onKeyDownCapture:l}),s.jsxs("div",{className:"flex justify-center",children:[s.jsx(de,{variant:"outlined",color:"success",className:"m-1 p-1",onClick:n,children:"새글"}),s.jsx(de,{variant:"outlined",color:"brand",className:"m-1 p-1",onClick:o,children:"조회"})]})]})};async function So(e,t,o=""){if(t==null||t==="")return"";let n=o===""?`${e}/${t}`:`${e}_txt/${t}`;e==="home"&&(n="home_txt");const l=Ve(Be(We,n)),r=await It(l);if(!r.exists())return console.log("getTreeData.null"),null;if(!r.exists())return console.log("getTreeData.exists"),null;const f=r.val(),i=[],u={};e==="home"&&(Te.map(c=>{i.push({title:c.label,id:c.id,sub:[]})}),Te.map(c=>{u[c.id]=[]}));for(const c in f){const d=f[c];d.up===void 0?(d.id=c,d.fullIndex=c):(d.id=d.up,d.fullIndex=d.up),e==="home"?d.gbn!==void 0&&u[d.gbn].push(d):o===""||o===void 0?(d.sub!==null&&(d.children=lt(d,d.up)),i.push(d)):(d.id=c,(d.memo+"").toLowerCase().indexOf(o.toLowerCase())>-1&&i.push(d))}return e==="home"?Object.values(u).map((c,d)=>{c.sort((m,b)=>m.title>b.title?1:-1),i[d].sub=c}):i.sort((c,d)=>c.title>d.title?1:-1),i}function lt(e,t,o,n){const l=[];if(console.log("dbChildren.data=",e.id,e.title,e),e===void 0||e.sub===void 0)return l;for(let r in e.sub){let f=e.sub[r];f.id=r,f.key=r}return Object.values(e.sub).sort((r,f)=>f.title-r.title).map(r=>{r.id=r.key,r.fullIndex=t+"/sub/"+r.key,r.sub!==null&&(r.children=lt(r,r.fullIndex)),l.push(r)}),l}const Co=({className:e="",children:t})=>s.jsx("h4",{className:`mb-2 text-lg font-semibold text-center text-gray-800 dark:text-white/90 
      ${e}}
      `,children:t}),jo=["element"];function wo(e,t){for(let o=0;o<e.length;o+=1)if(t(e[o]))return o;return-1}function To(e,t){let o=0,n=e.length-1;for(;o<=n;){const l=Math.floor((o+n)/2);if(e[l].element===t)return l;e[l].element.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_PRECEDING?n=l-1:o=l+1}return o}const rt=x.createContext({});function ko(e){const t=x.useRef(null);return x.useEffect(()=>{t.current=e},[e]),t.current}const Me=()=>{};function Eo(e){const[,t]=x.useState(),{registerDescendant:o=Me,unregisterDescendant:n=Me,descendants:l=[],parentId:r=null}=x.useContext(rt),f=wo(l,c=>c.element===e.element),i=ko(l),u=l.some((c,d)=>i&&i[d]&&i[d].element!==c.element);return yt(()=>{if(e.element)return o(E({},e,{index:f})),()=>{n(e.element)};t({})},[o,n,f,u,e]),{parentId:r,index:f}}function it(e){const{children:t,id:o}=e,[n,l]=x.useState([]),r=x.useCallback(u=>{let{element:c}=u,d=fe(u,jo);l(m=>{if(m.length===0)return[E({},d,{element:c,index:0})];const b=To(m,c);let p;if(m[b]&&m[b].element===c)p=m;else{const a=E({},d,{element:c,index:b});p=m.slice(),p.splice(b,0,a)}return p.forEach((a,g)=>{a.index=g}),p})},[]),f=x.useCallback(u=>{l(c=>c.filter(d=>u!==d.element))},[]),i=x.useMemo(()=>({descendants:n,registerDescendant:r,unregisterDescendant:f,parentId:o}),[n,r,f,o]);return s.jsx(rt.Provider,{value:i,children:t})}const at={instance:null,multiSelect:!1,disabledItemsFocusable:!1,treeId:void 0,icons:{defaultCollapseIcon:null,defaultExpandIcon:null,defaultParentIcon:null,defaultEndIcon:null}},ct=x.createContext(at),dt=()=>x.useContext(ct);function Do(e){const{instance:t,multiSelect:o}=dt(),n=t?t.isNodeExpandable(e):!1,l=t?t.isNodeExpanded(e):!1,r=t?t.isNodeFocused(e):!1,f=t?t.isNodeSelected(e):!1,i=t?t.isNodeDisabled(e):!1;return{disabled:i,expanded:l,selected:f,focused:r,handleExpansion:m=>{if(t&&!i){r||t.focusNode(m,e);const b=o&&(m.shiftKey||m.ctrlKey||m.metaKey);n&&!(b&&t.isNodeExpanded(e))&&t.toggleNodeExpansion(m,e)}},handleSelection:m=>{t&&!i&&(r||t.focusNode(m,e),o&&(m.shiftKey||m.ctrlKey||m.metaKey)?m.shiftKey?t.selectRange(m,{end:e}):t.selectNode(m,e,!0):t.selectNode(m,e))},preventSelection:m=>{(m.shiftKey||m.ctrlKey||m.metaKey||i)&&m.preventDefault()}}}const Ro=["classes","className","displayIcon","expansionIcon","icon","label","nodeId","onClick","onMouseDown"],ut=x.forwardRef(function(t,o){const{classes:n,className:l,displayIcon:r,expansionIcon:f,icon:i,label:u,nodeId:c,onClick:d,onMouseDown:m}=t,b=fe(t,Ro),{disabled:p,expanded:a,selected:g,focused:h,handleExpansion:v,handleSelection:y,preventSelection:N}=Do(c),I=i||f||r,C=T=>{N(T),m&&m(T)},j=T=>{v(T),y(T),d&&d(T)};return s.jsxs("div",E({},b,{className:He(l,n.root,a&&n.expanded,g&&n.selected,h&&n.focused,p&&n.disabled),onClick:j,onMouseDown:C,ref:o,children:[s.jsx("div",{className:n.iconContainer,children:I}),s.jsx("div",{className:n.label,children:u})]}))});function Mo(e){return ze("MuiTreeItem",e)}const D=Ke("MuiTreeItem",["root","group","content","expanded","selected","focused","disabled","iconContainer","label"]),$o=["children","className","collapseIcon","ContentComponent","ContentProps","endIcon","expandIcon","disabled","icon","id","label","nodeId","onClick","onMouseDown","TransitionComponent","TransitionProps"],Po=e=>{const{classes:t}=e;return Ge({root:["root"],content:["content"],expanded:["expanded"],selected:["selected"],focused:["focused"],disabled:["disabled"],iconContainer:["iconContainer"],label:["label"],group:["group"]},Mo,t)},Lo=K("li",{name:"MuiTreeItem",slot:"Root",overridesResolver:(e,t)=>t.root})({listStyle:"none",margin:0,padding:0,outline:0}),Fo=K(ut,{name:"MuiTreeItem",slot:"Content",overridesResolver:(e,t)=>[t.content,t.iconContainer&&{[`& .${D.iconContainer}`]:t.iconContainer},t.label&&{[`& .${D.label}`]:t.label}]})(({theme:e})=>({padding:"0 8px",width:"100%",boxSizing:"border-box",display:"flex",alignItems:"center",cursor:"pointer",WebkitTapHighlightColor:"transparent","&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${D.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,backgroundColor:"transparent"},[`&.${D.focused}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${D.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:re(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:re(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:re(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${D.focused}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:re(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`& .${D.iconContainer}`]:{marginRight:4,width:15,display:"flex",flexShrink:0,justifyContent:"center","& svg":{fontSize:18}},[`& .${D.label}`]:E({paddingLeft:4,width:"100%",boxSizing:"border-box",minWidth:0,position:"relative"},e.typography.body1)})),Oo=K(et,{name:"MuiTreeItem",slot:"Group",overridesResolver:(e,t)=>t.group})({margin:0,padding:0,marginLeft:17}),ft=x.forwardRef(function(t,o){const n=Ue({props:t,name:"MuiTreeItem"}),{children:l,className:r,collapseIcon:f,ContentComponent:i=ut,ContentProps:u,endIcon:c,expandIcon:d,disabled:m,icon:b,id:p,label:a,nodeId:g,onClick:h,onMouseDown:v,TransitionComponent:y=et,TransitionProps:N}=n,I=fe(n,$o),{icons:C,multiSelect:j,disabledItemsFocusable:T,treeId:R,instance:k}=dt();let M;p!=null?M=p:R&&g&&(M=`${R}-${g}`);const[ee,me]=x.useState(null),te=x.useRef(null),ge=qe(me,o),xe=x.useMemo(()=>({element:ee,id:g}),[g,ee]),{index:U,parentId:oe}=Eo(xe),F=!!(Array.isArray(l)?l.length:l),_=k?k.isNodeExpanded(g):!1,ne=k?k.isNodeFocused(g):!1,q=k?k.isNodeSelected(g):!1,L=k?k.isNodeDisabled(g):!1,S=E({},n,{expanded:_,focused:ne,selected:q,disabled:L}),w=Po(S);let A,G;F&&(_?G=f||C.defaultCollapseIcon:G=d||C.defaultExpandIcon),F?A=C.defaultParentIcon:A=c||C.defaultEndIcon,x.useEffect(()=>{if(k&&U!==-1)return k.updateNode({id:g,idAttribute:M,index:U,parentId:oe,expandable:F,disabled:m}),()=>k.removeNode(g)},[k,oe,U,g,F,m,M]),x.useEffect(()=>{if(k&&a){var $,le;return k.mapFirstChar(g,(($=(le=te.current)==null?void 0:le.textContent)!=null?$:"").substring(0,1).toLowerCase())}},[k,g,a]);let V;j?V=q:q&&(V=!0);function se($){if($.target===$.currentTarget){let pe;typeof $.target.getRootNode=="function"?pe=$.target.getRootNode():pe=Ze($.target),pe.getElementById(R).focus({preventScroll:!0})}const le=!T&&L;k&&!ne&&$.currentTarget===$.target&&!le&&k.focusNode($,g)}return s.jsxs(Lo,E({className:He(w.root,r),role:"treeitem","aria-expanded":F?_:void 0,"aria-selected":V,"aria-disabled":L||void 0,id:M,tabIndex:-1},I,{ownerState:S,onFocus:se,ref:ge,children:[s.jsx(Fo,E({as:i,ref:te,classes:{root:w.content,expanded:w.expanded,selected:w.selected,focused:w.focused,disabled:w.disabled,iconContainer:w.iconContainer,label:w.label},label:a,nodeId:g,onClick:h,onMouseDown:v,icon:b,expansionIcon:G,displayIcon:A,ownerState:S},u)),l&&s.jsx(it,{id:g,children:s.jsx(Oo,E({as:y,unmountOnExit:!0,className:w.group,in:_,component:"ul",role:"group"},N,{children:l}))})]}))});function _o(e){return ze("MuiTreeView",e)}Ke("MuiTreeView",["root"]);const Ao=(e,t)=>{const o=x.useRef({}),[n,l]=x.useState(()=>{const f={};return e.forEach(i=>{i.models&&Object.entries(i.models).forEach(([u,c])=>{o.current[u]={controlledProp:c.controlledProp,defaultProp:c.defaultProp,isControlled:t[c.controlledProp]!==void 0},f[u]=t[c.defaultProp]})}),f});return Object.fromEntries(Object.entries(o.current).map(([f,i])=>{const u=i.isControlled?t[i.controlledProp]:n[f];return[f,{value:u,setValue:c=>{i.isControlled||l(d=>E({},d,{[f]:c}))}}]}))};class Vo{constructor(){this.maxListeners=20,this.warnOnce=!1,this.events={}}on(t,o,n={}){let l=this.events[t];l||(l={highPriority:new Map,regular:new Map},this.events[t]=l),n.isFirst?l.highPriority.set(o,!0):l.regular.set(o,!0)}removeListener(t,o){this.events[t]&&(this.events[t].regular.delete(o),this.events[t].highPriority.delete(o))}removeAllListeners(){this.events={}}emit(t,...o){const n=this.events[t];if(!n)return;const l=Array.from(n.highPriority.keys()),r=Array.from(n.regular.keys());for(let f=l.length-1;f>=0;f-=1){const i=l[f];n.highPriority.has(i)&&i.apply(this,o)}for(let f=0;f<r.length;f+=1){const i=r[f];n.regular.has(i)&&i.apply(this,o)}}once(t,o){const n=this;this.on(t,function l(...r){n.removeListener(t,l),o.apply(n,r)})}}const be=(e,t)=>{const o=e.getNode(t),n=e.getNavigableChildrenIds(o.parentId),l=n.indexOf(t);if(l===0)return o.parentId;let r=n[l-1];for(;e.isNodeExpanded(r)&&e.getNavigableChildrenIds(r).length>0;)r=e.getNavigableChildrenIds(r).pop();return r},Q=(e,t)=>{if(e.isNodeExpanded(t)&&e.getNavigableChildrenIds(t).length>0)return e.getNavigableChildrenIds(t)[0];let o=e.getNode(t);for(;o!=null;){const n=e.getNavigableChildrenIds(o.parentId),l=n[n.indexOf(o.id)+1];if(l)return l;o=e.getNode(o.parentId)}return null},ve=e=>{let t=e.getNavigableChildrenIds(null).pop();for(;e.isNodeExpanded(t);)t=e.getNavigableChildrenIds(t).pop();return t},Ne=e=>e.getNavigableChildrenIds(null)[0],z=(e,t)=>{Object.assign(e,t)},Bo=e=>e.isPropagationStopped!==void 0,Wo=({instance:e})=>{const[t]=x.useState(()=>new Vo),o=x.useCallback((...l)=>{const[r,f,i={}]=l;i.defaultMuiPrevented=!1,!(Bo(i)&&i.isPropagationStopped())&&t.emit(r,f,i)},[t]),n=x.useCallback((l,r)=>(t.on(l,r),()=>{t.removeListener(l,r)}),[t]);z(e,{$$publishEvent:o,$$subscribeEvent:n})},Ho=[Wo],Ko=e=>{const t=[...Ho,...e.plugins],o=t.reduce((a,g)=>g.getDefaultizedParams?g.getDefaultizedParams(a):a,e),n=Ao(t,o),r=x.useRef({}).current,f=x.useRef(null),i=qe(f,e.rootRef),[u,c]=x.useState(()=>{const a={};return t.forEach(g=>{g.getInitialState&&Object.assign(a,g.getInitialState(o))}),a}),d=[];let m=at;const b=a=>{const g=a({instance:r,params:o,state:u,setState:c,rootRef:f,models:n})||{};g.getRootProps&&d.push(g.getRootProps),g.contextValue&&(m=g.contextValue)};return t.forEach(b),{getRootProps:(a={})=>{const g=E({role:"tree",tabIndex:0},a,{ref:i});return d.forEach(h=>{Object.assign(g,h(a))}),g},rootRef:i,contextValue:m}};function zo(e){const{value:t,children:o}=e;return s.jsx(ct.Provider,{value:t,children:s.jsx(it,{children:o})})}const Uo=(e,t,o)=>{e.$$publishEvent(t,o)},qo=({instance:e,params:t})=>{const o=x.useRef({}),n=x.useCallback(c=>o.current[c],[]),l=x.useCallback(c=>{o.current[c.id]=c},[]),r=x.useCallback(c=>{const d=E({},o.current);delete d[c],o.current=d,Uo(e,"removeNode",{id:c})},[e]),f=x.useCallback(c=>{if(c==null)return!1;let d=e.getNode(c);if(!d)return!1;if(d.disabled)return!0;for(;d.parentId!=null;)if(d=e.getNode(d.parentId),d.disabled)return!0;return!1},[e]),i=X(c=>Object.values(o.current).filter(d=>d.parentId===c).sort((d,m)=>d.index-m.index).map(d=>d.id));z(e,{getNode:n,updateNode:l,removeNode:r,getChildrenIds:i,getNavigableChildrenIds:c=>{let d=e.getChildrenIds(c);return t.disabledItemsFocusable||(d=d.filter(m=>!e.isNodeDisabled(m))),d},isNodeDisabled:f})},Ce=({instance:e,params:t,models:o})=>{const n=x.useCallback(i=>Array.isArray(o.expanded.value)?o.expanded.value.indexOf(i)!==-1:!1,[o.expanded.value]),l=x.useCallback(i=>{var u;return!!((u=e.getNode(i))!=null&&u.expandable)},[e]),r=X((i,u)=>{if(u==null)return;let c;o.expanded.value.indexOf(u)!==-1?c=o.expanded.value.filter(d=>d!==u):c=[u].concat(o.expanded.value),t.onNodeToggle&&t.onNodeToggle(i,c),o.expanded.setValue(c)});z(e,{isNodeExpanded:n,isNodeExpandable:l,toggleNodeExpansion:r,expandAllSiblings:(i,u)=>{const c=e.getNode(u),m=e.getChildrenIds(c.parentId).filter(p=>e.isNodeExpandable(p)&&!e.isNodeExpanded(p)),b=o.expanded.value.concat(m);m.length>0&&(o.expanded.setValue(b),t.onNodeToggle&&t.onNodeToggle(i,b))}})};Ce.models={expanded:{controlledProp:"expanded",defaultProp:"defaultExpanded"}};const Go=[];Ce.getDefaultizedParams=e=>{var t;return E({},e,{defaultExpanded:(t=e.defaultExpanded)!=null?t:Go})};const Yo=(e,t,o)=>{if(t===o)return[t,o];const n=e.getNode(t),l=e.getNode(o);if(n.parentId===l.id||l.parentId===n.id)return l.parentId===n.id?[n.id,l.id]:[l.id,n.id];const r=[n.id],f=[l.id];let i=n.parentId,u=l.parentId,c=f.indexOf(i)!==-1,d=r.indexOf(u)!==-1,m=!0,b=!0;for(;!d&&!c;)m&&(r.push(i),c=f.indexOf(i)!==-1,m=i!==null,!c&&m&&(i=e.getNode(i).parentId)),b&&!c&&(f.push(u),d=r.indexOf(u)!==-1,b=u!==null,!d&&b&&(u=e.getNode(u).parentId));const p=c?i:u,a=e.getChildrenIds(p),g=r[r.indexOf(p)-1],h=f[f.indexOf(p)-1];return a.indexOf(g)<a.indexOf(h)?[t,o]:[o,t]},je=({instance:e,params:t,models:o})=>{const n=x.useRef(null),l=x.useRef(!1),r=x.useRef([]),f=a=>Array.isArray(o.selected.value)?o.selected.value.indexOf(a)!==-1:o.selected.value===a,i=(a,g,h=!1)=>{if(!t.disableSelection){if(h){if(Array.isArray(o.selected.value)){let v;o.selected.value.indexOf(g)!==-1?v=o.selected.value.filter(y=>y!==g):v=[g].concat(o.selected.value),t.onNodeSelect&&t.onNodeSelect(a,v),o.selected.setValue(v)}}else{const v=t.multiSelect?[g]:g;t.onNodeSelect&&t.onNodeSelect(a,v),o.selected.setValue(v)}n.current=g,l.current=!1,r.current=[]}},u=(a,g)=>{const[h,v]=Yo(e,a,g),y=[h];let N=h;for(;N!==v;)N=Q(e,N),y.push(N);return y},c=(a,g)=>{let h=o.selected.value.slice();const{start:v,next:y,current:N}=g;!y||!N||(r.current.indexOf(N)===-1&&(r.current=[]),l.current?r.current.indexOf(y)!==-1?(h=h.filter(I=>I===v||I!==N),r.current=r.current.filter(I=>I===v||I!==N)):(h.push(y),r.current.push(y)):(h.push(y),r.current.push(N,y)),t.onNodeSelect&&t.onNodeSelect(a,h),o.selected.setValue(h))},d=(a,g)=>{let h=o.selected.value.slice();const{start:v,end:y}=g;l.current&&(h=h.filter(C=>r.current.indexOf(C)===-1));let N=u(v,y);N=N.filter(C=>!e.isNodeDisabled(C)),r.current=N;let I=h.concat(N);I=I.filter((C,j)=>I.indexOf(C)===j),t.onNodeSelect&&t.onNodeSelect(a,I),o.selected.setValue(I)};return z(e,{isNodeSelected:f,selectNode:i,selectRange:(a,g,h=!1)=>{if(t.disableSelection)return;const{start:v=n.current,end:y,current:N}=g;h?c(a,{start:v,next:y,current:N}):v!=null&&y!=null&&d(a,{start:v,end:y}),l.current=!0},rangeSelectToLast:(a,g)=>{n.current||(n.current=g);const h=l.current?n.current:g;e.selectRange(a,{start:h,end:ve(e)})},rangeSelectToFirst:(a,g)=>{n.current||(n.current=g);const h=l.current?n.current:g;e.selectRange(a,{start:h,end:Ne(e)})}}),{getRootProps:()=>({"aria-multiselectable":t.multiSelect})}};je.models={selected:{controlledProp:"selected",defaultProp:"defaultSelected"}};const Jo=[];je.getDefaultizedParams=e=>{var t,o,n;return E({},e,{disableSelection:(t=e.disableSelection)!=null?t:!1,multiSelect:(o=e.multiSelect)!=null?o:!1,defaultSelected:(n=e.defaultSelected)!=null?n:e.multiSelect?Jo:null})};const $e=1e3;class Qo{constructor(t=$e){this.timeouts=new Map,this.cleanupTimeout=$e,this.cleanupTimeout=t}register(t,o,n){this.timeouts||(this.timeouts=new Map);const l=setTimeout(()=>{typeof o=="function"&&o(),this.timeouts.delete(n.cleanupToken)},this.cleanupTimeout);this.timeouts.set(n.cleanupToken,l)}unregister(t){const o=this.timeouts.get(t.cleanupToken);o&&(this.timeouts.delete(t.cleanupToken),clearTimeout(o))}reset(){this.timeouts&&(this.timeouts.forEach((t,o)=>{this.unregister({cleanupToken:o})}),this.timeouts=void 0)}}class Xo{constructor(){this.registry=new FinalizationRegistry(t=>{typeof t=="function"&&t()})}register(t,o,n){this.registry.register(t,o,n)}unregister(t){this.registry.unregister(t)}reset(){}}class Zo{}function en(e){let t=0;return function(n,l,r){e.registry===null&&(e.registry=typeof FinalizationRegistry<"u"?new Xo:new Qo);const[f]=x.useState(new Zo),i=x.useRef(null),u=x.useRef();u.current=r;const c=x.useRef(null);if(!i.current&&u.current){const d=(m,b)=>{if(!b.defaultMuiPrevented){var p;(p=u.current)==null||p.call(u,m,b)}};i.current=n.$$subscribeEvent(l,d),t+=1,c.current={cleanupToken:t},e.registry.register(f,()=>{var m;(m=i.current)==null||m.call(i),i.current=null,c.current=null},c.current)}else!u.current&&i.current&&(i.current(),i.current=null,c.current&&(e.registry.unregister(c.current),c.current=null));x.useEffect(()=>{if(!i.current&&u.current){const d=(m,b)=>{if(!b.defaultMuiPrevented){var p;(p=u.current)==null||p.call(u,m,b)}};i.current=n.$$subscribeEvent(l,d)}return c.current&&e.registry&&(e.registry.unregister(c.current),c.current=null),()=>{var d;(d=i.current)==null||d.call(i),i.current=null}},[n,l])}}const tn={registry:null},on=en(tn),we=({instance:e,params:t,state:o,setState:n,models:l,rootRef:r})=>{const f=X(p=>{const a=typeof p=="function"?p(o.focusedNodeId):p;n(g=>E({},g,{focusedNodeId:a}))}),i=x.useCallback(p=>o.focusedNodeId===p,[o.focusedNodeId]),u=X((p,a)=>{a&&(f(a),t.onNodeFocus&&t.onNodeFocus(p,a))});z(e,{isNodeFocused:i,focusNode:u}),on(e,"removeNode",({id:p})=>{f(a=>a===p&&r.current===Ze(r.current).activeElement?e.getChildrenIds(null)[0]:a)});const c=p=>a=>{var g;if((g=p.onFocus)==null||g.call(p,a),a.target===a.currentTarget){const h=y=>{const N=e.getNode(y);return N&&(N.parentId==null||e.isNodeExpanded(N.parentId))};let v;Array.isArray(l.selected.value)?v=l.selected.value.find(h):l.selected.value!=null&&h(l.selected.value)&&(v=l.selected.value),v==null&&(v=e.getNavigableChildrenIds(null)[0]),e.focusNode(a,v)}},d=p=>a=>{var g;(g=p.onBlur)==null||g.call(p,a),f(null)},m=e.getNode(o.focusedNodeId),b=m?m.idAttribute:null;return{getRootProps:p=>({onFocus:c(p),onBlur:d(p),"aria-activedescendant":b??void 0})}};we.getInitialState=()=>({focusedNodeId:null});we.getDefaultizedParams=e=>{var t;return E({},e,{disabledItemsFocusable:(t=e.disabledItemsFocusable)!=null?t:!1})};function nn(e){return e&&e.length===1&&e.match(/\S/)}function Pe(e,t,o){for(let n=t;n<e.length;n+=1)if(o===e[n])return n;return-1}const sn=({instance:e,params:t,state:o})=>{const l=Ut().direction==="rtl",r=x.useRef({}),f=X((p,a)=>(r.current[p]=a,()=>{const g=E({},r.current);delete g[p],r.current=g}));z(e,{mapFirstChar:f});const i=p=>(o.focusedNodeId!=null&&e.isNodeExpandable(o.focusedNodeId)&&(e.isNodeExpanded(o.focusedNodeId)?e.focusNode(p,Q(e,o.focusedNodeId)):e.isNodeDisabled(o.focusedNodeId)||e.toggleNodeExpansion(p,o.focusedNodeId)),!0),u=p=>{if(o.focusedNodeId==null)return!1;if(e.isNodeExpanded(o.focusedNodeId)&&!e.isNodeDisabled(o.focusedNodeId))return e.toggleNodeExpansion(p,o.focusedNodeId),!0;const a=e.getNode(o.focusedNodeId).parentId;return a?(e.focusNode(p,a),!0):!1},c=(p,a,g)=>{let h,v;const y=g.toLowerCase(),N=[],I=[];Object.keys(r.current).forEach(C=>{const j=e.getNode(C),T=j.parentId?e.isNodeExpanded(j.parentId):!0,R=t.disabledItemsFocusable?!1:e.isNodeDisabled(C);T&&!R&&(N.push(C),I.push(r.current[C]))}),h=N.indexOf(a)+1,h>=N.length&&(h=0),v=Pe(I,h,y),v===-1&&(v=Pe(I,0,y)),v>-1&&e.focusNode(p,N[v])},d=(p,a)=>{e.isNodeDisabled(Q(e,a))||e.selectRange(p,{end:Q(e,a),current:a},!0)},m=(p,a)=>{e.isNodeDisabled(be(e,a))||e.selectRange(p,{end:be(e,a),current:a},!0)},b=p=>a=>{var g;(g=p.onKeyDown)==null||g.call(p,a);let h=!1;const v=a.key;if(a.altKey||a.currentTarget!==a.target||o.focusedNodeId==null)return;const y=a.ctrlKey||a.metaKey;switch(v){case" ":!t.disableSelection&&!e.isNodeDisabled(o.focusedNodeId)&&(h=!0,t.multiSelect&&a.shiftKey?e.selectRange(a,{end:o.focusedNodeId}):t.multiSelect?e.selectNode(a,o.focusedNodeId,!0):e.selectNode(a,o.focusedNodeId)),a.stopPropagation();break;case"Enter":e.isNodeDisabled(o.focusedNodeId)||(e.isNodeExpandable(o.focusedNodeId)?(e.toggleNodeExpansion(a,o.focusedNodeId),h=!0):t.disableSelection||(h=!0,t.multiSelect?e.selectNode(a,o.focusedNodeId,!0):e.selectNode(a,o.focusedNodeId))),a.stopPropagation();break;case"ArrowDown":t.multiSelect&&a.shiftKey&&!t.disableSelection&&d(a,o.focusedNodeId),e.focusNode(a,Q(e,o.focusedNodeId)),h=!0;break;case"ArrowUp":t.multiSelect&&a.shiftKey&&!t.disableSelection&&m(a,o.focusedNodeId),e.focusNode(a,be(e,o.focusedNodeId)),h=!0;break;case"ArrowRight":l?h=u(a):h=i(a);break;case"ArrowLeft":l?h=i(a):h=u(a);break;case"Home":t.multiSelect&&y&&a.shiftKey&&!t.disableSelection&&!e.isNodeDisabled(o.focusedNodeId)&&e.rangeSelectToFirst(a,o.focusedNodeId),e.focusNode(a,Ne(e)),h=!0;break;case"End":t.multiSelect&&y&&a.shiftKey&&!t.disableSelection&&!e.isNodeDisabled(o.focusedNodeId)&&e.rangeSelectToLast(a,o.focusedNodeId),e.focusNode(a,ve(e)),h=!0;break;default:v==="*"?(e.expandAllSiblings(a,o.focusedNodeId),h=!0):t.multiSelect&&y&&v.toLowerCase()==="a"&&!t.disableSelection?(e.selectRange(a,{start:Ne(e),end:ve(e)}),h=!0):!y&&!a.shiftKey&&nn(v)&&(c(a,o.focusedNodeId,v),h=!0)}h&&(a.preventDefault(),a.stopPropagation())};return{getRootProps:p=>({onKeyDown:b(p)})}},ln=({instance:e,params:t})=>{const o=St(t.id);return{getRootProps:()=>({id:o}),contextValue:{treeId:o,instance:e,multiSelect:t.multiSelect,disabledItemsFocusable:t.disabledItemsFocusable,icons:{defaultCollapseIcon:t.defaultCollapseIcon,defaultEndIcon:t.defaultEndIcon,defaultExpandIcon:t.defaultExpandIcon,defaultParentIcon:t.defaultParentIcon}}}},rn=[qo,Ce,je,we,sn,ln],an=["disabledItemsFocusable","expanded","defaultExpanded","onNodeToggle","onNodeFocus","disableSelection","defaultSelected","selected","multiSelect","onNodeSelect","id","defaultCollapseIcon","defaultEndIcon","defaultExpandIcon","defaultParentIcon","children"],cn=e=>{const{classes:t}=e;return Ge({root:["root"]},_o,t)},Le=K("ul",{name:"MuiTreeView",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:0,margin:0,listStyle:"none",outline:0}),mt=x.forwardRef(function(t,o){const n=Ue({props:t,name:"MuiTreeView"}),l=n,r=n,{disabledItemsFocusable:f,expanded:i,defaultExpanded:u,onNodeToggle:c,onNodeFocus:d,disableSelection:m,defaultSelected:b,selected:p,multiSelect:a,onNodeSelect:g,id:h,defaultCollapseIcon:v,defaultEndIcon:y,defaultExpandIcon:N,defaultParentIcon:I,children:C}=r,j=fe(r,an),{getRootProps:T,contextValue:R}=Ko({disabledItemsFocusable:f,expanded:i,defaultExpanded:u,onNodeToggle:c,onNodeFocus:d,disableSelection:m,defaultSelected:b,selected:p,multiSelect:a,onNodeSelect:g,id:h,defaultCollapseIcon:v,defaultEndIcon:y,defaultExpandIcon:N,defaultParentIcon:I,plugins:rn,rootRef:o}),k=cn(n),M=zt({elementType:Le,externalSlotProps:{},externalForwardedProps:j,className:k.root,getSlotProps:T,ownerState:l});return s.jsx(zo,{value:R,children:s.jsx(Le,E({},M,{children:C}))})}),dn=K(ft)(({theme:e})=>({color:e.palette.text.secondary,[`& .${D.content}`]:{color:e.palette.text.secondary,borderTopRightRadius:e.spacing(2),borderBottomRightRadius:e.spacing(2),paddingRight:e.spacing(1),fontWeight:e.typography.fontWeightMedium,"&.MuiTreeItem-content":{paddingLeft:"3px",paddingRight:"3px"},".MuiTreeItem-label":{paddingLeft:"0px"},".MuiTreeItem-iconContainer":{marginRight:"0px"},"&.Mui-expanded":{fontWeight:e.typography.fontWeightRegular},"&:hover":{backgroundColor:e.palette.action.hover},"&.Mui-selected":{backgroundColor:"rgba(145, 85, 253, 0.16)",color:"var(--tree-view-color)"},"&.Mui-focused, &.Mui-selected, &.Mui-selected.Mui-focused":{backgroundColor:"rgba(145, 85, 253, 0.16)",color:"var(--tree-view-color)"},[`& .${D.label}`]:{fontWeight:"inherit",color:"inherit"}},[`& .${D.group}`]:{marginLeft:0,[`& .${D.content}`]:{paddingLeft:e.spacing(1)}}})),un=x.forwardRef(function(t,o){const{labelIcon:n,labelInfo:l,labelText:r,pl:f,...i}=t;return s.jsx(dn,{label:s.jsxs(P,{sx:{display:"flex",alignItems:"center",p:.5,pr:2,pl:{pl:f}},children:[s.jsx(P,{component:n,color:"inherit",sx:{mr:1,pl:{pl:f}}}),s.jsx(H,{sx:{fontWeight:"inherit",flexGrow:1},component:"div",children:r}),s.jsx(H,{variant:"caption",color:"inherit",children:l})]}),...i,ref:o})}),gt=e=>{const{id:t,fullIndex:o,title:n,sub:l}=e.item;if(t===void 0)return console.log("SubTreeItem.item.undefined=",e.item),s.jsx(s.Fragment,{});const r=l&&Object.values(l).length>0?Object.values(l).length+"":"";return s.jsx(un,{onClick:()=>e.onDetail(t,o),nodeId:t,labelText:n,labelInfo:r,pl:e.pl,children:l!=null?Object.values(l).sort((f,i)=>f.title>i.title?1:-1).map((f,i)=>s.jsx("div",{style:{paddingLeft:e.pl+5},children:s.jsx(gt,{onDetail:e.onDetail,item:f,pl:e.pl+5})},i+"")):""})};function fn(e){const[t,o]=x.useState([]),[n,l]=x.useState([]),{isMoble:r,height:f,width:i}=Ct(),u=(m,b)=>{e.onDetail(m,b)};x.useEffect(()=>{if(e.expandIndex!==void 0){let m=e.expandIndex.split("/");m=m.filter(b=>b!=="sub"),e.expandIndex.indexOf("undefined")<0&&(o(m),l(m[m.length-1]))}},[e.expandIndex]);const c=(m,b)=>{},d=(m,b)=>{o(b)};return s.jsx("div",{style:{height:f-220-(r?56:0)+(i>1024?60:0),width:"100%",overflowY:"auto",overflowX:"hidden"},children:s.jsx(mt,{"aria-label":"icon expansion",defaultCollapseIcon:s.jsx(Se,{}),defaultExpandIcon:s.jsx(ye,{}),expanded:t,onNodeSelect:c,selected:n,onNodeToggle:d,sx:{flexGrow:1},children:e.data&&e.data.map((m,b)=>s.jsx(gt,{onDetail:u,item:m,parentIndex:b+1,pl:5},b+1))})})}const mn=K(ft)(({theme:e})=>({color:e.palette.text.secondary,[`& .${D.content}`]:{color:e.palette.text.secondary,borderTopRightRadius:e.spacing(2),borderBottomRightRadius:e.spacing(2),paddingRight:e.spacing(1),fontWeight:e.typography.fontWeightMedium,"&.MuiTreeItem-content":{paddingLeft:"3px",paddingRight:"3px"},".MuiTreeItem-label":{paddingLeft:"0px"},".MuiTreeItem-iconContainer":{marginRight:"0px"},"&.Mui-expanded":{fontWeight:e.typography.fontWeightRegular},"&:hover":{backgroundColor:e.palette.action.hover},"&.Mui-selected":{backgroundColor:"rgba(145, 85, 253, 0.16)",color:"var(--tree-view-color)"},"&.Mui-focused, &.Mui-selected, &.Mui-selected.Mui-focused":{backgroundColor:"rgba(145, 85, 253, 0.16)",color:"var(--tree-view-color)"},[`& .${D.label}`]:{fontWeight:"inherit",color:"inherit"}},[`& .${D.group}`]:{marginLeft:0,[`& .${D.content}`]:{paddingLeft:e.spacing(1)}}})),gn=x.forwardRef(function(t,o){const{labelIcon:n,labelInfo:l,labelText:r,pl:f,...i}=t;return s.jsx(mn,{label:s.jsxs(P,{sx:{display:"flex",alignItems:"center",p:.5,pr:2,pl:{pl:f}},children:[s.jsx(P,{component:n,color:"inherit",sx:{mr:1,pl:{pl:f}}}),s.jsx(H,{sx:{fontWeight:"inherit",flexGrow:1},component:"div",children:r}),s.jsx(H,{variant:"caption",color:"inherit",children:l})]}),...i,ref:o})}),xt=e=>{const{id:t,fullIndex:o,title:n,sub:l}=e.item;if(t===void 0)return console.log("SubTreeItem.item.undefined=",e.item),s.jsx(s.Fragment,{});const r=l&&Object.values(l).length>0?Object.values(l).length+"":"";return s.jsx(gn,{onClick:()=>e.onDetail(t,o),nodeId:t,labelText:n,labelInfo:r,pl:e.pl,children:l!=null?Object.values(l).sort((f,i)=>f.title>i.title?1:-1).map((f,i)=>s.jsx("div",{style:{paddingLeft:e.pl+5},children:s.jsx(xt,{onDetail:e.onDetail,item:f,pl:e.pl+5})},i+"")):""})};function xn(e){const[t,o]=x.useState([]),[n,l]=x.useState([]),r=(u,c)=>{e.onDetail(u,c)};x.useEffect(()=>{if(e.expandIndex!==void 0){let u=e.expandIndex.split("/");u=u.filter(c=>c!=="sub"),e.expandIndex.indexOf("undefined")<0&&(o(u),l(u[u.length-1]))}},[e.expandIndex]);const f=(u,c)=>{},i=(u,c)=>{o(c)};return s.jsx(P,{sx:{minHeight:180,flexGrow:1,display:"flex",flexDirection:"column",height:e.maxHeight,overflow:"hidden",overflowY:"auto",width:"100%"},children:s.jsx(mt,{"aria-label":"icon expansion",defaultCollapseIcon:s.jsx(Se,{}),defaultExpandIcon:s.jsx(ye,{}),expanded:t,onNodeSelect:f,selected:n,onNodeToggle:i,sx:{flexGrow:1,overflow:"hidden",overflowY:"auto"},children:e.data&&e.data.map((u,c)=>s.jsx(xt,{onDetail:r,item:u,parentIndex:c+1,pl:5},c+1))})})}const pn={position:"absolute",top:"50%",left:"50%",display:"flex",flexDirection:"column",alignItems:"center",transform:"translate(-50%, -50%)",width:250,maxHeight:"400px",bgcolor:"background.paper",border:"1px solid #000",boxShadow:24,boxSizing:"border-box",p:4},hn=e=>s.jsxs(P,{sx:{my:2,mt:3,display:"flex"},children:[s.jsx(B,{type:"submit",variant:"outlined",color:"success",onClick:e.onPost,children:"확인"}),s.jsx(B,{type:"button",variant:"outlined",onClick:e.onClose,children:"취소"})]}),bn=e=>{const[t,o]=x.useState(e.open),[n,l]=x.useState(),r=()=>{o(!1),l(void 0),e.onClose()};x.useEffect(()=>{o(e.open)},[e.open]);const f=u=>{l(u)},i=()=>{if(n===void 0){alert("이동할 메모장을 선택해 주세요");return}e.onPost(n)};return s.jsx("div",{children:s.jsx(to,{open:t,onClose:r,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:s.jsxs(P,{sx:pn,children:[s.jsx(H,{id:"modal-modal-title",variant:"h6",component:"h2",children:"이동할 메모장 선택"}),s.jsx(O,{}),s.jsx(P,{sx:{width:"100%",minHeight:110,maxHeight:200,flexGrow:1,minWidth:100,overflow:"hidden"},children:s.jsx(xn,{data:e.data,onDetail:f,maxHeight:200})}),s.jsx(hn,{onPost:i,onClose:r})]})})})},vn=e=>s.jsxs(P,{sx:{flexGrow:1,my:2,width:"100%",display:"grid",gridTemplateColumns:"64px 64px  64px  64px ",flexDirection:"row",alignItems:"center",alignContent:"center",justifyContent:"center",textAlign:"center",whiteSpace:"nowrap"},children:[s.jsx(B,{type:"button",size:"small",variant:"outlined",color:"success",onClick:e.onEdit,children:"수정"}),s.jsx(B,{type:"button",size:"small",variant:"outlined",onClick:e.onNewMemo,children:"새글"}),e.rootDb==="memo"?s.jsx(B,{type:"button",size:"small",variant:"outlined",color:"warning",onClick:e.onMove,children:"이동"}):"",s.jsx(B,{type:"button",size:"small",variant:"outlined",color:"error",onClick:e.onDelete,children:"삭제"})]}),Nn=e=>{const{rootDb:t,isLoading:o,memoDetailData:n}=e;console.log("MemoDetail.memoDetailData.title=",n?.title,", bookmark=",n?.bookmark);const{scrollYProgress:l}=tt(),r=ot(l,{stiffness:100,damping:30,restDelta:.001}),[f,i]=x.useState(!1),u=Z(),c=x.useRef();c.current=e.searchWord;const{memoId:d}=Ye(),b=Ie()?.state?.fullIndex,{user:p}=ue(),a=()=>{const C=`/${t}/edit/${d}`;u(C,{state:{fullIndex:b}})},g=()=>{const C=`/${t}/insert/${d}`;u(C,{state:{fullIndex:b}})},h=async()=>{const C=t==="memo"?`${t}_txt/${p.uid}/${d}`:`${t}_txt/${d}`,j=t==="memo"?`${t}/${p.uid}`:t;if(await Jt(C,j)===void 0){alert("삭제에 실패했습니다.[code:d02]");return}e.onTreeUpdate(),u(`/${t}`)},v=()=>{window.confirm(`하위 자료가 있는 경우 같이 삭제됩니다.
삭제하시겠습니까?`)&&h()},y=()=>{i(!0)},N=()=>{e.onBookmark()},I=async C=>{try{const j=t==="memo"?`${t}_txt/${p.uid}`:`${t}_txt`,T=t==="memo"?`memo/${p.uid}`:t,R=await Yt(j,T,d,C);e.onTreeUpdate()}catch(j){console.log("catch",j)}finally{i(!1)}};return x.useEffect(()=>{n&&n.title!==void 0&&st({title:n.title,description:n.title});function C(){window.scrollTo({top:0}),n&&n.html!=="N"&&document.querySelectorAll("pre").forEach(j=>{j.innerHTML=no(j.innerHTML)})}n&&n.memo!==null&&C()},[n]),o?s.jsx(W,{}):d===""||p===void 0?s.jsx(s.Fragment,{}):s.jsxs("div",{children:[s.jsx(jt.div,{className:"progress-bar",style:{scaleX:r}}),s.jsxs("div",{className:`grid grid-cols-3 
				items-center w-full 
				dark:bg-stone-950 rounded-md shadow-sm 
				dark:shadow-stone-800 shadow-stone-900`,children:[s.jsx("div",{}),s.jsx("div",{className:"flex justify-center",children:n&&n.title}),s.jsxs("div",{className:"text-right justify-end mr-3.5",children:[s.jsx(so,{"aria-label":"bookmark",onClick:N,children:n&&n.bookmark==="Y"?s.jsx(qt,{sx:{color:"red"}}):s.jsx(Gt,{})}),s.jsx("div",{className:"text-right mb-3 text-sm text-red-400",children:e.pathNm})]})]}),s.jsxs("div",{className:"w-full p-0 m-0",children:[s.jsx(vn,{rootDb:t,onEdit:a,onNewMemo:g,onMove:y,onDelete:v,onBookmark:N,bookmark:n&&n.bookmark}),s.jsxs(P,{sx:{my:2},children:[n&&n.html==="N"?s.jsx(nt,{postData:n&&n.memo}):n&&n.html!=="N"&&n.memo&&s.jsx(wt,{text:n.memo}),s.jsx(oo,{imageList:n&&n.image}),!n&&s.jsx(P,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:s.jsx(lo,{sx:{mt:5}})})]}),s.jsx(bn,{userId:p?.uid,open:f,data:e.data,onClose:()=>i(!1),onPost:I})]})]})},In=({onSubmit:e,onCancel:t,isSubmitting:o,newMode:n})=>s.jsxs("div",{className:"flex justify-end mb-1.5 gap-1",children:[s.jsxs(de,{variant:"outlined",color:"success",disabled:o,onClick:l=>{l.preventDefault(),e(l)},children:[n?"새글":""," 저장"]}),s.jsx(de,{variant:"outlined",color:"error",onClick:t,children:"취소"})]}),yn=x.lazy(()=>Qe(()=>import("./index-B94BYDmb.js").then(e=>e.i),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31])));Xt.Quill.register("modules/imageDrop",Zt);Je.configure({languages:["javascript","ruby","python","java","cpp","kotlin","sql"]});const Sn={syntax:{highlight:e=>Je.highlightAuto(e).value},toolbar:[[{header:"1"},{header:"2"},{header:"3"},{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","video"],["clean"],["code-block"]],imageDrop:!0,clipboard:{matchVisual:!1}},Cn=["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","video","clean","code-block","code-custom"],jn=e=>{const[t,o]=x.useState(e.imageList),[n,l]=x.useState(e.htmlCheck==="Y"),[r,f]=x.useState(e.newMode?"":e.content),i=x.useRef(),u=x.useRef(),c=x.useRef(null),d=x.useRef(null),m=e.newMode,b=x.useRef([]),{height:p}=Tt(),a=ro.now().setZone("Asia/Seoul").toFormat("yyyy-MM-dd"),g={edTitle:m?"":e.title,edGbn:e.gbn?e.gbn:"etc",edDate:m?a:e.date,content:m?"":e.content,memoTxt:m?"":e.content,htmlCheck:e.htmlCheck},{register:h,handleSubmit:v,trigger:y,control:N,setValue:I,getValues:C,watch:j,formState:{errors:T,isSubmitting:R}}=io({mode:"onChange",defaultValues:g});x.useEffect(()=>{h("edDate",{required:!0,minLength:10}),h("edGbn",{required:!0}),h("htmlCheck"),h("memoTxt")},[]),x.useEffect(()=>{b.current=[],i.current=e.content,u.current=!1},[e.content]);const k=async S=>{m?await e.onNewSubmit(S,b.current):await e.onPostSubmit(S,t,b.current)},M=()=>{v(k)()},ee=S=>{console.log("onDelete.imageList=",S),o(S)},me=S=>{let w=i.current;S.ext==="jpg"?w+=`<img src='${S.url}'/>`:S.ext==="mp4"&&(w+=`<video preload="auto" controls="" src='${S.url}'></video>`),i.current=w},te=S=>{i.current=S},ge=S=>{console.log("handleFileUpload",S),b.current=S};function xe(S){i.current=S,I("content",S),y("content")}function U(S){console.log("handleChangeDate=",S);let w=he(S);w.format("YYYY-MM-DD HH:mm:ss"),console.log("handleChangeDate.dayjs=",w.format("YYYY-MM-DD HH:mm:ss")),I("edDate",w.format("YYYY-MM-DD")),y("edDate")}const oe=S=>{console.log("onChecked=",S),I("htmlCheck",S?"Y":"N"),l(S)},F=j("content"),_=[{value:"",text:"None"},{value:"react",text:"React"},{value:"css",text:"CSS"},{value:"android",text:"Android"},{value:"java",text:"JAVA"},{value:"image",text:"그림 / 사진"},{value:"etc",text:"기타"},{value:"mui",text:"MUI"}],ne=["React","JavaScript","Bash","Java","Kotlin","CSS","C++","C#","Command","Script","Python","Ruby","Go","Swift","Rust"],q=S=>{const w=c.current;if(w){const A=w.selectionStart,G=w.selectionEnd,V=r.slice(0,A),se=r.slice(G);f(V+S+se),I("memoTxt",V+S+se),setTimeout(()=>{w.selectionStart=w.selectionEnd=A+S.length,w.focus()},0)}},L=S=>{q(S)};return s.jsx("div",{className:"my-2 mb-[50px], w-full",children:s.jsxs("form",{onSubmit:v(k),style:{width:"100%",minHeight:"300px",maxHeight:{height:p},display:"flex",flexDirection:"column"},children:[s.jsx(In,{onSubmit:S=>M(),onCancel:e.onCancel,isSubmitting:R,newMode:m}),s.jsx(Qt,{control:N,onDelete:ee,onInsert:me,setContent:te,onFileUpload:ge,imageList:e.imageList}),s.jsxs("div",{className:"grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2 gap-2",children:[s.jsx(mo,{...h("edTitle",{required:"해당 필드는 필수입니다.",minLength:{value:1,message:"1글자 이상 입력해주세요."}}),fullWidth:!0,label:"제목",placeholder:"제목",variant:"filled",size:"small",error:!!T.edTitle}),s.jsx(co,{id:"edGbn",name:"edGbn",label:"구분",mdSize:6,control:N,defaultValue:C("edGbn"),selectList:_,error:!!T.edGbn,onChange:S=>{S.preventDefault();const w=S.target.value;console.log("edGbn=",C("edGbn")),I("edGbn",w)}}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ao,{id:"edDate",label:"일자",mdSize:6,value:he(C("edDate")),...h("edDate"),defaultValue:he(C("edDate")),onChange:U}),s.jsx(uo,{id:"html",checked:n,onChange:oe,label:"HTML사용"})]})]}),s.jsx(O,{}),s.jsxs("div",{className:"grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2 gap-2",children:[s.jsx("div",{className:"max-h-130 overflow-y-scroll",children:s.jsx(nt,{postData:r})}),s.jsxs("div",{children:[s.jsx(fo,{ref:c,className:"",value:r,onChange:S=>{I("memoTxt",S),f(S)},rows:22}),s.jsx(O,{}),s.jsxs("div",{className:"grid grid-cols-4 gap-2 xsm:grid-cols-5 sm:grid-cols-7 md:grid-cols-7 lg:grid-cols-8",children:[s.jsx(ce,{className:"cursor-pointer",variant:"light",color:"dark",onClick:()=>L("<box></box>"),children:"<Box>"}),s.jsx(ce,{className:"cursor-pointer",variant:"light",color:"dark",onClick:()=>L("</code>"),children:"</code>"}),ne.map((S,w)=>s.jsx(ce,{className:"cursor-pointer",variant:"light",color:"dark",onClick:()=>L("<code>"+S+"</code>"),children:S},w)),s.jsx(ce,{className:"cursor-pointer",variant:"light",color:"dark",onClick:()=>L('<a href="" target="_blank"></a>'),children:"Link"})]}),s.jsx(O,{})]})]}),s.jsx(x.Suspense,{fallback:s.jsx("div",{children:"Loading editor..."}),children:s.jsx(yn,{ref:d,fullWidth:!0,theme:"snow",id:"content",name:"content",type:"div",value:F,style:{minWidth:"400px",border:"1px solid primary.main",minHeight:"200px",height:"400px",maxHeight:"450px"},modules:Sn,formats:Cn,onChange:xe})}),s.jsx(O,{})]})})},Fe=e=>{const{rootDb:t,isLoading:o,memoDetailData:n}=e,{scrollYProgress:l}=tt();ot(l,{stiffness:100,damping:30,restDelta:.001});const r=Z(),f=x.useRef(),i=x.useRef();i.current=e.searchWord;const{memoId:u}=Ye(),c=Ie(),d=n?.fullIndex,{user:m}=ue();f.current=c.pathname.split("/")[2]==="insert",console.log("MemoDetailEdit.memoDetailData=",n?.title),console.log("MemoDetailEdit.newMode=",f.current);const b=()=>{const g=`/${t}/${u==="insert"?"":u}`;r(g,{state:{fullIndex:d}})},p=async(g,h)=>{console.log("onNewSubmit.values",g),console.log("onNewSubmit.fullIndex",d);const v=t==="memo"?`${t}_txt/${m.uid}/`:`${t}_txt/`,y=t==="memo"?`${t}/${m.uid}/`:`${t}/`;console.log("onNewSubmit.txtLocate",v),console.log("onNewSubmit.locate",y);const N=await ke(void 0,v,y,d,g);if(await Ee(`${t}_txt`,t,N,h),N!==void 0){const I=`/${t}/${N}`;r(I,{state:{reflash:!0}})}},a=async(g,h,v)=>{const y=t==="memo"?`${t}_txt/${m.uid}`:`${t}_txt`,N=t==="memo"?`${t}/${m.uid}`:t;await eo(y,N,u,h),console.log("onPostSubmit.values",g);const I=await ke(f.current?void 0:u,`${y}/`,`${N}/`,d,g);console.log("onPostSubmit.newKey=",I),console.log("onPostSubmit.files=",v);const C=await Ee(`${y}/`,`${N}/`,u,v);if(console.log("onNewSubmit.imageResult",C),console.log("onPostSubmit.fullIndex",d),t==="memo"&&d===void 0){const T=await Ft(m.uid,`${u}/fullIndex`);console.log("onPostSubmit.fullPath",T),T!==void 0&&Ot(`memo/${m.uid}/${T}/title`,g.edTitle)}f.current=!1;const j=`/${t}/${u}`;r(j,{state:{fullIndex:d,reflash:!0}})};return x.useEffect(()=>{n&&n.title!==void 0&&st({title:n.title,description:n.title});function g(){document.querySelectorAll("pre").forEach((h,v)=>{})}n&&n.memo!==null&&g()},[n]),u===""||m===void 0?s.jsx(s.Fragment,{}):(console.log("MemoDetailEdit.isLoading=",o),n===void 0||o?s.jsx(W,{}):s.jsx(s.Fragment,{children:s.jsx("div",{className:"w-full p-0 m-0",children:f.current===!1&&n&&(n.title===void 0||n.title===""||n.title===null)?s.jsx(W,{}):s.jsx(jn,{newMode:f.current,onPostSubmit:a,onNewSubmit:p,onCancel:b,title:n?.title,gbn:n?.gbn,date:n?.date,htmlCheck:n?.html?n?.html:"Y",content:n?.memo,imageList:n?.image})})}))},wn=x.lazy(async()=>await Qe(()=>import("./MemoMain-CsliOJPG.js"),__vite__mapDeps([32,1,2,24]))),Tn=({rootDb:e})=>{const t=Z(),{user:o}=ue(),n=x.useRef(),l=x.useRef(),r=x.useRef(!0),f=x.useRef(),i=x.useRef(),[u,c]=x.useState(),d=x.useRef(!1),m=Ie(),b=x.useRef(!1);b.current=m?.state?.reflash===!0;const p=Rt({queryKey:["treeMemo",o?.uid,n.current],queryFn:()=>So(e,o?.uid,n.current)});p.data!==void 0&&p.data!==""&&!d.current&&(d.current=!0);const a=()=>{const I=u;I&&(I.bookmark=I.bookmark==="Y"?"N":"Y"),At(o.uid,i.current,u.bookmark),c({...u,bookmark:I.bookmark})};x.useEffect(()=>{o!==void 0&&o!=null&&p.refetch()},[o]),x.useEffect(()=>{const I=async T=>{if(T!==""&&o){const R=await go(e,o?.uid,T,n.current);{const k=pt(p.data,{id:"",nm:""},T),M=k.id;l.current=k.nm,R.fullIndex=M,M!==f&&(f.current=M,_t(o.uid,T,M))}R.bookmark===void 0&&(R.bookmark="N"),c(R),r.current=!1}},C=m.pathname.split("/"),j=C.length>2?C[C.length-1]:"";r.current=!0,I(j),i.current=j},[m.pathname,o]),x.useEffect(()=>{o!==void 0&&o!=null&&p.refetch()},[b.current]);const g=I=>{d.current=!1,I!==void 0&&(n.current=I),p.refetch()},h=(I,C)=>{if(I===i.current)return;r.current=!0;const j=`/${e}/${I}`;t(j,{state:{fullIndex:f.current}})},v=()=>{if(o==null){alert("로그인 후 이용 가능합니다.");return}const I=`/${e}/insert/insert`;t(I)},y=I=>{},N=s.jsxs("div",{className:"",children:[s.jsx(Co,{className:"mt-3 ",children:e==="memo"?"메모장":"홈페이지관리"}),s.jsxs("div",{className:"flex gap-7 justify-center",children:[s.jsx(ae,{to:"/",children:"홈"}),e==="memo"?"":s.jsx(ae,{to:"/memo",children:"메모"}),s.jsx(ae,{to:"/todo",children:"TODO"}),s.jsx(ae,{to:"/tw",children:"Sheet"})]}),s.jsx(yo,{onNewMemoBtn:v,onSearchDataBtn:g}),d.current&&p.isFetched?s.jsx(fn,{expandIndex:f.current,data:p.data,onDetail:h}):s.jsx(W,{})]});return o&&o.uid===kt&&Kt,s.jsxs(Et,{sideType:"memo",title:e==="memo"?"메모장":"홈페이지관리",sideContents:N,children:[s.jsx(x.Suspense,{fallback:s.jsx(W,{}),children:s.jsxs(Dt,{children:[s.jsx(ie,{path:"/edit/:memoId",element:s.jsx(Fe,{rootDb:e,isLoading:r.current,searchWord:n.current,memoDetailData:u})}),s.jsx(ie,{path:"/insert/:memoId",element:s.jsx(Fe,{rootDb:e,isLoading:r.current,searchWord:n.current,memoDetailData:u})}),s.jsx(ie,{path:"/:memoId",element:s.jsx(Nn,{rootDb:e,isLoading:r.current,searchWord:n.current,memoDetailData:u,onTreeUpdate:g,pathNm:l.current,onBookmark:a,data:p.data})}),s.jsx(ie,{path:"*",element:s.jsx(wn,{searchWord:n.current,data:p.data,onNewMemoBtn:v,title:e==="memo"?"메모장 홈":"홈페이지관리 홈"})})]})}),e==="memo"?s.jsx(Io,{onSelected:y}):"",s.jsx(Ht,{})]})},pt=(e,t,o)=>{let n={};if(e)for(let l=0;l<e.length;l++){const r=e[l];if(r.id===o)return n.id=t.id+r.id,n.nm=t.nm+r.title,n;if(r.sub!==null&&r.sub!==void 0){if(n.id=t.id+r.id+"/sub/",n.nm=t.nm+r.title+" > ",n=pt(Object.values(r.sub),n,o),n.id&&n.id.endsWith(o))return n;n={}}}return n},$s=()=>s.jsx(Tn,{rootDb:"memo"});export{$s as default};
