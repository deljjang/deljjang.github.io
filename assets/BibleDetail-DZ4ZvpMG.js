import{r as f,n as O,f as q,q as G,o as Y,h as F,j as t,k as H,C as U,B as j,v as W,T,w as z,l as K,p as Q,_ as p}from"./index-Be5zgOa3.js";import{F as X}from"./Favorite-DJgiiBRn.js";import{u as Z,B as tt}from"./BibleBookmarkText-B4BITZck.js";import{A as C}from"./AniButton-BkGm189p.js";import{T as et}from"./TitleItem-BMUYnwtc.js";/* empty css                   */import{G as x}from"./Grid-A6JR1WF5.js";import"./Button-D-tEkZG6.js";const nt=e=>{const{t:c}=F(),b=new Array;if(e.data===void 0||e.data===null)return;const r=e.bibleId.split("_");for(let a=1;a<=e.data.cd3;a++){const o={nm:`${e.data.nm2}${a}${c("chapter")}`,key:e.data.id+"_"+a};b.push(o)}return r&&r.length===3?t.jsxs(T,{variant:"h6",sx:{display:"flex",alignItems:"center",flexDirection:"column",mb:4},children:[e.nm," ",r[2]," ",c("chapter")]}):t.jsxs(t.Fragment,{children:[t.jsx(T,{variant:"h6",sx:{display:"flex",alignItems:"center",flexDirection:"column",mb:4},children:e.nm}),t.jsx(x,{container:!0,spacing:2,columns:{xs:4,sm:6,md:10,lg:12},children:b.map((a,o)=>t.jsx(x,{item:!0,xs:1,md:1,children:t.jsx(z,{to:`/bible/${a.key}`,children:a.nm})},o))})]})},st=e=>{const c=e.dataText;if(e.data===void 0||e.data===null||c==null)return;const b=e.bibleId.split("_");return e.bibleId&&b.length!==3?t.jsx(t.Fragment,{}):t.jsxs(t.Fragment,{children:[t.jsx(T,{variant:"h6",sx:{display:"flex",alignItems:"center",flexDirection:"column",mb:4},children:e.nm}),c.map((r,a)=>{let o="text.primary";e.cd4+""===r.cd4&&(o="warning.main");const n=e.bookmark?.data?.filter(i=>i.id===r.id&&i.bookmark==="Y");return n&&n.length>0&&(r.bookmark="Y"),t.jsxs(x,{container:!0,spacing:2,columns:{xs:5,sm:6,md:10,lg:12},id:`id_${a+1}`,children:[t.jsx(x,{item:!0,xs:1,md:1,children:t.jsxs(j,{sx:{color:o,display:"flex"},children:[t.jsx(K,{sx:{alignItems:"center",textAlign:"top"},onClick:()=>e.onBookmark(r),children:r.nm}),n&&n.length>0&&t.jsx(X,{sx:{color:"red"}})]})}),t.jsx(x,{item:!0,xs:4,sm:5,md:9,lg:11,children:t.jsx(j,{sx:{color:o},children:t.jsx(Q,{text:r.text})})})]},a)})]})},ft=()=>{const[e,c]=f.useState(null),[b,r]=f.useState(!0),{query:a,setBibleBookmark:o}=Z(),n=f.useRef(),{bibleId:i}=O(),B=q(),[y,I]=f.useState(!1),[$,w]=f.useState(!1),{user:L}=G(),_=B?.state?.word,g=B?.state?.cd4,R=Y(),{t:E,i18n:P}=F();f.useEffect(()=>{if(i!==void 0){(async()=>{const m=await S(i,_);c(m),r(!1)})(),I(!1),w(!0);const s=i.split("_");if(n.current&&s.length===3){const m=n.current.cd3;I(Number(s[2])!==1),w(s[2]<m)}}},[i,_]),f.useEffect(()=>{g!==void 0&&setTimeout(()=>{M("","id_"+g)},1500)},[e,g]);const M=(l,s)=>{const m=document.getElementById(s);m&&m.scrollIntoView({block:"center",behavior:"smooth"})},N=l=>{L!==void 0&&o(l)},S=async(l,s)=>{if(l===""||l===void 0)return"";const V=(P.language.split("-")[0]==="en"?await p(()=>import("./bibleJson_en-OyZMwajI.js"),[]):await p(()=>import("./bibleJson-mLacnG04.js"),[])).default,A=(await p(()=>import("./bible-7rshX_PU.js"),[])).default,h=l.split("_");if(h.length<1)return;h.length>1&&V.map(u=>{u.id===h[0]+"_"+h[1]&&(n.current=u)});const k=new Array;if(h.length===3){for(let u in A){if(!u.includes(l+"_"))continue;let d=A[u];d.id=u;let v=d.txt;if(s!==void 0){const J=new RegExp(s,"gi");v=v.replace(J,`<span class='lightext'>${s}</span>`)}d.nm=`${n.current.nm2}${h[2]}:${d.cd4}`,d.text=v,k.push(d)}return k.sort((u,d)=>u.cd4-d.cd4),k}};if(i==="")return t.jsx(t.Fragment,{});const D=l=>{let s=i.split("_");s[2]=Number(s[2])+l,R(`/bible/${s[0]}_${s[1]}_${s[2]}`)};return t.jsxs(H.Fragment,{children:[t.jsx("div",{id:"back-to-top-anchor"}),t.jsx(tt,{}),t.jsx(et,{children:n.current!==null&&n.current!==void 0&&n.current.nm!==null?n.current.text:""}),t.jsx(nt,{data:n.current,bibleId:i}),t.jsx(st,{dataText:e,data:n.current,searchWord:_,bibleId:i,cd4:g,bookmark:a,onBookmark:N}),t.jsxs(U,{sx:{p:0},children:[b&&t.jsx(j,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:t.jsx(W,{sx:{mt:5}})}),i&&i.split("_").length===3?t.jsx(j,{sx:{display:"flex",justifyContent:"space-between",mt:5},children:t.jsxs(x,{container:!0,spacing:1,children:[y?t.jsx(x,{item:!0,xs:$?6:12,children:t.jsx(C,{type:"button",variant:"outlined",onClick:()=>D(-1),fullWidth:!0,children:`< ${E("prev")}`})}):"",$?t.jsx(x,{item:!0,xs:y?6:12,children:t.jsx(C,{type:"button",variant:"outlined",onClick:()=>D(1),fullWidth:!0,children:`${E("next")} >`})}):""]})}):""]})]})};export{ft as BibleDetail,ft as default};
