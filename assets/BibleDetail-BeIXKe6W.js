import{r as m,g as S,a as V,k as G,h as J,e as E,j as e,R as O,i as I,T as H,H as Y,_}from"./index-DgZ87gGQ.js";import{T as q}from"./LinkItem-BPOZG5cs.js";import{T as z}from"./TitleItem-DRYIhHc-.js";import{u as U,B as W}from"./BibleBookmarkText-DP24Sq9C.js";const K=t=>{const{t:c}=E(),f=new Array;if(t.data===void 0||t.data===null)return;const s=t.bibleId.split("_");for(let i=1;i<=t.data.cd3;i++){const a={nm:`${t.data.nm2}${i}${c("chapter")}`,key:t.data.id+"_"+i};f.push(a)}return s&&s.length===3?e.jsxs("div",{className:"flex items-center flex-col mb-8 text-lg font-semibold",children:[t.nm," ",s[2]," ",c("chapter")]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center flex-col mb-8 text-lg font-semibold",children:t.nm}),e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-10 lg:grid-cols-12 gap-4",children:f.map((i,a)=>e.jsx("div",{children:e.jsx(H,{to:`/bible/${i.key}`,children:i.nm})},a))})]})},Q=t=>{const c=t.dataText;if(t.data===void 0||t.data===null||c==null)return;const f=t.bibleId.split("_");return t.bibleId&&f.length!==3?e.jsx(e.Fragment,{}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center flex-col mb-8 text-lg font-semibold",children:t.nm}),c.map((s,i)=>{t.cd4+"",s.cd4;const a=t.bookmark?.data?.filter(l=>l.id===s.id&&l.bookmark==="Y");return a&&a.length>0&&(s.bookmark="Y"),e.jsxs("div",{className:"grid grid-cols-5 sm:grid-cols-6 md:grid-cols-10 lg:grid-cols-12 gap-4",id:`id_${i+1}`,children:[e.jsx("div",{className:"col-span-1",children:e.jsxs("div",{className:`flex ${t.cd4+""===s.cd4?"text-orange-500":"text-gray-900 dark:text-white"}`,children:[e.jsx(q,{className:"items-center text-top cursor-pointer",onClick:()=>t.onBookmark(s),children:s.nm}),a&&a.length>0&&e.jsx("svg",{className:"w-5 h-5 text-red-500 ml-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})})]})}),e.jsx("div",{className:"col-span-4 sm:col-span-5 md:col-span-9 lg:col-span-11",children:e.jsx("div",{className:t.cd4+""===s.cd4?"text-orange-500":"text-gray-900 dark:text-white",children:e.jsx(Y,{text:s.text})})})]},i)})]})},le=()=>{const[t,c]=m.useState(null),[f,s]=m.useState(!0),{query:i,setBibleBookmark:a}=U(),l=m.useRef(),{bibleId:r}=S(),k=V(),[T,B]=m.useState(!1),[p,w]=m.useState(!1),{user:R}=G(),h=k?.state?.word,b=k?.state?.cd4,L=J(),{t:y,i18n:C}=E();m.useEffect(()=>{if(r!==void 0){(async()=>{const x=await F(r,h);c(x),s(!1)})(),B(!1),w(!0);const n=r.split("_");if(l.current&&n.length===3){const x=l.current.cd3;B(Number(n[2])!==1),w(n[2]<x)}}},[r,h]),m.useEffect(()=>{b!==void 0&&setTimeout(()=>{D("","id_"+b)},1500)},[t,b]);const D=(o,n)=>{const x=document.getElementById(n);x&&x.scrollIntoView({block:"center",behavior:"smooth"})},A=o=>{R!==void 0&&a(o)},F=async(o,n)=>{if(o===""||o===void 0)return"";const M=(C.language.split("-")[0]==="en"?await _(()=>import("./bibleJson_en-OyZMwajI.js"),[]):await _(()=>import("./bibleJson-mLacnG04.js"),[])).default,$=(await _(()=>import("./bible-7rshX_PU.js"),[])).default,g=o.split("_");if(g.length<1)return;g.length>1&&M.map(d=>{d.id===g[0]+"_"+g[1]&&(l.current=d)});const j=new Array;if(g.length===3){for(let d in $){if(!d.includes(o+"_"))continue;let u=$[d];u.id=d;let v=u.txt;if(n!==void 0){const P=new RegExp(n,"gi");v=v.replace(P,`<span class='lightext'>${n}</span>`)}u.nm=`${l.current.nm2}${g[2]}:${u.cd4}`,u.text=v,j.push(u)}return j.sort((d,u)=>d.cd4-u.cd4),j}};if(r==="")return e.jsx(e.Fragment,{});const N=o=>{let n=r.split("_");n[2]=Number(n[2])+o,L(`/bible/${n[0]}_${n[1]}_${n[2]}`)};return e.jsxs(O.Fragment,{children:[e.jsx("div",{id:"back-to-top-anchor"}),e.jsx(W,{}),e.jsx(z,{children:l.current!==null&&l.current!==void 0&&l.current.nm!==null?l.current.text:""}),e.jsx(K,{data:l.current,bibleId:r}),e.jsx(Q,{dataText:t,data:l.current,searchWord:h,bibleId:r,cd4:b,bookmark:i,onBookmark:A}),e.jsxs(Container,{sx:{p:0},children:[f&&e.jsx(Box,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:e.jsx(CircularProgress,{sx:{mt:5}})}),r&&r.split("_").length===3?e.jsx(Box,{sx:{display:"flex",justifyContent:"space-between",mt:5},children:e.jsxs(Grid,{container:!0,spacing:1,children:[T?e.jsx(Grid,{item:!0,xs:p?6:12,children:e.jsx(I,{type:"button",variant:"outlined",onClick:()=>N(-1),fullWidth:!0,children:`< ${y("prev")}`})}):"",p?e.jsx(Grid,{item:!0,xs:T?6:12,children:e.jsx(I,{type:"button",variant:"outlined",onClick:()=>N(1),fullWidth:!0,children:`${y("next")} >`})}):""]})}):""]})]})};export{le as BibleDetail,le as default};
