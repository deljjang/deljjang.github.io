import{s as m,k as b,f as x,t as p,v as y,w as g,x as B,j as e,T as j,H as k}from"./index-DRYhf1EU.js";const v=()=>{const u=m(),{user:s}=b(),t=x({queryKey:["bibleBookmarks",s?.uid],queryFn:()=>l(),enabled:!!s?.uid});async function l(){if(!s?.uid)return null;const r=y(g,`bible_mark/${s.uid}`),a=await B(r);if(a.exists()){const n=a.val(),d=n?Object.values(n).filter(o=>o.bookmark==="Y"):[];return d.sort((o,c)=>o.id.split("_")[0]-c.id.split("_")[0]||o.id.split("_")[1]-c.id.split("_")[1]||o.cd3-c.cd3||o.cd4-c.cd4),d}else return[]}return{query:t,setBibleBookmark:r=>{if(s==null){console.error("사용자 정보가 없어 북마크를 설정할 수 없습니다.");return}let a="N";(r.bookmark===void 0||r.bookmark==="N")&&(a="Y");const n={...r,bookmark:a},d=`bible_mark/${s.uid}/${r.id}`;p(d,a==="N"?null:n),u.invalidateQueries({queryKey:["bibleBookmarks",s.uid]})}}},_=()=>{const{query:u}=v(),s=u.data;return s?e.jsxs(e.Fragment,{children:[s.map((t,l)=>{const i=t.id.split("_"),r=`${i[0]}_${i[1]}_${i[2]}`;return e.jsxs("div",{className:"grid grid-cols-5 sm:grid-cols-7 md:grid-cols-10 lg:grid-cols-12 gap-4 mb-4",id:`id_${l+1}`,children:[e.jsx("div",{className:"col-span-1",children:e.jsx(j,{to:`/bible/${r}`,state:{cd4:t.cd4},children:t.nm})}),e.jsxs("div",{className:"col-span-4 sm:col-span-6 md:col-span-9 lg:col-span-11",children:[e.jsx(k,{show:!0,text:t.ko}),e.jsx("div",{className:"text-sm text-red-600 dark:text-gray-700",children:e.jsx(k,{show:!0,text:t.en})})]})]},l)}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 my-4"})]}):null};export{_ as B,v as u};
