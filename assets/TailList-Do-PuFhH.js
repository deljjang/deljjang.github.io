import{q as d,p as x,t as m,G as f,n as h,k as b,o as v,j as r,bL as j,L as p,H as N,f as y}from"./index-BvAjFZAV.js";async function L(e,n=""){if(e==null||e==="")return"";let a=n===""?`memo/${e}`:`memo_txt/${e}`;e==="home"&&(a="home/");const s=d(x(m,a)),t=await f(s);if(!t.exists()){console.log("getFireData.null");return}if(!t.exists()){console.log("getTreeMemoData.exists");return}const o=t.val(),c=[];for(let i in o){const l=o[i];l.up===void 0?(l.id=i,l.fullIndex=i):(l.id=l.up,l.fullIndex=l.up),n===""||n===void 0?(l.sub!==null&&(l.children=g(l,l.up)),c.push(l)):(i==="-OZNT48PGjAjZLiXNY8F"&&console.log("blogMainSearch.data[i]=",o[i]),l.id=i,(l.memo+"").toLowerCase().indexOf(n.toLowerCase())>-1&&c.push(l))}return c.sort((i,l)=>i.title>l.title?1:-1),c}function g(e,n){const a=[];if(e===void 0||e.sub===void 0)return a;for(let s in e.sub){let t=e.sub[s];t.id=s,t.key=s}return Object.values(e.sub).sort((s,t)=>t.title-s.title).map(s=>{s.id=s.key,s.fullIndex=n+"/sub/"+s.key,s.sub!==null&&(s.children=g(s,s.fullIndex)),a.push(s)}),a}async function D(e){const n=b[e],a=d(x(m,"home_txt"),v("gbn"),h(n.id)),s=await f(a);if(!s.exists()){console.log("getFireData.null");return}const t=s.val(),o=[{title:"React",url:"-Nn8_VCOrqSvLCqp89KJ"},{title:"Android",url:"-NnHx-gx3DMgMWLvIW8F"},{title:"JAVA",url:"-Nn8cfz1D61YG_M_911F"},{title:"그림 / 사진",url:"-NnHs-GndQ5y00GDI_rN"},{title:"MUI",url:"-NnBulBVEYke6NAxzIHY"}],c=[];for(let i in t)o.filter(u=>u.url===i).length>0||(t[i].url=i,c.push(t[i]));return c.sort((i,l)=>i.title>l.title?1:-1),c}async function M(e,n){const a=d(x(m,"home_txt")),s=await f(a);if(!s.exists()){console.log("getFireData.null");return}const t=s.val(),o=[];for(let i in t)if(t[i].url=i,t[i].id=i,t[i].g="h",e===""||e===void 0)o.push(t[i]);else{const l=t[i].memo+"",u=t[i].title+"";(l.toLowerCase().indexOf(e.toLowerCase())>-1||u.toLowerCase().indexOf(e.toLowerCase())>-1)&&o.push(t[i])}if(n==null||n===""||e==="")return o.sort((i,l)=>i.title>l.title?1:-1),o;const c=await L(n,e);return o.push(...c),o.sort((i,l)=>i.title>l.title?1:-1),o}const T=({query:e,s:n,lnk:a="tw/search",index:s})=>r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-2",children:e.data.map((t,o)=>(t.key=o,r.jsx(w,{lnk:a,post:t,s:n,index:o},t.key)))});function w({post:e,s:n,lnk:a}){const s=e.g==="m"?r.jsx("span",{className:"menu-item-icon-size menu-item-icon-active",children:r.jsx(j,{})}):null,t=a==="blog"?`/${a}/${e.url?e.url:e.id}`:`/${a}/${e.url?e.url:e.id}?s=${n}&g=${e.g?e.g:"m"}`;return r.jsx(p,{to:t,state:{s:n},className:"no-underline",children:r.jsx(k,{title:e.title,icon:s,children:r.jsx("div",{className:"max-h-[140px] overflow-hidden mt-1 text-gray-500 text-theme-sm dark:text-gray-400",children:e.html==="N"?r.jsx(N,{postData:e.memo}):e.memo!==null&&r.jsx(y,{text:e.memo,runHighlight:!1})})})},e.key)}const k=({title:e,children:n,className:a="",desc:s="",icon:t=null})=>r.jsxs("div",{className:`rounded-2xl border border-gray-200 
      bg-white dark:border-gray-800 dark:bg-white/[0.03] 
      overflow-hidden ${a}`,children:[r.jsxs("div",{className:"flex flex-col px-4 py-3",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[t&&r.jsx("span",{className:"flex-shrink-0",children:t}),r.jsx("h3",{className:"text-base font-medium text-gray-800 dark:text-white/90",children:e})]}),s&&r.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:s})]}),r.jsx("div",{className:"p-4 border-t bg-stone-100 dark:bg-stone-950 border-gray-100 dark:border-gray-800 sm:p-6",children:r.jsx("div",{children:n})})]});export{T,M as a,D as b};
