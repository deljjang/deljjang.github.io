import{t as m,r as n,j as t,n as u,z as d}from"./index-Bq2okyO2.js";import{u as x}from"./useQuery-BNJmdsd_.js";import{L as b}from"./LinkItem-DmovyF0G.js";import{b as f}from"./bibleJson-BDv-vx3j.js";import{b as a}from"./bibleTxt-CDg_iih8.js";import{L as h}from"./Loading-B2jgiSoZ.js";import{n as p}from"./commonUtil-BuOP-BrX.js";import{T as c}from"./TwSearchBox-C1Iy8MRn.js";import{G as o}from"./Grid-WFSBEAVW.js";import"./useBaseQuery-BXiiY0J8.js";import"./Typography-BfnFn_Qs.js";import"./Container-CEuUXhjH.js";import"./styled-DCHl2VxL.js";import"./CircularProgress-DE_ns1Ov.js";import"./TwBadge-DboCGo9m.js";import"./useTheme-CX-Cb1hk.js";const g=s=>{if(!(s.bibleList===void 0||s.bibleList===null))return s.bibleList.map((r,i)=>t.jsxs(o,{container:!0,spacing:2,columns:{xs:5,sm:6,md:10,lg:12},children:[t.jsxs(o,{item:!0,xs:1,md:1,children:[f[r.cd1][r.cd2].nm2,r.cd3,":",r.cd4]}),t.jsx(o,{item:!0,xs:4,sm:5,md:9,lg:11,children:t.jsx(b,{to:`/bible/${r.cd1}_${r.cd2}_${r.cd3}`,state:{cd4:r.cd4,word:s.word},children:t.jsx(d,{show:!0,text:r.txt})})})]},i))},j=s=>{if(console.log("BibleSearch.word="+s),s==="")return[];const r=new Array;for(let i in a){let e={...a[i]};if(e.txt.match(s)){e.id=i;const l=new RegExp(s,"gi");e.txt=e.txt.replace(l,`<span class='lightext'>${s}</span>`),r.push(e)}}return r},G=()=>{const r=m().state,i=n.useRef(r===null?"":r.s),e=x({queryKey:["getBibleData",r&&r?.s?r.s:""],queryFn:()=>j(r?.s)});return n.useEffect(()=>{i.current=r===null?"":r.s,console.log("BibleSearch.useEffect.searchWord="+i.current),e.refetch()},[r]),e.isLoading?t.jsxs(t.Fragment,{children:[t.jsx(c,{state:r,gubun:"bible"}),t.jsx(h,{})]}):e.error?t.jsxs("div",{children:["Error: ",e.error.message]}):t.jsxs("div",{children:[t.jsx(c,{state:r,gubun:"bible"}),t.jsxs(u,{children:["검색 결과 : ",p(e.data?e.data?.length:"0")]}),t.jsx(g,{bibleList:e.data,word:i.current})]})};export{G as default};
