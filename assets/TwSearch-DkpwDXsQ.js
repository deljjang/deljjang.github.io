import{j as e,v as u,k as D,c as b,r,aP as L,R as M,y as R}from"./index-1_qJUBN6.js";import{T as v}from"./Footer-CdCNwh03.js";import{L as a}from"./Loading-D_u8rlPx.js";import{u as w}from"./useQuery-DB191cIg.js";import{b as E,T as I}from"./TailList-CwE4UlqQ.js";import k from"./TwDetail-BbJlTbHL.js";import{f as q}from"./fireMemoDetail-Bb2lg2rV.js";import{T as F}from"./TwSearchBox-Bq2ciIl_.js";import"./TwLinkItem-bMvoJLmv.js";import"./Divider-DVr9IuIA.js";import"./dividerClasses-tiPCXxvL.js";import"./Link-CFnK96Eb.js";import"./Container-BxtHW2aL.js";import"./styled-_ls8og4v.js";import"./CircularProgress-wG9LtzG2.js";import"./useBaseQuery-Ci5IA4Y6.js";import"./HtmlCode-DFiLXNpt.js";import"./copy-CcjdCk3G.js";import"./TwBadge-ChE5l_AE.js";import"./toPropertyKey-DCwh5dYN.js";import"./SinyImageList-DPPIxYbo.js";import"./index-Chjiymov.js";import"./ImageListItem-CFIloyoA.js";import"./isMuiElement-B5MgVdT0.js";import"./ComponentCard-zJBXmkxn.js";import"./CodeText-zdkAIRMi.js";import"./commonUtil-Bk7xUNU6.js";import"./AniButton-CiEVFtvR.js";import"./Button-ChmR-2uQ.js";import"./fireDatabase-Dp0MXAE7.js";import"./fireStorage-DkV_bRtI.js";const P=({uid:o,state:t})=>{const s=w({queryKey:["blogMainSearch",t&&t?.s?t.s:""],queryFn:()=>E(t?.s,o===u?u:"")});return s.isLoading?e.jsx(a,{}):s.error?e.jsxs("div",{children:["Error: ",s.error.message]}):e.jsx(I,{query:s,index:"1",s:t&&t?.s?t.s:"",sx:{mt:2}})};function ut(){const o=D(),t=o.state;console.log("TailSearch.state=",t);const{user:s}=b(),d=r.useRef(t===null?"":t.s),[m,f]=r.useState(),[x]=L(),h=x.get("g"),[j,g]=r.useState(),[S,c]=r.useState(!0),l=h==="h"?"home":"memo";return r.useEffect(()=>{const y=async p=>{if(p!==""){const T=await q(l,s?.uid,p,d.current);g(T),c(!1)}};c(!0);const n=o.pathname.split("/"),i=n.length>2?n[n.length-1]:"";f(i),i!=null&&i!=="search"&&y(i)},[o.pathname]),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",alignContent:"center",justifyContent:"center"},children:[e.jsxs(r.Suspense,{fallback:e.jsx(a,{}),children:[e.jsx(M,{children:e.jsx(R,{path:"/:memoId",element:e.jsx(k,{rootDb:l,isLoading:S,memoDetailData:j})})}),m==="search"?e.jsx(F,{state:t,gubun:"tw"}):"",s===null?e.jsx(a,{}):m==="search"&&t!==null&&t?.s!==""&&e.jsx(r.Suspense,{fallback:e.jsx(a,{}),children:e.jsx(P,{index:"1",uid:s?.uid,state:t})})]}),e.jsx(v,{})]})}export{ut as default};
