import{j as a,B as R,r,N as v,O as D,S as C}from"./index-BH1tI84G.js";import{L as G}from"./Loading-gw_dSdSE.js";import{M as j}from"./MuiCard-B74B-pcF.js";import{S as K,a as Y}from"./SinyTabs-BTnRY7oN.js";import{H as $,r as J}from"./ht-theme-main.min-pZVMiZn6.js";import{A as h}from"./AniButton-C7GeuW7R.js";import{u as Q}from"./index.esm-C_o8p0A_.js";import{n as X,s as Z}from"./commonUtil-BpBg--lF.js";/* empty css                */import{u as tt}from"./useTheme-BDGva-Z0.js";import{C as F}from"./Container-BQdTcffS.js";import{C as et}from"./CardHeader-DSvbok9v.js";import{T as at}from"./TextField-CnVQwGIJ.js";import"./CircularProgress-DOqzH0BJ.js";import"./Card-D74XXRrA.js";import"./CardContent-CUhKhYCH.js";import"./MenuItem-CP8YMQQq.js";import"./Menu-CaiGhL9X.js";import"./useSlotProps-DXJeNroY.js";import"./resolveComponentProps-BokKTWWp.js";import"./utils-CTQNJy8e.js";import"./ownerWindow-DvT1GKkC.js";import"./useControlled-DauyLZuE.js";import"./dividerClasses-B3rRPCnK.js";import"./Tabs-0KQ3qLsx.js";import"./KeyboardArrowRight-CutLQ1Ru.js";import"./Button-ZhHB92lW.js";import"./styled-BBEArGbq.js";import"./isMuiElement-BiVUYafV.js";const nt=e=>a.jsxs(R,{sx:{flexGrow:1,my:2,width:"100%",display:"grid",gridTemplateColumns:"64px 64px 64px 64px",flexDirection:"row",alignItems:"center",alignContent:"center",justifyContent:"center",textAlign:"center",whiteSpace:"nowrap"},children:[a.jsx(h,{type:"button",size:"small",variant:"outlined",color:"warning",onClick:e.onInsert,children:"추가"}),a.jsx(h,{type:"button",size:"small",variant:"outlined",color:"error",onClick:e.onDelete,children:"삭제"}),a.jsx(h,{type:"button",size:"small",variant:"outlined",color:"success",onClick:e.onReload,children:"리로드"}),a.jsx(h,{type:"button",size:"small",variant:"outlined",onClick:e.onCsvSave,children:"csv저장"})]});J();const S=e=>{const o=r.useRef(null),i=r.useRef(null),[c,m]=r.useState([]),[W,b]=r.useState(0),P=tt().palette.mode==="dark"?"ht-theme-main-dark-auto":"ht-theme-main",T=async t=>{console.log("commPost.data=",t);try{const n=await v.post(D+e.postUrl,t);return console.log("commPost.result=",n.data),n.data}catch{console.log("fail")}},N=async()=>{const t=await v.get(D+e.listUrl);console.log("load.axios=",t.data?.length);try{m(t.data),b(t.data?.length)}catch{console.log("fail")}};r.useEffect(()=>{N()},[]);const U=async()=>{await N(),y()},E=async()=>{o.current.hotInstance.getPlugin("exportFile").downloadFile("csv",{filename:e.csvFileName,mimeType:"text/csv",bom:!1,columnDelimiter:",",rowDelimiter:`\r
`})},L=()=>{},q=(t,n)=>{console.log("afterSelectRows.row=",t,", selectionLayerLevel=",n)},O=e.columns.map((t,n)=>({value:n,text:t.title})),y=()=>{try{const t=o.current?.hotInstance,n=t?.getPlugin("filters");if(n){const l=f("columns1");console.log("columnValue=",l,"text=",f("filterField1")),e.columns.forEach((g,d)=>{n?.removeConditions(d)}),n?.addCondition(Number(l),"contains",[f("filterField1")]),n?.filter(),t?.render(),console.log("filtersPlugin=",n),console.log("hotRef=",o.current);const x=t.getData().length;b(x)}}catch(t){console.error("Error:",t.message)}},{register:I,control:k,setValue:A,getValues:f,formState:{errors:B}}=Q({mode:"onChange"});I("filterField1",{required:!0});const V=()=>{console.log("afterChangesObserved !!")},H=async(t,n)=>{if(console.log("afterChange.change=",t,", source=",n),console.log("afterChange.change.length=",t?.length),t!==null){const l=o.current?.hotInstance;if(l?.getPlugin("filters")){const x=l.getData(),g=[];t.forEach((d,w)=>{const p={};e.columns.forEach((s,z)=>{p[s.data]=x[w][z]}),g.push(p)}),console.log("afterChange.saveData=",g),g.forEach(async(d,w)=>{console.log("afterChange.item=",d);const p=await T(d);console.log("afterChange.result=",w,p),c.map(s=>{(s.seq===void 0||s.seq===null)&&s.wdNm===d.wdNm&&s.awdNm===d.awdNm&&(console.log("afterChange.rowData1=",s),s.seq=p.seq,console.log("afterChange.rowData2=",s))})}),l.render()}}},M=()=>{const t=o.current.hotInstance;console.log("onInsert:",t),t.alter("insert_row_above",0,1)},_=async()=>{const t=o.current.hotInstance;if(console.log("onDelete:",t),t&&i.current!==null){if(t?.getPlugin("filters")){const l=t.getData();console.log("onDelete.filteredData=",l[i.current]);const u={seq:l[i.current][0]};console.log("onDelete.data=",u);const x=await v.post(D+e.deleteUrl,u);console.log("onDelete.result=",x.data)}t.alter("remove_row",i.current,1)}};return a.jsxs(F,{style:{maxWidth:"100%",width:"100%",paddingLeft:"0px",paddingRight:"0px"},sx:{mt:0},children:[a.jsxs(R,{sx:{maxWidth:"100%",paddingLeft:"0px",paddingRight:"0px",width:"100%",display:"grid",gridTemplateColumns:"200px 200px 300px ",flexDirection:"col",alignItems:"baseline",alignContent:"left",justifyContent:"left",textAlign:"center",whiteSpace:"nowrap"},children:[a.jsx(et,{title:e.title+" : "+X(W)}),a.jsx(K,{id:"columns1",name:"columns1",label:"조회 컬럼",control:k,defaultValue:e.selectDefault?e.selectDefault:"1",variant:"standard",margin:"normal",selectList:O,error:!!B.columns1,onChange:t=>{t.preventDefault();const n=t.target.value;console.log("columns1=",f("columns1")),A("columns1",n),n!=""&&y()}}),a.jsx(at,{...I("filterField1"),fullWidth:!0,placeholder:"조회",variant:"standard",style:{paddingLeft:"10px"},onKeyUp:y})]}),a.jsx($,{ref:o,data:c,themeName:P,rowHeaders:!0,colHeaders:!0,autoWrapRow:!0,height:"560px",width:"auto",contextMenu:!0,observeChanges:!0,columnSorting:!0,afterChange:H,afterChangesObserved:V,afterFilter:L,afterSelectRows:q,afterSelection:(t,n,l,u)=>{console.log("afterSelection.row=",t,", column=",n,", row2=",l,", column2=",u),i.current=t},licenseKey:"non-commercial-and-evaluation",columns:e.columns,cells:(t,n)=>e.columns[n].readOnly===!0?{readOnly:!0}:{},colWidths:e.colWidths,manualColumnResize:!0,filters:!0}),a.jsx(nt,{onInsert:M,onDelete:_,onReload:U,onCsvSave:E})]})},ot=()=>{const e=[{title:"ID",type:"numeric",data:"seq",readOnly:!0},{title:"도메인대분류",type:"text",data:"dmn1"},{title:"도메인중분류",type:"text",data:"dmn2"},{title:"도메인명",type:"text",data:"dmn"},{title:"도메인설명",type:"text",data:"dmnDscr",columnSorting:{headerAction:!1}},{title:"데이터타입",type:"text",data:"ty"},{title:"데이터길이",type:"text",data:"len"},{title:"소숫점길이",type:"text",data:"len2"},{title:"저장형식",type:"text",data:"sav"},{title:"표현형식",type:"text",data:"exprs"},{title:"단위",type:"text",data:"unt"},{title:"허용값",type:"text",data:"vl"},{title:"사용건수",type:"numeric",data:"cnt"}],o=[50,180,200,400,300,100,150,150,100,150,150,150,150,150,140];return a.jsx(S,{csvFileName:"exported_dmn",postUrl:"/dmn/post.do",listUrl:"/dmn/list.do",deleteUrl:"/dmn/delete.do",title:"도메인정보",columns:e,colWidths:o,selectDefault:"3"})},lt=()=>{const e=[{title:"ID",type:"numeric",data:"seq",readOnly:!0},{title:"용어명",type:"text",data:"trmNm"},{title:"영문약어명",type:"text",data:"awdNm"},{title:"영문명",type:"text",data:"trmEnNm"},{title:"단어설명",type:"text",data:"trmDscr",columnSorting:{headerAction:!1}},{title:"도메인명",type:"text",data:"dmn"},{title:"허용값",type:"text",data:"vl"},{title:"관리부서명",type:"text",data:"deptNm"},{title:"표준코드명",type:"text",data:"cdNm"},{title:"업무분야",type:"text",data:"dutDv"},{title:"저장형식",type:"text",data:"sav"},{title:"표현형식",type:"text",data:"dis"},{title:"용어 이음동의어 목록",type:"text",data:"lst"},{title:"시스템명",type:"text",data:"sys"},{title:"사용여부",type:"text",data:"useYn"}],o=[50,180,200,400,300,100,150,150,100,150,150,150,150,150,140];return a.jsx(S,{csvFileName:"exported_trm",postUrl:"/trm/post.do",listUrl:"/trm/list.do",deleteUrl:"/trm/delete.do",title:"용어정보",columns:e,colWidths:o})},st=()=>{const e=[{title:"ID",type:"numeric",data:"seq",readOnly:!0},{title:"단어명",type:"text",data:"wdNm",readOnly:!1},{title:"영문약어명",type:"text",data:"awdNm"},{title:"영문명",type:"text",data:"wdEnNm"},{title:"단어설명",type:"text",data:"wdDscr"},{title:"형식단어여부",type:"text",data:"wdYn"},{title:"도메인분류명",type:"text",data:"dmnDvNm"},{title:"이음동의어",type:"text",data:"synmVl"},{title:"금칙어",type:"text",data:"notNm"},{title:"도메인그룹명",type:"text",data:"dmnGrpNm"},{title:"시스템",type:"text",data:"sys"}],o=[50,180,200,350,400,100,150,150,100,150,100];return a.jsx(S,{csvFileName:"exported_wd",postUrl:"/wd/post.do",listUrl:"/wd/list.do",deleteUrl:"/wd/delete.do",title:"단어정보",columns:e,colWidths:o})},Ot=()=>{const[e,o]=r.useState(0);r.useEffect(()=>{Z({title:"표준",description:"표준"})},[]),r.useEffect(()=>{const c=C.findIndex(m=>`#${m.id}`===window.location.hash);o(c!==-1?c:e)},[e]);const i=(c,m)=>{window.location.hash=`#${C[m].id}`,o(m)};return a.jsx(a.Fragment,{children:a.jsxs(F,{style:{maxWidth:"100%",width:"100%"},sx:{mt:3},children:[a.jsx(Y,{tabValue:e,onChange:i,tabs:C}),a.jsx(r.Suspense,{fallback:a.jsx(G,{}),children:a.jsxs(a.Fragment,{children:[a.jsx(j,{value:e,index:0,style:{maxWidth:"100%",width:"100%",paddingLeft:"0px",paddingRight:"0px"},children:a.jsx(st,{})}),a.jsx(j,{value:e,index:1,style:{maxWidth:"100%",width:"100%",paddingLeft:"0px",paddingRight:"0px"},children:a.jsx(lt,{})}),a.jsx(j,{value:e,index:2,style:{maxWidth:"100%",width:"100%",paddingLeft:"0px",paddingRight:"0px"},children:a.jsx(ot,{})})]})})]})})};export{Ot as default};
