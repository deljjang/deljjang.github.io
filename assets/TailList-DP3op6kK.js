import{q as d,a as x,f as m,g as f,e as h,m as b,o as v,j as r,aS as j,b1 as p,H as N}from"./index-DJRzwKtZ.js";import{H as y}from"./HtmlCode-CInata_M.js";async function w(e,n=""){if(e==null||e==="")return"";let a=n===""?`memo/${e}`:`memo_txt/${e}`;e==="home"&&(a="home/");const i=d(x(m,a)),t=await f(i);if(!t.exists()){console.log("getFireData.null");return}if(!t.exists()){console.log("getTreeMemoData.exists");return}const o=t.val(),c=[];for(let s in o){const l=o[s];l.up===void 0?(l.id=s,l.fullIndex=s):(l.id=l.up,l.fullIndex=l.up),n===""||n===void 0?(l.sub!==null&&(l.children=g(l,l.up)),c.push(l)):(s==="-OZNT48PGjAjZLiXNY8F"&&console.log("blogMainSearch.data[i]=",o[s]),l.id=s,(l.memo+"").toLowerCase().indexOf(n.toLowerCase())>-1&&c.push(l))}return c.sort((s,l)=>s.title>l.title?1:-1),c}function g(e,n){const a=[];if(e===void 0||e.sub===void 0)return a;for(let i in e.sub){let t=e.sub[i];t.id=i,t.key=i}return Object.values(e.sub).sort((i,t)=>t.title-i.title).map(i=>{i.id=i.key,i.fullIndex=n+"/sub/"+i.key,i.sub!==null&&(i.children=g(i,i.fullIndex)),a.push(i)}),a}async function M(e){const n=b[e],a=d(x(m,"home_txt"),v("gbn"),h(n.id)),i=await f(a);if(!i.exists()){console.log("getFireData.null");return}const t=i.val(),o=[{title:"React",url:"-Nn8_VCOrqSvLCqp89KJ"},{title:"Android",url:"-NnHx-gx3DMgMWLvIW8F"},{title:"JAVA",url:"-Nn8cfz1D61YG_M_911F"},{title:"그림 / 사진",url:"-NnHs-GndQ5y00GDI_rN"},{title:"MUI",url:"-NnBulBVEYke6NAxzIHY"}],c=[];for(let s in t)o.filter(u=>u.url===s).length>0||(t[s].url=s,c.push(t[s]));return c.sort((s,l)=>s.title>l.title?1:-1),c}async function T(e,n){const a=d(x(m,"home_txt")),i=await f(a);if(!i.exists()){console.log("getFireData.null");return}const t=i.val(),o=[];for(let s in t)if(t[s].url=s,t[s].id=s,t[s].g="h",e===""||e===void 0)o.push(t[s]);else{const l=t[s].memo+"",u=t[s].title+"";(l.toLowerCase().indexOf(e.toLowerCase())>-1||u.toLowerCase().indexOf(e.toLowerCase())>-1)&&o.push(t[s])}if(n==null||n===""||e==="")return o.sort((s,l)=>s.title>l.title?1:-1),o;const c=await w(n,e);return o.push(...c),o.sort((s,l)=>s.title>l.title?1:-1),o}const $=({query:e,s:n,lnk:a="tw/search",index:i})=>r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-2",children:e.data.map((t,o)=>(t.key=o,r.jsx(L,{lnk:a,post:t,s:n,index:o},t.key)))});function L({post:e,s:n,lnk:a}){const i=e.g==="m"?r.jsx("span",{className:"menu-item-icon-size menu-item-icon-active",children:r.jsx(j,{})}):null,t=a==="blog"?`/${a}/${e.url?e.url:e.id}`:`/${a}/${e.url?e.url:e.id}?s=${n}&g=${e.g?e.g:"m"}`;return r.jsx(p,{to:t,state:{s:n},className:"no-underline",children:r.jsx(C,{title:e.title,icon:i,children:r.jsx("div",{className:"max-h-[140px] overflow-hidden mt-1 text-gray-500 text-theme-sm dark:text-gray-400",children:e.html==="N"?r.jsx(y,{postData:e.memo}):e.memo!==null&&r.jsx(N,{text:e.memo,runHighlight:!1})})})},e.key)}const C=({title:e,children:n,className:a="",desc:i="",icon:t=null})=>r.jsxs("div",{className:`rounded-2xl border border-gray-200 
      bg-white dark:border-gray-800 dark:bg-white/[0.03] 
      overflow-hidden ${a}`,children:[r.jsxs("div",{className:"flex flex-col px-4 py-3",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[t&&r.jsx("span",{className:"flex-shrink-0",children:t}),r.jsx("h3",{className:"text-base font-medium text-gray-800 dark:text-white/90",children:e})]}),i&&r.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:i})]}),r.jsx("div",{className:"p-4 border-t bg-stone-100 dark:bg-stone-950 border-gray-100 dark:border-gray-800 sm:p-6",children:r.jsx("div",{children:n})})]});export{$ as T,M as a,T as b};
