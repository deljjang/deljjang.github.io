import{j as r,v as u,t as D,e as b,r as o,aK as L,g as M,h as w}from"./index-Bq2okyO2.js";import{T as v}from"./Footer-Lko9pIeR.js";import{L as a}from"./Loading-B2jgiSoZ.js";import{u as E}from"./useQuery-BNJmdsd_.js";import{b as I,T as R}from"./TwList-DFNTzK1k.js";import q from"./TwDetail-C9QAoFed.js";import{f as F}from"./fireMemoDetail-ZMonhKoQ.js";import{T as k}from"./TwSearchBox-C1Iy8MRn.js";import"./LinkItem-DmovyF0G.js";import"./Typography-BfnFn_Qs.js";import"./TwLinkItem-B8UrJan3.js";import"./Divider-CoH0J48V.js";import"./dividerClasses-KAVeIEaH.js";import"./Link-DErjXeoJ.js";import"./Container-CEuUXhjH.js";import"./styled-DCHl2VxL.js";import"./CircularProgress-DE_ns1Ov.js";import"./useBaseQuery-BXiiY0J8.js";import"./HtmlCode-CcJgXMxz.js";/* empty css                 */import"./copy-B2H1mvTf.js";import"./TwBadge-DboCGo9m.js";import"./index-wES6wE32.js";import"./DndProvider-BV4eX6zg.js";import"./TwButton-DnBv8mIC.js";import"./ComponentCard-BPcemxZ9.js";import"./TwRadio-DMUnqq83.js";import"./toPropertyKey-DCwh5dYN.js";import"./TwInput-C6zKzPJT.js";import"./SinyImageList-CFEByq8N.js";import"./ImageListItem-DlZmjzGn.js";import"./isMuiElement-Bvb7Om-V.js";import"./CodeText-fx9oxgjL.js";import"./commonUtil-BuOP-BrX.js";import"./AniButton-BSbJmPQ5.js";import"./Button-DCoXIv0f.js";import"./fireDatabase-CYS3RlZB.js";const C=({uid:s,state:t})=>{const e=E({queryKey:["blogMainSearch",t&&t?.s?t.s:""],queryFn:()=>I(t?.s,s===u?u:"")});return e.isLoading?r.jsx(a,{}):e.error?r.jsxs("div",{children:["Error: ",e.error.message]}):r.jsx(R,{query:e,index:"1",s:t&&t?.s?t.s:"",sx:{mt:2}})};function gt(){const s=D(),t=s.state;console.log("TailSearch.state=",t);const{user:e}=b(),d=o.useRef(t===null?"":t.s),[n,f]=o.useState(),[h]=L(),x=h.get("g"),[j,g]=o.useState(),[S,p]=o.useState(!0),c=x==="h"?"home":"memo";return o.useEffect(()=>{const T=async l=>{if(l!==""){const y=await F(c,e?.uid,l,d.current);g(y),p(!1)}};p(!0);const m=s.pathname.split("/"),i=m.length>2?m[m.length-1]:"";f(i),i!=null&&i!=="search"&&T(i)},[s.pathname]),r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",alignContent:"center",justifyContent:"center"},children:[r.jsxs(o.Suspense,{fallback:r.jsx(a,{}),children:[r.jsx(M,{children:r.jsx(w,{path:"/:memoId",element:r.jsx(q,{rootDb:c,isLoading:S,memoDetailData:j})})}),n==="search"?r.jsx(k,{state:t,gubun:"tw"}):"",e===null?r.jsx(a,{}):n==="search"&&t!==null&&t?.s!==""&&r.jsx(o.Suspense,{fallback:r.jsx(a,{}),children:r.jsx(C,{index:"1",uid:e?.uid,state:t})})]}),r.jsx(v,{})]})}export{gt as default};
