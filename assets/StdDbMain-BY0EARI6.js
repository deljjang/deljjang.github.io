import{j as a,B as R,r,W as G,Q as Y,C as F,q as K,S as $,Y as v,Z as D,U as Q,s as Z,_ as C,L as J}from"./index-DxojyiUM.js";import{M as j}from"./MuiCard-C3p-Lty9.js";import{S as X,a as tt}from"./SinyTabs-p35lZsV6.js";import{A as p}from"./AniButton-DAIp8LXf.js";import{C as et}from"./CardHeader-BArJH7FJ.js";import{T as at}from"./TextField-CullgaF_.js";import"./Card-BREASHYj.js";import"./CardContent-1-FGJf_P.js";import"./Tabs-TnIi4q7q.js";import"./KeyboardArrowRight-Bn1yoNu_.js";import"./Button-D122SRg-.js";const nt=e=>a.jsxs(R,{sx:{flexGrow:1,my:2,width:"100%",display:"grid",gridTemplateColumns:"64px 64px 64px 64px",flexDirection:"row",alignItems:"center",alignContent:"center",justifyContent:"center",textAlign:"center",whiteSpace:"nowrap"},children:[a.jsx(p,{type:"button",size:"small",variant:"outlined",color:"warning",onClick:e.onInsert,children:"추가"}),a.jsx(p,{type:"button",size:"small",variant:"outlined",color:"error",onClick:e.onDelete,children:"삭제"}),a.jsx(p,{type:"button",size:"small",variant:"outlined",color:"success",onClick:e.onReload,children:"리로드"}),a.jsx(p,{type:"button",size:"small",variant:"outlined",onClick:e.onCsvSave,children:"csv저장"})]});Q();const S=e=>{const l=r.useRef(null),i=r.useRef(null),[c,u]=r.useState([]),[W,b]=r.useState(0),U=G().palette.mode==="dark"?"ht-theme-main-dark-auto":"ht-theme-main",P=async t=>{console.log("commPost.data=",t);try{const n=await v.post(D+e.postUrl,t);return console.log("commPost.result=",n.data),n.data}catch{console.log("fail")}},N=async()=>{const t=await v.get(D+e.listUrl);console.log("load.axios=",t.data?.length);try{u(t.data),b(t.data?.length)}catch{console.log("fail")}};r.useEffect(()=>{N()},[]);const T=async()=>{await N(),y()},E=async()=>{l.current.hotInstance.getPlugin("exportFile").downloadFile("csv",{filename:e.csvFileName,mimeType:"text/csv",bom:!1,columnDelimiter:",",rowDelimiter:`\r
`})},L=()=>{},q=(t,n)=>{console.log("afterSelectRows.row=",t,", selectionLayerLevel=",n)},O=e.columns.map((t,n)=>({value:n,text:t.title})),y=()=>{try{const t=l.current?.hotInstance,n=t?.getPlugin("filters");if(n){const o=h("columns1");console.log("columnValue=",o,"text=",h("filterField1")),e.columns.forEach((f,d)=>{n?.removeConditions(d)}),n?.addCondition(Number(o),"contains",[h("filterField1")]),n?.filter(),t?.render(),console.log("filtersPlugin=",n),console.log("hotRef=",l.current);const x=t.getData().length;b(x)}}catch(t){console.error("Error:",t.message)}},{register:I,control:k,setValue:A,getValues:h,formState:{errors:B}}=Y({mode:"onChange"});I("filterField1",{required:!0});const V=()=>{console.log("afterChangesObserved !!")},_=async(t,n)=>{if(console.log("afterChange.change=",t,", source=",n),console.log("afterChange.change.length=",t?.length),t!==null){const o=l.current?.hotInstance;if(o?.getPlugin("filters")){const x=o.getData(),f=[];t.forEach((d,w)=>{const g={};e.columns.forEach((s,H)=>{g[s.data]=x[w][H]}),f.push(g)}),console.log("afterChange.saveData=",f),f.forEach(async(d,w)=>{console.log("afterChange.item=",d);const g=await P(d);console.log("afterChange.result=",w,g),c.map(s=>{(s.seq===void 0||s.seq===null)&&s.wdNm===d.wdNm&&s.awdNm===d.awdNm&&(console.log("afterChange.rowData1=",s),s.seq=g.seq,console.log("afterChange.rowData2=",s))})}),o.render()}}},M=()=>{const t=l.current.hotInstance;console.log("onInsert:",t),t.alter("insert_row_above",0,1)},z=async()=>{const t=l.current.hotInstance;if(console.log("onDelete:",t),t&&i.current!==null){if(t?.getPlugin("filters")){const o=t.getData();console.log("onDelete.filteredData=",o[i.current]);const m={seq:o[i.current][0]};console.log("onDelete.data=",m);const x=await v.post(D+e.deleteUrl,m);console.log("onDelete.result=",x.data)}t.alter("remove_row",i.current,1)}};return a.jsxs(F,{style:{maxWidth:"100%",width:"100%",paddingLeft:"0px",paddingRight:"0px"},sx:{mt:0},children:[a.jsxs(R,{sx:{maxWidth:"100%",paddingLeft:"0px",paddingRight:"0px",width:"100%",display:"grid",gridTemplateColumns:"200px 200px 300px ",flexDirection:"col",alignItems:"baseline",alignContent:"left",justifyContent:"left",textAlign:"center",whiteSpace:"nowrap"},children:[a.jsx(et,{title:e.title+" : "+K(W)}),a.jsx(X,{id:"columns1",name:"columns1",label:"조회 컬럼",control:k,defaultValue:e.selectDefault?e.selectDefault:"1",variant:"standard",margin:"normal",selectList:O,error:!!B.columns1,onChange:t=>{t.preventDefault();const n=t.target.value;console.log("columns1=",h("columns1")),A("columns1",n),n!=""&&y()}}),a.jsx(at,{...I("filterField1"),fullWidth:!0,placeholder:"조회",variant:"standard",style:{paddingLeft:"10px"},onKeyUp:y})]}),a.jsx($,{ref:l,data:c,themeName:U,rowHeaders:!0,colHeaders:!0,autoWrapRow:!0,height:"560px",width:"auto",contextMenu:!0,observeChanges:!0,columnSorting:!0,afterChange:_,afterChangesObserved:V,afterFilter:L,afterSelectRows:q,afterSelection:(t,n,o,m)=>{console.log("afterSelection.row=",t,", column=",n,", row2=",o,", column2=",m),i.current=t},licenseKey:"non-commercial-and-evaluation",columns:e.columns,cells:(t,n)=>e.columns[n].readOnly===!0?{readOnly:!0}:{},colWidths:e.colWidths,manualColumnResize:!0,filters:!0}),a.jsx(nt,{onInsert:M,onDelete:z,onReload:T,onCsvSave:E})]})},lt=()=>{const e=[{title:"ID",type:"numeric",data:"seq",readOnly:!0},{title:"도메인대분류",type:"text",data:"dmn1"},{title:"도메인중분류",type:"text",data:"dmn2"},{title:"도메인명",type:"text",data:"dmn"},{title:"도메인설명",type:"text",data:"dmnDscr",columnSorting:{headerAction:!1}},{title:"데이터타입",type:"text",data:"ty"},{title:"데이터길이",type:"text",data:"len"},{title:"소숫점길이",type:"text",data:"len2"},{title:"저장형식",type:"text",data:"sav"},{title:"표현형식",type:"text",data:"exprs"},{title:"단위",type:"text",data:"unt"},{title:"허용값",type:"text",data:"vl"},{title:"사용건수",type:"numeric",data:"cnt"}],l=[50,180,200,400,300,100,150,150,100,150,150,150,150,150,140];return a.jsx(S,{csvFileName:"exported_dmn",postUrl:"/dmn/post.do",listUrl:"/dmn/list.do",deleteUrl:"/dmn/delete.do",title:"도메인정보",columns:e,colWidths:l,selectDefault:"3"})},ot=()=>{const e=[{title:"ID",type:"numeric",data:"seq",readOnly:!0},{title:"용어명",type:"text",data:"trmNm"},{title:"영문약어명",type:"text",data:"awdNm"},{title:"영문명",type:"text",data:"trmEnNm"},{title:"단어설명",type:"text",data:"trmDscr",columnSorting:{headerAction:!1}},{title:"도메인명",type:"text",data:"dmn"},{title:"허용값",type:"text",data:"vl"},{title:"관리부서명",type:"text",data:"deptNm"},{title:"표준코드명",type:"text",data:"cdNm"},{title:"업무분야",type:"text",data:"dutDv"},{title:"저장형식",type:"text",data:"sav"},{title:"표현형식",type:"text",data:"dis"},{title:"용어 이음동의어 목록",type:"text",data:"lst"},{title:"시스템명",type:"text",data:"sys"},{title:"사용여부",type:"text",data:"useYn"}],l=[50,180,200,400,300,100,150,150,100,150,150,150,150,150,140];return a.jsx(S,{csvFileName:"exported_trm",postUrl:"/trm/post.do",listUrl:"/trm/list.do",deleteUrl:"/trm/delete.do",title:"용어정보",columns:e,colWidths:l})},st=()=>{const e=[{title:"ID",type:"numeric",data:"seq",readOnly:!0},{title:"단어명",type:"text",data:"wdNm",readOnly:!1},{title:"영문약어명",type:"text",data:"awdNm"},{title:"영문명",type:"text",data:"wdEnNm"},{title:"단어설명",type:"text",data:"wdDscr"},{title:"형식단어여부",type:"text",data:"wdYn"},{title:"도메인분류명",type:"text",data:"dmnDvNm"},{title:"이음동의어",type:"text",data:"synmVl"},{title:"금칙어",type:"text",data:"notNm"},{title:"도메인그룹명",type:"text",data:"dmnGrpNm"},{title:"시스템",type:"text",data:"sys"}],l=[50,180,200,350,400,100,150,150,100,150,100];return a.jsx(S,{csvFileName:"exported_wd",postUrl:"/wd/post.do",listUrl:"/wd/list.do",deleteUrl:"/wd/delete.do",title:"단어정보",columns:e,colWidths:l})},wt=()=>{const[e,l]=r.useState(0);r.useEffect(()=>{Z({title:"표준",description:"표준"})},[]),r.useEffect(()=>{const c=C.findIndex(u=>`#${u.id}`===window.location.hash);l(c!==-1?c:e)},[e]);const i=(c,u)=>{window.location.hash=`#${C[u].id}`,l(u)};return a.jsx(a.Fragment,{children:a.jsxs(F,{style:{maxWidth:"100%",width:"100%"},sx:{mt:3},children:[a.jsx(tt,{tabValue:e,onChange:i,tabs:C}),a.jsx(r.Suspense,{fallback:a.jsx(J,{}),children:a.jsxs(a.Fragment,{children:[a.jsx(j,{value:e,index:0,style:{maxWidth:"100%",width:"100%",paddingLeft:"0px",paddingRight:"0px"},children:a.jsx(st,{})}),a.jsx(j,{value:e,index:1,style:{maxWidth:"100%",width:"100%",paddingLeft:"0px",paddingRight:"0px"},children:a.jsx(ot,{})}),a.jsx(j,{value:e,index:2,style:{maxWidth:"100%",width:"100%",paddingLeft:"0px",paddingRight:"0px"},children:a.jsx(lt,{})})]})})]})})};export{wt as default};
