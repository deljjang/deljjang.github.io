import{a as u,e as x,r as l,f as m,j as t,L as h,n as b,H as c}from"./index-DRYhf1EU.js";import{L as g}from"./LinkItem-ho6TH3bb.js";import{T as p}from"./TitleItem-DX22YVx5.js";import o from"./bible-7rshX_PU.js";import{T as d}from"./TwSearchBox-BrK1UuD3.js";const f=r=>{if(!(r.bibleList===void 0||r.bibleList===null))return r.bibleList.map((e,a)=>{const n=e.id.split("_"),s=`${n[0]}_${n[1]}_${n[2]}`;return t.jsxs("div",{className:"grid grid-cols-5 sm:grid-cols-6 md:grid-cols-10 lg:grid-cols-12 gap-4 mb-4",children:[t.jsx("div",{className:"col-span-1",children:e.nm}),t.jsx("div",{className:"col-span-4 sm:col-span-5 md:col-span-9 lg:col-span-11",children:t.jsxs(g,{to:`/bible/${s}`,state:{cd4:e.cd4,word:r.word},children:[t.jsx(c,{show:!0,text:e.ko}),t.jsx("div",{className:"text-sm text-red-600 dark:text-gray-700",children:t.jsx(c,{show:!0,text:e.en})})]})})]},a)})},j=(r,e)=>{if(r==="")return alert(e("search_word_required")),[];const a=new Array;for(let n in o){let s={...o[n]};if(s.ko.match(r)||s.en&&s.en.match(r)){const i=new RegExp(r,"gi");s.ko=s.ko.replace(i,`<span class='lightext'>${r}</span>`),s.en=s.en.replace(i,`<span class='lightext'>${r}</span>`),a.push(s)}}return a},T=()=>{const e=u().state,{t:a}=x(),n=l.useRef(e===null?"":e.s),s=m({queryKey:["getBibleData",e&&e?.s?e.s:""],queryFn:()=>j(e?.s,a)});return l.useEffect(()=>{n.current=e===null?"":e.s,s.refetch()},[e]),s.isLoading?t.jsxs(t.Fragment,{children:[t.jsx(d,{state:e,gubun:"bible"}),t.jsx(h,{})]}):s.error?t.jsxs("div",{children:[a("error_prefix"),s.error.message]}):t.jsxs("div",{children:[t.jsx(d,{state:e,gubun:"bible"}),t.jsxs(p,{children:[a("search_result_prefix"),b(s.data?s.data?.length:"0")]}),t.jsx(f,{bibleList:s.data,word:n.current})]})};export{T as BibleSearch,T as default};
