const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MemoMain-DHRqp0md.js","assets/index-5-bVhsL0.js","assets/index-Cy58HV1y.css","assets/TailButton-l1ngHwp1.js"])))=>i.map(i=>d[i]);
import{f as B,g as ke,h as Ke,p as Xe,v as Je,i as Ue,k as Qe,l as Ze,n as Me,o as et,s as tt,q as Ee,t as Le,r as f,w as nt,x as _,M as Ce,y as ce,z as st,D as ot,E as it,F as rt,G as at,j as i,B as j,I as lt,J as X,K as ct,N as Be,A as ue,u as ut,b as ie,c as dt,O as ft,a as re,P as mt,d as ht,Q as gt,R as xt,U as de,T as Re,V as pt,C as vt,W as yt,X as We,H as wt,S as jt,Y as bt,Z as $t,e as St,_ as Tt,$ as fe,a0 as me,a1 as It,a2 as kt,a3 as He,a4 as P,a5 as z,a6 as Mt,a7 as Et,a8 as De,a9 as Lt,aa as he,ab as Ct,ac as Bt,ad as Rt,ae as Wt,af as Ht,ag as Dt,ah as Ot,ai as V,L as ge,m as Nt,aj as _t,ak as Ft,al as xe,am as Pt,an as zt,ao as At,ap as qt,aq as Vt,ar as Yt,as as Gt,at as pe,au as Kt}from"./index-5-bVhsL0.js";import{T as Xt,C as Jt,E as Ut,a as Qt,t as Y}from"./TreeView-Bk7D-FPu.js";import{F as Zt}from"./Favorite-Cz1oXc6p.js";import{T as ve}from"./TailButton-l1ngHwp1.js";import{T as en}from"./TailLayout-DngSsoom.js";function Oe(e,t){let s;const n=()=>{const{currentTime:o}=t,a=(o===null?0:o.value)/100;s!==a&&e(a),s=a};return B.update(n,!0),()=>ke(n)}const G=new WeakMap;let T;function tn(e,t){if(t){const{inlineSize:s,blockSize:n}=t[0];return{width:s,height:n}}else return e instanceof SVGElement&&"getBBox"in e?e.getBBox():{width:e.offsetWidth,height:e.offsetHeight}}function nn({target:e,contentRect:t,borderBoxSize:s}){var n;(n=G.get(e))===null||n===void 0||n.forEach(o=>{o({target:e,contentSize:t,get size(){return tn(e,s)}})})}function sn(e){e.forEach(nn)}function on(){typeof ResizeObserver>"u"||(T=new ResizeObserver(sn))}function rn(e,t){T||on();const s=Ke(e);return s.forEach(n=>{let o=G.get(n);o||(o=new Set,G.set(n,o)),o.add(t),T?.observe(n)}),()=>{s.forEach(n=>{const o=G.get(n);o?.delete(t),o?.size||T?.unobserve(n)})}}const K=new Set;let F;function an(){F=()=>{const e={width:window.innerWidth,height:window.innerHeight},t={target:window,size:e,contentSize:e};K.forEach(s=>s(t))},window.addEventListener("resize",F)}function ln(e){return K.add(e),F||an(),()=>{K.delete(e),!K.size&&F&&(F=void 0)}}function cn(e,t){return typeof e=="function"?ln(e):rn(e,t)}const un=50,ye=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),dn=()=>({time:0,x:ye(),y:ye()}),fn={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function we(e,t,s,n){const o=s[t],{length:r,position:a}=fn[t],u=o.current,d=s.time;o.current=e[`scroll${a}`],o.scrollLength=e[`scroll${r}`]-e[`client${r}`],o.offset.length=0,o.offset[0]=0,o.offset[1]=o.scrollLength,o.progress=Xe(0,o.scrollLength,o.current);const c=n-d;o.velocity=c>un?0:Je(o.current-u,c)}function mn(e,t,s){we(e,"x",t,s),we(e,"y",t,s),t.time=s}function hn(e,t){const s={x:0,y:0};let n=e;for(;n&&n!==t;)if(n instanceof HTMLElement)s.x+=n.offsetLeft,s.y+=n.offsetTop,n=n.offsetParent;else if(n.tagName==="svg"){const o=n.getBoundingClientRect();n=n.parentElement;const r=n.getBoundingClientRect();s.x+=o.left-r.left,s.y+=o.top-r.top}else if(n instanceof SVGGraphicsElement){const{x:o,y:r}=n.getBBox();s.x+=o,s.y+=r;let a=null,u=n.parentNode;for(;!a;)u.tagName==="svg"&&(a=u),u=n.parentNode;n=a}else break;return s}const oe={start:0,center:.5,end:1};function je(e,t,s=0){let n=0;if(e in oe&&(e=oe[e]),typeof e=="string"){const o=parseFloat(e);e.endsWith("px")?n=o:e.endsWith("%")?e=o/100:e.endsWith("vw")?n=o/100*document.documentElement.clientWidth:e.endsWith("vh")?n=o/100*document.documentElement.clientHeight:e=o}return typeof e=="number"&&(n=t*e),s+n}const gn=[0,0];function xn(e,t,s,n){let o=Array.isArray(e)?e:gn,r=0,a=0;return typeof e=="number"?o=[e,e]:typeof e=="string"&&(e=e.trim(),e.includes(" ")?o=e.split(" "):o=[e,oe[e]?e:"0"]),r=je(o[0],s,n),a=je(o[1],t),r-a}const pn={All:[[0,0],[1,1]]},vn={x:0,y:0};function yn(e){return"getBBox"in e&&e.tagName!=="svg"?e.getBBox():{width:e.clientWidth,height:e.clientHeight}}function wn(e,t,s){const{offset:n=pn.All}=s,{target:o=e,axis:r="y"}=s,a=r==="y"?"height":"width",u=o!==e?hn(o,e):vn,d=o===e?{width:e.scrollWidth,height:e.scrollHeight}:yn(o),c={width:e.clientWidth,height:e.clientHeight};t[r].offset.length=0;let l=!t[r].interpolate;const v=n.length;for(let g=0;g<v;g++){const I=xn(n[g],c[a],d[a],u[r]);!l&&I!==t[r].interpolatorOffsets[g]&&(l=!0),t[r].offset[g]=I}l&&(t[r].interpolate=Ue(t[r].offset,Qe(n),{clamp:!1}),t[r].interpolatorOffsets=[...t[r].offset]),t[r].progress=Ze(0,1,t[r].interpolate(t[r].current))}function jn(e,t=e,s){if(s.x.targetOffset=0,s.y.targetOffset=0,t!==e){let n=t;for(;n&&n!==e;)s.x.targetOffset+=n.offsetLeft,s.y.targetOffset+=n.offsetTop,n=n.offsetParent}s.x.targetLength=t===e?t.scrollWidth:t.clientWidth,s.y.targetLength=t===e?t.scrollHeight:t.clientHeight,s.x.containerLength=e.clientWidth,s.y.containerLength=e.clientHeight}function bn(e,t,s,n={}){return{measure:()=>jn(e,n.target,s),update:o=>{mn(e,s,o),(n.offset||n.target)&&wn(e,s,n)},notify:()=>t(s)}}const O=new WeakMap,be=new WeakMap,ne=new WeakMap,$e=e=>e===document.documentElement?window:e;function ae(e,{container:t=document.documentElement,...s}={}){let n=ne.get(t);n||(n=new Set,ne.set(t,n));const o=dn(),r=bn(t,e,o,s);if(n.add(r),!O.has(t)){const u=()=>{for(const g of n)g.measure()},d=()=>{for(const g of n)g.update(Me.timestamp)},c=()=>{for(const g of n)g.notify()},l=()=>{B.read(u,!1,!0),B.read(d,!1,!0),B.update(c,!1,!0)};O.set(t,l);const v=$e(t);window.addEventListener("resize",l,{passive:!0}),t!==document.documentElement&&be.set(t,cn(t,l)),v.addEventListener("scroll",l,{passive:!0})}const a=O.get(t);return B.read(a,!1,!0),()=>{var u;ke(a);const d=ne.get(t);if(!d||(d.delete(r),d.size))return;const c=O.get(t);O.delete(t),c&&($e(t).removeEventListener("scroll",c),(u=be.get(t))===null||u===void 0||u(),window.removeEventListener("resize",c))}}function $n({source:e,container:t,axis:s="y"}){e&&(t=e);const n={value:0},o=ae(r=>{n.value=r[s].progress*100},{container:t,axis:s});return{currentTime:n,cancel:o}}const se=new Map;function Ne({source:e,container:t=document.documentElement,axis:s="y"}={}){e&&(t=e),se.has(t)||se.set(t,{});const n=se.get(t);return n[s]||(n[s]=tt()?new ScrollTimeline({source:t,axis:s}):$n({source:t,axis:s})),n[s]}function Sn(e){return e.length===2}function _e(e){return e&&(e.target||e.offset)}function Tn(e,t){return Sn(e)||_e(t)?ae(s=>{e(s[t.axis].progress,s)},t):Oe(e,Ne(t))}function In(e,t){if(e.flatten(),_e(t))return e.pause(),ae(s=>{e.time=e.duration*s[t.axis].progress},t);{const s=Ne(t);return e.attachTimeline?e.attachTimeline(s,n=>(n.pause(),Oe(o=>{n.time=n.duration*o},s))):et}}function kn(e,{axis:t="y",...s}={}){const n={axis:t,...s};return typeof e=="function"?Tn(e,n):In(e,n)}function Se(e,t){nt(!!(!t||t.current))}const Mn=()=>({scrollX:_(0),scrollY:_(0),scrollXProgress:_(0),scrollYProgress:_(0)});function En({container:e,target:t,layoutEffect:s=!0,...n}={}){const o=Ee(Mn);return(s?Le:f.useEffect)(()=>(Se("target",t),Se("container",e),kn((a,{x:u,y:d})=>{o.scrollX.set(u.current),o.scrollXProgress.set(u.progress),o.scrollY.set(d.current),o.scrollYProgress.set(d.progress)},{...n,container:e?.current||void 0,target:t?.current||void 0})),[e,t,JSON.stringify(n.offset)]),o}function Ln(e){const t=Ee(()=>_(e)),{isStatic:s}=f.useContext(Ce);if(s){const[,n]=f.useState(e);f.useEffect(()=>t.on("change",n),[])}return t}function Te(e){return typeof e=="number"?e:parseFloat(e)}function Cn(e,t={}){const{isStatic:s}=f.useContext(Ce),n=f.useRef(null),o=Ln(ce(e)?Te(e.get()):e),r=f.useRef(o.get()),a=f.useRef(()=>{}),u=()=>{const c=n.current;c&&c.time===0&&c.sample(Me.delta),d(),n.current=st({keyframes:[o.get(),r.current],velocity:o.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...t,onUpdate:a.current})},d=()=>{n.current&&n.current.stop()};return f.useInsertionEffect(()=>o.attach((c,l)=>s?l(c):(r.current=c,a.current=l,B.update(u),o.get()),d),[JSON.stringify(t)]),Le(()=>{if(ce(e))return e.on("change",c=>o.set(Te(c)))},[o]),o}var N={},Ie;function Bn(){if(Ie)return N;Ie=1;var e=ot();Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var t=e(it()),s=rt();return N.default=(0,t.default)((0,s.jsx)("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3m-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05"}),"FavoriteBorder"),N}var Rn=Bn();const Wn=at(Rn),Hn=lt(Qt)(({theme:e})=>({color:e.palette.text.secondary,[`& .${Y.content}`]:{color:e.palette.text.secondary,borderTopRightRadius:e.spacing(2),borderBottomRightRadius:e.spacing(2),paddingRight:e.spacing(1),fontWeight:e.typography.fontWeightMedium,"&.MuiTreeItem-content":{paddingLeft:"3px",paddingRight:"3px"},".MuiTreeItem-label":{paddingLeft:"0px"},".MuiTreeItem-iconContainer":{marginRight:"0px"},"&.Mui-expanded":{fontWeight:e.typography.fontWeightRegular},"&:hover":{backgroundColor:e.palette.action.hover},"&.Mui-selected":{backgroundColor:"rgba(145, 85, 253, 0.16)",color:"var(--tree-view-color)"},"&.Mui-focused, &.Mui-selected, &.Mui-selected.Mui-focused":{backgroundColor:"rgba(145, 85, 253, 0.16)",color:"var(--tree-view-color)"},[`& .${Y.label}`]:{fontWeight:"inherit",color:"inherit"}},[`& .${Y.group}`]:{marginLeft:0,[`& .${Y.content}`]:{paddingLeft:e.spacing(1)}}})),Dn=f.forwardRef(function(t,s){const{labelIcon:n,labelInfo:o,labelText:r,pl:a,...u}=t;return i.jsx(Hn,{label:i.jsxs(j,{sx:{display:"flex",alignItems:"center",p:.5,pr:2,pl:{pl:a}},children:[i.jsx(j,{component:n,color:"inherit",sx:{mr:1,pl:{pl:a}}}),i.jsx(X,{sx:{fontWeight:"inherit",flexGrow:1},component:"div",children:r}),i.jsx(X,{variant:"caption",color:"inherit",children:o})]}),...u,ref:s})}),Fe=e=>{const{id:t,fullIndex:s,title:n,sub:o}=e.item;if(t===void 0)return console.log("SubTreeItem.item.undefined=",e.item),i.jsx(i.Fragment,{});const r=o&&Object.values(o).length>0?Object.values(o).length+"":"";return i.jsx(Dn,{onClick:()=>e.onDetail(t,s),nodeId:t,labelText:n,labelInfo:r,pl:e.pl,children:o!=null?Object.values(o).sort((a,u)=>a.title>u.title?1:-1).map((a,u)=>i.jsx("div",{style:{paddingLeft:e.pl+5},children:i.jsx(Fe,{onDetail:e.onDetail,item:a,pl:e.pl+5})},u+"")):""})};function Pe(e){const[t,s]=f.useState([]),n=(r,a)=>{e.onDetail(r,a)},o=(r,a)=>{s(a)};return i.jsx(j,{sx:{minHeight:180,flexGrow:1,display:"flex",flexDirection:"column",height:e.maxHeight,overflow:"hidden",width:"100%"},children:i.jsx(Xt,{"aria-label":"icon expansion",defaultCollapseIcon:i.jsx(Ut,{}),defaultExpandIcon:i.jsx(Jt,{}),expanded:t,onNodeToggle:o,sx:{flexGrow:1,overflow:"hidden",overflowY:"auto"},children:e.data&&e.data.map((r,a)=>i.jsx(Fe,{onDetail:n,item:r,parentIndex:a+1,pl:5},a+1))})})}const On={position:"absolute",top:"50%",left:"50%",display:"flex",flexDirection:"column",alignItems:"center",transform:"translate(-50%, -50%)",width:250,maxHeight:"400px",bgcolor:"background.paper",border:"1px solid #000",boxShadow:24,boxSizing:"border-box",p:4},Nn=e=>i.jsxs(j,{sx:{my:2,mt:3,display:"flex"},children:[i.jsx(ue,{type:"submit",variant:"outlined",color:"success",onClick:e.onPost,children:"확인"}),i.jsx(ue,{type:"button",variant:"outlined",onClick:e.onClose,children:"취소"})]}),_n=e=>{const[t,s]=f.useState(e.open),[n,o]=f.useState(),r=()=>{s(!1),o(void 0),e.onClose()};f.useEffect(()=>{s(e.open)},[e.open]);const a=d=>{o(d)},u=()=>{if(n===void 0){alert("이동할 메모장을 선택해 주세요");return}e.onPost(n)};return i.jsx("div",{children:i.jsx(ct,{open:t,onClose:r,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:i.jsxs(j,{sx:On,children:[i.jsx(X,{id:"modal-modal-title",variant:"h6",component:"h2",children:"이동할 메모장 선택"}),i.jsx(Be,{}),i.jsx(j,{sx:{width:"100%",minHeight:110,maxHeight:200,flexGrow:1,minWidth:100,overflow:"hidden"},children:i.jsx(Pe,{data:e.data,onDetail:a,maxHeight:200})}),i.jsx(Nn,{onPost:u,onClose:r})]})})})},Fn=e=>{const{rootDb:t}=e,{title:s,gbn:n,date:o,text:r,image:a,setFireId:u,bookmark:d,setBookmark:c,isLoading:l,onReload:v}=ut(),{scrollYProgress:g}=En(),I=Cn(g,{stiffness:100,damping:30,restDelta:.001}),[k,y]=f.useState(!1),[J,M]=f.useState(!1),A=ie(),E=f.useRef(),p=f.useRef();p.current=e.searchWord;const{memoId:h}=dt(),b=ft()?.state?.fullIndex,{user:m}=re(),{settings:U,saveSettings:Q}=mt(),R=()=>{E.current=!1,l.current===!1&&y(!0)},W=()=>{E.current=!0,l.current===!1&&y(!0)},H=async()=>{const x=t==="memo"?`${t}_txt/${m.uid}/${h}`:`${t}_txt/${h}`,w=t==="memo"?`${t}/${m.uid}`:t;if(await Et(x,w)===void 0){alert("삭제에 실패했습니다.[code:d02]");return}const $=t==="/memo"?t:`/${t}mng`;A($)},Z=()=>{window.confirm(`하위 자료가 있는 경우 같이 삭제됩니다.
삭제하시겠습니까?`)&&H()},D=()=>{y(!1)},ee=()=>{M(!0)},q=()=>{const x=d==="Y"?"N":"Y";c(x),Tt(m.uid,h,x)},Ae=async x=>{try{const w=t==="memo"?`${t}_txt/${m.uid}/${h}`:`${t}_txt/${h}`,C=t==="memo"?`memo/${m.uid}`:t,$=await Mt(w,C,h,x)}catch(w){console.log("catch",w)}finally{M(!1)}},qe=async(x,w)=>{const C=t==="memo"?`${t}_txt/${m.uid}/`:`${t}_txt/`,$=t==="memo"?`${t}/${m.uid}/`:`${t}/`,S=await fe(void 0,C,$,b,x);if(await me(`${t}_txt`,t,S,w),S!==void 0){const te=t==="memo"?`/${t}/${S}`:`/${t}mng/${S}`;A(te)}E.current=!1,y(!1),v()},Ve=async(x,w,C)=>{const $=t==="memo"?`${t}_txt/${m.uid}`:`${t}_txt`,S=t==="memo"?`${t}/${m.uid}`:t,te=await It($,S,h,w);console.log("onPostSubmit.imageDelete",te),await fe(h,`${$}/`,`${S}/`,b,x),console.log("onPostSubmit.files=",C);const Ge=await me(`${$}/`,`${S}/`,h,C);if(console.log("onNewSubmit.imageResult",Ge),console.log("onPostSubmit.fullIndex",b),t==="memo"&&b===void 0){const le=await kt(m.uid,`${h}/fullIndex`);le!==void 0&&He(P(z,`memo/${m.uid}/${le}/title`),x.edTitle)}E.current=!1,y(!1),v()};f.useEffect(()=>{if(s.current!==void 0){const x=document.querySelector("title");x.innerHTML=`${ht.appTitle} :: ${s.current}`}},[s.current]),f.useEffect(()=>{m!=null&&h!==void 0&&(Q({...U,nodeId:h}),t==="memo"&&b!==void 0&&gt(m.uid,h,b),u(t,m.uid,h,p.current)),y(!1)},[h,m]);function Ye(){document.querySelectorAll("pre").forEach(x=>{x.innerHTML=St(x.innerHTML)})}return f.useEffect(()=>{r!==null&&Ye()},[r]),h===""||m===void 0?i.jsx(i.Fragment,{}):i.jsxs(xt.Fragment,{children:[i.jsx(de.div,{className:"progress-bar",style:{scaleX:I}}),i.jsxs(Re,{style:{display:"flex",flexDirection:"row",alignItems:"center",alignContent:"center",justifyContent:"space-between"},children:[i.jsx("div",{}),i.jsx("div",{children:s.current}),i.jsx(de.div,{whileHover:{scale:1.1},whileTap:{scale:.8},initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:.5,ease:[0,.71,.2,1.01],scale:{type:"spring",damping:2,stiffness:100,restDelta:.001}},children:i.jsx(pt,{"aria-label":"bookmark",onClick:q,children:d==="Y"?i.jsx(Zt,{sx:{color:"red"}}):i.jsx(Wn,{})})})]}),i.jsxs(vt,{className:"container",sx:{p:0,width:"100%"},children:[!k&&i.jsx(yt,{onEdit:R,onNewMemo:W,onMove:ee,onDelete:Z,onBookmark:q,bookmark:d}),k&&i.jsx(We,{newMode:E.current,onPostSubmit:Ve,onNewSubmit:qe,onCancel:D,title:s.current,gbn:n.current,date:o.current,content:r,imageList:a}),i.jsxs(j,{sx:{my:2},children:[i.jsx(wt,{show:!k,text:r}),!k&&i.jsx(jt,{imageList:a,show:!k}),l.current&&i.jsx(j,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:i.jsx(bt,{sx:{mt:5}})})]}),i.jsx(_n,{userId:m?.uid,open:J,data:e.data,onClose:()=>M(!1),onPost:Ae})]}),i.jsx($t,{})]})};async function Pn(e,t,s=""){if(t==null||t==="")return"";let n=s===""?`${e}/${t}`:`${e}_txt/${t}`;e==="home"&&(n="home_txt");const o=De(P(z,n)),r=await Lt(o);if(!r.exists()){console.log("getTreeData.null");return}if(!r.exists()){console.log("getTreeData.exists");return}const a=r.val(),u=[],d={};e==="home"&&(he.map(c=>{u.push({title:c.label,id:c.id,sub:[]})}),he.map(c=>{d[c.id]=[]}));for(const c in a){const l=a[c];l.up===void 0?(l.id=c,l.fullIndex=c):(l.id=l.up,l.fullIndex=l.up),e==="home"?l.gbn!==void 0&&d[l.gbn].push(l):s===""||s===void 0?(l.sub!==null&&(l.children=ze(l,l.up)),u.push(l)):(l.id=c,(l.memo+"").toLowerCase().indexOf(s.toLowerCase())>-1&&u.push(l))}return e==="home"?Object.values(d).map((c,l)=>{c.sort((v,g)=>v.title>g.title?1:-1),u[l].sub=c}):u.sort((c,l)=>c.title>l.title?1:-1),u}function ze(e,t){const s=[];if(e===void 0||e.sub===void 0)return s;for(let n in e.sub){let o=e.sub[n];o.id=n,o.key=n}return Object.values(e.sub).sort((n,o)=>o.title-n.title).map(n=>{n.id=n.key,n.fullIndex=t+"/sub/"+n.key,n.sub!==null&&(n.children=ze(n,n.fullIndex)),s.push(n)}),s}const zn=e=>{const[t,s]=f.useState([]),n=()=>{const o=De(P(z,`memo_txt/${e}`),Bt("bookmark"),Ct("Y"));Rt(o,r=>{if(!r.exists())return;const a=r.val(),u=[];for(let d in a){const c=a[d];c.key=d,u.push(c)}u.sort((d,c)=>d.title>c.title?1:-1),s(u)})};return f.useEffect(()=>{n()},[e]),t};function An(e){const{user:t}=re(),s=ie(),n=zn(t?.uid);return t===void 0?i.jsx(i.Fragment,{}):i.jsxs("div",{className:"tail-bookmark justify-items-center",sx:{display:"flex",alignItems:"center",flexDirection:"column",width:"100%"},children:[i.jsx(Be,{}),i.jsx(Re,{children:"BookMark"}),i.jsx("div",{className:`tail-bookmark 
        grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-1 
        justify-items-center 
        w-full`,children:n&&n.map((o,r)=>i.jsx("div",{children:i.jsx(Wt,{component:"button",variant:"body",onClick:()=>{e.onSelected(o.key),s(`/memo/${o.key}`)},children:i.jsx(X,{variant:"body1",children:o.title})})},r))})]})}const qn=e=>{const t=f.useRef(null);function s(){e.onSearchDataBtn(t.current.value)}function n(){return e.onNewMemoBtn(),!1}function o(r){r.which===13&&s()}return i.jsxs(i.Fragment,{children:[i.jsx(Ht,{id:"edSearch",type:"edSearch",name:"edSearch",inputRef:t,placeholder:"Enter Search...",fullWidth:!0,sx:{pt:0,pl:2,pr:2,pb:1},onKeyDownCapture:o}),i.jsxs("div",{className:"flex justify-center",children:[i.jsx(ve,{variant:"outlined",color:"success",className:"m-1 p-1",onClick:n,children:"새글"}),i.jsx(ve,{variant:"outlined",color:"brand",className:"m-1 p-1",onClick:s,children:"조회"})]})]})},Vn=({className:e="",children:t})=>i.jsx("h4",{className:`mb-2 text-lg font-semibold text-center text-gray-800 dark:text-white/90 
      ${e}}
      `,children:t}),Yn=220,Gn=f.lazy(async()=>await Pt(()=>import("./MemoMain-DHRqp0md.js"),__vite__mapDeps([0,1,2,3]))),Zn=({rootDb:e})=>{const t=ie(),{user:s}=re(),[n,o]=f.useState(!1),r=f.useRef(),[a,u]=f.useState(""),d=f.useRef(),c=f.useRef(!1),l=Dt({queryKey:["treeMemo",s?.uid,r.current],queryFn:()=>Pn(e,s?.uid,r.current)});l.data!==void 0&&l.data!==""&&!c.current&&(c.current=!0),f.useEffect(()=>{s!==void 0&&s!=null&&l.refetch()},[s]);const v=p=>{c.current=!1,r.current=p,l.refetch()},g=(p,h)=>{d.current=h,u(p);const L=e==="memo"?`/${e}/${p}`:`/home/${p}`;t(L,{state:{fullIndex:h}})},I=()=>{if(s==null){alert("로그인 후 이용 가능합니다.");return}o(!0)},k=()=>{o(!1)},y=async(p,h)=>{const L=e==="memo"?`${e}_txt/${s.uid}/`:`${e}_txt/`,b=e==="memo"?`${e}/${s.uid}/`:`${e}/`;for(let R=0;R<h.length;R++){const W=h[R].object,H=zt(W.name),Z={ext:H,name:W.name,use:"Y"},D=At(qt(P(z),L+"image")).key;He(P(z,L+`image/${D}`),Z);const ee=e==="memo"?`memo/${s.uid}/${a}/${D}.${H}`:`home/${homeId}/${D}.${H}`,q=Vt(Kt,ee);await Yt(q,W)}const m=Gt(L),U={title:p.edTitle,date:p.edDate,gbn:p.edGbn,memo:p.content,fullIndex:m,up:m,bookmark:"N"};pe(`${L}${m}`,U);const Q={gbn:"",property:"m",title:p.edTitle,up:m};pe(`${b}${m}`,Q),o(!1)},J=p=>{u(p)},{height:M,width:A}=Ot(),E=i.jsxs("div",{className:"",children:[i.jsx(Vn,{className:"mt-3 ",children:e==="memo"?"메모장":"홈페이지관리"}),i.jsxs("div",{className:"flex gap-7 justify-center",children:[i.jsx(V,{to:"/",children:"홈"}),e==="memo"?"":i.jsx(V,{to:"/memo",children:"메모"}),i.jsx(V,{to:"/todo",children:"TODO"}),i.jsx(V,{to:"/tail",children:"Sheet"})]}),i.jsx(qn,{onNewMemoBtn:I,onSearchDataBtn:v}),i.jsx(j,{sx:{flexGrow:1,minWidth:100,minHeight:110,maxHeight:M-220,height:M-220},children:c.current&&l.isFetched?i.jsx(Pe,{data:l.data,onDetail:g,maxHeight:M-150}):i.jsx(ge,{})})]});return s&&s.uid===Nt&&_t,i.jsxs(en,{sideType:"memo",title:e==="memo"?"메모장":"홈페이지관리",drawerWidth:Yn,width:A,sideContents:E,children:[!n&&i.jsx(f.Suspense,{fallback:i.jsx(ge,{}),children:i.jsxs(Ft,{children:[i.jsx(xe,{path:"/:memoId",element:i.jsx(Fn,{rootDb:e,searchWord:r.current,data:l.data})}),i.jsx(xe,{path:"*",element:i.jsx(Gn,{searchWord:r.current,data:l.data,onNewMemoBtn:I,title:e==="memo"?"메모장 홈":"홈페이지관리 홈"})})]})}),n&&i.jsx(We,{show:n,newMode:n.current,onPostSubmit:y,onNewSubmit:y,onCancel:k,title:"",content:"",imageList:[]}),e==="memo"?i.jsx(An,{onSelected:J}):""]})};export{Zn as M};
