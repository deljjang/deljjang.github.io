const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/App-DhOIxMuR.js","assets/index-D_6lkzJf.js","assets/router-v4BRDFYV.js","assets/vendor-CCYiWZgt.js","assets/index-DEf0QqfC.css","assets/App-C0oX4rhs.css"])))=>i.map(i=>d[i]);
import{j as e,_ as L}from"./index-D_6lkzJf.js";import{r as p,T,F as H,H as S,b as M,j as O,i as A}from"./App-DhOIxMuR.js";import{r as u,c as Y,u as U,a as q}from"./router-v4BRDFYV.js";import{u as z,B as G}from"./BibleBookmarkText-BlFrREGM.js";import{a as K}from"./BibleSkeleton-DsJbGOyK.js";import"./vendor-CCYiWZgt.js";const Q=({children:s,className:b=""})=>e.jsx("div",{className:`w-full p-2 text-center ${p.textXl} ${b}`,children:s}),W=({dataText:s,searchWord:b,bookmark:g,...c})=>{if(s==null)return;const j=c.bibleId.split("_");return c.bibleId&&j.length<2?e.jsx(e.Fragment,{}):e.jsxs(e.Fragment,{children:[e.jsx("h6",{className:`flex flex-col items-center mb-8 ${p.textXl}`,children:c.nm}),s.map((l,i)=>{let d="text.primary";c.cd4+""===l.cd4&&(d="warning.main");const m=g?.filter(v=>v.id===l.id&&v.bookmark==="Y");return m&&m.length>0&&(l.bookmark="Y"),e.jsxs("div",{className:"grid grid-cols-5 sm:grid-cols-6 md:grid-cols-10 lg:grid-cols-12 gap-4",id:`id_${i+1}`,children:[e.jsx("div",{className:"col-span-1",children:e.jsxs("div",{className:`flex items-center ${d}`,children:[e.jsx(T,{className:"items-center text-top cursor-pointer",onClick:()=>c.onBookmark(l),children:l.nm}),m&&m.length>0&&e.jsx(H,{className:"text-red-500 w-4 h-4"})]})}),e.jsxs("div",{className:`col-span-4 sm:col-span-5 md:col-span-9 lg:col-span-11 ${d}`,children:[e.jsx(S,{text:l.ko}),e.jsx("div",{className:"text-sm text-red-600 dark:text-gray-700",children:e.jsx(S,{text:l.en})})]})]},i)})]})},Z=({data:s,bibleId:b,isBottom:g=!1})=>{const c=new Array,{t:j}=M();if(s==null)return;const l=b.split("_");for(let i=1;i<=s.cd3;i++){const d={nm:`${s.nm2}${i}장`,key:s.id+"_"+i};c.push(d)}return l&&l.length===3&&!g?e.jsxs("h6",{className:`flex flex-col items-center ${p.textXl}`,children:[l[2],"장"]}):e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-10 lg:grid-cols-12 gap-4",children:c.map((i,d)=>e.jsx("div",{className:"col-span-1",children:e.jsx(T,{to:`/bible/${i.key}`,children:i.nm})},d))})},ce=()=>{const[s,b]=u.useState(null),[g,c]=u.useState(null),[j,l]=u.useState(!0),{bookmarks:i,handleToggleBookmark:d}=z(),{t:m,i18n:v}=M(),r=u.useRef(),{bibleId:a}=Y(),w=U(),[B,y]=u.useState(!1),[I,E]=u.useState(!1),{user:R}=O(),_=w?.state?.word,k=w?.state?.cd4,V=q();u.useEffect(()=>{if(a!==void 0){(async()=>{const x=await X(a,_);b(x),l(!1)})(),y(!1),E(!0);const t=a.split("_");if(r.current&&t.length>=2){const x=r.current.cd3;y(Number(t[2])!==1),E(t[2]<x)}}},[a,_]),u.useEffect(()=>{k!==void 0&&setTimeout(()=>{P("","id_"+k)},1500)},[s,k]);const P=(o,t)=>{const x=document.getElementById(t);x&&x.scrollIntoView({block:"center",behavior:"smooth"})},J=o=>{R!==void 0&&(d(o),c(o.id),setTimeout(()=>c(null),1e3))},X=async(o,t)=>{if(o===""||o===void 0)return"";v.language.split("-")[0];const D=(await L(()=>import("./bibleJson-mLacnG04.js"),[])).default,h=o.split("_"),F=(await L(()=>import("./App-DhOIxMuR.js").then(f=>f.c5),__vite__mapDeps([0,1,2,3,4,5]))).default;if(h.length<1)return;h.length>1&&D.map(f=>{f.id===h[0]+"_"+h[1]&&(r.current=f)});const N=new Array;if(h.length>1){const f=new RegExp(t,"gi");for(let $ in F){let n=F[$];n.id.startsWith(`${o}_`)&&(t!==void 0&&t!==""&&t!==null&&(n.ko=n.ko.replace(f,`<span class='lightext'>${t}</span>`),n.en=n.en.replace(f,`<span class='lightext'>${t}</span>`)),n.nm=h.length===2?`${r.current.nm2}${n.cd3}:${n.cd4}`:`${r.current.nm2}${n.cd3}:${n.cd4}`,N.push(n))}return N.sort(($,n)=>$.cd3-n.cd3||$.cd4-n.cd4),N}};if(a==="")return e.jsx(e.Fragment,{});const C=o=>{let t=a.split("_");t[2]=Number(t[2])+o,V(`/bible/${t[0]}_${t[1]}_${t[2]}`)};return s===null?e.jsx(K,{}):e.jsxs("div",{className:`${p.card}`,children:[e.jsx("div",{id:"back-to-top-anchor"}),e.jsx(G,{}),e.jsx("div",{className:"w-full items-center justify-center flex flex-col",children:e.jsx(T,{to:"/bible/"+r.current.id,children:e.jsx(Q,{children:r.current!==null&&r.current!==void 0&&r.current.nm!==null?`${r.current.text} ${r.current.text_en}`:""})})}),e.jsx(Z,{data:r.current,bibleId:a}),e.jsx(W,{dataText:s,data:r.current,searchWord:_,bibleId:a,cd4:k,bookmark:i,clickedVerseId:g,onBookmark:J}),e.jsxs("div",{className:"p-0",children:[j&&e.jsx("div",{className:"flex flex-col items-center",children:e.jsx("div",{className:"mt-10 w-8 h-8 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"})}),a&&a.split("_").length===3?e.jsx("div",{className:`${p.between} mt-10`,children:e.jsxs("div",{className:"grid grid-cols-12 gap-2 w-full",children:[B?e.jsx("div",{className:I?"col-span-6":"col-span-12",children:e.jsx(A,{type:"button",variant:"outlined",onClick:()=>C(-1),fullWidth:!0,children:`< ${m("prev")}`})}):null,I?e.jsx("div",{className:B?"col-span-6":"col-span-12",children:e.jsx(A,{type:"button",variant:"outlined",onClick:()=>C(1),fullWidth:!0,children:`${m("next")} >`})}):""]})}):null]})]})};export{ce as TwBibleDetail,ce as default};
