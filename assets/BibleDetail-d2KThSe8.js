import{r as m,g as S,a as V,i as G,h as J,e as E,j as e,R as O,T as H,H as Y,_}from"./index-CmP4Fnif.js";import{u as q,B as z}from"./BibleBookmarkText-Alud8Gxp.js";import{A as I}from"./AniButton-BzUKstz0.js";import{T as U}from"./LinkItem-BHY7_Cg2.js";import{T as W}from"./TitleItem-1nbe1ARW.js";const K=t=>{const{t:c}=E(),f=new Array;if(t.data===void 0||t.data===null)return;const s=t.bibleId.split("_");for(let l=1;l<=t.data.cd3;l++){const a={nm:`${t.data.nm2}${l}${c("chapter")}`,key:t.data.id+"_"+l};f.push(a)}return s&&s.length===3?e.jsxs("div",{className:"flex items-center flex-col mb-8 text-lg font-semibold",children:[t.nm," ",s[2]," ",c("chapter")]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center flex-col mb-8 text-lg font-semibold",children:t.nm}),e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-10 lg:grid-cols-12 gap-4",children:f.map((l,a)=>e.jsx("div",{children:e.jsx(H,{to:`/bible/${l.key}`,children:l.nm})},a))})]})},Q=t=>{const c=t.dataText;if(t.data===void 0||t.data===null||c==null)return;const f=t.bibleId.split("_");return t.bibleId&&f.length!==3?e.jsx(e.Fragment,{}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center flex-col mb-8 text-lg font-semibold",children:t.nm}),c.map((s,l)=>{t.cd4+"",s.cd4;const a=t.bookmark?.data?.filter(i=>i.id===s.id&&i.bookmark==="Y");return a&&a.length>0&&(s.bookmark="Y"),e.jsxs("div",{className:"grid grid-cols-5 sm:grid-cols-6 md:grid-cols-10 lg:grid-cols-12 gap-4",id:`id_${l+1}`,children:[e.jsx("div",{className:"col-span-1",children:e.jsxs("div",{className:`flex ${t.cd4+""===s.cd4?"text-orange-500":"text-gray-900 dark:text-white"}`,children:[e.jsx(U,{className:"items-center text-top cursor-pointer",onClick:()=>t.onBookmark(s),children:s.nm}),a&&a.length>0&&e.jsx("svg",{className:"w-5 h-5 text-red-500 ml-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})})]})}),e.jsx("div",{className:"col-span-4 sm:col-span-5 md:col-span-9 lg:col-span-11",children:e.jsx("div",{className:t.cd4+""===s.cd4?"text-orange-500":"text-gray-900 dark:text-white",children:e.jsx(Y,{text:s.text})})})]},l)})]})},le=()=>{const[t,c]=m.useState(null),[f,s]=m.useState(!0),{query:l,setBibleBookmark:a}=q(),i=m.useRef(),{bibleId:r}=S(),k=V(),[T,B]=m.useState(!1),[p,y]=m.useState(!1),{user:R}=G(),h=k?.state?.word,b=k?.state?.cd4,L=J(),{t:N,i18n:A}=E();m.useEffect(()=>{if(r!==void 0){(async()=>{const x=await F(r,h);c(x),s(!1)})(),B(!1),y(!0);const n=r.split("_");if(i.current&&n.length===3){const x=i.current.cd3;B(Number(n[2])!==1),y(n[2]<x)}}},[r,h]),m.useEffect(()=>{b!==void 0&&setTimeout(()=>{C("","id_"+b)},1500)},[t,b]);const C=(o,n)=>{const x=document.getElementById(n);x&&x.scrollIntoView({block:"center",behavior:"smooth"})},D=o=>{R!==void 0&&a(o)},F=async(o,n)=>{if(o===""||o===void 0)return"";const M=(A.language.split("-")[0]==="en"?await _(()=>import("./bibleJson_en-OyZMwajI.js"),[]):await _(()=>import("./bibleJson-mLacnG04.js"),[])).default,$=(await _(()=>import("./bible-7rshX_PU.js"),[])).default,g=o.split("_");if(g.length<1)return;g.length>1&&M.map(d=>{d.id===g[0]+"_"+g[1]&&(i.current=d)});const j=new Array;if(g.length===3){for(let d in $){if(!d.includes(o+"_"))continue;let u=$[d];u.id=d;let v=u.txt;if(n!==void 0){const P=new RegExp(n,"gi");v=v.replace(P,`<span class='lightext'>${n}</span>`)}u.nm=`${i.current.nm2}${g[2]}:${u.cd4}`,u.text=v,j.push(u)}return j.sort((d,u)=>d.cd4-u.cd4),j}};if(r==="")return e.jsx(e.Fragment,{});const w=o=>{let n=r.split("_");n[2]=Number(n[2])+o,L(`/bible/${n[0]}_${n[1]}_${n[2]}`)};return e.jsxs(O.Fragment,{children:[e.jsx("div",{id:"back-to-top-anchor"}),e.jsx(z,{}),e.jsx(W,{children:i.current!==null&&i.current!==void 0&&i.current.nm!==null?i.current.text:""}),e.jsx(K,{data:i.current,bibleId:r}),e.jsx(Q,{dataText:t,data:i.current,searchWord:h,bibleId:r,cd4:b,bookmark:l,onBookmark:D}),e.jsxs(Container,{sx:{p:0},children:[f&&e.jsx(Box,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:e.jsx(CircularProgress,{sx:{mt:5}})}),r&&r.split("_").length===3?e.jsx(Box,{sx:{display:"flex",justifyContent:"space-between",mt:5},children:e.jsxs(Grid,{container:!0,spacing:1,children:[T?e.jsx(Grid,{item:!0,xs:p?6:12,children:e.jsx(I,{type:"button",variant:"outlined",onClick:()=>w(-1),fullWidth:!0,children:`< ${N("prev")}`})}):"",p?e.jsx(Grid,{item:!0,xs:T?6:12,children:e.jsx(I,{type:"button",variant:"outlined",onClick:()=>w(1),fullWidth:!0,children:`${N("next")} >`})}):""]})}):""]})]})};export{le as BibleDetail,le as default};
