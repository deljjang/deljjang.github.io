const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MemoSheetGrid-DK6i8NOU.js","assets/index-C0jVl8wX.js","assets/router-v4BRDFYV.js","assets/vendor-CCYiWZgt.js","assets/index-6VcXD2XU.css","assets/App-DWe4jcsa.js","assets/App-C0oX4rhs.css","assets/IpInfo-bWjEsurn.js","assets/close-NDi5wdfK.js","assets/MemoDetailEdit-CeHE68sc.js","assets/useWindowDimensions-D4V3h9qm.js","assets/HtmlBadge-BvHzX7jm.js","assets/luxon-MrBZWWSV.js","assets/TwCheckbox-DZP0ZWVA.js","assets/TwTextArea-CipcYldt.js","assets/TwDatePicker-7RXBMUp5.js","assets/TwSelect-C-2xFduI.js","assets/MemoDetailEdit-CXguKeju.css","assets/MemoDetailUtil-BRqzyvbG.js","assets/TwTodo-CCUOIm4_.js"])))=>i.map(i=>d[i]);
import{j as t,_ as ie}from"./index-C0jVl8wX.js";import{aU as ot,aV as ct,aW as J,aX as ve,aY as Fe,aZ as Ye,a_ as dt,a$ as ht,b0 as mt,b1 as ut,b2 as xt,b3 as ft,b4 as Ge,b5 as gt,b6 as pt,b7 as ye,b8 as q,b9 as Xe,ba as je,bb as Ke,bc as me,bd as be,a1 as vt,a3 as yt,a4 as bt,be as wt,a7 as jt,f as W,bf as oe,aA as ce,n as Q,g as P,h as A,bg as kt,bh as ke,a as g,bi as Nt,bj as Je,aD as Ct,ad as St,bk as Tt,bl as ue,bm as de,w as C,l as R,bn as Lt,bo as Ne,bp as Mt,bq as Ce,br as Et,bs as zt,s as It,bt as ge,m as le,bu as $t,P as Se,_ as Te,H as _t,ae as Rt,af as Ot,bv as Bt,bw as At,bx as Ue,by as Ht,bz as Wt,bA as Le,bB as Dt,bC as Pt,bD as Vt,bE as Ft,bF as Yt,bG as Gt,bH as Me,bI as Xt,bJ as Kt,bK as Jt,av as Ut,bL as Zt,bM as qt,bN as Qt,aw as es,bO as ts,bP as ss,u as as,bQ as xe}from"./App-DWe4jcsa.js";import{r as d,c as ns,a as Ze,u as he,N as Ee,R as ee,e as rs,f as G}from"./router-v4BRDFYV.js";import{I as ls}from"./IpInfo-bWjEsurn.js";import{S as qe}from"./close-NDi5wdfK.js";const ae=new WeakMap;let ne;const Qe=(e,n,s)=>(a,r)=>r&&r[0]?r[0][e+"Size"]:ct(a)&&"getBBox"in a?a.getBBox()[n]:a[s],is=Qe("inline","width","offsetWidth"),os=Qe("block","height","offsetHeight");function cs({target:e,borderBoxSize:n}){ae.get(e)?.forEach(s=>{s(e,{get width(){return is(e,n)},get height(){return os(e,n)}})})}function ds(e){e.forEach(cs)}function hs(){typeof ResizeObserver>"u"||(ne=new ResizeObserver(ds))}function ms(e,n){ne||hs();const s=ot(e);return s.forEach(a=>{let r=ae.get(a);r||(r=new Set,ae.set(a,r)),r.add(n),ne?.observe(a)}),()=>{s.forEach(a=>{const r=ae.get(a);r?.delete(n),r?.size||ne?.unobserve(a)})}}const re=new Set;let X;function us(){X=()=>{const e={get width(){return window.innerWidth},get height(){return window.innerHeight}};re.forEach(n=>n(e))},window.addEventListener("resize",X)}function xs(e){return re.add(e),X||us(),()=>{re.delete(e),!re.size&&typeof X=="function"&&(window.removeEventListener("resize",X),X=void 0)}}function fs(e,n){return typeof e=="function"?xs(e):ms(e,n)}function et(e,n){let s;const a=()=>{const{currentTime:r}=n,o=(r===null?0:r.value)/100;s!==o&&e(o),s=o};return J.preUpdate(a,!0),()=>ve(a)}function gs(...e){const n=!Array.isArray(e[0]),s=n?0:-1,a=e[0+s],r=e[1+s],l=e[2+s],o=e[3+s],i=Fe(r,l,o);return n?i(a):i}function ps(e,n,s){const a=e.get();let r=null,l=a,o;const i=typeof a=="string"?a.replace(/[\d.-]/g,""):void 0,c=()=>{r&&(r.stop(),r=null)},m=()=>{c(),r=new dt({keyframes:[Ie(e.get()),Ie(l)],velocity:e.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...s,onUpdate:o})};if(e.attach((h,u)=>{l=h,o=f=>u(ze(f,i)),J.postRender(m)},c),Ye(n)){const h=n.on("change",f=>e.set(ze(f,i))),u=e.on("destroy",h);return()=>{h(),u()}}return c}function ze(e,n){return n?e+n:e}function Ie(e){return typeof e=="number"?e:parseFloat(e)}const vs=50,$e=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),ys=()=>({time:0,x:$e(),y:$e()}),bs={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function _e(e,n,s,a){const r=s[n],{length:l,position:o}=bs[n],i=r.current,c=s.time;r.current=e[`scroll${o}`],r.scrollLength=e[`scroll${l}`]-e[`client${l}`],r.offset.length=0,r.offset[0]=0,r.offset[1]=r.scrollLength,r.progress=ht(0,r.scrollLength,r.current);const m=a-c;r.velocity=m>vs?0:mt(r.current-i,m)}function ws(e,n,s){_e(e,"x",n,s),_e(e,"y",n,s),n.time=s}function js(e,n){const s={x:0,y:0};let a=e;for(;a&&a!==n;)if(ut(a))s.x+=a.offsetLeft,s.y+=a.offsetTop,a=a.offsetParent;else if(a.tagName==="svg"){const r=a.getBoundingClientRect();a=a.parentElement;const l=a.getBoundingClientRect();s.x+=r.left-l.left,s.y+=r.top-l.top}else if(a instanceof SVGGraphicsElement){const{x:r,y:l}=a.getBBox();s.x+=r,s.y+=l;let o=null,i=a.parentNode;for(;!o;)i.tagName==="svg"&&(o=i),i=a.parentNode;a=o}else break;return s}const pe={start:0,center:.5,end:1};function Re(e,n,s=0){let a=0;if(e in pe&&(e=pe[e]),typeof e=="string"){const r=parseFloat(e);e.endsWith("px")?a=r:e.endsWith("%")?e=r/100:e.endsWith("vw")?a=r/100*document.documentElement.clientWidth:e.endsWith("vh")?a=r/100*document.documentElement.clientHeight:e=r}return typeof e=="number"&&(a=n*e),s+a}const ks=[0,0];function Ns(e,n,s,a){let r=Array.isArray(e)?e:ks,l=0,o=0;return typeof e=="number"?r=[e,e]:typeof e=="string"&&(e=e.trim(),e.includes(" ")?r=e.split(" "):r=[e,pe[e]?e:"0"]),l=Re(r[0],s,a),o=Re(r[1],n),l-o}const Cs={All:[[0,0],[1,1]]},Ss={x:0,y:0};function Ts(e){return"getBBox"in e&&e.tagName!=="svg"?e.getBBox():{width:e.clientWidth,height:e.clientHeight}}function Ls(e,n,s){const{offset:a=Cs.All}=s,{target:r=e,axis:l="y"}=s,o=l==="y"?"height":"width",i=r!==e?js(r,e):Ss,c=r===e?{width:e.scrollWidth,height:e.scrollHeight}:Ts(r),m={width:e.clientWidth,height:e.clientHeight};n[l].offset.length=0;let h=!n[l].interpolate;const u=a.length;for(let f=0;f<u;f++){const b=Ns(a[f],m[o],c[o],i[l]);!h&&b!==n[l].interpolatorOffsets[f]&&(h=!0),n[l].offset[f]=b}h&&(n[l].interpolate=Fe(n[l].offset,xt(a),{clamp:!1}),n[l].interpolatorOffsets=[...n[l].offset]),n[l].progress=ft(0,1,n[l].interpolate(n[l].current))}function Ms(e,n=e,s){if(s.x.targetOffset=0,s.y.targetOffset=0,n!==e){let a=n;for(;a&&a!==e;)s.x.targetOffset+=a.offsetLeft,s.y.targetOffset+=a.offsetTop,a=a.offsetParent}s.x.targetLength=n===e?n.scrollWidth:n.clientWidth,s.y.targetLength=n===e?n.scrollHeight:n.clientHeight,s.x.containerLength=e.clientWidth,s.y.containerLength=e.clientHeight}function Es(e,n,s,a={}){return{measure:r=>{Ms(e,a.target,s),ws(e,s,r),(a.offset||a.target)&&Ls(e,s,a)},notify:()=>n(s)}}const Z=new WeakMap,Oe=new WeakMap,fe=new WeakMap,Be=e=>e===document.scrollingElement?window:e;function tt(e,{container:n=document.scrollingElement,...s}={}){if(!n)return Ge;let a=fe.get(n);a||(a=new Set,fe.set(n,a));const r=ys(),l=Es(n,e,r,s);if(a.add(l),!Z.has(n)){const i=()=>{for(const u of a)u.measure(gt.timestamp);J.preUpdate(c)},c=()=>{for(const u of a)u.notify()},m=()=>J.read(i);Z.set(n,m);const h=Be(n);window.addEventListener("resize",m,{passive:!0}),n!==document.documentElement&&Oe.set(n,fs(n,m)),h.addEventListener("scroll",m,{passive:!0}),m()}const o=Z.get(n);return J.read(o,!1,!0),()=>{ve(o);const i=fe.get(n);if(!i||(i.delete(l),i.size))return;const c=Z.get(n);Z.delete(n),c&&(Be(n).removeEventListener("scroll",c),Oe.get(n)?.(),window.removeEventListener("resize",c))}}const Ae=new Map;function zs(e){const n={value:0},s=tt(a=>{n.value=a[e.axis].progress*100},e);return{currentTime:n,cancel:s}}function st({source:e,container:n,...s}){const{axis:a}=s;e&&(n=e);const r=Ae.get(n)??new Map;Ae.set(n,r);const l=s.target??"self",o=r.get(l)??{},i=a+(s.offset??[]).join(",");return o[i]||(o[i]=!s.target&&pt()?new ScrollTimeline({source:n,axis:a}):zs({container:n,...s})),o[i]}function Is(e,n){const s=st(n);return e.attachTimeline({timeline:n.target?void 0:s,observe:a=>(a.pause(),et(r=>{a.time=a.iterationDuration*r},s))})}function $s(e){return e.length===2}function _s(e,n){return $s(e)?tt(s=>{e(s[n.axis].progress,s)},n):et(e,st(n))}function Rs(e,{axis:n="y",container:s=document.scrollingElement,...a}={}){if(!s)return Ge;const r={axis:n,container:s,...a};return typeof e=="function"?_s(e,r):Is(e,r)}const Os=()=>({scrollX:q(0),scrollY:q(0),scrollXProgress:q(0),scrollYProgress:q(0)}),se=e=>e?!e.current:!1;function Bs({container:e,target:n,...s}={}){const a=ye(Os),r=d.useRef(null),l=d.useRef(!1),o=d.useCallback(()=>(r.current=Rs((i,{x:c,y:m})=>{a.scrollX.set(c.current),a.scrollXProgress.set(c.progress),a.scrollY.set(m.current),a.scrollYProgress.set(m.progress)},{...s,container:e?.current||void 0,target:n?.current||void 0}),()=>{r.current?.()}),[e,n,JSON.stringify(s.offset)]);return Xe(()=>{if(l.current=!1,se(e)||se(n)){l.current=!0;return}else return o()},[o]),d.useEffect(()=>{if(l.current)return je(!se(e)),je(!se(n)),o()},[o]),a}function at(e){const n=ye(()=>q(e)),{isStatic:s}=d.useContext(Ke);if(s){const[,a]=d.useState(e);d.useEffect(()=>n.on("change",a),[])}return n}function nt(e,n){const s=at(n()),a=()=>s.set(n());return a(),Xe(()=>{const r=()=>J.preRender(a,!1,!0),l=e.map(o=>o.on("change",r));return()=>{l.forEach(o=>o()),ve(a)}}),s}function As(e){me.current=[],e();const n=nt(me.current,e);return me.current=void 0,n}function Hs(e,n,s,a){if(typeof e=="function")return As(e);const r=gs(n,s,a);return Array.isArray(e)?He(e,r):He([e],([l])=>r(l))}function He(e,n){const s=ye(()=>[]);return nt(e,()=>{s.length=0;const a=e.length;for(let r=0;r<a;r++)s[r]=e[r].get();return n(s)})}function Ws(e,n={}){const{isStatic:s}=d.useContext(Ke),a=()=>Ye(e)?e.get():e;if(s)return Hs(a);const r=at(a());return d.useInsertionEffect(()=>ps(r,e,n),[r,JSON.stringify(n)]),r}const Ds=({className:e})=>t.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),Ps=({className:e})=>t.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})});async function Vs(e,n,s=""){if(n==null||n==="")return"";if(e==="home"){const m=await be("home/tree");if(m!=null)try{return JSON.parse(m)}catch(h){console.error("Error parsing JSON data:",h)}}const a=e==="home"?"home_txt":s===""?`${e}_tree/${n}`:`${e}_txt/${n}`,r=vt(yt(bt,a)),l=await wt(r);if(!l.exists()||!l.exists())return null;const o=l.val(),i=[{text:"1.React",id:"react",key:"react",parent:"root"},{text:"2.CSS",id:"css",key:"css",parent:"root"},{text:"3.Android",id:"android",key:"android",parent:"root"},{text:"4.Java",id:"java",key:"java",parent:"root"},{text:"5.이미지",id:"image",key:"image",parent:"root"},{text:"6.Etc",id:"etc",key:"etc",parent:"root"}],c=[];e==="home"&&c.push(...i);for(const m in o){const h=o[m];h.id=m;const u={id:m,key:m,text:h.title,parent:e==="home"?h.gbn:h.parent};e==="memo"?(u.icon=h.bm==="Y"?t.jsx(Ds,{className:"w-4 h-4 text-red-500"}):h.icon==="Y"?t.jsx(Ps,{className:"w-4 h-4 text-green-500"}):null,u.droppable=!0):u.droppable=!1,!((s===""||s===void 0||s===null)&&(u.parent===void 0||u.parent===null||u.parent===""))&&(e==="home"||s===""||s===void 0||s===null?c.push(u):(h.id=m,(h.memo+"").toLowerCase().indexOf(s.toLowerCase())>-1&&(u.parent="root",u.droppable=!1,c.push(u))))}return c.sort((m,h)=>m.title>h.title?1:-1),e==="home"&&jt("home/tree",JSON.stringify(c)),c}const Fs=({isOpen:e,onClose:n,data:s})=>{const{t:a}=W();if(!e||!s)return null;const{label:r,value:l,items:o}=s;return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:n,children:t.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-lg shadow-xl w-11/12 md:w-1/2 lg:w-1/3 max-h-[80vh] flex flex-col",onClick:i=>i.stopPropagation(),children:[t.jsxs("div",{className:"flex justify-between items-center border-b p-4 dark:border-zinc-600",children:[t.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:r}),t.jsx("button",{onClick:n,className:"text-gray-400 hover:bg-gray-200 dark:hover:bg-zinc-700 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center",children:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),t.jsxs("div",{className:"p-4 overflow-y-auto",children:[t.jsxs("p",{className:"text-base leading-relaxed text-gray-600 dark:text-gray-300 mb-4",children:[a("count","개수"),": ",t.jsx("span",{className:"font-bold",children:l.toLocaleString()})]}),t.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:a("main_list","주요 목록")}),t.jsx("ul",{className:"list-disc list-inside bg-gray-50 dark:bg-zinc-700 p-3 rounded-md",children:o&&o.length>0?o.map((i,c)=>t.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:i.text},c)):t.jsx("li",{className:"text-gray-500",children:a("no_results","결과 없음")})})]})]})})};function Ys({series:e,labels:n,onDataPointClick:s}){const[a,r]=d.useState({labels:[],colors:oe,dataLabels:{style:{colors:["#333"]}},responsive:[{breakpoint:480,options:{chart:{width:"100%"},legend:{position:"bottom"}}}]});return d.useEffect(()=>{r(l=>({...l,labels:n}))},[n]),t.jsx("div",{className:"bg-amber-50 dark:bg-gray-900 shadow-md rounded-sm",children:e&&e.length>0?t.jsx(ce,{type:"donut",series:e,options:a}):t.jsx("div",{className:"text-center text-gray-500",children:"표시할 데이터가 없습니다."})})}function Gs({series:e,labels:n,onDataPointClick:s}){const[a,r]=d.useState({chart:{type:"radar",toolbar:{show:!1},events:{dataPointSelection:(l,o,i)=>{s&&s(i.dataPointIndex)}}},colors:oe,plotOptions:{radar:{polygons:{distributed:!0}}},dataLabels:{enabled:!1},xaxis:{categories:[]},legend:{show:!0},tooltip:{theme:"dark",style:{fontSize:"12px"},y:{formatter:l=>l.toLocaleString()}}});return d.useEffect(()=>{r(l=>({...l,xaxis:{...l.xaxis,categories:n}}))},[n]),t.jsx("div",{className:"bg-white dark:bg-black shadow-md rounded-sm w-full h-full",children:e&&e.length>0&&e[0].data.length>0?t.jsx(ce,{type:"radar",series:e,options:a}):t.jsx("div",{className:"text-center text-gray-500 py-10",children:"표시할 데이터가 없습니다."})})}function Xs({series:e,labels:n,onDataPointClick:s}){const[a,r]=d.useState({labels:[],chart:{events:{dataPointSelection:(l,o,i)=>{s&&s(i.dataPointIndex)}}},colors:oe,plotOptions:{pie:{startAngle:-90,endAngle:90,offsetY:10}},grid:{padding:{bottom:-80}},dataLabels:{style:{colors:["#333"]}},responsive:[{breakpoint:480,options:{chart:{width:"100%"},legend:{position:"bottom"}}}],tooltip:{theme:"dark",style:{fontSize:"12px"},y:{formatter:l=>l.toLocaleString()}},legend:{show:!0}});return d.useEffect(()=>{r(l=>({...l,labels:n}))},[n]),t.jsx("div",{className:"bg-amber-50 dark:bg-gray-900 shadow-md rounded-sm p-2",children:e&&e.length>0&&t.jsx(ce,{type:"donut",series:e,options:a})})}function Ks({series:e,labels:n,showDownload:s=!0,onDataPointClick:a}){const[r,l]=d.useState({chart:{type:"bar",toolbar:{tools:{download:s}},events:{dataPointSelection:(o,i,c)=>{a&&a(c.dataPointIndex)}}},colors:oe,plotOptions:{bar:{borderRadius:4,horizontal:!1,distributed:!0}},dataLabels:{enabled:!1},xaxis:{categories:[]},legend:{show:!1},tooltip:{theme:"dark",style:{fontSize:"12px"},y:{formatter:o=>o.toLocaleString()}}});return d.useEffect(()=>{l(o=>({...o,xaxis:{...o.xaxis,categories:n}}))},[n]),t.jsx("div",{className:"bg-white dark:bg-black shadow-md rounded-sm w-full p-2",children:e&&e.length>0&&e[0].data&&e[0].data.length>0?t.jsx(ce,{type:"bar",series:e,options:r,height:"350"}):t.jsx("div",{className:"text-center text-gray-500 py-10",children:"표시할 데이터가 없습니다."})})}const Js=({rootDb:e})=>{const{user:n}=Q(),{t:s}=W(),a=P(),r=A(y=>{try{return kt(e)(y)}catch(E){return console.warn("HomeChartForm selector error:",E),{labels:[],series:[],status:"idle",error:null}}}),[l,o]=d.useState(!0),[i,c]=d.useState("donut"),[m,h]=d.useState(!1),[u,f]=d.useState(null),[b,I]=d.useState([]),[z,S]=d.useState([]),[N,T]=d.useState({labels:[],series:[]}),O=["#6366f1","#3b82f6","#22c55e","#ef4444","#f97316","#eab308","#8b5cf6","#d946ef","#14b8a6","#a855f7"],L=[{value:"donut",label:s("donut_chart","도넛 차트")},{value:"bar",label:s("bar_chart","수평 막대 차트")},{value:"radar",label:s("radar_chart","레이더 차트")},{value:"verticalBar",label:s("vertical_bar_chart","수직 막대 차트")},{value:"semiDonut",label:s("semi_donut_chart","반원 도넛 차트")}],V=d.useCallback(y=>{let E=[];if(I(y||[]),y&&y.length>0){const U=y.filter(j=>j.parent==="root").sort((j,$)=>j.text.localeCompare($.text)),D=(j,$)=>{const H=$.filter(_=>_.parent===j);let B=H.length;for(const _ of H)B+=D(_.id,$);return B};E=U.map(j=>({node:j,count:D(j.id,y)})).filter(j=>j.count>=10);const te=E.map(j=>j.node.text),F=E.map(j=>j.count),Y={labels:te,series:F};S(E),T(Y),a(ke({rootDb:e,data:Y}))}else T({labels:[],series:[]}),a(ke({rootDb:e,data:{labels:[],series:[]}}));o(!1)},[e,a]),x=d.useCallback(async()=>{o(!0);const y=await Vs(e==="sheet"?"memo":e,n?.uid);V(y)},[e,n?.uid,V]);d.useEffect(()=>{n?.uid&&(r?.labels&&Array.isArray(r.labels)&&r.labels.length>0?(T(r),o(!1)):x())},[e,n?.uid,r?.labels?.length,x]);const p=y=>{if(y<0||y>=z.length)return;const E=z[y].node,U=E.text,D=(j,$)=>{const H=$.filter(_=>_.parent===j);let B=[...H];return H.forEach(_=>{B=[...B,...D(_.id,$)]}),B},F=D(E.id,b).length,Y=b.filter(j=>j.parent===E.id);f({label:U,value:F,items:Y}),h(!0)},w=()=>t.jsx("div",{className:"w-full h-full flex justify-center items-center p-4",children:t.jsxs("div",{className:"w-full h-full bg-gray-200 dark:bg-zinc-800 rounded-md animate-pulse relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-1/4 left-1/4 w-1/2 h-1/2 bg-gray-300 dark:bg-zinc-700 rounded-full opacity-50"}),t.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-1/3 h-1/3 bg-gray-300 dark:bg-zinc-700 rounded-lg opacity-50"})]})}),k=()=>{x()},M=t.jsxs("div",{className:`HomeChartForm ${g.between}`,children:[t.jsx("div",{children:s("count_stats")}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("select",{value:i,onChange:y=>c(y.target.value),className:"rounded-md border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-200 focus:ring-indigo-500 focus:border-indigo-500 text-sm","aria-label":s("select_chart_type","차트 종류 선택"),children:L.map(y=>t.jsx("option",{value:y.value,children:y.label},y.value))}),t.jsx("button",{onClick:k,className:"rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors ","aria-label":s("reload_chart"),children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-600 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h5M20 20v-5h-5M4 4l1.5 1.5A9 9 0 0121.5 12M20 20l-1.5-1.5A9 9 0 012.5 12"})})})]})]});return t.jsxs("div",{className:`w-full justify-center ${g.card} `,children:[t.jsx("div",{className:"flex pl-6 py-4",children:t.jsx(Nt,{title:M})}),l?t.jsx(w,{}):t.jsxs("div",{className:"w-full justify-center items-center",children:[i==="donut"&&t.jsx(Ys,{series:N.series,labels:N.labels,colors:O,onDataPointClick:p}),i==="bar"&&t.jsx(Je,{series:[{name:s("count"),data:N.series}],labels:N.labels,colors:O,onDataPointClick:p}),i==="radar"&&t.jsx(Gs,{series:[{name:s("count"),data:N.series}],labels:N.labels,colors:O,onDataPointClick:p}),i==="verticalBar"&&t.jsx(Ks,{series:[{name:s("count"),data:N.series}],labels:N.labels,colors:O,onDataPointClick:p}),i==="semiDonut"&&t.jsx(Xs,{series:N.series,labels:N.labels,colors:O,onDataPointClick:p})]}),t.jsx(Fs,{isOpen:m,onClose:()=>h(!1),data:u})]})},Us=()=>{const[e,n]=d.useState({labels:[],series:[]}),[s,a]=d.useState(null),[r,l]=d.useState({isOpen:!1}),{t:o}=W();return d.useEffect(()=>{(async()=>{const c=await be("home_cnt");if(c){a(c);const h=Object.keys(c).sort().reverse().slice(0,10),u=h.map(b=>b.split("-").slice(1).join("-")),f=h.map(b=>Object.keys(c[b]).length);n({labels:u,series:f})}})()},[]),t.jsxs("div",{className:`w-full justify-center ${g.card} `,children:[t.jsx("div",{className:"flex pl-6 py-4",children:o("visitors.count")}),t.jsx(Je,{series:[{name:o("count"),data:e.series}],labels:e.labels,showDownload:!1,onDataPointSelection:(i,c,m)=>{const h=m.dataPointIndex;if(s&&h>-1){const f=Object.keys(s).sort().reverse()[h],b=s[f],I=Object.keys(b).join("<br/>");console.log("filteredNodes=",I),l({isOpen:!0,title:`${f} ${o("visitors.count")}`,message:I,onClose:()=>l({isOpen:!1})})}}}),t.jsx(Ct,{...r})]})},Zs=({rootDb:e})=>{const{user:n}=Q(),{t:s}=W(),a=s(e==="memo"?"appMemo":"home_mng"),r=t.jsx("div",{className:`displayTitle text-center  ${g.text3Xl} ${g.textIndigo}`,children:a});return t.jsx(t.Fragment,{children:t.jsx(St,{title:r,className:"MemoMain mt-3 mb-5",children:t.jsxs("div",{className:"grid gird-cols-1 md:grid-cols-5 items-center gap-3",children:[n===null?t.jsx("p",{className:`${g.textRed500} ${g.textLgFontSemiboldLeft} ${g.mdColSpan3}`,children:s("login_used")}):t.jsx("p",{className:`${g.textGray600DarkZinc400} text-left ${g.mdColSpan3}`,dangerouslySetInnerHTML:{__html:s("memo_main_guide").replace(`
`,"<br/>")}}),t.jsx("div",{className:`w-full ${g.flexCenter} md:col-span-2`,children:t.jsx(ls,{})})]})})})},qs=({size:e=24,color:n="currentColor",className:s,...a})=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,className:s,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[t.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),t.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),Qs=({size:e=24,color:n="currentColor",className:s,...a})=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,className:s,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[t.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),t.jsx("path",{d:"m15 5 4 4"})]}),ea=({size:e=24,color:n="currentColor",className:s,...a})=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,className:s,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[t.jsx("path",{d:"M5 12h14"}),t.jsx("path",{d:"M12 5v14"})]}),ta=({size:e=24,color:n="currentColor",className:s,...a})=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,className:s,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[t.jsx("path",{d:"M3 6h18"}),t.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),t.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),sa=({size:e=24,color:n="currentColor",className:s,...a})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,className:s,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:t.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),aa=({size:e=24,color:n="currentColor",className:s,...a})=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,className:s,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[t.jsx("polyline",{points:"23 4 23 10 17 10"}),t.jsx("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]}),rt=({size:e=20,color:n="currentColor",className:s,...a})=>t.jsx("svg",{width:e,height:e,className:s,fill:n,viewBox:"0 0 20 20",...a,children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),na=({size:e=20,color:n="currentColor",className:s,...a})=>t.jsx("svg",{width:e,height:e,className:s,fill:n,viewBox:"0 0 20 20",...a,children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),K=({size:e=20,color:n="currentColor",className:s,...a})=>t.jsx("svg",{width:e,height:e,className:s,fill:n,viewBox:"0 0 20 20",...a,children:t.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),lt=({size:e=20,color:n="currentColor",className:s,...a})=>t.jsx("svg",{width:e,height:e,className:s,fill:n,viewBox:"0 0 20 20",...a,children:t.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),ra=({size:e=24,color:n="currentColor",className:s,...a})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,className:s,fill:n,viewBox:"0 0 24 24",...a,children:t.jsx("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),la=({size:e=24,color:n="currentColor",className:s,...a})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,className:s,fill:"none",viewBox:"0 0 24 24",stroke:n,...a,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),ia=({size:e=24,color:n="currentColor",className:s,...a})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,className:s,fill:"none",viewBox:"0 0 24 24",stroke:n,...a,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),We={success:rt,error:na,info:K,warning:K},oa=()=>{const e=P(),{message:n,type:s,open:a}=A(Tt)||{open:!1};d.useEffect(()=>{if(a){const o=setTimeout(()=>{e(ue())},3e3);return()=>clearTimeout(o)}},[a,e]);const r=We[s]||We.info,l=(o,i)=>{Math.abs(i.offset.x)>100&&e(ue())};return t.jsx(de,{children:a&&t.jsx(C.div,{initial:{opacity:0,y:50,scale:.3},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.5,transition:{duration:.2}},transition:{type:"spring",stiffness:400,damping:25},className:"fixed bottom-5 left-1/2 -translate-x-1/2 z-10000",drag:"x",dragConstraints:{left:0,right:0},dragSnapToOrigin:!0,onDragEnd:l,children:t.jsxs("div",{className:"flex items-center p-4 text-gray-600 bg-white rounded-lg shadow-lg dark:bg-zinc-800 dark:text-zinc-300 dark:border dark:border-zinc-700 max-w-md",role:"alert",children:[t.jsx("div",{className:`inline-flex items-center justify-center flex-shrink-0 w-8 h-8 ${s==="success"?"text-green-500":""}`,children:t.jsx(r,{className:"w-5 h-5"})}),t.jsx("div",{className:"ml-3 text-sm font-normal",children:n}),t.jsxs("button",{type:"button",className:"ml-auto -mx-1.5 -my-1.5 bg-white text-gray-400 hover:text-gray-900 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex h-8 w-8 dark:text-zinc-400 dark:hover:text-white dark:bg-zinc-800 dark:hover:bg-zinc-700","aria-label":"Close",onClick:()=>e(ue()),children:[t.jsx("span",{className:"sr-only",children:"Close"}),t.jsx(lt,{className:"w-5 h-5"})]})]})})})},De=({rootDb:e,memoId:n,master:s,onEdit:a,onUtil:r,onNewMemo:l,onDelete:o,onCopy:i})=>{const{t:c}=W(),m=P(),h=async()=>{try{await m(Lt({rootDb:e,memoId:n})),m(Ne({message:c("memo_cache_reset_successfully"),type:"success"}))}catch(u){console.error("Failed to reset Redux state:",u),m(Ne({message:c("error_while_resetting_state"),type:"error"}))}};return t.jsxs("div",{className:"mx-auto grid w-full max-w-lg grid-cols-6 items-center justify-center gap-2 px-4 py-2 text-center",children:[s&&t.jsx(R,{size:"sm",variant:"outlined",color:"brand",onClick:r,className:"gap-1.5",children:t.jsxs("div",{className:"flex items-center justify-center",children:[t.jsx(qs,{className:"size-4"}),t.jsx("span",{className:"ml-2 whitespace-nowrap",children:c("util")})]})}),t.jsx(R,{size:"sm",variant:"outlined",color:"brand",onClick:a,className:"gap-1.5",children:t.jsxs("div",{className:"flex items-center justify-center",children:[t.jsx(Qs,{className:"size-4"}),t.jsx("span",{className:"ml-2 whitespace-nowrap",children:c("edit")})]})}),t.jsx(R,{size:"sm",variant:"outlined",color:"brand",onClick:l,className:"gap-1.5",children:t.jsxs("div",{className:"flex items-center justify-center",children:[t.jsx(ea,{className:"size-4"}),t.jsx("span",{className:"ml-2 whitespace-nowrap",children:c("new")})]})}),t.jsx(R,{size:"sm",variant:"outlined",color:"error",onClick:o,className:"gap-1.5",children:t.jsxs("div",{className:"flex items-center justify-center",children:[t.jsx(ta,{className:"size-4"}),t.jsx("span",{className:"ml-2 whitespace-nowrap",children:c("delete")})]})}),i&&t.jsx(R,{size:"sm",variant:"outlined",color:"secondary",onClick:i,className:"gap-1.5",children:t.jsxs("div",{className:"flex items-center justify-center",children:[t.jsx(sa,{className:"size-4"}),t.jsx("span",{className:"ml-2 whitespace-nowrap",children:c("public")})]})}),s&&t.jsx(R,{size:"sm",variant:"outlined",color:"danger",onClick:h,className:"gap-1.5",children:t.jsxs("div",{className:"flex items-center justify-center",children:[t.jsx(aa,{className:"size-4"}),t.jsx("span",{className:"ml-2 whitespace-nowrap",children:c("reset")})]})})]})},Pe={info:t.jsx(K,{className:"h-6 w-6 text-blue-500"}),success:t.jsx(rt,{className:"h-6 w-6 text-green-500"}),warning:t.jsx(K,{className:"h-6 w-6 text-yellow-500"}),error:t.jsx(K,{className:"h-6 w-6 text-red-500"}),danger:t.jsx(K,{className:"h-6 w-6 text-red-500"})},ca={info:"blue",success:"green",warning:"yellow",error:"red",danger:"red"},da=()=>{const e=P(),{t:n}=W(),{open:s,title:a,message:r,color:l}=A(Mt),o=()=>{e(Ce({confirmed:!0}))},i=()=>{e(Ce({confirmed:!1}))},c=Pe[l]||Pe.info,m=ca[l]||"indigo";return t.jsx(de,{children:s&&t.jsx(C.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:i,children:t.jsxs(C.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"relative bg-white dark:bg-zinc-800 rounded-lg shadow-xl w-full max-w-md m-4",onClick:h=>h.stopPropagation(),children:[t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"flex-shrink-0 mr-4",children:c}),t.jsxs("div",{className:"flex-grow",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",id:"modal-title",children:a}),t.jsx("div",{className:"mt-2",children:t.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-300",children:r})})]}),t.jsx("button",{onClick:i,className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-zinc-700",children:t.jsx(lt,{className:"w-5 h-5 text-gray-500"})})]})}),t.jsxs("div",{className:"bg-gray-50 dark:bg-zinc-900/50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse rounded-b-lg",children:[t.jsx(R,{color:m,onClick:o,className:"w-full sm:w-auto sm:ml-3",children:n("confirm")}),t.jsx(R,{variant:"outlined",color:"secondary",onClick:i,className:"w-full sm:w-auto mt-2 sm:mt-0",children:n("cancel")})]})]})})})},ha=({rootDb:e,searchWord:n})=>{const{user:s}=Q(),{memoId:a}=ns(),r=P(),l=A(v=>v.ui.modal),o=A(v=>v.tabs[e]?.activeTab||null),{memoDetailData:i,isLoading:c,onBookmark:m}=Et(e,s,a),[h,u]=d.useState(!1),[f,b]=d.useState(""),[I,z]=d.useState(!1),[S,N]=d.useState(""),[T,O]=d.useState(!1),{t:L}=W(),{scrollYProgress:V}=Bs(),x=Ws(V,{stiffness:100,damping:30,restDelta:.001}),p=Ze(),k=he()?.state?.fullIndex,M=A(v=>v.treeData.data),y=async()=>{if(!s||!a||e!=="memo"){r(Le({title:L("error"),message:"Only private memos can be copied.",color:"error"}));return}try{await r(Pt({userId:s.uid,memoId:a,memoDetailData:i,successMessage:L("copy_completed")})).unwrap()}catch(v){console.error("Copy failed:",v)}},E=()=>{r(Dt({rootDb:e,memoId:a,newMemoContent:f})).unwrap().then(()=>{u(!1)}).catch(v=>{console.error("메모 저장 중 오류 발생:",v)})},U=()=>{b(i?.memo||""),u(!0)},D=()=>{N(i?.title||""),z(!0)},te=v=>{N(v.target.value)},F=()=>{r(Ht({rootDb:e,userId:s.uid,memoId:a,newTitle:S})).unwrap().then(()=>{z(!1),r({type:"tabs/updateTabTitle",payload:{id:a,title:S,rootDb:e}}),r({type:"bookmark/updateBookmarkTitle",payload:{id:a,title:S}}),r(Wt({id:a,newTitle:S}))}).catch(v=>{console.error("제목 업데이트 중 오류 발생:",v),z(!1)})},Y=v=>{v.key==="Enter"?F():v.key==="Escape"&&z(!1)},j=()=>{const v=`/${e==="memo"?"m":e}/edit/${a}`;p(v,{state:{fullIndex:k}})},$=()=>{const v=`/${e==="memo"?"m":e}/util/${a}`;p(v,{state:{fullIndex:k}})},H=()=>{const v=`/${e==="memo"?"m":e}/insert/${a}`;p(v,{state:{fullIndex:k}})},B=()=>{y()},_=()=>{r(Le({title:L("delete_confirm_title"),message:L("delete_confirm_message"),color:"warning"}))},it=async()=>{try{r({type:"tabs/setDeleteId",payload:a}),await r(Bt({rootDb:e,userId:s.uid,memoId:a,successMessage:"메모가 삭제되었습니다.",loadingType:"deleting",loadingMessage:"메모를 삭제하고 있습니다..."})).unwrap(),e==="memo"&&await r(At({userId:s.uid,nodeId:a,currentTreeData:M})).unwrap(),r(Ue({tabId:a,rootDb:e})),p(`/${e==="memo"?"m":e}`)}catch(v){console.error("삭제 중 오류 발생:",v)}};return d.useEffect(()=>{!l.open&&l.isConfirmed&&(it(),r(zt()))},[l,r]),d.useEffect(()=>{i?.scrollY&&window.scrollTo({top:i.scrollY})},[a]),d.useEffect(()=>{i?.title&&It({title:i.title,description:""})},[i]),a===""||s===void 0?null:c||o!==a?t.jsx(ge,{}):i?t.jsxs("div",{className:"MemoDetail min-w-screen-sm pt-3 pb-0 relative rounded-t-lg",children:[t.jsx(oa,{}),t.jsx(da,{}),t.jsx(C.div,{className:`progress-bar sticky ${T?"top-28":"top-16"} z-10`,style:{scaleX:x}}),t.jsxs("div",{className:"MemoDetail_body overflow-hidden ",children:[t.jsxs("div",{className:`sticky top-0 ${g.card} backdrop-blur-sm`,children:[t.jsxs("div",{className:"p-3 sm:p-4",children:[t.jsxs("div",{className:g.between,children:[t.jsxs("p",{className:`${g.truncate} ${g.textXs} ${g.textGray500DarkZinc400}`,children:[t.jsx(Ee,{to:e==="memo"?"/m":"/home",className:"hover:!text-gray-900 dark:hover:!text-white",children:e==="memo"?"MEMO":"HOME"}),i?.path?.map((v,we)=>i.path.length===we+1?` > ${v?.title}`:t.jsxs(ee.Fragment,{children:[" "," > ",t.jsx(Ee,{to:e==="memo"?`/m/${v.id}`:`/home/${v.id}`,className:"hover:!text-gray-900 dark:hover:!text-white",children:v?.title})]},we))]}),t.jsx(C.button,{whileTap:{scale:.8},className:`${g.flexShrink0} ${g.roundedFull} p-2 ${g.buttonHoverGrayLight}`,"aria-label":L("bookmark"),onClick:m,children:i?.bookmark==="Y"?t.jsx(ra,{className:`${g.h5W5} ${g.textRed500}`}):t.jsx(la,{className:`${g.h5W5} ${g.textGray500}`})})]}),I?t.jsx("input",{type:"text",value:S,onChange:te,onKeyDown:Y,onBlur:F,className:`w-full bg-transparent border-b-2 border-blue-500 focus:outline-none 
													${g.heading2XlBoldSm3Xl} ${g.textGray900}`,autoFocus:!0}):t.jsx("div",{onDoubleClick:D,className:`MemoDetail_Title text-left ${g.heading2XlBoldSm3Xl} ${g.textGray900} cursor-pointer`,children:i?.title}),t.jsx("button",{onClick:()=>O(!T),className:`${g.floatingActionButton} absolute top-11 sm:top-14 right-2 sm:right-3`,children:t.jsx(C.div,{animate:{rotate:T?135:0},children:t.jsx(ia,{className:"h-6 w-6"})})})]}),t.jsx(C.div,{initial:!1,animate:{height:T?"auto":0,opacity:T?1:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:t.jsx("div",{className:"border-t border-gray-200 bg-gray-50 dark:border-zinc-800 dark:bg-zinc-900/50",children:t.jsx(De,{master:s?.uid===le,rootDb:e,memoId:a,onEdit:j,onUtil:$,onNewMemo:H,onDelete:_,onCopy:e==="memo"?B:null})})})]}),i&&i.html==="sheet"&&t.jsx($t,{rootDb:e,detailData:i}),t.jsxs("div",{className:`MemoDetail_Content ${i?.memo?.length>0?`${g.card} my-4 p-2 sm:p-4`:"p-1"}`,onDoubleClick:U,children:[h?t.jsxs("div",{className:`${g.card} p-4`,children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx(Se,{children:L("input")}),t.jsx("textarea",{className:"w-full min-h-[100px] p-2 border rounded dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",value:f,rows:`${f.split(/\r\n|\r|\n/g).length}`,onChange:v=>b(v.target.value),autoFocus:!0})]}),t.jsxs("div",{children:[t.jsx(Se,{children:L("preview")}),t.jsx("div",{className:"prose dark:prose-invert max-w-none p-2 border rounded min-h-[100px] overflow-y-auto dark:bg-gray-700 dark:border-gray-600",children:t.jsx(Te,{postData:f,highlightWord:""})})]})]}),t.jsxs("div",{className:"mt-2 flex justify-end gap-2",children:[t.jsx(R,{variant:"outlined",color:g.button.indigo,size:"sm",onClick:()=>u(!1),children:L("cancel")}),t.jsx(R,{color:g.button.indigo,onClick:E,children:L("save")})]})]}):i&&i.html!=="sheet"?i?.html==="N"?t.jsx(Te,{postData:i?.memo,highlightWord:n}):i?.html!=="N"&&i?.memo&&t.jsx(_t,{text:i.memo}):"",t.jsx(Rt,{imageList:i?.image}),!i&&t.jsx("div",{className:"flex justify-center py-12",children:t.jsx("div",{className:`${g.flexCenter} py-12`})})]})]}),t.jsx(Ot,{rootDb:e,memoId:a,enableEdit:!0}),t.jsx(C.div,{initial:!1,animate:{height:T?"auto":0,opacity:T?1:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:t.jsx("div",{className:`${g.line}`,children:t.jsx(De,{master:s?.uid===le,rootDb:e,onEdit:j,onUtil:$,onNewMemo:H,onDelete:_,onCopy:e==="memo"?B:null})})})]}):t.jsx("div",{className:"p-4 text-center text-gray-500",children:"메모를 찾을 수 없거나 접근 권한이 없습니다."})},ma=ee.lazy(()=>ie(()=>import("./MemoSheetGrid-DK6i8NOU.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),Ve=ee.lazy(()=>ie(()=>import("./MemoDetailEdit-CeHE68sc.js"),__vite__mapDeps([9,1,2,3,4,5,6,10,11,12,13,14,15,16,7,8,17]))),ua=ee.lazy(()=>ie(()=>import("./MemoDetailUtil-BRqzyvbG.js"),__vite__mapDeps([18,1,2,3,4,5,6,10,14,15,16,11,7,8]))),xa=ee.lazy(()=>ie(()=>import("./TwTodo-CCUOIm4_.js"),__vite__mapDeps([19,1,2,3,4,5,6,12,10,15,16]))),fa=({rootDb:e,user:n,memoId:s,isLoading:a,onBookmark:r,handleCloseTab:l})=>{const o=he();return t.jsx(d.Suspense,{fallback:t.jsx(ge,{}),children:t.jsx(de,{children:t.jsxs(rs,{location:o,children:[t.jsx(G,{path:"todo",element:t.jsx(C.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:t.jsx(xa,{})})}),t.jsx(G,{path:"sheet/:sheetId?",element:t.jsx(C.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:t.jsx(ma,{})})}),t.jsx(G,{path:"edit/:memoId",element:t.jsx(C.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:t.jsx(Ve,{rootDb:e,isLoading:a})})}),t.jsx(G,{path:"insert/:memoId",element:t.jsx(C.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:t.jsx(Ve,{rootDb:e,isLoading:a})})}),t.jsx(G,{path:"util/:memoId",element:t.jsx(C.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:t.jsx(ua,{rootDb:e,isLoading:a})})}),t.jsx(G,{path:":memoId",element:t.jsx(C.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:a?t.jsx(ge,{}):t.jsx(ha,{rootDb:e,onBookmark:r,onDeleteTab:()=>{l&&l(null,{id:s})}})})})]},o.pathname)})})},ga=e=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...e,children:t.jsx("path",{fillRule:"evenodd",d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zM6 20V4h7v5h5v11H6zM8 12h3v3H8v-3zm0 4h3v3H8v-3zm4-4h3v3h-3v-3zm0 4h3v3h-3v-3z",clipRule:"evenodd"})}),pa=({tabInfo:e,handleCloseTab:n,isActive:s,onClickTab:a})=>{const{t:r}=W(),{user:l}=Q(),{attributes:o,listeners:i,setNodeRef:c,transform:m,transition:h,isDragging:u}=Vt({id:e.id}),f={transform:Ft.Transform?.toString(m),transition:h,zIndex:u?1:"auto"};return t.jsxs("div",{ref:c,style:f,...o,...i,"data-tab-id":e.id,onClick:a,title:e.title,className:`SortableTab group relative flex flex-shrink-0 items-center pl-3 pr-2 py-1.5 text-sm rounded-t-md transition-colors duration-200 min-w-28 max-w-48 border-b-2 cursor-pointer
				${s?"bg-gray-200 dark:bg-zinc-700 border-blue-500 text-gray-800 dark:text-gray-100":"border-transparent text-secondary hover:bg-gray-200/70 dark:hover:bg-zinc-700/70"}
				${u?"opacity-50 shadow-lg":""}`,children:[e.rootDb==="memo"?t.jsx(Yt,{className:`w-5 h-5 mr-1 flex-shrink-0 transition-transform duration-200 ${s?"scale-110":""}`,fill:"currentColor"}):e.rootDb==="sheet"?t.jsx(ga,{className:`w-5 h-5 mr-1 flex-shrink-0 transition-transform duration-200 ${s?"scale-110":""}`}):null,t.jsx("span",{className:"truncate pr-1",style:{fontFamily:"sans-serif"},children:e.title||r("loading")}),t.jsx("button",{onClick:b=>{b.preventDefault(),b.stopPropagation(),n(e.id)},className:`ml-auto flex-shrink-0 p-1 rounded-full transition-opacity duration-200 opacity-0 group-hover:opacity-100
					text-gray-500 dark:text-gray-400 
					hover:bg-gray-300/50 dark:hover:bg-gray-600/50 hover:text-gray-700 dark:hover:text-white
				`,children:t.jsx(qe,{className:"w-3 h-3"})})]})},va=d.memo(({rootDb:e,user:n})=>{const s=d.useRef(null),[a,r]=d.useState({left:!1,right:!1}),[l,o]=d.useState(!0),i=d.useRef(0),c=Ze(),m=he(),h=m.pathname.split("/").pop(),u=P(),{tabs:f,activeTab:b}=A(x=>x.tabs[e]||{tabs:[],activeTab:null}),I=A(x=>x?.tabs?.deleteId||null),z=d.useRef(null);d.useEffect(()=>{if((async()=>{if(I!==h&&h&&h!=="insert"&&m.pathname!=="/m"&&m.pathname!=="/home")if(f.some(w=>w.id===h))b!==h&&f.some(w=>w.id===h)&&z.current===null&&u(Me({activeTabId:h,rootDb:e}));else{let w="Loading...";try{let k;if(e==="sheet"?k=`memo_sheet/${n?.uid}/${h}/title`:e==="memo"?k=`${e}_txt/${n?.uid}/${h}/title`:e==="home"&&(k=`${e}_txt/${h}/title`),k){const M=await be(k);M&&(w=M)}}catch(k){console.error("Error fetching tab title:",k)}u(ts({id:h,path:m.pathname,rootDb:e,title:w}))}})(),z.current=null,I){const p=setTimeout(()=>{u(Gt())},2e3);return()=>clearTimeout(p)}},[h,m.pathname,e,b,n?.uid,I,f,u]);const S=d.useCallback(()=>{const x=s.current;if(x){const p=x.scrollWidth>x.clientWidth,w=x.scrollLeft===0,k=x.scrollLeft+x.clientWidth>=x.scrollWidth-1;r(M=>{const y={left:p&&!w,right:p&&!k};return M.left===y.left&&M.right===y.right?M:y})}},[]);d.useEffect(()=>{const x=()=>{const p=window.pageYOffset||document.documentElement.scrollTop;p>i.current?o(!1):o(!0),i.current=p<=0?0:p};return window.addEventListener("scroll",x),()=>{window.removeEventListener("scroll",x)}},[]);const N=x=>{s.current?.scrollBy({left:x==="left"?-200:200,behavior:"smooth"})},T=d.useCallback(x=>{const p=f.findIndex(w=>w.id===x);if(p!==-1&&(u(Ue({tabId:x,rootDb:e})),u({type:"tabs/setDeleteId",payload:x}),b===x))if(f.length>1){const w=p>0?p-1:0,k=f[w===p?w+1:w];c(k.path)}else c(e==="memo"?"/m":"/home")},[f,b,u,c,e]),O=d.useCallback(x=>{const p=x.split("/").pop();z.current=p,u(Me({activeTabId:p,rootDb:e})),requestAnimationFrame(()=>{c(x)})},[u,c]),L=d.useCallback(()=>{u(Xt({rootDb:e}))},[u]),V=d.useCallback(x=>{const{active:p,over:w}=x;if(w&&p.id!==w.id){const k=f.findIndex(y=>y.id===p.id),M=f.findIndex(y=>y.id===w.id);u(Kt({tabs:Jt(f,k,M),rootDb:e}))}},[f,u]);return d.useEffect(()=>{S();const x=s.current;return x?.addEventListener("scroll",S),window.addEventListener("resize",S),()=>{x?.removeEventListener("scroll",S),window.removeEventListener("resize",S)}},[S,f.length]),t.jsx("div",{className:`MemoTabs sticky ${l?"top-18":"top-1"} z-1000 rounded-t-md bg-gray-50/70 dark:bg-zinc-800/70 backdrop-blur-sm shadow-sm`,children:t.jsxs("div",{className:"relative flex items-center justify-between ",children:[a.left&&t.jsx("button",{onClick:()=>N("left"),className:"absolute left-0 z-10 p-1 border border-gray-200 dark:border-gray-700 text-gray-500 dark:text-gray-400 bg-white dark:bg-zinc-900 dark:hover:!text-white hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full group",children:t.jsx(Ut,{className:"w-5 h-5 fill-current"})}),t.jsx(Zt,{id:"memo-tabs",onDragEnd:V,children:t.jsx("div",{ref:s,className:"MemoTabs relative flex items-center overflow-x-scroll scrollbar-hide whitespace-nowrap",children:t.jsx(qt,{items:f.map(x=>x.id),strategy:Qt,children:t.jsx(de,{children:f.map(x=>t.jsx(C.div,{layout:!0,initial:{opacity:0,scale:.8},transition:{type:"spring",stiffness:350,damping:30},animate:{opacity:1,scale:1},exit:{opacity:0,width:0,paddingLeft:0,paddingRight:0,transition:{duration:.3}},children:t.jsx(pa,{tabInfo:x,onClickTab:()=>O(x.path),handleCloseTab:T,isActive:x.id===b})},x.id))})})})}),t.jsxs("div",{className:"flex items-center",children:[a.right&&t.jsx("button",{onClick:()=>N("right"),className:"z-10 p-1 border border-gray-200 dark:border-gray-700 text-gray-500 dark:text-gray-400 bg-white dark:bg-zinc-900 dark:hover:!text-white hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full group",children:t.jsx(es,{className:"w-5 h-5 fill-current"})}),f.length>0&&t.jsx("button",{onClick:L,className:"ml-2 mr-2 p-1.5 text-gray-500 dark:text-gray-400 hover:text-gray-800 dark:hover:text-white hover:bg-gray-200 dark:hover:bg-gray-700 rounded-md",title:"Close all tabs",children:t.jsx(qe,{className:"w-4 h-4"})})]})]})})}),ya=()=>{const{user:e}=Q(),n=A(ss),s=he(),a=P(),{isExpanded:r}=as(),{rootDb:l,memoId:o}=d.useMemo(()=>{const i=s.pathname;let c;i.startsWith("/m")?c="memo":i.startsWith("/home")&&(c="home");const m=i.split("/").pop()||"";return{rootDb:c,memoId:m}},[s.pathname]);return d.useEffect(()=>{(s.pathname==="/home"||s.pathname==="/m")&&a({type:"tabs/setActiveTab",payload:{activeTabId:null,rootDb:l}})},[s.pathname,a]),t.jsxs(t.Fragment,{children:[n&&t.jsx(va,{rootDb:l,user:e}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("main",{className:"flex-1 max-w-screen-lg",children:[t.jsx(fa,{rootDb:l,user:e,memoId:o}),s.pathname==="/m"&&t.jsx(Zs,{rootDb:l}),s.pathname.startsWith("/m/")&&e?.uid===le&&t.jsx("div",{className:"block lg:hidden flex-1",children:t.jsx(xe,{type:"grid"})}),(s.pathname==="/m"||s.pathname==="/home")&&e?.uid===le&&t.jsxs("div",{className:`grid grid-cols-1 ${r?"lg:grid-cols-2":"md:grid-cols-2"} gap-4 mt-5`,children:[t.jsx("div",{className:"block lg:hidden flex-1",children:t.jsx(xe,{})}),t.jsx(Us,{}),t.jsx(Js,{rootDb:l})]})]}),t.jsx("aside",{className:"hidden lg:block flex-1 min-w-45 max-w-64 pt-3",children:(l==="memo"||l==="sheet")&&t.jsx(xe,{})})]})]})},Ca=Object.freeze(Object.defineProperty({__proto__:null,default:ya},Symbol.toStringTag,{value:"Module"}));export{Ca as M,oa as T,Ws as a,Bs as u};
