import{i as m,r as n,j as e,T as u,H as d}from"./index-DM1iZTPq.js";import{u as x}from"./useQuery-Dt0-0pHH.js";import{a as b}from"./LinkItem-BhQSB4lk.js";import{b as f}from"./bibleJson-DmvV-gyR.js";import{b as a}from"./bibleTxt-CDg_iih8.js";import{L as h}from"./Loading-CiYFJLLu.js";import{n as p}from"./commonUtil-DB1p0nOq.js";import{T as c}from"./TwSearchBox-DCcYHq9V.js";import{G as o}from"./Grid-DoLZDLBd.js";import"./useBaseQuery-CG2bgbSt.js";import"./Typography-oEPrgN9t.js";import"./Container-BeifmoFp.js";import"./styled-BDepcmTt.js";import"./CircularProgress-Da9OOWcb.js";import"./TwBadge-D8gIShjP.js";import"./useTheme-MXaPPUfs.js";const g=s=>{if(!(s.bibleList===void 0||s.bibleList===null))return s.bibleList.map((r,i)=>e.jsxs(o,{container:!0,spacing:2,columns:{xs:5,sm:6,md:10,lg:12},children:[e.jsxs(o,{item:!0,xs:1,md:1,children:[f[r.cd1][r.cd2].nm2,r.cd3,":",r.cd4]}),e.jsx(o,{item:!0,xs:4,sm:5,md:9,lg:11,children:e.jsx(b,{to:`/bible/${r.cd1}_${r.cd2}_${r.cd3}`,state:{cd4:r.cd4,word:s.word},children:e.jsx(d,{show:!0,text:r.txt})})})]},i))},j=s=>{if(console.log("BibleSearch.word="+s),s==="")return[];const r=new Array;for(let i in a){let t={...a[i]};if(t.txt.match(s)){t.id=i;const l=new RegExp(s,"gi");t.txt=t.txt.replace(l,`<span class='lightext'>${s}</span>`),r.push(t)}}return r},G=()=>{const r=m().state,i=n.useRef(r===null?"":r.s),t=x({queryKey:["getBibleData",r&&r?.s?r.s:""],queryFn:()=>j(r?.s)});return n.useEffect(()=>{i.current=r===null?"":r.s,console.log("BibleSearch.useEffect.searchWord="+i.current),t.refetch()},[r]),t.isLoading?e.jsxs(e.Fragment,{children:[e.jsx(c,{state:r,gubun:"bible"}),e.jsx(h,{})]}):t.error?e.jsxs("div",{children:["Error: ",t.error.message]}):e.jsxs("div",{children:[e.jsx(c,{state:r,gubun:"bible"}),e.jsxs(u,{children:["검색 결과 : ",p(t.data?t.data?.length:"0")]}),e.jsx(g,{bibleList:t.data,word:i.current})]})};export{G as default};
