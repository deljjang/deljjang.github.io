import{j as e,w as k,v as $,x as H,h as M,r as m,n as O,f as X,p as q,o as D,t as U,_ as C}from"./index-BnDGPcXM.js";import{A as L}from"./AniButton-zfdL1bur.js";import{u as z,B as G}from"./BibleBookmarkText-De6h1j9z.js";/* empty css                   */import{T as K}from"./TwTitleItem-BxvMaFzh.js";import{H as F}from"./HtmlText-DdSVKywK.js";import{T as Q}from"./TwLoading-MuxDNEpN.js";import"./Button-DdLpk1Bo.js";import"./Grid-BQd3EvcY.js";import"./index-BH2gn-gO.js";/* empty css                   */const W=({dataText:l,searchWord:h,bookmark:b,...c})=>{if(l==null)return;const p=c.bibleId.split("_");return c.bibleId&&p.length<2?e.jsx(e.Fragment,{}):e.jsxs(e.Fragment,{children:[e.jsx("h6",{className:`flex flex-col items-center mb-8 ${k.textXl}`,children:c.nm}),l.map((r,o)=>{let a="text.primary";c.cd4+""===r.cd4&&(a="warning.main");const x=b?.filter(s=>s.id===r.id&&s.bookmark==="Y");return x&&x.length>0&&(r.bookmark="Y"),e.jsxs("div",{className:"grid grid-cols-5 sm:grid-cols-6 md:grid-cols-10 lg:grid-cols-12 gap-4",id:`id_${o+1}`,children:[e.jsx("div",{className:"col-span-1",children:e.jsxs("div",{className:`flex items-center ${a}`,children:[e.jsx($,{className:"items-center text-top cursor-pointer",onClick:()=>c.onBookmark(r),children:r.nm}),x&&x.length>0&&e.jsx(H,{className:"text-red-500 w-4 h-4"})]})}),e.jsxs("div",{className:`col-span-4 sm:col-span-5 md:col-span-9 lg:col-span-11 ${a}`,children:[e.jsx(F,{text:r.ko}),e.jsx("div",{className:"text-sm text-red-600 dark:text-gray-700",children:e.jsx(F,{text:r.en})})]})]},o)})]})},Z=({data:l,bibleId:h,isBottom:b=!1})=>{const c=new Array,{t:p}=M();if(l==null)return;const r=h.split("_");for(let o=1;o<=l.cd3;o++){const a={nm:`${l.nm2}${o}장`,key:l.id+"_"+o};c.push(a)}return r&&r.length===3&&!b?e.jsxs("h6",{className:`flex flex-col items-center ${k.textXl}`,children:[r[2],"장"]}):e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-10 lg:grid-cols-12 gap-4",children:c.map((o,a)=>e.jsx("div",{className:"col-span-1",children:e.jsx($,{to:`/bible/${o.key}`,children:o.nm})},a))})},me=()=>{const[l,h]=m.useState(null),[b,c]=m.useState(!0),{query:p,setBibleBookmark:r}=z(),o=p.data,{t:a,i18n:x}=M(),s=m.useRef(),{bibleId:d}=O(),T=X(),[w,B]=m.useState(!1),[y,I]=m.useState(!1),{user:P}=q(),N=T?.state?.word,v=T?.state?.cd4,R=D();m.useEffect(()=>{if(d!==void 0){(async()=>{const u=await V(d,N);h(u),c(!1)})(),B(!1),I(!0);const t=d.split("_");if(s.current&&t.length>=2){const u=s.current.cd3;B(Number(t[2])!==1),I(t[2]<u)}}},[d,N]),m.useEffect(()=>{v!==void 0&&setTimeout(()=>{S("","id_"+v)},1500)},[l,v]);const S=(i,t)=>{const u=document.getElementById(t);u&&u.scrollIntoView({block:"center",behavior:"smooth"})},J=i=>{P!==void 0&&(r(i),i.bookmark=i.bookmark===void 0||i.bookmark==="N"?"Y":"N")},V=async(i,t)=>{if(i===""||i===void 0)return"";x.language.split("-")[0];const Y=(await C(()=>import("./bibleJson-mLacnG04.js"),[])).default,f=i.split("_"),A=(await C(()=>import("./bible-7rshX_PU.js"),[])).default;if(f.length<1)return;f.length>1&&Y.map(g=>{g.id===f[0]+"_"+f[1]&&(s.current=g)});const _=new Array;if(f.length>1){const g=new RegExp(t,"gi");for(let j in A){let n=A[j];n.id.startsWith(`${i}_`)&&(t!==void 0&&t!==""&&t!==null&&(n.ko=n.ko.replace(g,`<span class='lightext'>${t}</span>`),n.en=n.en.replace(g,`<span class='lightext'>${t}</span>`)),n.nm=f.length===2?`${s.current.nm2}${n.cd3}:${n.cd4}`:`${s.current.nm2}${n.cd3}:${n.cd4}`,_.push(n))}return _.sort((j,n)=>j.cd3-n.cd3||j.cd4-n.cd4),_}};if(d==="")return e.jsx(e.Fragment,{});const E=i=>{let t=d.split("_");t[2]=Number(t[2])+i,R(`/bible/${t[0]}_${t[1]}_${t[2]}`)};return l===null?e.jsx(Q,{}):e.jsxs("div",{className:`${k.card}`,children:[e.jsx("div",{id:"back-to-top-anchor"}),e.jsx(G,{}),e.jsx("div",{className:"w-full items-center justify-center flex flex-col",children:e.jsx($,{to:"/bible/"+s.current.id,children:e.jsx(K,{children:s.current!==null&&s.current!==void 0&&s.current.nm!==null?`${s.current.text} ${s.current.text_en}`:""})})}),e.jsx(Z,{data:s.current,bibleId:d}),e.jsx(W,{dataText:l,data:s.current,searchWord:N,bibleId:d,cd4:v,bookmark:o,onBookmark:J}),e.jsxs("div",{className:"p-0",children:[b&&e.jsx("div",{className:"flex flex-col items-center",children:e.jsx(U,{className:"mt-10"})}),d&&d.split("_").length===3?e.jsx("div",{className:`${k.between} mt-10`,children:e.jsxs("div",{className:"grid grid-cols-12 gap-2 w-full",children:[w?e.jsx("div",{className:y?"col-span-6":"col-span-12",children:e.jsx(L,{type:"button",variant:"outlined",onClick:()=>E(-1),fullWidth:!0,children:`< ${a("prev")}`})}):null,y?e.jsx("div",{className:w?"col-span-6":"col-span-12",children:e.jsx(L,{type:"button",variant:"outlined",onClick:()=>E(1),fullWidth:!0,children:`${a("next")} >`})}):""]})}):null]})]})};export{me as TwBibleDetail,me as default};
