import{j as e,a6 as f,bQ as S,bT as j,bU as k,r as c,z as v,aM as W,a0 as C,R as D,E as w,bV as N,a9 as M,aa as R,p,ab as E,ac as I}from"./index-EsjifOpZ.js";import{u as F}from"./useSuspenseQuery-D4mZiubr.js";import{a as _,T as q}from"./TailList-CNI1wmKJ.js";import B from"./TwDetail-91zzFWiy.js";import"./useBaseQuery-BSBzVg_c.js";import"./ComponentCard-C9OHTakF.js";const P=({uid:o,state:s})=>{const a=F({queryKey:["blogMainSearch",s&&s?.s?s.s:""],queryFn:()=>_(s?.s,o===f?f:"")});return e.jsx(q,{query:a,index:"1",s:s&&s?.s?s.s:"",sx:{mt:2}})},Q=({uid:o,state:s})=>{console.log("TailSearchList.state:",s,", uid=",o);const[a,l]=S(j),[t,i]=S(k);return c.useEffect(()=>{console.log("TailSearchList.lastSearch:",t),t!==s.s&&(console.log("TailSearchList.searchWords:",a),console.log("TailSearchList.searchWords.s:",a[s.s]),l(d=>({...d,[s.s]:a[s.s]===void 0?1:a[s.s]+1})),console.log("TailSearchList.searchWords.s2:",a[s.s]),console.log("TailSearchList.searchWords=",a),i(s.s))},[s]),e.jsx(U,{title:"Search",className:"mt-6",children:e.jsx("div",{className:"mt-5"})})},U=({title:o,children:s,className:a=""})=>{const l=v(),t=W(j),i=[];console.log("SearchCard.searchWords=",t);for(const r in t)console.log("SearchCard.key=",r),i.push(r);const d=r=>{console.log("SearchCard.onClick=",r),l("/tw/search",{state:{s:r}})};return e.jsxs("div",{className:`rounded-2xl border border-gray-200 
      bg-white dark:border-gray-800 dark:bg-white/[0.03] 
      overflow-hidden w-full ${a}
      mb-5
      `,children:[e.jsx("div",{className:"flex flex-col px-4 py-2",children:e.jsx("h3",{className:"text-base font-medium text-gray-800 dark:text-white/90",children:o})}),e.jsxs("div",{className:"flex p-2 sm:p-4 border-t bg-stone-100 dark:bg-stone-950 border-gray-100 dark:border-gray-800 ",children:[i.map((r,h)=>(console.log("SearchCard.value=",r,h),e.jsx("div",{children:e.jsx(C,{className:"cursor-pointer",variant:"light",color:"dark",onClick:()=>d(r),children:r})},h))),e.jsx("div",{children:s})]})]})};function H(){const o=D(),s=o.state,{user:a}=w(),l=c.useRef(s.s),[t,i]=c.useState(),[d]=N(),r=d.get("g"),[h,b]=c.useState(),[y,u]=c.useState(!0),x=r==="h"?"home":"memo";return c.useEffect(()=>{const T=async g=>{if(g!==""){const L=await I(x,a?.uid,g,l.current);b(L),u(!1)}};u(!0);const m=o.pathname.split("/"),n=m.length>2?m[m.length-1]:"";console.log("useEffect.tmp=",n),i(n),n!=null&&n!=="search"&&T(n)},[o.pathname]),console.log("TailSearch.memoId=",t,", state:",s,", user=",a?.uid),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",alignContent:"center",justifyContent:"center"},children:[e.jsxs(c.Suspense,{fallback:e.jsx(p,{}),children:[e.jsx(M,{children:e.jsx(R,{path:"/:memoId",element:e.jsx(B,{rootDb:x,isLoading:y,memoDetailData:h})})}),t==="search"?e.jsx(Q,{uid:a?.uid,state:s}):"",a===null?e.jsx(p,{}):t==="search"&&s.s!==""&&e.jsx(e.Fragment,{children:e.jsx(P,{index:"1",uid:a?.uid,state:s})})]}),e.jsx(E,{})]})}export{H as default};
