const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/App-ai_KYhla.js","assets/index-D_uTceCe.js","assets/index-CQ_iAh1R.css","assets/App-DH5BMUk4.css"])))=>i.map(i=>d[i]);
import{j as e,r as u,_ as L}from"./index-D_uTceCe.js";import{w as _,T,F as O,H as S,c as M,h as X,a as Y,l as U,i as q,x as z,k as A}from"./App-ai_KYhla.js";import{u as G,B as K}from"./BibleBookmarkText-t4ZGyqPD.js";import{a as Q}from"./BibleSkeleton-CfnNhttq.js";const W=({dataText:n,searchWord:g,bookmark:h,...c})=>{if(n==null)return;const p=c.bibleId.split("_");return c.bibleId&&p.length<2?e.jsx(e.Fragment,{}):e.jsxs(e.Fragment,{children:[e.jsx("h6",{className:`flex flex-col items-center mb-8 ${_.textXl}`,children:c.nm}),n.map((l,r)=>{let d="text.primary";c.cd4+""===l.cd4&&(d="warning.main");const m=h?.filter(j=>j.id===l.id&&j.bookmark==="Y");return m&&m.length>0&&(l.bookmark="Y"),e.jsxs("div",{className:"grid grid-cols-5 sm:grid-cols-6 md:grid-cols-10 lg:grid-cols-12 gap-4",id:`id_${r+1}`,children:[e.jsx("div",{className:"col-span-1",children:e.jsxs("div",{className:`flex items-center ${d}`,children:[e.jsx(T,{className:"items-center text-top cursor-pointer",onClick:()=>c.onBookmark(l),children:l.nm}),m&&m.length>0&&e.jsx(O,{className:"text-red-500 w-4 h-4"})]})}),e.jsxs("div",{className:`col-span-4 sm:col-span-5 md:col-span-9 lg:col-span-11 ${d}`,children:[e.jsx(S,{text:l.ko}),e.jsx("div",{className:"text-sm text-red-600 dark:text-gray-700",children:e.jsx(S,{text:l.en})})]})]},r)})]})},Z=({data:n,bibleId:g,isBottom:h=!1})=>{const c=new Array,{t:p}=M();if(n==null)return;const l=g.split("_");for(let r=1;r<=n.cd3;r++){const d={nm:`${n.nm2}${r}장`,key:n.id+"_"+r};c.push(d)}return l&&l.length===3&&!h?e.jsxs("h6",{className:`flex flex-col items-center ${_.textXl}`,children:[l[2],"장"]}):e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-10 lg:grid-cols-12 gap-4",children:c.map((r,d)=>e.jsx("div",{className:"col-span-1",children:e.jsx(T,{to:`/bible/${r.key}`,children:r.nm})},d))})},ie=()=>{const[n,g]=u.useState(null),[h,c]=u.useState(null),[p,l]=u.useState(!0),{bookmarks:r,handleToggleBookmark:d}=G(),{t:m,i18n:j}=M(),i=u.useRef(),{bibleId:a}=X(),w=Y(),[B,y]=u.useState(!1),[I,E]=u.useState(!1),{user:R}=U(),$=w?.state?.word,v=w?.state?.cd4,V=q();u.useEffect(()=>{if(a!==void 0){(async()=>{const x=await D(a,$);g(x),l(!1)})(),y(!1),E(!0);const t=a.split("_");if(i.current&&t.length>=2){const x=i.current.cd3;y(Number(t[2])!==1),E(t[2]<x)}}},[a,$]),u.useEffect(()=>{v!==void 0&&setTimeout(()=>{P("","id_"+v)},1500)},[n,v]);const P=(o,t)=>{const x=document.getElementById(t);x&&x.scrollIntoView({block:"center",behavior:"smooth"})},J=o=>{R!==void 0&&(d(o),c(o.id),setTimeout(()=>c(null),1e3))},D=async(o,t)=>{if(o===""||o===void 0)return"";j.language.split("-")[0];const H=(await L(()=>import("./bibleJson-mLacnG04.js"),[])).default,f=o.split("_"),F=(await L(()=>import("./App-ai_KYhla.js").then(b=>b.cb),__vite__mapDeps([0,1,2,3]))).default;if(f.length<1)return;f.length>1&&H.map(b=>{b.id===f[0]+"_"+f[1]&&(i.current=b)});const N=new Array;if(f.length>1){const b=new RegExp(t,"gi");for(let k in F){let s=F[k];s.id.startsWith(`${o}_`)&&(t!==void 0&&t!==""&&t!==null&&(s.ko=s.ko.replace(b,`<span class='lightext'>${t}</span>`),s.en=s.en.replace(b,`<span class='lightext'>${t}</span>`)),s.nm=f.length===2?`${i.current.nm2}${s.cd3}:${s.cd4}`:`${i.current.nm2}${s.cd3}:${s.cd4}`,N.push(s))}return N.sort((k,s)=>k.cd3-s.cd3||k.cd4-s.cd4),N}};if(a==="")return e.jsx(e.Fragment,{});const C=o=>{let t=a.split("_");t[2]=Number(t[2])+o,V(`/bible/${t[0]}_${t[1]}_${t[2]}`)};return n===null?e.jsx(Q,{}):e.jsxs("div",{className:`${_.card}`,children:[e.jsx("div",{id:"back-to-top-anchor"}),e.jsx(K,{}),e.jsx("div",{className:"w-full items-center justify-center flex flex-col",children:e.jsx(T,{to:"/bible/"+i.current.id,children:e.jsx(z,{children:i.current!==null&&i.current!==void 0&&i.current.nm!==null?`${i.current.text} ${i.current.text_en}`:""})})}),e.jsx(Z,{data:i.current,bibleId:a}),e.jsx(W,{dataText:n,data:i.current,searchWord:$,bibleId:a,cd4:v,bookmark:r,clickedVerseId:h,onBookmark:J}),e.jsxs("div",{className:"p-0",children:[p&&e.jsx("div",{className:"flex flex-col items-center",children:e.jsx("div",{className:"mt-10 w-8 h-8 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"})}),a&&a.split("_").length===3?e.jsx("div",{className:`${_.between} mt-10`,children:e.jsxs("div",{className:"grid grid-cols-12 gap-2 w-full",children:[B?e.jsx("div",{className:I?"col-span-6":"col-span-12",children:e.jsx(A,{type:"button",variant:"outlined",onClick:()=>C(-1),fullWidth:!0,children:`< ${m("prev")}`})}):null,I?e.jsx("div",{className:B?"col-span-6":"col-span-12",children:e.jsx(A,{type:"button",variant:"outlined",onClick:()=>C(1),fullWidth:!0,children:`${m("next")} >`})}):""]})}):null]})]})};export{ie as TwBibleDetail,ie as default};
