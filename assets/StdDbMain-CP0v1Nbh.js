import{j as e,r as s,I as H,J as K,n as Y,K as G,X as w,Y as g,M as $,V as J,Z as v,L as X}from"./index-DJsI4Zxh.js";import{S as Z,a as Q,M as b}from"./StdSelect-BPWm9BxX.js";import{A as f}from"./AniButton-DmKH_KsB.js";const tt=t=>e.jsxs("div",{className:"flex-grow my-4 w-full grid grid-cols-4 gap-0 items-center justify-center text-center whitespace-nowrap",children:[e.jsx(f,{type:"button",size:"small",variant:"outlined",color:"warning",onClick:t.onInsert,children:"추가"}),e.jsx(f,{type:"button",size:"small",variant:"outlined",color:"error",onClick:t.onDelete,children:"삭제"}),e.jsx(f,{type:"button",size:"small",variant:"outlined",color:"success",onClick:t.onReload,children:"리로드"}),e.jsx(f,{type:"button",size:"small",variant:"outlined",onClick:t.onCsvSave,children:"csv저장"})]});$();const D=t=>{const n=s.useRef(null),i=s.useRef(null),[d,c]=s.useState([]),[F,j]=s.useState(0),{theme:U}=H(),E=U==="dark"?"ht-theme-main-dark-auto":"ht-theme-main",R=async a=>{try{return(await w.post(g+t.postUrl,a)).data}catch{}},N=async()=>{const a=await w.get(g+t.listUrl);try{c(a.data),j(a.data?.length)}catch{}};s.useEffect(()=>{N()},[]);const k=async()=>{await N(),y()},P=async()=>{n.current.hotInstance.getPlugin("exportFile").downloadFile("csv",{filename:t.csvFileName,mimeType:"text/csv",bom:!1,columnDelimiter:",",rowDelimiter:`\r
`})},q=()=>{},T=(a,l)=>{},W=t.columns.map((a,l)=>({value:l,text:a.title})),y=()=>{try{const a=n.current?.hotInstance,l=a?.getPlugin("filters");if(l){const r=C("columns1");t.columns.forEach((p,u)=>{l?.removeConditions(u)}),l?.addCondition(Number(r),"contains",[C("filterField1")]),l?.filter(),a?.render();const h=a.getData().length;j(h)}}catch(a){console.error("Error:",a.message)}},{register:S,control:_,setValue:M,getValues:C,formState:{errors:O}}=K({mode:"onChange"});S("filterField1",{required:!0});const V=()=>{},L=async(a,l)=>{if(a!==null){const r=n.current?.hotInstance;if(r?.getPlugin("filters")){const h=r.getData(),p=[];a.forEach((u,I)=>{const x={};t.columns.forEach((o,B)=>{x[o.data]=h[I][B]}),p.push(x)}),p.forEach(async(u,I)=>{const x=await R(u);d.map(o=>{(o.seq===void 0||o.seq===null)&&o.wdNm===u.wdNm&&o.awdNm===u.awdNm&&(o.seq=x.seq)})}),r.render()}}},z=()=>{n.current.hotInstance.alter("insert_row_above",0,1)},A=async()=>{const a=n.current.hotInstance;if(a&&i.current!==null){if(a?.getPlugin("filters")){const m={seq:a.getData()[i.current][0]};await w.post(g+t.deleteUrl,m)}a.alter("remove_row",i.current,1)}};return e.jsxs("div",{className:"max-w-full w-full px-0",children:[e.jsxs("div",{className:"max-w-full px-0 w-full grid grid-cols-[200px_200px_300px] items-baseline justify-start text-center whitespace-nowrap",children:[e.jsx("div",{className:"px-4 py-2 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[t.title," : ",Y(F)]})}),e.jsx(Z,{id:"columns1",name:"columns1",label:"조회 컬럼",control:_,defaultValue:t.selectDefault?t.selectDefault:"1",variant:"standard",margin:"normal",selectList:W,error:!!O.columns1,onChange:a=>{a.preventDefault();const l=a.target.value;M("columns1",l),l!=""&&y()}}),e.jsx("input",{...S("filterField1"),placeholder:"조회",className:"w-full pl-2 py-2 border-b border-gray-300 dark:border-gray-600 bg-transparent focus:outline-none focus:border-blue-500 dark:text-white",onKeyUp:y})]}),e.jsx(G,{ref:n,data:d,themeName:E,rowHeaders:!0,colHeaders:!0,autoWrapRow:!0,height:"560px",width:"auto",contextMenu:!0,observeChanges:!0,columnSorting:!0,afterChange:L,afterChangesObserved:V,afterFilter:q,afterSelectRows:T,afterSelection:(a,l,r,m)=>{i.current=a},licenseKey:"non-commercial-and-evaluation",columns:t.columns,cells:(a,l)=>t.columns[l].readOnly===!0?{readOnly:!0}:{},colWidths:t.colWidths,manualColumnResize:!0,filters:!0}),e.jsx(tt,{onInsert:z,onDelete:A,onReload:k,onCsvSave:P})]})},et=()=>{const t=[{title:"ID",type:"numeric",data:"seq",readOnly:!0},{title:"도메인대분류",type:"text",data:"dmn1"},{title:"도메인중분류",type:"text",data:"dmn2"},{title:"도메인명",type:"text",data:"dmn"},{title:"도메인설명",type:"text",data:"dmnDscr",columnSorting:{headerAction:!1}},{title:"데이터타입",type:"text",data:"ty"},{title:"데이터길이",type:"text",data:"len"},{title:"소숫점길이",type:"text",data:"len2"},{title:"저장형식",type:"text",data:"sav"},{title:"표현형식",type:"text",data:"exprs"},{title:"단위",type:"text",data:"unt"},{title:"허용값",type:"text",data:"vl"},{title:"사용건수",type:"numeric",data:"cnt"}],n=[50,180,200,400,300,100,150,150,100,150,150,150,150,150,140];return e.jsx(D,{csvFileName:"exported_dmn",postUrl:"/dmn/post.do",listUrl:"/dmn/list.do",deleteUrl:"/dmn/delete.do",title:"도메인정보",columns:t,colWidths:n,selectDefault:"3"})},at=()=>{const t=[{title:"ID",type:"numeric",data:"seq",readOnly:!0},{title:"용어명",type:"text",data:"trmNm"},{title:"영문약어명",type:"text",data:"awdNm"},{title:"영문명",type:"text",data:"trmEnNm"},{title:"단어설명",type:"text",data:"trmDscr",columnSorting:{headerAction:!1}},{title:"도메인명",type:"text",data:"dmn"},{title:"허용값",type:"text",data:"vl"},{title:"관리부서명",type:"text",data:"deptNm"},{title:"표준코드명",type:"text",data:"cdNm"},{title:"업무분야",type:"text",data:"dutDv"},{title:"저장형식",type:"text",data:"sav"},{title:"표현형식",type:"text",data:"dis"},{title:"용어 이음동의어 목록",type:"text",data:"lst"},{title:"시스템명",type:"text",data:"sys"},{title:"사용여부",type:"text",data:"useYn"}],n=[50,180,200,400,300,100,150,150,100,150,150,150,150,150,140];return e.jsx(D,{csvFileName:"exported_trm",postUrl:"/trm/post.do",listUrl:"/trm/list.do",deleteUrl:"/trm/delete.do",title:"용어정보",columns:t,colWidths:n})},lt=()=>{const t=[{title:"ID",type:"numeric",data:"seq",readOnly:!0},{title:"단어명",type:"text",data:"wdNm",readOnly:!1},{title:"영문약어명",type:"text",data:"awdNm"},{title:"영문명",type:"text",data:"wdEnNm"},{title:"단어설명",type:"text",data:"wdDscr"},{title:"형식단어여부",type:"text",data:"wdYn"},{title:"도메인분류명",type:"text",data:"dmnDvNm"},{title:"이음동의어",type:"text",data:"synmVl"},{title:"금칙어",type:"text",data:"notNm"},{title:"도메인그룹명",type:"text",data:"dmnGrpNm"},{title:"시스템",type:"text",data:"sys"}],n=[50,180,200,350,400,100,150,150,100,150,100];return e.jsx(D,{csvFileName:"exported_wd",postUrl:"/wd/post.do",listUrl:"/wd/list.do",deleteUrl:"/wd/delete.do",title:"단어정보",columns:t,colWidths:n})},ot=()=>{const[t,n]=s.useState(0);s.useEffect(()=>{J({title:"표준",description:"표준"})},[]),s.useEffect(()=>{const d=v.findIndex(c=>`#${c.id}`===window.location.hash);n(d!==-1?d:t)},[t]);const i=(d,c)=>{window.location.hash=`#${v[c].id}`,n(c)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"max-w-full w-full mt-6",children:[e.jsx(Q,{tabValue:t,onChange:i,tabs:v}),e.jsx(s.Suspense,{fallback:e.jsx(X,{}),children:e.jsxs(e.Fragment,{children:[e.jsx(b,{value:t,index:0,className:"max-w-full w-full px-0",children:e.jsx(lt,{})}),e.jsx(b,{value:t,index:1,className:"max-w-full w-full px-0",children:e.jsx(at,{})}),e.jsx(b,{value:t,index:2,className:"max-w-full w-full px-0",children:e.jsx(et,{})})]})})]})})};export{ot as default};
