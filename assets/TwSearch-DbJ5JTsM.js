import{r as n,j as e}from"./index-D_uTceCe.js";import{e as y,f as S,af as L,m as j,u as k,ag as N,v as D,w as T,a as $,l as C,ah as E,ai as R,aj as I,L as x,ak as z}from"./App-ai_KYhla.js";import M from"./TwDetail-9nWYdlqe.js";import{T as P}from"./TwSearchBox-DjeT0uGX.js";const A=()=>e.jsx("div",{className:"w-full max-w-4xl mx-auto mt-2 space-y-4 p-4",children:[...Array(5)].map((s,a)=>e.jsxs("div",{className:"p-4 border border-gray-200 dark:border-zinc-700 rounded-lg animate-pulse",children:[e.jsx("div",{className:"h-5 bg-gray-300 dark:bg-zinc-600 rounded w-3/4 mb-3"}),e.jsx("div",{className:"space-y-2",children:e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-zinc-600 rounded w-5/6"})})]},a))}),B=({uid:s,state:a})=>{const r=y(),{data:t,isLoading:i,error:c}=S(o=>o.blogSearch),l=a?.s||"";return n.useEffect(()=>{r(L({searchTerm:l,uid:s===j?j:""}))},[r,l,s]),i?e.jsx(A,{}):c?e.jsxs("div",{children:["Error: ",c]}):t?e.jsx(F,{data:t,index:"1",s:l,sx:{mt:2}}):null},F=({data:s,className:a,s:r,lnk:t="tw/search",index:i})=>{const{isExpanded:c}=k(),l=c?"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2":"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 2xl:grid-cols-3";return e.jsx("div",{className:`TwList w-full ${l} gap-2 px-2
      ${a}`,children:s.map((o,m)=>e.jsx(U,{lnk:t,post:o,s:r,index:m},m))})};function U({post:s,s:a,lnk:r}){const t=s.g==="m"?e.jsx("span",{className:"menu-item-icon-size menu-item-icon-active",children:e.jsx(N,{})}):null,i=r==="blog"?`/${r}/${s.url?s.url:s.id}`:`/${r}/${s.url?s.url:s.id}?s=${a}&g=${s.g?s.g:"m"}`;return e.jsx(D,{to:i,state:{s:a},className:"RouterLink w-full no-underline",children:e.jsx(W,{icon:t,children:s.title})},s.key)}const W=({children:s,className:a="",icon:r=null})=>e.jsx("div",{className:`ComponentCard w-full ${T.roundedXl} border border-gray-200 
      bg-white dark:border-gray-800 dark:bg-white/[0.03] 
      overflow-hidden ${a}`,children:e.jsx("div",{className:"flex flex-col px-4 py-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[r&&e.jsx("span",{className:"flex-shrink-0",children:r}),e.jsx("h3",{className:"text-base font-medium text-gray-800 dark:text-white/90",children:s})]})})});function H(){const s=$(),a=s.state,{user:r}=C(),t=n.useRef(a===null?"":a.s),[i,c]=n.useState(),[l]=E(),o=l.get("g"),[m,p]=n.useState(),[b,h]=n.useState(!0),g=o==="h"?"home":"memo";return n.useEffect(()=>{const w=async f=>{if(f!==""){const v=await z(g,r?.uid,f,t.current);p(v),h(!1)}};h(!0);const u=s.pathname.split("/"),d=u.length>2?u[u.length-1]:"";c(d),d!=null&&d!=="search"&&w(d)},[s.pathname]),e.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",alignContent:"center",justifyContent:"center"},children:e.jsxs(n.Suspense,{fallback:e.jsx(x,{}),children:[e.jsx(R,{children:e.jsx(I,{path:"/:memoId",element:e.jsx(M,{rootDb:g,isLoading:b,memoDetailData:m})})}),i==="search"?e.jsx(P,{state:a,gubun:"tw"}):"",r===null?e.jsx(x,{}):i==="search"&&a!==null&&a?.s!==""&&e.jsx(n.Suspense,{fallback:e.jsx(x,{}),children:e.jsx(B,{index:"1",uid:r?.uid,state:a})})]})})}export{H as default};
