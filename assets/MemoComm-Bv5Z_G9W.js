const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MemoSheet-ibcQcUgz.js","assets/index-CQnB8GtB.js","assets/index-Bd-B-uK1.css","assets/TwToast-BpWBlSt5.js","assets/ComponentCard-LYxILnlC.js","assets/fireMemoDetail-CuFyPY8I.js","assets/HomeChartSemiDonut-CIo2lDv7.js","assets/Favorite-BlbAtDZh.js","assets/HtmlCode-B9L69RFU.js","assets/copy-pWrPx43K.js","assets/TwRadio-DTyDPhgs.js","assets/TwBadge-XR3ekmd-.js","assets/HtmlCode-D8sWMyGZ.js","assets/HtmlCode-B8o9Ra4O.css","assets/toPropertyKey-DCwh5dYN.js","assets/SinyImageList-C6I8USHv.js","assets/ImageListItem-DZy9Ze_L.js","assets/CodeText-BqiZxxgc.js","assets/CodeText-f22R9RB0.css","assets/MemoDetailGrid-D4LDDWWx.js","assets/IpInfo-C8YBJLag.js","assets/angle-right-k-isAzT9.js","assets/MemoDetail-UhCuASow.css","assets/MemoSheetGrid-B3DLHVD5.js","assets/MemoDetailEdit-C9Va6LES.js","assets/useMemoMutation-C7o0kjoF.js","assets/Delete-BU18w58u.js","assets/Divider-B_N8bA8P.js","assets/TwCheckbox-Dqk2hjfK.js","assets/TwTextArea-D6hjZs-T.js","assets/SinySelect-D5Xro6C4.js","assets/Grid-B1tEz3O7.js","assets/index-sByD-zyC.js","assets/TextField-DCfKYA7S.js","assets/InputAdornment-B2z06l40.js","assets/Popper-LR8O8gAZ.js","assets/Button-jLC_EJaS.js","assets/Chip-B5th_3yR.js","assets/MemoDetailEdit-Cmdt2tIm.css","assets/TwMemoDetailUtil-Dv4W0vdu.js","assets/HomeChartVisitors-DCK9QaPI.js","assets/MemoBookMark-GcNQVTq-.js","assets/folder-rXWinBUg.js"])))=>i.map(i=>d[i]);
import{e4 as Oe,e5 as zn,e6 as Mr,e7 as Tr,e8 as Dr,e9 as Lr,ea as $r,eb as zr,ec as On,ed as Or,ee as Ir,ef as In,eg as Ke,eh as An,r as c,ei as Ar,ej as _n,ek as ln,el as _r,cd as fe,z as Bt,i as Bn,em as Hn,G,bm as Br,A as Ht,D as Wt,E as Hr,j as a,bw as Wr,q as _e,bi as Wn,en as Fr,h as Ee,y as L,ch as Pr,bp as Fn,bq as Pn,k as F,aK as Ue,O as Vr,eo as Xr,ck as Ft,bf as Z,J as cn,a2 as ke,o as Pt,n as Vn,f as vt,ep as Dt,m as Lt,p as Yr,bS as qr,c5 as dn,c6 as un,cb as Kr,ca as Ur,c7 as Gr,R as Qr,c as Ne,_ as Re,eq as Jr,K as Zr,er as eo,bW as to,es as no}from"./index-CQnB8GtB.js";import{f as ro,s as oo,g as so,a as ao,b as io}from"./fireMemoDetail-CuFyPY8I.js";import{H as lo,a as co,b as uo}from"./HomeChartSemiDonut-CIo2lDv7.js";import{F as fo}from"./Favorite-BlbAtDZh.js";import{a as ho,C as go}from"./ComponentCard-LYxILnlC.js";import{h as mo,H as po}from"./HtmlCode-B9L69RFU.js";import{S as vo}from"./SinyImageList-C6I8USHv.js";import{c as xo}from"./CodeText-BqiZxxgc.js";/* empty css                   */import{T as bo,M as yo}from"./MemoDetailGrid-D4LDDWWx.js";import{I as wo}from"./IpInfo-C8YBJLag.js";import{S as Xn,a as Co,b as jo}from"./angle-right-k-isAzT9.js";function Yn(e,t){let n;const r=()=>{const{currentTime:o}=t,i=(o===null?0:o.value)/100;n!==i&&e(i),n=i};return Oe.update(r,!0),()=>zn(r)}const dt=new WeakMap;let je;function So(e,t){if(t){const{inlineSize:n,blockSize:r}=t[0];return{width:n,height:r}}else return e instanceof SVGElement&&"getBBox"in e?e.getBBox():{width:e.offsetWidth,height:e.offsetHeight}}function ko({target:e,contentRect:t,borderBoxSize:n}){var r;(r=dt.get(e))===null||r===void 0||r.forEach(o=>{o({target:e,contentSize:t,get size(){return So(e,n)}})})}function No(e){e.forEach(ko)}function Eo(){typeof ResizeObserver>"u"||(je=new ResizeObserver(No))}function Ro(e,t){je||Eo();const n=Mr(e);return n.forEach(r=>{let o=dt.get(r);o||(o=new Set,dt.set(r,o)),o.add(t),je?.observe(r)}),()=>{n.forEach(r=>{const o=dt.get(r);o?.delete(t),o?.size||je?.unobserve(r)})}}const ut=new Set;let Ge;function Mo(){Ge=()=>{const e={width:window.innerWidth,height:window.innerHeight},t={target:window,size:e,contentSize:e};ut.forEach(n=>n(t))},window.addEventListener("resize",Ge)}function To(e){return ut.add(e),Ge||Mo(),()=>{ut.delete(e),!ut.size&&Ge&&(Ge=void 0)}}function Do(e,t){return typeof e=="function"?To(e):Ro(e,t)}const Lo=50,fn=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),$o=()=>({time:0,x:fn(),y:fn()}),zo={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function hn(e,t,n,r){const o=n[t],{length:s,position:i}=zo[t],l=o.current,u=n.time;o.current=e[`scroll${i}`],o.scrollLength=e[`scroll${s}`]-e[`client${s}`],o.offset.length=0,o.offset[0]=0,o.offset[1]=o.scrollLength,o.progress=Tr(0,o.scrollLength,o.current);const d=r-u;o.velocity=d>Lo?0:Dr(o.current-l,d)}function Oo(e,t,n){hn(e,"x",t,n),hn(e,"y",t,n),t.time=n}function Io(e,t){const n={x:0,y:0};let r=e;for(;r&&r!==t;)if(r instanceof HTMLElement)n.x+=r.offsetLeft,n.y+=r.offsetTop,r=r.offsetParent;else if(r.tagName==="svg"){const o=r.getBoundingClientRect();r=r.parentElement;const s=r.getBoundingClientRect();n.x+=o.left-s.left,n.y+=o.top-s.top}else if(r instanceof SVGGraphicsElement){const{x:o,y:s}=r.getBBox();n.x+=o,n.y+=s;let i=null,l=r.parentNode;for(;!i;)l.tagName==="svg"&&(i=l),l=r.parentNode;r=i}else break;return n}const $t={start:0,center:.5,end:1};function gn(e,t,n=0){let r=0;if(e in $t&&(e=$t[e]),typeof e=="string"){const o=parseFloat(e);e.endsWith("px")?r=o:e.endsWith("%")?e=o/100:e.endsWith("vw")?r=o/100*document.documentElement.clientWidth:e.endsWith("vh")?r=o/100*document.documentElement.clientHeight:e=o}return typeof e=="number"&&(r=t*e),n+r}const Ao=[0,0];function _o(e,t,n,r){let o=Array.isArray(e)?e:Ao,s=0,i=0;return typeof e=="number"?o=[e,e]:typeof e=="string"&&(e=e.trim(),e.includes(" ")?o=e.split(" "):o=[e,$t[e]?e:"0"]),s=gn(o[0],n,r),i=gn(o[1],t),s-i}const Bo={All:[[0,0],[1,1]]},Ho={x:0,y:0};function Wo(e){return"getBBox"in e&&e.tagName!=="svg"?e.getBBox():{width:e.clientWidth,height:e.clientHeight}}function Fo(e,t,n){const{offset:r=Bo.All}=n,{target:o=e,axis:s="y"}=n,i=s==="y"?"height":"width",l=o!==e?Io(o,e):Ho,u=o===e?{width:e.scrollWidth,height:e.scrollHeight}:Wo(o),d={width:e.clientWidth,height:e.clientHeight};t[s].offset.length=0;let f=!t[s].interpolate;const h=r.length;for(let p=0;p<h;p++){const g=_o(r[p],d[i],u[i],l[s]);!f&&g!==t[s].interpolatorOffsets[p]&&(f=!0),t[s].offset[p]=g}f&&(t[s].interpolate=Lr(t[s].offset,$r(r),{clamp:!1}),t[s].interpolatorOffsets=[...t[s].offset]),t[s].progress=zr(0,1,t[s].interpolate(t[s].current))}function Po(e,t=e,n){if(n.x.targetOffset=0,n.y.targetOffset=0,t!==e){let r=t;for(;r&&r!==e;)n.x.targetOffset+=r.offsetLeft,n.y.targetOffset+=r.offsetTop,r=r.offsetParent}n.x.targetLength=t===e?t.scrollWidth:t.clientWidth,n.y.targetLength=t===e?t.scrollHeight:t.clientHeight,n.x.containerLength=e.clientWidth,n.y.containerLength=e.clientHeight}function Vo(e,t,n,r={}){return{measure:()=>Po(e,r.target,n),update:o=>{Oo(e,n,o),(r.offset||r.target)&&Fo(e,n,r)},notify:()=>t(n)}}const qe=new WeakMap,mn=new WeakMap,kt=new WeakMap,pn=e=>e===document.documentElement?window:e;function Vt(e,{container:t=document.documentElement,...n}={}){let r=kt.get(t);r||(r=new Set,kt.set(t,r));const o=$o(),s=Vo(t,e,o,n);if(r.add(s),!qe.has(t)){const l=()=>{for(const p of r)p.measure()},u=()=>{for(const p of r)p.update(On.timestamp)},d=()=>{for(const p of r)p.notify()},f=()=>{Oe.read(l,!1,!0),Oe.read(u,!1,!0),Oe.update(d,!1,!0)};qe.set(t,f);const h=pn(t);window.addEventListener("resize",f,{passive:!0}),t!==document.documentElement&&mn.set(t,Do(t,f)),h.addEventListener("scroll",f,{passive:!0})}const i=qe.get(t);return Oe.read(i,!1,!0),()=>{var l;zn(i);const u=kt.get(t);if(!u||(u.delete(s),u.size))return;const d=qe.get(t);qe.delete(t),d&&(pn(t).removeEventListener("scroll",d),(l=mn.get(t))===null||l===void 0||l(),window.removeEventListener("resize",d))}}function Xo({source:e,container:t,axis:n="y"}){e&&(t=e);const r={value:0},o=Vt(s=>{r.value=s[n].progress*100},{container:t,axis:n});return{currentTime:r,cancel:o}}const Nt=new Map;function qn({source:e,container:t=document.documentElement,axis:n="y"}={}){e&&(t=e),Nt.has(t)||Nt.set(t,{});const r=Nt.get(t);return r[n]||(r[n]=Ir()?new ScrollTimeline({source:t,axis:n}):Xo({source:t,axis:n})),r[n]}function Yo(e){return e.length===2}function Kn(e){return e&&(e.target||e.offset)}function qo(e,t){return Yo(e)||Kn(t)?Vt(n=>{e(n[t.axis].progress,n)},t):Yn(e,qn(t))}function Ko(e,t){if(e.flatten(),Kn(t))return e.pause(),Vt(n=>{e.time=e.duration*n[t.axis].progress},t);{const n=qn(t);return e.attachTimeline?e.attachTimeline(n,r=>(r.pause(),Yn(o=>{r.time=r.duration*o},n))):Or}}function Uo(e,{axis:t="y",...n}={}){const r={axis:t,...n};return typeof e=="function"?qo(e,r):Ko(e,r)}function vn(e,t){Ar(!!(!t||t.current))}const Go=()=>({scrollX:Ke(0),scrollY:Ke(0),scrollXProgress:Ke(0),scrollYProgress:Ke(0)});function Qo({container:e,target:t,layoutEffect:n=!0,...r}={}){const o=In(Go);return(n?An:c.useEffect)(()=>(vn("target",t),vn("container",e),Uo((i,{x:l,y:u})=>{o.scrollX.set(l.current),o.scrollXProgress.set(l.progress),o.scrollY.set(u.current),o.scrollYProgress.set(u.progress)},{...r,container:e?.current||void 0,target:t?.current||void 0})),[e,t,JSON.stringify(r.offset)]),o}function Jo(e){const t=In(()=>Ke(e)),{isStatic:n}=c.useContext(_n);if(n){const[,r]=c.useState(e);c.useEffect(()=>t.on("change",r),[])}return t}function xn(e){return typeof e=="number"?e:parseFloat(e)}function Zo(e,t={}){const{isStatic:n}=c.useContext(_n),r=c.useRef(null),o=Jo(ln(e)?xn(e.get()):e),s=c.useRef(o.get()),i=c.useRef(()=>{}),l=()=>{const d=r.current;d&&d.time===0&&d.sample(On.delta),u(),r.current=_r({keyframes:[o.get(),s.current],velocity:o.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...t,onUpdate:i.current})},u=()=>{r.current&&r.current.stop()};return c.useInsertionEffect(()=>o.attach((d,f)=>n?f(d):(s.current=d,i.current=f,Oe.update(l),o.get()),u),[JSON.stringify(t)]),An(()=>{if(ln(e))return e.on("change",d=>o.set(xn(d)))},[o]),o}const es=async(e,t)=>{const n=[];let r=t;if(!e||!r)return n;for(;r&&r!=="root";){const o=await fe(`memo_tree/${e}/${r}`);if(!o)break;n.unshift({id:r,...o}),r=o.parent}return n};function ts(e,t,n,r){const o=Bt(),{data:s,isLoading:i}=Bn({queryKey:["memoDetail",e,t?.uid,n],queryFn:async()=>{if(!n||!t||n==="insert")return{};if(e==="memo"||e==="home"){const d=await ro(e,t.uid,n);if(d&&e==="memo"){d.path=await es(t?.uid,n);const f=await fe(`memo_tree/${t.uid}/${n}/bm`);d.bookmark=f==="Y"?"Y":"N"}return d||{}}else if(e==="sheet")return{title:await fe(`memo_sheet/${t.uid}/${n}/title`)}},enabled:!!t&&!!n,staleTime:1e3*60*5}),{mutate:l}=Hn({mutationFn:async d=>{const f=e==="memo"?`memo_tree/${t.uid}/${n}/bm`:`home_txt/${n}/bookmark`;await G(f,d)},onMutate:async d=>{await o.cancelQueries({queryKey:["memoDetail",e,t?.uid,n]});const f=o.getQueryData(["memoDetail",e,t?.uid,n]);return o.setQueryData(["memoDetail",e,t?.uid,n],h=>({...h,bookmark:d})),{previousMemoDetail:f}},onError:(d,f,h)=>{o.setQueryData(["memoDetail",e,t?.uid,n],h.previousMemoDetail)},onSettled:()=>{o.invalidateQueries({queryKey:["memoDetail",e,t?.uid,n],refetchType:"all"}),o.invalidateQueries({queryKey:["twTreeData",e],refetchType:"all"}),o.invalidateQueries({queryKey:["bookmarks",t?.uid],refetchType:"all"}),r(!0)}});return{memoDetailData:s,isLoading:i,onBookmark:()=>{if(!s)return;const d=s.bookmark==="Y"?"N":"Y";l(d)}}}async function ns(e,t,n=""){if(t==null||t==="")return"";if(e==="home"){const d=await fe("home/tree");if(d!=null)try{return JSON.parse(d)}catch(f){console.error("Error parsing JSON data:",f)}}const r=e==="home"?"home_txt":n===""?`${e}_tree/${t}`:`${e}_txt/${t}`,o=Br(Ht(Wt,r)),s=await Hr(o);if(!s.exists()||!s.exists())return null;const i=s.val(),l=[{text:"1.React",id:"react",key:"react",parent:"root"},{text:"2.CSS",id:"css",key:"css",parent:"root"},{text:"3.Android",id:"android",key:"android",parent:"root"},{text:"4.Java",id:"java",key:"java",parent:"root"},{text:"5.이미지",id:"image",key:"image",parent:"root"},{text:"6.Etc",id:"etc",key:"etc",parent:"root"}],u=[];e==="home"&&u.push(...l);for(const d in i){const f=i[d];f.id=d;const h={id:d,key:d,text:f.title,parent:e==="home"?f.gbn:f.parent};e==="memo"?(h.icon=f.bm==="Y"?a.jsx(fo,{className:"text-red-500"}):f.icon==="Y"?a.jsx(Wr,{}):null,h.droppable=!0):h.droppable=!1,!((n===""||n===void 0||n===null)&&(h.parent===void 0||h.parent===null||h.parent===""))&&(e==="home"||n===""||n===void 0||n===null?u.push(h):(f.id=d,(f.memo+"").toLowerCase().indexOf(n.toLowerCase())>-1&&(h.parent="root",h.droppable=!1,u.push(h))))}return u.sort((d,f)=>d.title>f.title?1:-1),e==="home"&&G("home/tree",JSON.stringify(u)),u}const rs=({rootDb:e})=>{const{user:t}=_e(),[n,r]=Wn(Fr(e)),{t:o}=Ee(),[s,i]=c.useState({labels:[],series:[]}),l=["#6366f1","#3b82f6","#22c55e","#ef4444","#f97316","#eab308","#8b5cf6","#d946ef","#14b8a6","#a855f7"],u=async()=>{const h=await ns(e==="sheet"?"memo":e,t?.uid);d(h)};c.useEffect(()=>{n&&n.labels&&n.labels.length>0?i(n):u()},[e,t,n,r]);const d=h=>{if(h&&h.length>0){const p=h.filter(v=>v.parent==="root").sort((v,w)=>v.text.localeCompare(w.text)),g=(v,w)=>{const k=w.filter(E=>E.parent===v);let M=k.length;for(const E of k)M+=g(E.id,w);return M},b=p.map(v=>v.text),m=p.map(v=>g(v.id,h)),x={labels:b,series:m};i(x),r(x)}},f=()=>{u()};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:`HomeChartForm ${L.between} bg-[#f1f1f1] dark:bg-[#181818] p-2`,children:[a.jsx("div",{className:"px-6 py-5",children:a.jsx(ho,{title:o("count_stats")})}),a.jsx("button",{onClick:f,className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors mr-2","aria-label":o("reload_chart"),children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-600 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h5M20 20v-5h-5M4 4l1.5 1.5A9 9 0 0121.5 12M20 20l-1.5-1.5A9 9 0 012.5 12"})})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 w-full gap-2 justify-center",children:[a.jsx(lo,{series:s.series,labels:s.labels,colors:l}),a.jsx(Pr,{series:[{name:o("count"),data:s.series}],labels:s.labels,colors:l}),a.jsx(co,{series:[{name:o("count"),data:s.series}],labels:s.labels,colors:l}),a.jsx(uo,{series:s.series,labels:s.labels,colors:l})]})]})},os=async(e,t)=>(await fe(e)===void 0||G(e,null),G(t,null),"OK"),Ci=async({rootDb:e,uid:t,newData:n=!1,key:r,values:o})=>{const s=e==="memo"?`${e}_txt/${t}/`:`${e}_txt/`,i=e==="memo"?`${e}_tree/${t}/`:`${e}/`;let l=r;n&&(l=Fn(Pn(Ht(Wt),i)).key),console.log("setFireDetailData.values=",o);const u=s+l;return G(u+"/title",o.edTitle),o.htmlCheck==="N"||o.htmlCheck==="sheet"?G(u+"/memo",o.memoTxt):G(u+"/memo",o.content),G(u+"/date",o.edDate),G(u+"/gbn",o.edGbn),G(u+"/html",o.htmlCheck),n&&e!=="home"&&(G(`${i}/${l}/key`,l),G(`${i}/${l}/parent`,r)),e!=="home"&&(G(`${i}${l}/title`,o.edTitle),G(`${i}${l}/icon`,o.iconCheck)),l},ji=async(e,t,n,r)=>{if(r!==void 0)for(let o=0;o<r.length;o++){const s=r[o];s.del==="Y"&&(G(`${e}/${n}/image/${s.key}`,null),oo(t,n,s))}},Si=async(e,t,n,r)=>{for(let o=0;o<r.length;o++){const s=r[o].object,l={ext:so(s.name),name:s.name,use:"Y",sever:""},u=Fn(Pn(Ht(Wt),e+"/image")).key,d=await ao(t,n,u,s);l.sever=io(d.metadata.name);const f=`${e}${n}/image/${l.sever}`;G(f,l)}};function ss(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.useMemo(()=>r=>{t.forEach(o=>o(r))},t)}const xt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Be(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Xt(e){return"nodeType"in e}function ee(e){var t,n;return e?Be(e)?e:Xt(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Yt(e){const{Document:t}=ee(e);return e instanceof t}function nt(e){return Be(e)?!1:e instanceof ee(e).HTMLElement}function Un(e){return e instanceof ee(e).SVGElement}function He(e){return e?Be(e)?e.document:Xt(e)?Yt(e)?e:nt(e)||Un(e)?e.ownerDocument:document:document:document}const he=xt?c.useLayoutEffect:c.useEffect;function qt(e){const t=c.useRef(e);return he(()=>{t.current=e}),c.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}function as(){const e=c.useRef(null),t=c.useCallback((r,o)=>{e.current=setInterval(r,o)},[]),n=c.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function et(e,t){t===void 0&&(t=[e]);const n=c.useRef(e);return he(()=>{n.current!==e&&(n.current=e)},t),n}function rt(e,t){const n=c.useRef();return c.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function ht(e){const t=qt(e),n=c.useRef(null),r=c.useCallback(o=>{o!==n.current&&t?.(o,n.current),n.current=o},[]);return[n,r]}function zt(e){const t=c.useRef();return c.useEffect(()=>{t.current=e},[e]),t.current}let Et={};function ot(e,t){return c.useMemo(()=>{if(t)return t;const n=Et[e]==null?0:Et[e]+1;return Et[e]=n,e+"-"+n},[e,t])}function Gn(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((s,i)=>{const l=Object.entries(i);for(const[u,d]of l){const f=s[u];f!=null&&(s[u]=f+e*d)}return s},{...t})}}const Ie=Gn(1),gt=Gn(-1);function is(e){return"clientX"in e&&"clientY"in e}function Kt(e){if(!e)return!1;const{KeyboardEvent:t}=ee(e.target);return t&&e instanceof t}function ls(e){if(!e)return!1;const{TouchEvent:t}=ee(e.target);return t&&e instanceof t}function Ot(e){if(ls(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return is(e)?{x:e.clientX,y:e.clientY}:null}const Ae=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Ae.Translate.toString(e),Ae.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),bn="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function cs(e){return e.matches(bn)?e:e.querySelector(bn)}const ds={display:"none"};function us(e){let{id:t,value:n}=e;return F.createElement("div",{id:t,style:ds},n)}function fs(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return F.createElement("div",{id:t,style:o,role:"status","aria-live":r,"aria-atomic":!0},n)}function hs(){const[e,t]=c.useState("");return{announce:c.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const Qn=c.createContext(null);function gs(e){const t=c.useContext(Qn);c.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function ms(){const[e]=c.useState(()=>new Set),t=c.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[c.useCallback(r=>{let{type:o,event:s}=r;e.forEach(i=>{var l;return(l=i[o])==null?void 0:l.call(i,s)})},[e]),t]}const ps={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},vs={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function xs(e){let{announcements:t=vs,container:n,hiddenTextDescribedById:r,screenReaderInstructions:o=ps}=e;const{announce:s,announcement:i}=hs(),l=ot("DndLiveRegion"),[u,d]=c.useState(!1);if(c.useEffect(()=>{d(!0)},[]),gs(c.useMemo(()=>({onDragStart(h){let{active:p}=h;s(t.onDragStart({active:p}))},onDragMove(h){let{active:p,over:g}=h;t.onDragMove&&s(t.onDragMove({active:p,over:g}))},onDragOver(h){let{active:p,over:g}=h;s(t.onDragOver({active:p,over:g}))},onDragEnd(h){let{active:p,over:g}=h;s(t.onDragEnd({active:p,over:g}))},onDragCancel(h){let{active:p,over:g}=h;s(t.onDragCancel({active:p,over:g}))}}),[s,t])),!u)return null;const f=F.createElement(F.Fragment,null,F.createElement(us,{id:r,value:o.draggable}),F.createElement(fs,{id:l,announcement:i}));return n?Ue.createPortal(f,n):f}var X;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(X||(X={}));function mt(){}function bs(e,t){return c.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function ys(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const ie=Object.freeze({x:0,y:0});function ws(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Cs(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function js(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Ss(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function yn(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const ks=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=yn(t,t.left,t.top),s=[];for(const i of r){const{id:l}=i,u=n.get(l);if(u){const d=ws(yn(u),o);s.push({id:l,data:{droppableContainer:i,value:d}})}}return s.sort(Cs)};function Ns(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),i=o-r,l=s-n;if(r<o&&n<s){const u=t.width*t.height,d=e.width*e.height,f=i*l,h=f/(u+d-f);return Number(h.toFixed(4))}return 0}const Es=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=[];for(const s of r){const{id:i}=s,l=n.get(i);if(l){const u=Ns(l,t);u>0&&o.push({id:i,data:{droppableContainer:s,value:u}})}}return o.sort(js)};function Rs(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Jn(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ie}function Ms(e){return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return o.reduce((i,l)=>({...i,top:i.top+e*l.y,bottom:i.bottom+e*l.y,left:i.left+e*l.x,right:i.right+e*l.x}),{...n})}}const Ts=Ms(1);function Ds(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Ls(e,t,n){const r=Ds(t);if(!r)return e;const{scaleX:o,scaleY:s,x:i,y:l}=r,u=e.left-i-(1-o)*parseFloat(n),d=e.top-l-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),f=o?e.width/o:e.width,h=s?e.height/s:e.height;return{width:f,height:h,top:d,right:u+f,bottom:d+h,left:u}}const $s={ignoreTransform:!1};function We(e,t){t===void 0&&(t=$s);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:f}=ee(e).getComputedStyle(e);d&&(n=Ls(n,d,f))}const{top:r,left:o,width:s,height:i,bottom:l,right:u}=n;return{top:r,left:o,width:s,height:i,bottom:l,right:u}}function wn(e){return We(e,{ignoreTransform:!0})}function zs(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Os(e,t){return t===void 0&&(t=ee(e).getComputedStyle(e)),t.position==="fixed"}function Is(e,t){t===void 0&&(t=ee(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const s=t[o];return typeof s=="string"?n.test(s):!1})}function Ut(e,t){const n=[];function r(o){if(t!=null&&n.length>=t||!o)return n;if(Yt(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!nt(o)||Un(o)||n.includes(o))return n;const s=ee(e).getComputedStyle(o);return o!==e&&Is(o,s)&&n.push(o),Os(o,s)?n:r(o.parentNode)}return e?r(e):n}function Zn(e){const[t]=Ut(e,1);return t??null}function Rt(e){return!xt||!e?null:Be(e)?e:Xt(e)?Yt(e)||e===He(e).scrollingElement?window:nt(e)?e:null:null}function er(e){return Be(e)?e.scrollX:e.scrollLeft}function tr(e){return Be(e)?e.scrollY:e.scrollTop}function It(e){return{x:er(e),y:tr(e)}}var q;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(q||(q={}));function nr(e){return!xt||!e?!1:e===document.scrollingElement}function rr(e){const t={x:0,y:0},n=nr(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},o=e.scrollTop<=t.y,s=e.scrollLeft<=t.x,i=e.scrollTop>=r.y,l=e.scrollLeft>=r.x;return{isTop:o,isLeft:s,isBottom:i,isRight:l,maxScroll:r,minScroll:t}}const As={x:.2,y:.2};function _s(e,t,n,r,o){let{top:s,left:i,right:l,bottom:u}=n;r===void 0&&(r=10),o===void 0&&(o=As);const{isTop:d,isBottom:f,isLeft:h,isRight:p}=rr(e),g={x:0,y:0},b={x:0,y:0},m={height:t.height*o.y,width:t.width*o.x};return!d&&s<=t.top+m.height?(g.y=q.Backward,b.y=r*Math.abs((t.top+m.height-s)/m.height)):!f&&u>=t.bottom-m.height&&(g.y=q.Forward,b.y=r*Math.abs((t.bottom-m.height-u)/m.height)),!p&&l>=t.right-m.width?(g.x=q.Forward,b.x=r*Math.abs((t.right-m.width-l)/m.width)):!h&&i<=t.left+m.width&&(g.x=q.Backward,b.x=r*Math.abs((t.left+m.width-i)/m.width)),{direction:g,speed:b}}function Bs(e){if(e===document.scrollingElement){const{innerWidth:s,innerHeight:i}=window;return{top:0,left:0,right:s,bottom:i,width:s,height:i}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function or(e){return e.reduce((t,n)=>Ie(t,It(n)),ie)}function Hs(e){return e.reduce((t,n)=>t+er(n),0)}function Ws(e){return e.reduce((t,n)=>t+tr(n),0)}function Fs(e,t){if(t===void 0&&(t=We),!e)return;const{top:n,left:r,bottom:o,right:s}=t(e);Zn(e)&&(o<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Ps=[["x",["left","right"],Hs],["y",["top","bottom"],Ws]];class Gt{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Ut(n),o=or(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[s,i,l]of Ps)for(const u of i)Object.defineProperty(this,u,{get:()=>{const d=l(r),f=o[s]-d;return this.rect[u]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Qe{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var o;(o=this.target)==null||o.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Vs(e){const{EventTarget:t}=ee(e);return e instanceof t?e:He(e)}function Mt(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var ae;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(ae||(ae={}));function Cn(e){e.preventDefault()}function Xs(e){e.stopPropagation()}var A;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(A||(A={}));const sr={start:[A.Space,A.Enter],cancel:[A.Esc],end:[A.Space,A.Enter,A.Tab]},Ys=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case A.Right:return{...n,x:n.x+25};case A.Left:return{...n,x:n.x-25};case A.Down:return{...n,y:n.y+25};case A.Up:return{...n,y:n.y-25}}};class ar{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Qe(He(n)),this.windowListeners=new Qe(ee(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ae.Resize,this.handleCancel),this.windowListeners.add(ae.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ae.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&Fs(r),n(ie)}handleKeyDown(t){if(Kt(t)){const{active:n,context:r,options:o}=this.props,{keyboardCodes:s=sr,coordinateGetter:i=Ys,scrollBehavior:l="smooth"}=o,{code:u}=t;if(s.end.includes(u)){this.handleEnd(t);return}if(s.cancel.includes(u)){this.handleCancel(t);return}const{collisionRect:d}=r.current,f=d?{x:d.left,y:d.top}:ie;this.referenceCoordinates||(this.referenceCoordinates=f);const h=i(t,{active:n,context:r.current,currentCoordinates:f});if(h){const p=gt(h,f),g={x:0,y:0},{scrollableAncestors:b}=r.current;for(const m of b){const x=t.code,{isTop:v,isRight:w,isLeft:k,isBottom:M,maxScroll:E,minScroll:N}=rr(m),T=Bs(m),S={x:Math.min(x===A.Right?T.right-T.width/2:T.right,Math.max(x===A.Right?T.left:T.left+T.width/2,h.x)),y:Math.min(x===A.Down?T.bottom-T.height/2:T.bottom,Math.max(x===A.Down?T.top:T.top+T.height/2,h.y))},I=x===A.Right&&!w||x===A.Left&&!k,R=x===A.Down&&!M||x===A.Up&&!v;if(I&&S.x!==h.x){const z=m.scrollLeft+p.x,Y=x===A.Right&&z<=E.x||x===A.Left&&z>=N.x;if(Y&&!p.y){m.scrollTo({left:z,behavior:l});return}Y?g.x=m.scrollLeft-z:g.x=x===A.Right?m.scrollLeft-E.x:m.scrollLeft-N.x,g.x&&m.scrollBy({left:-g.x,behavior:l});break}else if(R&&S.y!==h.y){const z=m.scrollTop+p.y,Y=x===A.Down&&z<=E.y||x===A.Up&&z>=N.y;if(Y&&!p.x){m.scrollTo({top:z,behavior:l});return}Y?g.y=m.scrollTop-z:g.y=x===A.Down?m.scrollTop-E.y:m.scrollTop-N.y,g.y&&m.scrollBy({top:-g.y,behavior:l});break}}this.handleMove(t,Ie(gt(h,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}ar.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=sr,onActivation:o}=t,{active:s}=n;const{code:i}=e.nativeEvent;if(r.start.includes(i)){const l=s.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),o?.({event:e.nativeEvent}),!0)}return!1}}];function jn(e){return!!(e&&"distance"in e)}function Sn(e){return!!(e&&"delay"in e)}class Qt{constructor(t,n,r){var o;r===void 0&&(r=Vs(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:s}=t,{target:i}=s;this.props=t,this.events=n,this.document=He(i),this.documentListeners=new Qe(this.document),this.listeners=new Qe(r),this.windowListeners=new Qe(ee(i)),this.initialCoordinates=(o=Ot(s))!=null?o:ie,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(ae.Resize,this.handleCancel),this.windowListeners.add(ae.DragStart,Cn),this.windowListeners.add(ae.VisibilityChange,this.handleCancel),this.windowListeners.add(ae.ContextMenu,Cn),this.documentListeners.add(ae.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Sn(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(jn(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:o}=this.props;o(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(ae.Click,Xs,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ae.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:o,props:s}=this,{onMove:i,options:{activationConstraint:l}}=s;if(!o)return;const u=(n=Ot(t))!=null?n:ie,d=gt(o,u);if(!r&&l){if(jn(l)){if(l.tolerance!=null&&Mt(d,l.tolerance))return this.handleCancel();if(Mt(d,l.distance))return this.handleStart()}if(Sn(l)&&Mt(d,l.tolerance))return this.handleCancel();this.handlePending(l,d);return}t.cancelable&&t.preventDefault(),i(u)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===A.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const qs={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Jt extends Qt{constructor(t){const{event:n}=t,r=He(n.target);super(t,qs,r)}}Jt.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const Ks={move:{name:"mousemove"},end:{name:"mouseup"}};var At;(function(e){e[e.RightClick=2]="RightClick"})(At||(At={}));class Us extends Qt{constructor(t){super(t,Ks,He(t.event.target))}}Us.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===At.RightClick?!1:(r?.({event:n}),!0)}}];const Tt={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Gs extends Qt{constructor(t){super(t,Tt)}static setup(){return window.addEventListener(Tt.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Tt.move.name,t)};function t(){}}}Gs.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:o}=n;return o.length>1?!1:(r?.({event:n}),!0)}}];var Je;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Je||(Je={}));var pt;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(pt||(pt={}));function Qs(e){let{acceleration:t,activator:n=Je.Pointer,canScroll:r,draggingRect:o,enabled:s,interval:i=5,order:l=pt.TreeOrder,pointerCoordinates:u,scrollableAncestors:d,scrollableAncestorRects:f,delta:h,threshold:p}=e;const g=Zs({delta:h,disabled:!s}),[b,m]=as(),x=c.useRef({x:0,y:0}),v=c.useRef({x:0,y:0}),w=c.useMemo(()=>{switch(n){case Je.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case Je.DraggableRect:return o}},[n,o,u]),k=c.useRef(null),M=c.useCallback(()=>{const N=k.current;if(!N)return;const T=x.current.x*v.current.x,S=x.current.y*v.current.y;N.scrollBy(T,S)},[]),E=c.useMemo(()=>l===pt.TreeOrder?[...d].reverse():d,[l,d]);c.useEffect(()=>{if(!s||!d.length||!w){m();return}for(const N of E){if(r?.(N)===!1)continue;const T=d.indexOf(N),S=f[T];if(!S)continue;const{direction:I,speed:R}=_s(N,S,w,t,p);for(const z of["x","y"])g[z][I[z]]||(R[z]=0,I[z]=0);if(R.x>0||R.y>0){m(),k.current=N,b(M,i),x.current=R,v.current=I;return}}x.current={x:0,y:0},v.current={x:0,y:0},m()},[t,M,r,m,s,i,JSON.stringify(w),JSON.stringify(g),b,d,E,f,JSON.stringify(p)])}const Js={x:{[q.Backward]:!1,[q.Forward]:!1},y:{[q.Backward]:!1,[q.Forward]:!1}};function Zs(e){let{delta:t,disabled:n}=e;const r=zt(t);return rt(o=>{if(n||!r||!o)return Js;const s={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[q.Backward]:o.x[q.Backward]||s.x===-1,[q.Forward]:o.x[q.Forward]||s.x===1},y:{[q.Backward]:o.y[q.Backward]||s.y===-1,[q.Forward]:o.y[q.Forward]||s.y===1}}},[n,t,r])}function ea(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return rt(o=>{var s;return t==null?null:(s=r??o)!=null?s:null},[r,t])}function ta(e,t){return c.useMemo(()=>e.reduce((n,r)=>{const{sensor:o}=r,s=o.activators.map(i=>({eventName:i.eventName,handler:t(i.handler,r)}));return[...n,...s]},[]),[e,t])}var tt;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(tt||(tt={}));var _t;(function(e){e.Optimized="optimized"})(_t||(_t={}));const kn=new Map;function na(e,t){let{dragging:n,dependencies:r,config:o}=t;const[s,i]=c.useState(null),{frequency:l,measure:u,strategy:d}=o,f=c.useRef(e),h=x(),p=et(h),g=c.useCallback(function(v){v===void 0&&(v=[]),!p.current&&i(w=>w===null?v:w.concat(v.filter(k=>!w.includes(k))))},[p]),b=c.useRef(null),m=rt(v=>{if(h&&!n)return kn;if(!v||v===kn||f.current!==e||s!=null){const w=new Map;for(let k of e){if(!k)continue;if(s&&s.length>0&&!s.includes(k.id)&&k.rect.current){w.set(k.id,k.rect.current);continue}const M=k.node.current,E=M?new Gt(u(M),M):null;k.rect.current=E,E&&w.set(k.id,E)}return w}return v},[e,s,n,h,u]);return c.useEffect(()=>{f.current=e},[e]),c.useEffect(()=>{h||g()},[n,h]),c.useEffect(()=>{s&&s.length>0&&i(null)},[JSON.stringify(s)]),c.useEffect(()=>{h||typeof l!="number"||b.current!==null||(b.current=setTimeout(()=>{g(),b.current=null},l))},[l,h,g,...r]),{droppableRects:m,measureDroppableContainers:g,measuringScheduled:s!=null};function x(){switch(d){case tt.Always:return!1;case tt.BeforeDragging:return n;default:return!n}}}function ir(e,t){return rt(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function ra(e,t){return ir(e,t)}function oa(e){let{callback:t,disabled:n}=e;const r=qt(t),o=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return c.useEffect(()=>()=>o?.disconnect(),[o]),o}function bt(e){let{callback:t,disabled:n}=e;const r=qt(t),o=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return c.useEffect(()=>()=>o?.disconnect(),[o]),o}function sa(e){return new Gt(We(e),e)}function Nn(e,t,n){t===void 0&&(t=sa);const[r,o]=c.useState(null);function s(){o(u=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=u??n)!=null?d:null}const f=t(e);return JSON.stringify(u)===JSON.stringify(f)?u:f})}const i=oa({callback(u){if(e)for(const d of u){const{type:f,target:h}=d;if(f==="childList"&&h instanceof HTMLElement&&h.contains(e)){s();break}}}}),l=bt({callback:s});return he(()=>{s(),e?(l?.observe(e),i?.observe(document.body,{childList:!0,subtree:!0})):(l?.disconnect(),i?.disconnect())},[e]),r}function aa(e){const t=ir(e);return Jn(e,t)}const En=[];function ia(e){const t=c.useRef(e),n=rt(r=>e?r&&r!==En&&e&&t.current&&e.parentNode===t.current.parentNode?r:Ut(e):En,[e]);return c.useEffect(()=>{t.current=e},[e]),n}function la(e){const[t,n]=c.useState(null),r=c.useRef(e),o=c.useCallback(s=>{const i=Rt(s.target);i&&n(l=>l?(l.set(i,It(i)),new Map(l)):null)},[]);return c.useEffect(()=>{const s=r.current;if(e!==s){i(s);const l=e.map(u=>{const d=Rt(u);return d?(d.addEventListener("scroll",o,{passive:!0}),[d,It(d)]):null}).filter(u=>u!=null);n(l.length?new Map(l):null),r.current=e}return()=>{i(e),i(s)};function i(l){l.forEach(u=>{const d=Rt(u);d?.removeEventListener("scroll",o)})}},[o,e]),c.useMemo(()=>e.length?t?Array.from(t.values()).reduce((s,i)=>Ie(s,i),ie):or(e):ie,[e,t])}function Rn(e,t){t===void 0&&(t=[]);const n=c.useRef(null);return c.useEffect(()=>{n.current=null},t),c.useEffect(()=>{const r=e!==ie;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?gt(e,n.current):ie}function ca(e){c.useEffect(()=>{if(!xt)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n?.()}},e.map(t=>{let{sensor:n}=t;return n}))}function da(e,t){return c.useMemo(()=>e.reduce((n,r)=>{let{eventName:o,handler:s}=r;return n[o]=i=>{s(i,t)},n},{}),[e,t])}function lr(e){return c.useMemo(()=>e?zs(e):null,[e])}const Mn=[];function ua(e,t){t===void 0&&(t=We);const[n]=e,r=lr(n?ee(n):null),[o,s]=c.useState(Mn);function i(){s(()=>e.length?e.map(u=>nr(u)?r:new Gt(t(u),u)):Mn)}const l=bt({callback:i});return he(()=>{l?.disconnect(),i(),e.forEach(u=>l?.observe(u))},[e]),o}function fa(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return nt(t)?t:e}function ha(e){let{measure:t}=e;const[n,r]=c.useState(null),o=c.useCallback(d=>{for(const{target:f}of d)if(nt(f)){r(h=>{const p=t(f);return h?{...h,width:p.width,height:p.height}:p});break}},[t]),s=bt({callback:o}),i=c.useCallback(d=>{const f=fa(d);s?.disconnect(),f&&s?.observe(f),r(f?t(f):null)},[t,s]),[l,u]=ht(i);return c.useMemo(()=>({nodeRef:l,rect:n,setRef:u}),[n,l,u])}const ga=[{sensor:Jt,options:{}},{sensor:ar,options:{}}],ma={current:{}},ft={draggable:{measure:wn},droppable:{measure:wn,strategy:tt.WhileDragging,frequency:_t.Optimized},dragOverlay:{measure:We}};class Ze extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const pa={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ze,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:mt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:ft,measureDroppableContainers:mt,windowRect:null,measuringScheduled:!1},va={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:mt,draggableNodes:new Map,over:null,measureDroppableContainers:mt},yt=c.createContext(va),cr=c.createContext(pa);function xa(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ze}}}function ba(e,t){switch(t.type){case X.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case X.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case X.DragEnd:case X.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case X.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new Ze(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case X.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const i=new Ze(e.droppable.containers);return i.set(n,{...s,disabled:o}),{...e,droppable:{...e.droppable,containers:i}}}case X.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const s=new Ze(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function ya(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:o}=c.useContext(yt),s=zt(r),i=zt(n?.id);return c.useEffect(()=>{if(!t&&!r&&s&&i!=null){if(!Kt(s)||document.activeElement===s.target)return;const l=o.get(i);if(!l)return;const{activatorNode:u,node:d}=l;if(!u.current&&!d.current)return;requestAnimationFrame(()=>{for(const f of[u.current,d.current]){if(!f)continue;const h=cs(f);if(h){h.focus();break}}})}},[r,t,o,i,s]),null}function wa(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((o,s)=>s({transform:o,...r}),n):n}function Ca(e){return c.useMemo(()=>({draggable:{...ft.draggable,...e?.draggable},droppable:{...ft.droppable,...e?.droppable},dragOverlay:{...ft.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function ja(e){let{activeNode:t,measure:n,initialRect:r,config:o=!0}=e;const s=c.useRef(!1),{x:i,y:l}=typeof o=="boolean"?{x:o,y:o}:o;he(()=>{if(!i&&!l||!t){s.current=!1;return}if(s.current||!r)return;const d=t?.node.current;if(!d||d.isConnected===!1)return;const f=n(d),h=Jn(f,r);if(i||(h.x=0),l||(h.y=0),s.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const p=Zn(d);p&&p.scrollBy({top:h.y,left:h.x})}},[t,i,l,r,n])}const dr=c.createContext({...ie,scaleX:1,scaleY:1});var Se;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Se||(Se={}));const Sa=c.memo(function(t){var n,r,o,s;let{id:i,accessibility:l,autoScroll:u=!0,children:d,sensors:f=ga,collisionDetection:h=Es,measuring:p,modifiers:g,...b}=t;const m=c.useReducer(ba,void 0,xa),[x,v]=m,[w,k]=ms(),[M,E]=c.useState(Se.Uninitialized),N=M===Se.Initialized,{draggable:{active:T,nodes:S,translate:I},droppable:{containers:R}}=x,z=T!=null?S.get(T):null,Y=c.useRef({initial:null,translated:null}),P=c.useMemo(()=>{var Q;return T!=null?{id:T,data:(Q=z?.data)!=null?Q:ma,rect:Y}:null},[T,z]),V=c.useRef(null),[J,oe]=c.useState(null),[D,O]=c.useState(null),_=et(b,Object.values(b)),y=ot("DndDescribedBy",i),C=c.useMemo(()=>R.getEnabled(),[R]),j=Ca(p),{droppableRects:$,measureDroppableContainers:W,measuringScheduled:K}=na(C,{dragging:N,dependencies:[I.x,I.y],config:j.droppable}),H=ea(S,T),le=c.useMemo(()=>D?Ot(D):null,[D]),ve=Rr(),ge=ra(H,j.draggable.measure);ja({activeNode:T!=null?S.get(T):null,config:ve.layoutShiftCompensation,initialRect:ge,measure:j.draggable.measure});const B=Nn(H,j.draggable.measure,ge),Fe=Nn(H?H.parentElement:null),ce=c.useRef({activatorEvent:null,active:null,activeNode:H,collisionRect:null,collisions:null,droppableRects:$,draggableNodes:S,draggingNode:null,draggingNodeRect:null,droppableContainers:R,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Me=R.getNodeFor((n=ce.current.over)==null?void 0:n.id),me=ha({measure:j.dragOverlay.measure}),Te=(r=me.nodeRef.current)!=null?r:H,De=N?(o=me.rect)!=null?o:B:null,Zt=!!(me.nodeRef.current&&me.rect),en=aa(Zt?null:B),Ct=lr(Te?ee(Te):null),xe=ia(N?Me??H:null),st=ua(xe),at=wa(g,{transform:{x:I.x-en.x,y:I.y-en.y,scaleX:1,scaleY:1},activatorEvent:D,active:P,activeNodeRect:B,containerNodeRect:Fe,draggingNodeRect:De,over:ce.current.over,overlayNodeRect:me.rect,scrollableAncestors:xe,scrollableAncestorRects:st,windowRect:Ct}),tn=le?Ie(le,I):null,nn=la(xe),wr=Rn(nn),Cr=Rn(nn,[B]),Le=Ie(at,wr),$e=De?Ts(De,at):null,Pe=P&&$e?h({active:P,collisionRect:$e,droppableRects:$,droppableContainers:C,pointerCoordinates:tn}):null,rn=Ss(Pe,"id"),[be,on]=c.useState(null),jr=Zt?at:Ie(at,Cr),Sr=Rs(jr,(s=be?.rect)!=null?s:null,B),jt=c.useRef(null),sn=c.useCallback((Q,te)=>{let{sensor:ne,options:ye}=te;if(V.current==null)return;const se=S.get(V.current);if(!se)return;const re=Q.nativeEvent,de=new ne({active:V.current,activeNode:se,event:re,options:ye,context:ce,onAbort(U){if(!S.get(U))return;const{onDragAbort:ue}=_.current,pe={id:U};ue?.(pe),w({type:"onDragAbort",event:pe})},onPending(U,we,ue,pe){if(!S.get(U))return;const{onDragPending:Xe}=_.current,Ce={id:U,constraint:we,initialCoordinates:ue,offset:pe};Xe?.(Ce),w({type:"onDragPending",event:Ce})},onStart(U){const we=V.current;if(we==null)return;const ue=S.get(we);if(!ue)return;const{onDragStart:pe}=_.current,Ve={activatorEvent:re,active:{id:we,data:ue.data,rect:Y}};Ue.unstable_batchedUpdates(()=>{pe?.(Ve),E(Se.Initializing),v({type:X.DragStart,initialCoordinates:U,active:we}),w({type:"onDragStart",event:Ve}),oe(jt.current),O(re)})},onMove(U){v({type:X.DragMove,coordinates:U})},onEnd:ze(X.DragEnd),onCancel:ze(X.DragCancel)});jt.current=de;function ze(U){return async function(){const{active:ue,collisions:pe,over:Ve,scrollAdjustedTranslate:Xe}=ce.current;let Ce=null;if(ue&&Xe){const{cancelDrop:Ye}=_.current;Ce={activatorEvent:re,active:ue,collisions:pe,delta:Xe,over:Ve},U===X.DragEnd&&typeof Ye=="function"&&await Promise.resolve(Ye(Ce))&&(U=X.DragCancel)}V.current=null,Ue.unstable_batchedUpdates(()=>{v({type:U}),E(Se.Uninitialized),on(null),oe(null),O(null),jt.current=null;const Ye=U===X.DragEnd?"onDragEnd":"onDragCancel";if(Ce){const St=_.current[Ye];St?.(Ce),w({type:Ye,event:Ce})}})}}},[S]),kr=c.useCallback((Q,te)=>(ne,ye)=>{const se=ne.nativeEvent,re=S.get(ye);if(V.current!==null||!re||se.dndKit||se.defaultPrevented)return;const de={active:re};Q(ne,te.options,de)===!0&&(se.dndKit={capturedBy:te.sensor},V.current=ye,sn(ne,te))},[S,sn]),an=ta(f,kr);ca(f),he(()=>{B&&M===Se.Initializing&&E(Se.Initialized)},[B,M]),c.useEffect(()=>{const{onDragMove:Q}=_.current,{active:te,activatorEvent:ne,collisions:ye,over:se}=ce.current;if(!te||!ne)return;const re={active:te,activatorEvent:ne,collisions:ye,delta:{x:Le.x,y:Le.y},over:se};Ue.unstable_batchedUpdates(()=>{Q?.(re),w({type:"onDragMove",event:re})})},[Le.x,Le.y]),c.useEffect(()=>{const{active:Q,activatorEvent:te,collisions:ne,droppableContainers:ye,scrollAdjustedTranslate:se}=ce.current;if(!Q||V.current==null||!te||!se)return;const{onDragOver:re}=_.current,de=ye.get(rn),ze=de&&de.rect.current?{id:de.id,rect:de.rect.current,data:de.data,disabled:de.disabled}:null,U={active:Q,activatorEvent:te,collisions:ne,delta:{x:se.x,y:se.y},over:ze};Ue.unstable_batchedUpdates(()=>{on(ze),re?.(U),w({type:"onDragOver",event:U})})},[rn]),he(()=>{ce.current={activatorEvent:D,active:P,activeNode:H,collisionRect:$e,collisions:Pe,droppableRects:$,draggableNodes:S,draggingNode:Te,draggingNodeRect:De,droppableContainers:R,over:be,scrollableAncestors:xe,scrollAdjustedTranslate:Le},Y.current={initial:De,translated:$e}},[P,H,Pe,$e,S,Te,De,$,R,be,xe,Le]),Qs({...ve,delta:I,draggingRect:$e,pointerCoordinates:tn,scrollableAncestors:xe,scrollableAncestorRects:st});const Nr=c.useMemo(()=>({active:P,activeNode:H,activeNodeRect:B,activatorEvent:D,collisions:Pe,containerNodeRect:Fe,dragOverlay:me,draggableNodes:S,droppableContainers:R,droppableRects:$,over:be,measureDroppableContainers:W,scrollableAncestors:xe,scrollableAncestorRects:st,measuringConfiguration:j,measuringScheduled:K,windowRect:Ct}),[P,H,B,D,Pe,Fe,me,S,R,$,be,W,xe,st,j,K,Ct]),Er=c.useMemo(()=>({activatorEvent:D,activators:an,active:P,activeNodeRect:B,ariaDescribedById:{draggable:y},dispatch:v,draggableNodes:S,over:be,measureDroppableContainers:W}),[D,an,P,B,v,y,S,be,W]);return F.createElement(Qn.Provider,{value:k},F.createElement(yt.Provider,{value:Er},F.createElement(cr.Provider,{value:Nr},F.createElement(dr.Provider,{value:Sr},d)),F.createElement(ya,{disabled:l?.restoreFocus===!1})),F.createElement(xs,{...l,hiddenTextDescribedById:y}));function Rr(){const Q=J?.autoScrollEnabled===!1,te=typeof u=="object"?u.enabled===!1:u===!1,ne=N&&!Q&&!te;return typeof u=="object"?{...u,enabled:ne}:{enabled:ne}}}),ka=c.createContext(null),Tn="button",Na="Draggable";function Ea(e){let{id:t,data:n,disabled:r=!1,attributes:o}=e;const s=ot(Na),{activators:i,activatorEvent:l,active:u,activeNodeRect:d,ariaDescribedById:f,draggableNodes:h,over:p}=c.useContext(yt),{role:g=Tn,roleDescription:b="draggable",tabIndex:m=0}=o??{},x=u?.id===t,v=c.useContext(x?dr:ka),[w,k]=ht(),[M,E]=ht(),N=da(i,t),T=et(n);he(()=>(h.set(t,{id:t,key:s,node:w,activatorNode:M,data:T}),()=>{const I=h.get(t);I&&I.key===s&&h.delete(t)}),[h,t]);const S=c.useMemo(()=>({role:g,tabIndex:m,"aria-disabled":r,"aria-pressed":x&&g===Tn?!0:void 0,"aria-roledescription":b,"aria-describedby":f.draggable}),[r,g,m,x,b,f.draggable]);return{active:u,activatorEvent:l,activeNodeRect:d,attributes:S,isDragging:x,listeners:r?void 0:N,node:w,over:p,setNodeRef:k,setActivatorNodeRef:E,transform:v}}function Ra(){return c.useContext(cr)}const Ma="Droppable",Ta={timeout:25};function Da(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:o}=e;const s=ot(Ma),{active:i,dispatch:l,over:u,measureDroppableContainers:d}=c.useContext(yt),f=c.useRef({disabled:n}),h=c.useRef(!1),p=c.useRef(null),g=c.useRef(null),{disabled:b,updateMeasurementsFor:m,timeout:x}={...Ta,...o},v=et(m??r),w=c.useCallback(()=>{if(!h.current){h.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{d(Array.isArray(v.current)?v.current:[v.current]),g.current=null},x)},[x]),k=bt({callback:w,disabled:b||!i}),M=c.useCallback((S,I)=>{k&&(I&&(k.unobserve(I),h.current=!1),S&&k.observe(S))},[k]),[E,N]=ht(M),T=et(t);return c.useEffect(()=>{!k||!E.current||(k.disconnect(),h.current=!1,k.observe(E.current))},[E,k]),c.useEffect(()=>(l({type:X.RegisterDroppable,element:{id:r,key:s,disabled:n,node:E,rect:p,data:T}}),()=>l({type:X.UnregisterDroppable,key:s,id:r})),[r]),c.useEffect(()=>{n!==f.current.disabled&&(l({type:X.SetDroppableDisabled,id:r,key:s,disabled:n}),f.current.disabled=n)},[r,s,n,l]),{active:i,rect:p,isOver:u?.id===r,node:E,over:u,setNodeRef:N}}function wt(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function La(e,t){return e.reduce((n,r,o)=>{const s=t.get(r);return s&&(n[o]=s),n},Array(e.length))}function it(e){return e!==null&&e>=0}function $a(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function za(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const lt={scaleX:1,scaleY:1},Oa=e=>{var t;let{rects:n,activeNodeRect:r,activeIndex:o,overIndex:s,index:i}=e;const l=(t=n[o])!=null?t:r;if(!l)return null;const u=Ia(n,i,o);if(i===o){const d=n[s];return d?{x:o<s?d.left+d.width-(l.left+l.width):d.left-l.left,y:0,...lt}:null}return i>o&&i<=s?{x:-l.width-u,y:0,...lt}:i<o&&i>=s?{x:l.width+u,y:0,...lt}:{x:0,y:0,...lt}};function Ia(e,t,n){const r=e[t],o=e[t-1],s=e[t+1];return!r||!o&&!s?0:n<t?o?r.left-(o.left+o.width):s.left-(r.left+r.width):s?s.left-(r.left+r.width):r.left-(o.left+o.width)}const ur=e=>{let{rects:t,activeIndex:n,overIndex:r,index:o}=e;const s=wt(t,r,n),i=t[o],l=s[o];return!l||!i?null:{x:l.left-i.left,y:l.top-i.top,scaleX:l.width/i.width,scaleY:l.height/i.height}},ct={scaleX:1,scaleY:1},Aa=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:o,rects:s,overIndex:i}=e;const l=(t=s[n])!=null?t:r;if(!l)return null;if(o===n){const d=s[i];return d?{x:0,y:n<i?d.top+d.height-(l.top+l.height):d.top-l.top,...ct}:null}const u=_a(s,o,n);return o>n&&o<=i?{x:0,y:-l.height-u,...ct}:o<n&&o>=i?{x:0,y:l.height+u,...ct}:{x:0,y:0,...ct}};function _a(e,t,n){const r=e[t],o=e[t-1],s=e[t+1];return r?n<t?o?r.top-(o.top+o.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):o?r.top-(o.top+o.height):0:0}const fr="Sortable",hr=F.createContext({activeIndex:-1,containerId:fr,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:ur,disabled:{draggable:!1,droppable:!1}});function gr(e){let{children:t,id:n,items:r,strategy:o=ur,disabled:s=!1}=e;const{active:i,dragOverlay:l,droppableRects:u,over:d,measureDroppableContainers:f}=Ra(),h=ot(fr,n),p=l.rect!==null,g=c.useMemo(()=>r.map(N=>typeof N=="object"&&"id"in N?N.id:N),[r]),b=i!=null,m=i?g.indexOf(i.id):-1,x=d?g.indexOf(d.id):-1,v=c.useRef(g),w=!$a(g,v.current),k=x!==-1&&m===-1||w,M=za(s);he(()=>{w&&b&&f(g)},[w,g,b,f]),c.useEffect(()=>{v.current=g},[g]);const E=c.useMemo(()=>({activeIndex:m,containerId:h,disabled:M,disableTransforms:k,items:g,overIndex:x,useDragOverlay:p,sortedRects:La(g,u),strategy:o}),[m,h,M.draggable,M.droppable,k,g,x,u,p,o]);return F.createElement(hr.Provider,{value:E},t)}const Ba=e=>{let{id:t,items:n,activeIndex:r,overIndex:o}=e;return wt(n,r,o).indexOf(t)},Ha=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:o,items:s,newIndex:i,previousItems:l,previousContainerId:u,transition:d}=e;return!d||!r||l!==s&&o===i?!1:n?!0:i!==o&&t===u},Wa={duration:200,easing:"ease"},mr="transform",Fa=Ae.Transition.toString({property:mr,duration:0,easing:"linear"}),Pa={roleDescription:"sortable"};function Va(e){let{disabled:t,index:n,node:r,rect:o}=e;const[s,i]=c.useState(null),l=c.useRef(n);return he(()=>{if(!t&&n!==l.current&&r.current){const u=o.current;if(u){const d=We(r.current,{ignoreTransform:!0}),f={x:u.left-d.left,y:u.top-d.top,scaleX:u.width/d.width,scaleY:u.height/d.height};(f.x||f.y)&&i(f)}}n!==l.current&&(l.current=n)},[t,n,r,o]),c.useEffect(()=>{s&&i(null)},[s]),s}function pr(e){let{animateLayoutChanges:t=Ha,attributes:n,disabled:r,data:o,getNewIndex:s=Ba,id:i,strategy:l,resizeObserverConfig:u,transition:d=Wa}=e;const{items:f,containerId:h,activeIndex:p,disabled:g,disableTransforms:b,sortedRects:m,overIndex:x,useDragOverlay:v,strategy:w}=c.useContext(hr),k=Xa(r,g),M=f.indexOf(i),E=c.useMemo(()=>({sortable:{containerId:h,index:M,items:f},...o}),[h,o,M,f]),N=c.useMemo(()=>f.slice(f.indexOf(i)),[f,i]),{rect:T,node:S,isOver:I,setNodeRef:R}=Da({id:i,data:E,disabled:k.droppable,resizeObserverConfig:{updateMeasurementsFor:N,...u}}),{active:z,activatorEvent:Y,activeNodeRect:P,attributes:V,setNodeRef:J,listeners:oe,isDragging:D,over:O,setActivatorNodeRef:_,transform:y}=Ea({id:i,data:E,attributes:{...Pa,...n},disabled:k.draggable}),C=ss(R,J),j=!!z,$=j&&!b&&it(p)&&it(x),W=!v&&D,K=W&&$?y:null,le=$?K??(l??w)({rects:m,activeNodeRect:P,activeIndex:p,overIndex:x,index:M}):null,ve=it(p)&&it(x)?s({id:i,items:f,activeIndex:p,overIndex:x}):M,ge=z?.id,B=c.useRef({activeId:ge,items:f,newIndex:ve,containerId:h}),Fe=f!==B.current.items,ce=t({active:z,containerId:h,isDragging:D,isSorting:j,id:i,index:M,items:f,newIndex:B.current.newIndex,previousItems:B.current.items,previousContainerId:B.current.containerId,transition:d,wasDragging:B.current.activeId!=null}),Me=Va({disabled:!ce,index:M,node:S,rect:T});return c.useEffect(()=>{j&&B.current.newIndex!==ve&&(B.current.newIndex=ve),h!==B.current.containerId&&(B.current.containerId=h),f!==B.current.items&&(B.current.items=f)},[j,ve,h,f]),c.useEffect(()=>{if(ge===B.current.activeId)return;if(ge!=null&&B.current.activeId==null){B.current.activeId=ge;return}const Te=setTimeout(()=>{B.current.activeId=ge},50);return()=>clearTimeout(Te)},[ge]),{active:z,activeIndex:p,attributes:V,data:E,rect:T,index:M,newIndex:ve,items:f,isOver:I,isSorting:j,isDragging:D,listeners:oe,node:S,overIndex:x,over:O,setNodeRef:C,setActivatorNodeRef:_,setDroppableNodeRef:R,setDraggableNodeRef:J,transform:Me??le,transition:me()};function me(){if(Me||Fe&&B.current.newIndex===M)return Fa;if(!(W&&!Kt(Y)||!d)&&(j||ce))return Ae.Transition.toString({...d,property:mr})}}function Xa(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e?.draggable)!=null?n:t.draggable,droppable:(r=e?.droppable)!=null?r:t.droppable}}A.Down,A.Right,A.Up,A.Left;const Ya={'pre[class*="language-"]':{color:"#d4d4d4",fontSize:"13px",textShadow:"none",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace',direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",lineHeight:"1.5",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",padding:"1em",margin:".5em 0",overflow:"auto",background:"#1e1e1e"},'code[class*="language-"]':{color:"#d4d4d4",fontSize:"13px",textShadow:"none",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace',direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",lineHeight:"1.5",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none"},'pre[class*="language-"]::selection':{textShadow:"none",background:"#264F78"},'code[class*="language-"]::selection':{textShadow:"none",background:"#264F78"},'pre[class*="language-"] *::selection':{textShadow:"none",background:"#264F78"},'code[class*="language-"] *::selection':{textShadow:"none",background:"#264F78"},':not(pre) > code[class*="language-"]':{padding:".1em .3em",borderRadius:".3em",color:"#db4c69",background:"#1e1e1e"},".namespace":{Opacity:".7"},"doctype.doctype-tag":{color:"#569CD6"},"doctype.name":{color:"#9cdcfe"},comment:{color:"#6a9955"},prolog:{color:"#6a9955"},punctuation:{color:"#d4d4d4"},".language-html .language-css .token.punctuation":{color:"#d4d4d4"},".language-html .language-javascript .token.punctuation":{color:"#d4d4d4"},property:{color:"#9cdcfe"},tag:{color:"#569cd6"},boolean:{color:"#569cd6"},number:{color:"#b5cea8"},constant:{color:"#9cdcfe"},symbol:{color:"#b5cea8"},inserted:{color:"#b5cea8"},unit:{color:"#b5cea8"},selector:{color:"#d7ba7d"},"attr-name":{color:"#9cdcfe"},string:{color:"#ce9178"},char:{color:"#ce9178"},builtin:{color:"#ce9178"},deleted:{color:"#ce9178"},".language-css .token.string.url":{textDecoration:"underline"},operator:{color:"#d4d4d4"},entity:{color:"#569cd6"},"operator.arrow":{color:"#569CD6"},atrule:{color:"#ce9178"},"atrule.rule":{color:"#c586c0"},"atrule.url":{color:"#9cdcfe"},"atrule.url.function":{color:"#dcdcaa"},"atrule.url.punctuation":{color:"#d4d4d4"},keyword:{color:"#569CD6"},"keyword.module":{color:"#c586c0"},"keyword.control-flow":{color:"#c586c0"},function:{color:"#dcdcaa"},"function.maybe-class-name":{color:"#dcdcaa"},regex:{color:"#d16969"},important:{color:"#569cd6"},italic:{fontStyle:"italic"},"class-name":{color:"#4ec9b0"},"maybe-class-name":{color:"#4ec9b0"},console:{color:"#9cdcfe"},parameter:{color:"#9cdcfe"},interpolation:{color:"#9cdcfe"},"punctuation.interpolation-punctuation":{color:"#569cd6"},variable:{color:"#9cdcfe"},"imports.maybe-class-name":{color:"#9cdcfe"},"exports.maybe-class-name":{color:"#9cdcfe"},escape:{color:"#d7ba7d"},"tag.punctuation":{color:"#808080"},cdata:{color:"#808080"},"attr-value":{color:"#ce9178"},"attr-value.punctuation":{color:"#ce9178"},"attr-value.punctuation.attr-equals":{color:"#d4d4d4"},namespace:{color:"#4ec9b0"},'pre[class*="language-javascript"]':{color:"#9cdcfe"},'code[class*="language-javascript"]':{color:"#9cdcfe"},'pre[class*="language-jsx"]':{color:"#9cdcfe"},'code[class*="language-jsx"]':{color:"#9cdcfe"},'pre[class*="language-typescript"]':{color:"#9cdcfe"},'code[class*="language-typescript"]':{color:"#9cdcfe"},'pre[class*="language-tsx"]':{color:"#9cdcfe"},'code[class*="language-tsx"]':{color:"#9cdcfe"},'pre[class*="language-css"]':{color:"#ce9178"},'code[class*="language-css"]':{color:"#ce9178"},'pre[class*="language-html"]':{color:"#d4d4d4"},'code[class*="language-html"]':{color:"#d4d4d4"},".language-regex .token.anchor":{color:"#dcdcaa"},".language-html .token.punctuation":{color:"#808080"},'pre[class*="language-"] > code[class*="language-"]':{position:"relative",zIndex:"1"},".line-highlight.line-highlight":{background:"#f7ebc6",boxShadow:"inset 5px 0 0 #f7d87c",zIndex:"0"}},qa=({id:e,block:t,styleClasses:n,onUpdateBlock:r,onUpdate:o,onStyleChange:s,onDelete:i})=>{const{attributes:l,listeners:u,setNodeRef:d,transform:f,transition:h,isDragging:p}=pr({id:e}),g=c.useRef(null),b=c.useRef(null),m=c.useRef(null),x=c.useRef(null),[v,w]=c.useState(!1),[k,M]=c.useState(!1),E={transform:Ae.Transform.toString(f),transition:h,zIndex:p?10:"auto",opacity:p?.8:1},N=R=>{M(!1),o&&o(e,R.currentTarget.innerHTML)},T=R=>{R.preventDefault(),R.stopPropagation();const z=R.clientX,Y=b.current.offsetWidth,P=J=>{const oe=Y+(J.clientX-z);b.current&&(b.current.style.width=`${oe}px`)},V=()=>{document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",V),r&&b.current&&r(e,{width:b.current.offsetWidth})};document.addEventListener("mousemove",P),document.addEventListener("mouseup",V)},S=async(R,z,Y)=>{const P=x.current?.hotInstance;if(!P)return;const V=t.content.columns.map((J,oe)=>({...J,width:P.getColWidth(oe)}));r(e,{content:{...t.content,columns:V}})},I=()=>{switch(t.style){case"handsontable":{const R=z=>{r(e,{content:z})};return console.log("block.content=",t.content),a.jsx(bo,{hotRef:x,columns:t.content.columns,rowData:t.content.data,gridData:t.content,onGridDataChange:R,afterColumnResize:S,isDraggable:!1})}case"divider":return a.jsx("hr",{className:"border-gray-300 dark:border-zinc-600"});case"todo":{const R=()=>{r(e,{checked:!t.checked})};return a.jsxs("div",{className:n.todo,children:[a.jsx("input",{type:"checkbox",checked:t.checked||!1,onChange:R,className:"form-checkbox h-5 w-5 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),a.jsx("div",{ref:g,contentEditable:"true",suppressContentEditableWarning:!0,onFocus:()=>M(!0),onBlur:N,className:`w-full focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-sm px-1 min-h-[1em] ${t.checked?"line-through text-gray-400 dark:text-gray-500":""}`,dangerouslySetInnerHTML:{__html:t.content}})]})}case"quote":return a.jsx("div",{ref:g,contentEditable:"true",suppressContentEditableWarning:!0,onFocus:()=>M(!0),onBlur:N,className:`${n.quote} w-full focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-sm px-1 min-h-[1em]`,dangerouslySetInnerHTML:{__html:t.content}});case"code":{const R=z=>{w(!1),r(e,{content:z.target.value})};return a.jsx("div",{className:"relative",onDoubleClick:()=>w(!0),children:v?a.jsx("textarea",{defaultValue:t.content,onBlur:R,autoFocus:!0,className:`${n.code} w-full min-h-[100px] focus:outline-none focus:ring-2 focus:ring-blue-500`}):a.jsx(mo,{language:t.language||"javascript",style:Ya,showLineNumbers:!0,wrapLines:!0,customStyle:{margin:0,borderRadius:"0.375rem",minHeight:"4rem",backgroundColor:"#1E1E1E"},codeTagProps:{style:{fontFamily:"monospace",fontSize:"0.875rem"}},children:String(t.content||"")})})}case"youtube":return a.jsx("div",{className:"w-full aspect-w-16 aspect-h-9",children:a.jsx("iframe",{src:`https://www.youtube.com/embed/${t.content}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"w-full h-full rounded-md"})});case"table":{const R=(D,O,_)=>{const y={...t.content};y.rows[O][_].text=D.currentTarget.innerHTML,r(e,{content:y})},z=()=>{const D={...t.content},O=D.rows[0]?.length||1;D.rows.push(Array(O).fill({text:""})),r(e,{content:D})},Y=D=>{if(t.content.rows.length<=1)return;const O={...t.content};O.rows.splice(D,1),r(e,{content:O})},P=()=>{const D={...t.content};D.rows.forEach(O=>O.push({text:""})),r(e,{content:D})},V=D=>{if(t.content.rows[0]?.length<=1)return;const O={...t.content};O.rows.forEach(_=>_.splice(D,1)),r(e,{content:O})},J=D=>{D.preventDefault(),D.stopPropagation();const O=D.clientX,_=m.current;if(!_)return;const y=_.offsetWidth,C=$=>{const W=y+($.clientX-O);_.style.width=`${W}px`},j=()=>{document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",j),r&&_&&r(e,{width:_.offsetWidth})};document.addEventListener("mousemove",C),document.addEventListener("mouseup",j)},oe=(D,O)=>{D.preventDefault(),D.stopPropagation();const _=D.clientX,C=D.currentTarget.parentElement.offsetWidth,j=W=>{const K=C+(W.clientX-_);if(K>30){[...t.content.colWidths||[]];const H=m.current.querySelector("table");if(H){const le=H.querySelector("colgroup");le&&le.children[O]&&(le.children[O].style.width=`${K}px`)}}},$=W=>{document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",$);const K=C+(W.clientX-_),H=[...t.content.colWidths||[]];H[O]=Math.max(K,30),r(e,{content:{...t.content,colWidths:H}})};document.addEventListener("mousemove",j),document.addEventListener("mouseup",$)};return a.jsxs("div",{ref:d,style:E,className:"flex items-start group relative w-full",children:[a.jsxs("button",{onClick:z,className:"absolute -bottom-2.5 left-1/2 -translate-x-1/2 w-full h-5 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-10",children:[a.jsx("div",{className:"w-6 h-px bg-blue-500"}),a.jsx("div",{className:"absolute w-5 h-5 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs",children:"＋"})]}),a.jsx("button",{...l,...u,className:"p-1 cursor-grab opacity-0 group-hover:opacity-50 transition-opacity mr-2 touch-none absolute -left-7 top-2 z-20",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5 text-gray-400",children:[a.jsx("circle",{cx:"12",cy:"12",r:"1"}),a.jsx("circle",{cx:"12",cy:"5",r:"1"}),a.jsx("circle",{cx:"12",cy:"19",r:"1"})]})}),a.jsxs("div",{ref:m,className:"relative w-full",style:{width:t.width?`${t.width}px`:"100%"},children:[a.jsxs("button",{onClick:P,className:"absolute top-1/2 -right-2.5 -translate-y-1/2 h-full w-5 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-10",children:[a.jsx("div",{className:"h-6 w-px bg-blue-500"}),a.jsx("div",{className:"absolute w-5 h-5 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs",children:"＋"})]}),a.jsxs("table",{className:"w-full border-collapse border border-gray-300 dark:border-zinc-600 table-fixed",children:[a.jsx("colgroup",{children:t.content.rows[0]?.map((D,O)=>a.jsx("col",{style:{width:t.content.colWidths?.[O]?`${t.content.colWidths[O]}px`:"auto"}},O))}),a.jsx("thead",{children:a.jsx("tr",{children:t.content.rows[0]?.map((D,O)=>a.jsxs("th",{className:"relative border-none p-0 h-4 group/col",children:[a.jsx("button",{onClick:()=>V(O),className:"absolute -top-2.5 left-1/2 -translate-x-1/2 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-xs opacity-0 group-hover/col:opacity-100 transition-opacity z-10",children:"－"}),a.jsx("div",{onMouseDown:_=>oe(_,O),className:"absolute top-0 right-0 h-full w-1.5 cursor-col-resize opacity-0 group-hover/col:opacity-100",children:a.jsx("div",{className:"h-full w-px bg-blue-500"})})]},O))})}),a.jsx("tbody",{children:t.content.rows.map((D,O)=>a.jsxs("tr",{className:"relative group/row",children:[a.jsx("button",{onClick:()=>Y(O),className:"absolute -left-2.5 top-1/2 -translate-y-1/2 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-xs opacity-0 group-hover/row:opacity-100 transition-opacity z-10",children:"－"}),D.map((_,y)=>a.jsx("td",{contentEditable:!0,suppressContentEditableWarning:!0,onBlur:C=>R(C,O,y),className:"border border-gray-300 dark:border-zinc-600 p-2 focus:outline-blue-500 overflow-hidden whitespace-nowrap",dangerouslySetInnerHTML:{__html:_.text}},y))]},O))})]}),a.jsx("div",{onMouseDown:J,className:"absolute bottom-0 right-0 w-4 h-4 bg-blue-500 cursor-se-resize opacity-0 group-hover:opacity-100 transition-opacity"})]}),a.jsx("button",{onClick:()=>i(e),className:"p-1 text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity absolute -top-2 -right-2 bg-white dark:bg-zinc-800 rounded-full","aria-label":"Delete block",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})}case"image":return a.jsxs("div",{className:"relative",children:[a.jsx("img",{ref:b,src:t.content,alt:"Uploaded content",className:"h-auto rounded-md",style:{width:t.width?`${t.width}px`:"auto",maxWidth:"100%"}}),a.jsx("div",{onMouseDown:T,className:"absolute bottom-0 right-0 w-4 h-4 bg-blue-500 cursor-se-resize opacity-0 group-hover:opacity-100 transition-opacity"})]});default:return a.jsx("div",{ref:g,contentEditable:"true",suppressContentEditableWarning:!0,onFocus:()=>M(!0),onBlur:N,className:`${n[t.style]||n.p} w-full focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-sm px-1 min-h-[1em]`,dangerouslySetInnerHTML:{__html:t.content}})}};return a.jsxs("div",{ref:d,style:E,className:"group relative rounded-md group-hover:bg-gray-50 dark:group-hover:bg-zinc-800/50",children:[a.jsxs("div",{className:"absolute -top-8 right-0 flex items-center bg-white dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 rounded-md shadow-sm opacity-0 group-hover:opacity-100 transition-opacity z-10 p-1 space-x-1",children:[a.jsx("button",{...l,...!k&&!v&&u,className:"p-1 cursor-grab text-gray-400 hover:text-gray-600",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[a.jsx("circle",{cx:"12",cy:"12",r:"1"}),a.jsx("circle",{cx:"12",cy:"5",r:"1"}),a.jsx("circle",{cx:"12",cy:"19",r:"1"})]})}),a.jsxs("select",{value:t.style,onChange:R=>s(e,R.target.value),className:"bg-gray-50 border border-gray-300 text-gray-900 text-xs rounded focus:ring-blue-500 focus:border-blue-500 block p-1 dark:bg-zinc-700 dark:border-zinc-600 dark:placeholder-zinc-400 dark:text-white",children:[a.jsx("option",{value:"p",children:"P"}),a.jsx("option",{value:"h1",children:"H1"}),a.jsx("option",{value:"h2",children:"H2"}),a.jsx("option",{value:"todo",children:"Todo"}),a.jsx("option",{value:"quote",children:"Quote"}),a.jsx("option",{value:"divider",children:"Divider"}),a.jsx("option",{value:"handsontable",children:"Handsontable"}),a.jsx("option",{value:"code",children:"Code"})]}),t.style==="code"&&a.jsx("select",{value:t.language||"javascript",onChange:R=>r(e,{language:R.target.value}),className:"bg-gray-50 border border-gray-300 text-gray-900 text-xs rounded focus:ring-blue-500 focus:border-blue-500 block p-1 dark:bg-zinc-700 dark:border-zinc-600 dark:placeholder-zinc-400 dark:text-white",children:["javascript","css","html","python","java","csharp","sql","bash","json","typescript"].map(R=>a.jsx("option",{value:R,children:R},R))}),a.jsx("button",{onClick:()=>i(e),className:"p-1 text-gray-400 hover:text-red-500",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]}),I()]})},vr=({children:e,onDragEnd:t})=>{const n=ys(bs(Jt,{activationConstraint:{distance:8}}));return a.jsx(Sa,{sensors:n,collisionDetection:ks,onDragEnd:t,children:e})},xr=c.forwardRef(({size:e="md",color:t="default",name:n,placeholder:r,value:o,onChange:s,className:i="",allClassName:l="",min:u,max:d,step:f,disabled:h=!1,control:p,rules:g=null,defaultValue:b="",onKeyDownCapture:m,error:x,helperText:v,...w},k)=>{const E=p?._formState?.errors?.[n]?"error":t,N=z=>{s&&s(z)},T={sm:`h-9 px-3 py-2 ${L.textSm}`,md:`h-11 px-4 py-2.5 ${L.textSm}`,lg:"h-12 px-4 py-3 text-base"},S={default:"bg-transparent text-gray-800 border-gray-300 focus:border-brand-300 focus:ring-brand-500/20 dark:border-gray-700 dark:text-white/90 dark:focus:border-brand-800",success:"border-green-500 focus:border-green-300 focus:ring-green-500/20 dark:text-green-400 dark:border-green-500 dark:focus:border-green-800",error:"border-red-500 focus:border-red-300 focus:ring-red-500/20 dark:text-red-400 dark:border-red-500 dark:focus:border-red-800"},I="text-gray-500 border-gray-300 bg-gray-100 cursor-not-allowed opacity-60 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-700",R=`w-full ${L.roundedLg} border appearance-none shadow-theme-xs placeholder:text-gray-400 focus:outline-none focus:ring-3 dark:bg-zinc-950 dark:placeholder:text-white/30`;return a.jsxs("div",{className:`relative ${l}`,children:[a.jsx("input",{type:"text",name:n,placeholder:r,ref:k,onChange:N,min:u,max:d,step:f,disabled:h,onKeyDownCapture:m,className:`
          ${R}
          ${T[e]}
          ${h?I:S[E]}
          ${i}
        `,...w}),v&&a.jsx("p",{className:`mt-1 ${L.textSm} text-red-600 dark:text-red-400`,children:v})]})});xr.displayName="TwInputRef";const br=F.forwardRef(({title:e,children:t,className:n="",desc:r="",icon:o=null,isDraggable:s=!1},i)=>{const l=c.useRef(null),[u,d]=c.useState({x:0,y:0,isInitialized:!1}),[f,h]=c.useState(!1),p=c.useRef({x:0,y:0});c.useEffect(()=>{if(s&&l.current&&!u.isInitialized){const v=l.current.getBoundingClientRect(),w=window.innerWidth/2-672/2<=0?0:window.innerWidth/2-672/2;d({x:w,y:window.innerHeight/2-v.height/2,isInitialized:!0})}},[s,u.isInitialized]);const g=v=>{if(!s||!l.current)return;h(!0);const w=l.current.getBoundingClientRect();p.current={x:v.clientX-w.left,y:v.clientY-w.top},v.preventDefault()},b=v=>{if(!f)return;const w=v.clientX-p.current.x<=0?0:v.clientX-p.current.x,k=v.clientY-p.current.y<=120?120:v.clientY-p.current.y;d({...u,x:w,y:k})},m=()=>{h(!1)};c.useEffect(()=>(f?(window.addEventListener("mousemove",b),window.addEventListener("mouseup",m)):(window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",m)),()=>{window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",m)}),[f]);const x=s?{position:"absolute",top:u.y,left:u.x,cursor:f?"grabbing":"default"}:{};return a.jsxs("div",{ref:v=>{l.current=v,i&&(i.current=v)},className:`MoveCard ${L.card} ${n}`,style:{...x},children:[a.jsxs("div",{className:`flex px-6 py-5 items-center ${s?"cursor-grab":""}`,onMouseDown:g,children:[o!==null?o:"",a.jsxs("div",{className:"flex-grow",children:[a.jsx("h3",{className:`${L.textBase} ${L.fontMedium} text-gray-800 dark:text-white/90`,children:e}),r&&a.jsx("p",{className:`mt-1 ${L.textSm} text-gray-500 dark:text-gray-400`,children:r})]})]}),a.jsx("div",{className:`border-t border-gray-100 dark:border-gray-800 
        p-4 sm:p-6 overflow-x-auto`,children:a.jsx("div",{className:"space-y-6 whitespace-normal",children:t})})]})});br.displayName="MoveCard";const yr=c.forwardRef(({name:e,options:t,rules:n,control:r,placeholder:o="Select Option",className:s="",allClassName:i="",...l},u)=>a.jsxs("div",{className:`relative ${i}`,children:[a.jsxs("select",{className:`h-11 w-full appearance-none ${L.roundedLg} border border-gray-300 
          bg-transparent px-4 py-2.5 pr-11 text-sm shadow-theme-xs placeholder:text-gray-400 
          focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 
          dark:border-gray-700 dark:bg-zinc-950 dark:text-white/90 dark:placeholder:text-white/30 
          dark:focus:border-brand-800 dark:bg-dark-900
          ${s}`,ref:u,...l,children:[a.jsx("option",{value:"",disabled:!0,className:"text-gray-700 dark:bg-zinc-950 dark:text-gray-400",children:o}),t.map(d=>a.jsx("option",{value:d.value,className:"text-gray-700 dark:bg-zinc-950 dark:text-gray-400",children:d.label},d.value))]}),a.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 h-11",children:a.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}));yr.displayName="TwSelectRef";const Ka=({isOpen:e,onClose:t,onCreate:n})=>{const r={visible:{opacity:1},hidden:{opacity:0}},o={hidden:{y:"-50px",opacity:0,scale:.95},visible:{y:"0",opacity:1,scale:1,transition:{duration:.2,ease:"easeOut"}},exit:{y:"50px",opacity:0,scale:.95,transition:{duration:.15,ease:"easeIn"}}},{t:s}=Ee(),{control:i,handleSubmit:l}=Vr({defaultValues:{columns:[{title:"col_0",type:"text",width:100,data:"col_0"},{title:"col_1",type:"text",width:100,data:"col_1"},{title:"col_2",type:"text",width:100,data:"col_2"}]}}),{fields:u,append:d,remove:f}=Xr({control:i,name:"columns"}),h=[{value:"text",label:s("column_type_text")},{value:"numeric",label:s("column_type_numeric")},{value:"date",label:s("column_type_date")},{value:"checkbox",label:s("column_type_checkbox")}],p=g=>{const b=g.columns.map((m,x)=>({...m,data:(m.title||"").toLowerCase().replace(/\s+/g,"_")||`col_${x}`}));n(b)};return a.jsx(Ft,{children:e&&a.jsx(Z.div,{className:"fixed inset-0 bg-black/70 bg-opacity-50 z-180 flex justify-center items-center",variants:r,initial:"hidden",animate:"visible",exit:"hidden",children:a.jsx(Z.div,{variants:o,initial:"hidden",animate:"visible",exit:"exit",onClick:g=>g.stopPropagation(),children:a.jsx(br,{isDraggable:!0,className:"w-full max-w-sm sm:max-w-xl max-h-[61vh] overflow-y-auto",title:s("handsontable_column_setup","Handsontable Column Setup"),children:a.jsxs("form",{onSubmit:l(p),children:[a.jsx("h3",{className:"text-md font-semibold mb-2",children:s("columns")}),a.jsx("div",{className:"space-y-3",children:u.map((g,b)=>a.jsxs("div",{className:`grid grid-cols-1 sm:grid-cols-5 gap-2 items-center p-2 ${L.border} rounded-md`,children:[a.jsx("div",{className:"sm:col-span-2",children:a.jsx(cn,{name:`columns.${b}.title`,control:i,defaultValue:g.title,render:({field:m})=>a.jsx(xr,{...m,placeholder:s("column_title")})})}),a.jsx("div",{className:"sm:col-span-2",children:a.jsx(cn,{name:`columns.${b}.type`,control:i,defaultValue:g.type,render:({field:m})=>a.jsx(yr,{...m,options:h,className:"dark:bg-gray-700"})})}),a.jsx("div",{className:"flex items-center justify-end",children:a.jsx(ke,{type:"button",size:"sm",color:"warning",onClick:()=>f(b),disabled:u.length<=1,children:s("delete")})})]},g.id))}),a.jsxs("div",{className:"flex justify-between items-center mt-6",children:[a.jsx(ke,{type:"button",onClick:()=>d({title:"",type:"text",data:""}),children:s("add_column")}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(ke,{type:"button",variant:"outlined",onClick:t,children:s("cancel")}),a.jsx(ke,{type:"submit",children:s("create")})]})]})]})})})})})},Dn=e=>{const{t}=Ee();return a.jsxs("div",{className:"mx-auto grid w-full max-w-md grid-cols-4 items-center justify-center gap-2 px-4 py-2 text-center",children:[e.master&&a.jsx(ke,{size:"sm",variant:"outlined",color:"brand",onClick:e.onUtil,className:"gap-1.5",children:a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),a.jsx("span",{className:"ml-2 whitespace-nowrap",children:t("util")})]})}),a.jsx(ke,{size:"sm",variant:"outlined",color:"brand",onClick:e.onEdit,className:"gap-1.5",children:a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),a.jsx("path",{d:"m15 5 4 4"})]}),a.jsx("span",{className:"ml-2 whitespace-nowrap",children:t("edit")})]})}),a.jsx(ke,{size:"sm",variant:"outlined",color:"brand",onClick:e.onNewMemo,className:"gap-1.5",children:a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M5 12h14"}),a.jsx("path",{d:"M12 5v14"})]}),a.jsx("span",{className:"ml-2 whitespace-nowrap",children:t("new")})]})}),a.jsx(ke,{size:"sm",variant:"outlined",color:"error",onClick:e.onDelete,className:"gap-1.5",children:a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),a.jsx("span",{className:"ml-2 whitespace-nowrap",children:t("delete")})]})})]})},Ua=({rootDb:e,memoDetailData:t,onBookmark:n,searchWord:r,onDeleteTab:o})=>{const[s,i]=c.useState(!1),[l,u]=c.useState(!1),{t:d}=Ee(),{scrollYProgress:f}=Qo(),h=Zo(f,{stiffness:100,damping:30,restDelta:.001}),p=Pt(),{memoId:g}=Vn(),m=vt()?.state?.fullIndex,{user:x}=_e(),v=Bt(),w=Hn({mutationFn:async()=>{const S=e==="memo"?`${e}_txt/${x.uid}/${g}`:`${e}_txt/${g}`,I=e==="memo"?`${e}_tree/${x.uid}/${g}`:`${e}/${g}`;return await os(S,I)},onSuccess:()=>{v.invalidateQueries({queryKey:["twTreeData",e]}),o&&o(g),p(`/${e==="memo"?"m":e}`)},onError:S=>{console.error("삭제 중 오류 발생:",S)}}),k=()=>{const S=`/${e==="memo"?"m":e}/edit/${g}`;p(S,{state:{fullIndex:m}})},M=()=>{const S=`/${e==="memo"?"m":e}/util/${g}`;p(S,{state:{fullIndex:m}})},E=()=>{const S=`/${e==="memo"?"m":e}/insert/${g}`;p(S,{state:{fullIndex:m}})},N=()=>{i(!0)},T=()=>{i(!1),w.mutate()};return c.useEffect(()=>{function S(){const I=t.scrollY?t.scrollY:0;window.scrollTo({top:I}),t&&t.html!=="N"&&document.querySelectorAll("pre").forEach(R=>{R.innerHTML=xo(R.innerHTML)})}t&&t.memo!==null&&(S(),t.image&&t.image.map((I,R)=>I))},[t]),g===""||x===void 0?a.jsx(a.Fragment,{}):a.jsxs("div",{className:"py-2",children:[a.jsx(Z.div,{className:"progress-bar",style:{scaleX:h}}),a.jsxs("div",{className:`overflow-hidden ${L.card}`,children:[a.jsxs("div",{className:"p-2 sm:p-4",children:[a.jsxs("div",{className:L.between,children:[a.jsxs("p",{className:`${L.truncate} ${L.textXs} ${L.textGray500DarkZinc400}`,children:[a.jsx(Dt,{to:e==="memo"?"/m":"/hmoe",className:`${L.navLinkHoverText}`,children:e==="memo"?"MEMO":"HOME"}),t?.path?.map((S,I)=>t.path.length===I+1?` > ${S?.title}`:a.jsxs(F.Fragment,{children:[" "," > ",a.jsx(Dt,{to:e==="memo"?`/m/${S.id}`:`/home/${S.id}`,className:`${L.navLinkHoverText}`,children:S?.title})]},I))]}),a.jsx(Z.button,{whileTap:{scale:.8},className:`${L.flexShrink0} ${L.roundedFull} p-2 ${L.buttonHoverGrayLight}`,"aria-label":d("bookmark"),onClick:n,children:t?.bookmark==="Y"?a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`${L.h5W5} ${L.textRed500}`,fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}):a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`${L.h5W5} ${L.textGray500}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})})]}),a.jsx("button",{onClick:()=>u(!l),className:`text-left ${L.heading2XlBoldSm3Xl} ${L.textGray900}`,children:t?.title})]}),!l&&a.jsx("div",{className:`${L.line}`}),a.jsx(Z.div,{initial:!1,animate:{height:l?"auto":0,opacity:l?1:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:a.jsx("div",{className:`${L.line}`,children:a.jsx(Dn,{master:x?.uid===Lt,rootDb:e,onEdit:k,onUtil:M,onNewMemo:E,onDelete:N})})}),t&&t.html==="sheet"&&a.jsx(yo,{rootDb:e,detailData:t}),a.jsxs("div",{className:"p-2 sm:p-4",children:[t&&t.html!=="sheet"?t?.html==="N"?a.jsx(po,{postData:t?.memo,highlightWord:r}):t?.html!=="N"&&t?.memo&&a.jsx(Yr,{text:t.memo}):"",a.jsx(vo,{imageList:t?.image}),!t&&a.jsx("div",{className:"flex justify-center py-12",children:a.jsx("div",{className:`${L.flexCenter} py-12`})}),a.jsx(Ga,{})]})]}),a.jsx(Z.div,{initial:!1,animate:{height:l?"auto":0,opacity:l?1:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:a.jsx("div",{className:`${L.line}`,children:a.jsx(Dn,{master:x?.uid===Lt,rootDb:e,onEdit:k,onUtil:M,onNewMemo:E,onDelete:N})})}),a.jsx(qr,{isOpen:s,size:"sm",color:"warning",title:d("delete_confirm_title"),message:d("delete_confirm_message"),onClose:()=>i(!1),onConfirm:T})]})},Ga=()=>{const{user:e}=_e(),{memoId:t}=Vn(),{t:n}=Ee(),[r,o]=c.useState([]),[s,i]=c.useState(""),[l,u]=c.useState("p"),d=c.useRef(null),f=c.useRef(null),[h,p]=c.useState(!1),[g,b]=c.useState(""),[m,x]=c.useState(!1),[v,w]=c.useState(0),k=c.useRef(!0);c.useEffect(()=>{if(e&&t){const y=`memo_txt/${e.uid}/${t}/notion`;fe(y).then(C=>{C&&o(C),k.current=!1})}},[e,t]),c.useEffect(()=>{if(!k.current&&e&&t){const y=`memo_txt/${e.uid}/${t}/notion`;G(y,r)}},[r,e,t]);const M=[{command:"p",label:"Paragraph"},{command:"h1",label:"Heading 1"},{command:"h2",label:"Heading 2"},{command:"todo",label:"To-do list"},{command:"quote",label:"Quote"},{command:"code",label:"Code Block"},{command:"image",label:"Image"},{command:"divider",label:"Divider"},{command:"handsontable",label:"Handsontable"},{command:"table",label:"Table"},{command:"youtube",label:"YouTube Video"}],E=g?M.filter(y=>y.label.toLowerCase().includes(g.toLowerCase())):M,N=y=>{if(h){y.key==="ArrowDown"?(y.preventDefault(),w(C=>(C+1)%E.length)):y.key==="ArrowUp"?(y.preventDefault(),w(C=>(C-1+E.length)%E.length)):y.key==="Enter"?(y.preventDefault(),E[v]&&J(E[v].command)):y.key==="Escape"&&(y.preventDefault(),p(!1));return}if(y.key==="Enter"&&!y.shiftKey){y.preventDefault();const C=d.current?.innerHTML||"";if(C.trim()==="/"){d.current&&(d.current.innerHTML=""),p(!1);return}if(d.current?.textContent.trim()===""&&!C.includes("<img"))return;const j={id:Date.now(),content:s,style:l,...l==="todo"&&{checked:!1}};o([...r,j]),i(""),d.current&&(d.current.innerHTML="")}},T=y=>{const C=y.currentTarget.textContent;C.startsWith("/")?(p(!0),b(C.substring(1)),w(0)):p(!1),i(y.currentTarget.innerHTML)},S=(y,C)=>{o(j=>j.map($=>$.id===y?{...$,content:C}:$))},I=(y,C)=>{o(j=>j.map($=>$.id===y?{...$,style:C}:$))},R=(y,C)=>{o(j=>j.map($=>$.id===y?{...$,...C}:$))},z=y=>{const C=r.find(j=>j.id===y);if(C&&C.style==="image"&&C.content)try{const j=dn(un,C.content);Kr(j).catch($=>{console.error("Error deleting image from storage:",$)})}catch(j){console.error("Error creating storage reference from URL:",j)}o(j=>j.filter($=>$.id!==y))},Y=y=>{o(C=>{const j=C.findIndex(H=>H.id===y);if(j===-1)return C;const W={...C[j],id:Date.now()},K=[...C];return K.splice(j+1,0,W),K})},P=y=>{const{active:C,over:j}=y;C.id!==j.id&&o($=>{const W=$.findIndex(H=>H.id===C.id),K=$.findIndex(H=>H.id===j.id);return wt($,W,K)})},V=y=>{const C=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,j=y.match(C);return j&&j[2].length===11?j[2]:null},J=y=>{if(y==="image")f.current?.click();else if(y==="divider"){const C={id:Date.now(),style:"divider",content:""};o(j=>[...j,C])}else if(y==="handsontable")x(!0);else if(y==="code"){const C={id:Date.now(),style:"code",language:"javascript",content:""};o(j=>[...j,C])}else if(y==="table"){const C={id:Date.now(),style:"table",content:{rows:[[{text:""},{text:""}],[{text:""},{text:""}]]}};o(j=>[...j,C])}else if(y==="youtube"){const C=prompt("Enter YouTube URL:");if(C){const j=V(C);if(j){const $={id:Date.now(),style:"youtube",content:j};o(W=>[...W,$])}else alert("Invalid YouTube URL")}}else u(y),d.current?.focus();d.current&&(d.current.innerHTML=""),i(""),p(!1),b("")},oe=y=>{const C={id:Date.now(),style:"handsontable",content:{data:[Array(y.length).fill("")],columns:y,colHeaders:y.map(j=>j.title),rowHeaders:!0,height:"auto",licenseKey:"non-commercial-and-evaluation"}};o(j=>[...j,C]),x(!1)},D=async y=>{const C=y.target.files[0];if(!C||!e||!t)return;const j=`memo_txt_images/${e.uid}/${t}/${Date.now()}_${C.name}`,$=dn(un,j);try{const W=await Ur($,C),K=await Gr(W.ref),H={id:Date.now(),content:K,style:"image"};o(le=>[...le,H])}catch(W){console.error("Image upload failed:",W)}},O=n("notion_input_placeholder","Type '/' for commands, or just start writing..."),_={p:"text-base",h1:"text-3xl font-bold my-4",h2:"text-2xl font-bold my-3",code:"font-mono bg-gray-100 dark:bg-zinc-700 p-4 rounded-md text-sm",todo:"flex items-center gap-2 my-1",quote:"border-l-4 border-gray-300 dark:border-zinc-600 pl-4 italic text-gray-500 dark:text-gray-400 my-2",image:"my-4",divider:"my-4",handsontable:"my-4",youtube:"my-4",table:"my-4 w-full"};return a.jsxs("div",{className:"mt-8 py-4 border-t border-gray-200 dark:border-zinc-700",children:[a.jsx(vr,{onDragEnd:P,children:a.jsx(gr,{items:r,strategy:Aa,children:a.jsx("div",{className:"mb-4 space-y-2",children:r.map(y=>a.jsx(qa,{id:y.id,block:y,styleClasses:_,onUpdateBlock:R,onUpdate:S,onStyleChange:I,onDelete:z,onDuplicate:Y},y.id))})})}),a.jsxs("div",{className:"relative",children:[h&&a.jsx(Z.div,{className:"absolute bottom-full mb-2 w-full sm:w-64 bg-white dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 rounded-lg shadow-xl z-10",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.1},children:a.jsxs("div",{className:"p-2",children:[a.jsx("p",{className:"text-xs text-gray-500 px-2 pb-1 font-semibold",children:"BLOCKS"}),E.length>0?E.map((y,C)=>a.jsx("button",{onClick:()=>J(y.command),className:`w-full text-left px-2 py-1.5 rounded text-sm ${C===v?"bg-gray-100 dark:bg-zinc-700":""} hover:bg-gray-100 dark:hover:bg-zinc-700`,children:y.label},y.command)):a.jsx("p",{className:"px-2 py-1.5 text-sm text-gray-500",children:"No results"})]})}),a.jsx("input",{type:"file",ref:f,onChange:D,accept:"image/*",className:"hidden"}),a.jsx("div",{ref:d,contentEditable:"true",onInput:T,onKeyDown:N,"data-placeholder":O,className:`notion-selectable w-full bg-transparent focus:outline-none text-gray-800 dark:text-gray-200 
						min-h-[2.5rem] p-2 border border-transparent focus:border-blue-500 rounded-md
						empty:before:content-[attr(data-placeholder)] empty:before:text-gray-400 empty:before:dark:text-gray-500 empty:before:cursor-text`})]}),a.jsx(Ka,{isOpen:m,onClose:()=>x(!1),onCreate:oe})]})},Qa=({rootDb:e})=>{const{user:t}=_e(),{t:n}=Ee(),r=n(e==="memo"?"appMemo":"home_mng"),o=a.jsx("div",{className:"text-center",children:a.jsx("h1",{className:`text-3xl font-bold ${L.textIndigo}`,children:r})});return a.jsx(a.Fragment,{children:a.jsx(go,{title:o,className:"my-5",children:a.jsxs("div",{className:"grid gird-cols-1 md:grid-cols-5 items-center gap-3",children:[t===null?a.jsx("p",{className:`${L.textRed500} ${L.textLgFontSemiboldLeft} ${L.mdColSpan3}`,children:n("login_used")}):a.jsx("p",{className:`${L.textGray600DarkZinc400} text-left ${L.mdColSpan3}`,dangerouslySetInnerHTML:{__html:n("memo_main_guide").replace(`
`,"<br/>")}}),a.jsx("div",{className:`w-full ${L.flexCenter} md:col-span-2`,children:a.jsx(wo,{})})]})})})},Ja=F.lazy(()=>Re(()=>import("./MemoSheet-ibcQcUgz.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]))),Za=F.lazy(()=>Re(()=>import("./MemoSheetGrid-B3DLHVD5.js"),__vite__mapDeps([23,1,2,3,19,8,9,4,10,11,12,13,14]))),Ln=F.lazy(()=>Re(()=>import("./MemoDetailEdit-C9Va6LES.js"),__vite__mapDeps([24,1,2,25,26,27,11,28,29,8,9,4,10,12,13,14,30,31,32,33,34,35,36,37,5,6,7,15,16,17,18,19,20,21,38,22]))),ei=F.lazy(()=>Re(()=>import("./TwMemoDetailUtil-Dv4W0vdu.js"),__vite__mapDeps([39,1,2,29,5,8,9,4,10,11,12,13,14,25,26,27,6,7,15,16,17,18,19,20,21,22]))),ti=F.lazy(()=>Re(()=>import("./index-CQnB8GtB.js").then(e=>e.eW),__vite__mapDeps([1,2]))),ni=F.lazy(()=>Re(()=>import("./HomeChartVisitors-DCK9QaPI.js"),__vite__mapDeps([40,1,2,4]))),ri=F.lazy(()=>Re(()=>import("./MemoBookMark-GcNQVTq-.js"),__vite__mapDeps([41,1,2,4,42])).then(e=>({default:e.MemoBookMark}))),$n=()=>a.jsxs("div",{className:`w-full ${L.card} relative overflow-hidden p-4`,children:[a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-6 bg-gray-300 dark:bg-zinc-700 rounded-md w-3/4"}),a.jsx("div",{className:"mt-4 h-4 bg-gray-300 dark:bg-zinc-700 rounded-md w-1/2"})]}),a.jsx("div",{className:`${L.line} my-4`}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-3 animate-pulse",children:[a.jsx("div",{className:"h-4 bg-gray-300 dark:bg-zinc-700 rounded w-full",style:{animationDelay:"0.1s"}}),a.jsx("div",{className:"h-4 bg-gray-300 dark:bg-zinc-700 rounded w-5/6",style:{animationDelay:"0.2s"}}),a.jsx("div",{className:"h-4 bg-gray-300 dark:bg-zinc-700 rounded w-full",style:{animationDelay:"0.3s"}})]}),a.jsx("br",{}),a.jsxs("div",{className:"space-y-3 animate-pulse",children:[a.jsx("div",{className:"h-4 bg-gray-300 dark:bg-zinc-700 rounded w-full",style:{animationDelay:"0.4s"}}),a.jsx("div",{className:"h-4 bg-gray-300 dark:bg-zinc-700 rounded w-4/6",style:{animationDelay:"0.5s"}})]}),a.jsx("div",{className:"space-y-3 animate-pulse pt-4",children:a.jsx("div",{className:"h-4 bg-gray-300 dark:bg-zinc-700 rounded w-full",style:{animationDelay:"0.6s"}})})]})]}),oi=({rootDb:e,ui:t,user:n,memoId:r,memoDetailData:o,isLoading:s,onBookmark:i,handleCloseTab:l})=>{const u=vt();return a.jsxs(c.Suspense,{fallback:a.jsx($n,{}),children:[a.jsx(Ft,{mode:"wait",children:a.jsxs(Qr,{location:u,children:[a.jsx(Ne,{path:"todo",element:a.jsx(Z.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:a.jsx(ti,{})})}),a.jsx(Ne,{path:"sheet/:sheetId?",element:a.jsx(Z.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:a.jsx(Za,{detailData:o})})}),a.jsx(Ne,{path:"edit/:memoId",element:a.jsx(Z.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:a.jsx(Ln,{rootDb:e,isLoading:s,memoDetailData:o,ui:t})})}),a.jsx(Ne,{path:"insert/:memoId",element:a.jsx(Z.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:a.jsx(Ln,{rootDb:e,isLoading:s,memoDetailData:o,ui:t})})}),a.jsx(Ne,{path:"util/:memoId",element:a.jsx(Z.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:a.jsx(ei,{rootDb:e,isLoading:s,memoDetailData:o})})}),a.jsx(Ne,{path:":memoId",element:a.jsx(a.Fragment,{children:s?a.jsx($n,{}):a.jsx(Ua,{rootDb:e,memoDetailData:o,onBookmark:i,onDeleteTab:()=>l(null,{id:r})})})}),a.jsx(Ne,{path:"*",element:a.jsx(Z.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:a.jsx(Qa,{rootDb:e,ui:t})})})]},u.pathname)}),(e==="memo"||e==="sheet")&&n===null?null:a.jsx(Ja,{}),(e==="memo"||e==="sheet")&&a.jsx(ri,{ui:t}),(r===""||r==="m")&&n?.uid===Lt&&a.jsxs(a.Fragment,{children:[a.jsx(ni,{}),a.jsx("div",{className:`mt-5 ${L.card}`,children:a.jsx(rs,{rootDb:e})})]})]})},si=e=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...e,children:a.jsx("path",{fillRule:"evenodd",d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zM6 20V4h7v5h5v11H6zM8 12h3v3H8v-3zm0 4h3v3H8v-3zm4-4h3v3h-3v-3zm0 4h3v3h-3v-3z",clipRule:"evenodd"})}),ai=({tabInfo:e,handleCloseTab:t,isActive:n})=>{const{t:r}=Ee(),{user:o}=_e(),{attributes:s,listeners:i,setNodeRef:l,transform:u,transition:d,isDragging:f}=pr({id:e.id}),h={transform:Ae.Transform?.toString(u),transition:d,zIndex:f?1:"auto"},{data:p}=Bn({queryKey:["tabTitle",e.rootDb,o?.uid,e.id],queryFn:async()=>e.rootDb==="sheet"?await fe(`memo_sheet/${o?.uid}/${e.id}/title`):e.rootDb==="memo"?await fe(`${e.rootDb}_txt/${o?.uid}/${e.id}/title`):e.rootDb==="home"?await fe(`${e.rootDb}_txt/${e.id}/title`):e.title,enabled:!!o&&!!e.id,staleTime:1/0,placeholderData:e.title});return a.jsxs(Dt,{ref:l,style:h,...s,...i,"data-tab-id":e.id,to:e.path,title:p,end:!0,className:({isActive:g})=>`group relative flex flex-shrink-0 items-center pl-3 pr-2 py-1.5 text-sm rounded-t-md transition-colors duration-200 min-w-28 max-w-48 border-b-2
				${g?"bg-gray-200 dark:bg-zinc-700 border-blue-500 text-gray-800 dark:text-gray-100":"border-transparent text-gray-500 dark:text-gray-400 hover:bg-gray-200/70 dark:hover:bg-zinc-700/70"}
				${f?"opacity-50 shadow-lg":""}`,children:[e.rootDb==="memo"?a.jsx(Jr,{className:`w-5 h-5 mr-1 flex-shrink-0 transition-transform duration-200 ${n?"scale-110":""}`,fill:"currentColor"}):e.rootDb==="sheet"?a.jsx(si,{className:`w-5 h-5 mr-1 flex-shrink-0 transition-transform duration-200 ${n?"scale-110":""}`}):null,a.jsx("span",{className:"truncate pr-1",style:{fontFamily:"sans-serif"},children:p||r("loading")}),a.jsx("button",{onClick:g=>t(g,e),className:`ml-auto flex-shrink-0 p-1 rounded-full transition-opacity duration-200 opacity-0 group-hover:opacity-100
					text-gray-500 dark:text-gray-400 
					hover:bg-gray-300/50 dark:hover:bg-gray-600/50 hover:text-gray-700 dark:hover:text-white
				`,children:a.jsx(Xn,{className:"w-3 h-3"})})]})},ii=({openTabs:e,setOpenTabs:t,handleCloseTab:n,handleCloseAllTabs:r,activeId:o})=>{const s=c.useRef(null),[i,l]=c.useState({left:!1,right:!1}),[u,d]=c.useState({left:0,width:0}),f=c.useCallback(()=>{const g=s.current;if(g){const b=g.scrollWidth>g.clientWidth,m=g.scrollLeft===0,x=g.scrollLeft+g.clientWidth>=g.scrollWidth-1;l(v=>{const w={left:b&&!m,right:b&&!x};return v.left===w.left&&v.right===w.right?v:w})}},[]),h=g=>{s.current?.scrollBy({left:g==="left"?-200:200,behavior:"smooth"})},p=g=>{const{active:b,over:m}=g;console.log("active=",b,"over=",m),b.id!==m.id&&t(x=>{const v=x.findIndex(k=>k.id===b.id),w=x.findIndex(k=>k.id===m.id);return wt(x,v,w)})};return c.useEffect(()=>{f();const g=s.current;return g?.addEventListener("scroll",f),window.addEventListener("resize",f),()=>{g?.removeEventListener("scroll",f),window.removeEventListener("resize",f)}},[e,f]),c.useEffect(()=>{const g=setTimeout(()=>{const b=s.current?.querySelector(`[data-tab-id="${o}"]`);if(b){const{offsetLeft:m,offsetWidth:x}=b;d({left:m,width:x})}},0);return()=>clearTimeout(g)},[o,e]),a.jsxs("div",{className:"relative flex items-center justify-between ",children:[i.left&&a.jsx("button",{onClick:()=>h("left"),className:"absolute left-0 z-10 p-1 border border-gray-200 dark:border-gray-700 text-gray-500 dark:text-gray-400 bg-white dark:bg-zinc-900 dark:hover:!text-white hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full group",children:a.jsx(Co,{className:"w-5 h-5 fill-current"})}),a.jsx(vr,{onDragEnd:p,children:a.jsx("div",{ref:s,className:"MemoTabs relative flex items-center overflow-x-scroll scrollbar-hide whitespace-nowrap",children:a.jsx(gr,{items:e.map(g=>g.id),strategy:Oa,children:a.jsx(Ft,{children:e.map(g=>a.jsx(Z.div,{layout:!0,initial:{opacity:0,scale:.8},transition:{type:"spring",stiffness:350,damping:30},animate:{opacity:1,scale:1},exit:{opacity:0,width:0,paddingLeft:0,paddingRight:0,transition:{duration:.3}},children:a.jsx(ai,{tabInfo:g,handleCloseTab:n,isActive:g.id===o})},g.id))})})})}),a.jsxs("div",{className:"flex items-center",children:[i.right&&a.jsx("button",{onClick:()=>h("right"),className:"z-10 p-1 border border-gray-200 dark:border-gray-700 text-gray-500 dark:text-gray-400 bg-white dark:bg-zinc-900 dark:hover:!text-white hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full group",children:a.jsx(jo,{className:"w-5 h-5 fill-current"})}),e.length>0&&a.jsx("button",{onClick:r,className:"ml-2 mr-2 p-1.5 text-gray-500 dark:text-gray-400 hover:text-gray-800 dark:hover:text-white hover:bg-gray-200 dark:hover:bg-gray-700 rounded-md",title:"Close all tabs",children:a.jsx(Xn,{className:"w-4 h-4"})})]})]})};function li(e,t,n,r,o){const s=n?.uid,[i,l]=c.useState(()=>{try{const b=localStorage.getItem(`openTabs_${s}`);return b?JSON.parse(b):[]}catch(b){return console.error("Failed to parse openTabs from localStorage",b),[]}}),u=c.useRef(),d=vt(),f=Pt(),h=c.useCallback(async b=>{if(e&&r&&r!=="insert"&&d.pathname!=="/m"&&d.pathname!=="/home"){const m={id:r,path:d.pathname,icon:null,rootDb:t,title:b?.title};if(d.pathname.startsWith("/m/sheet/")){const x=await fe(`memo_sheet/${n?.uid}/${r}/title`);m.title=x}else r==="sheet"&&(m.title="Main Sheet");!i.some(x=>x.id===m.id)&&u.current!==r?(u.current=r,l(x=>[...x,m])):(u.current="",l(x=>x.map(v=>v.id===m.id?{...v,title:m.title||v.title}:v)))}},[o,e]);c.useEffect(()=>{o&&h(o)},[o,e]),c.useEffect(()=>{if(s)try{localStorage.setItem(`openTabs_${s}`,JSON.stringify(i))}catch(b){console.error("Failed to save openTabs to localStorage",b)}},[i,s]);const p=c.useCallback((b,m)=>{b?.preventDefault(),b?.stopPropagation(),u.current="";const x=i.findIndex(w=>w.id===m.id),v=i.filter(w=>w.id!==m.id);if(l(v),d.pathname.includes(m.id)){const w=v.length>0?v[Math.max(0,x-1)].path:`/${t==="memo"||t==="sheet"?"m":t}`;f(w,{relative:"path"})}},[i,d.pathname,t,f]),g=c.useCallback(()=>{u.current="",l([]),f(`/${t==="memo"||t==="sheet"?"m":t}`)},[t,f]);return{openTabs:i,setOpenTabs:l,handleCloseTab:p,handleCloseAllTabs:g}}const ci=()=>{const e=Pt(),{user:t}=_e(),n=Zr(eo),[r,o]=c.useState(!1),s=c.useRef(0),i=vt(),{rootDb:l,memoId:u}=c.useMemo(()=>{const N=i.pathname,T=N.startsWith("/m/sheet")?"sheet":N.startsWith("/m")?"memo":N.startsWith("/home")?"home":N.startsWith("/bible")?"bible":"default",S=N.split("/").pop()||"";return{rootDb:T,memoId:S}},[i.pathname]),d=i?.state?.reflash===!0,f=Bt(),{ui:h}=to(),[p,g]=Wn(no),{memoDetailData:b,isLoading:m,onBookmark:x}=ts(l,t,u,g),{openTabs:v,setOpenTabs:w,handleCloseTab:k,handleCloseAllTabs:M}=li(n,l,t,u,b);c.useEffect(()=>{d&&f.invalidateQueries({queryKey:["memoDetail",l,t?.uid,u]})},[d,i.pathname,f,l,t?.uid,u]);const E=c.useCallback(()=>{const N=window.pageYOffset||document.documentElement.scrollTop;o(N>s.current),s.current=N<=0?0:N},[]);return c.useEffect(()=>{const N=()=>{const T=window.pageYOffset||document.documentElement.scrollTop;T>s.current?o(!1):o(!0),s.current=T<=0?0:T};return window.addEventListener("scroll",N),()=>{window.removeEventListener("scroll",N)}},[E]),c.useEffect(()=>{t===null&&i.pathname!=="/m"&&e("/m")},[t]),a.jsxs(a.Fragment,{children:[n&&a.jsx("div",{className:`sticky ${r?"top-18":"top-1"} z-1000 rounded-t-md bg-gray-50/70 dark:bg-zinc-800/70 backdrop-blur-sm shadow-sm`,children:a.jsx(ii,{openTabs:v,setOpenTabs:w,handleCloseTab:k,handleCloseAllTabs:M,activeId:u})}),a.jsx(oi,{rootDb:l,ui:h,user:t,memoId:u,memoDetailData:b,isLoading:m,onBookmark:x,handleCloseTab:k})]})},ki=Object.freeze(Object.defineProperty({__proto__:null,default:ci},Symbol.toStringTag,{value:"Module"}));export{br as M,xr as T,yr as a,Zo as b,Si as c,ki as d,ji as f,Ci as s,Qo as u};
