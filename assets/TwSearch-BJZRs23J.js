import{k as y,bA as L,j as s,L as o,bB as T,m as d,f as M,t as w,r as a,bC as R,R as E,c as I,bD as k}from"./index-DJthDwo5.js";import q from"./TwDetail-DVElMjD0.js";import{T as v}from"./TwSearchBox-BvG91mxn.js";import"./AniButton-Bg22Xar8.js";import"./Button-CVPX095_.js";const C=({uid:r,state:e})=>{const t=y({queryKey:["blogMainSearch",e&&e?.s?e.s:""],queryFn:()=>L(e?.s,r===d?d:"")});return t.isLoading?s.jsx(o,{}):t.error?s.jsxs("div",{children:["Error: ",t.error.message]}):s.jsx(T,{query:t,index:"1",s:e&&e?.s?e.s:"",sx:{mt:2}})};function Q(){const r=M(),e=r.state,{user:t}=w(),x=a.useRef(e===null?"":e.s),[c,h]=a.useState(),[f]=R(),j=f.get("g"),[p,g]=a.useState(),[b,l]=a.useState(!0),u=j==="h"?"home":"memo";return a.useEffect(()=>{const D=async m=>{if(m!==""){const S=await k(u,t?.uid,m,x.current);g(S),l(!1)}};l(!0);const i=r.pathname.split("/"),n=i.length>2?i[i.length-1]:"";h(n),n!=null&&n!=="search"&&D(n)},[r.pathname]),s.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",alignContent:"center",justifyContent:"center"},children:s.jsxs(a.Suspense,{fallback:s.jsx(o,{}),children:[s.jsx(E,{children:s.jsx(I,{path:"/:memoId",element:s.jsx(q,{rootDb:u,isLoading:b,memoDetailData:p})})}),c==="search"?s.jsx(v,{state:e,gubun:"tw"}):"",t===null?s.jsx(o,{}):c==="search"&&e!==null&&e?.s!==""&&s.jsx(a.Suspense,{fallback:s.jsx(o,{}),children:s.jsx(C,{index:"1",uid:t?.uid,state:e})})]})})}export{Q as default};
