import{y as x,p as b,i as B,z as p,A as y,E as f,G as g,j as s,v as j,D as _}from"./index-35F3cCEr.js";import{H as m}from"./HtmlText-DtnCc-IH.js";import{G as k}from"./Grid-Bm-SnkIr.js";const h=()=>{const c=x(),{user:e}=b(),o=B({queryKey:["bibleBookmarks",e?.uid],queryFn:()=>n(),enabled:!!e?.uid});async function n(){if(!e?.uid)return null;const t=p(y,`bible_mark/${e.uid}`),r=await f(t);if(r.exists()){const l=r.val(),a=l?Object.values(l).filter(i=>i.bookmark==="Y"):[];return a.sort((i,d)=>i.id.split("_")[0]-d.id.split("_")[0]||i.id.split("_")[1]-d.id.split("_")[1]||i.cd3-d.cd3||i.cd4-d.cd4),console.log("getBookmarkData.result=",a),a}else return[]}return{query:o,setBibleBookmark:t=>{if(e==null){console.error("사용자 정보가 없어 북마크를 설정할 수 없습니다.");return}console.log("setBibleBookmark.item=",t);let r="N";(t.bookmark===void 0||t.bookmark==="N")&&(r="Y");const l={...t,bookmark:r},a=`bible_mark/${e.uid}/${t.id}`;console.log("setBibleBookmark.locate=",a),g(a,r==="N"?null:l),console.log("setBibleBookmark.updatedItem=",r,l),c.invalidateQueries({queryKey:["bibleBookmarks",e.uid]})}}},D=()=>{const{query:c}=h(),e=c.data;return e?s.jsxs(s.Fragment,{children:[e.map((o,n)=>{const u=o.id.split("_"),t=`${u[0]}_${u[1]}_${u[2]}`;return s.jsxs(k,{container:!0,spacing:2,columns:{xs:5,sm:7,md:10,lg:12},id:`id_${n+1}`,children:[s.jsx(k,{item:!0,xs:1,md:1,children:s.jsx(j,{to:`/bible/${t}`,state:{cd4:o.cd4},children:o.nm})}),s.jsxs(k,{item:!0,xs:4,sm:6,md:9,lg:11,children:[s.jsx(m,{show:!0,text:o.ko}),s.jsx("div",{className:"text-sm text-red-600 dark:text-gray-700",children:s.jsx(m,{show:!0,text:o.en})})]})]},n)}),s.jsx(_,{})]}):null};export{D as B,h as u};
