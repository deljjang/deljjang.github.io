const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/App-ai_KYhla.js","assets/index-D_uTceCe.js","assets/index-CQ_iAh1R.css","assets/App-DH5BMUk4.css"])))=>i.map(i=>d[i]);
import{r as m,j as t,R as S,_}from"./index-D_uTceCe.js";import{h as V,a as G,l as J,i as O,c as E,k as I,T as H,H as Y}from"./App-ai_KYhla.js";import{T as q}from"./LinkItem-BCniLNlh.js";import{T as z}from"./TitleItem-QHTuL5Nk.js";import{u as U,B as W}from"./BibleBookmarkText-t4ZGyqPD.js";const K=e=>{const{t:d}=E(),f=new Array;if(e.data===void 0||e.data===null)return;const s=e.bibleId.split("_");for(let i=1;i<=e.data.cd3;i++){const a={nm:`${e.data.nm2}${i}${d("chapter")}`,key:e.data.id+"_"+i};f.push(a)}return s&&s.length===3?t.jsxs("div",{className:"flex items-center flex-col mb-8 text-lg font-semibold",children:[e.nm," ",s[2]," ",d("chapter")]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex items-center flex-col mb-8 text-lg font-semibold",children:e.nm}),t.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-10 lg:grid-cols-12 gap-4",children:f.map((i,a)=>t.jsx("div",{children:t.jsx(H,{to:`/bible/${i.key}`,children:i.nm})},a))})]})},Q=e=>{const d=e.dataText;if(e.data===void 0||e.data===null||d==null)return;const f=e.bibleId.split("_");return e.bibleId&&f.length!==3?t.jsx(t.Fragment,{}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex items-center flex-col mb-8 text-lg font-semibold",children:e.nm}),d.map((s,i)=>{e.cd4+"",s.cd4;const a=e.bookmark?.data?.filter(l=>l.id===s.id&&l.bookmark==="Y");return a&&a.length>0&&(s.bookmark="Y"),t.jsxs("div",{className:"grid grid-cols-5 sm:grid-cols-6 md:grid-cols-10 lg:grid-cols-12 gap-4",id:`id_${i+1}`,children:[t.jsx("div",{className:"col-span-1",children:t.jsxs("div",{className:`flex ${e.cd4+""===s.cd4?"text-orange-500":"text-gray-900 dark:text-white"}`,children:[t.jsx(q,{className:"items-center text-top cursor-pointer",onClick:()=>e.onBookmark(s),children:s.nm}),a&&a.length>0&&t.jsx("svg",{className:"w-5 h-5 text-red-500 ml-1",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})})]})}),t.jsx("div",{className:"col-span-4 sm:col-span-5 md:col-span-9 lg:col-span-11",children:t.jsx("div",{className:e.cd4+""===s.cd4?"text-orange-500":"text-gray-900 dark:text-white",children:t.jsx(Y,{text:s.text})})})]},i)})]})},it=()=>{const[e,d]=m.useState(null),[f,s]=m.useState(!0),{query:i,setBibleBookmark:a}=U(),l=m.useRef(),{bibleId:r}=V(),k=G(),[T,B]=m.useState(!1),[p,w]=m.useState(!1),{user:R}=J(),h=k?.state?.word,g=k?.state?.cd4,L=O(),{t:y,i18n:C}=E();m.useEffect(()=>{if(r!==void 0){(async()=>{const x=await F(r,h);d(x),s(!1)})(),B(!1),w(!0);const n=r.split("_");if(l.current&&n.length===3){const x=l.current.cd3;B(Number(n[2])!==1),w(n[2]<x)}}},[r,h]),m.useEffect(()=>{g!==void 0&&setTimeout(()=>{D("","id_"+g)},1500)},[e,g]);const D=(o,n)=>{const x=document.getElementById(n);x&&x.scrollIntoView({block:"center",behavior:"smooth"})},A=o=>{R!==void 0&&a(o)},F=async(o,n)=>{if(o===""||o===void 0)return"";const M=(C.language.split("-")[0]==="en"?await _(()=>import("./bibleJson_en-OyZMwajI.js"),[]):await _(()=>import("./bibleJson-mLacnG04.js"),[])).default,$=(await _(()=>import("./App-ai_KYhla.js").then(c=>c.cb),__vite__mapDeps([0,1,2,3]))).default,b=o.split("_");if(b.length<1)return;b.length>1&&M.map(c=>{c.id===b[0]+"_"+b[1]&&(l.current=c)});const j=new Array;if(b.length===3){for(let c in $){if(!c.includes(o+"_"))continue;let u=$[c];u.id=c;let v=u.txt;if(n!==void 0){const P=new RegExp(n,"gi");v=v.replace(P,`<span class='lightext'>${n}</span>`)}u.nm=`${l.current.nm2}${b[2]}:${u.cd4}`,u.text=v,j.push(u)}return j.sort((c,u)=>c.cd4-u.cd4),j}};if(r==="")return t.jsx(t.Fragment,{});const N=o=>{let n=r.split("_");n[2]=Number(n[2])+o,L(`/bible/${n[0]}_${n[1]}_${n[2]}`)};return t.jsxs(S.Fragment,{children:[t.jsx("div",{id:"back-to-top-anchor"}),t.jsx(W,{}),t.jsx(z,{children:l.current!==null&&l.current!==void 0&&l.current.nm!==null?l.current.text:""}),t.jsx(K,{data:l.current,bibleId:r}),t.jsx(Q,{dataText:e,data:l.current,searchWord:h,bibleId:r,cd4:g,bookmark:i,onBookmark:A}),t.jsxs(Container,{sx:{p:0},children:[f&&t.jsx(Box,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:t.jsx(CircularProgress,{sx:{mt:5}})}),r&&r.split("_").length===3?t.jsx(Box,{sx:{display:"flex",justifyContent:"space-between",mt:5},children:t.jsxs(Grid,{container:!0,spacing:1,children:[T?t.jsx(Grid,{item:!0,xs:p?6:12,children:t.jsx(I,{type:"button",variant:"outlined",onClick:()=>N(-1),fullWidth:!0,children:`< ${y("prev")}`})}):"",p?t.jsx(Grid,{item:!0,xs:T?6:12,children:t.jsx(I,{type:"button",variant:"outlined",onClick:()=>N(1),fullWidth:!0,children:`${y("next")} >`})}):""]})}):""]})]})};export{it as BibleDetail,it as default};
