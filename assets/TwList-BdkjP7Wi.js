import{q as d,a as x,f as m,g as f,e as h,m as b,o as v,j as a,aN as j,b0 as p,H as N}from"./index-MJDW0IY0.js";import{H as y}from"./HtmlCode-DQ1nBhYC.js";async function w(e,n=""){if(e==null||e==="")return"";let r=n===""?`memo/${e}`:`memo_txt/${e}`;e==="home"&&(r="home/");const s=d(x(m,r)),t=await f(s);if(!t.exists()){console.log("getFireData.null");return}if(!t.exists()){console.log("getTreeMemoData.exists");return}const o=t.val(),c=[];for(let i in o){const l=o[i];l.up===void 0?(l.id=i,l.fullIndex=i):(l.id=l.up,l.fullIndex=l.up),n===""||n===void 0?(l.sub!==null&&(l.children=g(l,l.up)),c.push(l)):(i==="-OZNT48PGjAjZLiXNY8F"&&console.log("blogMainSearch.data[i]=",o[i]),l.id=i,(l.memo+"").toLowerCase().indexOf(n.toLowerCase())>-1&&c.push(l))}return c.sort((i,l)=>i.title>l.title?1:-1),c}function g(e,n){const r=[];if(e===void 0||e.sub===void 0)return r;for(let s in e.sub){let t=e.sub[s];t.id=s,t.key=s}return Object.values(e.sub).sort((s,t)=>t.title-s.title).map(s=>{s.id=s.key,s.fullIndex=n+"/sub/"+s.key,s.sub!==null&&(s.children=g(s,s.fullIndex)),r.push(s)}),r}async function M(e){const n=b[e],r=d(x(m,"home_txt"),v("gbn"),h(n.id)),s=await f(r);if(!s.exists()){console.log("getFireData.null");return}const t=s.val(),o=[{title:"React",url:"-Nn8_VCOrqSvLCqp89KJ"},{title:"Android",url:"-NnHx-gx3DMgMWLvIW8F"},{title:"JAVA",url:"-Nn8cfz1D61YG_M_911F"},{title:"그림 / 사진",url:"-NnHs-GndQ5y00GDI_rN"},{title:"MUI",url:"-NnBulBVEYke6NAxzIHY"}],c=[];for(let i in t)o.filter(u=>u.url===i).length>0||(t[i].url=i,c.push(t[i]));return c.sort((i,l)=>i.title>l.title?1:-1),c}async function T(e,n){const r=d(x(m,"home_txt")),s=await f(r);if(!s.exists()){console.log("getFireData.null");return}const t=s.val(),o=[];for(let i in t)if(t[i].url=i,t[i].id=i,t[i].g="h",e===""||e===void 0)o.push(t[i]);else{const l=t[i].memo+"",u=t[i].title+"";(l.toLowerCase().indexOf(e.toLowerCase())>-1||u.toLowerCase().indexOf(e.toLowerCase())>-1)&&o.push(t[i])}if(n==null||n===""||e==="")return o.sort((i,l)=>i.title>l.title?1:-1),o;const c=await w(n,e);return o.push(...c),o.sort((i,l)=>i.title>l.title?1:-1),o}const $=({query:e,s:n,lnk:r="tw/search",index:s})=>a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-2",children:e.data.map((t,o)=>(t.key=o,a.jsx(L,{lnk:r,post:t,s:n,index:o},t.key)))});function L({post:e,s:n,lnk:r}){const s=e.g==="m"?a.jsx("span",{className:"menu-item-icon-size menu-item-icon-active",children:a.jsx(j,{})}):null,t=r==="blog"?`/${r}/${e.url?e.url:e.id}`:`/${r}/${e.url?e.url:e.id}?s=${n}&g=${e.g?e.g:"m"}`;return a.jsx(p,{to:t,state:{s:n},className:"no-underline",children:a.jsx(C,{title:e.title,icon:s,children:a.jsx("div",{className:"max-h-[140px] overflow-hidden mt-1 text-gray-500 text-theme-sm dark:text-gray-400",children:e.html==="N"?a.jsx(y,{postData:e.memo}):e.memo!==null&&a.jsx(N,{text:e.memo,runHighlight:!1})})})},e.key)}const C=({title:e,children:n,className:r="",desc:s="",icon:t=null})=>a.jsxs("div",{className:`rounded-2xl border border-gray-200 
      bg-white dark:border-gray-800 dark:bg-white/[0.03] 
      overflow-hidden ${r}`,children:[a.jsxs("div",{className:"flex flex-col px-4 py-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[t&&a.jsx("span",{className:"flex-shrink-0",children:t}),a.jsx("h3",{className:"text-base font-medium text-gray-800 dark:text-white/90",children:e})]}),s&&a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:s})]}),a.jsx("div",{className:"p-4 border-t bg-stone-100 dark:bg-stone-950 border-gray-100 dark:border-gray-800 sm:p-6",children:a.jsx("div",{children:n})})]});export{$ as T,M as a,T as b};
