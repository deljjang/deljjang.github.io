import{j as e,v as u,k as D,c as b,r,aP as L,R as M,y as R}from"./index-C3_Lifs7.js";import{T as v}from"./Footer-BcGKYQJ1.js";import{L as a}from"./Loading-mfHyZKuE.js";import{u as w}from"./useQuery-BvsZFef-.js";import{b as E,T as I}from"./TailList-BDJPnsDc.js";import k from"./TwDetail-CKl0zSDH.js";import{f as q}from"./fireMemoDetail-p3GtJUgo.js";import{T as F}from"./TwSearchBox-BlJBm4hG.js";import"./Divider-DVFL7sWD.js";import"./dividerClasses-DQKp_d_P.js";import"./Link-CASMCxAc.js";import"./Container-BAHHCrP5.js";import"./styled-CribepmI.js";import"./CircularProgress-s-d2AHUD.js";import"./useBaseQuery-mvkTKycv.js";import"./HtmlCode-Dmp9Rhsm.js";import"./copy-DH3rd0Bw.js";import"./TwBadge-GdjY-hcZ.js";import"./toPropertyKey-DCwh5dYN.js";import"./SinyImageList-a1RUfV7l.js";import"./index-Chjiymov.js";import"./ImageListItem-CpIiqBZI.js";import"./isMuiElement-6RsNi9Zm.js";import"./ComponentCard-DFR1M21J.js";import"./CodeText-VF-dpUwZ.js";import"./commonUtil-DMYaEvvO.js";import"./AniButton-DQHglgsG.js";import"./Button-BUaN3P7M.js";import"./fireDatabase-dyxKJp0n.js";import"./fireStorage-B8rXGdmC.js";const P=({uid:o,state:t})=>{const s=w({queryKey:["blogMainSearch",t&&t?.s?t.s:""],queryFn:()=>E(t?.s,o===u?u:"")});return s.isLoading?e.jsx(a,{}):s.error?e.jsxs("div",{children:["Error: ",s.error.message]}):e.jsx(I,{query:s,index:"1",s:t&&t?.s?t.s:"",sx:{mt:2}})};function pt(){const o=D(),t=o.state;console.log("TailSearch.state=",t);const{user:s}=b(),d=r.useRef(t===null?"":t.s),[m,f]=r.useState(),[x]=L(),h=x.get("g"),[j,g]=r.useState(),[S,c]=r.useState(!0),l=h==="h"?"home":"memo";return r.useEffect(()=>{const y=async p=>{if(p!==""){const T=await q(l,s?.uid,p,d.current);g(T),c(!1)}};c(!0);const n=o.pathname.split("/"),i=n.length>2?n[n.length-1]:"";f(i),i!=null&&i!=="search"&&y(i)},[o.pathname]),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",alignContent:"center",justifyContent:"center"},children:[e.jsxs(r.Suspense,{fallback:e.jsx(a,{}),children:[e.jsx(M,{children:e.jsx(R,{path:"/:memoId",element:e.jsx(k,{rootDb:l,isLoading:S,memoDetailData:j})})}),m==="search"?e.jsx(F,{state:t,gubun:"tw"}):"",s===null?e.jsx(a,{}):m==="search"&&t!==null&&t?.s!==""&&e.jsx(r.Suspense,{fallback:e.jsx(a,{}),children:e.jsx(P,{index:"1",uid:s?.uid,state:t})})]}),e.jsx(v,{})]})}export{pt as default};
