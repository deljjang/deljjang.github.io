const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-q621KYmg.js","assets/index-CoWIuthT.js","assets/index-BPWe563P.css","assets/createSvgIcon-BpRWgQJ1.js","assets/useControlled-BtrcxIvz.js","assets/ownerWindow-DvT1GKkC.js","assets/isMuiElement-BIEwDL61.js","assets/fireDatabase-daKzXSTI.js","assets/fireStorage-DveXoABh.js","assets/SinyDate-DCb-4IVy.js","assets/Grid-BPWurh0Y.js","assets/useTheme-D1ObzPAN.js","assets/index-PgV1IpJJ.js","assets/index-Chjiymov.js","assets/Menu-CvdH2E5s.js","assets/useSlotProps-BqQJHETU.js","assets/resolveComponentProps-Dk6m_fSK.js","assets/utils-mqAW2Fc6.js","assets/IconButton-uwgx-ygH.js","assets/TextField-kRSu7HUx.js","assets/InputAdornment-Dt0QJFWL.js","assets/Popper-CJilRAMK.js","assets/Button-CQWJT_5P.js","assets/Chip-xyoyEiIL.js","assets/index.esm-BX4m8N_q.js","assets/TwButton-Dm1dt4g4.js","assets/Loading-BtD4c6Hg.js","assets/Container-DZ1UVo58.js","assets/styled-apW6rL1w.js","assets/CircularProgress-DIMFkZSv.js","assets/Divider-DWcVIiOj.js","assets/dividerClasses-CeIIVvDs.js","assets/index-Cmdt2tIm.css","assets/TwMemoMain-D1MUXNEc.js","assets/IpInfo-VN9m42j4.js"])))=>i.map(i=>d[i]);
import{r as d,u as J,j as e,c as z,T as Ye,q as we,e as He,o as qe,a as ke,f as ye,g as be,i as ue,k as se,l as Oe,v as We,H as Je,n as Ce,t as Ne,_ as $e,h as Ve,x as ze,R as Ge,y as V}from"./index-CoWIuthT.js";import{u as Ke}from"./useSuspenseQuery-D5Zl86JW.js";import{L as _}from"./Loading-BtD4c6Hg.js";import{T as Qe}from"./Footer-DeciVAm5.js";import{a as Ze,T as X}from"./TwLinkItem-Pvt-iOO8.js";import{g as Se,s as F}from"./fireDatabase-daKzXSTI.js";import{D as Te,g as De,S as Le,T as Re,H as ge}from"./HtmlCode-xGOsiKi1.js";import{E as Xe,C as et}from"./ExpandMore-9_BcZOHG.js";import{F as Ie}from"./Favorite-DVBerJME.js";import{u as he,a as xe,F as tt,b as st,D as Fe,l as ot,I as nt,s as ee,d as te,e as Ee}from"./index-q621KYmg.js";import{S as at}from"./SinyImageList-2cTkvJbF.js";import{c as rt}from"./CodeText-o73ztkps.js";import{s as fe}from"./commonUtil-BDYb5XYI.js";import{T as R}from"./TwButton-Dm1dt4g4.js";import{C as lt}from"./CircularProgress-DIMFkZSv.js";import{D as it}from"./datetime-BDx6lZXm.js";import{u as Pe}from"./index.esm-BX4m8N_q.js";import{T as pe}from"./TwCheckbox-LXHUPe1k.js";import{T as Be}from"./TwTextArea-gPl_bf0n.js";import{T as I}from"./TwBadge-BRbfJe7g.js";import"./SinyDate-DCb-4IVy.js";import{T as O}from"./TwInput-CtITmncJ.js";import{T as _e}from"./TwSelect-DBXTjMfz.js";import{T as Me}from"./TwDatePicker-B8W6WsGN.js";import{d as W,e as Ue,f as ct,h as dt}from"./fireStorage-DveXoABh.js";import{f as mt}from"./fireMemoDetail-BcpmG-wn.js";import{S as ut}from"./check-circle-D5VBwHXy.js";import"./useBaseQuery-C3VxzFbR.js";import"./Container-DZ1UVo58.js";import"./styled-apW6rL1w.js";import"./Divider-DWcVIiOj.js";import"./dividerClasses-CeIIVvDs.js";import"./Link-DpyYoJ5U.js";import"./copy-DYJeQoOB.js";import"./toPropertyKey-DCwh5dYN.js";import"./createSvgIcon-BpRWgQJ1.js";import"./useControlled-BtrcxIvz.js";import"./ownerWindow-DvT1GKkC.js";import"./isMuiElement-BIEwDL61.js";import"./IconButton-uwgx-ygH.js";import"./index-Chjiymov.js";import"./ImageListItem-CWTYcDun.js";import"./Grid-BPWurh0Y.js";import"./useTheme-D1ObzPAN.js";import"./index-PgV1IpJJ.js";import"./Menu-CvdH2E5s.js";import"./useSlotProps-BqQJHETU.js";import"./resolveComponentProps-Dk6m_fSK.js";import"./utils-mqAW2Fc6.js";import"./TextField-kRSu7HUx.js";import"./InputAdornment-Dt0QJFWL.js";import"./Popper-CJilRAMK.js";import"./Button-CQWJT_5P.js";import"./Chip-xyoyEiIL.js";const gt=o=>d.createElement("svg",{viewBox:"0 0 24 24",width:"1em",height:"1em",...o},d.createElement("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z",fill:"currentColor"})),ht=o=>d.createElement("svg",{viewBox:"0 0 24 24",fill:"none",width:"1em",height:"1em",xmlns:"http://www.w3.org/2000/svg",...o},d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z",fill:"currentColor"}));function xt({initTreeData:o}){const[s,u]=d.useState(),t=j=>u(j),v=J();if(d.useEffect(()=>{u(o)},[o]),s==null||s.length===0)return e.jsx(_,{});const C=j=>{console.log("node",j),v(`/m/${j.id}`)};return e.jsx(Te,{backend:Le,options:De(),children:e.jsx(Re,{tree:s,rootId:"root",onDrop:t,render:(j,{depth:x,isOpen:l,onToggle:g})=>e.jsxs("div",{className:"w-60 flex items-center justify-between hover:bg-gray-300 dark:hover:bg-gray-700 rounded-sm ",style:{paddingLeft:x*20+(j.cnt===0?5:0)},children:[e.jsxs("div",{className:"flex items-center",children:[j.cnt>0&&e.jsx("div",{onClick:g,children:l?e.jsx(Xe,{}):e.jsx(et,{})}),e.jsx("div",{className:"cursor-pointer",onClick:()=>C(j),children:j.text})]}),j.cnt>0&&e.jsxs("div",{className:"text-gray-500 text-sm",children:["(",j.cnt,")"]})]})})})}function ft(o){const{user:s}=z(),u=J(),[t,v]=d.useState(),[C,j]=d.useState(),x=async l=>{const g=[],m=we(ke(ye,`memo_tree/${l}`),qe("bm"),He("Y")),y=await be(m);if(!y.exists()){console.log("getFireData.null");return}const $=y.val();for(let N in $){const f=$[N];f.id=N,f.key=N,f.text=f.title,g.push(f)}g.sort((N,f)=>N.title>f.title?1:-1),v([...g])};return d.useEffect(()=>{s!==void 0&&s!=null&&x(s?.uid)},[s]),d.useEffect(()=>{const l=async(g,m)=>{const y=[...m];if(m)for(const $ of m){let N=$;for(;N.parent!=="root";){N.parent,N=await Se(`memo_tree/${g}/${N.parent}`);const f={id:N.key,text:N.title,droppable:!1,parent:N.parent};y.filter(w=>w.id===f.id).length===0&&y.push(f)}}for(const $ of y){const N=$.id;$.cnt=y.filter(f=>f.parent===N).length}j(y)};t&&t.length>0&&l(s?.uid,t)},[t]),s===void 0?e.jsx(e.Fragment,{}):e.jsxs("div",{className:"tail-bookmark justify-items-center flex items-center flex-col w-full",children:[e.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"}),e.jsx(Ye,{children:"BookMark"}),e.jsx("div",{className:`tail-bookmark 
        grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-1 
        justify-items-center 
        w-full`,children:t&&t.map((l,g)=>e.jsx("div",{children:e.jsx("button",{className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 cursor-pointer",onClick:()=>{o.onSelected(l.key),u(`/m/${l.key}`)},children:e.jsx("span",{className:"text-base",children:l.title})})},g))}),e.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"}),e.jsx(d.Suspense,{fallback:e.jsx(_,{}),children:e.jsx(xt,{initTreeData:C,uid:s?.uid})})]})}const vt=o=>e.jsxs("div",{className:"flex-grow my-4 w-full grid grid-cols-3 gap-1 items-center content-center justify-center text-center whitespace-nowrap",style:{gridTemplateColumns:`70px 70px 70px ${o.master?"70px":""}`},children:[o.master&&e.jsx(R,{size:"sm",variant:"outlined",color:"success",onClick:o.onUtil,children:"유틸"}),e.jsx(R,{size:"sm",variant:"outlined",color:"success",onClick:o.onEdit,children:"수정"}),e.jsx(R,{size:"sm",variant:"outlined",color:"warning",onClick:o.onNewMemo,children:"새글"}),e.jsx(R,{size:"sm",variant:"outlined",color:"error",onClick:o.onDelete,children:"삭제"})]}),pt=o=>{const{rootDb:s,isLoading:u,memoDetailData:t,onBookmark:v,onTreeUpdate:C,searchWord:j}=o,{scrollYProgress:x}=he(),l=xe(x,{stiffness:100,damping:30,restDelta:.001}),g=J(),{memoId:m}=ue(),$=se()?.state?.fullIndex,{user:N}=z(),f=()=>{const c=`/${s==="memo"?"m":s}/edit/${m}`;g(c,{state:{fullIndex:$}})},i=()=>{const c=`/${s==="memo"?"m":s}/util/${m}`;g(c,{state:{fullIndex:$}})},w=()=>{const c=`/${s==="memo"?"m":s}/insert/${m}`;g(c,{state:{fullIndex:$}})},r=async()=>{const c=s==="memo"?`${s}_txt/${N.uid}/${m}`:`${s}_txt/${m}`,k=s==="memo"?`${s}_tree/${N.uid}/${m}`:`${s}/${m}`;await st(c,k)!==void 0&&(C(),g(`/${s==="memo"?"m":s}`))},p=()=>{window.confirm(`하위 자료가 있는 경우 같이 삭제됩니다.
삭제하시겠습니까?`)&&r()};return d.useEffect(()=>{t&&t.title!==void 0&&fe({title:t.title,description:t.title});function c(){window.scrollTo({top:0}),t&&t.html!=="N"&&document.querySelectorAll("pre").forEach(k=>{k.innerHTML=rt(k.innerHTML)})}t&&t.memo!==null&&(c(),t.image&&t.image.map((k,T)=>(console.log("image."+T+"=",k.key),k)))},[t]),u?e.jsx(_,{}):m===""||N===void 0?e.jsx(e.Fragment,{}):e.jsxs("div",{children:[e.jsx(Oe.div,{className:"progress-bar",style:{scaleX:l}}),e.jsxs("div",{className:`grid grid-cols-3 
				items-center w-full 
				dark:bg-stone-950 rounded-md shadow-sm 
				dark:shadow-stone-800 shadow-stone-900`,children:[e.jsx("div",{}),e.jsx("div",{className:"flex justify-center",children:t&&t.title}),e.jsxs("div",{className:"text-right justify-end mr-3.5",children:[e.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"bookmark",onClick:v,children:t&&t.bookmark==="Y"?e.jsx(Ie,{className:"text-red-500"}):e.jsx(tt,{className:"text-gray-600 dark:text-gray-400"})}),e.jsx("div",{className:"text-right mb-3 text-sm text-red-400",children:t?.path&&t?.path.map((c,k)=>k===0?c?.text:` > ${c?.text}`)})]})]}),e.jsxs("div",{className:"w-full p-0 m-0",children:[e.jsx(vt,{master:N?.uid===We,rootDb:s,onEdit:f,onUtil:i,onNewMemo:w,onDelete:p,bookmark:t&&t.bookmark}),e.jsxs("div",{className:"my-4",children:[t&&t.html==="N"?e.jsx(ge,{postData:t&&t.memo,highlightWord:j}):t&&t.html!=="N"&&t.memo&&e.jsx(Je,{text:t.memo}),e.jsx(at,{imageList:t&&t.image}),!t&&e.jsx("div",{className:"flex flex-col items-center",children:e.jsx("div",{className:"mt-12",children:e.jsx(lt,{})})})]})]})]})},Ae=({onSubmit:o,onCancel:s,isSubmitting:u,newMode:t=!1})=>e.jsxs("div",{className:"flex justify-end mb-1.5 gap-1",children:[e.jsxs(R,{variant:"outlined",color:"success",disabled:u,onClick:v=>{v.preventDefault(),o(v)},children:[t?"새글":""," 저장"]}),e.jsx(R,{variant:"outlined",color:"error",onClick:v=>{v.preventDefault(),s()},children:"취소"})]}),jt=d.lazy(()=>$e(()=>import("./index-q621KYmg.js").then(o=>o.i),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32])));ot.Quill.register("modules/imageDrop",nt);Ne.configure({languages:["javascript","ruby","python","java","cpp","kotlin","sql"]});const wt={syntax:{highlight:o=>Ne.highlightAuto(o).value},toolbar:[[{header:"1"},{header:"2"},{header:"3"},{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","video"],["clean"],["code-block"]],imageDrop:!0,clipboard:{matchVisual:!1}},kt=["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","video","clean","code-block","code-custom"],yt=o=>{const[s,u]=d.useState(o.imageList),[t,v]=d.useState(o.htmlCheck==="Y"),[C,j]=d.useState(o.iconCheck==="Y"),[x,l]=d.useState(o.newMode?"":o.content),[g,m]=d.useState(),y=d.useRef(),$=d.useRef(),N=d.useRef(null);d.useRef(null);const f=d.useRef(null),i=o.newMode,w=d.useRef([]),{height:r}=Ce(),p=it.now().setZone("Asia/Seoul").toFormat("yyyy-MM-dd"),c={edTitle:i?"":o.title,edGbn:o.gbn?o.gbn:"etc",edDate:i?p:o.date,content:i?"":o.content,memoTxt:i?"":o.content,htmlCheck:o.htmlCheck,iconCheck:o.iconCheck},{register:k,handleSubmit:T,trigger:E,control:L,setValue:P,getValues:Y,watch:oe,formState:{errors:ve,isSubmitting:ne}}=Pe({mode:"onChange",defaultValues:c});d.useEffect(()=>{k("edDate"),k("edGbn",{required:!0}),k("htmlCheck"),k("iconCheck"),k("memoTxt")},[]),d.useEffect(()=>{w.current=[],y.current=o.content,$.current=!1},[o.content]);const G=async a=>{i?await o.onNewSubmit(a,w.current):await o.onPostSubmit(a,s,w.current)},ae=()=>{T(G)()},re=a=>{console.log("onDelete.imageList=",a),u(a)},le=a=>{console.log("onInsert.file",a);let b=y.current;a.ext==="jpg"||a.ext==="png"?(b+=`<img src='${a.url}'/>`,h(`<img src='${a.url}'/>
`)):a.ext==="mp4"?(b+=`<video preload="auto" controls="" src='${a.url}'></video>`,h(`<video preload="auto" controls="" src='${a.url}'></video>`)):(b+=`<a src='${a.url}'>${a.name}}</a>`,h(`다운로드
<a href="${a.url}" target="_blank">${a.name}</a>
`)),y.current=b},B=a=>o.onRename(a,Y("edTitle")),A=a=>{y.current=a},ie=a=>{console.log("handleFileUpload",a),w.current=a};function ce(a){y.current=a,P("content",a),E("content")}const K=(a,b)=>{console.log(`onChecked.e.${a}=`,b),P(a,b?"Y":"N"),console.log(`onChecked.v.${a}=`,Y(a)),a==="htmlCheck"?v(b):j(b)},de=oe("content"),me=[{value:"none",label:"None"},{value:"react",label:"React"},{value:"css",label:"CSS"},{value:"android",label:"Android"},{value:"java",label:"JAVA"},{value:"image",label:"그림 / 사진"},{value:"etc",label:"기타"},{value:"mui",label:"MUI"}],n=["React","JavaScript","Bash","Html","CSS","SQL","Java","Kotlin","C++","C#","Command","Script","Python","Ruby","Go","Swift","Rust"],h=a=>{const b=N.current;if(b){const q=b.selectionStart,U=b.selectionEnd,H=x.slice(0,q),Q=x.slice(U);l(H+a+Q),P("memoTxt",H+a+Q),setTimeout(()=>{b.selectionStart=b.selectionEnd=q+a.length,b.focus()},0)}},S=a=>{h(a)},D=a=>a?/\.(jpg|jpeg|png|gif|bmp|webp|svg)/i.test(a)||a.includes("image")||a.includes("img"):!1,M=a=>new Promise((b,q)=>{const U=new Image;U.crossOrigin="anonymous",U.onload=()=>{const H=document.createElement("canvas"),Q=H.getContext("2d");H.width=U.width,H.height=U.height,Q.drawImage(U,0,0);try{const Z=H.toDataURL("image/png");console.log("convertImageToBase64.base64=",Z.substring(0,30)+"..."),b(Z)}catch(Z){q(Z)}},U.onerror=()=>{q(new Error("Failed to load image"))},U.src=a});return e.jsx("div",{className:"my-2 mb-[50px], w-full",children:e.jsxs("form",{onSubmit:T(G),style:{width:"100%",minHeight:"300px",maxHeight:{height:r},display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"flex justify-end mb-1.5 gap-1",children:[e.jsx(pe,{id:"htmlCheck",checked:t,onChange:a=>K("htmlCheck",a),label:"HTML사용"}),e.jsx(pe,{id:"iconCheck",checked:C,onChange:a=>K("iconCheck",a),label:"Icon"}),e.jsx(Ae,{onSubmit:a=>ae(),onCancel:o.onCancel,isSubmitting:ne,newMode:i})]}),e.jsx(Fe,{control:L,onDelete:re,onInsert:le,onRename:B,setContent:A,onFileUpload:ie,imageList:o.imageList}),e.jsxs("div",{className:"grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2 gap-2",children:[e.jsx("div",{className:"w-full",children:e.jsx(O,{name:"edTitle",placeholder:"제목",control:L,rules:{required:"해당 필드는 필수입니다.",minLength:{value:2,message:"2글자 이상 입력해주세요."}},onChange:a=>{a.preventDefault(),P("edTitle",a.target.value)}})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_e,{name:"edGbn",label:"구분",control:L,rules:{required:!0},placeholder:"-- 구분 --",options:me,className:"",allClassName:"max-w-40",onChange:a=>{a.preventDefault();const b=a.target.value;console.log("edGbn=",Y("edGbn")),P("edGbn",b)}}),e.jsx(Me,{id:"edDate",name:"edDate",placeholder:"Select a date",control:L,onChange:(a,b)=>{console.log({dates:a,currentDateString:b}),P("edDate",b)}})]}),e.jsx("div",{className:"flex gap-2"})]}),e.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600 my-4"}),e.jsxs("div",{className:"grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2 gap-2",children:[e.jsx("div",{className:"max-h-100 overflow-y-scroll",children:e.jsx(ge,{postData:x})}),e.jsxs("div",{children:[e.jsx(Be,{ref:N,className:"",value:x,onChange:a=>{P("memoTxt",a),l(a)},rows:20}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 xsm:grid-cols-5 sm:grid-cols-7 md:grid-cols-7 lg:grid-cols-8",children:[e.jsx(I,{className:"cursor-pointer",variant:"light",color:"success",onClick:()=>S(`<box>
</box>`),children:"<Box>"}),e.jsx(I,{className:"cursor-pointer",variant:"light",color:"success",onClick:()=>S('<a href="/data/memo/" target="_blank"></a>'),children:"Link"}),e.jsx(I,{className:"cursor-pointer",variant:"light",color:"success",onClick:()=>S('<img src="/data/memo/"></img>'),children:"img"}),e.jsx(I,{className:"cursor-pointer",variant:"light",color:"success",onClick:()=>S('<video preload="auto" controls="" src="/memo/" style="width: 100%; height: 100%;"></video>'),children:"Video"}),e.jsx(I,{className:"cursor-pointer",variant:"light",color:"success",onClick:()=>S('<hr style="width=100%"/>'),children:"line"}),n.map((a,b)=>e.jsx(I,{className:"cursor-pointer",variant:"light",color:"dark",onClick:()=>S("<code>"+a+`
</code>`),children:a},b))]})]}),Y("edUrl")&&D(Y("edUrl"))&&e.jsx("div",{className:"mt-2 p-2 border border-gray-300 dark:border-gray-600 rounded",children:e.jsx("img",{src:g,alt:"Preview",className:"max-w-full h-auto max-h-48 object-contain",onLoad:async a=>{try{const b=await M(g);P("edUrl2",b)}catch(b){console.error("Base64 conversion failed:",b)}},onError:a=>{a.target.style.display="none"}})})]}),t&&e.jsx(d.Suspense,{fallback:e.jsx("div",{children:"Loading editor..."}),children:e.jsx(jt,{ref:f,fullWidth:!0,theme:"snow",id:"content",name:"content",type:"div",value:de,style:{minWidth:"400px",border:"1px solid primary.main",minHeight:"200px",height:"400px",maxHeight:"450px"},modules:wt,formats:kt,onChange:ce})}),e.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600 my-4"})]})})},je=o=>{const{rootDb:s,isLoading:u,memoDetailData:t}=o,{scrollYProgress:v}=he();xe(v,{stiffness:100,damping:30,restDelta:.001});const C=J(),j=d.useRef(),x=d.useRef();x.current=o.searchWord;const{memoId:l}=ue(),g=se(),{user:m}=z();j.current=g.pathname.split("/")[2]==="insert",console.log("memoDetailData=",t);const y=()=>{const r=`/${s==="memo"?"m":s}/${l==="insert"?"":l}`;C(r)},$=async r=>{await W(m.uid,l,r)},N=async r=>{if(console.log("onFilePathList.fileNm=",r),r.length>0)for(let p=0;p<r.length;p++){const c=r[p];console.log("onFilePathList.file=",c);try{const k=await W(m.uid,l,c);console.log("onFilePathList.path=",k)}catch{console.log("onFilePathList.error=",c)}}else await W(m.uid,l,r)},f=async(r,p)=>{console.log("onNewSubmit.values",r);const c=await ee({rootDb:s,uid:m.uid,newData:j.current,key:l==="insert"?"root":l,values:r});if(await te(`${s}_txt`,s,c,p),c!==void 0){const k=`/${s==="memo"?"m":s}/${c}`;C(k,{state:{reflash:!0}})}},i=async(r,p)=>{const c=s==="memo"?`${s}/${m.uid}/`:`${s}/`,k=await Ue(c,r.key,p,r.ext);if(k.success){const T=s==="memo"?`${s}_txt/${m.uid}/${l}/image/`:`${s}_txt/${l}/image/`;return F(T+r.key,null),r.key=k.key,r.url=k.url,r.name=k.key+"."+r.ext,F(T+k.key,r),console.log("onRename.file",r),r}},w=async(r,p,c)=>{const k=s==="memo"?`${s}_txt/${m.uid}/`:`${s}_txt/`;s==="memo"?`${s}${m.uid}`:`${s}`,await Ee(k,s==="memo"?`${s}/${m.uid}/`:`${s}/`,l,p),console.log("onPostSubmit.values",r);const T=await ee({rootDb:s,uid:m.uid,newData:j.current,key:l==="insert"?"root":l,values:r});console.log("onPostSubmit.newKey=",T),console.log("onPostSubmit.files=",c);const E=await te(`${k}`,s==="memo"?`${s}/${m.uid}/`:`${s}/`,l,c);console.log("onNewSubmit.imageResult",E),s==="memo"&&F(`memo_tree/${m.uid}/${l}/title`,r.edTitle),j.current=!1;const L=`/${s==="memo"?"m":s}/${l}`;s==="home"&&F("home/tree",null),C(L,{state:{reflash:!0}})};return d.useEffect(()=>{t&&t.title!==void 0&&fe({title:t.title,description:t.title});function r(){document.querySelectorAll("pre").forEach((p,c)=>{})}t&&t.memo!==null&&r()},[t]),l===""||m===void 0?e.jsx(e.Fragment,{}):(console.log("isLoading=",u),t===void 0||u?e.jsx(_,{}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-full p-0 m-0",children:j.current===!1&&t&&(t.title===void 0||t.title===""||t.title===null)?e.jsx(_,{}):e.jsx(yt,{newMode:j.current,onPostSubmit:w,onNewSubmit:f,onCancel:y,onRename:i,onFilePath:$,onFilePathList:N,title:t?.title,gbn:t?.gbn,date:t?.date,htmlCheck:t?.html?t?.html==="Y"?"Y":"N":"Y",iconCheck:!t?.icon==="Y"?"Y":"N",content:t?.memo,imageList:t?.image})})}))},bt=o=>{const[s,u]=d.useState(o.imageList),[t,v]=d.useState(o.content),[C,j]=d.useState(),x=d.useRef(),l=d.useRef(),g=d.useRef(null),m=d.useRef([]),{height:y}=Ce(),$={edTitle:o.title,edGbn:o.gbn?o.gbn:"etc",edDate:o.date,content:o.content,memoTxt:o.content,htmlCheck:"N",iconCheck:"N"},{register:N,handleSubmit:f,trigger:i,control:w,setValue:r,getValues:p,watch:c,formState:{errors:k,isSubmitting:T}}=Pe({mode:"onChange",defaultValues:$});d.useEffect(()=>{N("edDate"),N("memoTxt")},[]),d.useEffect(()=>{m.current=[],x.current=o.content,l.current=!1},[o.content]);const E=async n=>{await o.onPostSubmit(n,s,m.current)},L=()=>{f(E)()},P=n=>{console.log("onDelete.imageList=",n),u(n)},Y=n=>{console.log("onInsert.file",n);let h=x.current;n.ext==="jpg"||n.ext==="png"?(h+=`<img src='${n.url}'/>`,B(`<img src='${n.url}'/>
`)):n.ext==="pdf"?(h+=`<PDF>${n.url}</PDF>`,B(`<PDF>${n.url}</PDF>`)):n.ext==="mp4"?(h+=`<video preload="auto" controls="" src='${n.url}'></video>`,B(`<video preload="auto" controls="" src='${n.url}'></video>`)):(h+=`<a src='${n.url}'>${n.name}}</a>`,B(`다운로드
<a href="${n.url}" target="_blank">${n.name}</a>
`)),x.current=h},oe=n=>o.onRename(n,p("edTitle")),ve=n=>{x.current=n},ne=n=>{console.log("handleFileUpload",n),m.current=n};function G(n){B(`<img src='${n}'/>`)}function ae(){console.log("HtmlEditor.imageList=",s);let n="";s&&s.length>0&&s.map((h,S)=>{n+=`<img src="/data/memo/${h.key}.${h.ext}" style="width: 50px;"/>
`}),n!==""&&B(n)}const re=[{value:"none",label:"None"},{value:"react",label:"React"},{value:"css",label:"CSS"},{value:"android",label:"Android"},{value:"java",label:"JAVA"},{value:"image",label:"그림 / 사진"},{value:"etc",label:"기타"},{value:"mui",label:"MUI"}],le=["React","JavaScript","Bash","Html","CSS","SQL","Java","Kotlin","C++","C#","Command","Script","Python","Ruby","Go","Swift","Rust"],B=n=>{const h=g.current;if(h){const S=h.selectionStart,D=h.selectionEnd,M=t.slice(0,S),a=t.slice(D);v(M+n+a),r("memoTxt",M+n+a),setTimeout(()=>{h.selectionStart=h.selectionEnd=S+n.length,h.focus()},100)}},A=n=>{B(n)},ie=n=>n?/\.(jpg|jpeg|png|gif|bmp|webp|svg)/i.test(n)||n.includes("image")||n.includes("img"):!1,ce=async()=>{const n=await ct("memo/I3cTgdCxwjhBBno4mtZYvnODPJu1");console.log("onAllFile.result=",n)},K=async()=>{const n=await dt("memo/I3cTgdCxwjhBBno4mtZYvnODPJu1");console.log("onAllFile10.result=",n);let h="";n.map(S=>{h+=S+`
`}),B(h)},de=async()=>{const n=p("edFilePath");if(n===""){const h=[];let S=g.current.value;S=S.replace(/<img src="\/data\/memo\//g,""),S=S.replace(/ style="width: 50px;"/g,""),S=S.replace(/"\/>/g,""),S=S.replace(/ /g,""),S.split(`
`).forEach(async D=>{D.indexOf(".")>0&&(h.push(D),console.log(D))}),h.length>0&&(console.log(h),await o.onFilePathList(h))}else await o.onFilePath(n)},me=n=>new Promise((h,S)=>{const D=new Image;D.crossOrigin="anonymous",D.onload=()=>{const M=document.createElement("canvas"),a=M.getContext("2d");M.width=D.width,M.height=D.height,a.drawImage(D,0,0);try{const b=M.toDataURL("image/png");console.log("convertImageToBase64.base64=",b.substring(0,30)+"..."),h(b)}catch(b){S(b)}},D.onerror=()=>{S(new Error("Failed to load image"))},D.src=n});return e.jsx("div",{className:"my-2 mb-[50px], w-full",children:e.jsxs("form",{onSubmit:f(E),style:{width:"100%",minHeight:"300px",maxHeight:{height:y},display:"flex",flexDirection:"column"},children:[e.jsx(Ae,{onSubmit:n=>L(),onCancel:o.onCancel,isSubmitting:T}),e.jsx(Fe,{control:w,onDelete:P,onInsert:Y,onRename:oe,setContent:ve,onFileUpload:ne,imageList:o.imageList}),e.jsxs("div",{className:"grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2 gap-2",children:[e.jsx("div",{className:"w-full",children:e.jsx(O,{name:"edTitle",placeholder:"제목",control:w,className:"w-full",rules:{required:"해당 필드는 필수입니다.",minLength:{value:2,message:"2글자 이상 입력해주세요."}},onChange:n=>{n.preventDefault(),r("edTitle",n.target.value)}})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_e,{name:"edGbn",label:"구분",control:w,rules:{required:!0},placeholder:"-- 구분 --",options:re,className:"",allClassName:"max-w-40",onChange:n=>{n.preventDefault();const h=n.target.value;console.log("edGbn=",p("edGbn")),r("edGbn",h)}}),e.jsx(Me,{id:"edDate",name:"edDate",placeholder:"Select a date",control:w,onChange:(n,h)=>{console.log({dates:n,currentDateString:h}),r("edDate",h)}})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(O,{name:"edUrl",placeholder:"Base64로 만들 URL",control:w,className:"w-full",allClassName:"w-full",onChange:n=>{n.preventDefault();const h=n.target.value;console.log("edUrl=",h),r("edUrl",h),j(h)}}),e.jsx(R,{variant:"outlined",color:"success",onClick:n=>{n.preventDefault(),G(p("edUrl2"))},children:"적용"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(O,{name:"edUrl2",placeholder:"Base64 이미지 데이터",className:"w-full",allClassName:"w-full",variant:"filled",size:"small",value:p("edUrl2")||""}),e.jsx(R,{variant:"outlined",color:"success",onClick:n=>{n.preventDefault(),ae()},children:"첨부추가"})]}),e.jsxs("div",{className:"flex gap-2 w-full",children:[e.jsx(O,{name:"edFilePath",placeholder:"이미지리스트에 추가할 파일명",className:"w-full",allClassName:"w-full",control:w,onChange:n=>{n.preventDefault();const h=n.target.value;r("edFilePath",h)}}),e.jsx(R,{variant:"outlined",color:"success",onClick:n=>{n.preventDefault(),de()},children:"파일경로"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"outlined",color:"success",onClick:n=>{n.preventDefault(),ce()},children:"전체파일"}),e.jsx(R,{variant:"outlined",color:"success",onClick:n=>{n.preventDefault(),K()},children:"전체파일10"})]})]}),e.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600 my-4"}),e.jsxs("div",{className:"grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsx("div",{className:"max-h-100 overflow-y-scroll",children:e.jsx(ge,{postData:t})})}),e.jsxs("div",{children:[e.jsx(Be,{ref:g,className:"",value:t,onChange:n=>{r("memoTxt",n),v(n)},rows:20}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 xsm:grid-cols-5 sm:grid-cols-7 md:grid-cols-7 lg:grid-cols-8",children:[e.jsx(I,{className:"cursor-pointer",variant:"light",color:"success",onClick:()=>A(`<box>
</box>`),children:"<Box>"}),e.jsx(I,{className:"cursor-pointer",variant:"light",color:"success",onClick:()=>A('<a href="/data/memo/" target="_blank"></a>'),children:"Link"}),e.jsx(I,{className:"cursor-pointer",variant:"light",color:"success",onClick:()=>A('<img src="/data/memo/"></img>'),children:"img"}),e.jsx(I,{className:"cursor-pointer",variant:"light",color:"success",onClick:()=>A('<video preload="auto" controls="" src="/memo/" style="width: 100%; height: 100%;"></video>'),children:"Video"}),e.jsx(I,{className:"cursor-pointer",variant:"light",color:"success",onClick:()=>A('<hr style="width=100%"/>'),children:"line"}),le.map((n,h)=>e.jsx(I,{className:"cursor-pointer",variant:"light",color:"dark",onClick:()=>A("<code>"+n+`
</code>`),children:n},h))]})]}),p("edUrl")&&ie(p("edUrl"))&&e.jsx("div",{className:"mt-2 p-2 border border-gray-300 dark:border-gray-600 rounded",children:e.jsx("img",{src:C,alt:"Preview",className:"max-w-full h-auto max-h-48 object-contain",onLoad:async n=>{try{const h=await me(C);r("edUrl2",h)}catch(h){console.error("Base64 conversion failed:",h)}},onError:n=>{n.target.style.display="none"}})})]}),e.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600 my-4"})]})})},Ct=o=>{const{rootDb:s,isLoading:u,memoDetailData:t}=o,{scrollYProgress:v}=he();xe(v,{stiffness:100,damping:30,restDelta:.001});const C=J(),j=d.useRef();j.current=o.searchWord;const{memoId:x}=ue();se();const{user:l}=z();console.log("memoDetailData=",t);const g=()=>{const i=`/${s==="memo"?"m":s}/${x==="insert"?"":x}`;C(i)},m=async i=>{await W(l.uid,x,i)},y=async i=>{if(console.log("onFilePathList.fileNm=",i),i.length>0)for(let w=0;w<i.length;w++){const r=i[w];console.log("onFilePathList.file=",r);try{const p=await W(l.uid,x,r);console.log("onFilePathList.path=",p)}catch{console.log("onFilePathList.error=",r)}}else await W(l.uid,x,i)},$=async(i,w)=>{console.log("onNewSubmit.values",i);const r=await ee({rootDb:s,uid:l.uid,newData:!1,key:x,values:i});if(await te(`${s}_txt`,s,r,w),r!==void 0){const p=`/${s==="memo"?"m":s}/${r}`;C(p,{state:{reflash:!0}})}},N=async(i,w)=>{const r=s==="memo"?`${s}/${l.uid}/`:`${s}/`,p=await Ue(r,i.key,w,i.ext);if(p.success){const c=s==="memo"?`${s}_txt/${l.uid}/${x}/image/`:`${s}_txt/${x}/image/`;return F(c+i.key,null),i.key=p.key,i.url=p.url,i.name=p.key+"."+i.ext,F(c+p.key,i),console.log("onRename.file",i),i}},f=async(i,w,r)=>{const p=s==="memo"?`${s}_txt/${l.uid}/`:`${s}_txt/`;s==="memo"?`${s}${l.uid}`:`${s}`,await Ee(p,s==="memo"?`${s}/${l.uid}/`:`${s}/`,x,w),console.log("onPostSubmit.values",i);const c=await ee({rootDb:s,uid:l.uid,newData:!1,key:x==="insert"?"root":x,values:i});console.log("onPostSubmit.newKey=",c),console.log("onPostSubmit.files=",r);const k=await te(`${p}`,s==="memo"?`${s}/${l.uid}/`:`${s}/`,x,r);console.log("onNewSubmit.imageResult",k),s==="memo"&&F(`memo_tree/${l.uid}/${x}/title`,i.edTitle);const T=`/${s==="memo"?"m":s}/${x}`;s==="home"&&F("home/tree",null),C(T,{state:{reflash:!0}})};return d.useEffect(()=>{t&&t.title!==void 0&&fe({title:t.title,description:t.title});function i(){document.querySelectorAll("pre").forEach((w,r)=>{})}t&&t.memo!==null&&i()},[t]),x===""||l===void 0?e.jsx(e.Fragment,{}):(console.log("isLoading=",u),t===void 0||u?e.jsx(_,{}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-full p-0 m-0",children:t&&(t.title===void 0||t.title===""||t.title===null)?e.jsx(_,{}):e.jsx(bt,{onPostSubmit:f,onNewSubmit:$,onCancel:g,onRename:N,onFilePath:m,onFilePathList:y,title:t?.title,gbn:t?.gbn,date:t?.date,htmlCheck:t?.html?t?.html==="Y"?"Y":"N":"Y",iconCheck:!t?.icon==="Y"?"Y":"N",content:t?.memo,imageList:t?.image})})}))};function Nt({initTreeData:o,userId:s,memoId:u,onClick:t}){const[v,C]=d.useState(o),{isMoble:j,height:x,width:l}=Ve(),g=d.useRef(),m=d.useRef(),y=(f,i)=>{if(i.dragSource.id!==void 0&&i.dropTargetId!==void 0){const w=`memo_tree/${s}/${i.dragSource.id}/parent`;F(w,i.dropTargetId)}C(f)};d.useEffect(()=>{(()=>{for(const i of o){const w=i.id;i.cnt=o.filter(r=>r.parent===w).length}C(o)})()},[o]);const $=(f,i)=>{const w=[],r=p=>{const c=i.find(k=>k.id===p);if(!c)return!1;if(c.parent&&c.parent!=="root"){if(r(c.parent))return w.push(c.parent),!0}else return!0;return!1};return r(f)?w.reverse():[]},N=f=>{if(!v||!f||!m.current)return;const i=$(f,v);i.length>0&&setTimeout(()=>{m.current.open(i)},500)};return d.useEffect(()=>{g.current===void 0&&u!==void 0&&(g.current=u,N(u))},[v]),v==null||v===""?e.jsx(_,{}):e.jsx(Te,{backend:Le,options:De(),children:e.jsx("div",{className:"overflow-y-auto",style:{height:x-235-(j?56:0)+(l>1024?60:0),width:"100%"},children:e.jsx(Re,{ref:m,tree:v,rootId:"root",onDrop:y,render:(f,{depth:i,isOpen:w,onToggle:r,isDragging:p,isDropTarget:c})=>e.jsxs("div",{className:`w-62 flex items-center rounded-sm
              text-gray-500 dark:text-gray-400 cursor-pointer select-none min-h-8 py-1 ml-1 ${p?"opacity-50":""} ${c?"bg-blue-200 dark:bg-blue-800":"hover:bg-gray-300 dark:hover:bg-gray-700"} 
              ${g.current===f.id?"bg-gray-200 dark:bg-gray-800 rounded-r-lg border-l-4 border-blue-500":""}
              `,style:{paddingLeft:i*20+(f.cnt===0?5:0)-(g.current===f.id?4:0)},children:[e.jsx("div",{className:"min-w-0",children:f.cnt>0&&e.jsx("div",{className:"hover:bg-white dark:hover:bg-gray-950 rounded-full",onClick:r,children:w?e.jsx(gt,{className:"size-6"}):e.jsx(ht,{className:"size-6"})})}),e.jsxs("div",{className:"flex items-center flex-1 min-w-0 justify-between",onClick:()=>{g.current=f.id,t(f)},children:[e.jsxs("div",{className:"flex truncate pr-2",children:[f.icon,f.text]}),f.cnt>0&&e.jsxs("div",{className:"text-gray-500 text-sm",children:["(",f.cnt,")"]})]})]})})})})}const $t=o=>{const s=d.useRef(null);function u(){o.onSearchDataBtn(s.current.value)}function t(){return o.onNewMemoBtn(),!1}function v(C){C.which===13&&u()}return e.jsxs(e.Fragment,{children:[e.jsx(O,{id:"edSearch",type:"edSearch",name:"edSearch",inputRef:s,className:"w-full ",allClassName:"px-3 py-2",placeholder:"Enter Search...",fullWidth:!0,sx:{pt:0,pl:2,pr:2,pb:1},onKeyDownCapture:v}),e.jsxs("div",{className:"flex justify-center",children:[e.jsx(R,{variant:"outlined",color:"success",className:"m-1 p-1",onClick:t,children:"새글"}),e.jsx(R,{variant:"outlined",color:"brand",className:"m-1 p-1",onClick:u,children:"조회"})]})]})};async function St(o,s,u=""){if(s==null||s==="")return"";if(o==="home"){const g=await Se("home/tree");if(g!=null)try{return JSON.parse(g)}catch(m){console.error("Error parsing JSON data:",m)}}const t=o==="home"?"home_txt":u===""?`${o}_tree/${s}`:`${o}_txt/${s}`,v=we(ke(ye,t)),C=await be(v);if(!C.exists())return console.log("getTreeData.null"),null;if(!C.exists())return console.log("getTreeData.exists"),null;const j=C.val(),x=[{text:"1.React",id:"react",key:"react",parent:"root"},{text:"2.CSS",id:"css",key:"css",parent:"root"},{text:"3.Android",id:"android",key:"android",parent:"root"},{text:"4.Java",id:"java",key:"java",parent:"root"},{text:"5.이미지",id:"image",key:"image",parent:"root"},{text:"6.Etc",id:"etc",key:"etc",parent:"root"}],l=[];o==="home"&&l.push(...x);for(const g in j){const m=j[g];m.id=g;const y={id:g,key:g,text:m.title,parent:o==="home"?m.gbn:m.parent};o==="memo"?(y.icon=m.bm==="Y"?e.jsx(Ie,{className:"text-red-500"}):m.icon==="Y"?e.jsx(ut,{}):null,y.droppable=!0):y.droppable=!1,!((u===""||u===void 0||u===null)&&(y.parent===void 0||y.parent===null||y.parent===""))&&(o==="home"||u===""||u===void 0||u===null?l.push(y):(m.id=g,(m.memo+"").toLowerCase().indexOf(u.toLowerCase())>-1&&(y.parent="root",y.droppable=!1,l.push(y))))}return l.sort((g,m)=>g.title>m.title?1:-1),o==="home"&&F("home/tree",JSON.stringify(l)),l}const Tt=d.lazy(async()=>await $e(()=>import("./TwMemoMain-D1MUXNEc.js"),__vite__mapDeps([33,1,2,25,34]))),Ls=({rootDb:o})=>{const s=J(),{user:u}=z(),t=d.useRef(),v=d.useRef(!0),C=d.useRef(),j=d.useRef(),[x,l]=d.useState(),g=d.useRef(!1),m=se(),y=d.useRef(!1);y.current=m?.state?.reflash===!0;const $=Ke({queryKey:["twTreeData",u?.uid,t.current],queryFn:()=>St(o,u?.uid,t.current)});$.data!==void 0&&$.data!==""&&!g.current&&(g.current=!0);const N=()=>{const c=x;c&&(c.bookmark=c.bookmark==="Y"?"N":"Y");const k=`memo_tree/${u.uid}/${j.current}/bm`;F(k,x.bookmark),l({...x,bookmark:c.bookmark})};d.useEffect(()=>{u!==void 0&&u!=null&&$.refetch()},[u]),d.useEffect(()=>{const c=async E=>{if(E!==""&&u){const L=await mt(o,u?.uid,E,t.current);o==="memo"&&(L.path=Dt($.data,E)),L.code==="404"&&(L.title="No title"),v.current=!1,l(L===void 0?{}:L)}},k=m.pathname.split("/"),T=k.length>2?k[k.length-1]:"";v.current=!0,c(T),j.current=T},[m.pathname,u,y.current]),d.useEffect(()=>{u!==void 0&&u!=null&&$.refetch()},[y.current]);const f=c=>{g.current=!1,c!==void 0&&(t.current=c),$.refetch()},i=c=>{c.id!==j.current&&(v.current=!0,s(`/${o==="memo"?"m":o}/${c.id}`))},w=()=>{if(u==null){alert("로그인 후 이용 가능합니다.");return}const c=`/${o==="memo"?"m":o}/insert/insert`;s(c)},r=c=>{},p=e.jsxs("div",{className:"w-[270px]",children:[e.jsx("div",{className:"mt-3 flex items-center justify-center",children:e.jsx(Ze,{to:"/m",children:o==="memo"?"메모장":"홈페이지관리"})}),e.jsxs("div",{className:"flex gap-7 justify-center",children:[o==="memo"?"":e.jsx(X,{to:"/m",children:"메모"}),o==="memo"&&u?.uid==="I3cTgdCxwjhBBno4mtZYvnODPJu1"?e.jsx(X,{to:"/home",children:"홈관리"}):null,e.jsx(X,{to:"/todo",children:"TODO"}),e.jsx(X,{to:"/tw",children:"Sheet"})]}),e.jsx($t,{onNewMemoBtn:w,onSearchDataBtn:f}),g.current&&$.isFetched?e.jsx(Nt,{expandIndex:C.current,initTreeData:$.data,userId:u?.uid,memoId:j.current,onClick:i}):u===void 0?e.jsx(e.Fragment,{}):e.jsx(_,{})]});return e.jsxs(ze,{sideType:"memo",title:o==="memo"?"메모장":"홈페이지관리",sideContents:p,children:[e.jsx(d.Suspense,{fallback:e.jsx(_,{}),children:e.jsxs(Ge,{children:[e.jsx(V,{path:"/edit/:memoId",element:e.jsx(je,{rootDb:o,isLoading:v.current,searchWord:t.current,memoDetailData:x})}),e.jsx(V,{path:"/insert/:memoId",element:e.jsx(je,{rootDb:o,isLoading:v.current,searchWord:t.current,memoDetailData:x})}),e.jsx(V,{path:"/util/:memoId",element:e.jsx(Ct,{rootDb:o,isLoading:v.current,searchWord:t.current,memoDetailData:x})}),e.jsx(V,{path:"/:memoId",element:e.jsx(pt,{rootDb:o,isLoading:v.current,searchWord:t.current,memoDetailData:x,onTreeUpdate:f,onBookmark:N,data:$.data})}),e.jsx(V,{path:"*",element:e.jsx(Tt,{searchWord:t.current,data:$.data,onNewMemoBtn:w,title:o==="memo"?"메모장 홈":"홈페이지관리 홈"})})]})}),o==="memo"?e.jsx(ft,{onSelected:r}):"",e.jsx(Qe,{})]})},Dt=(o,s)=>{let u=[],t=s;if(!o)return u;const v=o.find(C=>C.id===t);for(u.unshift(v),t=v?.parent;t!=null&&t!==""&&t!=="root";){const C=o.find(j=>j.id===t);t=C?.parent,u.unshift(C)}return u};export{Ls as default};
