const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-C1Fml-Dc.js","assets/index-Dt7VXYqf.js","assets/index-Os9tcPi3.css","assets/createSvgIcon-D5vtuee9.js","assets/useControlled-o3FGf_TX.js","assets/ownerWindow-DvT1GKkC.js","assets/isMuiElement-C0hwO7KM.js","assets/fireDatabase-CmU9MiSV.js","assets/fireStorage-B5Zm1Bav.js","assets/SinyDate-B9WZGY-t.js","assets/Grid-CxfOxZJO.js","assets/useTheme-miK55Se-.js","assets/index-BgnsSn_e.js","assets/index-Chjiymov.js","assets/Typography-oI_uAwM7.js","assets/Menu-C_zwoptI.js","assets/useSlotProps-CZ3zVRPA.js","assets/resolveComponentProps-C6BSudbh.js","assets/IconButton-C7ytqYkH.js","assets/TextField-r7CYg_So.js","assets/InputAdornment-A6LD4lcJ.js","assets/Popper-J_tQrZ44.js","assets/Button-BsNt_rqT.js","assets/Chip-BLRdmlCB.js","assets/index.esm-ieXCo7to.js","assets/TwButton-Bj-P6Cxy.js","assets/Loading-CpBM_CSX.js","assets/Container-CqPrq-mM.js","assets/styled-BO1vEgvD.js","assets/CircularProgress-R-5QKs_l.js","assets/Divider-DDEBS_qS.js","assets/dividerClasses-hl_ORNYY.js","assets/index-Cmdt2tIm.css"])))=>i.map(i=>d[i]);
import{r as g,u as G,j as e,c as J,T as Ye,q as ke,e as He,o as qe,a as be,f as we,g as ye,z as ue,A as se,C as Oe,I as Ne,H as We,D as Ce,F as $e,G as Ge,y as Je,J as Ke,R as Ve,K}from"./index-Dt7VXYqf.js";import{u as ze}from"./useSuspenseQuery-0-u_4249.js";import{L as M}from"./Loading-CpBM_CSX.js";import{T as Qe}from"./Footer-Di-yvOHI.js";import"./LinkItem-DBZ7wTYg.js";import{b as Ze,T as X}from"./TwLinkItem-Dr2ZPTFJ.js";import{g as Se,s as R}from"./fireDatabase-CmU9MiSV.js";import{D as Te,g as De,S as Le,T as Ie}from"./index-gMrfcm31.js";import{E as Xe,C as et,u as ge,a as he,F as tt,b as st,D as Fe,l as ot,I as nt,s as ee,d as te,e as Re}from"./index-C1Fml-Dc.js";import{F as Pe}from"./Favorite-CtOIUa-q.js";import{S as at}from"./SinyImageList-CtfMQ9xy.js";import{H as xe}from"./HtmlCode-BCJmz1S-.js";import{c as rt}from"./CodeText-CfZCie4t.js";import{s as fe}from"./commonUtil-MYcD_x1O.js";import{T as I}from"./TwButton-Bj-P6Cxy.js";import{C as lt}from"./CircularProgress-R-5QKs_l.js";import{D as it}from"./datetime-BDx6lZXm.js";import{u as Ee}from"./index.esm-ieXCo7to.js";import{T as ve}from"./TwCheckbox-CNYHbHig.js";import{T as Be}from"./TwTextArea-BREZSKcB.js";import{T as F}from"./TwBadge-C1g0YivL.js";import"./SinyDate-B9WZGY-t.js";import{T as O}from"./TwInput-BX21Zj77.js";import{T as Me}from"./TwSelect-B_o1mf-c.js";import{T as Ue}from"./TwDatePicker-D8_rb_9d.js";import{d as W,e as _e,f as ct,h as mt}from"./fireStorage-B5Zm1Bav.js";import{S as dt,a as ut}from"./right-BLfN5Zeq.js";import{f as gt}from"./fireMemoDetail-C483B-Fv.js";import{S as ht}from"./check-circle-DOgJXlq1.js";import{I as xt}from"./IpInfo-Cxd8iDcq.js";import{R as ft}from"./react-apexcharts.min-DIGbG1KA.js";import"./useBaseQuery-CpVwMbNe.js";import"./Container-CqPrq-mM.js";import"./styled-BO1vEgvD.js";import"./Divider-DDEBS_qS.js";import"./dividerClasses-hl_ORNYY.js";import"./Typography-oI_uAwM7.js";import"./Link-CjezWYVR.js";import"./createSvgIcon-D5vtuee9.js";import"./useControlled-o3FGf_TX.js";import"./ownerWindow-DvT1GKkC.js";import"./isMuiElement-C0hwO7KM.js";import"./IconButton-C7ytqYkH.js";import"./index-Chjiymov.js";import"./ImageListItem-BW1LUoz7.js";import"./copy-B1IZbYjx.js";import"./ComponentCard-sn_pQAOK.js";import"./TwRadio-jBxahmfJ.js";import"./toPropertyKey-DCwh5dYN.js";import"./Grid-CxfOxZJO.js";import"./useTheme-miK55Se-.js";import"./index-BgnsSn_e.js";import"./Menu-C_zwoptI.js";import"./useSlotProps-CZ3zVRPA.js";import"./resolveComponentProps-C6BSudbh.js";import"./TextField-r7CYg_So.js";import"./InputAdornment-A6LD4lcJ.js";import"./Popper-J_tQrZ44.js";import"./Button-BsNt_rqT.js";import"./Chip-BLRdmlCB.js";function pt({initTreeData:s}){const[o,c]=g.useState(),t=v=>c(v),f=G();console.log("TwBookmarkTree.initTreeData=",s),g.useEffect(()=>{c(s)},[s]);const y=v=>{console.log("node",v),f(`/m/${v.id}`)};return o===void 0?e.jsx(e.Fragment,{}):o===null||o.length===0?e.jsx(M,{}):e.jsx(Te,{backend:Le,options:De(),children:e.jsx(Ie,{tree:o,rootId:"root",onDrop:t,render:(v,{depth:x,isOpen:l,onToggle:m})=>e.jsxs("div",{className:"w-60 flex items-center justify-between hover:bg-gray-300 dark:hover:bg-gray-700 rounded-sm ",style:{paddingLeft:x*20+(v.cnt===0?5:0)},children:[e.jsxs("div",{className:"flex items-center",children:[v.cnt>0&&e.jsx("div",{onClick:m,children:l?e.jsx(Xe,{}):e.jsx(et,{})}),e.jsx("div",{className:"cursor-pointer",onClick:()=>y(v),children:v.text})]}),v.cnt>0&&e.jsxs("div",{className:"text-gray-500 text-sm",children:["(",v.cnt,")"]})]})})})}function vt(s){const{user:o}=J(),c=G(),[t,f]=g.useState(),[y,v]=g.useState(),x=async l=>{const m=[],i=ke(be(we,`memo_tree/${l}`),qe("bm"),He("Y")),j=await ye(i);if(!j.exists())return console.log("getBookmark.getFireData.null"),null;const C=j.val();for(let N in C){const p=C[N];p.id=N,p.key=N,p.text=p.title,m.push(p)}m.sort((N,p)=>N.title>p.title?1:-1),f([...m])};return g.useEffect(()=>{o!==void 0&&o!=null&&x(o?.uid)},[o]),g.useEffect(()=>{const l=async(m,i)=>{const j=[...i];if(i)for(const C of i){let N=C;for(;N.parent!=="root";){N.parent,N=await Se(`memo_tree/${m}/${N.parent}`);const p={id:N.key,text:N.title,droppable:!1,parent:N.parent};j.filter(b=>b.id===p.id).length===0&&j.push(p)}}for(const C of j){const N=C.id;C.cnt=j.filter(p=>p.parent===N).length}v(j)};t&&t.length>0&&l(o?.uid,t)},[t]),o===null?e.jsx(e.Fragment,{}):e.jsxs("div",{className:"tail-bookmark justify-items-center flex items-center flex-col w-full",children:[e.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"}),e.jsx(Ye,{children:"BookMark"}),e.jsx("div",{className:`tail-bookmark 
        grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-1 
        justify-items-center 
        w-full`,children:t&&t.map((l,m)=>e.jsx("div",{children:e.jsx("button",{className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 cursor-pointer",onClick:()=>{s.onSelected(l.key),c(`/m/${l.key}`)},children:e.jsx("span",{className:"text-base",children:l.title})})},m))}),e.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"}),e.jsx(g.Suspense,{fallback:e.jsx(M,{}),children:e.jsx(pt,{initTreeData:y,uid:o?.uid})})]})}const jt=s=>e.jsxs("div",{className:"flex-grow my-4 w-full grid grid-cols-3 gap-1 items-center content-center justify-center text-center whitespace-nowrap",style:{gridTemplateColumns:`70px 70px 70px ${s.master?"70px":""}`},children:[s.master&&e.jsx(I,{size:"sm",variant:"outlined",color:"brand",onClick:s.onUtil,children:"유틸"}),e.jsx(I,{size:"sm",variant:"outlined",color:"blue",onClick:s.onEdit,children:"수정"}),e.jsx(I,{size:"sm",variant:"outlined",color:"warning",onClick:s.onNewMemo,children:"새글"}),e.jsx(I,{size:"sm",variant:"outlined",color:"error",onClick:s.onDelete,children:"삭제"})]}),kt=s=>{const{rootDb:o,isLoading:c,memoDetailData:t,onBookmark:f,onTreeUpdate:y,searchWord:v}=s,{scrollYProgress:x}=ge(),l=he(x,{stiffness:100,damping:30,restDelta:.001}),m=G(),{memoId:i}=ue(),C=se()?.state?.fullIndex,{user:N}=J(),p=()=>{const d=`/${o==="memo"?"m":o}/edit/${i}`;m(d,{state:{fullIndex:C}})},u=()=>{const d=`/${o==="memo"?"m":o}/util/${i}`;m(d,{state:{fullIndex:C}})},b=()=>{const d=`/${o==="memo"?"m":o}/insert/${i}`;m(d,{state:{fullIndex:C}})},r=async()=>{const d=o==="memo"?`${o}_txt/${N.uid}/${i}`:`${o}_txt/${i}`,w=o==="memo"?`${o}_tree/${N.uid}/${i}`:`${o}/${i}`;await st(d,w)!==void 0&&(y(),m(`/${o==="memo"?"m":o}`))},k=()=>{window.confirm(`하위 자료가 있는 경우 같이 삭제됩니다.
삭제하시겠습니까?`)&&r()};return g.useEffect(()=>{t&&t.title!==void 0&&fe({title:t.title,description:t.title});function d(){window.scrollTo({top:0}),t&&t.html!=="N"&&document.querySelectorAll("pre").forEach(w=>{w.innerHTML=rt(w.innerHTML)})}t&&t.memo!==null&&(d(),t.image&&t.image.map((w,T)=>(console.log("image."+T+"=",w.key),w)))},[t]),c?e.jsx(M,{}):i===""||N===void 0?e.jsx(e.Fragment,{}):e.jsxs("div",{children:[e.jsx(Oe.div,{className:"progress-bar",style:{scaleX:l}}),e.jsxs("div",{className:`grid grid-cols-3 
				items-center w-full 
				dark:bg-stone-950 rounded-md shadow-sm 
				dark:shadow-stone-800 shadow-stone-900`,children:[e.jsx("div",{}),e.jsx("div",{className:"flex justify-center",children:t&&t.title}),e.jsxs("div",{className:"text-right justify-end mr-3.5",children:[e.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"bookmark",onClick:f,children:t&&t.bookmark==="Y"?e.jsx(Pe,{className:"text-red-500"}):e.jsx(tt,{className:"text-gray-600 dark:text-gray-400"})}),e.jsx("div",{className:"text-right mb-3 text-sm text-red-400",children:t?.path&&t?.path.map((d,w)=>w===0?d?.text:` > ${d?.text}`)})]})]}),e.jsxs("div",{className:"w-full p-0 m-0",children:[e.jsx(jt,{master:N?.uid===Ne,rootDb:o,onEdit:p,onUtil:u,onNewMemo:b,onDelete:k,bookmark:t&&t.bookmark}),e.jsxs("div",{className:"my-4",children:[t&&t.html==="N"?e.jsx(xe,{postData:t&&t.memo,highlightWord:v}):t&&t.html!=="N"&&t.memo&&e.jsx(We,{text:t.memo}),e.jsx(at,{imageList:t&&t.image}),!t&&e.jsx("div",{className:"flex flex-col items-center",children:e.jsx("div",{className:"mt-12",children:e.jsx(lt,{})})})]})]})]})},Ae=({onSubmit:s,onCancel:o,isSubmitting:c,newMode:t=!1})=>e.jsxs("div",{className:"flex justify-end mb-1.5 gap-1",children:[e.jsxs(I,{variant:"outlined",color:"success",disabled:c,onClick:f=>{f.preventDefault(),s(f)},children:[t?"새글":""," 저장"]}),e.jsx(I,{variant:"outlined",color:"error",onClick:f=>{f.preventDefault(),o()},children:"취소"})]}),bt=g.lazy(()=>Ge(()=>import("./index-C1Fml-Dc.js").then(s=>s.i),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32])));ot.Quill.register("modules/imageDrop",nt);$e.configure({languages:["javascript","ruby","python","java","cpp","kotlin","sql"]});const wt={syntax:{highlight:s=>$e.highlightAuto(s).value},toolbar:[[{header:"1"},{header:"2"},{header:"3"},{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","video"],["clean"],["code-block"]],imageDrop:!0,clipboard:{matchVisual:!1}},yt=["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","video","clean","code-block","code-custom"],Nt=s=>{const[o,c]=g.useState(s.imageList),[t,f]=g.useState(s.htmlCheck==="Y"),[y,v]=g.useState(s.iconCheck==="Y"),[x,l]=g.useState(s.newMode?"":s.content),[m,i]=g.useState(),j=g.useRef(),C=g.useRef(),N=g.useRef(null);g.useRef(null);const p=g.useRef(null),u=s.newMode,b=g.useRef([]),{height:r}=Ce(),k=it.now().setZone("Asia/Seoul").toFormat("yyyy-MM-dd"),d={edTitle:u?"":s.title,edGbn:s.gbn?s.gbn:"etc",edDate:u?k:s.date,content:u?"":s.content,memoTxt:u?"":s.content,htmlCheck:s.htmlCheck,iconCheck:s.iconCheck},{register:w,handleSubmit:T,trigger:P,control:L,setValue:E,getValues:Y,watch:oe,formState:{errors:pe,isSubmitting:ne}}=Ee({mode:"onChange",defaultValues:d});g.useEffect(()=>{w("edDate"),w("edGbn",{required:!0}),w("htmlCheck"),w("iconCheck"),w("memoTxt")},[]),g.useEffect(()=>{b.current=[],j.current=s.content,C.current=!1},[s.content]);const V=async a=>{u?await s.onNewSubmit(a,b.current):await s.onPostSubmit(a,o,b.current)},ae=()=>{T(V)()},re=a=>{console.log("onDelete.imageList=",a),c(a)},le=a=>{console.log("onInsert.file",a);let $=j.current;a.ext==="jpg"||a.ext==="png"?($+=`<img src='${a.url}'/>`,h(`<img src='${a.url}'/>
`)):a.ext==="mp4"?($+=`<video preload="auto" controls="" src='${a.url}'></video>`,h(`<video preload="auto" controls="" src='${a.url}'></video>`)):($+=`<a src='${a.url}'>${a.name}}</a>`,h(`다운로드
<a href="${a.url}" target="_blank">${a.name}</a>
`)),j.current=$},B=a=>s.onRename(a,Y("edTitle")),A=a=>{j.current=a},ie=a=>{console.log("handleFileUpload",a),b.current=a};function ce(a){j.current=a,E("content",a),P("content")}const z=(a,$)=>{console.log(`onChecked.e.${a}=`,$),E(a,$?"Y":"N"),console.log(`onChecked.v.${a}=`,Y(a)),a==="htmlCheck"?f($):v($)},me=oe("content"),de=[{value:"none",label:"None"},{value:"react",label:"React"},{value:"css",label:"CSS"},{value:"android",label:"Android"},{value:"java",label:"JAVA"},{value:"image",label:"그림 / 사진"},{value:"etc",label:"기타"},{value:"mui",label:"MUI"}],n=["React","JavaScript","Bash","Html","CSS","SQL","Java","Kotlin","C++","C#","Command","Script","Python","Ruby","Go","Swift","Rust"],h=a=>{const $=N.current;if($){const q=$.selectionStart,_=$.selectionEnd,H=x.slice(0,q),Q=x.slice(_);l(H+a+Q),E("memoTxt",H+a+Q),setTimeout(()=>{$.selectionStart=$.selectionEnd=q+a.length,$.focus()},0)}},S=a=>{h(a)},D=a=>a?/\.(jpg|jpeg|png|gif|bmp|webp|svg)/i.test(a)||a.includes("image")||a.includes("img"):!1,U=a=>new Promise(($,q)=>{const _=new Image;_.crossOrigin="anonymous",_.onload=()=>{const H=document.createElement("canvas"),Q=H.getContext("2d");H.width=_.width,H.height=_.height,Q.drawImage(_,0,0);try{const Z=H.toDataURL("image/png");console.log("convertImageToBase64.base64=",Z.substring(0,30)+"..."),$(Z)}catch(Z){q(Z)}},_.onerror=()=>{q(new Error("Failed to load image"))},_.src=a});return e.jsx("div",{className:"my-2 mb-[50px], w-full",children:e.jsxs("form",{onSubmit:T(V),style:{width:"100%",minHeight:"300px",maxHeight:{height:r},display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"flex justify-end mb-1.5 gap-1",children:[e.jsx(ve,{id:"htmlCheck",checked:t,onChange:a=>z("htmlCheck",a),label:"HTML사용"}),e.jsx(ve,{id:"iconCheck",checked:y,onChange:a=>z("iconCheck",a),label:"Icon"}),e.jsx(Ae,{onSubmit:a=>ae(),onCancel:s.onCancel,isSubmitting:ne,newMode:u})]}),e.jsx(Fe,{control:L,onDelete:re,onInsert:le,onRename:B,setContent:A,onFileUpload:ie,imageList:s.imageList}),e.jsxs("div",{className:"grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2 gap-2",children:[e.jsx("div",{className:"w-full",children:e.jsx(O,{name:"edTitle",placeholder:"제목",control:L,rules:{required:"해당 필드는 필수입니다.",minLength:{value:2,message:"2글자 이상 입력해주세요."}},onChange:a=>{a.preventDefault(),E("edTitle",a.target.value)}})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Me,{name:"edGbn",label:"구분",control:L,rules:{required:!0},placeholder:"-- 구분 --",options:de,className:"",allClassName:"max-w-40",onChange:a=>{a.preventDefault();const $=a.target.value;console.log("edGbn=",Y("edGbn")),E("edGbn",$)}}),e.jsx(Ue,{id:"edDate",name:"edDate",placeholder:"Select a date",control:L,onChange:(a,$)=>{console.log({dates:a,currentDateString:$}),E("edDate",$)}})]}),e.jsx("div",{className:"flex gap-2"})]}),e.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600 my-4"}),e.jsxs("div",{className:"grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2 gap-2",children:[e.jsx("div",{className:"max-h-100 overflow-y-scroll",children:e.jsx(xe,{postData:x})}),e.jsxs("div",{children:[e.jsx(Be,{ref:N,className:"",value:x,onChange:a=>{E("memoTxt",a),l(a)},rows:20}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 xsm:grid-cols-5 sm:grid-cols-7 md:grid-cols-7 lg:grid-cols-8",children:[e.jsx(F,{className:"cursor-pointer",variant:"light",color:"success",onClick:()=>S(`<box>
</box>`),children:"<Box>"}),e.jsx(F,{className:"cursor-pointer",variant:"light",color:"success",onClick:()=>S('<a href="/data/memo/" target="_blank"></a>'),children:"Link"}),e.jsx(F,{className:"cursor-pointer",variant:"light",color:"success",onClick:()=>S('<img src="/data/memo/"></img>'),children:"img"}),e.jsx(F,{className:"cursor-pointer",variant:"light",color:"success",onClick:()=>S('<video preload="auto" controls="" src="/memo/" style="width: 100%; height: 100%;"></video>'),children:"Video"}),e.jsx(F,{className:"cursor-pointer",variant:"light",color:"success",onClick:()=>S('<hr style="width=100%"/>'),children:"line"}),n.map((a,$)=>e.jsx(F,{className:"cursor-pointer",variant:"light",color:"dark",onClick:()=>S("<code>"+a+`
</code>`),children:a},$))]})]}),Y("edUrl")&&D(Y("edUrl"))&&e.jsx("div",{className:"mt-2 p-2 border border-gray-300 dark:border-gray-600 rounded",children:e.jsx("img",{src:m,alt:"Preview",className:"max-w-full h-auto max-h-48 object-contain",onLoad:async a=>{try{const $=await U(m);E("edUrl2",$)}catch($){console.error("Base64 conversion failed:",$)}},onError:a=>{a.target.style.display="none"}})})]}),t&&e.jsx(g.Suspense,{fallback:e.jsx("div",{children:"Loading editor..."}),children:e.jsx(bt,{ref:p,fullWidth:!0,theme:"snow",id:"content",name:"content",type:"div",value:me,style:{minWidth:"400px",border:"1px solid primary.main",minHeight:"200px",height:"400px",maxHeight:"450px"},modules:wt,formats:yt,onChange:ce})}),e.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600 my-4"})]})})},je=s=>{const{rootDb:o,isLoading:c,memoDetailData:t}=s,{scrollYProgress:f}=ge();he(f,{stiffness:100,damping:30,restDelta:.001});const y=G(),v=g.useRef(),x=g.useRef();x.current=s.searchWord;const{memoId:l}=ue(),m=se(),{user:i}=J();v.current=m.pathname.split("/")[2]==="insert",console.log("memoDetailData=",t);const j=()=>{const r=`/${o==="memo"?"m":o}/${l==="insert"?"":l}`;y(r)},C=async r=>{await W(i.uid,l,r)},N=async r=>{if(console.log("onFilePathList.fileNm=",r),r.length>0)for(let k=0;k<r.length;k++){const d=r[k];console.log("onFilePathList.file=",d);try{const w=await W(i.uid,l,d);console.log("onFilePathList.path=",w)}catch{console.log("onFilePathList.error=",d)}}else await W(i.uid,l,r)},p=async(r,k)=>{console.log("onNewSubmit.values",r);const d=await ee({rootDb:o,uid:i.uid,newData:v.current,key:l==="insert"?"root":l,values:r});if(await te(`${o}_txt`,o,d,k),d!==void 0){const w=`/${o==="memo"?"m":o}/${d}`;y(w,{state:{reflash:!0}})}},u=async(r,k)=>{const d=o==="memo"?`${o}/${i.uid}/`:`${o}/`,w=await _e(d,r.key,k,r.ext);if(w.success){const T=o==="memo"?`${o}_txt/${i.uid}/${l}/image/`:`${o}_txt/${l}/image/`;return R(T+r.key,null),r.key=w.key,r.url=w.url,r.name=w.key+"."+r.ext,R(T+w.key,r),console.log("onRename.file",r),r}},b=async(r,k,d)=>{const w=o==="memo"?`${o}_txt/${i.uid}/`:`${o}_txt/`;o==="memo"?`${o}${i.uid}`:`${o}`,await Re(w,o==="memo"?`${o}/${i.uid}/`:`${o}/`,l,k),console.log("onPostSubmit.values",r);const T=await ee({rootDb:o,uid:i.uid,newData:v.current,key:l==="insert"?"root":l,values:r});console.log("onPostSubmit.newKey=",T),console.log("onPostSubmit.files=",d);const P=await te(`${w}`,o==="memo"?`${o}/${i.uid}/`:`${o}/`,l,d);console.log("onNewSubmit.imageResult",P),o==="memo"&&R(`memo_tree/${i.uid}/${l}/title`,r.edTitle),v.current=!1;const L=`/${o==="memo"?"m":o}/${l}`;o==="home"&&R("home/tree",null),y(L,{state:{reflash:!0}})};return g.useEffect(()=>{t&&t.title!==void 0&&fe({title:t.title,description:t.title});function r(){document.querySelectorAll("pre").forEach((k,d)=>{})}t&&t.memo!==null&&r()},[t]),l===""||i===void 0?e.jsx(e.Fragment,{}):(console.log("isLoading=",c),t===void 0||c?e.jsx(M,{}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-full p-0 m-0",children:v.current===!1&&t&&(t.title===void 0||t.title===""||t.title===null)?e.jsx(M,{}):e.jsx(Nt,{newMode:v.current,onPostSubmit:b,onNewSubmit:p,onCancel:j,onRename:u,onFilePath:C,onFilePathList:N,title:t?.title,gbn:t?.gbn,date:t?.date,htmlCheck:t?.html?t?.html==="Y"?"Y":"N":"Y",iconCheck:!t?.icon==="Y"?"Y":"N",content:t?.memo,imageList:t?.image})})}))},Ct=s=>{const[o,c]=g.useState(s.imageList),[t,f]=g.useState(s.content),[y,v]=g.useState(),x=g.useRef(),l=g.useRef(),m=g.useRef(null),i=g.useRef([]),{height:j}=Ce(),C={edTitle:s.title,edGbn:s.gbn?s.gbn:"etc",edDate:s.date,content:s.content,memoTxt:s.content,htmlCheck:"N",iconCheck:"N"},{register:N,handleSubmit:p,trigger:u,control:b,setValue:r,getValues:k,watch:d,formState:{errors:w,isSubmitting:T}}=Ee({mode:"onChange",defaultValues:C});g.useEffect(()=>{N("edDate"),N("memoTxt")},[]),g.useEffect(()=>{i.current=[],x.current=s.content,l.current=!1},[s.content]);const P=async n=>{await s.onPostSubmit(n,o,i.current)},L=()=>{p(P)()},E=n=>{console.log("onDelete.imageList=",n),c(n)},Y=n=>{console.log("onInsert.file",n);let h=x.current;n.ext==="jpg"||n.ext==="png"?(h+=`<img src='${n.url}'/>`,B(`<img src='${n.url}'/>
`)):n.ext==="pdf"?(h+=`<PDF>${n.url}</PDF>`,B(`<PDF>${n.url}</PDF>`)):n.ext==="mp4"?(h+=`<video preload="auto" controls="" src='${n.url}'></video>`,B(`<video preload="auto" controls="" src='${n.url}'></video>`)):(h+=`<a src='${n.url}'>${n.name}}</a>`,B(`다운로드
<a href="${n.url}" target="_blank">${n.name}</a>
`)),x.current=h},oe=n=>s.onRename(n,k("edTitle")),pe=n=>{x.current=n},ne=n=>{console.log("handleFileUpload",n),i.current=n};function V(n){B(`<img src='${n}'/>`)}function ae(){console.log("HtmlEditor.imageList=",o);let n="";o&&o.length>0&&o.map((h,S)=>{n+=`<img src="/data/memo/${h.key}.${h.ext}" style="width: 50px;"/>
`}),n!==""&&B(n)}const re=[{value:"none",label:"None"},{value:"react",label:"React"},{value:"css",label:"CSS"},{value:"android",label:"Android"},{value:"java",label:"JAVA"},{value:"image",label:"그림 / 사진"},{value:"etc",label:"기타"},{value:"mui",label:"MUI"}],le=["React","JavaScript","Bash","Html","CSS","SQL","Java","Kotlin","C++","C#","Command","Script","Python","Ruby","Go","Swift","Rust"],B=n=>{const h=m.current;if(h){const S=h.selectionStart,D=h.selectionEnd,U=t.slice(0,S),a=t.slice(D);f(U+n+a),r("memoTxt",U+n+a),setTimeout(()=>{h.selectionStart=h.selectionEnd=S+n.length,h.focus()},100)}},A=n=>{B(n)},ie=n=>n?/\.(jpg|jpeg|png|gif|bmp|webp|svg)/i.test(n)||n.includes("image")||n.includes("img"):!1,ce=async()=>{const n=await ct("memo/I3cTgdCxwjhBBno4mtZYvnODPJu1");console.log("onAllFile.result=",n)},z=async()=>{const n=await mt("memo/I3cTgdCxwjhBBno4mtZYvnODPJu1");console.log("onAllFile10.result=",n);let h="";n.map(S=>{h+=S+`
`}),B(h)},me=async()=>{const n=k("edFilePath");if(n===""){const h=[];let S=m.current.value;S=S.replace(/<img src="\/data\/memo\//g,""),S=S.replace(/ style="width: 50px;"/g,""),S=S.replace(/"\/>/g,""),S=S.replace(/ /g,""),S.split(`
`).forEach(async D=>{D.indexOf(".")>0&&(h.push(D),console.log(D))}),h.length>0&&(console.log(h),await s.onFilePathList(h))}else await s.onFilePath(n)},de=n=>new Promise((h,S)=>{const D=new Image;D.crossOrigin="anonymous",D.onload=()=>{const U=document.createElement("canvas"),a=U.getContext("2d");U.width=D.width,U.height=D.height,a.drawImage(D,0,0);try{const $=U.toDataURL("image/png");console.log("convertImageToBase64.base64=",$.substring(0,30)+"..."),h($)}catch($){S($)}},D.onerror=()=>{S(new Error("Failed to load image"))},D.src=n});return e.jsx("div",{className:"my-2 mb-[50px], w-full",children:e.jsxs("form",{onSubmit:p(P),style:{width:"100%",minHeight:"300px",maxHeight:{height:j},display:"flex",flexDirection:"column"},children:[e.jsx(Ae,{onSubmit:n=>L(),onCancel:s.onCancel,isSubmitting:T}),e.jsx(Fe,{control:b,onDelete:E,onInsert:Y,onRename:oe,setContent:pe,onFileUpload:ne,imageList:s.imageList}),e.jsxs("div",{className:"grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2 gap-2",children:[e.jsx("div",{className:"w-full",children:e.jsx(O,{name:"edTitle",placeholder:"제목",control:b,className:"w-full",rules:{required:"해당 필드는 필수입니다.",minLength:{value:2,message:"2글자 이상 입력해주세요."}},onChange:n=>{n.preventDefault(),r("edTitle",n.target.value)}})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Me,{name:"edGbn",label:"구분",control:b,rules:{required:!0},placeholder:"-- 구분 --",options:re,className:"",allClassName:"max-w-40",onChange:n=>{n.preventDefault();const h=n.target.value;console.log("edGbn=",k("edGbn")),r("edGbn",h)}}),e.jsx(Ue,{id:"edDate",name:"edDate",placeholder:"Select a date",control:b,onChange:(n,h)=>{console.log({dates:n,currentDateString:h}),r("edDate",h)}})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(O,{name:"edUrl",placeholder:"Base64로 만들 URL",control:b,className:"w-full",allClassName:"w-full",onChange:n=>{n.preventDefault();const h=n.target.value;console.log("edUrl=",h),r("edUrl",h),v(h)}}),e.jsx(I,{variant:"outlined",color:"success",className:"w-25 h-9",onClick:n=>{n.preventDefault(),V(k("edUrl2"))},children:"적용"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(O,{name:"edUrl2",placeholder:"Base64 이미지 데이터",className:"w-full",allClassName:"w-full",variant:"filled",size:"md",value:k("edUrl2")||""}),e.jsx(I,{variant:"outlined",color:"success",className:"w-25 h-9",onClick:n=>{n.preventDefault(),ae()},children:"첨부추가"})]}),e.jsxs("div",{className:"flex gap-2 w-full",children:[e.jsx(O,{name:"edFilePath",placeholder:"이미지리스트에 추가할 파일명",className:"w-full",allClassName:"w-full",control:b,onChange:n=>{n.preventDefault();const h=n.target.value;r("edFilePath",h)}}),e.jsx(I,{size:"sm",variant:"outlined",color:"success",className:"w-25 h-9",onClick:n=>{n.preventDefault(),me()},children:"파일경로"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{variant:"outlined",color:"success",onClick:n=>{n.preventDefault(),ce()},children:"전체파일"}),e.jsx(I,{variant:"outlined",color:"success",onClick:n=>{n.preventDefault(),z()},children:"전체파일10"})]})]}),e.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600 my-4"}),e.jsxs("div",{className:"grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsx("div",{className:"max-h-100 overflow-y-scroll",children:e.jsx(xe,{postData:t})})}),e.jsxs("div",{children:[e.jsx(Be,{ref:m,className:"",value:t,onChange:n=>{r("memoTxt",n),f(n)},rows:20}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 xsm:grid-cols-5 sm:grid-cols-7 md:grid-cols-7 lg:grid-cols-8",children:[e.jsx(F,{className:"cursor-pointer",variant:"light",color:"success",onClick:()=>A(`<box>
</box>`),children:"<Box>"}),e.jsx(F,{className:"cursor-pointer",variant:"light",color:"success",onClick:()=>A('<a href="/data/memo/" target="_blank"></a>'),children:"Link"}),e.jsx(F,{className:"cursor-pointer",variant:"light",color:"success",onClick:()=>A('<img src="/data/memo/"></img>'),children:"img"}),e.jsx(F,{className:"cursor-pointer",variant:"light",color:"success",onClick:()=>A('<video preload="auto" controls="" src="/memo/" style="width: 100%; height: 100%;"></video>'),children:"Video"}),e.jsx(F,{className:"cursor-pointer",variant:"light",color:"success",onClick:()=>A('<hr style="width=100%"/>'),children:"line"}),le.map((n,h)=>e.jsx(F,{className:"cursor-pointer",variant:"light",color:"dark",onClick:()=>A("<code>"+n+`
</code>`),children:n},h))]})]}),k("edUrl")&&ie(k("edUrl"))&&e.jsx("div",{className:"mt-2 p-2 border border-gray-300 dark:border-gray-600 rounded",children:e.jsx("img",{src:y,alt:"Preview",className:"max-w-full h-auto max-h-48 object-contain",onLoad:async n=>{try{const h=await de(y);r("edUrl2",h)}catch(h){console.error("Base64 conversion failed:",h)}},onError:n=>{n.target.style.display="none"}})})]}),e.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600 my-4"})]})})},$t=s=>{const{rootDb:o,isLoading:c,memoDetailData:t}=s,{scrollYProgress:f}=ge();he(f,{stiffness:100,damping:30,restDelta:.001});const y=G(),v=g.useRef();v.current=s.searchWord;const{memoId:x}=ue();se();const{user:l}=J();console.log("memoDetailData=",t);const m=()=>{const u=`/${o==="memo"?"m":o}/${x==="insert"?"":x}`;y(u)},i=async u=>{await W(l.uid,x,u)},j=async u=>{if(console.log("onFilePathList.fileNm=",u),u.length>0)for(let b=0;b<u.length;b++){const r=u[b];console.log("onFilePathList.file=",r);try{const k=await W(l.uid,x,r);console.log("onFilePathList.path=",k)}catch{console.log("onFilePathList.error=",r)}}else await W(l.uid,x,u)},C=async(u,b)=>{console.log("onNewSubmit.values",u);const r=await ee({rootDb:o,uid:l.uid,newData:!1,key:x,values:u});if(await te(`${o}_txt`,o,r,b),r!==void 0){const k=`/${o==="memo"?"m":o}/${r}`;y(k,{state:{reflash:!0}})}},N=async(u,b)=>{const r=o==="memo"?`${o}/${l.uid}/`:`${o}/`,k=await _e(r,u.key,b,u.ext);if(k.success){const d=o==="memo"?`${o}_txt/${l.uid}/${x}/image/`:`${o}_txt/${x}/image/`;return R(d+u.key,null),u.key=k.key,u.url=k.url,u.name=k.key+"."+u.ext,R(d+k.key,u),console.log("onRename.file",u),u}},p=async(u,b,r)=>{const k=o==="memo"?`${o}_txt/${l.uid}/`:`${o}_txt/`;o==="memo"?`${o}${l.uid}`:`${o}`,await Re(k,o==="memo"?`${o}/${l.uid}/`:`${o}/`,x,b),console.log("onPostSubmit.values",u);const d=await ee({rootDb:o,uid:l.uid,newData:!1,key:x==="insert"?"root":x,values:u});console.log("onPostSubmit.newKey=",d),console.log("onPostSubmit.files=",r);const w=await te(`${k}`,o==="memo"?`${o}/${l.uid}/`:`${o}/`,x,r);console.log("onNewSubmit.imageResult",w),o==="memo"&&R(`memo_tree/${l.uid}/${x}/title`,u.edTitle);const T=`/${o==="memo"?"m":o}/${x}`;o==="home"&&R("home/tree",null),y(T,{state:{reflash:!0}})};return g.useEffect(()=>{t&&t.title!==void 0&&fe({title:t.title,description:t.title});function u(){document.querySelectorAll("pre").forEach((b,r)=>{})}t&&t.memo!==null&&u()},[t]),x===""||l===void 0?e.jsx(e.Fragment,{}):(console.log("isLoading=",c),t===void 0||c?e.jsx(M,{}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-full p-0 m-0",children:t&&(t.title===void 0||t.title===""||t.title===null)?e.jsx(M,{}):e.jsx(Ct,{onPostSubmit:p,onNewSubmit:C,onCancel:m,onRename:N,onFilePath:i,onFilePathList:j,title:t?.title,gbn:t?.gbn,date:t?.date,htmlCheck:t?.html?t?.html==="Y"?"Y":"N":"Y",iconCheck:!t?.icon==="Y"?"Y":"N",content:t?.memo,imageList:t?.image})})}))};function St({initTreeData:s,userId:o,memoId:c,onClick:t}){const[f,y]=g.useState(s),{isMoble:v,height:x,width:l}=Je(),m=g.useRef(),i=g.useRef(),j=(p,u)=>{if(u.dragSource.id!==void 0&&u.dropTargetId!==void 0){const b=`memo_tree/${o}/${u.dragSource.id}/parent`;R(b,u.dropTargetId)}y(p)};g.useEffect(()=>{(()=>{if(s!=null){for(const u of s){const b=u.id;u.cnt=s.filter(r=>r.parent===b).length}y(s)}})()},[s]);const C=(p,u)=>{const b=[],r=k=>{const d=u.find(w=>w.id===k);if(!d)return!1;if(d.parent&&d.parent!=="root"){if(r(d.parent))return b.push(d.parent),!0}else return!0;return!1};return r(p)?b.reverse():[]},N=p=>{if(!f||!p||!i.current)return;const u=C(p,f);u.length>0&&setTimeout(()=>{i.current.open(u)},500)};return g.useEffect(()=>{m.current===void 0&&c!==void 0&&(m.current=c,N(c))},[f]),f===void 0||f===""?e.jsx(M,{}):f===null?e.jsx(e.Fragment,{}):e.jsx(Te,{backend:Le,options:De(),children:e.jsx("div",{className:"overflow-y-auto",style:{height:x-235-(v?56:0)+(l>1024?60:0),width:"100%"},children:e.jsx(Ie,{ref:i,tree:f,rootId:"root",onDrop:j,sort:!0,render:(p,{depth:u,isOpen:b,onToggle:r,isDragging:k,isDropTarget:d})=>e.jsxs("div",{className:`w-62 flex items-center rounded-sm
              text-gray-500 dark:text-gray-400 cursor-pointer select-none min-h-8 py-1 ml-1 ${k?"opacity-50":""} ${d?"bg-blue-200 dark:bg-blue-800":"hover:bg-gray-300 dark:hover:bg-gray-700"} 
              ${m.current===p.id?"bg-gray-200 dark:bg-gray-800 rounded-r-lg border-l-4 border-blue-500":""}
              `,style:{paddingLeft:u*20+(p.cnt===0?5:0)-(m.current===p.id?4:0)},children:[e.jsx("div",{className:"min-w-0",children:p.cnt>0&&e.jsx("div",{className:"hover:bg-white dark:hover:bg-gray-950 rounded-full",onClick:r,children:b?e.jsx(dt,{className:"size-6"}):e.jsx(ut,{className:"size-6"})})}),e.jsxs("div",{className:"flex items-center flex-1 min-w-0 justify-between",onClick:()=>{m.current=p.id,t(p)},children:[e.jsxs("div",{className:"flex truncate pr-2",children:[p.icon,p.text]}),p.cnt>0&&e.jsxs("div",{className:"text-gray-500 text-sm",children:["(",p.cnt,")"]})]})]})})})})}const Tt=s=>{const o=g.useRef(null);function c(){s.onSearchDataBtn(o.current.value)}function t(){return s.onNewMemoBtn(),!1}function f(y){y.which===13&&c()}return e.jsxs(e.Fragment,{children:[e.jsx(O,{id:"edSearch",type:"edSearch",name:"edSearch",inputRef:o,className:"w-full ",allClassName:"px-3 py-2",placeholder:"Enter Search...",fullWidth:!0,onKeyDownCapture:f}),e.jsxs("div",{className:"flex justify-center",children:[e.jsx(I,{variant:"outlined",color:"success",className:"m-1 p-1",onClick:t,children:"새글"}),e.jsx(I,{variant:"outlined",color:"brand",className:"m-1 p-1",onClick:y=>c(),children:"조회"})]})]})};async function Dt(s,o,c=""){if(o==null||o==="")return"";if(s==="home"){const m=await Se("home/tree");if(m!=null)try{return JSON.parse(m)}catch(i){console.error("Error parsing JSON data:",i)}}const t=s==="home"?"home_txt":c===""?`${s}_tree/${o}`:`${s}_txt/${o}`,f=ke(be(we,t)),y=await ye(f);if(!y.exists())return console.log("getTreeData.null"),null;if(!y.exists())return console.log("getTreeData.exists"),null;const v=y.val(),x=[{text:"1.React",id:"react",key:"react",parent:"root"},{text:"2.CSS",id:"css",key:"css",parent:"root"},{text:"3.Android",id:"android",key:"android",parent:"root"},{text:"4.Java",id:"java",key:"java",parent:"root"},{text:"5.이미지",id:"image",key:"image",parent:"root"},{text:"6.Etc",id:"etc",key:"etc",parent:"root"}],l=[];s==="home"&&l.push(...x);for(const m in v){const i=v[m];i.id=m;const j={id:m,key:m,text:i.title,parent:s==="home"?i.gbn:i.parent};s==="memo"?(j.icon=i.bm==="Y"?e.jsx(Pe,{className:"text-red-500"}):i.icon==="Y"?e.jsx(ht,{}):null,j.droppable=!0):j.droppable=!1,!((c===""||c===void 0||c===null)&&(j.parent===void 0||j.parent===null||j.parent===""))&&(s==="home"||c===""||c===void 0||c===null?l.push(j):(i.id=m,(i.memo+"").toLowerCase().indexOf(c.toLowerCase())>-1&&(j.parent="root",j.droppable=!1,l.push(j))))}return l.sort((m,i)=>m.title>i.title?1:-1),s==="home"&&R("home/tree",JSON.stringify(l)),l}function Lt({data:s}){const[o,c]=g.useState([44,55,41,17,15]),[t,f]=g.useState({labels:["Comedy","Action","SciFi","Drama","Horror"],responsive:[{breakpoint:480,options:{chart:{width:"100%"},legend:{position:"bottom"}}}]});return g.useEffect(()=>{if(s&&s.length>0){const y=s.filter(m=>m.parent==="root").sort((m,i)=>m.text.localeCompare(i.text)),v=(m,i)=>{const j=i.filter(N=>N.parent===m);let C=j.length;for(const N of j)C+=v(N.id,i);return C},x=y.map(m=>m.text),l=y.map(m=>v(m.id,s));c(l),f(m=>({...m,labels:x}))}},[s]),e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-sm",children:[e.jsx("div",{className:"flex justify-between items-center p-2 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"건수 통계"})}),e.jsx("div",{className:"p-2",children:o.length>0?e.jsx(ft,{type:"donut",series:o,options:t}):e.jsx("div",{className:"text-center text-gray-500 py-10",children:"표시할 데이터가 없습니다."})})]})}const It=({data:s,onNewMemoBtn:o,title:c,rootDb:t})=>{const{user:f}=J();return e.jsxs("div",{className:"justify-items-center",children:[e.jsx("h3",{children:c}),f===null?e.jsx("div",{className:"text-red-500 font-bold text-lg mt-3",children:"로그인해야 이용 가능합니다."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{children:"사이드 메뉴에서"}),e.jsx("div",{children:"'새글' 버튼을 사용해 메모를 작성합니다."})]}),e.jsx(xt,{}),e.jsx("div",{className:"mt-3 flex"}),e.jsx("div",{className:"w-full",children:e.jsx(Lt,{data:s})})]})},_s=({rootDb:s})=>{const o=G(),{user:c}=J(),t=g.useRef(),f=g.useRef(!0),y=g.useRef(),v=g.useRef(),[x,l]=g.useState(),m=g.useRef(!1),i=se(),j=g.useRef(!1);j.current=i?.state?.reflash===!0;const C=ze({queryKey:["twTreeData",c?.uid,t.current],queryFn:()=>Dt(s,c?.uid,t.current)});C.data!==void 0&&C.data!==""&&!m.current&&(m.current=!0);const N=()=>{const d=x;d&&(d.bookmark=d.bookmark==="Y"?"N":"Y"),console.log("onBookmark.memoDetailData.bookmark=",d.bookmark),console.log("onBookmark.rootDb=",s);const w=s==="memo"?`memo_tree/${c.uid}/${v.current}/bm`:`home_txt/${v.current}/bookmark`;R(w,x.bookmark),l({...x,bookmark:d.bookmark})};g.useEffect(()=>{c!==void 0&&c!=null&&C.refetch()},[c]),g.useEffect(()=>{const d=async P=>{if(P!==""&&c){const L=await gt(s,c?.uid,P,t.current);s==="memo"&&(L.path=Ft(C.data,P)),L.code==="404"&&(L.title="No title"),f.current=!1,l(L===void 0?{}:L)}},w=i.pathname.split("/"),T=w.length>2?w[w.length-1]:"";f.current=!0,d(T),v.current=T},[i.pathname,c,j.current]),g.useEffect(()=>{c!==void 0&&c!=null&&C.refetch()},[j.current]);const p=d=>{m.current=!1,d!==void 0&&(t.current=d),C.refetch()},u=d=>{d.id!==v.current&&(f.current=!0,o(`/${s==="memo"?"m":s}/${d.id}`))},b=()=>{if(c==null){alert("로그인 후 이용 가능합니다.");return}const d=`/${s==="memo"?"m":s}/insert/insert`;o(d)},r=d=>{},k=e.jsxs("div",{className:"w-[270px]",children:[e.jsx("div",{className:"mt-3 flex items-center justify-center",children:e.jsx(Ze,{to:s==="memo"?"/m":"/home",children:s==="memo"?"메모장":"홈관리"})}),e.jsxs("div",{className:"flex gap-7 justify-center",children:[s==="memo"?"":e.jsx(X,{to:"/m",children:"메모"}),s==="memo"&&c?.uid===Ne?e.jsx(X,{to:"/home",children:"홈관리"}):null,e.jsx(X,{to:"/todo",children:"TODO"}),e.jsx(X,{to:"/tw",children:"Sheet"})]}),c!==null&&e.jsx(Tt,{onNewMemoBtn:b,onSearchDataBtn:p}),m.current&&C.isFetched?e.jsx(St,{expandIndex:y.current,initTreeData:C.data,userId:c?.uid,memoId:v.current,onClick:u}):c===null?e.jsx(e.Fragment,{}):e.jsx(M,{})]});return e.jsxs(Ke,{sideType:"memo",title:s==="memo"?"메모장":"홈페이지관리",sideContents:k,children:[e.jsx(g.Suspense,{fallback:e.jsx(M,{}),children:e.jsxs(Ve,{children:[e.jsx(K,{path:"/edit/:memoId",element:e.jsx(je,{rootDb:s,isLoading:f.current,searchWord:t.current,memoDetailData:x})}),e.jsx(K,{path:"/insert/:memoId",element:e.jsx(je,{rootDb:s,isLoading:f.current,searchWord:t.current,memoDetailData:x})}),e.jsx(K,{path:"/util/:memoId",element:e.jsx($t,{rootDb:s,isLoading:f.current,searchWord:t.current,memoDetailData:x})}),e.jsx(K,{path:"/:memoId",element:e.jsx(kt,{rootDb:s,isLoading:f.current,searchWord:t.current,memoDetailData:x,onTreeUpdate:p,onBookmark:N,data:C.data})}),e.jsx(K,{path:"*",element:e.jsx(It,{searchWord:t.current,data:C.data,onNewMemoBtn:b,title:s==="memo"?"메모장 홈":"홈페이지관리 홈",rootDb:s})})]})}),s==="memo"?e.jsx(vt,{onSelected:r}):"",e.jsx(Qe,{})]})},Ft=(s,o)=>{let c=[],t=o;if(!s)return c;const f=s.find(y=>y.id===t);for(c.unshift(f),t=f?.parent;t!=null&&t!==""&&t!=="root";){const y=s.find(v=>v.id===t);t=y?.parent,c.unshift(y)}return c};export{_s as default};
