const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MemoSheet-D6tYD3Eh.js","assets/index-JdItkxIf.js","assets/index-Crj04qPt.css","assets/TwToast-B2pQUjnG.js","assets/ComponentCard-gc_4CLHY.js","assets/fireMemoDetail-DoFH4UqO.js","assets/HomeChartSemiDonut-CMDpRJ5E.js","assets/Favorite-CCYa_qOD.js","assets/angle-right-C5TjQODv.js","assets/HtmlCode-CuIX5N0Y.js","assets/copy-ilyuMBci.js","assets/TwRadio-B2Zo6k2-.js","assets/TwBadge-IwNkunCD.js","assets/HtmlCode-CF8DqKsA.js","assets/HtmlCode-3_RXYstj.css","assets/toPropertyKey-DCwh5dYN.js","assets/SinyImageList-bopZAfIf.js","assets/ImageListItem-BWbzdRsu.js","assets/CodeText-BaHaEabA.js","assets/CodeText-f22R9RB0.css","assets/MemoDetailGrid-BTSJUvnQ.js","assets/IpInfo-D6j-ISZn.js","assets/MemoDetail-UhCuASow.css","assets/MemoSheetGrid-D4TBXdNR.js","assets/MemoDetailEdit-BsiPCe6G.js","assets/useMemoMutation-DMPvhT2x.js","assets/Delete-EsLP-Hvc.js","assets/Divider-Dk1jiNEm.js","assets/TwCheckbox-CZrDZk8G.js","assets/TwTextArea-BWruNNvP.js","assets/SinySelect-BdddHF3X.js","assets/Grid-Bp1KQ_W_.js","assets/index-BgqJMyTs.js","assets/TextField-DdIr29SW.js","assets/InputAdornment-DezO-gTV.js","assets/Popper-CptKoAPc.js","assets/Button-CFRLcuFm.js","assets/Chip-BgT7a4Ep.js","assets/MemoDetailEdit-Cmdt2tIm.css","assets/TwMemoDetailUtil-MmUS71PR.js","assets/HomeChartVisitors-CEXYtv8g.js","assets/MemoBookMark-DY2LwU5H.js","assets/folder-DORfYDux.js"])))=>i.map(i=>d[i]);
import{e3 as Oe,e4 as In,e5 as Dr,e6 as Tr,e7 as Lr,e8 as $r,e9 as zr,ea as Ar,eb as On,ec as Ir,ed as Or,ee as _n,ef as Ke,eg as Bn,r as d,eh as _r,ei as Fn,ej as cn,ek as Br,cc as he,z as Ft,i as Wn,el as Hn,G as V,bm as Fr,A as Wt,D as Ht,E as Wr,j as s,q as Be,bi as Pn,em as Hr,h as De,y as T,cg as Pr,bp as Vn,bq as Xn,a2 as Ee,k as _,aK as Ge,O as Vr,en as Xr,cj as Pt,bf as U,J as dn,c4 as un,c5 as fn,ca as Yr,c9 as qr,c6 as Kr,o as Vt,n as Gr,f as vt,eo as Lt,m as $t,p as Ur,bR as Qr,R as Jr,c as Re,_ as Te,ep as Zr,K as es,eq as ts,bV as ns,er as rs}from"./index-JdItkxIf.js";import{f as ss,s as os,g as as,a as is,b as ls}from"./fireMemoDetail-DoFH4UqO.js";import{H as cs,a as ds,b as us}from"./HomeChartSemiDonut-CMDpRJ5E.js";import{F as fs}from"./Favorite-CCYa_qOD.js";import{a as hs,S as Yn,b as gs,c as ms}from"./angle-right-C5TjQODv.js";import{a as ps,C as xs}from"./ComponentCard-gc_4CLHY.js";import{b as vs,H as bs}from"./HtmlCode-CuIX5N0Y.js";import{S as ys}from"./SinyImageList-bopZAfIf.js";import"./CodeText-BaHaEabA.js";/* empty css                   */import{T as ws,M as js}from"./MemoDetailGrid-BTSJUvnQ.js";import{I as Cs}from"./IpInfo-D6j-ISZn.js";function qn(e,t){let n;const r=()=>{const{currentTime:o}=t,l=(o===null?0:o.value)/100;n!==l&&e(l),n=l};return Oe.update(r,!0),()=>In(r)}const ut=new WeakMap;let Se;function Ns(e,t){if(t){const{inlineSize:n,blockSize:r}=t[0];return{width:n,height:r}}else return e instanceof SVGElement&&"getBBox"in e?e.getBBox():{width:e.offsetWidth,height:e.offsetHeight}}function Ss({target:e,contentRect:t,borderBoxSize:n}){var r;(r=ut.get(e))===null||r===void 0||r.forEach(o=>{o({target:e,contentSize:t,get size(){return Ns(e,n)}})})}function ks(e){e.forEach(Ss)}function Es(){typeof ResizeObserver>"u"||(Se=new ResizeObserver(ks))}function Rs(e,t){Se||Es();const n=Dr(e);return n.forEach(r=>{let o=ut.get(r);o||(o=new Set,ut.set(r,o)),o.add(t),Se?.observe(r)}),()=>{n.forEach(r=>{const o=ut.get(r);o?.delete(t),o?.size||Se?.unobserve(r)})}}const ft=new Set;let Qe;function Ms(){Qe=()=>{const e={width:window.innerWidth,height:window.innerHeight},t={target:window,size:e,contentSize:e};ft.forEach(n=>n(t))},window.addEventListener("resize",Qe)}function Ds(e){return ft.add(e),Qe||Ms(),()=>{ft.delete(e),!ft.size&&Qe&&(Qe=void 0)}}function Ts(e,t){return typeof e=="function"?Ds(e):Rs(e,t)}const Ls=50,hn=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),$s=()=>({time:0,x:hn(),y:hn()}),zs={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function gn(e,t,n,r){const o=n[t],{length:a,position:l}=zs[t],i=o.current,u=n.time;o.current=e[`scroll${l}`],o.scrollLength=e[`scroll${a}`]-e[`client${a}`],o.offset.length=0,o.offset[0]=0,o.offset[1]=o.scrollLength,o.progress=Tr(0,o.scrollLength,o.current);const c=r-u;o.velocity=c>Ls?0:Lr(o.current-i,c)}function As(e,t,n){gn(e,"x",t,n),gn(e,"y",t,n),t.time=n}function Is(e,t){const n={x:0,y:0};let r=e;for(;r&&r!==t;)if(r instanceof HTMLElement)n.x+=r.offsetLeft,n.y+=r.offsetTop,r=r.offsetParent;else if(r.tagName==="svg"){const o=r.getBoundingClientRect();r=r.parentElement;const a=r.getBoundingClientRect();n.x+=o.left-a.left,n.y+=o.top-a.top}else if(r instanceof SVGGraphicsElement){const{x:o,y:a}=r.getBBox();n.x+=o,n.y+=a;let l=null,i=r.parentNode;for(;!l;)i.tagName==="svg"&&(l=i),i=r.parentNode;r=l}else break;return n}const zt={start:0,center:.5,end:1};function mn(e,t,n=0){let r=0;if(e in zt&&(e=zt[e]),typeof e=="string"){const o=parseFloat(e);e.endsWith("px")?r=o:e.endsWith("%")?e=o/100:e.endsWith("vw")?r=o/100*document.documentElement.clientWidth:e.endsWith("vh")?r=o/100*document.documentElement.clientHeight:e=o}return typeof e=="number"&&(r=t*e),n+r}const Os=[0,0];function _s(e,t,n,r){let o=Array.isArray(e)?e:Os,a=0,l=0;return typeof e=="number"?o=[e,e]:typeof e=="string"&&(e=e.trim(),e.includes(" ")?o=e.split(" "):o=[e,zt[e]?e:"0"]),a=mn(o[0],n,r),l=mn(o[1],t),a-l}const Bs={All:[[0,0],[1,1]]},Fs={x:0,y:0};function Ws(e){return"getBBox"in e&&e.tagName!=="svg"?e.getBBox():{width:e.clientWidth,height:e.clientHeight}}function Hs(e,t,n){const{offset:r=Bs.All}=n,{target:o=e,axis:a="y"}=n,l=a==="y"?"height":"width",i=o!==e?Is(o,e):Fs,u=o===e?{width:e.scrollWidth,height:e.scrollHeight}:Ws(o),c={width:e.clientWidth,height:e.clientHeight};t[a].offset.length=0;let f=!t[a].interpolate;const g=r.length;for(let m=0;m<g;m++){const h=_s(r[m],c[l],u[l],i[a]);!f&&h!==t[a].interpolatorOffsets[m]&&(f=!0),t[a].offset[m]=h}f&&(t[a].interpolate=$r(t[a].offset,zr(r),{clamp:!1}),t[a].interpolatorOffsets=[...t[a].offset]),t[a].progress=Ar(0,1,t[a].interpolate(t[a].current))}function Ps(e,t=e,n){if(n.x.targetOffset=0,n.y.targetOffset=0,t!==e){let r=t;for(;r&&r!==e;)n.x.targetOffset+=r.offsetLeft,n.y.targetOffset+=r.offsetTop,r=r.offsetParent}n.x.targetLength=t===e?t.scrollWidth:t.clientWidth,n.y.targetLength=t===e?t.scrollHeight:t.clientHeight,n.x.containerLength=e.clientWidth,n.y.containerLength=e.clientHeight}function Vs(e,t,n,r={}){return{measure:()=>Ps(e,r.target,n),update:o=>{As(e,n,o),(r.offset||r.target)&&Hs(e,n,r)},notify:()=>t(n)}}const qe=new WeakMap,pn=new WeakMap,kt=new WeakMap,xn=e=>e===document.documentElement?window:e;function Xt(e,{container:t=document.documentElement,...n}={}){let r=kt.get(t);r||(r=new Set,kt.set(t,r));const o=$s(),a=Vs(t,e,o,n);if(r.add(a),!qe.has(t)){const i=()=>{for(const m of r)m.measure()},u=()=>{for(const m of r)m.update(On.timestamp)},c=()=>{for(const m of r)m.notify()},f=()=>{Oe.read(i,!1,!0),Oe.read(u,!1,!0),Oe.update(c,!1,!0)};qe.set(t,f);const g=xn(t);window.addEventListener("resize",f,{passive:!0}),t!==document.documentElement&&pn.set(t,Ts(t,f)),g.addEventListener("scroll",f,{passive:!0})}const l=qe.get(t);return Oe.read(l,!1,!0),()=>{var i;In(l);const u=kt.get(t);if(!u||(u.delete(a),u.size))return;const c=qe.get(t);qe.delete(t),c&&(xn(t).removeEventListener("scroll",c),(i=pn.get(t))===null||i===void 0||i(),window.removeEventListener("resize",c))}}function Xs({source:e,container:t,axis:n="y"}){e&&(t=e);const r={value:0},o=Xt(a=>{r.value=a[n].progress*100},{container:t,axis:n});return{currentTime:r,cancel:o}}const Et=new Map;function Kn({source:e,container:t=document.documentElement,axis:n="y"}={}){e&&(t=e),Et.has(t)||Et.set(t,{});const r=Et.get(t);return r[n]||(r[n]=Or()?new ScrollTimeline({source:t,axis:n}):Xs({source:t,axis:n})),r[n]}function Ys(e){return e.length===2}function Gn(e){return e&&(e.target||e.offset)}function qs(e,t){return Ys(e)||Gn(t)?Xt(n=>{e(n[t.axis].progress,n)},t):qn(e,Kn(t))}function Ks(e,t){if(e.flatten(),Gn(t))return e.pause(),Xt(n=>{e.time=e.duration*n[t.axis].progress},t);{const n=Kn(t);return e.attachTimeline?e.attachTimeline(n,r=>(r.pause(),qn(o=>{r.time=r.duration*o},n))):Ir}}function Gs(e,{axis:t="y",...n}={}){const r={axis:t,...n};return typeof e=="function"?qs(e,r):Ks(e,r)}function vn(e,t){_r(!!(!t||t.current))}const Us=()=>({scrollX:Ke(0),scrollY:Ke(0),scrollXProgress:Ke(0),scrollYProgress:Ke(0)});function Qs({container:e,target:t,layoutEffect:n=!0,...r}={}){const o=_n(Us);return(n?Bn:d.useEffect)(()=>(vn("target",t),vn("container",e),Gs((l,{x:i,y:u})=>{o.scrollX.set(i.current),o.scrollXProgress.set(i.progress),o.scrollY.set(u.current),o.scrollYProgress.set(u.progress)},{...r,container:e?.current||void 0,target:t?.current||void 0})),[e,t,JSON.stringify(r.offset)]),o}function Js(e){const t=_n(()=>Ke(e)),{isStatic:n}=d.useContext(Fn);if(n){const[,r]=d.useState(e);d.useEffect(()=>t.on("change",r),[])}return t}function bn(e){return typeof e=="number"?e:parseFloat(e)}function Zs(e,t={}){const{isStatic:n}=d.useContext(Fn),r=d.useRef(null),o=Js(cn(e)?bn(e.get()):e),a=d.useRef(o.get()),l=d.useRef(()=>{}),i=()=>{const c=r.current;c&&c.time===0&&c.sample(On.delta),u(),r.current=Br({keyframes:[o.get(),a.current],velocity:o.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...t,onUpdate:l.current})},u=()=>{r.current&&r.current.stop()};return d.useInsertionEffect(()=>o.attach((c,f)=>n?f(c):(a.current=c,l.current=f,Oe.update(i),o.get()),u),[JSON.stringify(t)]),Bn(()=>{if(cn(e))return e.on("change",c=>o.set(bn(c)))},[o]),o}const eo=async(e,t)=>{const n=[];let r=t;if(!e||!r)return n;for(;r&&r!=="root";){const o=await he(`memo_tree/${e}/${r}`);if(!o)break;n.unshift({id:r,...o}),r=o.parent}return n};function to(e,t,n,r){const o=Ft(),{data:a,isLoading:l}=Wn({queryKey:["memoDetail",e,t?.uid,n],queryFn:async()=>{if(!n||!t||n==="insert")return{};if(e==="memo"||e==="home"){const c=await ss(e,t.uid,n);if(c&&e==="memo"){c.path=await eo(t?.uid,n);const f=await he(`memo_tree/${t.uid}/${n}/bm`);c.bookmark=f==="Y"?"Y":"N"}return c||{}}else if(e==="sheet")return{title:await he(`memo_sheet/${t.uid}/${n}/title`)}},enabled:!!t&&!!n,staleTime:1e3*60*5}),{mutate:i}=Hn({mutationFn:async c=>{const f=e==="memo"?`memo_tree/${t.uid}/${n}/bm`:`home_txt/${n}/bookmark`;await V(f,c)},onMutate:async c=>{await o.cancelQueries({queryKey:["memoDetail",e,t?.uid,n]});const f=o.getQueryData(["memoDetail",e,t?.uid,n]);return o.setQueryData(["memoDetail",e,t?.uid,n],g=>({...g,bookmark:c})),{previousMemoDetail:f}},onError:(c,f,g)=>{o.setQueryData(["memoDetail",e,t?.uid,n],g.previousMemoDetail)},onSettled:()=>{o.invalidateQueries({queryKey:["memoDetail",e,t?.uid,n],refetchType:"all"}),o.invalidateQueries({queryKey:["twTreeData",e],refetchType:"all"}),o.invalidateQueries({queryKey:["bookmarks",t?.uid],refetchType:"all"}),r(!0)}});return{memoDetailData:a,isLoading:l,onBookmark:()=>{if(!a)return;const c=a.bookmark==="Y"?"N":"Y";i(c)}}}async function no(e,t,n=""){if(t==null||t==="")return"";if(e==="home"){const c=await he("home/tree");if(c!=null)try{return JSON.parse(c)}catch(f){console.error("Error parsing JSON data:",f)}}const r=e==="home"?"home_txt":n===""?`${e}_tree/${t}`:`${e}_txt/${t}`,o=Fr(Wt(Ht,r)),a=await Wr(o);if(!a.exists()||!a.exists())return null;const l=a.val(),i=[{text:"1.React",id:"react",key:"react",parent:"root"},{text:"2.CSS",id:"css",key:"css",parent:"root"},{text:"3.Android",id:"android",key:"android",parent:"root"},{text:"4.Java",id:"java",key:"java",parent:"root"},{text:"5.이미지",id:"image",key:"image",parent:"root"},{text:"6.Etc",id:"etc",key:"etc",parent:"root"}],u=[];e==="home"&&u.push(...i);for(const c in l){const f=l[c];f.id=c;const g={id:c,key:c,text:f.title,parent:e==="home"?f.gbn:f.parent};e==="memo"?(g.icon=f.bm==="Y"?s.jsx(fs,{className:"text-red-500"}):f.icon==="Y"?s.jsx(hs,{}):null,g.droppable=!0):g.droppable=!1,!((n===""||n===void 0||n===null)&&(g.parent===void 0||g.parent===null||g.parent===""))&&(e==="home"||n===""||n===void 0||n===null?u.push(g):(f.id=c,(f.memo+"").toLowerCase().indexOf(n.toLowerCase())>-1&&(g.parent="root",g.droppable=!1,u.push(g))))}return u.sort((c,f)=>c.title>f.title?1:-1),e==="home"&&V("home/tree",JSON.stringify(u)),u}const ro=({rootDb:e})=>{const{user:t}=Be(),[n,r]=Pn(Hr(e)),{t:o}=De(),[a,l]=d.useState({labels:[],series:[]}),i=["#6366f1","#3b82f6","#22c55e","#ef4444","#f97316","#eab308","#8b5cf6","#d946ef","#14b8a6","#a855f7"],u=async()=>{const g=await no(e==="sheet"?"memo":e,t?.uid);c(g)};d.useEffect(()=>{n&&n.labels&&n.labels.length>0?l(n):u()},[e,t,n,r]);const c=g=>{if(g&&g.length>0){const m=g.filter(v=>v.parent==="root").sort((v,y)=>v.text.localeCompare(y.text)),h=(v,y)=>{const C=y.filter(S=>S.parent===v);let R=C.length;for(const S of C)R+=h(S.id,y);return R},x=m.map(v=>v.text),p=m.map(v=>h(v.id,g)),b={labels:x,series:p};l(b),r(b)}},f=()=>{u()};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:`HomeChartForm ${T.between} bg-[#f1f1f1] dark:bg-[#181818] p-2`,children:[s.jsx("div",{className:"px-6 py-5",children:s.jsx(ps,{title:o("count_stats")})}),s.jsx("button",{onClick:f,className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors mr-2","aria-label":o("reload_chart"),children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-600 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h5M20 20v-5h-5M4 4l1.5 1.5A9 9 0 0121.5 12M20 20l-1.5-1.5A9 9 0 012.5 12"})})})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 w-full gap-2 justify-center",children:[s.jsx(cs,{series:a.series,labels:a.labels,colors:i}),s.jsx(Pr,{series:[{name:o("count"),data:a.series}],labels:a.labels,colors:i}),s.jsx(ds,{series:[{name:o("count"),data:a.series}],labels:a.labels,colors:i}),s.jsx(us,{series:a.series,labels:a.labels,colors:i})]})]})},so=async(e,t)=>(await he(e)===void 0||V(e,null),V(t,null),"OK"),$i=async({rootDb:e,uid:t,newData:n=!1,key:r,values:o})=>{const a=e==="memo"?`${e}_txt/${t}/`:`${e}_txt/`,l=e==="memo"?`${e}_tree/${t}/`:`${e}/`;let i=r;n&&(i=Vn(Xn(Wt(Ht),l)).key),console.log("setFireDetailData.values=",o);const u=a+i;return V(u+"/title",o.edTitle),o.htmlCheck==="N"||o.htmlCheck==="sheet"?V(u+"/memo",o.memoTxt):V(u+"/memo",o.content),V(u+"/date",o.edDate),V(u+"/gbn",o.edGbn),V(u+"/html",o.htmlCheck),n&&e!=="home"&&(V(`${l}/${i}/key`,i),V(`${l}/${i}/parent`,r)),e!=="home"&&(V(`${l}${i}/title`,o.edTitle),V(`${l}${i}/icon`,o.iconCheck)),i},zi=async(e,t,n,r)=>{if(r!==void 0)for(let o=0;o<r.length;o++){const a=r[o];a.del==="Y"&&(V(`${e}/${n}/image/${a.key}`,null),os(t,n,a))}},Ai=async(e,t,n,r)=>{for(let o=0;o<r.length;o++){const a=r[o].object,i={ext:as(a.name),name:a.name,use:"Y",sever:""},u=Vn(Xn(Wt(Ht),e+"/image")).key,c=await is(t,n,u,a);i.sever=ls(c.metadata.name);const f=`${e}${n}/image/${i.sever}`;V(f,i)}},yn=e=>{const{t}=De();return s.jsxs("div",{className:"mx-auto grid w-full max-w-md grid-cols-4 items-center justify-center gap-2 px-4 py-2 text-center",children:[e.master&&s.jsx(Ee,{size:"sm",variant:"outlined",color:"brand",onClick:e.onUtil,className:"gap-1.5",children:s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),s.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),s.jsx("span",{className:"ml-2 whitespace-nowrap",children:t("util")})]})}),s.jsx(Ee,{size:"sm",variant:"outlined",color:"brand",onClick:e.onEdit,className:"gap-1.5",children:s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),s.jsx("path",{d:"m15 5 4 4"})]}),s.jsx("span",{className:"ml-2 whitespace-nowrap",children:t("edit")})]})}),s.jsx(Ee,{size:"sm",variant:"outlined",color:"brand",onClick:e.onNewMemo,className:"gap-1.5",children:s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M5 12h14"}),s.jsx("path",{d:"M12 5v14"})]}),s.jsx("span",{className:"ml-2 whitespace-nowrap",children:t("new")})]})}),s.jsx(Ee,{size:"sm",variant:"outlined",color:"error",onClick:e.onDelete,className:"gap-1.5",children:s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M3 6h18"}),s.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),s.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),s.jsx("span",{className:"ml-2 whitespace-nowrap",children:t("delete")})]})})]})};function oo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.useMemo(()=>r=>{t.forEach(o=>o(r))},t)}const bt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Fe(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Yt(e){return"nodeType"in e}function J(e){var t,n;return e?Fe(e)?e:Yt(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function qt(e){const{Document:t}=J(e);return e instanceof t}function rt(e){return Fe(e)?!1:e instanceof J(e).HTMLElement}function Un(e){return e instanceof J(e).SVGElement}function We(e){return e?Fe(e)?e.document:Yt(e)?qt(e)?e:rt(e)||Un(e)?e.ownerDocument:document:document:document}const ge=bt?d.useLayoutEffect:d.useEffect;function Kt(e){const t=d.useRef(e);return ge(()=>{t.current=e}),d.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}function ao(){const e=d.useRef(null),t=d.useCallback((r,o)=>{e.current=setInterval(r,o)},[]),n=d.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function tt(e,t){t===void 0&&(t=[e]);const n=d.useRef(e);return ge(()=>{n.current!==e&&(n.current=e)},t),n}function st(e,t){const n=d.useRef();return d.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function gt(e){const t=Kt(e),n=d.useRef(null),r=d.useCallback(o=>{o!==n.current&&t?.(o,n.current),n.current=o},[]);return[n,r]}function At(e){const t=d.useRef();return d.useEffect(()=>{t.current=e},[e]),t.current}let Rt={};function ot(e,t){return d.useMemo(()=>{if(t)return t;const n=Rt[e]==null?0:Rt[e]+1;return Rt[e]=n,e+"-"+n},[e,t])}function Qn(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((a,l)=>{const i=Object.entries(l);for(const[u,c]of i){const f=a[u];f!=null&&(a[u]=f+e*c)}return a},{...t})}}const _e=Qn(1),mt=Qn(-1);function io(e){return"clientX"in e&&"clientY"in e}function Gt(e){if(!e)return!1;const{KeyboardEvent:t}=J(e.target);return t&&e instanceof t}function lo(e){if(!e)return!1;const{TouchEvent:t}=J(e.target);return t&&e instanceof t}function It(e){if(lo(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return io(e)?{x:e.clientX,y:e.clientY}:null}const Me=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Me.Translate.toString(e),Me.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),wn="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function co(e){return e.matches(wn)?e:e.querySelector(wn)}const uo={display:"none"};function fo(e){let{id:t,value:n}=e;return _.createElement("div",{id:t,style:uo},n)}function ho(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return _.createElement("div",{id:t,style:o,role:"status","aria-live":r,"aria-atomic":!0},n)}function go(){const[e,t]=d.useState("");return{announce:d.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const Jn=d.createContext(null);function mo(e){const t=d.useContext(Jn);d.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function po(){const[e]=d.useState(()=>new Set),t=d.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[d.useCallback(r=>{let{type:o,event:a}=r;e.forEach(l=>{var i;return(i=l[o])==null?void 0:i.call(l,a)})},[e]),t]}const xo={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},vo={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function bo(e){let{announcements:t=vo,container:n,hiddenTextDescribedById:r,screenReaderInstructions:o=xo}=e;const{announce:a,announcement:l}=go(),i=ot("DndLiveRegion"),[u,c]=d.useState(!1);if(d.useEffect(()=>{c(!0)},[]),mo(d.useMemo(()=>({onDragStart(g){let{active:m}=g;a(t.onDragStart({active:m}))},onDragMove(g){let{active:m,over:h}=g;t.onDragMove&&a(t.onDragMove({active:m,over:h}))},onDragOver(g){let{active:m,over:h}=g;a(t.onDragOver({active:m,over:h}))},onDragEnd(g){let{active:m,over:h}=g;a(t.onDragEnd({active:m,over:h}))},onDragCancel(g){let{active:m,over:h}=g;a(t.onDragCancel({active:m,over:h}))}}),[a,t])),!u)return null;const f=_.createElement(_.Fragment,null,_.createElement(fo,{id:r,value:o.draggable}),_.createElement(ho,{id:i,announcement:l}));return n?Ge.createPortal(f,n):f}var F;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(F||(F={}));function pt(){}function yo(e,t){return d.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function wo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const le=Object.freeze({x:0,y:0});function jo(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Co(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function No(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function So(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function jn(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const ko=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=jn(t,t.left,t.top),a=[];for(const l of r){const{id:i}=l,u=n.get(i);if(u){const c=jo(jn(u),o);a.push({id:i,data:{droppableContainer:l,value:c}})}}return a.sort(Co)};function Eo(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),l=o-r,i=a-n;if(r<o&&n<a){const u=t.width*t.height,c=e.width*e.height,f=l*i,g=f/(u+c-f);return Number(g.toFixed(4))}return 0}const Ro=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=[];for(const a of r){const{id:l}=a,i=n.get(l);if(i){const u=Eo(i,t);u>0&&o.push({id:l,data:{droppableContainer:a,value:u}})}}return o.sort(No)};function Mo(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Zn(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:le}function Do(e){return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return o.reduce((l,i)=>({...l,top:l.top+e*i.y,bottom:l.bottom+e*i.y,left:l.left+e*i.x,right:l.right+e*i.x}),{...n})}}const To=Do(1);function Lo(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function $o(e,t,n){const r=Lo(t);if(!r)return e;const{scaleX:o,scaleY:a,x:l,y:i}=r,u=e.left-l-(1-o)*parseFloat(n),c=e.top-i-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),f=o?e.width/o:e.width,g=a?e.height/a:e.height;return{width:f,height:g,top:c,right:u+f,bottom:c+g,left:u}}const zo={ignoreTransform:!1};function He(e,t){t===void 0&&(t=zo);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:c,transformOrigin:f}=J(e).getComputedStyle(e);c&&(n=$o(n,c,f))}const{top:r,left:o,width:a,height:l,bottom:i,right:u}=n;return{top:r,left:o,width:a,height:l,bottom:i,right:u}}function Cn(e){return He(e,{ignoreTransform:!0})}function Ao(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Io(e,t){return t===void 0&&(t=J(e).getComputedStyle(e)),t.position==="fixed"}function Oo(e,t){t===void 0&&(t=J(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const a=t[o];return typeof a=="string"?n.test(a):!1})}function Ut(e,t){const n=[];function r(o){if(t!=null&&n.length>=t||!o)return n;if(qt(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!rt(o)||Un(o)||n.includes(o))return n;const a=J(e).getComputedStyle(o);return o!==e&&Oo(o,a)&&n.push(o),Io(o,a)?n:r(o.parentNode)}return e?r(e):n}function er(e){const[t]=Ut(e,1);return t??null}function Mt(e){return!bt||!e?null:Fe(e)?e:Yt(e)?qt(e)||e===We(e).scrollingElement?window:rt(e)?e:null:null}function tr(e){return Fe(e)?e.scrollX:e.scrollLeft}function nr(e){return Fe(e)?e.scrollY:e.scrollTop}function Ot(e){return{x:tr(e),y:nr(e)}}var H;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(H||(H={}));function rr(e){return!bt||!e?!1:e===document.scrollingElement}function sr(e){const t={x:0,y:0},n=rr(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},o=e.scrollTop<=t.y,a=e.scrollLeft<=t.x,l=e.scrollTop>=r.y,i=e.scrollLeft>=r.x;return{isTop:o,isLeft:a,isBottom:l,isRight:i,maxScroll:r,minScroll:t}}const _o={x:.2,y:.2};function Bo(e,t,n,r,o){let{top:a,left:l,right:i,bottom:u}=n;r===void 0&&(r=10),o===void 0&&(o=_o);const{isTop:c,isBottom:f,isLeft:g,isRight:m}=sr(e),h={x:0,y:0},x={x:0,y:0},p={height:t.height*o.y,width:t.width*o.x};return!c&&a<=t.top+p.height?(h.y=H.Backward,x.y=r*Math.abs((t.top+p.height-a)/p.height)):!f&&u>=t.bottom-p.height&&(h.y=H.Forward,x.y=r*Math.abs((t.bottom-p.height-u)/p.height)),!m&&i>=t.right-p.width?(h.x=H.Forward,x.x=r*Math.abs((t.right-p.width-i)/p.width)):!g&&l<=t.left+p.width&&(h.x=H.Backward,x.x=r*Math.abs((t.left+p.width-l)/p.width)),{direction:h,speed:x}}function Fo(e){if(e===document.scrollingElement){const{innerWidth:a,innerHeight:l}=window;return{top:0,left:0,right:a,bottom:l,width:a,height:l}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function or(e){return e.reduce((t,n)=>_e(t,Ot(n)),le)}function Wo(e){return e.reduce((t,n)=>t+tr(n),0)}function Ho(e){return e.reduce((t,n)=>t+nr(n),0)}function Po(e,t){if(t===void 0&&(t=He),!e)return;const{top:n,left:r,bottom:o,right:a}=t(e);er(e)&&(o<=0||a<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Vo=[["x",["left","right"],Wo],["y",["top","bottom"],Ho]];class Qt{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Ut(n),o=or(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[a,l,i]of Vo)for(const u of l)Object.defineProperty(this,u,{get:()=>{const c=i(r),f=o[a]-c;return this.rect[u]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Je{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var o;(o=this.target)==null||o.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Xo(e){const{EventTarget:t}=J(e);return e instanceof t?e:We(e)}function Dt(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var oe;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(oe||(oe={}));function Nn(e){e.preventDefault()}function Yo(e){e.stopPropagation()}var I;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(I||(I={}));const ar={start:[I.Space,I.Enter],cancel:[I.Esc],end:[I.Space,I.Enter,I.Tab]},qo=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case I.Right:return{...n,x:n.x+25};case I.Left:return{...n,x:n.x-25};case I.Down:return{...n,y:n.y+25};case I.Up:return{...n,y:n.y-25}}};class ir{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Je(We(n)),this.windowListeners=new Je(J(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(oe.Resize,this.handleCancel),this.windowListeners.add(oe.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(oe.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&Po(r),n(le)}handleKeyDown(t){if(Gt(t)){const{active:n,context:r,options:o}=this.props,{keyboardCodes:a=ar,coordinateGetter:l=qo,scrollBehavior:i="smooth"}=o,{code:u}=t;if(a.end.includes(u)){this.handleEnd(t);return}if(a.cancel.includes(u)){this.handleCancel(t);return}const{collisionRect:c}=r.current,f=c?{x:c.left,y:c.top}:le;this.referenceCoordinates||(this.referenceCoordinates=f);const g=l(t,{active:n,context:r.current,currentCoordinates:f});if(g){const m=mt(g,f),h={x:0,y:0},{scrollableAncestors:x}=r.current;for(const p of x){const b=t.code,{isTop:v,isRight:y,isLeft:C,isBottom:R,maxScroll:S,minScroll:N}=sr(p),M=Fo(p),w={x:Math.min(b===I.Right?M.right-M.width/2:M.right,Math.max(b===I.Right?M.left:M.left+M.width/2,g.x)),y:Math.min(b===I.Down?M.bottom-M.height/2:M.bottom,Math.max(b===I.Down?M.top:M.top+M.height/2,g.y))},D=b===I.Right&&!y||b===I.Left&&!C,O=b===I.Down&&!R||b===I.Up&&!v;if(D&&w.x!==g.x){const z=p.scrollLeft+m.x,X=b===I.Right&&z<=S.x||b===I.Left&&z>=N.x;if(X&&!m.y){p.scrollTo({left:z,behavior:i});return}X?h.x=p.scrollLeft-z:h.x=b===I.Right?p.scrollLeft-S.x:p.scrollLeft-N.x,h.x&&p.scrollBy({left:-h.x,behavior:i});break}else if(O&&w.y!==g.y){const z=p.scrollTop+m.y,X=b===I.Down&&z<=S.y||b===I.Up&&z>=N.y;if(X&&!m.x){p.scrollTo({top:z,behavior:i});return}X?h.y=p.scrollTop-z:h.y=b===I.Down?p.scrollTop-S.y:p.scrollTop-N.y,h.y&&p.scrollBy({top:-h.y,behavior:i});break}}this.handleMove(t,_e(mt(g,this.referenceCoordinates),h))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}ir.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=ar,onActivation:o}=t,{active:a}=n;const{code:l}=e.nativeEvent;if(r.start.includes(l)){const i=a.activatorNode.current;return i&&e.target!==i?!1:(e.preventDefault(),o?.({event:e.nativeEvent}),!0)}return!1}}];function Sn(e){return!!(e&&"distance"in e)}function kn(e){return!!(e&&"delay"in e)}class Jt{constructor(t,n,r){var o;r===void 0&&(r=Xo(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:a}=t,{target:l}=a;this.props=t,this.events=n,this.document=We(l),this.documentListeners=new Je(this.document),this.listeners=new Je(r),this.windowListeners=new Je(J(l)),this.initialCoordinates=(o=It(a))!=null?o:le,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(oe.Resize,this.handleCancel),this.windowListeners.add(oe.DragStart,Nn),this.windowListeners.add(oe.VisibilityChange,this.handleCancel),this.windowListeners.add(oe.ContextMenu,Nn),this.documentListeners.add(oe.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(kn(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Sn(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:o}=this.props;o(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(oe.Click,Yo,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(oe.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:o,props:a}=this,{onMove:l,options:{activationConstraint:i}}=a;if(!o)return;const u=(n=It(t))!=null?n:le,c=mt(o,u);if(!r&&i){if(Sn(i)){if(i.tolerance!=null&&Dt(c,i.tolerance))return this.handleCancel();if(Dt(c,i.distance))return this.handleStart()}if(kn(i)&&Dt(c,i.tolerance))return this.handleCancel();this.handlePending(i,c);return}t.cancelable&&t.preventDefault(),l(u)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===I.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Ko={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Zt extends Jt{constructor(t){const{event:n}=t,r=We(n.target);super(t,Ko,r)}}Zt.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const Go={move:{name:"mousemove"},end:{name:"mouseup"}};var _t;(function(e){e[e.RightClick=2]="RightClick"})(_t||(_t={}));class Uo extends Jt{constructor(t){super(t,Go,We(t.event.target))}}Uo.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===_t.RightClick?!1:(r?.({event:n}),!0)}}];const Tt={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Qo extends Jt{constructor(t){super(t,Tt)}static setup(){return window.addEventListener(Tt.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Tt.move.name,t)};function t(){}}}Qo.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:o}=n;return o.length>1?!1:(r?.({event:n}),!0)}}];var Ze;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Ze||(Ze={}));var xt;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(xt||(xt={}));function Jo(e){let{acceleration:t,activator:n=Ze.Pointer,canScroll:r,draggingRect:o,enabled:a,interval:l=5,order:i=xt.TreeOrder,pointerCoordinates:u,scrollableAncestors:c,scrollableAncestorRects:f,delta:g,threshold:m}=e;const h=ea({delta:g,disabled:!a}),[x,p]=ao(),b=d.useRef({x:0,y:0}),v=d.useRef({x:0,y:0}),y=d.useMemo(()=>{switch(n){case Ze.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case Ze.DraggableRect:return o}},[n,o,u]),C=d.useRef(null),R=d.useCallback(()=>{const N=C.current;if(!N)return;const M=b.current.x*v.current.x,w=b.current.y*v.current.y;N.scrollBy(M,w)},[]),S=d.useMemo(()=>i===xt.TreeOrder?[...c].reverse():c,[i,c]);d.useEffect(()=>{if(!a||!c.length||!y){p();return}for(const N of S){if(r?.(N)===!1)continue;const M=c.indexOf(N),w=f[M];if(!w)continue;const{direction:D,speed:O}=Bo(N,w,y,t,m);for(const z of["x","y"])h[z][D[z]]||(O[z]=0,D[z]=0);if(O.x>0||O.y>0){p(),C.current=N,x(R,l),b.current=O,v.current=D;return}}b.current={x:0,y:0},v.current={x:0,y:0},p()},[t,R,r,p,a,l,JSON.stringify(y),JSON.stringify(h),x,c,S,f,JSON.stringify(m)])}const Zo={x:{[H.Backward]:!1,[H.Forward]:!1},y:{[H.Backward]:!1,[H.Forward]:!1}};function ea(e){let{delta:t,disabled:n}=e;const r=At(t);return st(o=>{if(n||!r||!o)return Zo;const a={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[H.Backward]:o.x[H.Backward]||a.x===-1,[H.Forward]:o.x[H.Forward]||a.x===1},y:{[H.Backward]:o.y[H.Backward]||a.y===-1,[H.Forward]:o.y[H.Forward]||a.y===1}}},[n,t,r])}function ta(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return st(o=>{var a;return t==null?null:(a=r??o)!=null?a:null},[r,t])}function na(e,t){return d.useMemo(()=>e.reduce((n,r)=>{const{sensor:o}=r,a=o.activators.map(l=>({eventName:l.eventName,handler:t(l.handler,r)}));return[...n,...a]},[]),[e,t])}var nt;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(nt||(nt={}));var Bt;(function(e){e.Optimized="optimized"})(Bt||(Bt={}));const En=new Map;function ra(e,t){let{dragging:n,dependencies:r,config:o}=t;const[a,l]=d.useState(null),{frequency:i,measure:u,strategy:c}=o,f=d.useRef(e),g=b(),m=tt(g),h=d.useCallback(function(v){v===void 0&&(v=[]),!m.current&&l(y=>y===null?v:y.concat(v.filter(C=>!y.includes(C))))},[m]),x=d.useRef(null),p=st(v=>{if(g&&!n)return En;if(!v||v===En||f.current!==e||a!=null){const y=new Map;for(let C of e){if(!C)continue;if(a&&a.length>0&&!a.includes(C.id)&&C.rect.current){y.set(C.id,C.rect.current);continue}const R=C.node.current,S=R?new Qt(u(R),R):null;C.rect.current=S,S&&y.set(C.id,S)}return y}return v},[e,a,n,g,u]);return d.useEffect(()=>{f.current=e},[e]),d.useEffect(()=>{g||h()},[n,g]),d.useEffect(()=>{a&&a.length>0&&l(null)},[JSON.stringify(a)]),d.useEffect(()=>{g||typeof i!="number"||x.current!==null||(x.current=setTimeout(()=>{h(),x.current=null},i))},[i,g,h,...r]),{droppableRects:p,measureDroppableContainers:h,measuringScheduled:a!=null};function b(){switch(c){case nt.Always:return!1;case nt.BeforeDragging:return n;default:return!n}}}function lr(e,t){return st(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function sa(e,t){return lr(e,t)}function oa(e){let{callback:t,disabled:n}=e;const r=Kt(t),o=d.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(r)},[r,n]);return d.useEffect(()=>()=>o?.disconnect(),[o]),o}function yt(e){let{callback:t,disabled:n}=e;const r=Kt(t),o=d.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(r)},[n]);return d.useEffect(()=>()=>o?.disconnect(),[o]),o}function aa(e){return new Qt(He(e),e)}function Rn(e,t,n){t===void 0&&(t=aa);const[r,o]=d.useState(null);function a(){o(u=>{if(!e)return null;if(e.isConnected===!1){var c;return(c=u??n)!=null?c:null}const f=t(e);return JSON.stringify(u)===JSON.stringify(f)?u:f})}const l=oa({callback(u){if(e)for(const c of u){const{type:f,target:g}=c;if(f==="childList"&&g instanceof HTMLElement&&g.contains(e)){a();break}}}}),i=yt({callback:a});return ge(()=>{a(),e?(i?.observe(e),l?.observe(document.body,{childList:!0,subtree:!0})):(i?.disconnect(),l?.disconnect())},[e]),r}function ia(e){const t=lr(e);return Zn(e,t)}const Mn=[];function la(e){const t=d.useRef(e),n=st(r=>e?r&&r!==Mn&&e&&t.current&&e.parentNode===t.current.parentNode?r:Ut(e):Mn,[e]);return d.useEffect(()=>{t.current=e},[e]),n}function ca(e){const[t,n]=d.useState(null),r=d.useRef(e),o=d.useCallback(a=>{const l=Mt(a.target);l&&n(i=>i?(i.set(l,Ot(l)),new Map(i)):null)},[]);return d.useEffect(()=>{const a=r.current;if(e!==a){l(a);const i=e.map(u=>{const c=Mt(u);return c?(c.addEventListener("scroll",o,{passive:!0}),[c,Ot(c)]):null}).filter(u=>u!=null);n(i.length?new Map(i):null),r.current=e}return()=>{l(e),l(a)};function l(i){i.forEach(u=>{const c=Mt(u);c?.removeEventListener("scroll",o)})}},[o,e]),d.useMemo(()=>e.length?t?Array.from(t.values()).reduce((a,l)=>_e(a,l),le):or(e):le,[e,t])}function Dn(e,t){t===void 0&&(t=[]);const n=d.useRef(null);return d.useEffect(()=>{n.current=null},t),d.useEffect(()=>{const r=e!==le;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?mt(e,n.current):le}function da(e){d.useEffect(()=>{if(!bt)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n?.()}},e.map(t=>{let{sensor:n}=t;return n}))}function ua(e,t){return d.useMemo(()=>e.reduce((n,r)=>{let{eventName:o,handler:a}=r;return n[o]=l=>{a(l,t)},n},{}),[e,t])}function cr(e){return d.useMemo(()=>e?Ao(e):null,[e])}const Tn=[];function fa(e,t){t===void 0&&(t=He);const[n]=e,r=cr(n?J(n):null),[o,a]=d.useState(Tn);function l(){a(()=>e.length?e.map(u=>rr(u)?r:new Qt(t(u),u)):Tn)}const i=yt({callback:l});return ge(()=>{i?.disconnect(),l(),e.forEach(u=>i?.observe(u))},[e]),o}function ha(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return rt(t)?t:e}function ga(e){let{measure:t}=e;const[n,r]=d.useState(null),o=d.useCallback(c=>{for(const{target:f}of c)if(rt(f)){r(g=>{const m=t(f);return g?{...g,width:m.width,height:m.height}:m});break}},[t]),a=yt({callback:o}),l=d.useCallback(c=>{const f=ha(c);a?.disconnect(),f&&a?.observe(f),r(f?t(f):null)},[t,a]),[i,u]=gt(l);return d.useMemo(()=>({nodeRef:i,rect:n,setRef:u}),[n,i,u])}const ma=[{sensor:Zt,options:{}},{sensor:ir,options:{}}],pa={current:{}},ht={draggable:{measure:Cn},droppable:{measure:Cn,strategy:nt.WhileDragging,frequency:Bt.Optimized},dragOverlay:{measure:He}};class et extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const xa={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new et,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:pt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:ht,measureDroppableContainers:pt,windowRect:null,measuringScheduled:!1},va={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:pt,draggableNodes:new Map,over:null,measureDroppableContainers:pt},wt=d.createContext(va),dr=d.createContext(xa);function ba(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new et}}}function ya(e,t){switch(t.type){case F.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case F.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case F.DragEnd:case F.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case F.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new et(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case F.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const l=new et(e.droppable.containers);return l.set(n,{...a,disabled:o}),{...e,droppable:{...e.droppable,containers:l}}}case F.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const a=new et(e.droppable.containers);return a.delete(n),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function wa(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:o}=d.useContext(wt),a=At(r),l=At(n?.id);return d.useEffect(()=>{if(!t&&!r&&a&&l!=null){if(!Gt(a)||document.activeElement===a.target)return;const i=o.get(l);if(!i)return;const{activatorNode:u,node:c}=i;if(!u.current&&!c.current)return;requestAnimationFrame(()=>{for(const f of[u.current,c.current]){if(!f)continue;const g=co(f);if(g){g.focus();break}}})}},[r,t,o,l,a]),null}function ja(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((o,a)=>a({transform:o,...r}),n):n}function Ca(e){return d.useMemo(()=>({draggable:{...ht.draggable,...e?.draggable},droppable:{...ht.droppable,...e?.droppable},dragOverlay:{...ht.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function Na(e){let{activeNode:t,measure:n,initialRect:r,config:o=!0}=e;const a=d.useRef(!1),{x:l,y:i}=typeof o=="boolean"?{x:o,y:o}:o;ge(()=>{if(!l&&!i||!t){a.current=!1;return}if(a.current||!r)return;const c=t?.node.current;if(!c||c.isConnected===!1)return;const f=n(c),g=Zn(f,r);if(l||(g.x=0),i||(g.y=0),a.current=!0,Math.abs(g.x)>0||Math.abs(g.y)>0){const m=er(c);m&&m.scrollBy({top:g.y,left:g.x})}},[t,l,i,r,n])}const ur=d.createContext({...le,scaleX:1,scaleY:1});var ke;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(ke||(ke={}));const Sa=d.memo(function(t){var n,r,o,a;let{id:l,accessibility:i,autoScroll:u=!0,children:c,sensors:f=ma,collisionDetection:g=Ro,measuring:m,modifiers:h,...x}=t;const p=d.useReducer(ya,void 0,ba),[b,v]=p,[y,C]=po(),[R,S]=d.useState(ke.Uninitialized),N=R===ke.Initialized,{draggable:{active:M,nodes:w,translate:D},droppable:{containers:O}}=b,z=M!=null?w.get(M):null,X=d.useRef({initial:null,translated:null}),K=d.useMemo(()=>{var q;return M!=null?{id:M,data:(q=z?.data)!=null?q:pa,rect:X}:null},[M,z]),$=d.useRef(null),[ne,G]=d.useState(null),[B,ce]=d.useState(null),Q=tt(x,Object.values(x)),de=ot("DndDescribedBy",l),ae=d.useMemo(()=>O.getEnabled(),[O]),Y=Ca(m),{droppableRects:ie,measureDroppableContainers:me,measuringScheduled:ve}=ra(ae,{dragging:N,dependencies:[D.x,D.y],config:Y.droppable}),j=ta(w,M),k=d.useMemo(()=>B?It(B):null,[B]),E=Mr(),A=sa(j,Y.draggable.measure);Na({activeNode:M!=null?w.get(M):null,config:E.layoutShiftCompensation,initialRect:A,measure:Y.draggable.measure});const L=Rn(j,Y.draggable.measure,A),re=Rn(j?j.parentElement:null),W=d.useRef({activatorEvent:null,active:null,activeNode:j,collisionRect:null,collisions:null,droppableRects:ie,draggableNodes:w,draggingNode:null,draggingNodeRect:null,droppableContainers:O,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),be=O.getNodeFor((n=W.current.over)==null?void 0:n.id),pe=ga({measure:Y.dragOverlay.measure}),Le=(r=pe.nodeRef.current)!=null?r:j,$e=N?(o=pe.rect)!=null?o:L:null,en=!!(pe.nodeRef.current&&pe.rect),tn=ia(en?null:L),Ct=cr(Le?J(Le):null),ye=la(N?be??j:null),at=fa(ye),it=ja(h,{transform:{x:D.x-tn.x,y:D.y-tn.y,scaleX:1,scaleY:1},activatorEvent:B,active:K,activeNodeRect:L,containerNodeRect:re,draggingNodeRect:$e,over:W.current.over,overlayNodeRect:pe.rect,scrollableAncestors:ye,scrollableAncestorRects:at,windowRect:Ct}),nn=k?_e(k,D):null,rn=ca(ye),jr=Dn(rn),Cr=Dn(rn,[L]),ze=_e(it,jr),Ae=$e?To($e,it):null,Pe=K&&Ae?g({active:K,collisionRect:Ae,droppableRects:ie,droppableContainers:ae,pointerCoordinates:nn}):null,sn=So(Pe,"id"),[we,on]=d.useState(null),Nr=en?it:_e(it,Cr),Sr=Mo(Nr,(a=we?.rect)!=null?a:null,L),Nt=d.useRef(null),an=d.useCallback((q,Z)=>{let{sensor:ee,options:je}=Z;if($.current==null)return;const se=w.get($.current);if(!se)return;const te=q.nativeEvent,ue=new ee({active:$.current,activeNode:se,event:te,options:je,context:W,onAbort(P){if(!w.get(P))return;const{onDragAbort:fe}=Q.current,xe={id:P};fe?.(xe),y({type:"onDragAbort",event:xe})},onPending(P,Ce,fe,xe){if(!w.get(P))return;const{onDragPending:Xe}=Q.current,Ne={id:P,constraint:Ce,initialCoordinates:fe,offset:xe};Xe?.(Ne),y({type:"onDragPending",event:Ne})},onStart(P){const Ce=$.current;if(Ce==null)return;const fe=w.get(Ce);if(!fe)return;const{onDragStart:xe}=Q.current,Ve={activatorEvent:te,active:{id:Ce,data:fe.data,rect:X}};Ge.unstable_batchedUpdates(()=>{xe?.(Ve),S(ke.Initializing),v({type:F.DragStart,initialCoordinates:P,active:Ce}),y({type:"onDragStart",event:Ve}),G(Nt.current),ce(te)})},onMove(P){v({type:F.DragMove,coordinates:P})},onEnd:Ie(F.DragEnd),onCancel:Ie(F.DragCancel)});Nt.current=ue;function Ie(P){return async function(){const{active:fe,collisions:xe,over:Ve,scrollAdjustedTranslate:Xe}=W.current;let Ne=null;if(fe&&Xe){const{cancelDrop:Ye}=Q.current;Ne={activatorEvent:te,active:fe,collisions:xe,delta:Xe,over:Ve},P===F.DragEnd&&typeof Ye=="function"&&await Promise.resolve(Ye(Ne))&&(P=F.DragCancel)}$.current=null,Ge.unstable_batchedUpdates(()=>{v({type:P}),S(ke.Uninitialized),on(null),G(null),ce(null),Nt.current=null;const Ye=P===F.DragEnd?"onDragEnd":"onDragCancel";if(Ne){const St=Q.current[Ye];St?.(Ne),y({type:Ye,event:Ne})}})}}},[w]),kr=d.useCallback((q,Z)=>(ee,je)=>{const se=ee.nativeEvent,te=w.get(je);if($.current!==null||!te||se.dndKit||se.defaultPrevented)return;const ue={active:te};q(ee,Z.options,ue)===!0&&(se.dndKit={capturedBy:Z.sensor},$.current=je,an(ee,Z))},[w,an]),ln=na(f,kr);da(f),ge(()=>{L&&R===ke.Initializing&&S(ke.Initialized)},[L,R]),d.useEffect(()=>{const{onDragMove:q}=Q.current,{active:Z,activatorEvent:ee,collisions:je,over:se}=W.current;if(!Z||!ee)return;const te={active:Z,activatorEvent:ee,collisions:je,delta:{x:ze.x,y:ze.y},over:se};Ge.unstable_batchedUpdates(()=>{q?.(te),y({type:"onDragMove",event:te})})},[ze.x,ze.y]),d.useEffect(()=>{const{active:q,activatorEvent:Z,collisions:ee,droppableContainers:je,scrollAdjustedTranslate:se}=W.current;if(!q||$.current==null||!Z||!se)return;const{onDragOver:te}=Q.current,ue=je.get(sn),Ie=ue&&ue.rect.current?{id:ue.id,rect:ue.rect.current,data:ue.data,disabled:ue.disabled}:null,P={active:q,activatorEvent:Z,collisions:ee,delta:{x:se.x,y:se.y},over:Ie};Ge.unstable_batchedUpdates(()=>{on(Ie),te?.(P),y({type:"onDragOver",event:P})})},[sn]),ge(()=>{W.current={activatorEvent:B,active:K,activeNode:j,collisionRect:Ae,collisions:Pe,droppableRects:ie,draggableNodes:w,draggingNode:Le,draggingNodeRect:$e,droppableContainers:O,over:we,scrollableAncestors:ye,scrollAdjustedTranslate:ze},X.current={initial:$e,translated:Ae}},[K,j,Pe,Ae,w,Le,$e,ie,O,we,ye,ze]),Jo({...E,delta:D,draggingRect:Ae,pointerCoordinates:nn,scrollableAncestors:ye,scrollableAncestorRects:at});const Er=d.useMemo(()=>({active:K,activeNode:j,activeNodeRect:L,activatorEvent:B,collisions:Pe,containerNodeRect:re,dragOverlay:pe,draggableNodes:w,droppableContainers:O,droppableRects:ie,over:we,measureDroppableContainers:me,scrollableAncestors:ye,scrollableAncestorRects:at,measuringConfiguration:Y,measuringScheduled:ve,windowRect:Ct}),[K,j,L,B,Pe,re,pe,w,O,ie,we,me,ye,at,Y,ve,Ct]),Rr=d.useMemo(()=>({activatorEvent:B,activators:ln,active:K,activeNodeRect:L,ariaDescribedById:{draggable:de},dispatch:v,draggableNodes:w,over:we,measureDroppableContainers:me}),[B,ln,K,L,v,de,w,we,me]);return _.createElement(Jn.Provider,{value:C},_.createElement(wt.Provider,{value:Rr},_.createElement(dr.Provider,{value:Er},_.createElement(ur.Provider,{value:Sr},c)),_.createElement(wa,{disabled:i?.restoreFocus===!1})),_.createElement(bo,{...i,hiddenTextDescribedById:de}));function Mr(){const q=ne?.autoScrollEnabled===!1,Z=typeof u=="object"?u.enabled===!1:u===!1,ee=N&&!q&&!Z;return typeof u=="object"?{...u,enabled:ee}:{enabled:ee}}}),ka=d.createContext(null),Ln="button",Ea="Draggable";function Ra(e){let{id:t,data:n,disabled:r=!1,attributes:o}=e;const a=ot(Ea),{activators:l,activatorEvent:i,active:u,activeNodeRect:c,ariaDescribedById:f,draggableNodes:g,over:m}=d.useContext(wt),{role:h=Ln,roleDescription:x="draggable",tabIndex:p=0}=o??{},b=u?.id===t,v=d.useContext(b?ur:ka),[y,C]=gt(),[R,S]=gt(),N=ua(l,t),M=tt(n);ge(()=>(g.set(t,{id:t,key:a,node:y,activatorNode:R,data:M}),()=>{const D=g.get(t);D&&D.key===a&&g.delete(t)}),[g,t]);const w=d.useMemo(()=>({role:h,tabIndex:p,"aria-disabled":r,"aria-pressed":b&&h===Ln?!0:void 0,"aria-roledescription":x,"aria-describedby":f.draggable}),[r,h,p,b,x,f.draggable]);return{active:u,activatorEvent:i,activeNodeRect:c,attributes:w,isDragging:b,listeners:r?void 0:N,node:y,over:m,setNodeRef:C,setActivatorNodeRef:S,transform:v}}function Ma(){return d.useContext(dr)}const Da="Droppable",Ta={timeout:25};function La(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:o}=e;const a=ot(Da),{active:l,dispatch:i,over:u,measureDroppableContainers:c}=d.useContext(wt),f=d.useRef({disabled:n}),g=d.useRef(!1),m=d.useRef(null),h=d.useRef(null),{disabled:x,updateMeasurementsFor:p,timeout:b}={...Ta,...o},v=tt(p??r),y=d.useCallback(()=>{if(!g.current){g.current=!0;return}h.current!=null&&clearTimeout(h.current),h.current=setTimeout(()=>{c(Array.isArray(v.current)?v.current:[v.current]),h.current=null},b)},[b]),C=yt({callback:y,disabled:x||!l}),R=d.useCallback((w,D)=>{C&&(D&&(C.unobserve(D),g.current=!1),w&&C.observe(w))},[C]),[S,N]=gt(R),M=tt(t);return d.useEffect(()=>{!C||!S.current||(C.disconnect(),g.current=!1,C.observe(S.current))},[S,C]),d.useEffect(()=>(i({type:F.RegisterDroppable,element:{id:r,key:a,disabled:n,node:S,rect:m,data:M}}),()=>i({type:F.UnregisterDroppable,key:a,id:r})),[r]),d.useEffect(()=>{n!==f.current.disabled&&(i({type:F.SetDroppableDisabled,id:r,key:a,disabled:n}),f.current.disabled=n)},[r,a,n,i]),{active:l,rect:m,isOver:u?.id===r,node:S,over:u,setNodeRef:N}}function jt(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function $a(e,t){return e.reduce((n,r,o)=>{const a=t.get(r);return a&&(n[o]=a),n},Array(e.length))}function lt(e){return e!==null&&e>=0}function za(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Aa(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const ct={scaleX:1,scaleY:1},Ia=e=>{var t;let{rects:n,activeNodeRect:r,activeIndex:o,overIndex:a,index:l}=e;const i=(t=n[o])!=null?t:r;if(!i)return null;const u=Oa(n,l,o);if(l===o){const c=n[a];return c?{x:o<a?c.left+c.width-(i.left+i.width):c.left-i.left,y:0,...ct}:null}return l>o&&l<=a?{x:-i.width-u,y:0,...ct}:l<o&&l>=a?{x:i.width+u,y:0,...ct}:{x:0,y:0,...ct}};function Oa(e,t,n){const r=e[t],o=e[t-1],a=e[t+1];return!r||!o&&!a?0:n<t?o?r.left-(o.left+o.width):a.left-(r.left+r.width):a?a.left-(r.left+r.width):r.left-(o.left+o.width)}const fr=e=>{let{rects:t,activeIndex:n,overIndex:r,index:o}=e;const a=jt(t,r,n),l=t[o],i=a[o];return!i||!l?null:{x:i.left-l.left,y:i.top-l.top,scaleX:i.width/l.width,scaleY:i.height/l.height}},dt={scaleX:1,scaleY:1},_a=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:o,rects:a,overIndex:l}=e;const i=(t=a[n])!=null?t:r;if(!i)return null;if(o===n){const c=a[l];return c?{x:0,y:n<l?c.top+c.height-(i.top+i.height):c.top-i.top,...dt}:null}const u=Ba(a,o,n);return o>n&&o<=l?{x:0,y:-i.height-u,...dt}:o<n&&o>=l?{x:0,y:i.height+u,...dt}:{x:0,y:0,...dt}};function Ba(e,t,n){const r=e[t],o=e[t-1],a=e[t+1];return r?n<t?o?r.top-(o.top+o.height):a?a.top-(r.top+r.height):0:a?a.top-(r.top+r.height):o?r.top-(o.top+o.height):0:0}const hr="Sortable",gr=_.createContext({activeIndex:-1,containerId:hr,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:fr,disabled:{draggable:!1,droppable:!1}});function mr(e){let{children:t,id:n,items:r,strategy:o=fr,disabled:a=!1}=e;const{active:l,dragOverlay:i,droppableRects:u,over:c,measureDroppableContainers:f}=Ma(),g=ot(hr,n),m=i.rect!==null,h=d.useMemo(()=>r.map(N=>typeof N=="object"&&"id"in N?N.id:N),[r]),x=l!=null,p=l?h.indexOf(l.id):-1,b=c?h.indexOf(c.id):-1,v=d.useRef(h),y=!za(h,v.current),C=b!==-1&&p===-1||y,R=Aa(a);ge(()=>{y&&x&&f(h)},[y,h,x,f]),d.useEffect(()=>{v.current=h},[h]);const S=d.useMemo(()=>({activeIndex:p,containerId:g,disabled:R,disableTransforms:C,items:h,overIndex:b,useDragOverlay:m,sortedRects:$a(h,u),strategy:o}),[p,g,R.draggable,R.droppable,C,h,b,u,m,o]);return _.createElement(gr.Provider,{value:S},t)}const Fa=e=>{let{id:t,items:n,activeIndex:r,overIndex:o}=e;return jt(n,r,o).indexOf(t)},Wa=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:o,items:a,newIndex:l,previousItems:i,previousContainerId:u,transition:c}=e;return!c||!r||i!==a&&o===l?!1:n?!0:l!==o&&t===u},Ha={duration:200,easing:"ease"},pr="transform",Pa=Me.Transition.toString({property:pr,duration:0,easing:"linear"}),Va={roleDescription:"sortable"};function Xa(e){let{disabled:t,index:n,node:r,rect:o}=e;const[a,l]=d.useState(null),i=d.useRef(n);return ge(()=>{if(!t&&n!==i.current&&r.current){const u=o.current;if(u){const c=He(r.current,{ignoreTransform:!0}),f={x:u.left-c.left,y:u.top-c.top,scaleX:u.width/c.width,scaleY:u.height/c.height};(f.x||f.y)&&l(f)}}n!==i.current&&(i.current=n)},[t,n,r,o]),d.useEffect(()=>{a&&l(null)},[a]),a}function xr(e){let{animateLayoutChanges:t=Wa,attributes:n,disabled:r,data:o,getNewIndex:a=Fa,id:l,strategy:i,resizeObserverConfig:u,transition:c=Ha}=e;const{items:f,containerId:g,activeIndex:m,disabled:h,disableTransforms:x,sortedRects:p,overIndex:b,useDragOverlay:v,strategy:y}=d.useContext(gr),C=Ya(r,h),R=f.indexOf(l),S=d.useMemo(()=>({sortable:{containerId:g,index:R,items:f},...o}),[g,o,R,f]),N=d.useMemo(()=>f.slice(f.indexOf(l)),[f,l]),{rect:M,node:w,isOver:D,setNodeRef:O}=La({id:l,data:S,disabled:C.droppable,resizeObserverConfig:{updateMeasurementsFor:N,...u}}),{active:z,activatorEvent:X,activeNodeRect:K,attributes:$,setNodeRef:ne,listeners:G,isDragging:B,over:ce,setActivatorNodeRef:Q,transform:de}=Ra({id:l,data:S,attributes:{...Va,...n},disabled:C.draggable}),ae=oo(O,ne),Y=!!z,ie=Y&&!x&&lt(m)&&lt(b),me=!v&&B,ve=me&&ie?de:null,k=ie?ve??(i??y)({rects:p,activeNodeRect:K,activeIndex:m,overIndex:b,index:R}):null,E=lt(m)&&lt(b)?a({id:l,items:f,activeIndex:m,overIndex:b}):R,A=z?.id,L=d.useRef({activeId:A,items:f,newIndex:E,containerId:g}),re=f!==L.current.items,W=t({active:z,containerId:g,isDragging:B,isSorting:Y,id:l,index:R,items:f,newIndex:L.current.newIndex,previousItems:L.current.items,previousContainerId:L.current.containerId,transition:c,wasDragging:L.current.activeId!=null}),be=Xa({disabled:!W,index:R,node:w,rect:M});return d.useEffect(()=>{Y&&L.current.newIndex!==E&&(L.current.newIndex=E),g!==L.current.containerId&&(L.current.containerId=g),f!==L.current.items&&(L.current.items=f)},[Y,E,g,f]),d.useEffect(()=>{if(A===L.current.activeId)return;if(A!=null&&L.current.activeId==null){L.current.activeId=A;return}const Le=setTimeout(()=>{L.current.activeId=A},50);return()=>clearTimeout(Le)},[A]),{active:z,activeIndex:m,attributes:$,data:S,rect:M,index:R,newIndex:E,items:f,isOver:D,isSorting:Y,isDragging:B,listeners:G,node:w,overIndex:b,over:ce,setNodeRef:ae,setActivatorNodeRef:Q,setDroppableNodeRef:O,setDraggableNodeRef:ne,transform:be??k,transition:pe()};function pe(){if(be||re&&L.current.newIndex===R)return Pa;if(!(me&&!Gt(X)||!c)&&(Y||W))return Me.Transition.toString({...c,property:pr})}}function Ya(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e?.draggable)!=null?n:t.draggable,droppable:(r=e?.droppable)!=null?r:t.droppable}}I.Down,I.Right,I.Up,I.Left;const vr=d.forwardRef(({size:e="md",color:t="default",name:n,placeholder:r,value:o,onChange:a,className:l="",allClassName:i="",min:u,max:c,step:f,disabled:g=!1,control:m,rules:h=null,defaultValue:x="",onKeyDownCapture:p,error:b,helperText:v,...y},C)=>{const S=m?._formState?.errors?.[n]?"error":t,N=z=>{a&&a(z)},M={sm:`h-9 px-3 py-2 ${T.textSm}`,md:`h-11 px-4 py-2.5 ${T.textSm}`,lg:"h-12 px-4 py-3 text-base"},w={default:"bg-transparent text-gray-800 border-gray-300 focus:border-brand-300 focus:ring-brand-500/20 dark:border-gray-700 dark:text-white/90 dark:focus:border-brand-800",success:"border-green-500 focus:border-green-300 focus:ring-green-500/20 dark:text-green-400 dark:border-green-500 dark:focus:border-green-800",error:"border-red-500 focus:border-red-300 focus:ring-red-500/20 dark:text-red-400 dark:border-red-500 dark:focus:border-red-800"},D="text-gray-500 border-gray-300 bg-gray-100 cursor-not-allowed opacity-60 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-700",O=`w-full ${T.roundedLg} border appearance-none shadow-theme-xs placeholder:text-gray-400 focus:outline-none focus:ring-3 dark:bg-zinc-950 dark:placeholder:text-white/30`;return s.jsxs("div",{className:`relative ${i}`,children:[s.jsx("input",{type:"text",name:n,placeholder:r,ref:C,onChange:N,min:u,max:c,step:f,disabled:g,onKeyDownCapture:p,className:`
          ${O}
          ${M[e]}
          ${g?D:w[S]}
          ${l}
        `,...y}),v&&s.jsx("p",{className:`mt-1 ${T.textSm} text-red-600 dark:text-red-400`,children:v})]})});vr.displayName="TwInputRef";const br=_.forwardRef(({title:e,children:t,className:n="",desc:r="",icon:o=null,isDraggable:a=!1},l)=>{const i=d.useRef(null),[u,c]=d.useState({x:0,y:0,isInitialized:!1}),[f,g]=d.useState(!1),m=d.useRef({x:0,y:0});d.useEffect(()=>{if(a&&i.current&&!u.isInitialized){const v=i.current.getBoundingClientRect(),y=window.innerWidth/2-672/2<=0?0:window.innerWidth/2-672/2;c({x:y,y:window.innerHeight/2-v.height/2,isInitialized:!0})}},[a,u.isInitialized]);const h=v=>{if(!a||!i.current)return;g(!0);const y=i.current.getBoundingClientRect();m.current={x:v.clientX-y.left,y:v.clientY-y.top},v.preventDefault()},x=v=>{if(!f)return;const y=v.clientX-m.current.x<=0?0:v.clientX-m.current.x,C=v.clientY-m.current.y<=120?120:v.clientY-m.current.y;c({...u,x:y,y:C})},p=()=>{g(!1)};d.useEffect(()=>(f?(window.addEventListener("mousemove",x),window.addEventListener("mouseup",p)):(window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",p)),()=>{window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",p)}),[f]);const b=a?{position:"absolute",top:u.y,left:u.x,cursor:f?"grabbing":"default"}:{};return s.jsxs("div",{ref:v=>{i.current=v,l&&(l.current=v)},className:`MoveCard ${T.card} ${n}`,style:{...b},children:[s.jsxs("div",{className:`flex px-6 py-5 items-center ${a?"cursor-grab":""}`,onMouseDown:h,children:[o!==null?o:"",s.jsxs("div",{className:"flex-grow",children:[s.jsx("h3",{className:`${T.textBase} ${T.fontMedium} text-gray-800 dark:text-white/90`,children:e}),r&&s.jsx("p",{className:`mt-1 ${T.textSm} text-gray-500 dark:text-gray-400`,children:r})]})]}),s.jsx("div",{className:`border-t border-gray-100 dark:border-gray-800 
        p-4 sm:p-6 overflow-x-auto`,children:s.jsx("div",{className:"space-y-6 whitespace-normal",children:t})})]})});br.displayName="MoveCard";const yr=d.forwardRef(({name:e,options:t,rules:n,control:r,placeholder:o="Select Option",className:a="",allClassName:l="",...i},u)=>s.jsxs("div",{className:`relative ${l}`,children:[s.jsxs("select",{className:`h-11 w-full appearance-none ${T.roundedLg} border border-gray-300 
          bg-transparent px-4 py-2.5 pr-11 text-sm shadow-theme-xs placeholder:text-gray-400 
          focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 
          dark:border-gray-700 dark:bg-zinc-950 dark:text-white/90 dark:placeholder:text-white/30 
          dark:focus:border-brand-800 dark:bg-dark-900
          ${a}`,ref:u,...i,children:[s.jsx("option",{value:"",disabled:!0,className:"text-gray-700 dark:bg-zinc-950 dark:text-gray-400",children:o}),t.map(c=>s.jsx("option",{value:c.value,className:"text-gray-700 dark:bg-zinc-950 dark:text-gray-400",children:c.label},c.value))]}),s.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 h-11",children:s.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}));yr.displayName="TwSelectRef";const qa=({isOpen:e,onClose:t,onCreate:n})=>{const r={visible:{opacity:1},hidden:{opacity:0}},o={hidden:{y:"-50px",opacity:0,scale:.95},visible:{y:"0",opacity:1,scale:1,transition:{duration:.2,ease:"easeOut"}},exit:{y:"50px",opacity:0,scale:.95,transition:{duration:.15,ease:"easeIn"}}},{t:a}=De(),{control:l,handleSubmit:i}=Vr({defaultValues:{columns:[{title:"col_0",type:"text",width:100,data:"col_0"},{title:"col_1",type:"text",width:100,data:"col_1"},{title:"col_2",type:"text",width:100,data:"col_2"}]}}),{fields:u,append:c,remove:f}=Xr({control:l,name:"columns"}),g=[{value:"text",label:a("column_type_text")},{value:"numeric",label:a("column_type_numeric")},{value:"date",label:a("column_type_date")},{value:"checkbox",label:a("column_type_checkbox")}],m=h=>{const x=h.columns.map((p,b)=>({...p,data:(p.title||"").toLowerCase().replace(/\s+/g,"_")||`col_${b}`}));n(x)};return s.jsx(Pt,{children:e&&s.jsx(U.div,{className:"fixed inset-0 bg-black/70 bg-opacity-50 z-180 flex justify-center items-center",variants:r,initial:"hidden",animate:"visible",exit:"hidden",children:s.jsx(U.div,{variants:o,initial:"hidden",animate:"visible",exit:"exit",onClick:h=>h.stopPropagation(),children:s.jsx(br,{isDraggable:!0,className:"w-full max-w-sm sm:max-w-xl max-h-[61vh] overflow-y-auto",title:a("handsontable_column_setup","Handsontable Column Setup"),children:s.jsxs("form",{onSubmit:i(m),children:[s.jsx("h3",{className:"text-md font-semibold mb-2",children:a("columns")}),s.jsx("div",{className:"space-y-3",children:u.map((h,x)=>s.jsxs("div",{className:`grid grid-cols-1 sm:grid-cols-5 gap-2 items-center p-2 ${T.border} rounded-md`,children:[s.jsx("div",{className:"sm:col-span-2",children:s.jsx(dn,{name:`columns.${x}.title`,control:l,defaultValue:h.title,render:({field:p})=>s.jsx(vr,{...p,placeholder:a("column_title")})})}),s.jsx("div",{className:"sm:col-span-2",children:s.jsx(dn,{name:`columns.${x}.type`,control:l,defaultValue:h.type,render:({field:p})=>s.jsx(yr,{...p,options:g,className:"dark:bg-gray-700"})})}),s.jsx("div",{className:"flex items-center justify-end",children:s.jsx(Ee,{type:"button",size:"sm",color:"warning",onClick:()=>f(x),disabled:u.length<=1,children:a("delete")})})]},h.id))}),s.jsxs("div",{className:"flex justify-between items-center mt-6",children:[s.jsx(Ee,{type:"button",onClick:()=>c({title:"",type:"text",data:""}),children:a("add_column")}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ee,{type:"button",variant:"outlined",onClick:t,children:a("cancel")}),s.jsx(Ee,{type:"submit",children:a("create")})]})]})]})})})})})},wr=({id:e,children:t,onDragEnd:n})=>{const r=wo(yo(Zt,{activationConstraint:{distance:8}}));return s.jsx(Sa,{id:e,sensors:r,collisionDetection:ko,onDragEnd:n,children:t})},Ka=()=>s.jsx("hr",{className:"border w-full border-gray-300 dark:border-gray-500 my-2 mr-4"}),Ue=({type:e="p"})=>{const t="animate-pulse bg-gray-200 dark:bg-zinc-700 rounded-md";switch(e){case"h1":return s.jsx("div",{className:`${t} h-9 w-4/5 my-4`});case"h2":return s.jsx("div",{className:`${t} h-7 w-3/5 my-3`});case"code":return s.jsxs("div",{className:"w-full p-4 bg-gray-100 dark:bg-zinc-800 rounded-md animate-pulse",children:[s.jsx("div",{className:"h-4 bg-gray-300 dark:bg-zinc-700 rounded w-1/4 mb-4"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"h-3 bg-gray-300 dark:bg-zinc-700 rounded w-full"}),s.jsx("div",{className:"h-3 bg-gray-300 dark:bg-zinc-700 rounded w-5/6"}),s.jsx("div",{className:"h-3 bg-gray-300 dark:bg-zinc-700 rounded w-full"})]})]});case"image":return s.jsx("div",{className:`${t} h-48 w-full my-4`});case"table":return s.jsxs("div",{className:"w-full my-4 space-y-2 animate-pulse",children:[s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-full"}),s.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-full"}),s.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-full"})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-full"}),s.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-full"}),s.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-full"})]})]});case"handsontable":return s.jsx("div",{className:`${t} h-40 w-full my-4`});case"youtube":return s.jsx("div",{className:`${t} h-48 w-full my-4`});case"p":default:return s.jsxs("div",{className:"space-y-2 animate-pulse",children:[s.jsx("div",{className:`${t} h-4 w-full`}),s.jsx("div",{className:`${t} h-4 w-5/6`})]})}},Ga=({id:e,block:t,styleClasses:n,onUpdateBlock:r,readOnly:o=!1})=>{const[a,l]=d.useState(!1),[i,u]=d.useState(t.content),[c,f]=d.useState(t.text),g=d.useRef(null);d.useEffect(()=>{a&&g.current?.focus()},[a]);const m=()=>{o||l(!0)},h=()=>{l(!1),r(e,{content:i,text:c||i})};return a?s.jsx("div",{className:"p-2 bg-gray-100 dark:bg-zinc-700 rounded-md w-full",children:s.jsxs("div",{className:"flex flex-col space-y-2",children:[s.jsx("input",{ref:g,type:"text",value:i,onChange:x=>u(x.target.value),onBlur:h,placeholder:"Enter URL",className:"w-full p-1 bg-transparent border-b border-gray-400 focus:outline-none focus:border-blue-500"}),s.jsx("input",{type:"text",value:c,onChange:x=>f(x.target.value),onBlur:h,placeholder:"Enter link text (optional)",className:"w-full p-1 bg-transparent border-b border-gray-400 focus:outline-none focus:border-blue-500"})]})}):s.jsx("a",{href:t.content,target:"_blank",rel:"noopener noreferrer",className:`${n.link} w-full`,onDoubleClick:m,children:t.text||t.content})},$n=({id:e,block:t,styleClasses:n,onUpdate:r,fontFamily:o,readOnly:a=!1})=>{const l=d.useRef(null),i=u=>{r&&r(e,u.currentTarget.innerHTML)};return s.jsx("div",{ref:l,contentEditable:!a,suppressContentEditableWarning:!0,onBlur:i,className:`${n[t.style]||n.p} w-full focus:outline-none ${a?"":"focus:ring-2 focus:ring-blue-500"} rounded-sm px-1 min-h-[1em]`,style:{fontFamily:o},dangerouslySetInnerHTML:{__html:t.content}})},Ua=({id:e,block:t,styleClasses:n,onUpdate:r,onUpdateBlock:o})=>{const a=d.useRef(null),[l,i]=d.useState(!1),u=f=>{i(!1),r&&r(e,f.currentTarget.innerHTML)},c=()=>{o(e,{checked:!t.checked})};return s.jsxs("div",{className:n.todo,children:[s.jsx("input",{type:"checkbox",checked:t.checked||!1,onChange:c,className:"form-checkbox h-5 w-5 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),s.jsx("div",{ref:a,contentEditable:"true",suppressContentEditableWarning:!0,onFocus:()=>i(!0),onBlur:u,className:`w-full focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-sm px-1 min-h-[1em] ${t.checked?"line-through text-gray-400 dark:text-gray-500":""}`,dangerouslySetInnerHTML:{__html:t.content}})]})},Qa=e=>{const{attributes:t,listeners:n,setNodeRef:r,transform:o,transition:a,isDragging:l,isOver:i,rect:u}=xr({id:e,transition:{duration:200,easing:"cubic-bezier(0.25, 1, 0.5, 1)"}}),c=o?`${Me.Transform.toString(o)} scale(1.02)`:null,f={transform:l?c:Me.Transform.toString(o),transition:l?"box-shadow 0.2s ease-in-out, opacity 0.2s ease-in-out":"transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.2s ease-in-out",zIndex:l?10:"auto",opacity:l?.6:1,boxShadow:l?"0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23)":"none"};return{attributes:t,listeners:n,setNodeRef:r,style:f,isDragging:l,isOver:i,rect:u}},Ja=({id:e,block:t,styleClasses:n,onUpdateBlock:r,isCodeEditing:o,setIsCodeEditing:a,readOnly:l=!1})=>{const i=u=>{a(!1),r(e,{content:u.target.value})};return s.jsx(s.Fragment,{children:o&&!l?s.jsx("textarea",{defaultValue:t.content,onBlur:i,autoFocus:!0,className:`${n.code} w-full min-h-[100px] focus:outline-none focus:ring-2 focus:ring-blue-500`}):s.jsx(vs,{language:t.language||"javascript",postData:`${t.content}`})})},Za=["#FFADAD","#FFD6A5","#FDFFB6","#CAFFBF","#9BF6FF","#A0C4FF","#BDB2FF","#FFC6FF"],ei=["#000000","#D00000","#AE4600","#006400","#00529B","#0018A8","#5A00A8","#A800A8"],ti=({id:e,block:t,onUpdateBlock:n})=>{const r=d.useRef(null),o=d.useRef(null),a=f=>{n(e,{content:f})},l=async(f,g,m)=>{const h=r.current?.hotInstance;if(!h)return;const x=t.content.columns.map((p,b)=>({...p,width:h.getColWidth(b)}));n(e,{content:{...t.content,columns:x}})},i=(f,g,m,h)=>{o.current={row:f,col:g,row2:m,col2:h}},u=(f,g)=>{if(console.log("handleColorClick=",f,g),!r.current?.hotInstance||!o.current)return;const{row:h,col:x,row2:p,col2:b}=o.current,v=Math.min(h,p),y=Math.max(h,p),C=Math.min(x,b),R=Math.max(x,b),S=g==="bg"?"colorData":"colorTextData",N=t.content[S]?[...t.content[S]]:[];let M=!1;for(let w=v;w<=y;w++){N[w]||(N[w]=Array(t.content.columns.length).fill(""));for(let D=C;D<=R;D++)N[w][D]!==f&&(N[w][D]=f,M=!0)}for(let w=0;w<N.length;w++)N[w]===void 0&&(N[w]=Array(t.content.columns.length).fill(""));M&&n(e,{content:{...t.content,[S]:N}})},c=(f,g,m)=>{if(f.preventDefault(),!r.current?.hotInstance)return;const x=m==="bg"?"colorData":"colorTextData",p=t.content[x]?[...t.content[x]]:[];let b=!1;for(let v=0;v<p.length;v++)if(p[v])for(let y=0;y<p[v].length;y++)p[v][y]===g&&(p[v][y]=m==="bg"?"":void 0,b=!0);b&&n(e,{content:{...t.content,[x]:p}})};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute top-10 right-1 opacity-0 group-hover:opacity-100 transition-opacity z-180",children:s.jsxs("div",{className:"items-center bg-white/80 dark:bg-zinc-800/80 backdrop-blur-sm border border-gray-200 dark:border-zinc-700 rounded-lg shadow-lg p-1 space-x-2",children:[s.jsx("div",{children:s.jsx("div",{className:"flex space-x-1",children:Za.map(f=>s.jsx("button",{onClick:()=>u(f,"bg"),onContextMenu:g=>c(g,f,"bg"),className:"w-4 h-4 rounded-full border",style:{backgroundColor:f}},f))})}),s.jsx("div",{children:s.jsx("div",{className:"flex space-x-1",children:ei.map((f,g)=>s.jsx("button",{onClick:()=>u(f,"text"),onContextMenu:m=>c(m,f,"text"),className:"w-4 h-4 rounded-full border flex items-center justify-center text-white text-sm font-bold",style:{backgroundColor:f},children:g%2===0?"A":"a"},f))})})]})}),s.jsx(ws,{hotRef:r,columns:t.content.columns,rowData:t.content.data,colorData:t.content.colorData,colorTextData:t.content.colorTextData,gridData:t.content,onGridDataChange:a,afterSelection:i,handleAfterColumnResize:l,isDraggable:!1,onColorClick:u,onColorRightClick:c})]})},ni=({id:e,block:t,onUpdateBlock:n})=>{const r=d.useRef(null),o=a=>{a.preventDefault(),a.stopPropagation();const l=a.clientX,i=r.current.offsetWidth,u=f=>{const g=i+(f.clientX-l);r.current&&(r.current.style.width=`${g}px`)},c=()=>{document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",c),n&&r.current&&n(e,{width:r.current.offsetWidth})};document.addEventListener("mousemove",u),document.addEventListener("mouseup",c)};return s.jsxs("div",{className:"relative",children:[s.jsx("img",{ref:r,src:t.content,alt:"Uploaded content",className:"h-auto rounded-md",style:{width:t.width?`${t.width}px`:"auto",maxWidth:"100%"}}),s.jsx("div",{onMouseDown:o,className:"absolute bottom-0 right-0 w-4 h-4 bg-blue-500 cursor-se-resize opacity-0 group-hover:opacity-100 transition-opacity"})]})},ri=({id:e,block:t,onUpdateBlock:n,onDelete:r})=>{const o=d.useRef(null),a=(m,h,x)=>{const p={...t.content};p.rows[h][x].text=m.currentTarget.innerHTML,n(e,{content:p})},l=()=>{const m={...t.content},h=m.rows[0]?.length||1;m.rows.push(Array(h).fill({text:""})),n(e,{content:m})},i=m=>{if(t.content.rows.length<=1)return;const h={...t.content};h.rows.splice(m,1),n(e,{content:h})},u=()=>{const m={...t.content};m.rows.forEach(h=>h.push({text:""})),n(e,{content:m})},c=m=>{if(t.content.rows[0]?.length<=1)return;const h={...t.content};h.rows.forEach(x=>x.splice(m,1)),n(e,{content:h})},f=m=>{m.preventDefault(),m.stopPropagation();const h=m.clientX,x=o.current;if(!x)return;const p=x.offsetWidth,b=y=>{const C=p+(y.clientX-h);x.style.width=`${C}px`},v=()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",v),n&&x&&n(e,{width:x.offsetWidth})};document.addEventListener("mousemove",b),document.addEventListener("mouseup",v)},g=(m,h)=>{m.preventDefault(),m.stopPropagation();const x=m.clientX,b=m.currentTarget.parentElement.offsetWidth,v=C=>{const R=b+(C.clientX-x);if(R>30){const S=o.current.querySelector("table");if(S){const N=S.querySelector("colgroup");N&&N.children[h]&&(N.children[h].style.width=`${R}px`)}}},y=C=>{document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",y);const R=b+(C.clientX-x),S=[...t.content.colWidths||[]];S[h]=Math.max(R,30),n(e,{content:{...t.content,colWidths:S}})};document.addEventListener("mousemove",v),document.addEventListener("mouseup",y)};return s.jsxs("div",{className:"flex items-start group relative w-full",children:[s.jsxs("button",{onClick:l,className:"absolute -bottom-2.5 left-1/2 -translate-x-1/2 w-full h-5 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-10",children:[s.jsx("div",{className:"w-6 h-px bg-blue-500"}),s.jsx("div",{className:"absolute w-5 h-5 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs",children:"＋"})]}),s.jsxs("div",{ref:o,className:"relative w-full",style:{width:t.width?`${t.width}px`:"100%"},children:[s.jsxs("button",{onClick:u,className:"absolute top-1/2 -right-2.5 -translate-y-1/2 h-full w-5 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-10",children:[s.jsx("div",{className:"h-6 w-px bg-blue-500"}),s.jsx("div",{className:"absolute w-5 h-5 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs",children:"＋"})]}),s.jsxs("table",{className:"w-full border-collapse border border-gray-300 dark:border-zinc-600 table-fixed",children:[s.jsx("colgroup",{children:t.content.rows[0]?.map((m,h)=>s.jsx("col",{style:{width:t.content.colWidths?.[h]?`${t.content.colWidths[h]}px`:"auto"}},h))}),s.jsx("thead",{children:s.jsx("tr",{children:t.content.rows[0]?.map((m,h)=>s.jsxs("th",{className:"relative border-none p-0 h-4 group/col",children:[s.jsx("button",{onClick:()=>c(h),className:"absolute -top-2.5 left-1/2 -translate-x-1/2 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-xs opacity-0 group-hover/col:opacity-100 transition-opacity z-10",children:"－"}),s.jsx("div",{onMouseDown:x=>g(x,h),className:"absolute top-0 right-0 h-full w-1.5 cursor-col-resize opacity-0 group-hover/col:opacity-100",children:s.jsx("div",{className:"h-full w-px bg-blue-500"})})]},h))})}),s.jsx("tbody",{children:t.content.rows.map((m,h)=>s.jsxs("tr",{className:"relative group/row",children:[s.jsx("button",{onClick:()=>i(h),className:"absolute -left-2.5 top-1/2 -translate-y-1/2 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-xs opacity-0 group-hover/row:opacity-100 transition-opacity z-10",children:"－"}),m.map((x,p)=>s.jsx("td",{contentEditable:!0,suppressContentEditableWarning:!0,onBlur:b=>a(b,h,p),className:"border border-gray-300 dark:border-zinc-600 p-2 focus:outline-blue-500 overflow-hidden whitespace-nowrap",dangerouslySetInnerHTML:{__html:x.text}},p))]},h))})]}),s.jsx("div",{onMouseDown:f,className:"absolute bottom-0 right-0 w-4 h-4 bg-blue-500 cursor-se-resize opacity-0 group-hover:opacity-100 transition-opacity"})]}),s.jsx("button",{onClick:()=>r(e),className:"p-1 text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity absolute -top-2 -right-2 bg-white dark:bg-zinc-800 rounded-full","aria-label":"Delete block",children:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[s.jsx("path",{d:"M3 6h18"}),s.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),s.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})},si=({block:e})=>s.jsx("div",{className:"w-full aspect-w-16 aspect-h-9",children:s.jsx("iframe",{src:`https://www.youtube.com/embed/${e.content}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"w-full h-full rounded-md"})}),oi=d.memo(({id:e,block:t,styleClasses:n,onUpdateBlock:r,onUpdate:o,onStyleChange:a,onDelete:l,onDuplicate:i,onInsertBlock:u,readOnly:c=!1})=>{const{attributes:f,listeners:g,setNodeRef:m,style:h,isDragging:x,isOver:p,rect:b}=Qa(e),[v,y]=d.useState(!1),[C,R]=d.useState(!1),S=d.useRef(null),N={sm:"text-sm",base:"text-base",lg:"text-lg"},M=N[t.fontSize]||N.base,w={monospace:"monospace",sans:"font-sans",serif:"serif",noto:"Noto Serif Korean"},D=w[t.fontFamily]||w.sans,z={left:"text-left",center:"text-center",right:"text-right"}[t.textAlign]||"text-left",X=($,ne)=>{$.preventDefault(),$.stopPropagation();const G=$.clientX,B=S.current.offsetWidth,ce=de=>{let ae;ne==="left"?ae=B-(de.clientX-G):ae=B+(de.clientX-G),S.current&&(S.current.style.width=`${Math.max(ae,100)}px`)},Q=()=>{document.removeEventListener("mousemove",ce),document.removeEventListener("mouseup",Q),r(e,{width:S.current.offsetWidth})};document.addEventListener("mousemove",ce),document.addEventListener("mouseup",Q)},K=()=>{switch(t.style){case"handsontable":return s.jsx(ti,{id:e,block:t,onUpdateBlock:r,isCodeEditing:v,setIsCodeEditing:y,readOnly:c});case"divider":return s.jsx(Ka,{});case"todo":return s.jsx(Ua,{id:e,block:t,styleClasses:n,onUpdate:o,onUpdateBlock:r,fontFamily:D,readOnly:c});case"quote":return s.jsx($n,{id:e,block:t,styleClasses:n,onUpdate:o,fontFamily:D,readOnly:c});case"link":return s.jsx(Ga,{id:e,block:t,styleClasses:n,onUpdateBlock:r,fontFamily:D,readOnly:c});case"code":return s.jsx(Ja,{id:e,block:t,styleClasses:n,onUpdateBlock:r,isCodeEditing:v,setIsCodeEditing:y,readOnly:c});case"youtube":return s.jsx(si,{block:t});case"table":return s.jsx(ri,{id:e,block:t,onUpdateBlock:r,onDelete:l,readOnly:c});case"image":return s.jsx(ni,{id:e,block:t,onUpdateBlock:r,readOnly:c});default:return s.jsx($n,{id:e,block:t,styleClasses:n,onUpdate:o,fontFamily:D,readOnly:c})}};if(x){const $=ne=>{const G="bg-gray-100 dark:bg-zinc-800 rounded-md border-2 border-dashed border-gray-300 dark:border-zinc-600";switch(ne){case"divider":return`${G} h-2`;case"image":case"youtube":case"handsontable":return`${G} h-24`;case"code":return`${G} h-20`;default:return`${G} h-10`}};return s.jsx("div",{ref:m,style:h,className:$(t.style)})}return s.jsxs("div",{ref:m,style:h,className:"group relative mx-auto",children:[p&&s.jsx("div",{className:"absolute top-0 left-0 right-0 h-full pointer-events-none",children:s.jsx("div",{className:"absolute -top-1 left-0 right-0 h-1 bg-blue-500 rounded-full",style:{opacity:p&&b.top>0?1:0,transition:"opacity 0.2s"}})}),!c&&s.jsx("button",{onClick:()=>u(e),className:"absolute -top-3 left-1/2 -translate-x-1/2 w-full h-5 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-10","aria-label":"블록 추가",children:s.jsx("div",{className:"w-full h-px bg-blue-500"})}),!c&&s.jsx("div",{className:"absolute top-1 right-1 flex flex-col items-end opacity-0 group-hover:opacity-100 transition-opacity z-[170] space-y-1",children:s.jsxs("div",{className:"flex items-center bg-white dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 rounded-md shadow-sm p-1 space-x-1",children:[s.jsx("button",{...f,...!C&&!v&&g,className:"p-1 cursor-grab text-gray-400 hover:text-gray-600",children:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[s.jsx("circle",{cx:"12",cy:"12",r:"1"}),s.jsx("circle",{cx:"12",cy:"5",r:"1"}),s.jsx("circle",{cx:"12",cy:"19",r:"1"})]})}),s.jsx("button",{onClick:()=>i(e),className:"p-1 text-gray-400 hover:text-gray-600","aria-label":"Duplicate block",children:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[s.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),s.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})}),["p","h1","h2","quote"].includes(t.style)&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>r(e,{textAlign:"left"}),className:`p-1 rounded ${t.textAlign==="left"?"bg-gray-200 dark:bg-zinc-600":""} text-gray-400 hover:text-gray-600`,"aria-label":"Align left",children:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[s.jsx("line",{x1:"21",y1:"10",x2:"3",y2:"10"}),s.jsx("line",{x1:"21",y1:"6",x2:"3",y2:"6"}),s.jsx("line",{x1:"21",y1:"14",x2:"3",y2:"14"}),s.jsx("line",{x1:"21",y1:"18",x2:"3",y2:"18"})]})}),s.jsx("button",{onClick:()=>r(e,{textAlign:"center"}),className:`p-1 rounded ${t.textAlign==="center"?"bg-gray-200 dark:bg-zinc-600":""} text-gray-400 hover:text-gray-600`,"aria-label":"Align center",children:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[s.jsx("line",{x1:"18",y1:"10",x2:"6",y2:"10"}),s.jsx("line",{x1:"21",y1:"6",x2:"3",y2:"6"}),s.jsx("line",{x1:"21",y1:"14",x2:"3",y2:"14"}),s.jsx("line",{x1:"18",y1:"18",x2:"6",y2:"18"})]})}),s.jsx("button",{onClick:()=>r(e,{textAlign:"right"}),className:`p-1 rounded ${t.textAlign==="right"?"bg-gray-200 dark:bg-zinc-600":""} text-gray-400 hover:text-gray-600`,"aria-label":"Align right",children:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[s.jsx("line",{x1:"21",y1:"10",x2:"7",y2:"10"}),s.jsx("line",{x1:"21",y1:"6",x2:"3",y2:"6"}),s.jsx("line",{x1:"21",y1:"14",x2:"3",y2:"14"}),s.jsx("line",{x1:"21",y1:"18",x2:"7",y2:"18"})]})})]}),["p","h1","h2","todo","quote"].includes(t.style)&&s.jsxs("div",{className:"relative w-6 h-6",children:[s.jsx("input",{type:"color",value:t.backgroundColor||"#ffffff",onChange:$=>r(e,{backgroundColor:$.target.value}),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",title:"Change background color"}),s.jsx("div",{className:"w-full h-full rounded border border-gray-300 dark:border-zinc-600 pointer-events-none",style:{backgroundColor:t.backgroundColor||"transparent"}})]}),["p","h1","h2","todo","quote"].includes(t.style)&&s.jsx("input",{type:"color",value:t.textColor||"#000000",onChange:$=>r(e,{textColor:$.target.value}),className:"w-6 h-6 p-0.5 bg-transparent border-none rounded cursor-pointer",title:"Change text color"}),["p","h1","h2","todo","quote"].includes(t.style)&&s.jsx("button",{onClick:()=>r(e,{backgroundColor:null,textColor:null}),className:"p-1 text-gray-400 hover:text-gray-600","aria-label":"Reset colors",children:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[s.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}),s.jsx("path",{d:"m2 2 20 20"})]})}),["p","h1","h2","todo","quote"].includes(t.style)&&s.jsxs("select",{value:t.fontSize||"base",onChange:$=>r(e,{fontSize:$.target.value}),className:"bg-gray-50 border border-gray-300 text-gray-900 text-xs rounded focus:ring-blue-500 focus:border-blue-500 block p-1 dark:bg-zinc-700 dark:border-zinc-600 dark:placeholder-zinc-400 dark:text-white","aria-label":"Change font size",children:[s.jsx("option",{value:"sm",children:"Small"}),s.jsx("option",{value:"base",children:"Default"}),s.jsx("option",{value:"lg",children:"Large"})]}),["p","h1","h2","todo","quote"].includes(t.style)&&s.jsxs("select",{value:t.fontFamily||"sans",onChange:$=>r(e,{fontFamily:$.target.value}),className:"bg-gray-50 border border-gray-300 text-gray-900 text-xs rounded focus:ring-blue-500 focus:border-blue-500 block p-1 dark:bg-zinc-700 dark:border-zinc-600 dark:placeholder-zinc-400 dark:text-white","aria-label":"Change font family",children:[s.jsx("option",{value:"monospace",children:"monospace"}),s.jsx("option",{value:"sans",children:"Sans"}),s.jsx("option",{value:"serif",children:"Serif"}),s.jsx("option",{value:"noto",children:"Noto Serif Korean"})]}),s.jsxs("select",{value:t.style,onChange:$=>a(e,$.target.value),className:"bg-gray-50 border border-gray-300 text-gray-900 text-xs rounded focus:ring-blue-500 focus:border-blue-500 block p-1 dark:bg-zinc-700 dark:border-zinc-600 dark:placeholder-zinc-400 dark:text-white",children:[s.jsx("option",{value:"p",children:"P"}),s.jsx("option",{value:"h1",children:"H1"}),s.jsx("option",{value:"h2",children:"H2"}),s.jsx("option",{value:"todo",children:"Todo"}),s.jsx("option",{value:"quote",children:"Quote"}),s.jsx("option",{value:"divider",children:"Divider"}),s.jsx("option",{value:"handsontable",children:"Handsontable"}),s.jsx("option",{value:"code",children:"Code"})]}),t.style==="code"&&s.jsx("select",{value:t.language||"javascript",onChange:$=>r(e,{language:$.target.value}),className:"bg-gray-50 border border-gray-300 text-gray-900 text-xs rounded focus:ring-blue-500 focus:border-blue-500 block p-1 dark:bg-zinc-700 dark:border-zinc-600 dark:placeholder-zinc-400 dark:text-white",children:["javascript","React","css","html","bash","json","python","java","csharp","sql","typescript"].map($=>s.jsx("option",{value:$,children:$},$))}),s.jsx("button",{onClick:()=>l(e),className:"p-1 text-gray-400 hover:text-red-500",children:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[s.jsx("path",{d:"M3 6h18"}),s.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),s.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})}),s.jsxs("div",{ref:S,className:"relative transition-shadow rounded-md",style:{width:t.width?`${t.width}px`:"100%"},children:[!c&&s.jsxs(s.Fragment,{children:[s.jsx("div",{onMouseDown:$=>X($,"left"),className:"absolute top-0 left-0 h-full w-2 cursor-ew-resize opacity-0 group-hover:opacity-100 z-20",children:s.jsx("div",{className:"h-full w-0.5 bg-blue-500/50"})}),s.jsx("div",{onMouseDown:$=>X($,"right"),className:"absolute top-0 right-0 h-full w-2 cursor-ew-resize opacity-0 group-hover:opacity-100 z-20",children:s.jsx("div",{className:"h-full w-0.5 bg-blue-500/50 ml-auto"})})]}),s.jsxs(U.div,{layout:!0,style:{backgroundColor:t.backgroundColor,color:t.textColor},className:`flex w-full rounded-md ${M} ${z}
            ${!c&&!t.backgroundColor?"hover:bg-gray-200 group-hover:bg-gray-50 dark:group-hover:bg-zinc-800/50 dark:hover:bg-zinc-800/50":""}`,onDoubleClick:()=>{t.style==="code"&&!c&&y(!0)},children:[s.jsx("div",{role:"button","aria-expanded":"false","aria-label":"드래그","aria-haspopup":"dialog",...f,...!C&&!v&&!c&&g,className:c?"":"cursor-grab",children:s.jsx("svg",{"aria-hidden":"true",role:"graphics-symbol",viewBox:"0 0 10 10",fill:"currentcolor",className:`dragHandle mt-1 mr-1 ${c?"opacity-0":"opacity-0 group-hover:opacity-100"} transition-opacity`,style:{width:"14px",height:"14px",display:"block",flexShrink:0},children:s.jsx("path",{d:"M3,2 C2.44771525,2 2,1.55228475 2,1 C2,0.44771525 2.44771525,0 3,0 C3.55228475,0 4,0.44771525 4,1 C4,1.55228475 3.55228475,2 3,2 Z M3,6 C2.44771525,6 2,5.55228475 2,5 C2,4.44771525 2.44771525,4 3,4 C3.55228475,4 4,4.44771525 4,5 C4,5.55228475 3.55228475,6 3,6 Z M3,10 C2.44771525,10 2,9.55228475 2,9 C2,8.44771525 2.44771525,8 3,8 C3.55228475,8 4,8.44771525 4,9 C4,9.55228475 3.55228475,10 3,10 Z M7,2 C6.44771525,2 6,1.55228475 6,1 C6,0.44771525 6.44771525,0 7,0 C7.55228475,0 8,0.44771525 8,1 C8,1.55228475 7.55228475,2 7,2 Z M7,6 C6.44771525,6 6,5.55228475 6,5 C6,4.44771525 6.44771525,4 7,4 C7.55228475,4 8,4.44771525 8,5 C8,5.55228475 7.55228475,6 7,6 Z M7,10 C6.44771525,10 6,9.55228475 6,9 C6,8.44771525 6.44771525,8 7,8 C7.55228475,8 8,8.44771525 8,9 C8,9.55228475 7.55228475,10 7,10 Z"})})}),s.jsx(d.Suspense,{fallback:s.jsx(Ue,{type:t.style}),children:K()})]})]})]})}),ai=({rootDb:e,memoId:t,readOnly:n=!1,inputBox:r=!0})=>{const{user:o}=Be(),{t:a}=De(),[l,i]=d.useState([]),[u,c]=d.useState(""),[f,g]=d.useState("p"),m=d.useRef(null),h=d.useRef(null),[x,p]=d.useState(!1),[b,v]=d.useState(""),[y,C]=d.useState(!1),[R,S]=d.useState(0),N=d.useRef(!0),[M,w]=d.useState(!0),D=e==="memo"?`${e}_txt/${o?.uid}/${t}/notion`:`${e}_txt/${t}/notion`;d.useEffect(()=>{o&&t&&(w(!0),he(D).then(j=>{j&&i(j),w(!1),N.current=!1}))},[o,t]),d.useEffect(()=>{!N.current&&o&&t&&V(D,l)},[l,o,t]);const O=[{command:"p",label:"Paragraph"},{command:"h1",label:"Heading 1"},{command:"h2",label:"Heading 2"},{command:"todo",label:"To-do list"},{command:"quote",label:"Quote"},{command:"code",label:"Code Block"},{command:"link",label:"Link"},{command:"image",label:"Image"},{command:"divider",label:"Divider"},{command:"handsontable",label:"Handsontable"},{command:"table",label:"Table"},{command:"youtube",label:"YouTube Video"}],z=b?O.filter(j=>j.label.toLowerCase().includes(b.toLowerCase())):O,X=j=>{if(x){j.key==="ArrowDown"?(j.preventDefault(),S(k=>(k+1)%z.length)):j.key==="ArrowUp"?(j.preventDefault(),S(k=>(k-1+z.length)%z.length)):j.key==="Enter"?(j.preventDefault(),z[R]&&ae(z[R].command)):j.key==="Escape"&&(j.preventDefault(),p(!1));return}if(j.key==="Enter"&&!j.shiftKey){j.preventDefault();const k=m.current?.innerHTML||"";if(k.trim()==="/"){m.current&&(m.current.innerHTML=""),p(!1);return}if(m.current?.textContent.trim()===""&&!k.includes("<img"))return;const E={id:Date.now(),content:u,style:f,...f==="todo"&&{checked:!1}};i([...l,E]),c(""),m.current&&(m.current.innerHTML="")}},K=j=>{const k=j.currentTarget.textContent;k.startsWith("/")?(p(!0),v(k.substring(1)),S(0)):p(!1),c(j.currentTarget.innerHTML)},$=(j,k)=>{i(E=>E.map(A=>A.id===j?{...A,content:k}:A))},ne=(j,k)=>{i(E=>E.map(A=>A.id===j?{...A,style:k}:A))},G=(j,k)=>{i(E=>E.map(A=>A.id===j?{...A,...k}:A))},B=j=>{const k=l.find(E=>E.id===j);if(k&&k.style==="image"&&k.content)try{const E=un(fn,k.content);Yr(E).catch(A=>{console.error("Error deleting image from storage:",A)})}catch(E){console.error("Error creating storage reference from URL:",E)}i(E=>E.filter(A=>A.id!==j))},ce=j=>{i(k=>{const E=k.findIndex(W=>W.id===j);if(E===-1)return k;const L={...k[E],id:Date.now()},re=[...k];return re.splice(E+1,0,L),re})},Q=j=>{const{active:k,over:E}=j;console.log("active=",k),console.log("over=",E),k.id!==E.id&&i(A=>{const L=A.findIndex(W=>W.id===k.id),re=A.findIndex(W=>W.id===E.id);return jt(A,L,re)})},de=j=>{const k=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,E=j.match(k);return E&&E[2].length===11?E[2]:null},ae=j=>{if(j==="image")h.current?.click();else if(j==="divider"){const k={id:Date.now(),style:"divider",content:""};i(E=>[...E,k])}else if(j==="handsontable")C(!0);else if(j==="code"){const k={id:Date.now(),style:"code",language:"javascript",content:""};i(E=>[...E,k])}else if(j==="table"){const k={id:Date.now(),style:"table",content:{rows:[[{text:""},{text:""}],[{text:""},{text:""}]]}};i(E=>[...E,k])}else if(j==="youtube"){const k=prompt("Enter YouTube URL:");if(k){const E=de(k);if(E){const A={id:Date.now(),style:"youtube",content:E};i(L=>[...L,A])}else alert("Invalid YouTube URL")}}else if(j==="link"){const k=prompt("Enter URL:");if(k){const E=prompt("Enter link text (optional):",k),A={id:Date.now(),style:"link",content:k,text:E||k};i(L=>[...L,A])}}else g(j),m.current?.focus();m.current&&(m.current.innerHTML=""),c(""),p(!1),v("")},Y=j=>{const k={id:Date.now(),style:"handsontable",content:{data:[Array(j.length).fill("")],columns:j,colHeaders:j.map(E=>E.title),rowHeaders:!0,height:"auto",licenseKey:"non-commercial-and-evaluation"}};i(E=>[...E,k]),C(!1)},ie=async j=>{const k=j.target.files[0];if(!k||!o||!t)return;const E=`memo_txt_images/${o.uid}/${t}/${Date.now()}_${k.name}`,A=un(fn,E);try{const L=await qr(A,k),re=await Kr(L.ref),W={id:Date.now(),content:re,style:"image"};i(be=>[...be,W])}catch(L){console.error("Image upload failed:",L)}},me=a("notion_input_placeholder","Type '/' for commands, or just start writing..."),ve={p:"text-base",h1:"text-3xl font-bold my-4",h2:"text-2xl font-bold my-3",code:"font-mono bg-gray-100 dark:bg-zinc-700 p-4 rounded-md text-sm",todo:"flex items-center gap-2 my-1",link:"text-blue-600 dark:text-blue-400 hover:underline",quote:"border-l-4 border-gray-300 dark:border-zinc-600 pl-4 italic text-gray-500 dark:text-gray-400 my-2",image:"my-4",divider:"my-4",handsontable:"my-4",youtube:"my-4",table:"my-4 w-full"};return s.jsxs("div",{className:`${T.card} mt-1 py-4 border-gray-200 dark:border-zinc-700`,children:[s.jsx(wr,{onDragEnd:Q,blocks:l,styleClasses:ve,onUpdateBlock:G,onUpdate:$,onStyleChange:ne,onDelete:B,onDuplicate:ce,readOnly:n,children:M?s.jsxs("div",{className:"mb-4 space-y-4 p-2",children:[s.jsx(Ue,{type:"h1"}),s.jsx(Ue,{type:"p"}),s.jsx(Ue,{type:"code"}),s.jsx(Ue,{type:"image"})]}):s.jsx(mr,{items:l,strategy:_a,children:s.jsx("div",{className:"mb-4 space-y-2",children:l.map(j=>s.jsx(oi,{id:j.id,block:j,styleClasses:ve,onUpdateBlock:G,onUpdate:$,onStyleChange:ne,onDelete:B,onDuplicate:ce,readOnly:n},j.id))})})}),s.jsxs("div",{className:"relative",children:[x&&s.jsx(U.div,{className:"absolute bottom-full mb-2 w-full sm:w-64 bg-white z-180 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 rounded-lg shadow-xl",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.1},children:s.jsxs("div",{className:"p-2",children:[s.jsx("p",{className:"text-xs text-gray-500 px-2 pb-1 font-semibold",children:"BLOCKS"}),z.length>0?z.map((j,k)=>s.jsx("button",{onClick:()=>ae(j.command),className:`w-full text-left px-2 py-1.5 rounded text-sm ${k===R?"bg-gray-100 dark:bg-zinc-700":""} hover:bg-gray-100 dark:hover:bg-zinc-700`,children:j.label},j.command)):s.jsx("p",{className:"px-2 py-1.5 text-sm text-gray-500",children:"No results"})]})}),r&&s.jsxs(s.Fragment,{children:[s.jsx("input",{type:"file",ref:h,onChange:ie,accept:"image/*",className:"hidden"}),s.jsx("div",{ref:m,contentEditable:"true",onInput:K,onKeyDown:X,"data-placeholder":me,className:`notion-selectable w-full bg-transparent focus:outline-none text-gray-800 dark:text-gray-200 
						min-h-[2.5rem] p-2 border border-transparent focus:border-blue-500 rounded-md
						empty:before:content-[attr(data-placeholder)] empty:before:text-gray-400 empty:before:dark:text-gray-500 empty:before:cursor-text`})]})]}),s.jsx(qa,{isOpen:y,onClose:()=>C(!1),onCreate:Y})]})},ii=({rootDb:e,memoDetailData:t,onBookmark:n,searchWord:r,onDeleteTab:o})=>{const[a,l]=d.useState(!1),[i,u]=d.useState(!1),{t:c}=De(),{scrollYProgress:f}=Qs(),g=Zs(f,{stiffness:100,damping:30,restDelta:.001}),m=Vt(),{memoId:h}=Gr(),p=vt()?.state?.fullIndex,{user:b}=Be(),v=Ft(),y=Hn({mutationFn:async()=>{const w=e==="memo"?`${e}_txt/${b.uid}/${h}`:`${e}_txt/${h}`,D=e==="memo"?`${e}_tree/${b.uid}/${h}`:`${e}/${h}`;return await so(w,D)},onSuccess:()=>{v.invalidateQueries({queryKey:["twTreeData",e]}),o&&o(h),m(`/${e==="memo"?"m":e}`)},onError:w=>{console.error("삭제 중 오류 발생:",w)}}),C=()=>{const w=`/${e==="memo"?"m":e}/edit/${h}`;m(w,{state:{fullIndex:p}})},R=()=>{const w=`/${e==="memo"?"m":e}/util/${h}`;m(w,{state:{fullIndex:p}})},S=()=>{const w=`/${e==="memo"?"m":e}/insert/${h}`;m(w,{state:{fullIndex:p}})},N=()=>{l(!0)},M=()=>{l(!1),y.mutate()};return d.useEffect(()=>{function w(){const D=t.scrollY?t.scrollY:0;window.scrollTo({top:D})}t&&t.memo!==null&&(w(),t.image&&t.image.map((D,O)=>D))},[t]),h===""||b===void 0?s.jsx(s.Fragment,{}):s.jsxs("div",{className:"py-2",children:[s.jsx(U.div,{className:"progress-bar",style:{scaleX:g}}),s.jsxs("div",{className:"overflow-hidden ",children:[s.jsxs("div",{className:"p-2 sm:p-4",children:[s.jsxs("div",{className:T.between,children:[s.jsxs("p",{className:`${T.truncate} ${T.textXs} ${T.textGray500DarkZinc400}`,children:[s.jsx(Lt,{to:e==="memo"?"/m":"/hmoe",className:`${T.navLinkHoverText}`,children:e==="memo"?"MEMO":"HOME"}),t?.path?.map((w,D)=>t.path.length===D+1?` > ${w?.title}`:s.jsxs(_.Fragment,{children:[" "," > ",s.jsx(Lt,{to:e==="memo"?`/m/${w.id}`:`/home/${w.id}`,className:`${T.navLinkHoverText}`,children:w?.title})]},D))]}),s.jsx(U.button,{whileTap:{scale:.8},className:`${T.flexShrink0} ${T.roundedFull} p-2 ${T.buttonHoverGrayLight}`,"aria-label":c("bookmark"),onClick:n,children:t?.bookmark==="Y"?s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`${T.h5W5} ${T.textRed500}`,fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}):s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`${T.h5W5} ${T.textGray500}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})})]}),s.jsx("button",{onClick:()=>u(!i),className:`text-left ${T.heading2XlBoldSm3Xl} ${T.textGray900}`,children:t?.title})]}),!i&&s.jsx("div",{className:`${T.line}`}),s.jsx(U.div,{initial:!1,animate:{height:i?"auto":0,opacity:i?1:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:s.jsx("div",{className:`${T.line}`,children:s.jsx(yn,{master:b?.uid===$t,rootDb:e,onEdit:C,onUtil:R,onNewMemo:S,onDelete:N})})}),t&&t.html==="sheet"&&s.jsx(js,{rootDb:e,detailData:t}),s.jsxs("div",{className:t?.memo?.length>0?"p-2 sm:p-4":"p-1",children:[t&&t.html!=="sheet"?t?.html==="N"?s.jsx(bs,{postData:t?.memo,highlightWord:r}):t?.html!=="N"&&t?.memo&&s.jsx(Ur,{text:t.memo}):"",s.jsx(ys,{imageList:t?.image}),!t&&s.jsx("div",{className:"flex justify-center py-12",children:s.jsx("div",{className:`${T.flexCenter} py-12`})})]})]}),s.jsx(ai,{rootDb:e,memoId:h,inputBox:!0,readOnly:!1}),s.jsx(U.div,{initial:!1,animate:{height:i?"auto":0,opacity:i?1:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:s.jsx("div",{className:`${T.line}`,children:s.jsx(yn,{master:b?.uid===$t,rootDb:e,onEdit:C,onUtil:R,onNewMemo:S,onDelete:N})})}),s.jsx(Qr,{isOpen:a,size:"sm",color:"warning",title:c("delete_confirm_title"),message:c("delete_confirm_message"),onClose:()=>l(!1),onConfirm:M})]})},li=({rootDb:e})=>{const{user:t}=Be(),{t:n}=De(),r=n(e==="memo"?"appMemo":"home_mng"),o=s.jsx("div",{className:"text-center",children:s.jsx("h1",{className:`text-3xl font-bold ${T.textIndigo}`,children:r})});return s.jsx(s.Fragment,{children:s.jsx(xs,{title:o,className:"my-5",children:s.jsxs("div",{className:"grid gird-cols-1 md:grid-cols-5 items-center gap-3",children:[t===null?s.jsx("p",{className:`${T.textRed500} ${T.textLgFontSemiboldLeft} ${T.mdColSpan3}`,children:n("login_used")}):s.jsx("p",{className:`${T.textGray600DarkZinc400} text-left ${T.mdColSpan3}`,dangerouslySetInnerHTML:{__html:n("memo_main_guide").replace(`
`,"<br/>")}}),s.jsx("div",{className:`w-full ${T.flexCenter} md:col-span-2`,children:s.jsx(Cs,{})})]})})})},ci=_.lazy(()=>Te(()=>import("./MemoSheet-D6tYD3Eh.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]))),di=_.lazy(()=>Te(()=>import("./MemoSheetGrid-D4TBXdNR.js"),__vite__mapDeps([23,1,2,3,20,9,10,4,11,12,13,14,15]))),zn=_.lazy(()=>Te(()=>import("./MemoDetailEdit-BsiPCe6G.js"),__vite__mapDeps([24,1,2,25,26,27,12,28,29,9,10,4,11,13,14,15,30,31,32,33,34,35,36,37,5,6,7,8,16,17,18,19,20,21,38,22]))),ui=_.lazy(()=>Te(()=>import("./TwMemoDetailUtil-MmUS71PR.js"),__vite__mapDeps([39,1,2,29,5,9,10,4,11,12,13,14,15,25,26,27,6,7,8,16,17,18,19,20,21,22]))),fi=_.lazy(()=>Te(()=>import("./index-JdItkxIf.js").then(e=>e.eV),__vite__mapDeps([1,2]))),hi=_.lazy(()=>Te(()=>import("./HomeChartVisitors-CEXYtv8g.js"),__vite__mapDeps([40,1,2,4]))),gi=_.lazy(()=>Te(()=>import("./MemoBookMark-DY2LwU5H.js"),__vite__mapDeps([41,1,2,4,42])).then(e=>({default:e.MemoBookMark}))),An=()=>s.jsxs("div",{className:`w-full ${T.card} relative overflow-hidden p-4`,children:[s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-6 bg-gray-300 dark:bg-zinc-700 rounded-md w-3/4"}),s.jsx("div",{className:"mt-4 h-4 bg-gray-300 dark:bg-zinc-700 rounded-md w-1/2"})]}),s.jsx("div",{className:`${T.line} my-4`}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-3 animate-pulse",children:[s.jsx("div",{className:"h-4 bg-gray-300 dark:bg-zinc-700 rounded w-full",style:{animationDelay:"0.1s"}}),s.jsx("div",{className:"h-4 bg-gray-300 dark:bg-zinc-700 rounded w-5/6",style:{animationDelay:"0.2s"}}),s.jsx("div",{className:"h-4 bg-gray-300 dark:bg-zinc-700 rounded w-full",style:{animationDelay:"0.3s"}})]}),s.jsx("br",{}),s.jsxs("div",{className:"space-y-3 animate-pulse",children:[s.jsx("div",{className:"h-4 bg-gray-300 dark:bg-zinc-700 rounded w-full",style:{animationDelay:"0.4s"}}),s.jsx("div",{className:"h-4 bg-gray-300 dark:bg-zinc-700 rounded w-4/6",style:{animationDelay:"0.5s"}})]}),s.jsx("div",{className:"space-y-3 animate-pulse pt-4",children:s.jsx("div",{className:"h-4 bg-gray-300 dark:bg-zinc-700 rounded w-full",style:{animationDelay:"0.6s"}})})]})]}),mi=({rootDb:e,ui:t,user:n,memoId:r,memoDetailData:o,isLoading:a,onBookmark:l,handleCloseTab:i})=>{const u=vt();return s.jsxs(d.Suspense,{fallback:s.jsx(An,{}),children:[s.jsx(Pt,{mode:"wait",children:s.jsxs(Jr,{location:u,children:[s.jsx(Re,{path:"todo",element:s.jsx(U.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:s.jsx(fi,{})})}),s.jsx(Re,{path:"sheet/:sheetId?",element:s.jsx(U.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:s.jsx(di,{detailData:o})})}),s.jsx(Re,{path:"edit/:memoId",element:s.jsx(U.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:s.jsx(zn,{rootDb:e,isLoading:a,memoDetailData:o,ui:t})})}),s.jsx(Re,{path:"insert/:memoId",element:s.jsx(U.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:s.jsx(zn,{rootDb:e,isLoading:a,memoDetailData:o,ui:t})})}),s.jsx(Re,{path:"util/:memoId",element:s.jsx(U.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:s.jsx(ui,{rootDb:e,isLoading:a,memoDetailData:o})})}),s.jsx(Re,{path:":memoId",element:s.jsx(s.Fragment,{children:a?s.jsx(An,{}):s.jsx(ii,{rootDb:e,memoDetailData:o,onBookmark:l,onDeleteTab:()=>i(null,{id:r})})})}),s.jsx(Re,{path:"*",element:s.jsx(U.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:s.jsx(li,{rootDb:e,ui:t})})})]},u.pathname)}),(e==="memo"||e==="sheet")&&n===null?null:s.jsx(ci,{}),(e==="memo"||e==="sheet")&&s.jsx(gi,{ui:t}),(r===""||r==="m")&&n?.uid===$t&&s.jsxs(s.Fragment,{children:[s.jsx(hi,{}),s.jsx("div",{className:`mt-5 ${T.card}`,children:s.jsx(ro,{rootDb:e})})]})]})},pi=e=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...e,children:s.jsx("path",{fillRule:"evenodd",d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zM6 20V4h7v5h5v11H6zM8 12h3v3H8v-3zm0 4h3v3H8v-3zm4-4h3v3h-3v-3zm0 4h3v3h-3v-3z",clipRule:"evenodd"})}),xi=({tabInfo:e,handleCloseTab:t,isActive:n})=>{const{t:r}=De(),{user:o}=Be(),{attributes:a,listeners:l,setNodeRef:i,transform:u,transition:c,isDragging:f}=xr({id:e.id}),g={transform:Me.Transform?.toString(u),transition:c,zIndex:f?1:"auto"},{data:m}=Wn({queryKey:["tabTitle",e.rootDb,o?.uid,e.id],queryFn:async()=>e.rootDb==="sheet"?await he(`memo_sheet/${o?.uid}/${e.id}/title`):e.rootDb==="memo"?await he(`${e.rootDb}_txt/${o?.uid}/${e.id}/title`):e.rootDb==="home"?await he(`${e.rootDb}_txt/${e.id}/title`):e.title,enabled:!!o&&!!e.id,staleTime:1/0,placeholderData:e.title});return s.jsxs(Lt,{ref:i,style:g,...a,...l,"data-tab-id":e.id,to:e.path,title:m,end:!0,className:({isActive:h})=>`group relative flex flex-shrink-0 items-center pl-3 pr-2 py-1.5 text-sm rounded-t-md transition-colors duration-200 min-w-28 max-w-48 border-b-2
				${h?"bg-gray-200 dark:bg-zinc-700 border-blue-500 text-gray-800 dark:text-gray-100":"border-transparent text-gray-500 dark:text-gray-400 hover:bg-gray-200/70 dark:hover:bg-zinc-700/70"}
				${f?"opacity-50 shadow-lg":""}`,children:[e.rootDb==="memo"?s.jsx(Zr,{className:`w-5 h-5 mr-1 flex-shrink-0 transition-transform duration-200 ${n?"scale-110":""}`,fill:"currentColor"}):e.rootDb==="sheet"?s.jsx(pi,{className:`w-5 h-5 mr-1 flex-shrink-0 transition-transform duration-200 ${n?"scale-110":""}`}):null,s.jsx("span",{className:"truncate pr-1",style:{fontFamily:"sans-serif"},children:m||r("loading")}),s.jsx("button",{onClick:h=>t(h,e),className:`ml-auto flex-shrink-0 p-1 rounded-full transition-opacity duration-200 opacity-0 group-hover:opacity-100
					text-gray-500 dark:text-gray-400 
					hover:bg-gray-300/50 dark:hover:bg-gray-600/50 hover:text-gray-700 dark:hover:text-white
				`,children:s.jsx(Yn,{className:"w-3 h-3"})})]})},vi=({openTabs:e,setOpenTabs:t,handleCloseTab:n,handleCloseAllTabs:r,activeId:o})=>{const a=d.useRef(null),[l,i]=d.useState({left:!1,right:!1}),[u,c]=d.useState({left:0,width:0}),f=d.useCallback(()=>{const h=a.current;if(h){const x=h.scrollWidth>h.clientWidth,p=h.scrollLeft===0,b=h.scrollLeft+h.clientWidth>=h.scrollWidth-1;i(v=>{const y={left:x&&!p,right:x&&!b};return v.left===y.left&&v.right===y.right?v:y})}},[]),g=h=>{a.current?.scrollBy({left:h==="left"?-200:200,behavior:"smooth"})},m=h=>{const{active:x,over:p}=h;console.log("active=",x,"over=",p),x.id!==p.id&&t(b=>{const v=b.findIndex(C=>C.id===x.id),y=b.findIndex(C=>C.id===p.id);return jt(b,v,y)})};return d.useEffect(()=>{f();const h=a.current;return h?.addEventListener("scroll",f),window.addEventListener("resize",f),()=>{h?.removeEventListener("scroll",f),window.removeEventListener("resize",f)}},[e,f]),d.useEffect(()=>{const h=setTimeout(()=>{const x=a.current?.querySelector(`[data-tab-id="${o}"]`);if(x){const{offsetLeft:p,offsetWidth:b}=x;c({left:p,width:b})}},0);return()=>clearTimeout(h)},[o,e]),s.jsxs("div",{className:"relative flex items-center justify-between ",children:[l.left&&s.jsx("button",{onClick:()=>g("left"),className:"absolute left-0 z-10 p-1 border border-gray-200 dark:border-gray-700 text-gray-500 dark:text-gray-400 bg-white dark:bg-zinc-900 dark:hover:!text-white hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full group",children:s.jsx(gs,{className:"w-5 h-5 fill-current"})}),s.jsx(wr,{id:"memo-tabs",onDragEnd:m,children:s.jsx("div",{ref:a,className:"MemoTabs relative flex items-center overflow-x-scroll scrollbar-hide whitespace-nowrap",children:s.jsx(mr,{items:e.map(h=>h.id),strategy:Ia,children:s.jsx(Pt,{children:e.map(h=>s.jsx(U.div,{layout:!0,initial:{opacity:0,scale:.8},transition:{type:"spring",stiffness:350,damping:30},animate:{opacity:1,scale:1},exit:{opacity:0,width:0,paddingLeft:0,paddingRight:0,transition:{duration:.3}},children:s.jsx(xi,{tabInfo:h,handleCloseTab:n,isActive:h.id===o})},h.id))})})})}),s.jsxs("div",{className:"flex items-center",children:[l.right&&s.jsx("button",{onClick:()=>g("right"),className:"z-10 p-1 border border-gray-200 dark:border-gray-700 text-gray-500 dark:text-gray-400 bg-white dark:bg-zinc-900 dark:hover:!text-white hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full group",children:s.jsx(ms,{className:"w-5 h-5 fill-current"})}),e.length>0&&s.jsx("button",{onClick:r,className:"ml-2 mr-2 p-1.5 text-gray-500 dark:text-gray-400 hover:text-gray-800 dark:hover:text-white hover:bg-gray-200 dark:hover:bg-gray-700 rounded-md",title:"Close all tabs",children:s.jsx(Yn,{className:"w-4 h-4"})})]})]})};function bi(e,t,n,r,o){const a=n?.uid,[l,i]=d.useState(()=>{try{const x=localStorage.getItem(`openTabs_${a}`);return x?JSON.parse(x):[]}catch(x){return console.error("Failed to parse openTabs from localStorage",x),[]}}),u=d.useRef(),c=vt(),f=Vt(),g=d.useCallback(async x=>{if(e&&r&&r!=="insert"&&c.pathname!=="/m"&&c.pathname!=="/home"){const p={id:r,path:c.pathname,icon:null,rootDb:t,title:x?.title};if(c.pathname.startsWith("/m/sheet/")){const b=await he(`memo_sheet/${n?.uid}/${r}/title`);p.title=b}else r==="sheet"&&(p.title="Main Sheet");!l.some(b=>b.id===p.id)&&u.current!==r?(u.current=r,i(b=>[...b,p])):(u.current="",i(b=>b.map(v=>v.id===p.id?{...v,title:p.title||v.title}:v)))}},[o,e]);d.useEffect(()=>{o&&g(o)},[o,e]),d.useEffect(()=>{if(a)try{localStorage.setItem(`openTabs_${a}`,JSON.stringify(l))}catch(x){console.error("Failed to save openTabs to localStorage",x)}},[l,a]);const m=d.useCallback((x,p)=>{x?.preventDefault(),x?.stopPropagation(),u.current="";const b=l.findIndex(y=>y.id===p.id),v=l.filter(y=>y.id!==p.id);if(i(v),c.pathname.includes(p.id)){const y=v.length>0?v[Math.max(0,b-1)].path:`/${t==="memo"||t==="sheet"?"m":t}`;f(y,{relative:"path"})}},[l,c.pathname,t,f]),h=d.useCallback(()=>{u.current="",i([]),f(`/${t==="memo"||t==="sheet"?"m":t}`)},[t,f]);return{openTabs:l,setOpenTabs:i,handleCloseTab:m,handleCloseAllTabs:h}}const yi=()=>{const e=Vt(),{user:t}=Be(),n=es(ts),[r,o]=d.useState(!1),a=d.useRef(0),l=vt(),{rootDb:i,memoId:u}=d.useMemo(()=>{const N=l.pathname,M=N.startsWith("/m/sheet")?"sheet":N.startsWith("/m")?"memo":N.startsWith("/home")?"home":N.startsWith("/bible")?"bible":"default",w=N.split("/").pop()||"";return{rootDb:M,memoId:w}},[l.pathname]),c=l?.state?.reflash===!0,f=Ft(),{ui:g}=ns(),[m,h]=Pn(rs),{memoDetailData:x,isLoading:p,onBookmark:b}=to(i,t,u,h),{openTabs:v,setOpenTabs:y,handleCloseTab:C,handleCloseAllTabs:R}=bi(n,i,t,u,x);d.useEffect(()=>{c&&f.invalidateQueries({queryKey:["memoDetail",i,t?.uid,u]})},[c,l.pathname,f,i,t?.uid,u]);const S=d.useCallback(()=>{const N=window.pageYOffset||document.documentElement.scrollTop;o(N>a.current),a.current=N<=0?0:N},[]);return d.useEffect(()=>{const N=()=>{const M=window.pageYOffset||document.documentElement.scrollTop;M>a.current?o(!1):o(!0),a.current=M<=0?0:M};return window.addEventListener("scroll",N),()=>{window.removeEventListener("scroll",N)}},[S]),d.useEffect(()=>{t===null&&l.pathname!=="/m"&&e("/m")},[t]),s.jsxs(s.Fragment,{children:[n&&s.jsx("div",{className:`sticky ${r?"top-18":"top-1"} z-1000 rounded-t-md bg-gray-50/70 dark:bg-zinc-800/70 backdrop-blur-sm shadow-sm`,children:s.jsx(vi,{openTabs:v,setOpenTabs:y,handleCloseTab:C,handleCloseAllTabs:R,activeId:u})}),s.jsx(mi,{rootDb:i,ui:g,user:t,memoId:u,memoDetailData:x,isLoading:p,onBookmark:b,handleCloseTab:C})]})},Ii=Object.freeze(Object.defineProperty({__proto__:null,default:yi},Symbol.toStringTag,{value:"Module"}));export{br as M,vr as T,yr as a,Zs as b,Ai as c,Ii as d,zi as f,$i as s,Qs as u};
