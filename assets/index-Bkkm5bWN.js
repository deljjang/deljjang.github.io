import{b as v,g as _t,O as w,F as zt}from"./index-LOQAwg0L.js";function it(t){let e=null;return()=>(e==null&&(e=t()),e)}function Ht(t,e){return t.filter(r=>r!==e)}function Bt(t,e){const r=new Set,i=o=>r.add(o);t.forEach(i),e.forEach(i);const n=[];return r.forEach(o=>n.push(o)),n}class Ft{enter(e){const r=this.entered.length,i=n=>this.isNodeInDocument(n)&&(!n.contains||n.contains(e));return this.entered=Bt(this.entered.filter(i),[e]),r===0&&this.entered.length>0}leave(e){const r=this.entered.length;return this.entered=Ht(this.entered.filter(this.isNodeInDocument),e),r>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class Wt{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const r={};Object.keys(this.config.exposeProperties).forEach(i=>{const n=this.config.exposeProperties[i];n!=null&&(r[i]={value:n(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,r)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,r){return r===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const ot="__NATIVE_FILE__",st="__NATIVE_URL__",at="__NATIVE_TEXT__",ut="__NATIVE_HTML__",He=Object.freeze(Object.defineProperty({__proto__:null,FILE:ot,HTML:ut,TEXT:at,URL:st},Symbol.toStringTag,{value:"Module"}));function pe(t,e,r){const i=e.reduce((n,o)=>n||t.getData(o),"");return i??r}const ye={[ot]:{exposeProperties:{files:t=>Array.prototype.slice.call(t.files),items:t=>t.items,dataTransfer:t=>t},matchesTypes:["Files"]},[ut]:{exposeProperties:{html:(t,e)=>pe(t,e,""),dataTransfer:t=>t},matchesTypes:["Html","text/html"]},[st]:{exposeProperties:{urls:(t,e)=>pe(t,e,"").split(`
`),dataTransfer:t=>t},matchesTypes:["Url","text/uri-list"]},[at]:{exposeProperties:{text:(t,e)=>pe(t,e,""),dataTransfer:t=>t},matchesTypes:["Text","text/plain"]}};function Yt(t,e){const r=ye[t];if(!r)throw new Error(`native type ${t} has no configuration`);const i=new Wt(r);return i.loadDataTransfer(e),i}function me(t){if(!t)return null;const e=Array.prototype.slice.call(t.types||[]);return Object.keys(ye).filter(r=>{const i=ye[r];return i?.matchesTypes?i.matchesTypes.some(n=>e.indexOf(n)>-1):!1})[0]||null}const Xt=it(()=>/firefox/i.test(navigator.userAgent)),ct=it(()=>!!window.safari);class Be{interpolate(e){const{xs:r,ys:i,c1s:n,c2s:o,c3s:a}=this;let s=r.length-1;if(e===r[s])return i[s];let u=0,c=a.length-1,l;for(;u<=c;){l=Math.floor(.5*(u+c));const d=r[l];if(d<e)u=l+1;else if(d>e)c=l-1;else return i[l]}s=Math.max(0,c);const h=e-r[s],p=h*h;return i[s]+n[s]*h+o[s]*p+a[s]*h*p}constructor(e,r){const{length:i}=e,n=[];for(let d=0;d<i;d++)n.push(d);n.sort((d,f)=>e[d]<e[f]?-1:1);const o=[],a=[];let s,u;for(let d=0;d<i-1;d++)s=e[d+1]-e[d],u=r[d+1]-r[d],o.push(s),a.push(u/s);const c=[a[0]];for(let d=0;d<o.length-1;d++){const f=a[d],g=a[d+1];if(f*g<=0)c.push(0);else{s=o[d];const T=o[d+1],D=s+T;c.push(3*D/((D+T)/f+(D+s)/g))}}c.push(a[a.length-1]);const l=[],h=[];let p;for(let d=0;d<c.length-1;d++){p=a[d];const f=c[d],g=1/o[d],T=f+c[d+1]-p-p;l.push((p-f-T)*g),h.push(T*g*g)}this.xs=e,this.ys=r,this.c1s=c,this.c2s=l,this.c3s=h}}const qt=1;function dt(t){const e=t.nodeType===qt?t:t.parentElement;if(!e)return null;const{top:r,left:i}=e.getBoundingClientRect();return{x:i,y:r}}function ne(t){return{x:t.clientX,y:t.clientY}}function Ut(t){var e;return t.nodeName==="IMG"&&(Xt()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(t)))}function jt(t,e,r,i){let n=t?e.width:r,o=t?e.height:i;return ct()&&t&&(o/=window.devicePixelRatio,n/=window.devicePixelRatio),{dragPreviewWidth:n,dragPreviewHeight:o}}function Vt(t,e,r,i,n){const o=Ut(e),s=dt(o?t:e),u={x:r.x-s.x,y:r.y-s.y},{offsetWidth:c,offsetHeight:l}=t,{anchorX:h,anchorY:p}=i,{dragPreviewWidth:d,dragPreviewHeight:f}=jt(o,e,c,l),g=()=>{let x=new Be([0,.5,1],[u.y,u.y/l*f,u.y+f-l]).interpolate(p);return ct()&&o&&(x+=(window.devicePixelRatio-1)*f),x},T=()=>new Be([0,.5,1],[u.x,u.x/c*d,u.x+d-c]).interpolate(h),{offsetX:D,offsetY:E}=n,b=D===0||D,M=E===0||E;return{x:b?D:T(),y:M?E:g()}}let $t=class{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,r){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=r}};function Kt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Fe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable}))),i.forEach(function(n){Kt(t,n,r[n])})}return t}class Gt{profile(){var e,r;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((r=this.dragOverTargetIds)===null||r===void 0?void 0:r.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var r;(r=this.window)===null||r===void 0||r.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,r,i){return this.sourcePreviewNodeOptions.set(e,i),this.sourcePreviewNodes.set(e,r),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,r,i){this.sourceNodes.set(e,r),this.sourceNodeOptions.set(e,i);const n=a=>this.handleDragStart(a,e),o=a=>this.handleSelectStart(a);return r.setAttribute("draggable","true"),r.addEventListener("dragstart",n),r.addEventListener("selectstart",o),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),r.removeEventListener("dragstart",n),r.removeEventListener("selectstart",o),r.setAttribute("draggable","false")}}connectDropTarget(e,r){const i=a=>this.handleDragEnter(a,e),n=a=>this.handleDragOver(a,e),o=a=>this.handleDrop(a,e);return r.addEventListener("dragenter",i),r.addEventListener("dragover",n),r.addEventListener("drop",o),()=>{r.removeEventListener("dragenter",i),r.removeEventListener("dragover",n),r.removeEventListener("drop",o)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourceNodeOptions.get(e);return Fe({dropEffect:this.altKeyPressed?"copy":"move"},r||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourcePreviewNodeOptions.get(e);return Fe({anchorX:.5,anchorY:.5,captureDraggingState:!1},r||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(He).some(r=>He[r]===e)}beginDragNativeItem(e,r){this.clearCurrentDragSourceNode(),this.currentNativeSource=Yt(e,r),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const r=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var i;return(i=this.rootElement)===null||i===void 0?void 0:i.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},r)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,r){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(r))}handleDragEnter(e,r){this.dragEnterTargetIds.unshift(r)}handleDragOver(e,r){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(r)}handleDrop(e,r){this.dropTargetIds.unshift(r)}constructor(e,r,i){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=n=>{const o=this.sourceNodes.get(n);return o&&dt(o)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=n=>!!(n&&this.document&&this.document.body&&this.document.body.contains(n)),this.endDragIfSourceWasRemovedFromDOM=()=>{const n=this.currentDragSourceNode;n==null||this.isNodeInDocument(n)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=n=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(n||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=n=>{if(n.defaultPrevented)return;const{dragStartSourceIds:o}=this;this.dragStartSourceIds=null;const a=ne(n);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(o||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:a});const{dataTransfer:s}=n,u=me(s);if(this.monitor.isDragging()){if(s&&typeof s.setDragImage=="function"){const l=this.monitor.getSourceId(),h=this.sourceNodes.get(l),p=this.sourcePreviewNodes.get(l)||h;if(p){const{anchorX:d,anchorY:f,offsetX:g,offsetY:T}=this.getCurrentSourcePreviewNodeOptions(),b=Vt(h,p,a,{anchorX:d,anchorY:f},{offsetX:g,offsetY:T});s.setDragImage(p,b.x,b.y)}}try{s?.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(n.target);const{captureDraggingState:c}=this.getCurrentSourcePreviewNodeOptions();c?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(u)this.beginDragNativeItem(u);else{if(s&&!s.types&&(n.target&&!n.target.hasAttribute||!n.target.hasAttribute("draggable")))return;n.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=n=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var o;(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(n.dataTransfer)}if(!this.enterLeaveCounter.enter(n.target)||this.monitor.isDragging())return;const{dataTransfer:s}=n,u=me(s);u&&this.beginDragNativeItem(u,s)},this.handleTopDragEnter=n=>{const{dragEnterTargetIds:o}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=n.altKey,o.length>0&&this.actions.hover(o,{clientOffset:ne(n)}),o.some(s=>this.monitor.canDropOnTarget(s))&&(n.preventDefault(),n.dataTransfer&&(n.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=n=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var o;(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(n.dataTransfer)}},this.handleTopDragOver=n=>{const{dragOverTargetIds:o}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){n.preventDefault(),n.dataTransfer&&(n.dataTransfer.dropEffect="none");return}this.altKeyPressed=n.altKey,this.lastClientOffset=ne(n),this.scheduleHover(o),(o||[]).some(s=>this.monitor.canDropOnTarget(s))?(n.preventDefault(),n.dataTransfer&&(n.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?n.preventDefault():(n.preventDefault(),n.dataTransfer&&(n.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=n=>{this.isDraggingNativeItem()&&n.preventDefault(),this.enterLeaveCounter.leave(n.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=n=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var o;n.preventDefault(),(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(n.dataTransfer)}else me(n.dataTransfer)&&n.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=n=>{const{dropTargetIds:o}=this;this.dropTargetIds=[],this.actions.hover(o,{clientOffset:ne(n)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=n=>{const o=n.target;typeof o.dragDrop=="function"&&(o.tagName==="INPUT"||o.tagName==="SELECT"||o.tagName==="TEXTAREA"||o.isContentEditable||(n.preventDefault(),o.dragDrop()))},this.options=new $t(r,i),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new Ft(this.isNodeInDocument)}}let ie;function Jt(){return ie||(ie=new Image,ie.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),ie}const Qt=function(e,r,i){return new Gt(e,r,i)};var q=[],Zt=function(){return q.some(function(t){return t.activeTargets.length>0})},er=function(){return q.some(function(t){return t.skippedTargets.length>0})},We="ResizeObserver loop completed with undelivered notifications.",tr=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:We}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=We),window.dispatchEvent(t)},te;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(te||(te={}));var U=function(t){return Object.freeze(t)},rr=function(){function t(e,r){this.inlineSize=e,this.blockSize=r,U(this)}return t}(),lt=function(){function t(e,r,i,n){return this.x=e,this.y=r,this.width=i,this.height=n,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,U(this)}return t.prototype.toJSON=function(){var e=this,r=e.x,i=e.y,n=e.top,o=e.right,a=e.bottom,s=e.left,u=e.width,c=e.height;return{x:r,y:i,top:n,right:o,bottom:a,left:s,width:u,height:c}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}(),Ae=function(t){return t instanceof SVGElement&&"getBBox"in t},ht=function(t){if(Ae(t)){var e=t.getBBox(),r=e.width,i=e.height;return!r&&!i}var n=t,o=n.offsetWidth,a=n.offsetHeight;return!(o||a||t.getClientRects().length)},Ye=function(t){var e;if(t instanceof Element)return!0;var r=(e=t?.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(r&&t instanceof r.Element)},nr=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Z=typeof window<"u"?window:{},oe=new WeakMap,Xe=/auto|scroll/,ir=/^tb|vertical/,or=/msie|trident/i.test(Z.navigator&&Z.navigator.userAgent),R=function(t){return parseFloat(t||"0")},$=function(t,e,r){return t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=!1),new rr((r?e:t)||0,(r?t:e)||0)},qe=U({devicePixelContentBoxSize:$(),borderBoxSize:$(),contentBoxSize:$(),contentRect:new lt(0,0,0,0)}),ft=function(t,e){if(e===void 0&&(e=!1),oe.has(t)&&!e)return oe.get(t);if(ht(t))return oe.set(t,qe),qe;var r=getComputedStyle(t),i=Ae(t)&&t.ownerSVGElement&&t.getBBox(),n=!or&&r.boxSizing==="border-box",o=ir.test(r.writingMode||""),a=!i&&Xe.test(r.overflowY||""),s=!i&&Xe.test(r.overflowX||""),u=i?0:R(r.paddingTop),c=i?0:R(r.paddingRight),l=i?0:R(r.paddingBottom),h=i?0:R(r.paddingLeft),p=i?0:R(r.borderTopWidth),d=i?0:R(r.borderRightWidth),f=i?0:R(r.borderBottomWidth),g=i?0:R(r.borderLeftWidth),T=h+c,D=u+l,E=g+d,b=p+f,M=s?t.offsetHeight-b-t.clientHeight:0,N=a?t.offsetWidth-E-t.clientWidth:0,x=n?T+E:0,P=n?D+b:0,_=i?i.width:R(r.width)-x-N,V=i?i.height:R(r.height)-P-M,W=_+T+N+E,At=V+D+M+b,ze=U({devicePixelContentBoxSize:$(Math.round(_*devicePixelRatio),Math.round(V*devicePixelRatio),o),borderBoxSize:$(W,At,o),contentBoxSize:$(_,V,o),contentRect:new lt(h,u,_,V)});return oe.set(t,ze),ze},gt=function(t,e,r){var i=ft(t,r),n=i.borderBoxSize,o=i.contentBoxSize,a=i.devicePixelContentBoxSize;switch(e){case te.DEVICE_PIXEL_CONTENT_BOX:return a;case te.BORDER_BOX:return n;default:return o}},sr=function(){function t(e){var r=ft(e);this.target=e,this.contentRect=r.contentRect,this.borderBoxSize=U([r.borderBoxSize]),this.contentBoxSize=U([r.contentBoxSize]),this.devicePixelContentBoxSize=U([r.devicePixelContentBoxSize])}return t}(),vt=function(t){if(ht(t))return 1/0;for(var e=0,r=t.parentNode;r;)e+=1,r=r.parentNode;return e},ar=function(){var t=1/0,e=[];q.forEach(function(a){if(a.activeTargets.length!==0){var s=[];a.activeTargets.forEach(function(c){var l=new sr(c.target),h=vt(c.target);s.push(l),c.lastReportedSize=gt(c.target,c.observedBox),h<t&&(t=h)}),e.push(function(){a.callback.call(a.observer,s,a.observer)}),a.activeTargets.splice(0,a.activeTargets.length)}});for(var r=0,i=e;r<i.length;r++){var n=i[r];n()}return t},Ue=function(t){q.forEach(function(r){r.activeTargets.splice(0,r.activeTargets.length),r.skippedTargets.splice(0,r.skippedTargets.length),r.observationTargets.forEach(function(n){n.isActive()&&(vt(n.target)>t?r.activeTargets.push(n):r.skippedTargets.push(n))})})},ur=function(){var t=0;for(Ue(t);Zt();)t=ar(),Ue(t);return er()&&tr(),t>0},De,pt=[],cr=function(){return pt.splice(0).forEach(function(t){return t()})},dr=function(t){if(!De){var e=0,r=document.createTextNode(""),i={characterData:!0};new MutationObserver(function(){return cr()}).observe(r,i),De=function(){r.textContent="".concat(e?e--:e++)}}pt.push(t),De()},lr=function(t){dr(function(){requestAnimationFrame(t)})},ce=0,hr=function(){return!!ce},fr=250,gr={attributes:!0,characterData:!0,childList:!0,subtree:!0},je=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Ve=function(t){return t===void 0&&(t=0),Date.now()+t},Te=!1,vr=function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var r=this;if(e===void 0&&(e=fr),!Te){Te=!0;var i=Ve(e);lr(function(){var n=!1;try{n=ur()}finally{if(Te=!1,e=i-Ve(),!hr())return;n?r.run(1e3):e>0?r.run(e):r.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,r=function(){return e.observer&&e.observer.observe(document.body,gr)};document.body?r():Z.addEventListener("DOMContentLoaded",r)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),je.forEach(function(r){return Z.addEventListener(r,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),je.forEach(function(r){return Z.removeEventListener(r,e.listener,!0)}),this.stopped=!0)},t}(),Ce=new vr,$e=function(t){!ce&&t>0&&Ce.start(),ce+=t,!ce&&Ce.stop()},pr=function(t){return!Ae(t)&&!nr(t)&&getComputedStyle(t).display==="inline"},mr=function(){function t(e,r){this.target=e,this.observedBox=r||te.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=gt(this.target,this.observedBox,!0);return pr(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t}(),Dr=function(){function t(e,r){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=r}return t}(),se=new WeakMap,Ke=function(t,e){for(var r=0;r<t.length;r+=1)if(t[r].target===e)return r;return-1},ae=function(){function t(){}return t.connect=function(e,r){var i=new Dr(e,r);se.set(e,i)},t.observe=function(e,r,i){var n=se.get(e),o=n.observationTargets.length===0;Ke(n.observationTargets,r)<0&&(o&&q.push(n),n.observationTargets.push(new mr(r,i&&i.box)),$e(1),Ce.schedule())},t.unobserve=function(e,r){var i=se.get(e),n=Ke(i.observationTargets,r),o=i.observationTargets.length===1;n>=0&&(o&&q.splice(q.indexOf(i),1),i.observationTargets.splice(n,1),$e(-1))},t.disconnect=function(e){var r=this,i=se.get(e);i.observationTargets.slice().forEach(function(n){return r.unobserve(e,n.target)}),i.activeTargets.splice(0,i.activeTargets.length)},t}(),Tr=function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");ae.connect(this,e)}return t.prototype.observe=function(e,r){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Ye(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");ae.observe(this,e,r)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Ye(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");ae.unobserve(this,e)},t.prototype.disconnect=function(){ae.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}();function Ge(t,e){let r;return(...i)=>{window.clearTimeout(r),r=window.setTimeout(()=>t(...i),e)}}function wr({debounce:t,scroll:e,polyfill:r,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const n=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!n)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=v.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),s=v.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o,orientationHandler:null}),u=t?typeof t=="number"?t:t.scroll:null,c=t?typeof t=="number"?t:t.resize:null,l=v.useRef(!1);v.useEffect(()=>(l.current=!0,()=>void(l.current=!1)));const[h,p,d]=v.useMemo(()=>{const D=()=>{if(!s.current.element)return;const{left:E,top:b,width:M,height:N,bottom:x,right:P,x:_,y:V}=s.current.element.getBoundingClientRect(),W={left:E,top:b,width:M,height:N,bottom:x,right:P,x:_,y:V};s.current.element instanceof HTMLElement&&i&&(W.height=s.current.element.offsetHeight,W.width=s.current.element.offsetWidth),Object.freeze(W),l.current&&!Sr(s.current.lastBounds,W)&&a(s.current.lastBounds=W)};return[D,c?Ge(D,c):D,u?Ge(D,u):D]},[a,i,u,c]);function f(){s.current.scrollContainers&&(s.current.scrollContainers.forEach(D=>D.removeEventListener("scroll",d,!0)),s.current.scrollContainers=null),s.current.resizeObserver&&(s.current.resizeObserver.disconnect(),s.current.resizeObserver=null),s.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",s.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",s.current.orientationHandler))}function g(){s.current.element&&(s.current.resizeObserver=new n(d),s.current.resizeObserver.observe(s.current.element),e&&s.current.scrollContainers&&s.current.scrollContainers.forEach(D=>D.addEventListener("scroll",d,{capture:!0,passive:!0})),s.current.orientationHandler=()=>{d()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",s.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",s.current.orientationHandler))}const T=D=>{!D||D===s.current.element||(f(),s.current.element=D,s.current.scrollContainers=mt(D),g())};return Er(d,!!e),br(p),v.useEffect(()=>{f(),g()},[e,d,p]),v.useEffect(()=>f,[]),[T,o,h]}function br(t){v.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function Er(t,e){v.useEffect(()=>{if(e){const r=t;return window.addEventListener("scroll",r,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",r,!0)}},[t,e])}function mt(t){const e=[];if(!t||t===document.body)return e;const{overflow:r,overflowX:i,overflowY:n}=window.getComputedStyle(t);return[r,i,n].some(o=>o==="auto"||o==="scroll")&&e.push(t),[...e,...mt(t.parentElement)]}const Or=["x","y","top","bottom","left","right","width","height"],Sr=(t,e)=>Or.every(r=>t[r]===e[r]),yr=v.createContext({dragDropManager:void 0});function k(t,e,...r){if(Cr()&&e===void 0)throw new Error("invariant requires an error message argument");if(!t){let i;if(e===void 0)i=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let n=0;i=new Error(e.replace(/%s/g,function(){return r[n++]})),i.name="Invariant Violation"}throw i.framesToPop=1,i}}function Cr(){return typeof process<"u"&&!0}var we,Je;function Ir(){return Je||(Je=1,we=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var i,n,o;if(Array.isArray(e)){if(i=e.length,i!=r.length)return!1;for(n=i;n--!==0;)if(!t(e[n],r[n]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(o=Object.keys(e),i=o.length,i!==Object.keys(r).length)return!1;for(n=i;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[n]))return!1;for(n=i;n--!==0;){var a=o[n];if(!t(e[a],r[a]))return!1}return!0}return e!==e&&r!==r}),we}var xr=Ir();const Mr=_t(xr),j=typeof window<"u"?v.useLayoutEffect:v.useEffect;function Dt(t,e,r){const[i,n]=v.useState(()=>e(t)),o=v.useCallback(()=>{const a=e(t);Mr(i,a)||(n(a),r&&r())},[i,t,r]);return j(o),[i,o]}function Nr(t,e,r){const[i,n]=Dt(t,e,r);return j(function(){const a=t.getHandlerId();if(a!=null)return t.subscribeToStateChange(n,{handlerIds:[a]})},[t,n]),i}function Tt(t,e,r){return Nr(e,t||(()=>({})),()=>r.reconnect())}function wt(t,e){const r=[];return typeof t!="function"&&r.push(t),v.useMemo(()=>typeof t=="function"?t():t,r)}function Pr(t){return v.useMemo(()=>t.hooks.dragSource(),[t])}function Rr(t){return v.useMemo(()=>t.hooks.dragPreview(),[t])}let be=!1,Ee=!1;class Lr{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){k(!be,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return be=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{be=!1}}isDragging(){if(!this.sourceId)return!1;k(!Ee,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Ee=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Ee=!1}}subscribeToStateChange(e,r){return this.internalMonitor.subscribeToStateChange(e,r)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,r){return this.internalMonitor.isOverTarget(e,r)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let Oe=!1;class kr{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,r){return this.internalMonitor.subscribeToStateChange(e,r)}canDrop(){if(!this.targetId)return!1;k(!Oe,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return Oe=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Oe=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function Ar(t,e,r){const i=r.getRegistry(),n=i.addTarget(t,e);return[n,()=>i.removeTarget(n)]}function _r(t,e,r){const i=r.getRegistry(),n=i.addSource(t,e);return[n,()=>i.removeSource(n)]}function Ie(t,e,r,i){let n;if(n!==void 0)return!!n;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;const o=Object.keys(t),a=Object.keys(e);if(o.length!==a.length)return!1;const s=Object.prototype.hasOwnProperty.bind(e);for(let u=0;u<o.length;u++){const c=o[u];if(!s(c))return!1;const l=t[c],h=e[c];if(n=void 0,n===!1||n===void 0&&l!==h)return!1}return!0}function xe(t){return t!==null&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function zr(t){if(typeof t.type=="string")return;const e=t.type.displayName||t.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function Hr(t){return(e=null,r=null)=>{if(!v.isValidElement(e)){const o=e;return t(o,r),o}const i=e;return zr(i),Br(i,r?o=>t(o,r):t)}}function bt(t){const e={};return Object.keys(t).forEach(r=>{const i=t[r];if(r.endsWith("Ref"))e[r]=t[r];else{const n=Hr(i);e[r]=()=>n}}),e}function Qe(t,e){typeof t=="function"?t(e):t.current=e}function Br(t,e){const r=t.ref;return k(typeof r!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?v.cloneElement(t,{ref:i=>{Qe(r,i),Qe(e,i)}}):v.cloneElement(t,{ref:e})}class Fr{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,r=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return r&&this.disconnectDragSource(),this.handlerId?e?(r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),r):(this.lastConnectedDragSource=e,r):r}reconnectDragPreview(e=!1){const r=this.dragPreview,i=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(i&&this.disconnectDragPreview(),!!this.handlerId){if(!r){this.lastConnectedDragPreview=r;return}i&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!Ie(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!Ie(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=bt({dragSource:(r,i)=>{this.clearDragSource(),this.dragSourceOptions=i||null,xe(r)?this.dragSourceRef=r:this.dragSourceNode=r,this.reconnectDragSource()},dragPreview:(r,i)=>{this.clearDragPreview(),this.dragPreviewOptions=i||null,xe(r)?this.dragPreviewRef=r:this.dragPreviewNode=r,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class Wr{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const r=this.dropTarget;if(this.handlerId){if(!r){this.lastConnectedDropTarget=r;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=r,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,r,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!Ie(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=bt({dropTarget:(r,i)=>{this.clearDropTarget(),this.dropTargetOptions=i,xe(r)?this.dropTargetRef=r:this.dropTargetNode=r,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function A(){const{dragDropManager:t}=v.useContext(yr);return k(t!=null,"Expected drag drop context"),t}function Yr(t,e){const r=A(),i=v.useMemo(()=>new Fr(r.getBackend()),[r]);return j(()=>(i.dragSourceOptions=t||null,i.reconnect(),()=>i.disconnectDragSource()),[i,t]),j(()=>(i.dragPreviewOptions=e||null,i.reconnect(),()=>i.disconnectDragPreview()),[i,e]),i}function Xr(){const t=A();return v.useMemo(()=>new Lr(t),[t])}class qr{beginDrag(){const e=this.spec,r=this.monitor;let i=null;return typeof e.item=="object"?i=e.item:typeof e.item=="function"?i=e.item(r):i={},i??null}canDrag(){const e=this.spec,r=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(r):!0}isDragging(e,r){const i=this.spec,n=this.monitor,{isDragging:o}=i;return o?o(n):r===e.getSourceId()}endDrag(){const e=this.spec,r=this.monitor,i=this.connector,{end:n}=e;n&&n(r.getItem(),r),i.reconnect()}constructor(e,r,i){this.spec=e,this.monitor=r,this.connector=i}}function Ur(t,e,r){const i=v.useMemo(()=>new qr(t,e,r),[e,r]);return v.useEffect(()=>{i.spec=t},[t]),i}function jr(t){return v.useMemo(()=>{const e=t.type;return k(e!=null,"spec.type must be defined"),e},[t])}function Vr(t,e,r){const i=A(),n=Ur(t,e,r),o=jr(t);j(function(){if(o!=null){const[s,u]=_r(o,n,i);return e.receiveHandlerId(s),r.receiveHandlerId(s),u}},[i,e,r,n,o])}function $r(t,e){const r=wt(t);k(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const i=Xr(),n=Yr(r.options,r.previewOptions);return Vr(r,i,n),[Tt(r.collect,i,n),Pr(n),Rr(n)]}function Kr(t){const r=A().getMonitor(),[i,n]=Dt(r,t);return v.useEffect(()=>r.subscribeToOffsetChange(n)),v.useEffect(()=>r.subscribeToStateChange(n)),i}function Gr(t){return v.useMemo(()=>t.hooks.dropTarget(),[t])}function Jr(t){const e=A(),r=v.useMemo(()=>new Wr(e.getBackend()),[e]);return j(()=>(r.dropTargetOptions=t||null,r.reconnect(),()=>r.disconnectDropTarget()),[t]),r}function Qr(){const t=A();return v.useMemo(()=>new kr(t),[t])}function Zr(t){const{accept:e}=t;return v.useMemo(()=>(k(t.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class en{canDrop(){const e=this.spec,r=this.monitor;return e.canDrop?e.canDrop(r.getItem(),r):!0}hover(){const e=this.spec,r=this.monitor;e.hover&&e.hover(r.getItem(),r)}drop(){const e=this.spec,r=this.monitor;if(e.drop)return e.drop(r.getItem(),r)}constructor(e,r){this.spec=e,this.monitor=r}}function tn(t,e){const r=v.useMemo(()=>new en(t,e),[e]);return v.useEffect(()=>{r.spec=t},[t]),r}function rn(t,e,r){const i=A(),n=tn(t,e),o=Zr(t);j(function(){const[s,u]=Ar(o,n,i);return e.receiveHandlerId(s),r.receiveHandlerId(s),u},[i,e,n,r,o.map(a=>a.toString()).join("|")])}function Et(t,e){const r=wt(t),i=Qr(),n=Jr(r.options);return rn(r,i,n),[Tt(r.collect,i,n),Gr(n)]}var Ot=t=>{throw TypeError(t)},St=(t,e,r)=>e.has(t)||Ot("Cannot "+r),m=(t,e,r)=>(St(t,e,"read from private field"),r?r.call(t):e.get(t)),C=(t,e,r)=>e.has(t)?Ot("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Y=(t,e,r,i)=>(St(t,e,"write to private field"),e.set(t,r),r),z,nn=class{constructor(){C(this,z),this.register=t=>{m(this,z).push(t)},this.unregister=t=>{for(;m(this,z).indexOf(t)!==-1;)m(this,z).splice(m(this,z).indexOf(t),1)},this.backendChanged=t=>{for(let e of m(this,z))e.backendChanged(t)},Y(this,z,[])}};z=new WeakMap;var S,J,y,L,X,Me,Ne,Pe,de,le,Q,yt=class he{constructor(e,r,i){if(C(this,S),C(this,J),C(this,y),C(this,L),C(this,X),C(this,Me,(n,o,a)=>{if(!a.backend)throw new Error(`You must specify a 'backend' property in your Backend entry: ${JSON.stringify(a)}`);let s=a.backend(n,o,a.options),u=a.id,c=!a.id&&s&&s.constructor;if(c&&(u=s.constructor.name),!u)throw new Error(`You must specify an 'id' property in your Backend entry: ${JSON.stringify(a)}
        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-5xx`);if(c&&console.warn(`Deprecation notice: You are using a pipeline which doesn't include backends' 'id'.
        This might be unsupported in the future, please specify 'id' explicitely for every backend.`),m(this,y)[u])throw new Error(`You must specify a unique 'id' property in your Backend entry:
        ${JSON.stringify(a)} (conflicts with: ${JSON.stringify(m(this,y)[u])})`);return{id:u,instance:s,preview:a.preview??!1,transition:a.transition,skipDispatchOnTransition:a.skipDispatchOnTransition??!1}}),this.setup=()=>{if(!(typeof window>"u")){if(he.isSetUp)throw new Error("Cannot have two MultiBackends at the same time.");he.isSetUp=!0,m(this,Ne).call(this,window),m(this,y)[m(this,S)].instance.setup()}},this.teardown=()=>{typeof window>"u"||(he.isSetUp=!1,m(this,Pe).call(this,window),m(this,y)[m(this,S)].instance.teardown())},this.connectDragSource=(n,o,a)=>m(this,Q).call(this,"connectDragSource",n,o,a),this.connectDragPreview=(n,o,a)=>m(this,Q).call(this,"connectDragPreview",n,o,a),this.connectDropTarget=(n,o,a)=>m(this,Q).call(this,"connectDropTarget",n,o,a),this.profile=()=>m(this,y)[m(this,S)].instance.profile(),this.previewEnabled=()=>m(this,y)[m(this,S)].preview,this.previewsList=()=>m(this,J),this.backendsList=()=>m(this,L),C(this,Ne,n=>{for(let o of m(this,L))o.transition&&n.addEventListener(o.transition.event,m(this,de))}),C(this,Pe,n=>{for(let o of m(this,L))o.transition&&n.removeEventListener(o.transition.event,m(this,de))}),C(this,de,n=>{let o=m(this,S);if(m(this,L).some(a=>a.id!==m(this,S)&&a.transition&&a.transition.check(n)?(Y(this,S,a.id),!0):!1),m(this,S)!==o){m(this,y)[o].instance.teardown();for(let[c,l]of Object.entries(m(this,X)))l.unsubscribe(),l.unsubscribe=m(this,le).call(this,l.func,...l.args);m(this,J).backendChanged(this);let a=m(this,y)[m(this,S)];if(a.instance.setup(),a.skipDispatchOnTransition)return;let s=n.constructor,u=new s(n.type,n);n.target?.dispatchEvent(u)}}),C(this,le,(n,o,a,s)=>m(this,y)[m(this,S)].instance[n](o,a,s)),C(this,Q,(n,o,a,s)=>{let u=`${n}_${o}`,c=m(this,le).call(this,n,o,a,s);return m(this,X)[u]={func:n,args:[o,a,s],unsubscribe:c},()=>{m(this,X)[u].unsubscribe(),delete m(this,X)[u]}}),!i||!i.backends||i.backends.length<1)throw new Error(`You must specify at least one Backend, if you are coming from 2.x.x (or don't understand this error)
        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-2xx`);Y(this,J,new nn),Y(this,y,{}),Y(this,L,[]);for(let n of i.backends){let o=m(this,Me).call(this,e,r,n);m(this,y)[o.id]=o,m(this,L).push(o)}Y(this,S,m(this,L)[0].id),Y(this,X,{})}};S=new WeakMap,J=new WeakMap,y=new WeakMap,L=new WeakMap,X=new WeakMap,Me=new WeakMap,Ne=new WeakMap,Pe=new WeakMap,de=new WeakMap,le=new WeakMap,Q=new WeakMap,yt.isSetUp=!1;var on=yt,Vn=(t,e,r)=>new on(t,e,r),Ct=(t,e)=>({event:t,check:e}),sn=Ct("touchstart",t=>{let e=t;return e.touches!==null&&e.touches!==void 0}),an=Ct("pointerdown",t=>t.pointerType==="mouse"),H;(function(t){t.mouse="mouse",t.touch="touch",t.keyboard="keyboard"})(H||(H={}));class un{get delay(){var e;return(e=this.args.delay)!==null&&e!==void 0?e:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var e;return(e=this.args.ignoreContextMenu)!==null&&e!==void 0?e:!1}get enableHoverOutsideTarget(){var e;return(e=this.args.enableHoverOutsideTarget)!==null&&e!==void 0?e:!1}get enableKeyboardEvents(){var e;return(e=this.args.enableKeyboardEvents)!==null&&e!==void 0?e:!1}get enableMouseEvents(){var e;return(e=this.args.enableMouseEvents)!==null&&e!==void 0?e:!1}get enableTouchEvents(){var e;return(e=this.args.enableTouchEvents)!==null&&e!==void 0?e:!0}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var e,r,i,n;return(n=(i=(e=this.args)===null||e===void 0?void 0:e.delayTouchStart)!==null&&i!==void 0?i:(r=this.args)===null||r===void 0?void 0:r.delay)!==null&&n!==void 0?n:0}get delayMouseStart(){var e,r,i,n;return(n=(i=(e=this.args)===null||e===void 0?void 0:e.delayMouseStart)!==null&&i!==void 0?i:(r=this.args)===null||r===void 0?void 0:r.delay)!==null&&n!==void 0?n:0}get window(){if(this.context&&this.context.window)return this.context.window;if(typeof window<"u")return window}get document(){var e;if(!((e=this.context)===null||e===void 0)&&e.document)return this.context.document;if(this.window)return this.window.document}get rootElement(){var e;return((e=this.args)===null||e===void 0?void 0:e.rootElement)||this.document}constructor(e,r){this.args=e,this.context=r}}function cn(t,e,r,i){return Math.sqrt(Math.pow(Math.abs(r-t),2)+Math.pow(Math.abs(i-e),2))}function dn(t,e,r,i,n){if(!n)return!1;const o=Math.atan2(i-e,r-t)*180/Math.PI+180;for(let a=0;a<n.length;++a){const s=n[a];if(s&&(s.start==null||o>=s.start)&&(s.end==null||o<=s.end))return!0}return!1}const ln={Left:1},hn={Left:0};function Se(t){return t.button===void 0||t.button===hn.Left}function fn(t){return t.buttons===void 0||(t.buttons&ln.Left)===0}function It(t){return!!t.targetTouches}const gn=1;function vn(t){const e=t.nodeType===gn?t:t.parentElement;if(!e)return;const{top:r,left:i}=e.getBoundingClientRect();return{x:i,y:r}}function pn(t,e){if(t.targetTouches.length===1)return ge(t.targetTouches[0]);if(e&&t.touches.length===1&&t.touches[0].target===e.target)return ge(t.touches[0])}function ge(t,e){return It(t)?pn(t,e):{x:t.clientX,y:t.clientY}}const Ze=(()=>{let t=!1;try{addEventListener("test",()=>{},Object.defineProperty({},"passive",{get(){return t=!0,!0}}))}catch{}return t})(),K={[H.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[H.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[H.keyboard]:{keydown:"keydown"}};class ee{profile(){var e;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:((e=this.dragOverTargetIds)===null||e===void 0?void 0:e.length)||0}}get document(){return this.options.document}setup(){const e=this.options.rootElement;e&&(k(!ee.isSetUp,"Cannot have two Touch backends at the same time."),ee.isSetUp=!0,this.addEventListener(e,"start",this.getTopMoveStartHandler()),this.addEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(e,"move",this.handleTopMove),this.addEventListener(e,"move",this.handleTopMoveCapture,!0),this.addEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(e,"keydown",this.handleCancelOnEscape,!0))}teardown(){const e=this.options.rootElement;e&&(ee.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(e,"start",this.handleTopMoveStart),this.removeEventListener(e,"move",this.handleTopMoveCapture,!0),this.removeEventListener(e,"move",this.handleTopMove),this.removeEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(e,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(e,r,i,n=!1){const o=Ze?{capture:n,passive:!1}:n;this.listenerTypes.forEach(function(a){const s=K[a][r];s&&e.addEventListener(s,i,o)})}removeEventListener(e,r,i,n=!1){const o=Ze?{capture:n,passive:!1}:n;this.listenerTypes.forEach(function(a){const s=K[a][r];s&&e.removeEventListener(s,i,o)})}connectDragSource(e,r){const i=this.handleMoveStart.bind(this,e);return this.sourceNodes.set(e,r),this.addEventListener(r,"start",i),()=>{this.sourceNodes.delete(e),this.removeEventListener(r,"start",i)}}connectDragPreview(e,r,i){return this.sourcePreviewNodeOptions.set(e,i),this.sourcePreviewNodes.set(e,r),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDropTarget(e,r){const i=this.options.rootElement;if(!this.document||!i)return()=>{};const n=o=>{if(!this.document||!i||!this.monitor.isDragging())return;let a;switch(o.type){case K.mouse.move:a={x:o.clientX,y:o.clientY};break;case K.touch.move:var s,u;a={x:((s=o.touches[0])===null||s===void 0?void 0:s.clientX)||0,y:((u=o.touches[0])===null||u===void 0?void 0:u.clientY)||0};break}const c=a!=null?this.document.elementFromPoint(a.x,a.y):void 0,l=c&&r.contains(c);if(c===r||l)return this.handleMove(o,e)};return this.addEventListener(this.document.body,"move",n),this.targetNodes.set(e,r),()=>{this.document&&(this.targetNodes.delete(e),this.removeEventListener(this.document.body,"move",n))}}getTopMoveStartHandler(){return!this.options.delayTouchStart&&!this.options.delayMouseStart?this.handleTopMoveStart:this.handleTopMoveStartDelay}installSourceNodeRemovalObserver(e){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=e,this.draggedSourceNodeRemovalObserver=new MutationObserver(()=>{e&&!e.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())}),!(!e||!e.parentElement)&&this.draggedSourceNodeRemovalObserver.observe(e.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(e,r,i){this.getSourceClientOffset=n=>{const o=this.sourceNodes.get(n);return o&&vn(o)},this.handleTopMoveStartCapture=n=>{Se(n)&&(this.moveStartSourceIds=[])},this.handleMoveStart=n=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(n)},this.handleTopMoveStart=n=>{if(!Se(n))return;const o=ge(n);o&&(It(n)&&(this.lastTargetTouchFallback=n.targetTouches[0]),this._mouseClientOffset=o),this.waitingForDelay=!1},this.handleTopMoveStartDelay=n=>{if(!Se(n))return;const o=n.type===K.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,n),o),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(n,o)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(o)},this.handleTopMove=n=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;const{moveStartSourceIds:o,dragOverTargetIds:a}=this,s=this.options.enableHoverOutsideTarget,u=ge(n,this.lastTargetTouchFallback);if(!u)return;if(this._isScrolling||!this.monitor.isDragging()&&dn(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,u.x,u.y,this.options.scrollAngleRanges)){this._isScrolling=!0;return}if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&o&&cn(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,u.x,u.y)>(this.options.touchSlop?this.options.touchSlop:0)&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(o,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;const c=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(c),this.actions.publishDragSource(),n.cancelable&&n.preventDefault();const l=(a||[]).map(f=>this.targetNodes.get(f)).filter(f=>!!f),h=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(u.x,u.y,l):this.document.elementsFromPoint(u.x,u.y),p=[];for(const f in h){if(!h.hasOwnProperty(f))continue;let g=h[f];for(g!=null&&p.push(g);g;)g=g.parentElement,g&&p.indexOf(g)===-1&&p.push(g)}const d=p.filter(f=>l.indexOf(f)>-1).map(f=>this._getDropTargetId(f)).filter(f=>!!f).filter((f,g,T)=>T.indexOf(f)===g);if(s)for(const f in this.targetNodes){const g=this.targetNodes.get(f);if(c&&g&&g.contains(c)&&d.indexOf(f)===-1){d.unshift(f);break}}d.reverse(),this.actions.hover(d,{clientOffset:u})},this._getDropTargetId=n=>{const o=this.targetNodes.keys();let a=o.next();for(;a.done===!1;){const s=a.value;if(n===this.targetNodes.get(s))return s;a=o.next()}},this.handleTopMoveEndCapture=n=>{if(this._isScrolling=!1,this.lastTargetTouchFallback=void 0,!!fn(n)){if(!this.monitor.isDragging()||this.monitor.didDrop()){this.moveStartSourceIds=void 0;return}n.cancelable&&n.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()}},this.handleCancelOnEscape=n=>{n.key==="Escape"&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new un(i,r),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(H.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(H.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(H.keyboard)}}const mn=function(e,r={},i={}){return new ee(e,r,i)};var I=function(){return I=Object.assign||function(e){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},I.apply(this,arguments)};function O(t,e,r){if(r||arguments.length===2)for(var i=0,n=e.length,o;i<n;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))}function Dn(t){var e=t.isVisible,r=t.ease,i=r===void 0?"easeIn":r,n=t.duration,o=t.variants,a=o===void 0?{open:{opacity:1,height:"auto"},close:{opacity:0,height:0}}:o,s=t.children,u=wr({polyfill:Tr}),c=u[0],l=u[1].height,h=v.useState(e),p=h[0],d=h[1],f=v.useState(e),g=f[0],T=f[1],D=v.useState(!1),E=D[0],b=D[1],M=function(){b(!1),e||d(!1)};v.useEffect(function(){b(!0),e?d(!0):T(!1)},[e]);var N=l===0;return v.useEffect(function(){p&&T(!0)},[N]),w.createElement(zt.div,{style:E?{overflow:"hidden"}:void 0,onAnimationComplete:M,initial:g?"open":"close",animate:g?"open":"close",inherit:!1,variants:a,transition:{ease:i,duration:Tn(l,n)}},w.createElement("div",{ref:c},p&&s))}function Tn(t,e){if(e)return e;if(!t)return 0;var r=t/36;return Math.round((4+10*Math.pow(r,.25)+r/5)*10)/1500}var xt=v.createContext({}),wn={isLock:!1},bn=function(t){var e=v.useState(wn.isLock),r=e[0],i=e[1];return w.createElement(xt.Provider,{value:{isLock:r,lock:function(){return i(!0)},unlock:function(){return i(!1)}}},t.children)},re=v.createContext({}),ue={dropTargetId:void 0,index:void 0},En=function(t){var e=v.useState(ue.dropTargetId),r=e[0],i=e[1],n=v.useState(ue.index),o=n[0],a=n[1],s=function(c,l){i(c),a(l)},u=function(){i(ue.dropTargetId),a(ue.index)};return w.createElement(re.Provider,{value:{dropTargetId:r,index:o,showPlaceholder:s,hidePlaceholder:u}},t.children)},On=function(t,e){return t.text>e.text?1:t.text<e.text?-1:0},G=function(t,e){return t.find(function(r){return r.id===e})},Mt=function(t,e,r){if(r===0)return!1;var i=t.find(function(n){return n.id===r});return i===void 0?!1:i.parent===e?!0:Mt(t,e,i.parent)},_e=function(t){return typeof t=="object"&&t!==null&&"id"in t&&"parent"in t&&"text"in t},B=function(t,e,r){var i=r.tree,n=r.rootId,o=r.canDrop;if(t===null){if(e===n)return!0;var a=i.find(function(l){return l.id===e});return!!(a&&a.droppable)}else{var s=_e(t)?t.id:null;if(o){var u=o(s,e);if(u!==void 0)return u}if(s===e)return!1;var c=i.find(function(h){return h.id===s}),a=i.find(function(h){return h.id===e});return c===void 0||s===null?e===n||!!a?.droppable:a===void 0?c.parent!==0:c.parent===e||!a.droppable?!1:!Mt(i,s,e)}},Sn=function(t,e,r){return t.map(function(i){return i.id===e?I(I({},i),{parent:r}):i})},Nt=function(t,e,r){if(r===0)return 0;var i=t.filter(function(n){return n.parent===e});return i[r]?t.findIndex(function(n){return n.id===i[r].id}):t.findIndex(function(n){return n.id===i[r-1].id})+1},yn=function(t,e){return t.findIndex(function(r){return r.id===e})},Pt=function(t,e,r,i){var n=yn(t,e),o=Nt(t,r,i);return o=o>n?o-1:o,[n,o]},Cn=function(t,e,r){var i=e<0?t.length+e:e;if(i>=0&&i<t.length){var n=r<0?t.length+r:r,o=t.splice(e,1)[0];t.splice(n,0,o)}},In=function(t,e,r,i){var n=Pt(t,e,r,i),o=n[0],a=n[1],s=O([],t,!0);return Cn(s,o,a),s.map(function(u){return u.id===e?I(I({},u),{parent:r}):u})},xn=function(t,e){var r=t.getBoundingClientRect(),i=r.top+r.height/2;return e>i?"down":"up"},Re=function(t,e){var r="",i=0;return t.forEach(function(n,o){var a,s=xn(n,((a=e.getClientOffset())===null||a===void 0?void 0:a.y)||0);r===""?r=s:r!==s&&(r=s,i=o),o===t.length-1&&s==="down"&&(i=o+1)}),i},et=function(t,e,r){var i=e.closest('[role="list"]'),n=i?.querySelectorAll(':scope > [role="listitem"]');return n?Re(n,r):null},Mn=function(t,e,r){var i=t.getBoundingClientRect(),n=r.dropTargetOffset;if(n===0)return"middle";var o=i.top+n,a=i.bottom-n;return e>a?"lower":e<o?"upper":"middle"},Le=function(t,e,r,i){var n;if(!e)return null;if(t===null){var o=e.querySelectorAll(':scope > [role="listitem"]');return{id:i.rootId,index:Re(o,r)}}var a=r.getItem(),s=e.querySelector('[role="list"]'),u=Mn(e,((n=r.getClientOffset())===null||n===void 0?void 0:n.y)||0,i);if(s){if(u==="upper")if(B(a,t.parent,i)){var c=et(t,e,r);return c===null?null:{id:t.parent,index:c}}else return{id:t.id,index:0};var o=s.querySelectorAll(':scope > [role="listitem"]');return{id:t.id,index:Re(o,r)}}else{if(u==="middle")return{id:t.id,index:0};if(B(a,t.parent,i)){var c=et(t,e,r);return c===null?null:{id:t.parent,index:c}}return null}},$n=function(t){return t===void 0&&(t={}),{backends:[{id:"html5",backend:Qt,options:t.html5,transition:an},{id:"touch",backend:mn,options:t.touch||{enableMouseEvents:!0},preview:!0,transition:sn}]}},fe=function(t,e){return t.some(function(r){return r.parent===e})},Rt=v.createContext({}),Nn=function(t){var e=_n(t.tree,t.initialOpen),r=e[0],i=e[1],n=i.handleToggle,o=i.handleCloseAll,a=i.handleOpenAll,s=i.handleOpen,u=i.handleClose;v.useImperativeHandle(t.treeRef,function(){return{open:function(d){return s(d,t.onChangeOpen)},close:function(d){return u(d,t.onChangeOpen)},openAll:function(){return a(t.onChangeOpen)},closeAll:function(){return o(t.onChangeOpen)}}});var c=A().getMonitor(),l=t.canDrop,h=t.canDrag,p=I(I({extraAcceptTypes:[],listComponent:"ul",listItemComponent:"li",placeholderComponent:"li",sort:!0,insertDroppableFirst:!0,enableAnimateExpand:!1,dropTargetOffset:0,initialOpen:!1},t),{openIds:r,onDrop:function(d,f,g){if(d){var T={dragSourceId:d.id,dropTargetId:f,dragSource:d,dropTarget:G(t.tree,f),monitor:c},D=t.tree;if(G(D,d.id)||(D=O(O([],D,!0),[d],!1)),t.sort===!1){var E=Pt(D,d.id,f,g),b=E[1];T.destinationIndex=b,T.relativeIndex=g,t.onDrop(In(D,d.id,f,g),T);return}t.onDrop(Sn(D,d.id,f),T)}else{var T={dropTargetId:f,dropTarget:G(t.tree,f),monitor:c};t.sort===!1&&(T.destinationIndex=Nt(t.tree,f,g),T.relativeIndex=g),t.onDrop(t.tree,T)}},canDrop:l?function(d,f){return l(t.tree,{dragSourceId:d??void 0,dropTargetId:f,dragSource:c.getItem(),dropTarget:G(t.tree,f),monitor:c})}:void 0,canDrag:h?function(d){return h(G(t.tree,d))}:void 0,onToggle:function(d){return n(d,t.onChangeOpen)}});return w.createElement(Rt.Provider,{value:p},t.children)},Pn=function(t){return w.createElement(Nn,I({},t),w.createElement(bn,null,w.createElement(En,null,t.children)))},Rn=function(t){var e=v.useContext(xt);v.useEffect(function(){if(t.current){var r=t.current,i=function(l){var h=l.target;(h instanceof HTMLInputElement||h instanceof HTMLTextAreaElement)&&e.lock()},n=function(l){var h=l.target;(h instanceof HTMLInputElement||h instanceof HTMLTextAreaElement)&&e.unlock()},o=function(l){return i(l)},a=function(l){return n(l)},s=function(l){return i(l)},u=function(l){return n(l)},c=new MutationObserver(function(){document.activeElement===document.body&&e.unlock()});return c.observe(r,{subtree:!0,childList:!0}),r.addEventListener("mouseover",o),r.addEventListener("mouseout",a),r.addEventListener("focusin",s),r.addEventListener("focusout",u),function(){c.disconnect(),r.removeEventListener("mouseover",o),r.removeEventListener("mouseout",a),r.removeEventListener("focusin",s),r.removeEventListener("focusout",u)}}},[t,e]),v.useEffect(function(){var r;(r=t.current)===null||r===void 0||r.setAttribute("draggable",e.isLock?"false":"true")},[t,e.isLock])},ve={TREE_ITEM:Symbol()},Lt=null,kt=function(t){var e=t.target;if(e instanceof HTMLElement){var r=e.closest('[role="listitem"]');t.currentTarget===r&&(Lt=r)}},tt=function(t){return kt(t)},rt=function(t){return kt(t)},Ln=function(t,e){var r=F();v.useEffect(function(){var s=e.current;return s?.addEventListener("dragstart",tt),s?.addEventListener("touchstart",rt,{passive:!0}),function(){s?.removeEventListener("dragstart",tt),s?.removeEventListener("touchstart",rt)}},[e]);var i=$r({type:ve.TREE_ITEM,item:function(s){var u=I({ref:e},t);return r.onDragStart&&r.onDragStart(u,s),u},end:function(s,u){var c=s;r.onDragEnd&&r.onDragEnd(c,u)},canDrag:function(){var s=r.canDrag;return Lt!==e.current?!1:s?s(t.id):!0},collect:function(s){return{isDragging:s.isDragging()}}}),n=i[0].isDragging,o=i[1],a=i[2];return[n,o,a]},kn=function(t){var e=F(),r=v.useContext(re),i=Et({accept:O([ve.TREE_ITEM],e.extraAcceptTypes,!0),drop:function(u,c){var l=e.rootId,h=e.onDrop,p=r.dropTargetId,d=r.index;c.isOver({shallow:!0})&&p!==void 0&&d!==void 0&&h(_e(u)?u:null,l,d),r.hidePlaceholder()},canDrop:function(u,c){var l=e.rootId;return c.isOver({shallow:!0})?u===void 0?!1:B(u,l,e):!1},hover:function(u,c){if(c.isOver({shallow:!0})){var l=e.rootId,h=r.dropTargetId,p=r.index,d=r.showPlaceholder,f=r.hidePlaceholder,g=Le(null,t.current,c,e);if(g===null||!B(u,l,e)){f();return}(g.id!==h||g.index!==p)&&d(g.id,g.index)}},collect:function(u){var c=u.getItem();return{isOver:u.isOver({shallow:!0})&&u.canDrop(),dragSource:c}}}),n=i[0],o=n.isOver,a=n.dragSource,s=i[1];return[o,a,s]},An=function(t,e){var r=F(),i=v.useContext(re),n=Et({accept:O([ve.TREE_ITEM],r.extraAcceptTypes,!0),drop:function(c,l){var h=i.dropTargetId,p=i.index;l.isOver({shallow:!0})&&h!==void 0&&p!==void 0&&r.onDrop(_e(c)?c:null,h,p),i.hidePlaceholder()},canDrop:function(c,l){if(l.isOver({shallow:!0})){var h=Le(t,e.current,l,r);return h===null?!1:B(c,h.id,r)}return!1},hover:function(c,l){if(l.isOver({shallow:!0})){var h=i.dropTargetId,p=i.index,d=i.showPlaceholder,f=i.hidePlaceholder,g=Le(t,e.current,l,r);if(g===null||!B(c,g.id,r)){f();return}(g.id!==h||g.index!==p)&&d(g.id,g.index)}},collect:function(c){var l=c.getItem();return{isOver:c.isOver({shallow:!0})&&c.canDrop(),dragSource:l}}}),o=n[0],a=o.isOver,s=o.dragSource,u=n[1];return[a,s,u]},_n=function(t,e){var r=v.useMemo(function(){return e===!0?t.filter(function(h){return fe(t,h.id)}).map(function(h){return h.id}):Array.isArray(e)?e:[]},[e]),i=v.useState(r),n=i[0],o=i[1];v.useEffect(function(){return o(r)},[r]);var a=function(h,p){var d=n.includes(h)?n.filter(function(f){return f!==h}):O(O([],n,!0),[h],!1);o(d),p&&p(d)},s=function(h){o([]),h&&h([])},u=function(h){var p=t.filter(function(d){return fe(t,d.id)}).map(function(d){return d.id});o(p),h&&h(p)},c=function(h,p){var d=[];if(Array.isArray(h)){var f=t.filter(function(g){return h.includes(g.id)&&fe(t,g.id)});d=O(O([],n,!0),f.map(function(g){return g.id}),!0).filter(function(g,T,D){return D.indexOf(g)===T})}else d=n.includes(h)?n:O(O([],n,!0),[h],!1);o(d),p&&p(d)},l=function(h,p){var d=n.filter(function(f){return Array.isArray(h)?!h.includes(f):f!==h});o(d),p&&p(d)};return[n,{handleToggle:a,handleCloseAll:s,handleOpenAll:u,handleOpen:c,handleClose:l}]},zn=function(){return Kr(function(t){var e=t.getItemType();return{item:t.getItem(),clientOffset:t.getClientOffset(),isDragging:t.isDragging()&&e===ve.TREE_ITEM}})},F=function(){var t=v.useContext(Rt);if(!t)throw new Error("useTreeContext must be used under TreeProvider");return t},Hn=function(t,e){var r=F(),i=r.rootId,n=r.rootProps,o=r.classes,a=o?.container||"";return e&&o?.dropTarget&&(a="".concat(a," ").concat(o.dropTarget)),t===i&&o?.root&&(a="".concat(a," ").concat(o.root)),t===i&&n?.className&&(a="".concat(a," ").concat(n.className)),a=a.trim(),a},Bn=function(t,e,r){e.current?r(e):r(t),v.useEffect(function(){e.current?r(e):r(t)},[e.current])},Fn=function(t){var e=F(),r=v.useContext(re),i=v.useRef(null),n=v.useRef(null),o=e.tree.find(function(_){return _.id===t.id}),a=e.openIds,s=e.classes,u=e.enableAnimateExpand,c=a.includes(t.id),l=Ln(o,i),h=l[0],p=l[1],d=l[2],f=An(o,i),g=f[0],T=f[1],D=f[2];Bn(i,n,p),B(T,t.id,e)&&D(i),v.useEffect(function(){e.dragPreviewRender?d(Jt(),{captureDraggingState:!0}):n.current&&d(i)},[d,e.dragPreviewRender]),Rn(i);var E=v.useCallback(function(){e.onToggle(o.id)},[o.id,e]),b=e.listItemComponent,M=e.canDrag?e.canDrag(t.id):!0,N=r.dropTargetId===t.id,x={depth:t.depth,isOpen:c,isDragging:h,isDropTarget:N,draggable:M,hasChild:fe(e.tree,t.id),containerRef:i,handleRef:n,onToggle:E},P="";return s?.listItem&&(P=typeof s.listItem=="string"?s.listItem:s.listItem(o,x)),g&&s?.dropTarget&&(P="".concat(P," ").concat(s.dropTarget)),h&&s?.draggingSource&&(P="".concat(P," ").concat(s.draggingSource)),w.createElement(b,{ref:i,className:P,role:"listitem"},e.render(o,x),u&&x.hasChild&&w.createElement(Dn,{isVisible:c},w.createElement(ke,{parentId:t.id,depth:t.depth+1})),!u&&x.hasChild&&c&&w.createElement(ke,{parentId:t.id,depth:t.depth+1}))},nt=function(t){var e=F(),r=e.placeholderRender,i=e.placeholderComponent,n=e.classes,o=v.useContext(re),a=A(),s=a.getMonitor(),u=s.getItem();if(!r||!u)return null;var c=t.dropTargetId===o.dropTargetId&&(t.index===o.index||t.index===void 0&&t.listCount===o.index),l=s.getTargetIds();return!c||!l.length?null:w.createElement(i,{className:n?.placeholder||""},r(u,{depth:t.depth}))},ke=function(t){var e=F(),r=v.useRef(null),i=e.tree.filter(function(g){return g.parent===t.parentId}),n=i,o=typeof e.sort=="function"?e.sort:On;if(e.insertDroppableFirst){var a=i.filter(function(g){return g.droppable}),s=i.filter(function(g){return!g.droppable});e.sort===!1?n=O(O([],a,!0),s,!0):(a=a.sort(o),s=s.sort(o),n=O(O([],a,!0),s,!0))}else e.sort!==!1&&(n=i.sort(o));var u=kn(r),c=u[0],l=u[1],h=u[2];t.parentId===e.rootId&&B(l,e.rootId,e)&&h(r);var p=Hn(t.parentId,c),d=e.rootProps||{},f=e.listComponent;return w.createElement(f,I({ref:r,role:"list"},d,{className:p}),n.map(function(g,T){return w.createElement(w.Fragment,{key:g.id},w.createElement(nt,{depth:t.depth,listCount:n.length,dropTargetId:t.parentId,index:T}),w.createElement(Fn,{id:g.id,depth:t.depth}))}),w.createElement(nt,{depth:t.depth,listCount:n.length,dropTargetId:t.parentId}))},Wn={height:"100%",left:0,pointerEvents:"none",position:"fixed",top:0,width:"100%",zIndex:100},Yn=function(t){var e=t.clientOffset;if(!e)return{};var r=e.x,i=e.y,n="translate(".concat(r,"px, ").concat(i,"px)");return{pointerEvents:"none",transform:n}},Xn=function(){var t=F(),e=zn(),r=e.isDragging,i=e.clientOffset;return!r||!i?null:w.createElement("div",{style:Wn},w.createElement("div",{style:Yn(e)},t.dragPreviewRender&&t.dragPreviewRender(e)))};function qn(t,e){return w.createElement(Pn,I({},t,{treeRef:e}),t.dragPreviewRender&&w.createElement(Xn,null),w.createElement(ke,{parentId:t.rootId,depth:0}))}var Kn=v.forwardRef(qn);export{yr as D,Vn as S,Kn as T,$n as g,k as i};
