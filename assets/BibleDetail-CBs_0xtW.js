import{r as b,n as O,f as G,p as H,o as Y,h as F,j as t,k as q,C as U,B as j,t as W,T as v,v as z,l as K,_ as k}from"./index-DR721s7h.js";import{F as Q}from"./Favorite-2Sog5vU5.js";import{u as X,B as Z}from"./BibleBookmarkText-DkMNV9QW.js";import{A as C}from"./AniButton-CkVbOQ_a.js";import{H as tt}from"./HtmlText-tszHQksF.js";import{T as et}from"./TitleItem-BqRwSPA0.js";/* empty css                   */import{G as x}from"./Grid-CfekpuGK.js";import"./Button-CuzWDh29.js";import"./index-B83-AC60.js";/* empty css                   */const nt=e=>{const{t:u}=F(),f=new Array;if(e.data===void 0||e.data===null)return;const r=e.bibleId.split("_");console.log("BibleTop.props.data",e.data);for(let o=1;o<=e.data.cd3;o++){const a={nm:`${e.data.nm2}${o}${u("chapter")}`,key:e.data.id+"_"+o};f.push(a)}return r&&r.length===3?t.jsxs(v,{variant:"h6",sx:{display:"flex",alignItems:"center",flexDirection:"column",mb:4},children:[e.nm," ",r[2]," ",u("chapter")]}):t.jsxs(t.Fragment,{children:[t.jsx(v,{variant:"h6",sx:{display:"flex",alignItems:"center",flexDirection:"column",mb:4},children:e.nm}),t.jsx(x,{container:!0,spacing:2,columns:{xs:4,sm:6,md:10,lg:12},children:f.map((o,a)=>t.jsx(x,{item:!0,xs:1,md:1,children:t.jsx(z,{to:`/bible/${o.key}`,children:o.nm})},a))})]})},st=e=>{const u=e.dataText;if(e.data===void 0||e.data===null||u==null)return;const f=e.bibleId.split("_");return e.bibleId&&f.length!==3?t.jsx(t.Fragment,{}):t.jsxs(t.Fragment,{children:[t.jsx(v,{variant:"h6",sx:{display:"flex",alignItems:"center",flexDirection:"column",mb:4},children:e.nm}),u.map((r,o)=>{let a="text.primary";e.cd4+""===r.cd4&&(a="warning.main");const n=e.bookmark?.data?.filter(i=>i.id===r.id&&i.bookmark==="Y");return n&&n.length>0&&(r.bookmark="Y"),t.jsxs(x,{container:!0,spacing:2,columns:{xs:5,sm:6,md:10,lg:12},id:`id_${o+1}`,children:[t.jsx(x,{item:!0,xs:1,md:1,children:t.jsxs(j,{sx:{color:a,display:"flex"},children:[t.jsx(K,{sx:{alignItems:"center",textAlign:"top"},onClick:()=>e.onBookmark(r),children:r.nm}),n&&n.length>0&&t.jsx(Q,{sx:{color:"red"}})]})}),t.jsx(x,{item:!0,xs:4,sm:5,md:9,lg:11,children:t.jsx(j,{sx:{color:a},children:t.jsx(tt,{text:r.text})})})]},o)})]})},ht=()=>{const[e,u]=b.useState(null),[f,r]=b.useState(!0),{query:o,setBibleBookmark:a}=X(),n=b.useRef(),{bibleId:i}=O(),B=G(),[y,I]=b.useState(!1),[$,w]=b.useState(!1),{user:L}=H(),_=B?.state?.word,h=B?.state?.cd4,R=Y(),{t:E,i18n:P}=F();b.useEffect(()=>{if(i!==void 0){(async()=>{const c=await S(i,_);u(c),r(!1)})(),I(!1),w(!0);const s=i.split("_");if(n.current&&s.length===3){const c=n.current.cd3;I(Number(s[2])!==1),w(s[2]<c)}}},[i,_]),b.useEffect(()=>{h!==void 0&&setTimeout(()=>{M("","id_"+h)},1500)},[e,h]);const M=(l,s)=>{const c=document.getElementById(s);c&&c.scrollIntoView({block:"center",behavior:"smooth"})},N=l=>{L!==void 0&&a(l)},S=async(l,s)=>{if(l===""||l===void 0)return"";const c=P.language.split("-")[0];console.log("getBibleText.language=",c);const V=(c==="en"?await k(()=>import("./bibleJson_en-OyZMwajI.js"),[]):await k(()=>import("./bibleJson-mLacnG04.js"),[])).default,A=(await k(()=>import("./bible-7rshX_PU.js"),[])).default,g=l.split("_");if(g.length<1)return;g.length>1&&V.map(d=>{d.id===g[0]+"_"+g[1]&&(n.current=d)});const p=new Array;if(g.length===3){for(let d in A){if(!d.includes(l+"_"))continue;let m=A[d];m.id=d;let T=m.txt;if(s!==void 0){const J=new RegExp(s,"gi");T=T.replace(J,`<span class='lightext'>${s}</span>`)}m.nm=`${n.current.nm2}${g[2]}:${m.cd4}`,m.text=T,p.push(m)}return p.sort((d,m)=>d.cd4-m.cd4),p}};if(i==="")return t.jsx(t.Fragment,{});const D=l=>{let s=i.split("_");s[2]=Number(s[2])+l,R(`/bible/${s[0]}_${s[1]}_${s[2]}`)};return console.log("bibleTitle.current=",n.current),console.log("bibleText=",e),t.jsxs(q.Fragment,{children:[t.jsx("div",{id:"back-to-top-anchor"}),t.jsx(Z,{}),t.jsx(et,{children:n.current!==null&&n.current!==void 0&&n.current.nm!==null?n.current.text:""}),t.jsx(nt,{data:n.current,bibleId:i}),t.jsx(st,{dataText:e,data:n.current,searchWord:_,bibleId:i,cd4:h,bookmark:o,onBookmark:N}),t.jsxs(U,{sx:{p:0},children:[f&&t.jsx(j,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:t.jsx(W,{sx:{mt:5}})}),i&&i.split("_").length===3?t.jsx(j,{sx:{display:"flex",justifyContent:"space-between",mt:5},children:t.jsxs(x,{container:!0,spacing:1,children:[y?t.jsx(x,{item:!0,xs:$?6:12,children:t.jsx(C,{type:"button",variant:"outlined",onClick:()=>D(-1),fullWidth:!0,children:`< ${E("prev")}`})}):"",$?t.jsx(x,{item:!0,xs:y?6:12,children:t.jsx(C,{type:"button",variant:"outlined",onClick:()=>D(1),fullWidth:!0,children:`${E("next")} >`})}):""]})}):""]})]})};export{ht as BibleDetail,ht as default};
