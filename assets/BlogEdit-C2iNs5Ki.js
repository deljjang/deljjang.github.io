import{p as M,v as y,r as i,w as _,y as H,q as P,z as C,A as N,j as e,x as R,T as B,C as G,i as q,o as g,M as A,D as z,E as K,F as U}from"./index-BYAZQ8R2.js";import{H as X,f,a as h,b as k}from"./fireDetail-KKLUVBUh.js";import{c as J}from"./CodeText-Bu7hV44O.js";import"./SinyDate-BcCWOyvu.js";import"./TextField--U8wTNcl.js";import"./InputAdornment-B7xLKaH2.js";import"./Popper-CBt0xfau.js";import"./Button-BYF3W_UD.js";import"./Chip-DWeJ1F_G.js";import"./AniButton-v-vsa3Ju.js";import"./index.esm-quhieT8B.js";import"./datetime-BDx6lZXm.js";const rt=()=>{const{title:r,gbn:p,date:b,text:a,image:m,setFireId:w,isLoading:j}=M(),s=y(),d=i.useRef(),{homeId:t}=_(),u=H()?.state?.fullIndex,{user:c}=P(),{settings:I,saveSettings:L}=C(),T=()=>{s(`/blog/${t}`)},$=async(o,l)=>{const n=await f(void 0,"home_txt/","home/",u,o);await h("home_txt","home",n,l),n!==void 0&&s(`/homemng/${n}`),d.current=!1,s(`/blog/${t}`)},E=async(o,l,x)=>{await k("home_txt","home",t,l),await f(t,"home_txt/","home/",`${o.edGbn}/sub/${t}`,o);const D=await h("home_txt","home",t,x);console.log("onPostSubmit.imageResult",D);const F=await z(K(U,`home/${o.edGbn}/title`),o.edGbn);console.log("onPostSubmit.setTitle=",F),s(`/blog/${t}`)};i.useEffect(()=>{L({...I,nodeId:t}),N(t,u),w(`home_txt/${t}`,`home/${t}`,"")},[t,c]);function S(){document.querySelectorAll("pre").forEach(o=>{o.innerHTML=J(o.innerHTML)})}return i.useEffect(()=>{a!==null&&S()},[a]),console.log("homeId=",t),console.log("detailTitle=",r.current),t===""||c===void 0||a===null?e.jsx(e.Fragment,{}):(c.uid!==R&&s("/"),console.log("image=",m),e.jsxs(e.Fragment,{children:[e.jsx(B,{children:r.current}),e.jsx(i.Suspense,{fallback:e.jsx(g,{}),children:e.jsxs(G,{className:"container",sx:{p:0,width:"100%"},children:[e.jsx(X,{newMode:d.current,onPostSubmit:E,onNewSubmit:$,onCancel:T,title:r.current,gbn:p.current,date:b.current,content:a,imageList:m}),e.jsx(q,{sx:{my:2,overflow:"hidden",overflowX:"auto"},children:j&&e.jsx(g,{})})]})}),e.jsx(A,{})]}))};export{rt as default};
