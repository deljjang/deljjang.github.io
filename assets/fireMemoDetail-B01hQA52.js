import{g as $,s}from"./fireDatabase-BgVrnnlo.js";import{c as p}from"./fireStorage-BwvN5E-q.js";const v=async(g,n,c,m)=>{let t="",o="",e={};((a,i,l)=>{o=a==="memo"?`${a}/${i}/${l}`:`${a}/${l}`,t=a==="memo"?`${a}_txt/${i}/${l}`:`${a}_txt/${l}`})(g,n,c);async function f(){if(t===void 0)return"";if(e=await $(t),e===void 0){console.log("No data available"),e={code:"404",msg:"No data available"};return}if(e?.fullIndex,e.image!==void 0&&e.image!==null){const a=await p(t,o,e.image);e.image=a,(e.imageOK===void 0||e.imageOK==="N")&&(a&&a.map(i=>{i.ext==="jpg"&&(e.memo=e.memo+`<img src='${i.url}'>`)}),s(`${t}/imageOK`,"Y"),s(`${t}/memo`,e.memo))}if(e.html!=="N"&&m!==void 0&&m!==""){console.log("fireMemoDetail.html=",e.html),console.log("fireMemoDetail.searchWord=",m);const a=new RegExp(m,"gi"),i=e.memo.replace(a,`<span class='lightext'>${m}</span>`);e.memo=i}}return await f(),e};export{v as f};
