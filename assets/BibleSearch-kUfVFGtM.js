import{f as x,h as d,r as l,i as h,j as s,L as b,q as f,a as p}from"./index-poutbwG-.js";import{H as c}from"./HtmlText-B4fMgagJ.js";import{T as g}from"./TitleItem-TitTA6WW.js";import u from"./bible-7rshX_PU.js";/* empty css                   */import{T as m}from"./TwSearchBox-BiYQZErj.js";import{G as a}from"./Grid-UFnu4RD0.js";import"./index-jlu_Nqo1.js";/* empty css                   */import"./TwBadge-CVDi7LCR.js";const j=r=>{if(!(r.bibleList===void 0||r.bibleList===null))return r.bibleList.map((e,i)=>{const n=e.id.split("_"),t=`${n[0]}_${n[1]}_${n[2]}`;return s.jsxs(a,{container:!0,spacing:2,columns:{xs:5,sm:6,md:10,lg:12},children:[s.jsx(a,{item:!0,xs:1,md:1,children:e.nm}),s.jsx(a,{item:!0,xs:4,sm:5,md:9,lg:11,children:s.jsxs(p,{to:`/bible/${t}`,state:{cd4:e.cd4,word:r.word},children:[s.jsx(c,{show:!0,text:e.ko}),s.jsx("div",{className:"text-sm text-red-600 dark:text-gray-700",children:s.jsx(c,{show:!0,text:e.en})})]})})]},i)})},L=(r,e)=>{if(r==="")return alert(e("search_word_required")),[];const i=new Array;for(let n in u){let t={...u[n]};if(t.ko.match(r)||t.en&&t.en.match(r)){const o=new RegExp(r,"gi");t.ko=t.ko.replace(o,`<span class='lightext'>${r}</span>`),t.en=t.en.replace(o,`<span class='lightext'>${r}</span>`),i.push(t)}}return i},R=()=>{const e=x().state,{t:i}=d(),n=l.useRef(e===null?"":e.s),t=h({queryKey:["getBibleData",e&&e?.s?e.s:""],queryFn:()=>L(e?.s,i)});return l.useEffect(()=>{n.current=e===null?"":e.s,t.refetch()},[e]),t.isLoading?s.jsxs(s.Fragment,{children:[s.jsx(m,{state:e,gubun:"bible"}),s.jsx(b,{})]}):t.error?s.jsxs("div",{children:[i("error_prefix"),t.error.message]}):s.jsxs("div",{children:[s.jsx(m,{state:e,gubun:"bible"}),s.jsxs(g,{children:[i("search_result_prefix"),f(t.data?t.data?.length:"0")]}),s.jsx(j,{bibleList:t.data,word:n.current})]})};export{R as BibleSearch,R as default};
