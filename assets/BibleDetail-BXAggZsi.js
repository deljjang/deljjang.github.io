import{r as f,n as O,f as G,p as H,o as Y,h as F,j as t,k as q,C as U,B as j,t as W,T,v as z,l as K,_ as v}from"./index-poutbwG-.js";import{F as Q}from"./Favorite-DKrcEaLu.js";import{u as X,B as Z}from"./BibleBookmarkText-DPz43XBM.js";import{A as C}from"./AniButton-Bs8HE7Af.js";import{H as tt}from"./HtmlText-B4fMgagJ.js";import{T as et}from"./TitleItem-TitTA6WW.js";/* empty css                   */import{G as m}from"./Grid-UFnu4RD0.js";import"./Button-Xui-X3lN.js";import"./index-jlu_Nqo1.js";/* empty css                   */const nt=e=>{const{t:c}=F(),b=new Array;if(e.data===void 0||e.data===null)return;const r=e.bibleId.split("_");for(let a=1;a<=e.data.cd3;a++){const l={nm:`${e.data.nm2}${a}${c("chapter")}`,key:e.data.id+"_"+a};b.push(l)}return r&&r.length===3?t.jsxs(T,{variant:"h6",sx:{display:"flex",alignItems:"center",flexDirection:"column",mb:4},children:[e.nm," ",r[2]," ",c("chapter")]}):t.jsxs(t.Fragment,{children:[t.jsx(T,{variant:"h6",sx:{display:"flex",alignItems:"center",flexDirection:"column",mb:4},children:e.nm}),t.jsx(m,{container:!0,spacing:2,columns:{xs:4,sm:6,md:10,lg:12},children:b.map((a,l)=>t.jsx(m,{item:!0,xs:1,md:1,children:t.jsx(z,{to:`/bible/${a.key}`,children:a.nm})},l))})]})},st=e=>{const c=e.dataText;if(e.data===void 0||e.data===null||c==null)return;const b=e.bibleId.split("_");return e.bibleId&&b.length!==3?t.jsx(t.Fragment,{}):t.jsxs(t.Fragment,{children:[t.jsx(T,{variant:"h6",sx:{display:"flex",alignItems:"center",flexDirection:"column",mb:4},children:e.nm}),c.map((r,a)=>{let l="text.primary";e.cd4+""===r.cd4&&(l="warning.main");const n=e.bookmark?.data?.filter(i=>i.id===r.id&&i.bookmark==="Y");return n&&n.length>0&&(r.bookmark="Y"),t.jsxs(m,{container:!0,spacing:2,columns:{xs:5,sm:6,md:10,lg:12},id:`id_${a+1}`,children:[t.jsx(m,{item:!0,xs:1,md:1,children:t.jsxs(j,{sx:{color:l,display:"flex"},children:[t.jsx(K,{sx:{alignItems:"center",textAlign:"top"},onClick:()=>e.onBookmark(r),children:r.nm}),n&&n.length>0&&t.jsx(Q,{sx:{color:"red"}})]})}),t.jsx(m,{item:!0,xs:4,sm:5,md:9,lg:11,children:t.jsx(j,{sx:{color:l},children:t.jsx(tt,{text:r.text})})})]},a)})]})},gt=()=>{const[e,c]=f.useState(null),[b,r]=f.useState(!0),{query:a,setBibleBookmark:l}=X(),n=f.useRef(),{bibleId:i}=O(),B=G(),[y,I]=f.useState(!1),[$,w]=f.useState(!1),{user:L}=H(),_=B?.state?.word,g=B?.state?.cd4,R=Y(),{t:E,i18n:P}=F();f.useEffect(()=>{if(i!==void 0){(async()=>{const x=await S(i,_);c(x),r(!1)})(),I(!1),w(!0);const s=i.split("_");if(n.current&&s.length===3){const x=n.current.cd3;I(Number(s[2])!==1),w(s[2]<x)}}},[i,_]),f.useEffect(()=>{g!==void 0&&setTimeout(()=>{M("","id_"+g)},1500)},[e,g]);const M=(o,s)=>{const x=document.getElementById(s);x&&x.scrollIntoView({block:"center",behavior:"smooth"})},N=o=>{L!==void 0&&l(o)},S=async(o,s)=>{if(o===""||o===void 0)return"";const V=(P.language.split("-")[0]==="en"?await v(()=>import("./bibleJson_en-OyZMwajI.js"),[]):await v(()=>import("./bibleJson-mLacnG04.js"),[])).default,A=(await v(()=>import("./bible-7rshX_PU.js"),[])).default,h=o.split("_");if(h.length<1)return;h.length>1&&V.map(u=>{u.id===h[0]+"_"+h[1]&&(n.current=u)});const p=new Array;if(h.length===3){for(let u in A){if(!u.includes(o+"_"))continue;let d=A[u];d.id=u;let k=d.txt;if(s!==void 0){const J=new RegExp(s,"gi");k=k.replace(J,`<span class='lightext'>${s}</span>`)}d.nm=`${n.current.nm2}${h[2]}:${d.cd4}`,d.text=k,p.push(d)}return p.sort((u,d)=>u.cd4-d.cd4),p}};if(i==="")return t.jsx(t.Fragment,{});const D=o=>{let s=i.split("_");s[2]=Number(s[2])+o,R(`/bible/${s[0]}_${s[1]}_${s[2]}`)};return t.jsxs(q.Fragment,{children:[t.jsx("div",{id:"back-to-top-anchor"}),t.jsx(Z,{}),t.jsx(et,{children:n.current!==null&&n.current!==void 0&&n.current.nm!==null?n.current.text:""}),t.jsx(nt,{data:n.current,bibleId:i}),t.jsx(st,{dataText:e,data:n.current,searchWord:_,bibleId:i,cd4:g,bookmark:a,onBookmark:N}),t.jsxs(U,{sx:{p:0},children:[b&&t.jsx(j,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:t.jsx(W,{sx:{mt:5}})}),i&&i.split("_").length===3?t.jsx(j,{sx:{display:"flex",justifyContent:"space-between",mt:5},children:t.jsxs(m,{container:!0,spacing:1,children:[y?t.jsx(m,{item:!0,xs:$?6:12,children:t.jsx(C,{type:"button",variant:"outlined",onClick:()=>D(-1),fullWidth:!0,children:`< ${E("prev")}`})}):"",$?t.jsx(m,{item:!0,xs:y?6:12,children:t.jsx(C,{type:"button",variant:"outlined",onClick:()=>D(1),fullWidth:!0,children:`${E("next")} >`})}):""]})}):""]})]})};export{gt as BibleDetail,gt as default};
