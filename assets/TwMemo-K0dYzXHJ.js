import{G as L,e as R,r,w as T,j as t,n as W,v as p,k as B,s as v}from"./index-CWXZ9Iq7.js";import{T as x,a as E,b as F,c as N,d as S}from"./TwMemoMain-f4pI3Ut3.js";import{f as $}from"./fireMemoDetail-BduFqwbn.js";import{H as I}from"./HomeChartForm-d-P6s9-t.js";import{g as U}from"./memoFun-Y--qyd20.js";import"./TwTitleItem-DohviPhG.js";import"./SinyImageList-BNGkuYN9.js";import"./ImageListItem-CyddnCPN.js";import"./HtmlCode-CDmNEW7V.js";/* empty css                 */import"./copy-ClEKdPPf.js";import"./TwBadge-D7d4nW_h.js";import"./ComponentCard-BXZLOOkn.js";import"./TwRadio-D34cp2jy.js";import"./toPropertyKey-DCwh5dYN.js";import"./CodeText-BRVgeDAS.js";import"./commonUtil-B50YfFwa.js";import"./useWindowDimensions-CUP5TSpt.js";import"./datetime-BDx6lZXm.js";import"./index.esm-DUnqmaXe.js";import"./TwCheckbox-C9vQDU0i.js";import"./TwTextArea-BF_wguLQ.js";import"./SinyDate-CpWx5gc7.js";import"./Grid-Bx-A-J7h.js";import"./index-DuSkT2D9.js";import"./TextField-XAy3nOlk.js";import"./InputAdornment-CDjNKjRu.js";import"./Popper-CsuMSaOJ.js";import"./Button-BeXkAMi8.js";import"./Chip-Dj2J4FBL.js";import"./TwSelect-avrh6J9j.js";import"./TwDatePicker-nJc40A4s.js";import"./IpInfo-1Q595Rrq.js";import"./HomeChartSemiDonut-DsEJtQFt.js";const xt=()=>{const j=L(),{user:a}=R(),m=r.useRef(),i=r.useRef(!0),u=r.useRef(),[s,d]=r.useState(),b=r.useRef(!1),n=T(),e=n.pathname.startsWith("/m")?"memo":n.pathname.startsWith("/home")?"home":n.pathname.startsWith("/bible")?"bible":"default",f=r.useRef(!1);f.current=n?.state?.reflash===!0;const g=()=>{const o=s;o&&(o.bookmark=o.bookmark==="Y"?"N":"Y"),console.log("onBookmark.memoDetailData.bookmark=",o.bookmark),console.log("onBookmark.rootDb=",e);const c=e==="memo"?`memo_tree/${a.uid}/${u.current}/bm`:`home_txt/${u.current}/bookmark`;v(c,s.bookmark),d({...s,bookmark:o.bookmark})};r.useEffect(()=>{const o=async h=>{if(h!==""&&a){const l=await $(e,a?.uid,h,m.current);e==="memo"&&(l.path=await U(a?.uid,h)),l.code==="404"&&(l.title="No title"),i.current=!1,d(l===void 0?{}:l)}else d({})},c=n.pathname.split("/"),k=c.length>2?c[c.length-1]:"";i.current=!0,u.current=k,o(k)},[n.pathname,a,f.current]);const D=o=>{b.current=!1,o!==void 0&&(m.current=o)},M=()=>{if(a==null){alert("로그인 후 이용 가능합니다.");return}const o=`/${e==="memo"?"m":e}/insert/insert`;j(o)},w=o=>{};return t.jsxs(t.Fragment,{children:[t.jsx(r.Suspense,{fallback:t.jsx(B,{}),children:t.jsxs(W,{children:[t.jsx(p,{path:"/edit/:memoId",element:t.jsx(x,{rootDb:e,isLoading:i.current,searchWord:m.current,memoDetailData:s})}),t.jsx(p,{path:"/insert/:memoId",element:t.jsx(x,{rootDb:e,isLoading:i.current,searchWord:m.current,memoDetailData:s})}),t.jsx(p,{path:"/util/:memoId",element:t.jsx(E,{rootDb:e,isLoading:i.current,searchWord:m.current,memoDetailData:s})}),t.jsx(p,{path:"/:memoId",element:t.jsx(F,{rootDb:e,isLoading:i.current,searchWord:m.current,memoDetailData:s,onTreeUpdate:D,onBookmark:g})}),t.jsx(p,{path:"*",element:t.jsx(N,{onNewMemoBtn:M,title:e==="memo"?"메모장":"홈페이지관리",rootDb:e})})]})}),e==="memo"?t.jsx(S,{onSelected:w}):null,u.current===""?t.jsx(I,{rootDb:e}):null]})};export{xt as default};
