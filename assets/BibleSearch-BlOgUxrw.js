import{k as u,r as n,j as r,T as m,w as d,H as x}from"./index-C3_Lifs7.js";import{u as b}from"./useQuery-BvsZFef-.js";import{b as h}from"./bibleJson-DmvV-gyR.js";import{b as a}from"./bibleTxt-CDg_iih8.js";import{L as f}from"./Loading-mfHyZKuE.js";import{n as g}from"./commonUtil-DMYaEvvO.js";import{T as c}from"./TwSearchBox-BlJBm4hG.js";import{G as o}from"./Grid-CbL8_yog.js";import"./useBaseQuery-mvkTKycv.js";import"./Container-BAHHCrP5.js";import"./styled-CribepmI.js";import"./CircularProgress-s-d2AHUD.js";import"./TwBadge-GdjY-hcZ.js";import"./useTheme-CCJ_wx_w.js";const p=s=>{if(!(s.bibleList===void 0||s.bibleList===null))return s.bibleList.map((e,i)=>r.jsxs(o,{container:!0,spacing:2,columns:{xs:5,sm:6,md:10,lg:12},children:[r.jsxs(o,{item:!0,xs:1,md:1,children:[h[e.cd1][e.cd2].nm2,e.cd3,":",e.cd4]}),r.jsx(o,{item:!0,xs:4,sm:5,md:9,lg:11,children:r.jsx(d,{to:`/bible/${e.cd1}_${e.cd2}_${e.cd3}`,state:{cd4:e.cd4,word:s.word},children:r.jsx(x,{show:!0,text:e.txt})})})]},i))},j=s=>{if(console.log("BibleSearch.word="+s),s==="")return[];const e=new Array;for(let i in a){let t={...a[i]};if(t.txt.match(s)){t.id=i;const l=new RegExp(s,"gi");t.txt=t.txt.replace(l,`<span class='lightext'>${s}</span>`),e.push(t)}}return e},D=()=>{const e=u().state,i=n.useRef(e===null?"":e.s),t=b({queryKey:["getBibleData",e&&e?.s?e.s:""],queryFn:()=>j(e?.s)});return n.useEffect(()=>{i.current=e===null?"":e.s,console.log("BibleSearch.useEffect.searchWord="+i.current),t.refetch()},[e]),t.isLoading?r.jsxs(r.Fragment,{children:[r.jsx(c,{state:e,gubun:"bible"}),r.jsx(f,{})]}):t.error?r.jsxs("div",{children:["Error: ",t.error.message]}):r.jsxs("div",{children:[r.jsx(c,{state:e,gubun:"bible"}),r.jsxs(m,{children:["검색 결과 : ",g(t.data?t.data?.length:"0")]}),r.jsx(p,{bibleList:t.data,word:i.current})]})};export{D as default};
