import{z as x,q as b,i as p,A as B,E as j,G as y,I as f,j as s,w as _,p as m,D as h}from"./index-C4YqBfyH.js";import{G as k}from"./Grid-DhK8B7Yl.js";const v=()=>{const c=x(),{user:e}=b(),r=p({queryKey:["bibleBookmarks",e?.uid],queryFn:()=>a(),enabled:!!e?.uid});async function a(){if(!e?.uid)return null;const t=B(j,`bible_mark/${e.uid}`),o=await y(t);if(o.exists()){const l=o.val(),u=l?Object.values(l).filter(i=>i.bookmark==="Y"):[];return u.sort((i,d)=>i.id.split("_")[0]-d.id.split("_")[0]||i.id.split("_")[1]-d.id.split("_")[1]||i.cd3-d.cd3||i.cd4-d.cd4),u}else return[]}return{query:r,setBibleBookmark:t=>{if(e==null){console.error("사용자 정보가 없어 북마크를 설정할 수 없습니다.");return}let o="N";(t.bookmark===void 0||t.bookmark==="N")&&(o="Y");const l={...t,bookmark:o},u=`bible_mark/${e.uid}/${t.id}`;f(u,o==="N"?null:l),c.invalidateQueries({queryKey:["bibleBookmarks",e.uid]})}}},q=()=>{const{query:c}=v(),e=c.data;return e?s.jsxs(s.Fragment,{children:[e.map((r,a)=>{const n=r.id.split("_"),t=`${n[0]}_${n[1]}_${n[2]}`;return s.jsxs(k,{container:!0,spacing:2,columns:{xs:5,sm:7,md:10,lg:12},id:`id_${a+1}`,children:[s.jsx(k,{item:!0,xs:1,md:1,children:s.jsx(_,{to:`/bible/${t}`,state:{cd4:r.cd4},children:r.nm})}),s.jsxs(k,{item:!0,xs:4,sm:6,md:9,lg:11,children:[s.jsx(m,{show:!0,text:r.ko}),s.jsx("div",{className:"text-sm text-red-600 dark:text-gray-700",children:s.jsx(m,{show:!0,text:r.en})})]})]},a)}),s.jsx(h,{})]}):null};export{q as B,v as u};
