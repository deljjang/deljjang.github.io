import{x as d,A as x,b as o,E as m,j as r,i as b,n as h,J as f,m as g}from"./index-BxpGGms0.js";import{H as p}from"./HtmlText-fr7bOlLJ.js";import{T as j}from"./TitleItem-DN76Z01k.js";import{b as c}from"./bibleTxt-CDg_iih8.js";/* empty css                   */import{T as l}from"./TwSearchBox-DTd3-Wc0.js";import{G as a}from"./Grid-D6vJG72p.js";import"./index-BaRFHk8r.js";/* empty css                   */import"./TwBadge-D2xZzjwm.js";const L=t=>{if(!(t.bibleList===void 0||t.bibleList===null))return t.bibleList.map((e,i)=>r.jsxs(a,{container:!0,spacing:2,columns:{xs:5,sm:6,md:10,lg:12},children:[r.jsxs(a,{item:!0,xs:1,md:1,children:[f[e.cd1][e.cd2].nm2,e.cd3,":",e.cd4]}),r.jsx(a,{item:!0,xs:4,sm:5,md:9,lg:11,children:r.jsx(g,{to:`/bible/${e.cd1}_${e.cd2}_${e.cd3}`,state:{cd4:e.cd4,word:t.word},children:r.jsx(p,{show:!0,text:e.txt})})})]},i))},y=(t,e)=>{if(console.log("BibleSearch.word="+t),t==="")return alert(e("search_word_required")),[];const i=new Array;for(let n in c){let s={...c[n]};if(s.txt.match(t)){s.id=n;const u=new RegExp(t,"gi");s.txt=s.txt.replace(u,`<span class='lightext'>${t}</span>`),i.push(s)}}return i},R=()=>{const e=d().state,{t:i}=x(),n=o.useRef(e===null?"":e.s),s=m({queryKey:["getBibleData",e&&e?.s?e.s:""],queryFn:()=>y(e?.s,i)});return o.useEffect(()=>{n.current=e===null?"":e.s,console.log("BibleSearch.useEffect.searchWord="+n.current),s.refetch()},[e]),s.isLoading?r.jsxs(r.Fragment,{children:[r.jsx(l,{state:e,gubun:"bible"}),r.jsx(b,{})]}):s.error?r.jsxs("div",{children:[i("error_prefix"),s.error.message]}):r.jsxs("div",{children:[r.jsx(l,{state:e,gubun:"bible"}),r.jsxs(j,{children:[i("search_result_prefix"),h(s.data?s.data?.length:"0")]}),r.jsx(L,{bibleList:s.data,word:n.current})]})};export{R as default};
