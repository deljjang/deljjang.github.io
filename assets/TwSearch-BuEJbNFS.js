import{z as D,j as s,k as i,x as p,w as T,e as L,r,bj as w,n as M,v as k,bk as v}from"./index-Dlo5qAfl.js";import{b as E,T as I}from"./TwList-D0wFeVhc.js";import R from"./TwDetail-BS99TU5j.js";import{f as q}from"./fireMemoDetail-DupTvcft.js";import{T as F}from"./TwSearchBox-gwsrxBn0.js";import"./HtmlCode-rMC-Snn1.js";/* empty css                 */import"./copy-L5q-H5_2.js";import"./TwBadge-ebvrhaJy.js";import"./ComponentCard-D48S9Twc.js";import"./TwRadio-DOQD7TFc.js";import"./toPropertyKey-DCwh5dYN.js";import"./SinyImageList-nRMRVb2p.js";import"./ImageListItem-CwrH3-4m.js";import"./CodeText-CcKt_NMF.js";import"./commonUtil-D6sNiGcV.js";import"./AniButton-i7AtPWGD.js";import"./Button-FMDonRCy.js";const C=({uid:o,state:e})=>{const t=D({queryKey:["blogMainSearch",e&&e?.s?e.s:""],queryFn:()=>E(e?.s,o===p?p:"")});return t.isLoading?s.jsx(i,{}):t.error?s.jsxs("div",{children:["Error: ",t.error.message]}):s.jsx(I,{query:t,index:"1",s:e&&e?.s?e.s:"",sx:{mt:2}})};function $(){const o=T(),e=o.state;console.log("TailSearch.state=",e);const{user:t}=L(),d=r.useRef(e===null?"":e.s),[c,x]=r.useState(),[h]=w(),f=h.get("g"),[j,g]=r.useState(),[S,m]=r.useState(!0),l=f==="h"?"home":"memo";return r.useEffect(()=>{const b=async u=>{if(u!==""){const y=await q(l,t?.uid,u,d.current);g(y),m(!1)}};m(!0);const n=o.pathname.split("/"),a=n.length>2?n[n.length-1]:"";x(a),a!=null&&a!=="search"&&b(a)},[o.pathname]),s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",alignContent:"center",justifyContent:"center"},children:[s.jsxs(r.Suspense,{fallback:s.jsx(i,{}),children:[s.jsx(M,{children:s.jsx(k,{path:"/:memoId",element:s.jsx(R,{rootDb:l,isLoading:S,memoDetailData:j})})}),c==="search"?s.jsx(F,{state:e,gubun:"tw"}):"",t===null?s.jsx(i,{}):c==="search"&&e!==null&&e?.s!==""&&s.jsx(r.Suspense,{fallback:s.jsx(i,{}),children:s.jsx(C,{index:"1",uid:t?.uid,state:e})})]}),s.jsx(v,{})]})}export{$ as default};
