import{j as e,I as u,A as D,c as b,r as s,aM as L,R as M,K as I}from"./index-DHjt8BBZ.js";import{T as R}from"./Footer-D7bMWtd4.js";import{L as a}from"./Loading-oQobXpRf.js";import{u as w}from"./useQuery-DBnPXo_v.js";import{b as E,T as q}from"./TailList-Dk-oXZd_.js";import v from"./TwDetail-Rb1cn0Kv.js";import{f as F}from"./fireMemoDetail-BtHuuoRP.js";import{T as k}from"./TwSearchBox-BJb1zg3_.js";import"./LinkItem-BLjPYUAY.js";import"./Typography-hKZfUBk_.js";import"./TwLinkItem-C7JiNzvM.js";import"./Divider-DKz08dYe.js";import"./dividerClasses-BQFoVOZY.js";import"./Link-BdXifXNI.js";import"./Container-DWE0uOHb.js";import"./styled-4qmM-pTB.js";import"./CircularProgress-BFX90aZo.js";import"./useBaseQuery-qXkLJ5kG.js";import"./HtmlCode-D6kaliuF.js";import"./copy-BKp9KV57.js";import"./TwBadge-DG0nsYxl.js";import"./index-C6GcGZlf.js";import"./toPropertyKey-DCwh5dYN.js";import"./SinyImageList-CNn1UV5z.js";import"./index-Chjiymov.js";import"./ImageListItem-D8gzgQqR.js";import"./isMuiElement-BruZS2OQ.js";import"./ComponentCard-DrQXheS_.js";import"./CodeText-Bd9lwYHv.js";import"./commonUtil-DasgP3vz.js";import"./AniButton-CfpbbK1D.js";import"./Button-CnOqnd0R.js";import"./fireDatabase-DvTwvCiX.js";import"./fireStorage-CjmytQMA.js";const C=({uid:o,state:t})=>{const r=w({queryKey:["blogMainSearch",t&&t?.s?t.s:""],queryFn:()=>E(t?.s,o===u?u:"")});return r.isLoading?e.jsx(a,{}):r.error?e.jsxs("div",{children:["Error: ",r.error.message]}):e.jsx(q,{query:r,index:"1",s:t&&t?.s?t.s:"",sx:{mt:2}})};function xt(){const o=D(),t=o.state;console.log("TailSearch.state=",t);const{user:r}=b(),d=s.useRef(t===null?"":t.s),[n,f]=s.useState(),[x]=L(),h=x.get("g"),[j,g]=s.useState(),[S,c]=s.useState(!0),p=h==="h"?"home":"memo";return s.useEffect(()=>{const T=async l=>{if(l!==""){const y=await F(p,r?.uid,l,d.current);g(y),c(!1)}};c(!0);const m=o.pathname.split("/"),i=m.length>2?m[m.length-1]:"";f(i),i!=null&&i!=="search"&&T(i)},[o.pathname]),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",alignContent:"center",justifyContent:"center"},children:[e.jsxs(s.Suspense,{fallback:e.jsx(a,{}),children:[e.jsx(M,{children:e.jsx(I,{path:"/:memoId",element:e.jsx(v,{rootDb:p,isLoading:S,memoDetailData:j})})}),n==="search"?e.jsx(k,{state:t,gubun:"tw"}):"",r===null?e.jsx(a,{}):n==="search"&&t!==null&&t?.s!==""&&e.jsx(s.Suspense,{fallback:e.jsx(a,{}),children:e.jsx(C,{index:"1",uid:r?.uid,state:t})})]}),e.jsx(R,{})]})}export{xt as default};
