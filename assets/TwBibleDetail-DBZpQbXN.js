import{j as e,o as N,T,F as O,H as F,e as M,r as u,g as X,a as q,i as U,h as z,p as G,_ as L}from"./index-BZEDgbvu.js";import{A as S}from"./AniButton-8sux1B7x.js";import{u as K,B as Q}from"./BibleBookmarkText-7ACwiStH.js";import{a as W}from"./BibleSkeleton-B6NuWYTE.js";const Z=({dataText:l,searchWord:p,bookmark:f,...c})=>{if(l==null)return;const v=c.bibleId.split("_");return c.bibleId&&v.length<2?e.jsx(e.Fragment,{}):e.jsxs(e.Fragment,{children:[e.jsx("h6",{className:`flex flex-col items-center mb-8 ${N.textXl}`,children:c.nm}),l.map((r,o)=>{let d="text.primary";c.cd4+""===r.cd4&&(d="warning.main");const x=f?.filter(h=>h.id===r.id&&h.bookmark==="Y");return x&&x.length>0&&(r.bookmark="Y"),e.jsxs("div",{className:"grid grid-cols-5 sm:grid-cols-6 md:grid-cols-10 lg:grid-cols-12 gap-4",id:`id_${o+1}`,children:[e.jsx("div",{className:"col-span-1",children:e.jsxs("div",{className:`flex items-center ${d}`,children:[e.jsx(T,{className:"items-center text-top cursor-pointer",onClick:()=>c.onBookmark(r),children:r.nm}),x&&x.length>0&&e.jsx(O,{className:"text-red-500 w-4 h-4"})]})}),e.jsxs("div",{className:`col-span-4 sm:col-span-5 md:col-span-9 lg:col-span-11 ${d}`,children:[e.jsx(F,{text:r.ko}),e.jsx("div",{className:"text-sm text-red-600 dark:text-gray-700",children:e.jsx(F,{text:r.en})})]})]},o)})]})},ee=({data:l,bibleId:p,isBottom:f=!1})=>{const c=new Array,{t:v}=M();if(l==null)return;const r=p.split("_");for(let o=1;o<=l.cd3;o++){const d={nm:`${l.nm2}${o}장`,key:l.id+"_"+o};c.push(d)}return r&&r.length===3&&!f?e.jsxs("h6",{className:`flex flex-col items-center ${N.textXl}`,children:[r[2],"장"]}):e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-10 lg:grid-cols-12 gap-4",children:c.map((o,d)=>e.jsx("div",{className:"col-span-1",children:e.jsx(T,{to:`/bible/${o.key}`,children:o.nm})},d))})},ie=()=>{const[l,p]=u.useState(null),[f,c]=u.useState(null),[v,r]=u.useState(!0),{query:o,setBibleBookmark:d}=K(),x=o.data,{t:h,i18n:R}=M(),i=u.useRef(),{bibleId:a}=X(),B=q(),[w,y]=u.useState(!1),[I,E]=u.useState(!1),{user:V}=U(),_=B?.state?.word,j=B?.state?.cd4,P=z();u.useEffect(()=>{if(a!==void 0){(async()=>{const m=await D(a,_);p(m),r(!1)})(),y(!1),E(!0);const t=a.split("_");if(i.current&&t.length>=2){const m=i.current.cd3;y(Number(t[2])!==1),E(t[2]<m)}}},[a,_]),u.useEffect(()=>{j!==void 0&&setTimeout(()=>{J("","id_"+j)},1500)},[l,j]);const J=(s,t)=>{const m=document.getElementById(t);m&&m.scrollIntoView({block:"center",behavior:"smooth"})},Y=s=>{V!==void 0&&(d(s),s.bookmark=s.bookmark===void 0||s.bookmark==="N"?"Y":"N",c(s.id),setTimeout(()=>c(null),500))},D=async(s,t)=>{if(s===""||s===void 0)return"";R.language.split("-")[0];const H=(await L(()=>import("./bibleJson-mLacnG04.js"),[])).default,b=s.split("_"),C=(await L(()=>import("./bible-7rshX_PU.js"),[])).default;if(b.length<1)return;b.length>1&&H.map(g=>{g.id===b[0]+"_"+b[1]&&(i.current=g)});const $=new Array;if(b.length>1){const g=new RegExp(t,"gi");for(let k in C){let n=C[k];n.id.startsWith(`${s}_`)&&(t!==void 0&&t!==""&&t!==null&&(n.ko=n.ko.replace(g,`<span class='lightext'>${t}</span>`),n.en=n.en.replace(g,`<span class='lightext'>${t}</span>`)),n.nm=b.length===2?`${i.current.nm2}${n.cd3}:${n.cd4}`:`${i.current.nm2}${n.cd3}:${n.cd4}`,$.push(n))}return $.sort((k,n)=>k.cd3-n.cd3||k.cd4-n.cd4),$}};if(a==="")return e.jsx(e.Fragment,{});const A=s=>{let t=a.split("_");t[2]=Number(t[2])+s,P(`/bible/${t[0]}_${t[1]}_${t[2]}`)};return l===null?e.jsx(W,{}):e.jsxs("div",{className:`${N.card}`,children:[e.jsx("div",{id:"back-to-top-anchor"}),e.jsx(Q,{}),e.jsx("div",{className:"w-full items-center justify-center flex flex-col",children:e.jsx(T,{to:"/bible/"+i.current.id,children:e.jsx(G,{children:i.current!==null&&i.current!==void 0&&i.current.nm!==null?`${i.current.text} ${i.current.text_en}`:""})})}),e.jsx(ee,{data:i.current,bibleId:a}),e.jsx(Z,{dataText:l,data:i.current,searchWord:_,bibleId:a,cd4:j,bookmark:x,clickedVerseId:f,onBookmark:Y}),e.jsxs("div",{className:"p-0",children:[v&&e.jsx("div",{className:"flex flex-col items-center",children:e.jsx("div",{className:"mt-10 w-8 h-8 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"})}),a&&a.split("_").length===3?e.jsx("div",{className:`${N.between} mt-10`,children:e.jsxs("div",{className:"grid grid-cols-12 gap-2 w-full",children:[w?e.jsx("div",{className:I?"col-span-6":"col-span-12",children:e.jsx(S,{type:"button",variant:"outlined",onClick:()=>A(-1),fullWidth:!0,children:`< ${h("prev")}`})}):null,I?e.jsx("div",{className:w?"col-span-6":"col-span-12",children:e.jsx(S,{type:"button",variant:"outlined",onClick:()=>A(1),fullWidth:!0,children:`${h("next")} >`})}):""]})}):null]})]})};export{ie as TwBibleDetail,ie as default};
