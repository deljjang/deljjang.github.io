import{b,J as L,y as G,d as J,K as M,j as e,R as P,i as Y,C as q,B as j,O as H,E as K,l as B,Q as O,I as Q,S as U,M as V,N as W}from"./index-CGsNcmpW.js";import{u as z,B as X}from"./BibleBookmarkText-DCSMFL38.js";import{A as C}from"./AniButton-DsbrwUtr.js";import{b as D}from"./bibleTxt-CDg_iih8.js";import{G as f}from"./Grid-CPCzki_f.js";import"./Button-CI09ez79.js";const Z=n=>{const{t:u}=K(),h=new Array;if(n.data===void 0||n.data===null)return;const r=n.bibleId.split("_");for(let c=1;c<=n.data.cd3;c++){const d={nm:`${n.data.nm2}${c}${u("chapter")}`,key:n.data.id+"_"+c};h.push(d)}return r&&r.length===3?e.jsxs(B,{variant:"h6",sx:{display:"flex",alignItems:"center",flexDirection:"column",mb:4},children:[n.nm," ",r[2]," ",u("chapter")]}):e.jsxs(e.Fragment,{children:[e.jsx(B,{variant:"h6",sx:{display:"flex",alignItems:"center",flexDirection:"column",mb:4},children:n.nm}),e.jsx(f,{container:!0,spacing:2,columns:{xs:4,sm:6,md:10,lg:12},children:h.map((c,d)=>e.jsx(f,{item:!0,xs:1,md:1,children:e.jsx(O,{to:`/bible/${c.key}`,children:c.nm})},d))})]})},tt=n=>{const u=n.dataText;if(n.data===void 0||n.data===null||u==null)return;const h=n.bibleId.split("_");return n.bibleId&&h.length!==3?e.jsx(e.Fragment,{}):e.jsxs(e.Fragment,{children:[e.jsx(B,{variant:"h6",sx:{display:"flex",alignItems:"center",flexDirection:"column",mb:4},children:n.nm}),u.map((r,c)=>{let d="text.primary";n.cd4+""===r.cd4&&(d="warning.main");const i=n.bookmark?.data?.filter(s=>s.cd1===r.cd1&&s.cd2===r.cd2&&s.cd3===r.cd3&&s.cd4===r.cd4&&s.bookmark==="Y");return i&&i.length>0&&(r.bookmark="Y"),e.jsxs(f,{container:!0,spacing:2,columns:{xs:5,sm:6,md:10,lg:12},id:`id_${c+1}`,children:[e.jsx(f,{item:!0,xs:1,md:1,children:e.jsxs(j,{sx:{color:d,display:"flex"},children:[e.jsx(Q,{sx:{alignItems:"center",textAlign:"top"},onClick:()=>n.onBookmark(r),children:r.nm}),i&&i.length>0&&e.jsx(U,{sx:{color:"red"}})]})}),e.jsx(f,{item:!0,xs:4,sm:5,md:9,lg:11,children:e.jsx(j,{sx:{color:d},children:e.jsx(V,{text:r.text})})})]},c)})]})},lt=()=>{const[n,u]=b.useState(null),[h,r]=b.useState(!0),{query:c,setBibleBookmark:d}=z(),i=b.useRef(),{bibleId:s}=L(),p=G(),[T,I]=b.useState(!1),[$,_]=b.useState(!1),{user:E}=J(),k=p?.state?.word,g=p?.state?.cd4,F=M();b.useEffect(()=>{if(s!==void 0){(async()=>{const l=await S(s,k);u(l),r(!1)})(),I(!1),_(!0);const a=s.split("_");if(i.current&&a.length===3){const l=i.current.cd3;I(Number(a[2])!==1),_(a[2]<l)}}},[s,k]),b.useEffect(()=>{g!==void 0&&setTimeout(()=>{A("","id_"+g)},1500)},[n,g]);const A=(o,a)=>{const l=document.getElementById(a);l&&l.scrollIntoView({block:"center",behavior:"smooth"})},N=o=>{E!==void 0&&d(o)},S=async(o,a)=>{if(o===""||o===void 0)return"";const l=o.split("_");if(l.length<1)return;l.length>1&&W.map(x=>{x.id===l[0]+"_"+l[1]&&(i.current=x)});const v=new Array;if(l.length===3){for(let x in D){if(!x.includes(o+"_"))continue;let m=D[x];m.id=x;let y=m.txt;if(a!==void 0){const R=new RegExp(a,"gi");y=y.replace(R,`<span class='lightext'>${a}</span>`)}m.nm=`${i.current.nm2}${l[2]}:${m.cd4}`,m.text=y,v.push(m)}return v.sort((x,m)=>x.cd4-m.cd4),v}};if(s==="")return e.jsx(e.Fragment,{});const w=o=>{let a=s.split("_");a[2]=Number(a[2])+o,F(`/bible/${a[0]}_${a[1]}_${a[2]}`)};return e.jsxs(P.Fragment,{children:[e.jsx("div",{id:"back-to-top-anchor"}),e.jsx(X,{}),e.jsx(Y,{children:i.current!==null&&i.current!==void 0&&i.current.nm!==null?i.current.text:""}),e.jsx(Z,{data:i.current,bibleId:s}),e.jsx(tt,{dataText:n,data:i.current,searchWord:k,bibleId:s,cd4:g,bookmark:c,onBookmark:N}),e.jsxs(q,{sx:{p:0},children:[h&&e.jsx(j,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:e.jsx(H,{sx:{mt:5}})}),s&&s.split("_").length===3?e.jsx(j,{sx:{display:"flex",justifyContent:"space-between",mt:5},children:e.jsxs(f,{container:!0,spacing:1,children:[T?e.jsx(f,{item:!0,xs:$?6:12,children:e.jsx(C,{type:"button",variant:"outlined",onClick:()=>w(-1),fullWidth:!0,children:`< ${t("prev")}`})}):"",$?e.jsx(f,{item:!0,xs:T?6:12,children:e.jsx(C,{type:"button",variant:"outlined",onClick:()=>w(1),fullWidth:!0,children:`${t("next")} >`})}):""]})}):""]})]})};export{lt as BibleDetail,lt as default};
