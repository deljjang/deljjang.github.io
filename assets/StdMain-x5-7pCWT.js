import{j as U,bn as na,r as ve,bF as _o,bG as go,aI as Tn,B as ur,aJ as Pn,aR as en,bH as Yn,A as ra,aH as oa,w as sa,bI as Lr,bJ as gn,L as la,bu as aa}from"./index-Bz0IPAFl.js";import{t as yn,S as Mn,a as ua,b as ha,u as ks,o as is,c as ca}from"./useStore-BWj-Q1J6.js";import{H as hr,r as cr}from"./registry-Bs6vJs6g.js";import{C as da,u as dr}from"./index.esm-D3RJoXIB.js";import{F as fa,a as pa,S as _a,T as fr}from"./TextField-Bta7E3pu.js";import{C as An}from"./CardHeader-DEZ7OrP5.js";/* empty css                */import{S as ga,a as ma}from"./SinyTabs-mMNDgfmZ.js";const va=Object.freeze(Object.defineProperty({__proto__:null,get Aggregate(){return ke},get ArrayBase(){return Rn},get Binding(){return nt},get CancelEventArgs(){return He},get Clipboard(){return Jr},get ClipboardClsNames(){return zs},get CollectionView(){return Zt},get CollectionViewGroup(){return Tt},get Color(){return bt},get Control(){return H},get ControlBase(){return al},get ControlClsNames(){return ge},get ControlStateClsNames(){return q},get DataType(){return Ae},get DateTime(){return F},get Event(){return A},get EventArgs(){return Di},get ForeignClsNames(){return js},get Globalize(){return re},get GlyphClsNames(){return ut},get GroupDescription(){return vo},get InputFormElementsClsNames(){return ce},get Key(){return C},get NotifyCollectionChangedAction(){return We},get NotifyCollectionChangedEventArgs(){return Bt},get ObservableArray(){return At},get PageChangingEventArgs(){return Ls},get Point(){return Ye},get PopupPosition(){return Lt},get PrintDocument(){return cu},get PrintDocumentClsNames(){return Fs},get PropertyChangedEventArgs(){return Ta},get PropertyGroupDescription(){return Gr},get Rect(){return ht},get RequestErrorEventArgs(){return Pa},get Size(){return wt},get SortDescription(){return Hi},get SortNulls(){return oi},get Tooltip(){return er},get TooltipClsNames(){return $n},get TooltipEventArgs(){return ul},get TooltipTrigger(){return ft},get UtilitesClsNames(){return Xt},get _CLS_STATE_DISABLED(){return Xs},get _ClickRepeater(){return Ni},get _FocusService(){return Ys},get _Map(){return ol},get _MaskElement(){return wn},get _MaskProvider(){return un},get _NullValue(){return ll},get _addCultureInfo(){return rt},get _areObjectsEqual(){return Ka},get _deprecated(){return gr},get _getActiveElement(){return tl},get _getCalculatedArray(){return $s},get _getFocusableElements(){return br},get _getModule(){return ii},get _getTargetObject(){return Js},get _isMacOS(){return Co},get _isPlainArray(){return qa},get _isPlainObject(){return $a},get _loadedCultures(){return xo},get _registerModule(){return kn},get _setAriaLabelBy(){return an},get _startDrag(){return Us},get _updateCulture(){return ou},get _updateWme(){return hl},get _warning(){return Ja},get addClass(){return be},get animate(){return wo},get asArray(){return vt},get asBoolean(){return M},get asCollectionView(){return On},get asDate(){return It},get asEnum(){return pe},get asFunction(){return Le},get asInt(){return Fe},get asNumber(){return V},get asString(){return G},get asType(){return Ve},get assert(){return K},get cellCoordinateParserRegex(){return iu},get changeCulture(){return su},get changeCultureSync(){return sl},get changeType(){return _r},get clamp(){return ye},get closest(){return $},get closestClass(){return dt},get contains(){return J},get controlBaseClass(){return Eo},get copy(){return Qt},get createElement(){return Oe},get culture(){return W},get deepClone(){return Ur},get disableAutoComplete(){return vr},get empty(){return Ma},get enable(){return Ct},get escapeHtml(){return Wt},get escapeRegExp(){return yo},get evalTemplate(){return Qs},get focusFirst(){return tu},get format(){return zt},get getActiveElement(){return Z},get getAggregate(){return yr},get getElement(){return ci},get getElementRect(){return Zn},get getEventOptions(){return Jn},get getOffsetFromAncestor(){return rl},get getScrollableParent(){return nl},get getSpecialCharsRegex(){return $t},get getType(){return Si},get getTypes(){return Zs},get getUniqueId(){return pr},get getVersion(){return bo},get glbz(){return Kr},get hasClass(){return fe},get hasItems(){return Ue},get hidePopup(){return Vt},get httpRequest(){return Yr},get isArray(){return Ge},get isBoolean(){return st},get isChromiumBased(){return Ci},get isDate(){return Be},get isEdge(){return pi},get isEmpty(){return Wr},get isFirefox(){return Gt},get isFunction(){return oe},get isIE(){return Ie},get isIE10(){return Gs},get isIE9(){return bi},get isInt(){return Xn},get isMobile(){return hi},get isNullOrUndefined(){return Sn},get isNullOrWhiteSpace(){return Wa},get isNumber(){return _e},get isObject(){return et},get isPrimitive(){return In},get isSafari(){return Ht},get isString(){return te},get isUndefined(){return Li},get isWritable(){return el},get isiOS(){return Bs},get mouseToPage(){return Oi},get moveFocus(){return Ji},get removeChild(){return Ne},get removeClass(){return kt},get saveFile(){return Qa},get setAriaLabel(){return Ee},get setAttribute(){return S},get setChecked(){return tn},get setCss(){return B},get setLicenseKey(){return Ga},get setSelectionRange(){return ne},get setText(){return Ot},get showPopup(){return ei},get supportsFocusOptions(){return Ks},get toFixed(){return qr},get toHeaderCase(){return mr},get toPlainText(){return Dt},get toggleClass(){return ee},get tryCast(){return Ft},get uidGenerator(){return ln}},Symbol.toStringTag,{value:"Module"})),ba=Object.freeze(Object.defineProperty({__proto__:null,get AutoComplete(){return no},get AutoCompleteClsNames(){return vl},get Calendar(){return Sl},get CalendarClsNames(){return xe},get CalendarTabKeyAction(){return di},get ClickAction(){return xi},get CollectionViewNavigator(){return eh},get CollectionViewNavigatorClsNames(){return eo},get ColorPicker(){return El},get ColorPickerClsNames(){return Ki},get ComboBox(){return vi},get ComboBoxClsNames(){return Do},get DateSelectionMode(){return $e},get DropDown(){return mi},get DropDownClsNames(){return gi},get FormatItemEventArgs(){return To},get InputClsNames(){return tt},get InputColor(){return nh},get InputColorClsNames(){return to},get InputDate(){return or},get InputDateClsNames(){return rr},get InputDateEventArgs(){return Rl},get InputDateRange(){return ih},get InputDateRangeClsNames(){return bl},get InputDateTime(){return oh},get InputDateTimeClsNames(){return yl},get InputMask(){return Qu},get InputMaskClsNames(){return wl},get InputNumber(){return Zu},get InputNumberClsNames(){return qn},get InputTime(){return Dl},get InputTimeClsNames(){return Cl},get KeyAction(){return St},get ListBox(){return hn},get ListBoxClsNames(){return pt},get Menu(){return rh},get MenuClsNames(){return Cn},get MultiAutoComplete(){return sh},get MultiAutoCompleteClsNames(){return ri},get MultiSelect(){return io},get MultiSelectClsNames(){return xl},get MultiSelectListBox(){return Il},get MultiSelectListBoxClsNames(){return Kn},get Popup(){return th},get PopupBoundsChangingEventArgs(){return xn},get PopupClsNames(){return Ai},get PopupTrigger(){return Qe},get ShowMonthPicker(){return Xi},get TabKeyAction(){return _i}},Symbol.toStringTag,{value:"Module"})),Hs=Object.freeze(Object.defineProperty({__proto__:null,get AllowDragging(){return li},get AllowMerging(){return on},get AllowPinning(){return Nt},get AllowResizing(){return Jt},get AllowSorting(){return fi},get AutoSizeMode(){return ui},get CellEditEndingEventArgs(){return En},get CellFactory(){return Pe},get CellRange(){return j},get CellRangeEventArgs(){return Re},get CellType(){return P},get ClipStringOptions(){return Yt},get Column(){return Je},get ColumnCollection(){return Yi},get ColumnGroup(){return Ei},get ColumnGroupCollection(){return Vi},get DataMap(){return oo},get DataMapEditor(){return it},get FlexGrid(){return xt},get FlexGridClsNames(){return z},get FormatItemEventArgs(){return Al},get FrozenRowCol(){return lr},get GridPanel(){return yt},get GroupRow(){return we},get GroupSummaryPosition(){return Pt},get HeadersFocusability(){return Rt},get HeadersVisibility(){return le},get HitTestInfo(){return Dn},get KeyAction(){return Ii},get MergeManager(){return co},get OverlayManager(){return fo},get Row(){return _t},get RowCol(){return Cr},get RowColCollection(){return Po},get RowColFlags(){return ie},get RowCollection(){return ki},get SelMove(){return si},get SelectedState(){return rn},get SelectionMode(){return ae},get SortOrder(){return Et},get _AddNewHandler(){return Hl},get _ColumnGroupHandler(){return kl},get _CustomEditor(){return zl},get _CustomEditorClsNames(){return Ml},get _EditHandler(){return Bl},get _ImeHandler(){return xr},get _KeyboardHandler(){return Fl},get _MouseHandler(){return Vl},get _NewRowTemplate(){return Me},get _SelectionHandler(){return Ol},get _getSafariVer(){return Pl},get colHdrAriaAttributes(){return jl},get isNullOrEmptyString(){return Oo},get softDetailRow(){return sr},get softGridInteropBase(){return ho},get softInput(){return Bi},get softMultirow(){return Fi},get softODataCV(){return uo},get softRestCV(){return ao},get softTransposed(){return so},get softTransposedMultirow(){return lo},get toggleColumnPinning(){return Mo},get toggleColumnSort(){return Ao}},Symbol.toStringTag,{value:"Module"})),ya=Object.freeze(Object.defineProperty({__proto__:null,get DirectiveCellFactoryBase(){return Qi},get GridCellTemplateType(){return Se},get softGridDetail(){return Un},get softInput(){return po}},Symbol.toStringTag,{value:"Module"})),mo=({name:r,label:t,control:e,defaultValue:n,selectList:i,...o})=>{const s=`${r}-label`;return U.jsxs(fa,{...o,children:[U.jsx(pa,{id:s,children:t}),U.jsx(da,{render:({field:l})=>U.jsx(_a,{labelId:s,label:t,...l,onChange:o.onChange,children:i.map((a,u)=>U.jsx(na,{value:a.value,children:a.text},u))}),name:r,control:e,defaultValue:n})]})};cr();function wa(){const r=ve.useRef(null),[t,e]=ve.useState([]),[n,i]=ve.useState(0),s=_o(go)==="dark"?"ht-theme-main-dark-auto":"ht-theme-main",l=r.current?.hotInstance,[a,u]=ve.useState("&nbsp;");ve.useRef();const h=[{title:"ID",type:"numeric",data:"SEQ"},{title:"시스템명",type:"text",data:"SYS"},{title:"오너",type:"text",data:"OWNER"},{title:"테이블",type:"text",data:"TAB"},{title:"테이블명",type:"text",data:"TAB_NM"},{title:"컬럼",type:"text",data:"COL"},{title:"컬럼명",type:"text",data:"COL_NM"},{title:"타입",type:"text",data:"DATA_TYPE"},{title:"길이",type:"text",data:"DATA_LENGTH"},{title:"PK",type:"text",data:"PK"},{title:"NULL",type:"text",data:"NULL_YN"},{title:"기본값",type:"text",data:"DEFAULT_VALUE"},{title:"to-be컬럼",type:"text",data:"TO_COL"},{title:"to-be컬럼명",type:"text",data:"TO_COL_NM"}],c=[50,180,200,400,300,100,150,150,100,150],d=h.map((g,y)=>({value:y,text:g.title})),f=g=>{try{const y=l?.getPlugin("filters");if(y){const I=v("columns1");console.log("columnValue=",I,"text=",g.target.value),h.forEach((k,D)=>{y?.removeConditions(D)}),y?.addCondition(Number(I),"contains",[g.target.value]),y?.filter(),l?.render(),console.log("filtersPlugin=",y),console.log("hotRef=",r.current);const R=l.getData().length;i(R)}}catch(y){console.error("Error:",y.message)}},{register:p,control:_,getValues:v,formState:{errors:b}}=dr({mode:"onChange"});ve.useEffect(()=>{const g=[];yn.forEach(y=>{g.push(y)}),e(g),i(g.length),p("filterField1",{required:!0})},[]);const m=(g,y)=>{console.log("afterChange.change=",g,", source=",y),console.log("afterChange.change.length=",g?.length),g!==null&&(console.log("afterChange.change=",g[g.length-1],"cells",g[g.length-1][3]),console.log("afterChange.rowData=",t[g[g.length-1][0]][g[g.length-1][1]]))},w=()=>{console.log("save !!")};return U.jsxs(Tn,{style:{maxWidth:"100%",width:"100%",paddingLeft:"0px",paddingRight:"0px"},sx:{mt:0},children:[U.jsxs(ur,{sx:{maxWidth:"100%",paddingLeft:"0px",paddingRight:"0px",width:"100%",display:"grid",gridTemplateColumns:"200px 200px 300px ",flexDirection:"col",alignItems:"baseline",alignContent:"left",justifyContent:"left",textAlign:"center",whiteSpace:"nowrap"},children:[U.jsx(An,{title:"단어정보 : "+Pn(n)}),U.jsx(mo,{id:"columns1",name:"columns1",label:"조회 컬럼",control:_,defaultValue:"1",variant:"standard",margin:"normal",selectList:d,error:!!b.columns1,onChange:g=>{g.preventDefault(),console.log("onChange=",g.target.value)}}),U.jsx(fr,{...p("filterField1"),fullWidth:!0,label:"조회",placeholder:"조회",variant:"standard",style:{paddingLeft:"0px"},onKeyUp:f})]}),U.jsx(hr,{ref:r,data:t,themeName:s,rowHeaders:!0,colHeaders:!0,autoWrapRow:!0,height:"480px",width:"auto",contextMenu:!0,observeChanges:!0,afterChange:m,licenseKey:"non-commercial-and-evaluation",columns:h,cells:(g,y)=>y===0?{readOnly:!0}:{},colWidths:c,manualColumnResize:!0,filters:!0}),U.jsx(Mn,{onSave:w})]})}cr();function Ca(){const r=ve.useRef(null),[t,e]=ve.useState([]),[n,i]=ve.useState(0),s=_o(go)==="dark"?"ht-theme-main-dark-auto":"ht-theme-main",l=r.current?.hotInstance,a=()=>{},u=[{title:"ID",type:"numeric",data:"SEQ"},{title:"도메인그룹",type:"text",data:"DMN1"},{title:"도메인분류류",type:"text",data:"DMN2"},{title:"도메인",type:"text",data:"DMN"},{title:"설명",type:"text",data:"DMN_DSCR"},{title:"타입",type:"text",data:"TY"},{title:"길이",type:"text",data:"LEN"},{title:"길이2",type:"text",data:"LEN2"},{title:"저장형식",type:"text",data:"SAV"},{title:"형식",type:"text",data:"EXPRS"},{title:"단위",type:"text",data:"UNT"},{title:"값",type:"text",data:"VL"}],h=[50,180,200,400,300,100,150,150,100,150],c=u.map((g,y)=>({value:y,text:g.title})),d=g=>{try{const y=l?.getPlugin("filters");if(y){const I=_("columns1");console.log("columnValue=",I,"text=",g.target.value),u.forEach((k,D)=>{y?.removeConditions(D)}),y?.addCondition(Number(I),"contains",[g.target.value]),y?.filter(),l?.render(),console.log("filtersPlugin=",y),console.log("hotRef=",r.current);const R=l.getData().length;i(R)}}catch(y){console.error("Error:",y.message)}},{register:f,control:p,getValues:_,formState:{errors:v}}=dr({mode:"onChange"});ve.useEffect(()=>{const g=[];ua.forEach(y=>{g.push(y)}),e(g),i(g.length),f("filterField1",{required:!0})},[]);const b=()=>{console.log("afterChangesObserved !!")},m=(g,y)=>{console.log("afterChange.change=",g,", source=",y),console.log("afterChange.change.length=",g?.length),g!==null&&(console.log("afterChange.change=",g[g.length-1],"cells",g[g.length-1][3]),console.log("afterChange.rowData=",t[g[g.length-1][0]][g[g.length-1][1]]))},w=()=>{console.log("save !!")};return U.jsxs(Tn,{style:{maxWidth:"100%",width:"100%",paddingLeft:"0px",paddingRight:"0px"},sx:{mt:0},children:[U.jsxs(ur,{sx:{maxWidth:"100%",paddingLeft:"0px",paddingRight:"0px",width:"100%",display:"grid",gridTemplateColumns:"200px 200px 300px ",flexDirection:"col",alignItems:"baseline",alignContent:"left",justifyContent:"left",textAlign:"center",whiteSpace:"nowrap"},children:[U.jsx(An,{title:"단어정보 : "+Pn(n)}),U.jsx(mo,{id:"columns1",name:"columns1",label:"조회 컬럼",control:p,defaultValue:"1",variant:"standard",margin:"normal",selectList:c,error:!!v.columns1,onChange:g=>{g.preventDefault(),console.log("onChange=",g.target.value)}}),U.jsx(fr,{...f("filterField1"),fullWidth:!0,label:"조회",placeholder:"조회",variant:"standard",style:{paddingLeft:"0px"},onKeyUp:d})]}),U.jsx(hr,{ref:r,data:t,themeName:s,rowHeaders:!0,colHeaders:!0,autoWrapRow:!0,height:"480px",width:"auto",contextMenu:!0,observeChanges:!0,afterChange:m,afterChangesObserved:b,afterFilter:a,licenseKey:"non-commercial-and-evaluation",columns:u,cells:(g,y)=>y===0?{readOnly:!0}:{},colWidths:h,manualColumnResize:!0,filters:!0}),U.jsx(Mn,{onSave:w})]})}cr();const xa=()=>{const r=ve.useRef(null),[t,e]=ve.useState([]),[n,i]=ve.useState(0),s=_o(go)==="dark"?"ht-theme-main-dark-auto":"ht-theme-main",l=r.current?.hotInstance,a=()=>{},u=[{title:"ID",type:"numeric",data:"SEQ"},{title:"단어명",type:"text",data:"WD_NM"},{title:"영문명",type:"text",data:"WD_EN_NM"},{title:"영문약어명",type:"text",data:"AWD_NM"},{title:"단어설명",type:"text",data:"WD_DSCR"},{title:"형식단어여부",type:"text",data:"FORM_YN"},{title:"도메인분류명",type:"text",data:"DMN_NM"},{title:"이음동의어",type:"text",data:"SYNONYM"},{title:"금칙어",type:"text",data:"BAN_YN"},{title:"도메인그룹명",type:"text",data:"DMN_GRP_NM"}],h=[50,180,200,400,300,100,150,150,100,150],c=u.map((g,y)=>({value:y,text:g.title})),d=g=>{try{const y=l?.getPlugin("filters");if(y){const I=_("columns1");console.log("columnValue=",I,"text=",g.target.value),u.forEach((k,D)=>{y?.removeConditions(D)}),y?.addCondition(Number(I),"contains",[g.target.value]),y?.filter(),l?.render(),console.log("filtersPlugin=",y),console.log("hotRef=",r.current);const R=l.getData().length;i(R)}}catch(y){console.error("Error:",y.message)}},{register:f,control:p,getValues:_,formState:{errors:v}}=dr({mode:"onChange"});ve.useEffect(()=>{const g=[];ha.forEach(y=>{g.push(y)}),e(g),i(g.length),f("filterField1",{required:!0})},[]);const b=()=>{console.log("afterChangesObserved !!")},m=(g,y)=>{console.log("afterChange.change=",g,", source=",y),console.log("afterChange.change.length=",g?.length),g!==null&&(console.log("afterChange.change=",g[g.length-1],"cells",g[g.length-1][3]),console.log("afterChange.rowData=",t[g[g.length-1][0]][g[g.length-1][1]]))},w=()=>{console.log("save !!")};return U.jsxs(Tn,{style:{maxWidth:"100%",width:"100%",paddingLeft:"0px",paddingRight:"0px"},sx:{mt:0},children:[U.jsxs(ur,{sx:{maxWidth:"100%",paddingLeft:"0px",paddingRight:"0px",width:"100%",display:"grid",gridTemplateColumns:"200px 200px 300px ",flexDirection:"col",alignItems:"baseline",alignContent:"left",justifyContent:"left",textAlign:"center",whiteSpace:"nowrap"},children:[U.jsx(An,{title:"단어정보 : "+Pn(n)}),U.jsx(mo,{id:"columns1",name:"columns1",label:"조회 컬럼",control:p,defaultValue:"1",variant:"standard",margin:"normal",selectList:c,error:!!v.columns1,onChange:g=>{g.preventDefault(),console.log("onChange=",g.target.value)}}),U.jsx(fr,{...f("filterField1"),fullWidth:!0,label:"조회",placeholder:"조회",variant:"standard",style:{paddingLeft:"0px"},onKeyUp:d})]}),U.jsx(hr,{ref:r,data:t,themeName:s,rowHeaders:!0,colHeaders:!0,autoWrapRow:!0,height:"480px",width:"auto",contextMenu:!0,observeChanges:!0,afterChange:m,afterChangesObserved:b,afterFilter:a,licenseKey:"non-commercial-and-evaluation",columns:u,cells:(g,y)=>y===0?{readOnly:!0}:{},colWidths:h,manualColumnResize:!0,filters:!0}),U.jsx(Mn,{onSave:w})]})},Ea=typeof window<"u"?en.useInsertionEffect||en.useLayoutEffect:()=>{};function Ia(r){const t=en.useRef(Sa);Ea(()=>{t.current=r},[r]);const e=en.useRef(null);return e.current||(e.current=function(){return t.current.apply(this,arguments)}),e.current}function Sa(){throw new Error("INVALID_USEEVENT_INVOCATION: the callback from useEvent cannot be invoked before the component has mounted.")}/*!
    *
    * Wijmo Library 5.20251.40
    * https://developer.mescius.com/wijmo
    *
    * Copyright(c) MESCIUS inc. All rights reserved.
    *
    * Licensed under the End-User License Agreement For MESCIUS Wijmo Software.
    * us.sales@mescius.com
    * https://developer.mescius.com/wijmo/licensing
    *
    */var ti=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])})(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ra=function(r,t){return Object.defineProperty?Object.defineProperty(r,"raw",{value:t}):r.raw=t,r},nt=function(){function r(t){this.path=t}return Object.defineProperty(r.prototype,"path",{get:function(){return this._path},set:function(t){this._path=t,this._parts=t?t.split("."):[];for(var e=0;e<this._parts.length;e++){var n=this._parts[e],i=n.indexOf("[");i>-1&&(this._parts[e]=n.substr(0,i),this._parts.splice(++e,0,parseInt(n.substr(i+1))))}this._key=this._parts.length==1?this._parts[0]:null},enumerable:!0,configurable:!0}),r.prototype.getValue=function(t){if(t){if(this._key)return t[this._key];if(this._path&&this._path in t)return t[this._path];for(var e=0;e<this._parts.length&&t;e++)t=t[this._parts[e]]}return t},r.prototype.setValue=function(t,e){if(t)try{var n=this._path;if(n in t)return t[n]=e,t[n]==e;for(var i=0;i<this._parts.length-1;i++)if((t=t[this._parts[i]])==null)return!1;return t[n=this._parts[this._parts.length-1]]=e,t[n]==e}catch{return!1}return!1},r}(),Da=function(t,e){this.handler=t,this.self=e},A=function(){function r(t){this._handlers=[],this._handlersChanged=t}return r.prototype.addHandler=function(t,e){t=Le(t),this._handlers.push(new Da(t,e)),oe(this._handlersChanged)&&this._handlersChanged()},r.prototype.getHandler=function(t){t===void 0&&(t=0);var e=this._handlers[t];if(e)return e.handler},r.prototype.removeHandler=function(t,e){var n=!1;t=Le(t);for(var i=0;i<this._handlers.length;i++){var o=this._handlers[i];if(!(o.handler!=t&&t!=null||o.self!=e&&e!=null)&&(this._handlers.splice(i--,1),n=!0,t&&e))break}n&&oe(this._handlersChanged)&&this._handlersChanged()},r.prototype.removeAllHandlers=function(){var t=this._handlers.length>0;this._handlers.length=0,t&&oe(this._handlersChanged)&&this._handlersChanged()},r.prototype.raise=function(t,e){e===void 0&&(e=Di.empty);for(var n=this._handlers,i=0;i<n.length;i++){var o=n[i];o.handler.call(o.self,t,e),n[i]!==o&&i--}},Object.defineProperty(r.prototype,"hasHandlers",{get:function(){return this._handlers.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"handlerCount",{get:function(){return this._handlers.length},enumerable:!0,configurable:!0}),r}(),Di=function(){function r(){}return r.empty=new r,r}(),He=function(r){ti(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.cancel=!1,e}return t}(Di),Ta=function(r){ti(t,r);function t(e,n,i){var o=r.call(this)||this;return o._name=e,o._oldVal=n,o._newVal=i,o}return Object.defineProperty(t.prototype,"propertyName",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"oldValue",{get:function(){return this._oldVal},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"newValue",{get:function(){return this._newVal},enumerable:!0,configurable:!0}),t}(Di),Pa=function(r){ti(t,r);function t(e,n){var i=r.call(this)||this;return i._xhr=e,i._msg=n,i}return Object.defineProperty(t.prototype,"request",{get:function(){return this._xhr},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this._msg},set:function(e){this._msg=e},enumerable:!0,configurable:!0}),t}(He),We;(function(r){r[r.Add=0]="Add",r[r.Remove=1]="Remove",r[r.Change=2]="Change",r[r.Reset=3]="Reset"})(We||(We={}));var Bt=function(r){ti(t,r);function t(e,n,i){e===void 0&&(e=We.Reset),n===void 0&&(n=null),i===void 0&&(i=-1);var o=r.call(this)||this;return o.action=e,o.item=n,o.index=i,o}return t.reset=new t(We.Reset),t}(Di),Hi=function(){function r(t,e){this._bnd=new nt(t),this._asc=e}return Object.defineProperty(r.prototype,"property",{get:function(){return this._bnd.path},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"ascending",{get:function(){return this._asc},enumerable:!0,configurable:!0}),r}(),Ls=function(r){ti(t,r);function t(e){var n=r.call(this)||this;return n.newPageIndex=e,n}return t}(He),vo=function(){function r(){}return r.prototype.groupNameFromItem=function(t,e){return""},r.prototype.namesMatch=function(t,e){return t===e},r}(),Gr=function(r){ti(t,r);function t(e,n){var i=r.call(this)||this;return i._bnd=new nt(e),i._converter=n,i}return Object.defineProperty(t.prototype,"propertyName",{get:function(){return this._bnd.path},enumerable:!0,configurable:!0}),t.prototype.groupNameFromItem=function(e,n){return this._converter?this._converter(e,this.propertyName):this._bnd.getValue(e)},t.prototype.namesMatch=function(e,n){return e===n},t}(vo),Ma={},zs={clipboard:"wj-clipboard"},ge={content:"wj-content",hostElement:"wj-control",template:"wj-template"},q={active:"wj-state-active",checked:"wj-state-checked",collapsed:"wj-state-collapsed",collapsing:"wj-state-collapsing",disabled:"wj-state-disabled",dragSrc:"wj-state-dragsrc",empty:"wj-state-empty",focus:"wj-state-focus",focused:"wj-state-focused",invalid:"wj-state-invalid",lastSelected:"wj-state-last-selected",loading:"wj-state-loading",match:"wj-state-match",measuring:"wj-state-measuring",multiSelected:"wj-state-multi-selected",pinned:"wj-state-pinned",readOnly:"wj-state-readonly",selected:"wj-state-selected",sticky:"wj-state-sticky",updating:"wj-state-updating"},ut={backward:"wj-glyph-backward",btnGlyph:"wj-btn-glyph",calendar:"wj-glyph-calendar",circle:"wj-glyph-circle",clock:"wj-glyph-clock",down:"wj-glyph-down",downLeft:"wj-glyph-down-left",drag:"wj-glyph-drag",file:"wj-glyph-file",filter:"wj-glyph-filter",forward:"wj-glyph-forward",glyph:"wj-glyph",left:"wj-glyph-left",minus:"wj-glyph-minus",plus:"wj-glyph-plus",right:"wj-glyph-right",stepBackward:"wj-glyph-step-backward",stepForward:"wj-glyph-step-forward",up:"wj-glyph-up"},ce={btn:"wj-btn",btnDefault:"wj-btn-default",btnGroup:"wj-btn-group",btnGroupVertical:"wj-btn-group-vertical",btnsOutside:"wj-btns-outside",formControl:"wj-form-control",svgBtn:"wj-svg-btn"},Fs={printDocument:"wj-printdocument"},$n={hostElement:"wj-tooltip"},Xt={align:"wj-align",alignVCenter:"wj-align-vcenter",animated:"wj-animated",centerVert:"wj-center-vert",close:"wj-close",hide:"wj-hide",hideOk:"wj-hide-ok",remove:"wj-remove",right:"wj-right",rtl:"wj-rtl",separator:"wj-separator"},js={InputClsNames:{input:"wj-input",inputBtnVisible:"wj-input-btn-visible",inputGroup:"wj-input-group",inputGroupBtn:"wj-input-group-btn"},SelectorClsNames:{columnSelector:"wj-column-selector",columnSelectorGroup:"wj-column-selector-group"}},sn=typeof navigator<"u"?navigator.userAgent:"",Aa=sn.match(/iPad|iPhone|iPod|Android|webOS|BlackBerry|Windows Phone/i)!=null;function hi(){return Aa}var Oa=sn.match(/iPad|iPhone|iPod/i)!=null;function Bs(){return Oa}var ka=sn.match(/Firefox\//)!=null;function Gt(){return ka}var Ha=sn.match(/^((?!Chrome|Android).)*safari/i)!=null;function Ht(){return Ha}var La=sn.match(/Edge\/|Edg\//)!=null;function pi(){return La}var za=sn.match(/MSIE |Trident\/|Edge\//)!=null;function Ie(){return za}var Vs=!1;function bi(){return Vs}var Ns=!1;function Gs(){return Ns}var mn=null;function Ci(){if(mn!=null)return mn;mn=!1;var r=typeof navigator<"u"?navigator.userAgentData:null;if(r&&r.brands){for(var t=0,e=r.brands;t<e.length;t++)if(e[t].brand=="Chromium"){mn=!0;break}}return mn}var Ws=!1;typeof document<"u"&&document.addEventListener("test",function(r){},{get passive(){return Ws=!0,!0}});function Jn(r,t){return Ws?{capture:r,passive:t}:r}var qs=!1;typeof document<"u"&&document.createElement("div").focus({get preventScroll(){return qs=!0,!0}});function Ks(){return qs}function Us(r,t){r.effectAllowed=t,Gt()&&r.setData("text","")}typeof document<"u"&&document.doctype&&(navigator.appVersion.indexOf("MSIE 10")>-1&&(Ns=!0),navigator.appVersion.indexOf("MSIE 9")>-1&&(Vs=!0,document.addEventListener("mousemove",function(r){if(r.which==1){var t=$(r.target,"."+ge.hostElement);if(t&&!t.style.cursor){for(var e=r.target;e;e=e.parentElement)if(e.attributes&&e.attributes.draggable)return e.dragDrop(),!1}}})));if(typeof window<"u"){var ns="requestAnimationFrame",Fa="cancelAnimationFrame";if(!window[ns]){var zr=0;window[ns]=function(r){var t=Date.now(),e=16-(t-zr),n=e>0?e:0;return zr=t+n,setTimeout(function(){r(zr)},n)},window[Fa]=clearTimeout}if(!window.atob){var Gi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ja=new RegExp("[^"+Gi+"]");window.atob=function(r){var t,e,n,i,o=[],s=0,l=r.length;if(ja.test(r)||/=/.test(r)&&(/=[^=]/.test(r)||/={3}/.test(r)))throw new Error("Invalid base64 data");for(l%4>0&&(l=(r+=Array(4-l%4+1).join("=")).length);s<l;){for(e=[],i=s;s<i+4;)e.push(Gi.indexOf(r.charAt(s++)));for(n=[((t=(e[0]<<18)+(e[1]<<12)+((63&e[2])<<6)+(63&e[3]))&255<<16)>>16,e[2]===64?-1:(65280&t)>>8,e[3]===64?-1:255&t],i=0;i<3;++i)(n[i]>=0||i===0)&&o.push(String.fromCharCode(n[i]))}return o.join("")},window.btoa=function(r){for(var t,e,n=[],i=0,o=r.length;i<o;)t=((e=[r.charCodeAt(i++),r.charCodeAt(i++),r.charCodeAt(i++)])[0]<<16)+((e[1]||0)<<8)+(e[2]||0),n.push(Gi.charAt((t&63<<18)>>18),Gi.charAt((258048&t)>>12),Gi.charAt(isNaN(e[1])?64:(4032&t)>>6),Gi.charAt(isNaN(e[2])?64:63&t));return n.join("")}}}var Ys=function(){function r(){this._hasDoc=typeof Document<"u",this._ae=this._nativeAe();var t=window,e=this._onBlur.bind(this),n=this._onFocus.bind(this);t.addEventListener("focusout",e,!0),t.addEventListener("focusin",n,!0),Ie()||(t.addEventListener("blur",e,!0),t.addEventListener("focus",n,!0))}return Object.defineProperty(r.prototype,"activeElement",{get:function(){var t=this._ae,e=this._nativeAe();return t===r._noAe?t=this._ae=e:t!=e&&(this._isSpecialRoot(t)||document.body.contains(t)||(t=this._ae=e)),t!==r._noAe?t:null},enumerable:!0,configurable:!0}),r.prototype._onBlur=function(t){if(t.isTrusted){var e=t.relatedTarget;this._ae=this._isSpecialRoot(e)?this._nativeAe():e}},r.prototype._onFocus=function(t){t.isTrusted&&(this._ae=this._nativeAe())},r.prototype._isSpecialRoot=function(t){return t==null||t===document.body||this._hasDoc&&t instanceof Document},r.prototype._nativeAe=function(){var t;try{t=typeof document.activeElement!="unknown"?document.activeElement:r._noAe}catch{t=r._noAe}return t},r.prototype.dispose=function(){Ie()||(window.removeEventListener("blur",this._onBlur,!0),window.removeEventListener("focus",this._onFocus,!0)),window.removeEventListener("focusout",this._onBlur,!0),window.removeEventListener("focusin",this._onFocus,!0)},r._noAe={},r}(),$i=typeof window<"u"&&window.Symbol?Symbol("_getProxyTarget"):"	_get	Proxy	Target	";function $s(r,t,e){var n=new WeakMap;if(!e){var i={};if(r.length){var o=r[0];for(var s in o){var l=typeof o[s];i[s]=l=="string"?"":l=="number"?0:null}e=i}}return new Proxy(r,{get:function(a,u){if(u===$i)return a;if(typeof u=="string"||typeof u=="number"){if(u=="indexOf")return function(f,p){var _=a.indexOf(f,p);return _<0&&f&&(f=f[$i])&&(_=a.indexOf(f,p)),_};var h=parseInt(u);if(!isNaN(h)){var c=a[h];if(c&&!c[$i]){var d=n.get(c);d||(d=Ba(c,t,e),n.set(c,d)),c=d}return c}}return Reflect.get(a,u)}})}function Ba(r,t,e){if(!r[$i]){if(Ie())for(var n in t)r[n]=null;var i={get:function(o,s,l){if(s===$i)return o;if(s==="constructor")return function(){return Object.assign({},e||{})};var a=t[s];if(a)switch(typeof a){case"function":return a(l);case"string":return Va(a,l)}return o[s]}};Ie()||(i.ownKeys=function(o){return Object.keys(o).concat(Object.keys(t))},i.getOwnPropertyDescriptor=function(o,s){return s in t?{enumerable:!0,configurable:!0,writable:!1}:Reflect.getOwnPropertyDescriptor(o,s)}),r=new Proxy(r,i)}return r}function Js(r){return(r?r[$i]:null)||r}function Va(r,t){var e=[t];return new(Function.bind.apply(Function,[void 0].concat(["$"],["return "+r])))().apply(void 0,e)}var Na="5.20251.40",Xs=q.disabled;function bo(){return Na}function Ga(r){H._licKey=r}var C;(function(r){r[r.Back=8]="Back",r[r.Tab=9]="Tab",r[r.Enter=13]="Enter",r[r.Escape=27]="Escape",r[r.Space=32]="Space",r[r.PageUp=33]="PageUp",r[r.PageDown=34]="PageDown",r[r.End=35]="End",r[r.Home=36]="Home",r[r.Left=37]="Left",r[r.Up=38]="Up",r[r.Right=39]="Right",r[r.Down=40]="Down",r[r.Delete=46]="Delete",r[r.X=88]="X",r[r.F1=112]="F1",r[r.F2=113]="F2",r[r.F3=114]="F3",r[r.F4=115]="F4",r[r.F5=116]="F5",r[r.F6=117]="F6",r[r.F7=118]="F7",r[r.F8=119]="F8",r[r.F9=120]="F9",r[r.F10=121]="F10",r[r.F11=122]="F11",r[r.F12=123]="F12",r[r.PlusKey=107]="PlusKey",r[r.EqualPlusKey=187]="EqualPlusKey",r[r.MinusKey=109]="MinusKey",r[r.HyphenMinusKey=189]="HyphenMinusKey",r[r.S=83]="S",r[r.P=80]="P",r[r.F=70]="F"})(C||(C={}));var Ae;(function(r){r[r.Object=0]="Object",r[r.String=1]="String",r[r.Number=2]="Number",r[r.Boolean=3]="Boolean",r[r.Date=4]="Date",r[r.Array=5]="Array"})(Ae||(Ae={}));function Ft(r,t){return r==null?null:te(t)?oe(r.implementsInterface)&&r.implementsInterface(t)?r:null:r instanceof t?r:null}function In(r){return te(r)||_e(r)||st(r)||Be(r)}function te(r){return typeof r=="string"}function Wa(r){return!r||!/\S/.test(r)}function _e(r){return typeof r=="number"}function Xn(r){return _e(r)&&r==Math.round(r)}function st(r){return typeof r=="boolean"}function oe(r){return typeof r=="function"}function Li(r){return r===void 0}function Sn(r){return r==null}function Be(r){return(r instanceof Date||Object.prototype.toString.call(r)==="[object Date]")&&!isNaN(r.getTime())}function Ge(r){return r instanceof Array||Array.isArray(r)||Object.prototype.toString.call(r)==="[object Array]"}function qa(r){return Array.isArray(r)}function et(r){return r!=null&&typeof r=="object"&&!Be(r)&&!Ge(r)}function Wr(r){for(var t in r)return!1;return!0}function Ka(r,t){var e=Object.entries(r),n=Object.entries(t);if(e.length!==n.length)return!1;for(var i=0,o=e;i<o.length;i++){var s=o[i],l=s[0],a=s[1];if(!t.hasOwnProperty(l)||t[l]!==a)return!1}return!0}function pr(r){for(var t=r,e=0;document.getElementById(t)!=null;e++)t=r+e;return t}function ln(){for(var r="",t="0123456789abcdef".split(""),e=0;e<32;e++){var n=Math.floor(16*Math.random());switch(e){case 8:r+="-";break;case 12:n=4,r+="-";break;case 16:n=3&n|8,r+="-";break;case 20:r+="-"}r+=t[n]}return r}function Oi(r){if(r instanceof Ye)return r;if(r&&r.touches&&r.touches.length>0&&(r=r.touches[0]),_e(r.clientX)&&_e(r.clientY))return new Ye(r.clientX+pageXOffset,r.clientY+pageYOffset);throw"Mouse or touch event expected."}function Si(r){return _e(r)?Ae.Number:st(r)?Ae.Boolean:Be(r)?Ae.Date:te(r)?Ae.String:Ge(r)?Ae.Array:Ae.Object}function Zs(r,t){if(t===void 0&&(t=1e3),!r)return[];var e=r.length;(t<=0||e<t)&&(t=e);var n=[];if(t){for(var i=Object.keys(r[0]),o={},s=i.slice(),l=0;l<t;l++){for(var a=r[l],u=s.length-1;u>=0;u--){var h=s[u],c=a[h];if(In(c)){var d=Object.getOwnPropertyDescriptor(r[l],h);o[h]={binding:h,dataType:Si(c),isReadOnly:d&&!d.writable&&!d.set},s.splice(u,1)}}if(!s.length)break}for(l=0;l<i.length;l++){var f=o[i[l]];f&&n.push(f)}}return n}function _r(r,t,e,n){if(r!=null){var i=Ae;if(te(r))switch(t){case i.Number:var o=re.parseFloat(r,e);return isNaN(o)?r:o;case i.Date:var s=re.parseDate(r,e,Be(n)?n:null);return s||e||!r||(s=new Date(r)),s&&isFinite(s.getTime())?s:r;case i.Boolean:switch(r.toLowerCase()){case"true":return!0;case"false":return!1}return r;case i.Array:try{var l=r.split(",").map(function(a){return(a=a.trim()).match(/^(\+|\-)?\d+\.?\d*$/)?a:'"'+a+'"'});return JSON.parse("["+l.join(",")+"]")}catch{}}if(t==Ae.String)return re.format(r,e)}return r}function qr(r,t,e){if(e){var n=r.toString(),i=n.indexOf("e"),o=n.indexOf(".");if(i>-1){if(n[i+1]==="-"){var s=parseFloat(n.substr(i+2)),l=n.substr(0,i);o>-1&&(l=l.substr(0,o)+l.substr(o+1)),n="0."+(Array(s).join("0")+l).substr(0,t),r=parseFloat(n)}}else o>-1&&(n=n.substr(0,o+1+t),r=parseFloat(n))}else{var a=Math.pow(10,t);r=Math.round(r*a)/a}return r}function zt(r,t,e){if((r=G(r)).match(/\{.*"count".*:.*"when".*:.*\}/))try{var n=JSON.parse(r);if(te(n.count)){var i=t[n.count],o=n.when;if(_e(i)&&et(o)){var s=o[i]||o.other;te(s)&&(r=s)}}}catch{}return r.replace(/\{(.*?)(:(.*?))?\}/g,function(l,a,u,h){var c=l;return a&&a[0]!="{"&&t&&(c=new nt(a).getValue(t),h&&(c=re.format(c,h)),e&&(c=e(t,a,h,c))),c??""})}function Kr(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=[],n=-1;return r[0].forEach(function(i,o){if(o>0&&o!=n){var s=r[o],l=i.match(/^:([a-z][0-9]*\b)/i)||i.match(/^:'(.+?)'/)||i.match(/^:"(.+?)"/);l?(s=re.format(s,l[1]),i=i.substr(l[0].length)):i==":"&&o<r.length-1&&(_e(s)||Be(s))&&(s=re.format(s,r[o+1]),i="",n=o+1),e.push(s)}i&&e.push(i)}),e.join("")}function Qs(r,t){return Ie()?(r=r.replace(/:\${([^}]*)}/g,function(e,n){return":"+Fr(n,t)})).replace(/\${([^}]*)}(:(([A-Za-z]\d*)|"([^"]+)"|'([^']+)'))?/g,function(e,n,i,o,s,l,a){var u=Fr(n,t);return o?re.format(u,s||l||a):u}):Fr(r,t)}function Fr(r,t){(t=t||{}).glbz=Kr;var e=Ya(r,t);return Ie()?e:Kr(as||(as=Ra(["",""],["",""])),e)}function Ua(r,t,e){return e===void 0&&(e="${"+r+"}"),r.split(".").reduce(function(n,i){return n!=null&&n[i]!=null?n[i]:e},t)}function Ya(r,t,e){return r.replace(/\$\{.+?}/g,function(n){return Ua(n.substr(2,n.length-3).trim(),t,e)})}function ye(r,t,e){return r!=null&&(e!=null&&r>e&&(r=e),t!=null&&r<t&&(r=t)),r}function Qt(r,t,e,n){if(e===void 0&&(e=!0),n===void 0&&(n=!1),t){for(var i in t)if(i[0]!="_"){K(i in r,'Unknown property "'+i+'".');var o=t[i];if(!r._copy||!r._copy(i,o)){var s=r[i];r[i]instanceof A?oe(o)&&r[i].addHandler(o):!e||!et(o)||typeof Element<"u"&&o instanceof Element||!s||!et(s)||Object.getPrototypeOf(s).constructor==Object.prototype.constructor&&el(r,i)||i=="itemsSource"?n&&et(o)&&Object.getPrototypeOf(o).isPrototypeOf(Object)&&et(s)&&!Object.getPrototypeOf(s).isPrototypeOf(Object)?Qt(s,o):r[i]=o:Qt(s,o)}}}return r}function $a(r){return et(r)&&Object.getPrototypeOf(r).isPrototypeOf(Object)}function el(r,t){var e=Object.getOwnPropertyDescriptor(r,t)||Object.getOwnPropertyDescriptor(Object.getPrototypeOf(r),t)||{};return!!e.writable||oe(e.set)}function Ur(r){if(r===null||typeof r!="object")return r;if(Array.isArray(r))return r.map(function(n){return Ur(n)});var t={};for(var e in r)r.hasOwnProperty(e)&&(t[e]=Ur(r[e]));return t}function K(r,t,e){if(e===void 0&&(e=!0),!r){t="** Assertion failed in Wijmo: "+t;var n=new Error;throw te(n.stack)&&e&&(t+=" "+n.stack),t}}function gr(r,t){console.error('** WARNING: "'+r+'" has been deprecated; please use "'+t+'" instead.')}function Ja(r){console.error('** WARNING: "'+r)}function G(r,t){return t===void 0&&(t=!0),Li(r)&&(r=null),K(t&&r==null||te(r),"String expected."),r}function V(r,t,e){if(t===void 0&&(t=!1),e===void 0&&(e=!1),K(t&&r==null||_e(r),"Number expected."),e&&r&&r<0)throw"Positive number expected.";return r}function Fe(r,t,e){if(t===void 0&&(t=!1),e===void 0&&(e=!1),K(t&&r==null||Xn(r),"Integer expected."),e&&r&&r<0)throw"Positive integer expected.";return r}function M(r,t){return t===void 0&&(t=!1),K(t&&r==null||st(r),"Boolean expected."),r}function It(r,t){if(t===void 0&&(t=!1),te(r)){var e=_r(r,Ae.Date,"r");Be(e)&&(r=e)}return K(t&&r==null||Be(r),"Date expected."),r}function Le(r,t){return t===void 0&&(t=!0),K(t&&r==null||oe(r),"Function expected."),r}function vt(r,t){return t===void 0&&(t=!0),K(t&&r==null||Ge(r),"Array expected."),r}function Ve(r,t,e){return e===void 0&&(e=!1),r=Ft(r,t),K(e||r!=null,t+" expected."),r}function pe(r,t,e){if(e===void 0&&(e=!1),r==null&&e)return null;var n=te(r)?t[r]:r;return K(n!=null,'Invalid enum value: "'+r+'"'),_e(n)?n:r}function On(r,t){if(t===void 0&&(t=!0),r==null&&t)return null;var e=Ft(r,"ICollectionView");return e??(Ge(r)||K(!1,"Array or ICollectionView expected."),new Zt(r))}function Ue(r){return r!=null&&r.items!=null&&r.items.length>0}function mr(r){return r&&r.length?r[0].toUpperCase()+r.substr(1).replace(/([a-z])([A-Z])/g,"$1 $2"):""}function Wt(r){return r&&te(r)&&(r=r.replace(/[&<>]/g,function(t){return Xa[t]})),r!=null?r.toString():""}var Gn,Xa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},Za=/"(.*?)"|[^\w]|_/g;function $t(){return Za}function yo(r){return r.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function Dt(r){var t=G(r);return te(t)&&t.indexOf("<")>-1&&(Gn||(Gn=document.createElement("div")),Gn.innerHTML=t,t=Gn.textContent),t}function fe(r,t){if(r&&t){if(r instanceof HTMLElement&&r.classList&&!bi())return r.classList.contains(t);if(r.getAttribute){var e=new RegExp("(\\s|^)"+t+"(\\s|$)");return r&&e.test(r.getAttribute("class"))}}return!1}function be(r,t){if(r&&t){if(r instanceof HTMLElement&&r.classList&&!bi()){t.indexOf(" ")<0?r.classList.add(t):t.split(" ").forEach(function(e){r.classList.add(e)});return}r.setAttribute&&t.split(" ").forEach(function(e){if(!fe(r,e)){var n=r.getAttribute("class");r.setAttribute("class",n?n+" "+e:e)}})}}function kt(r,t){if(r&&t){if(r instanceof HTMLElement&&r.classList&&!bi()){t.indexOf(" ")<0?r.classList.remove(t):t.split(" ").forEach(function(e){r.classList.remove(e)}),r.classList.length===0&&r.removeAttribute("class");return}r.setAttribute&&t.split(" ").forEach(function(e){if(fe(r,e)){var n=new RegExp("((\\s|^)"+e+"(\\s|$))","g"),i=r.getAttribute("class");(i=i.replace(n," ").replace(/ +/g," ").trim())?r.setAttribute("class",i):r.removeAttribute("class")}})}}function ee(r,t,e){e==null&&(e=!fe(r,t)),e?be(r,t):kt(r,t)}function S(r,t,e,n){r&&(e!=null?n&&r.getAttribute(t)||r.setAttribute(t,e.toString()):r.removeAttribute(t))}function tn(r,t){var e=t==null;r.checked=Ie()?t||e:t,r.indeterminate=e}function Ee(r,t){S(r,"aria-label",t)}function ne(r,t,e,n){if(e===void 0&&(e=t),n===void 0&&(n=!0),K(r instanceof HTMLInputElement||r instanceof HTMLTextAreaElement,"INPUT or TEXTAREA element expected"),J(document.body,r)&&!r.disabled&&r.offsetHeight){try{r.setSelectionRange(t,e,"backward")}catch{}if(n)try{return r.focus(),!0}catch{}}return!1}function vr(r){var t="autocomplete",e=r.getAttribute(t);e&&e!="on"||r.setAttribute(t,"off"),"autocorrect,autocapitalize,spellcheck".split(",").forEach(function(n){r.setAttribute(n,n=="spellcheck"?"false":"off")})}function Ne(r){return r&&r.parentNode?r.parentNode.removeChild(r):null}function Z(){var r=document.activeElement;if(r){var t=r.shadowRoot;t&&t.activeElement&&(r=t.activeElement)}return r}function tl(r){var t=r;if(t){var e=t.shadowRoot;e&&e.activeElement&&(t=e.activeElement)}return t}function Ji(r,t){var e=br(r,t<0),n=0;if(t){var i=e.indexOf(Z());i>-1&&(n=(i+t+e.length)%e.length)}if(n<e.length){var o=function(){var s=e[n];s.focus(),s instanceof HTMLInputElement&&s.select()};return Gt()?requestAnimationFrame(function(){o()}):o(),!0}return!1}function br(r,t){t===void 0&&(t=!1);var e=[],n=Array.prototype.slice.call(r.querySelectorAll("input,select,textarea,button,a,div,label,[tabindex]")),i={};n=n.filter(function(c){return c.tabIndex!==-1});var o=function(c){return c instanceof HTMLInputElement&&c.type==="radio"};n.forEach(function(c){o(c)&&c.checked&&(i[c.name||""]=!0)}),(n=n.filter(function(c){return!o(c)||c.checked||!i[c.name||""]})).sort(function(c,d){return c.tabIndex===d.tabIndex?0:c.tabIndex===0?1:d.tabIndex===0?-1:c.tabIndex-d.tabIndex});for(var s=0;s<n.length;s++){var l=n[s];if(l.offsetHeight>0&&l.tabIndex>-1&&!l.disabled&&window.getComputedStyle(l).visibility!=="hidden"&&!$(l,"[disabled],."+q.disabled)){if(l instanceof HTMLAnchorElement&&!l.hasAttribute("href"))continue;if(Ie()&&!l.hasAttribute("tabindex")){if(l instanceof HTMLDivElement)continue;var a=H.getControl($(l,".wj-flexgrid"));if(a&&a.keyActionTab==0)continue}if(l.type==="radio"&&!l.checked&&e.length>0){var u=e[e.length-1],h=Z();if(u.type==="radio"&&u.name===l.name){t&&u!=h&&(e[e.length-1]=l);continue}}(H.getControl(l)||!br(l).length||l.classList.contains("wj-detail"))&&e.push(l)}}return e}function Qa(r,t,e){e===void 0&&(e="text/plain");var n=r instanceof Blob;n||!e.match(/\bcsv\b/i)&&!t.match(/\.csv$/i)||(r="\uFEFF"+r);var i=n?r:new Blob([r],{type:e}),o=navigator;if(oe(o.msSaveOrOpenBlob))o.msSaveOrOpenBlob(i,t);else{var s=document.createElement("a"),l=function(c){var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),c.dispatchEvent(d)};if("download"in s){var a=window.URL||window.webkitURL,u=a.createObjectURL(i);s.href=u,s.target="_blank",s.download=t,l(s),s=null,window.setTimeout(function(){a.revokeObjectURL(u)},3e4)}else{var h=new FileReader;h.onloadend=function(){s.href=h.result,s.download=t,l(s),s=null},h.readAsDataURL(i)}}}function ci(r){if(r instanceof Element||r&&r.appendChild&&r.appendChild instanceof Function)return r;if(te(r))try{return document.querySelector(r)}catch{}return r&&r.jquery?r[0]:null}function eu(r){var t=(r=r.replace(";base64,","_wj_")).split(";"),e=[];return t.forEach(function(n){var i=[];n.indexOf("_wj_")>-1?(i=(n=n.replace("_wj_",";base64,").replace("data:image","_wjimg_")).split(":")).length==2&&(i[1]=i[1].replace("_wjimg_","data:image")):i=n.split(":"),e.push(i)}),e}function Oe(r,t,e){r=r.replace(/\bstyle\s*=\s*"/g,'_wj-style="');var n=document.createElement("div");if(n.innerHTML=r,r.indexOf("_wj-style")>-1)for(var i=n.querySelectorAll("[_wj-style]"),o=function(l){var a=i[l],u=a.getAttribute("_wj-style"),h=[];u.indexOf(";base64,")>-1?h=eu(u):u.split(";").forEach(function(c){h.push(c.split(":"))}),h.forEach(function(c){c.length==2&&(a.style[c[0].trim()]=c[1].trim())}),a.removeAttribute("_wj-style")},s=0;s<i.length;s++)o(s);return n.children.length==1&&(n=n.children[0]),e&&B(n,e),t&&(t=ci(t)).appendChild(n),n}function Ot(r,t){r.textContent=t||""}function J(r,t,e){for(var n=t;n&&r;){if(n===r)return!0;n=(e?n[H._OWNR_KEY]:null)||n.parentNode||n.host}return!1}function $(r,t){if(r){if(oe(r.closest))return r.closest(t);var e=r.matches||r.webkitMatchesSelector||r.msMatchesSelector||r.mozMatchesSelector;if(e){for(;r&&r.nodeType===1;r=r.parentElement||r.parentNode)if(e.call(r,t))return r}}return null}function dt(r,t){return $(r,"."+t)}function Ct(r,t){var e=!t,n="disabled";ee(r,q.disabled,e),S(r,n,e?n:null);for(var i=r.querySelectorAll("input,button"),o=0;o<i.length;o++)S(i[o],n,e?n:null)}function Zn(r){var t=r.getBoundingClientRect();return new ht(t.left+pageXOffset,t.top+pageYOffset,t.width,t.height)}function B(r,t){if(K(et(t),"css parameter should be an object"),r instanceof Array)for(var e=0;e<r.length;e++)B(r[e],t);else if(r&&r.style){var n=r.style;for(var i in t){var o=t[i];typeof o=="number"&&i.match(/width|height|left|top|right|bottom|size|padding|margin'/i)&&(o+="px"),n[i]!==o&&(n[i]=o)}}}function wo(r,t,e){t==null&&(t=H._ANIM_DEF_DURATION),e==null&&(e=H._ANIM_DEF_STEP),r=Le(r),t=V(t,!1,!0),e=V(e,!1,!0);var n,i=Date.now(),o=setInterval(function(){var s=Math.min(1,(Date.now()-i)/t);s=Math.sin(s*Math.PI/2),s*=s,n&&cancelAnimationFrame(n),n=requestAnimationFrame(function(){n=null,r(s)}),s>=1&&clearInterval(o)},e);return o}var Ye=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.x=V(t),this.y=V(e)}return r.prototype.equals=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=0),t instanceof r&&Math.abs(this.x-t.x)<=e&&Math.abs(this.y-t.y)<=n},r.prototype.clone=function(){return new r(this.x,this.y)},r}(),wt=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.width=V(t),this.height=V(e)}return r.prototype.equals=function(t){return t instanceof r&&this.width==t.width&&this.height==t.height},r.prototype.clone=function(){return new r(this.width,this.height)},r}(),ht=function(){function r(t,e,n,i){this.left=V(t),this.top=V(e),this.width=V(n),this.height=V(i)}return Object.defineProperty(r.prototype,"right",{get:function(){return this.left+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.top+this.height},enumerable:!0,configurable:!0}),r.prototype.equals=function(t){return t instanceof r&&this.left==t.left&&this.top==t.top&&this.width==t.width&&this.height==t.height},r.prototype.clone=function(){return new r(this.left,this.top,this.width,this.height)},r.fromBoundingRect=function(t){if(t.left!=null)return new r(t.left,t.top,t.width,t.height);if(t.x!=null)return new r(t.x,t.y,t.width,t.height);K(!1,"Invalid source rectangle.")},r.union=function(t,e){var n=Math.min(t.left,e.left),i=Math.min(t.top,e.top);return new r(n,i,Math.max(t.right,e.right)-n,Math.max(t.bottom,e.bottom)-i)},r.intersection=function(t,e){var n=Math.max(t.left,e.left),i=Math.max(t.top,e.top);return new r(n,i,Math.min(t.right,e.right)-n,Math.min(t.bottom,e.bottom)-i)},r.prototype.contains=function(t){if(t instanceof Ye)return t.x>=this.left&&t.x<=this.right&&t.y>=this.top&&t.y<=this.bottom;if(t instanceof r){var e=t;return e.left>=this.left&&e.right<=this.right&&e.top>=this.top&&e.bottom<=this.bottom}K(!1,"Point or Rect expected.")},r.prototype.inflate=function(t,e,n,i){return n!=null&&i!=null?new r(this.left-t,this.top-e,this.width+t+n,this.height+e+i):new r(this.left-t,this.top-e,this.width+2*t,this.height+2*e)},r}(),F=function(){function r(){}return r.addDays=function(t,e){return(t=new Date(t.getTime())).setDate(t.getDate()+e),t},r.addMonths=function(t,e){var n=(t=new Date(t.getTime())).getDate();return t.setMonth(t.getMonth()+e),t.getDate()!=n&&t.setDate(0),t},r.addYears=function(t,e){return(t=new Date(t.getTime())).setFullYear(t.getFullYear()+e),t},r.addHours=function(t,e){return(t=new Date(t.getTime())).setHours(t.getHours()+e),t},r.addMinutes=function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t},r.addSeconds=function(t,e){return(t=new Date(t.getTime())).setSeconds(t.getSeconds()+e),t},r.weekFirst=function(t,e){return e===void 0&&(e=re.getFirstDayOfWeek()),r.addDays(t,-(t.getDay()-e))},r.weekLast=function(t,e){return e===void 0&&(e=re.getFirstDayOfWeek()),t=r.weekFirst(t,e),r.addDays(t,6)},r.monthFirst=function(t){return r.addDays(t,1-t.getDate())},r.monthLast=function(t){return t=r.monthFirst(t),t=r.addMonths(t,1),r.addDays(t,-1)},r.yearFirst=function(t){return new Date(t.getFullYear(),0,1)},r.yearLast=function(t){return new Date(t.getFullYear(),11,31)},r.sameDate=function(t,e){return Be(t)&&Be(e)&&t.getFullYear()==e.getFullYear()&&t.getMonth()==e.getMonth()&&t.getDate()==e.getDate()},r.sameTime=function(t,e){return Be(t)&&Be(e)&&t.getHours()==e.getHours()&&t.getMinutes()==e.getMinutes()&&t.getSeconds()==e.getSeconds()&&t.getMilliseconds()==e.getMilliseconds()},r.equals=function(t,e){return t==null&&e==null||Be(t)&&Be(e)&&t.getTime()==e.getTime()},r.fromDateTime=function(t,e){return!t&&!e?null:(t||(t=e),e||(e=t),r.newDate(t.getFullYear(),t.getMonth(),t.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()))},r.toFiscal=function(t,e){var n=W.Globalize.calendar;return Ge(n.fiscalYearOffsets)?r.addMonths(t,-n.fiscalYearOffsets[e?0:1]):t},r.fromFiscal=function(t,e){var n=W.Globalize.calendar;return Ge(n.fiscalYearOffsets)?r.addMonths(t,+n.fiscalYearOffsets[e?0:1]):t},r.newDate=function(t,e,n,i,o,s,l){if(t==null||e==null||n==null){var a=new Date;t==null&&(t=a.getFullYear()),e==null&&(e=a.getMonth()),n==null&&(n=a.getDate())}i==null&&(i=0),o==null&&(o=0),s==null&&(s=0),l==null&&(l=0);var u=new Date(t,e,n,i,o,s,l),h=u.getFullYear();return t<100&&h>=1900&&u.setFullYear(u.getFullYear()-1900),u},r.clone=function(t){return r.fromDateTime(t,t)},r}();function Yr(r,t){var e=t||{},n=e.method?G(e.method).toUpperCase():"GET",i=e.async==null||M(e.async),o=e.data;if(o!=null&&n=="GET"){var s=[];for(var l in o){var a=o[l];Be(a)&&(a=a.toJSON()),s.push(l+"="+encodeURIComponent(a))}if(s.length){var u=r.indexOf("?")<0?"?":"&";r+=u+s.join("&")}o=null}var h=new XMLHttpRequest;h.URL_DEBUG=r;var c=!1;if(o!=null&&!te(o)&&(c=et(o),o=JSON.stringify(o)),h.onload=function(){h.readyState==4&&(h.status<300?e.success&&Le(e.success)(h):e.error&&Le(e.error)(h),e.complete&&Le(e.complete)(h))},h.onerror=function(){if(!oe(e.error))throw"HttpRequest Error: "+h.status+" "+h.statusText;e.error(h)},h.open(n,r,i,e.user,e.password),e.user&&e.password&&h.setRequestHeader("Authorization","Basic "+btoa(e.user+":"+e.password)),c&&function(){for(var f in e.requestHeaders)if(f.toLowerCase()==="content-type")return!1;return!0}()&&h.setRequestHeader("Content-Type","application/json"),e.requestHeaders)for(var d in e.requestHeaders)h.setRequestHeader(d,e.requestHeaders[d]);return _e(e.timeout)&&(h.timeout=e.timeout),oe(e.beforeSend)&&e.beforeSend(h),h.send(o),h}var il={};function kn(r,t){if(il[r]=t,r==="wijmo"){var e=typeof window<"u"?window:typeof self<"u"?self:null;e&&(e.wijmo=t)}}function ii(r){return il[r]}function tu(r,t){var e=r.querySelectorAll(t||'button, [href], input, [tabindex]:not([tabindex="-1"])'),n=Array.from(e).filter(function(i){return i.offsetWidth>0&&i.offsetHeight>0&&!i.hasAttribute("disabled")&&i.tabIndex>=0});return n.length>0?(n[0].focus(),!0):!1}var iu=new RegExp(/(\'?\w+\'?\!)?(\$?[A-Za-z]+)(\$?\d+)/,"g");function nl(r){for(var t=document.scrollingElement,e=getComputedStyle(r).position=="absolute"?r.offsetParent:r.parentElement;e&&e!=t;){if(e.clientHeight!=e.scrollHeight)return e;r=e=getComputedStyle(e).position=="absolute"?e.offsetParent:e.parentElement}return t}function rl(r,t){for(var e=0,n=0,i=0,o=0;r;)n+=r.offsetLeft,e+=r.offsetTop,r=r.offsetParent;for(;t;)o+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent;return{top:e-i,left:n-o}}function Co(){return navigator.userAgent.indexOf("Mac")!==-1}function an(r,t,e,n){var i=e===""?null:e;i!==r.ariaLabelledBy&&(r._ariaLabelledby=i,S(t,"aria-labelledby",i),n&&n())}var ol=function(){function r(t){if(t===void 0&&(t=!0),t)this._h={};else{var e=ru(),n=e&&e.Map;this._m=n&&new Map||new nu}}return Object.defineProperty(r.prototype,"isPojoHash",{get:function(){return this._h!=null},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"size",{get:function(){return this._h&&Object.keys(this._h).length||this._m.size},enumerable:!0,configurable:!0}),r.prototype.clear=function(){this._h?this._h={}:this._m.clear()},r.prototype.delete=function(t){this._h?delete this._h[t]:this._m.delete(t)},r.prototype.get=function(t){return this._h?this._h[t]:this._m.get(t)},r.prototype.has=function(t){return this._h?t in this._h:this._m.has(t)},r.prototype.set=function(t,e){return this._h?this._h[t]=e:this._m.set(t,e),this},r}(),nu=function(){function r(){this._d=[]}return Object.defineProperty(r.prototype,"size",{get:function(){return this._d.length},enumerable:!0,configurable:!0}),r.prototype.clear=function(){this._d=[]},r.prototype.delete=function(t){var e=this._kIdx(t);return e>-1?(this._d.splice(e,1),!0):!1},r.prototype.get=function(t){var e=this._kIdx(t);return e>-1?this._d[e].v:void 0},r.prototype.has=function(t){return this._kIdx(t)>-1},r.prototype.set=function(t,e){var n=this._kIdx(t);return n>-1?this._d[n].v=e:this._d.push({k:t,v:e}),this},r.prototype._kIdx=function(t){var e=this._d,n=e.length;if(t==t){for(var i=0;i<n;i++)if(e[i].k===t)return i}else for(i=0;i<n;i++){var o=e[i].k;if(o!=o)return i}return-1},r}();function ru(){var r=null;return typeof window<"u"?r=window:typeof global<"u"?r=global:typeof self<"u"&&(r=self),r}var bt=function(){function r(t){this._r=0,this._g=0,this._b=0,this._a=1,t&&this._parse(t)}return Object.defineProperty(r.prototype,"r",{get:function(){return this._r},set:function(t){this._r=ye(V(t),0,255)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"g",{get:function(){return this._g},set:function(t){this._g=ye(V(t),0,255)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"b",{get:function(){return this._b},set:function(t){this._b=ye(V(t),0,255)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"a",{get:function(){return this._a},set:function(t){this._a=ye(V(t),0,1)},enumerable:!0,configurable:!0}),r.prototype.equals=function(t){return t instanceof r&&this.r==t.r&&this.g==t.g&&this.b==t.b&&this.a==t.a},r.prototype.toString=function(){var t=Math.round(100*this.a);return t>99?"#"+((1<<24)+(this.r<<16)+(this.g<<8)+this.b).toString(16).slice(1):"rgba("+this.r+","+this.g+","+this.b+","+t/100+")"},r.fromRgba=function(t,e,n,i){i===void 0&&(i=1);var o=new r(null);return o.r=Math.round(ye(V(t),0,255)),o.g=Math.round(ye(V(e),0,255)),o.b=Math.round(ye(V(n),0,255)),o.a=ye(V(i),0,1),o},r.fromHsb=function(t,e,n,i){i===void 0&&(i=1);var o=r._hsbToRgb(ye(V(t),0,1),ye(V(e),0,1),ye(V(n),0,1));return r.fromRgba(o[0],o[1],o[2],i)},r.fromHsl=function(t,e,n,i){i===void 0&&(i=1);var o=r._hslToRgb(ye(V(t),0,1),ye(V(e),0,1),ye(V(n),0,1));return r.fromRgba(o[0],o[1],o[2],i)},r.fromString=function(t){var e=new r(null);return e._parse(G(t))?e:null},r.prototype.getHsb=function(){return r._rgbToHsb(this.r,this.g,this.b)},r.prototype.getHsl=function(){return r._rgbToHsl(this.r,this.g,this.b)},r.interpolate=function(t,e,n){n=ye(V(n),0,1);var i=r._rgbToHsl(t.r,t.g,t.b),o=r._rgbToHsl(e.r,e.g,e.b),s=1-n,l=t.a*s+e.a*n,a=[i[0]*s+o[0]*n,i[1]*s+o[1]*n,i[2]*s+o[2]*n],u=r._hslToRgb(a[0],a[1],a[2]);return r.fromRgba(u[0],u[1],u[2],l)},r.toOpaque=function(t,e){if((t=te(t)?r.fromString(t):Ve(t,r)).a==1)return t;e=e==null?r.fromRgba(255,255,255,1):te(e)?r.fromString(e):Ve(e,r);var n=t.a,i=1-n;return r.fromRgba(t.r*n+e.r*i,t.g*n+e.g*i,t.b*n+e.b*i)},r.prototype._parse=function(t){if((t=t.toLowerCase())=="transparent")return this._r=this._g=this._b=this._a=0,!0;if(t&&t.indexOf("#")!=0&&t.indexOf("rgb")!=0&&t.indexOf("hsl")!=0){var e=document.createElement("div");e.style.color=t;var n=e.style.color;n==t&&!(n=window.getComputedStyle(e).color)&&(document.body.appendChild(e),n=window.getComputedStyle(e).color,Ne(e)),t=n.toLowerCase()}if(t.indexOf("#")==0){if(this._isValidHexColor(t)){if(t.length==4)return this.r=parseInt(t[1]+t[1],16),this.g=parseInt(t[2]+t[2],16),this.b=parseInt(t[3]+t[3],16),this.a=1,!0;if(t.length==7)return this.r=parseInt(t.substr(1,2),16),this.g=parseInt(t.substr(3,2),16),this.b=parseInt(t.substr(5,2),16),this.a=1,!0}return!1}if(t.indexOf("rgb")==0){var i=t.indexOf("("),o=t.indexOf(")");if(i>-1&&o>-1&&(s=t.substr(i+1,o-(i+1)).split(",")).length>2)return this.r=parseInt(s[0]),this.g=parseInt(s[1]),this.b=parseInt(s[2]),this.a=s.length>3?parseFloat(s[3]):1,!0}if(t.indexOf("hsl")==0&&(i=t.indexOf("("),o=t.indexOf(")"),i>-1&&o>-1)){var s;if((s=t.substr(i+1,o-(i+1)).split(",")).length>2){var l=parseInt(s[0])/360,a=parseInt(s[1]),u=parseInt(s[2]);s[1].indexOf("%")>-1&&(a/=100),s[2].indexOf("%")>-1&&(u/=100);var h=r._hslToRgb(l,a,u);return this.r=h[0],this.g=h[1],this.b=h[2],this.a=s.length>3?parseFloat(s[3]):1,!0}}return!1},r.prototype._isValidHexColor=function(t){return/^#([A-Fa-f0-9]{3}|[A-Fa-f0-9]{4}|[A-Fa-f0-9]{6}|[A-Fa-f0-9]{8})$/.test(t)},r._hslToRgb=function(t,e,n){K(t>=0&&t<=1&&e>=0&&e<=1&&n>=0&&n<=1,"bad HSL values");var i,o,s;if(e==0)i=o=s=n;else{var l=n<.5?n*(1+e):n+e-n*e,a=2*n-l;i=r._hue2rgb(a,l,t+1/3),o=r._hue2rgb(a,l,t),s=r._hue2rgb(a,l,t-1/3)}return[Math.round(255*i),Math.round(255*o),Math.round(255*s)]},r._hue2rgb=function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t},r._rgbToHsl=function(t,e,n){K(t>=0&&t<=255&&e>=0&&e<=255&&n>=0&&n<=255,"bad RGB values"),t/=255,e/=255,n/=255;var i,o,s=Math.max(t,e,n),l=Math.min(t,e,n),a=(s+l)/2;if(s==l)i=o=0;else{var u=s-l;switch(o=a>.5?u/(2-s-l):u/(s+l),s){case t:i=(e-n)/u+(e<n?6:0);break;case e:i=(n-t)/u+2;break;case n:i=(t-e)/u+4}i/=6}return[i,o,a]},r._rgbToHsb=function(t,e,n){K(t>=0&&t<=255&&e>=0&&e<=255&&n>=0&&n<=255,"bad RGB values");var i=r._rgbToHsl(t,e,n);return r._hslToHsb(i[0],i[1],i[2])},r._hsbToRgb=function(t,e,n){var i=r._hsbToHsl(t,e,n);return r._hslToRgb(i[0],i[1],i[2])},r._hsbToHsl=function(t,e,n){K(t>=0&&t<=1&&e>=0&&e<=1&&n>=0&&n<=1,"bad HSB values");var i=ye(n*(2-e)/2,0,1),o=1-Math.abs(2*i-1),s=ye(o>0?n*e/o:e,0,1);return K(!isNaN(i)&&!isNaN(s),"bad conversion to HSL"),[t,s,i]},r._hslToHsb=function(t,e,n){K(t>=0&&t<=1&&e>=0&&e<=1&&n>=0&&n<=1,"bad HSL values");var i=ye(n==1?1:(2*n+e*(1-Math.abs(2*n-1)))/2,0,1),o=ye(i>0?2*(i-n)/i:e,0,1);return K(!isNaN(i)&&!isNaN(o),"bad conversion to HSB"),[t,o,i]},r}(),W=typeof window<"u"&&window.wijmo&&window.wijmo.culture||{Globalize:{numberFormat:{".":".",",":",","-":"-","+":"+","%":"%",percent:{pattern:["-n%","n%"]},currency:{decimals:2,symbol:"$",pattern:["($n)","$n"]}},calendar:{"/":"/",":":":",firstDay:0,days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],am:["AM","A"],pm:["PM","P"],eras:["A.D.","B.C."],patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",t:"h:mm tt",T:"h:mm:ss tt",M:"MMMM d",m:"MMMM d",Y:"MMMM, yyyy",y:"MMMM, yyyy",g:"M/d/yyyy h:mm tt",G:"M/d/yyyy h:mm:ss tt",s:'yyyy"-"MM"-"dd"T"HH":"mm":"ss',o:'yyyy"-"MM"-"dd"T"HH":"mm":"ss"."fffffffK',O:'yyyy"-"MM"-"dd"T"HH":"mm":"ss"."fffffffK',U:"dddd, MMMM dd, yyyy h:mm:ss tt"},fiscalYearOffsets:[-3,-3]}}},re=function(){function r(){}return r.format=function(t,e,n,i,o){return te(t)?t:_e(t)?(e=e||(t==Math.round(t)?"n0":"n2"),r.formatNumber(t,e,n,i,o)):Be(t)?(e=e||"d",r.formatDate(t,e)):t!=null?t.toString():""},r.formatNumber=function(t,e,n,i,o){t=V(t),e=G(e);var s,l=W.Globalize.numberFormat,a=r._parseNumericFormat(e),u=a.spec,h=a.prec,c=l["."]||".",d=l[","]||",",f=l["-"]||"-",p=Math;if(h==null&&(h=o??(u=="c"?l.currency.decimals:u=="e"?6:u=="r"?15:t==p.round(t)?0:2)),a.scale&&(t/=p.pow(10,a.scale)),u=="d"||u=="x"){for(s=(i?p.floor:p.round)(p.abs(t)).toString(u=="d"?10:16);s.length<h;)s="0"+s;return t<0&&(s=f+s),a.specRaw=="X"?s.toUpperCase():s}switch(i&&u!="p"&&u!="e"&&(t=qr(t,h,!0)),u){case"e":s=t.toExponential(h),a.specRaw=="E"&&(s=s.replace("e","E"));break;case"c":s=r._toFixedStr(p.abs(t),h);break;case"p":t=r._shiftDecimal(t,2,14),i&&(t=qr(t,h,i)),s=r._toFixedStr(p.abs(t),h);break;default:(s=r._toFixedStr(t,h))[0]!="-"||s.match(/[1-9]/)||(s=s.substr(1))}if((n||u=="g"||u=="r")&&s.indexOf(".")>-1&&(s=s.replace(/(\.\d*?)0+$/g,"$1").replace(/\.$/,"")),c!="."&&(s=s.replace(".",c)),f!="-"&&(s=s.replace("-",f)),d&&(u=="n"||u=="c"||a.specRaw=="p"||a.specRaw=="F"||a.specRaw=="G")){var _=s.indexOf(c),v=/\B(?=(\d\d\d)+(?!\d))/g;s=_>-1?s.substr(0,_).replace(v,d)+s.substr(_):s.replace(v,d)}if(u=="c"){var b=t<0&&s.match(/[1-9]/)?0:1,m=l.currency.pattern[b],w=a.curr||l.currency.symbol;w=="​"&&(w=""),s=m.replace("n",s).replace("$",w)}if(u=="p"){b=t<0&&s.match(/[1-9]/)?0:1,m=l.percent.pattern[b];var g=l["%"]||"%";s=m.replace("n",s),g!="%"&&(s=s.replace("%",g)),f!="-"&&b==0&&(s=s.replace("-",f))}return a.prefix||a.suffix?a.prefix+s+a.suffix:s},r.formatDate=function(t,e){switch(t=It(t),e){case"r":case"R":return t.toUTCString();case"u":return t.toISOString().replace(/\.\d{3}/,"")}return e=r._expandFormat(e),r._parseDateFormat(e).map(function(n){return r._formatDatePart(t,e,n)}).join("")},r.parseInt=function(t,e){return Math.round(r.parseFloat(t,e))},r.parseFloat=function(t,e){var n=r._parseNumericFormat(e),i=n.prefix;i&&t.indexOf(i)==0&&(t=t.substring(i.length));var o=n.suffix;if(o){var s=t.lastIndexOf(o);s>-1&&s==t.length-o.length&&(t=t.substring(0,t.length-o.length))}var l=W.Globalize.numberFormat,a=l["."]||".",u=l[","]||",",h=l["-"]||"-",c=l["%"]||"%",d=n.curr||l.currency.symbol||"$",f=t.indexOf(c)>-1,p=t.indexOf("(")>-1&&t.indexOf(")")>-1,_=0;if(n.spec=="x")_=parseInt(t,16);else{[d,c,"(",")"].forEach(function(b){t=t.replace(b,"")}),/\s/.test(u)&&(t=t.replace(/\s+/g,""));var v=(t=t.replace(new RegExp("\\"+u,"g"),"").replace(new RegExp("\\"+h,"g"),"-").replace(/(\+|\-)\s+/g,"$1").replace(a,".").trim()).length;!p&&v&&t[v-1]=="-"&&(p=!0,t=t.substring(0,v-1)),_=/^\s*(\+|\-)?\d*(\.\d*)?(\s*E(\+|\-)?\d+)?\s*$/i.test(t)?parseFloat(t):Number.NaN}return isNaN(_)||(p=p||_<0,_=Math.abs(_),f&&(_=r._shiftDecimal(_,-2)),p&&(_=-_),n.scale&&(_*=Math.pow(10,n.scale))),_},r.parseDate=function(t,e,n){if(!(t=G(t)))return null;if(e=="u")return new Date(t);var i;if(e=="R"||e=="r"){var o=t.match(/((\d+)\-(\d+)\-(\d+))?\s?((\d+):(\d+)(:(\d+))?)?/);return o[1]||o[5]?(i=o[1]?new Date(parseInt(o[2]),parseInt(o[3])-1,parseInt(o[4])):new Date,o[5]&&(i.setHours(parseInt(o[6])),i.setMinutes(parseInt(o[7])),i.setSeconds(o[8]?parseInt(o[9]):0))):i=new Date(t),isNaN(i.getTime())?null:i}e=r._expandFormat(e||"d");var s=W.Globalize.calendar,l=r._CJK,a=new RegExp("(\\"+s["/"]+")|(\\"+s[":"]+")|(\\d+)|(["+l+"\\.]{2,})|(["+l+"]+)","gi"),u=t.match(a),h=r._parseDateFormat(e),c=0;if(!(u&&u.length&&h&&h.length))return null;var d,f,p,_,v,b=-1,m=0,w=1,g=0,y=0,I=0,x=0,R=-1,k=null;(n=It(n,!0))&&(m=n.getMonth(),w=n.getDate(),g=n.getHours(),y=n.getMinutes(),I=n.getSeconds(),x=n.getMilliseconds());for(var D=0;D<h.length&&u;D++){var E=D-c,T=E>-1&&E<u.length?u[E]:"",L=h[D].length;switch(h[D]){case"EEEE":case"EEE":case"EE":case"E":case"eeee":case"eee":case"ee":case"e":v=h[D];case"yyyy":case"yyy":case"yy":case"y":L>1&&T.length>L&&(u[E]=T.substr(L),T=T.substr(0,L),c++),b=parseInt(T),_=T.length==4;break;case"MMMM":case"MMM":p=!0,m=-1;for(var O=T.toLowerCase(),X=h[D]=="MMMM"?s.months:s.monthsAbbr,Q=0;Q<12;Q++)if(X[Q].toLowerCase().indexOf(O)==0){m=Q;break}if(m>-1)break;case"MM":case"M":p=!0,L>1&&T.length>L&&(u[E]=T.substr(L),T=T.substr(0,L),c++),m=parseInt(T)-1;break;case"dddd":case"ddd":d=!0;break;case"dd":case"d":L>1&&T.length>L&&(u[E]=T.substr(L),T=T.substr(0,L),c++),w=parseInt(T),f=!0;break;case"hh":case"h":L>1&&T.length>L&&(u[E]=T.substr(L),T=T.substr(0,L),c++),g=(g=parseInt(T))==12?0:g;break;case"HH":L>1&&T.length>L&&(u[E]=T.substr(L),T=T.substr(0,L),c++),g=parseInt(T);break;case"H":g=parseInt(T);break;case"mm":case"m":L>1&&T.length>L&&(u[E]=T.substr(L),T=T.substr(0,L),c++),y=parseInt(T);break;case"ss":case"s":L>1&&T.length>L&&(u[E]=T.substr(L),T=T.substr(0,L),c++),I=parseInt(T);break;case"fffffff":case"FFFFFFF":case"ffffff":case"FFFFFF":case"fffff":case"FFFFF":case"ffff":case"FFFF":case"fff":case"FFF":case"ff":case"FF":case"f":case"F":x=parseInt(T)/Math.pow(10,L-3);break;case"tt":case"t":T=T.toUpperCase(),g<12&&s.pm.indexOf(T)>-1&&(g+=12);break;case"q":case"Q":case"u":case"U":R=parseInt(T);break;case"ggg":case"gg":case"g":case'"г."':if(k=s.eras.length>1?r._getEra(T,s):s.eras.length>0?s.eras[0]:null,s.eras.length>0&&!k)return null;break;case"/":case":":if(T&&T!=s[h[D]])return null;break;case s["/"]:case s[":"]:if(T&&T!=h[D])return null;break;case"K":break;default:r._unquote(h[D]).trim()!=T.trim()&&c++}}if(p&&f&&(isNaN(g)&&(g=0),isNaN(y)&&(y=0),isNaN(I)&&(I=0)),m<0||m>11||isNaN(m)||w<1||w>31||isNaN(w)||g<0||g>=24||isNaN(g)||y<0||y>=60||isNaN(y)||I<0||I>=60||isNaN(I)||u.length+c>h.length)return null;if(v){if(!p)return null;var Y=W.Globalize.calendar;if(Ge(Y.fiscalYearOffsets)){var se=v[0]=="E",ue=m-Y.fiscalYearOffsets[se?0:1];b+=ue>11?-1:ue<0?1:0}}if(d&&!f)return null;if(!p&&R>=1&&R<=4&&(m=3*(R-1)),isNaN(b)||b<0)b=n?n.getFullYear():new Date().getFullYear();else if(k&&k.start)b=b+k.start.getFullYear()-1;else if(b<100&&!_){var de=_e(s.twoDigitYearMax)?s.twoDigitYearMax:2029;de>99&&(b+=b+2e3<=de?2e3:1900)}return(i=F.newDate(b,m,w,g,y+0,I,x)).getMonth()!=m||i.getDate()!=w||isNaN(i.getTime())?null:i},r.getFullFormat=function(t){return r._expandFormat(t)},r.getFirstDayOfWeek=function(){var t=W.Globalize.calendar.firstDay;return t||0},r.getNumberDecimalSeparator=function(){var t=W.Globalize.numberFormat["."];return t||"."},r._toFixedStr=function(t,e){var n=t.toString(),i=n.indexOf("."),o=e-(n.length-i)+1,s=n.indexOf("e")>-1;return!s&&i>-1&&o>=0?n+Array(o+1).join("0"):(i>-1&&!s&&n[n.length-1]=="5"&&(t=+(Math.round(+(Math.abs(t)+"e"+e))+"e"+-e)*(t<0?-1:1)),t.toFixed(e))},r._unquote=function(t){return t.length>1&&t[0]==t[t.length-1]&&(t[0]=="'"||t[0]=='"')?t.substr(1,t.length-2):t},r._parseNumericFormat=function(t){var e=r._numFormatInfo[t];if(!e){var n=t&&t.match(/(\"(.*?)\"\s*)?([a-z]+)\s*(\d*)\s*(,*)(\s*\"(.*?)\"\s*)?(.*)/i)||[],i=n[3]?n[3]:"n";i.length>1&&(n=[],i="n"),e={prefix:n[2]||"",spec:i.toLowerCase(),specRaw:i,prec:n[4]?parseInt(n[4]):null,scale:n[5]?3*n[5].length:0,suffix:n[7]||"",curr:n[8]||null},r._numFormatInfo[t]=e}return e},r._parseDateFormat=function(t){var e=r._dateFormatParts[t];if(!e){if(e=[],t){var n=void 0,i=void 0;for(n=0;n>-1&&n<t.length;n++){var o=t[n];if((o=="'"||o=='"')&&(i=t.indexOf(o,n+1))>-1)e.push(t.substring(n,i+1)),n=i;else if(o=="\\"&&n<t.length-1)n++,e.push('"'+t[n]+'"');else{for(i=n+1;i<t.length&&t[i]==o;i++);e.push(t.substring(n,i)),n=i-1}}}r._dateFormatParts[t]=e}return e},r._formatDatePart=function(t,e,n){var i,o=W.Globalize.calendar,s=null,l=0,a=0,u=n.length;switch(n){case"yyyy":case"yyy":case"yy":case"y":case"EEEE":case"EEE":case"EE":case"E":case"eeee":case"eee":case"ee":case"e":l=(i=n[0]=="E"?F.toFiscal(t,!0):n[0]=="e"?F.toFiscal(t,!1):t).getFullYear(),o.eras.length>1&&e.indexOf("g")>-1&&(s=r._getEra(t,o))&&(l=Be(s.start)?l-s.start.getFullYear()+1:Math.abs(l));var h=n.length<3?l%100:n.length==3?l%1e3:l;return r._zeroPad(h,n.length);case"MMMMM":return o.monthsAbbr[t.getMonth()][0];case"MMMM":return o.months[t.getMonth()];case"MMM":return o.monthsAbbr[t.getMonth()];case"MM":case"M":return r._zeroPad(t.getMonth()+1,u);case"dddd":return o.days[t.getDay()];case"ddd":return o.daysAbbr[t.getDay()];case"dd":return r._zeroPad(t.getDate(),2);case"d":return t.getDate().toString();case"hh":case"h":return r._zeroPad(r._h12(t),u);case"HH":case"H":return r._zeroPad(t.getHours(),u);case"mm":case"m":return r._zeroPad(t.getMinutes(),u);case"ss":case"s":return r._zeroPad(t.getSeconds(),u);case"fffffff":case"FFFFFFF":case"ffffff":case"FFFFFF":case"fffff":case"FFFFF":case"ffff":case"FFFF":case"fff":case"FFF":case"ff":case"FF":case"f":case"F":return a=t.getMilliseconds()*Math.pow(10,u-3),n[0]=="f"?r._zeroPad(a,u):a.toFixed(0);case"tt":return t.getHours()<12?o.am[0]:o.pm[0];case"t":return t.getHours()<12?o.am[1]:o.pm[1];case"q":case"Q":return(Math.floor(t.getMonth()/3)+1).toString();case"u":case"U":return i=F.toFiscal(t,n=="U"),(Math.floor(i.getMonth()/3)+1).toString();case"ggg":case"gg":case"g":if(o.eras.length>1&&(s=r._getEra(t,o))){if(te(s))return s;switch(n){case"gg":return s.name[0];case"g":return s.symbol;default:return s.name}}return o.eras[0];case":":case"/":return o[n];case"K":var c=t.toString().match(/(\+|\-)(\d{2})(\d{2})/);return c?c[1]+c[2]+c[3]:"";case"zzz":case"zz":case"z":var d=-t.getTimezoneOffset(),f=Math.abs(d),p=r.formatNumber,_=void 0;switch(n){case"zzz":_=p(f/60,"d2",!1,!0)+o[":"]+p(f%60,"d2",!1,!0);break;case"zz":_=p(f/60,"d2",!1,!0);break;case"z":_=p(f/60,"d1",!1,!0)}return(d>=0?"+":"-")+_}return u>1&&n[0]==n[u-1]&&(n[0]=='"'||n[0]=="'")?n.substr(1,u-2):n},r._getEra=function(t,e){if(e.eras){var n=e.eras,i=e.eras.length;if(Be(t)){if(te(n[0]))return n[t.getFullYear()>=0?0:1];if(Be(n[0].start)){for(var o=0;o<i;o++)if(t>=n[o].start)return n[o];return n[i-1]}}else if(te(t)&&t.length>0)for(t=t.toLowerCase(),o=0;o<i;o++){var s=n[o];if(te(s)){if(s.toLowerCase().indexOf(t)==0)return s}else if(s.name&&s.name.toLowerCase().indexOf(t)==0||s.symbol&&s.symbol.toLowerCase().indexOf(t)==0)return s}}return null},r._expandFormat=function(t){var e=W.Globalize.calendar.patterns[t];return e||t},r._zeroPad=function(t,e){var n=t.toFixed(0),i=e-n.length+1;return i>0?Array(i).join("0")+n:n},r._h12=function(t){var e=W.Globalize.calendar,n=t.getHours();return e.am&&e.am[0]&&(n%=12)==0&&(n=12),n},r._shiftDecimal=function(t,e,n){if(e==0||isNaN(t))return t;var i=t.toString();if(i.indexOf("e")>-1){var o=t*Math.pow(10,e);return n!=null&&(o=parseFloat(o.toFixed(n))),o}var s=Array(Math.abs(e)+1).join("0");e<0&&(i=s+i);var l=i.indexOf(".");return l<0&&(l=(i+=".").indexOf(".")),e>0&&(i+=s),l+=e,i=(i=i.replace(".","")).substr(0,l)+"."+i.substr(l),parseFloat(i)},r._CJK="a-z"+"u00c0-u017fu3000-u30ffu4e00-u9faf".replace(/u/g,"\\u")+"u1100-u11ffu3130-u318fua960-ua97fuac00-ud7afud7b0-ud7ff".replace(/u/g,"\\u"),r._numFormatInfo={},r._dateFormatParts={},r}(),xo=typeof window<"u"&&window.wijmo&&window.wijmo._loadedCultures||{};function ou(r){W=r,xo[r.Globalize.name]=r}function rt(r,t){var e=typeof window<"u"?window.wijmo:null,n=e?e.culture:null,i=n?n[r]:null;W[r]=i||t}var sl=function(r,t){for(var e=document.getElementsByTagName("script"),n=0;n<e.length;n++){var i=e[n];if(i.src.indexOf("wijmo.culture.")>-1){i.parentElement.removeChild(i);break}}var o=xo[r]||void 0;if(o){var s=window.wijmo._updateCulture;s?s(o):window.wijmo.culture=o,t&&t(),window.wijmo.Control.invalidateAll()}return o},su=function(r){return new Promise(function(t,e){var n=sl(r);n?t(n):e()})},un=function(){function r(t,e,n){e===void 0&&(e=""),n===void 0&&(n="_"),this._promptChar="_",this._mskArr=[],this._overWrite=!1,this._full=!0,this._inputBnd=this._input.bind(this),this._keydownBnd=this._keydown.bind(this),this._keypressBnd=this._keypress.bind(this),this._cmpstartBnd=this._cmpstart.bind(this),this._cmpendBnd=this._cmpend.bind(this),this.mask=G(e),this.input=t,this.promptChar=G(n,!1),this._connect(!0),(this._evtInput=document.createEvent("HTMLEvents")).initEvent("input",!0,!1)}return Object.defineProperty(r.prototype,"input",{get:function(){return this._tbx},set:function(t){this._connect(!1),this._tbx=t,this._connect(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"mask",{get:function(){return this._msk},set:function(t){t!=this._msk&&(this._msk=G(t,!0),this._parseMask(),this._valueChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"promptChar",{get:function(){return this._promptChar},set:function(t){if(t!=this._promptChar){K((t=G(t,!1)).length==1,"promptChar must be a string with length 1.");for(var e=this._tbx,n=e.value,i="",o=this._mskArr,s=this._promptChar,l=0;l<n.length;l++){var a=o[l],u=n[l];a&&a.literal||u!==s||(u=t),i+=u}e.value=i,this._promptChar=t}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"overwriteMode",{get:function(){return this._overWrite},set:function(t){this._overWrite=M(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maskFull",{get:function(){return this._full},enumerable:!0,configurable:!0}),r.prototype.getMaskRange=function(){return this._mskArr.length?[this._firstPos,this._lastPos]:[0,this._tbx.value.length-1]},r.prototype.getRawValue=function(){var t=this._tbx?this._tbx.value:"";if(!this.mask)return t;for(var e="",n=0;n<this._mskArr.length&&n<t.length;n++)this._mskArr[n].literal||t[n]==this._promptChar||(e+=t[n]);return e},r.prototype.refresh=function(){this._parseMask(),this._valueChanged()},r.prototype._input=function(t){var e=this;this._msk&&!this._composing&&t!=this._evtInput&&(t.preventDefault(),t.stopImmediatePropagation(),setTimeout(function(){e._valueChanged(),e._tbx&&e._tbx.dispatchEvent(e._evtInput)}))},r.prototype._keydown=function(t){if(t.keyCode==C.Back){var e=this._tbx.selectionStart,n=this._tbx.selectionEnd;if(e<=this._firstPos&&n==e){t.preventDefault(),this._backSpace=!1;return}}this._backSpace=t.keyCode==C.Back},r.prototype._keypress=function(t){t.ctrlKey||t.metaKey||t.altKey||this._composing||!this._preventKey(t.charCode)||t.preventDefault()},r.prototype._cmpstart=function(t){this._composing=!0},r.prototype._cmpend=function(t){var e=this;this._composing&&(this._composing=!1,setTimeout(function(){var n=e._tbx;n&&e._valueChanged()&&n.dispatchEvent(e._evtInput)}))},r.prototype._preventKey=function(t){if(t&&this._mskArr.length){var e=this._tbx,n=e.selectionStart,i=String.fromCharCode(t);if(n<this._firstPos&&ne(e,n=this._firstPos),n>=this._mskArr.length)return!0;var o=this._mskArr[n];if(o.literal)this._validatePosition(n);else if(o.wildCard!=i&&!this._isCharValid(o.wildCard,i))return!0}return!1},r.prototype._connect=function(t){var e=this._tbx;e&&(K(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement,"INPUT or TEXTAREA element expected."),t?(this._autoComplete=e.autocomplete,this._spellCheck=e.spellcheck,e.autocomplete="off",e.spellcheck=!1,e.addEventListener("input",this._inputBnd,!0),e.addEventListener("keydown",this._keydownBnd,!0),e.addEventListener("keypress",this._keypressBnd,!0),e.addEventListener("compositionstart",this._cmpstartBnd,!0),e.addEventListener("compositionend",this._cmpendBnd,!0),e.addEventListener("blur",this._cmpendBnd,!0),this._valueChanged()):(e.autocomplete=this._autoComplete,e.spellcheck=this._spellCheck,e.removeEventListener("input",this._inputBnd,!0),e.removeEventListener("keydown",this._keydownBnd,!0),e.removeEventListener("keypress",this._keypressBnd,!0),e.removeEventListener("compositionstart",this._cmpstartBnd,!0),e.removeEventListener("compositionend",this._cmpendBnd,!0),e.removeEventListener("blur",this._cmpendBnd,!0)))},r.prototype._valueChanged=function(){if(!this._tbx||!this._msk)return!1;var t=this._tbx,e=t.selectionStart,n=e>0?t.value[e-1]:"",i=t.value;t.value=this._applyMask(),i==""&&(e=this._firstPos+1);var o=e>0?t.value[e-1]:"";return e>0&&o==this._promptChar&&n!=this.promptChar&&e--,e==i.length&&(e=this._matchEnd),this._validatePosition(e),i!=t.value},r.prototype._applyMask=function(){var t=this._tbx,e=t.value;if(this._full=!0,this._matchEnd=0,!this._msk||!e&&!t.required)return e;if(this._overWrite){var n=t.selectionStart;t==document.activeElement&&t.selectionEnd==n&&e.length>this.mask.length&&(e=e.substr(0,n)+e.substr(n+e.length-this.mask.length))}e=this._handleVagueLiterals(e);for(var i="",o=0,s=this._promptChar,l=0;l<this._mskArr.length;l++){var a=this._mskArr[l],u=a.literal;if(u&&u==e[o]&&o++,a.wildCard){if(u=s,e){for(var h=o;h<e.length;h++)if(this._isCharValid(a.wildCard,e[h])){switch(u=e[h],a.charCase){case">":u=u.toUpperCase();break;case"<":u=u.toLowerCase()}u!=s&&(this._matchEnd=i.length+1);break}o=h+1}u==s&&(this._full=!1)}i+=u}return i},r.prototype._handleVagueLiterals=function(t){if(t.length>this._mskArr.length+1)return t;var e=t.length-this._mskArr.length;if(e!=0&&t.length>1){for(var n=-1,i=this._backSpace,o=this._tbx,s=o==Z()?o.selectionStart:o.value.length,l=Math.max(0,s-e);l<this._mskArr.length;l++)if(this._mskArr[l].vague){n=l;break}if(n>-1)if(e<0){if(i)for(;n>0&&this._mskArr[n-1].literal;)n--;var a=Array(1-e).join(this._promptChar),u=n+e;u>-1&&(t=t.substr(0,u)+a+t.substr(u-e))}else{for(;n>0&&this._mskArr[n-1].literal;)n--;t=t.substr(0,n)+t.substr(n+e)}}return t},r.prototype._isCharValid=function(t,e){if(e==this._promptChar)return!0;switch(t){case"0":return this._isDigit(e);case"9":return this._isDigit(e)||e==" ";case"#":return this._isDigit(e)||e==" "||e=="+"||e=="-";case"L":return this._isLetter(e);case"l":return this._isLetter(e)||e==" ";case"A":return this._isDigit(e)||this._isLetter(e);case"a":return this._isDigit(e)||this._isLetter(e)||e==" ";case"９":return e>="０"&&e<="９";case"Ｊ":case"Ｇ":return!(t=="Ｇ"&&r._X_DBCS_BIG_HIRA.indexOf(e)>-1)&&e>="ぁ"&&e<="ゟ";case"Ｋ":case"Ｎ":return!(t=="Ｎ"&&r._X_DBCS_BIG_KATA.indexOf(e)>-1)&&e>="゠"&&e<="ヿ";case"Ｚ":return!(e>="ｦ"&&e<="ﾟ")&&(e<" "||e>"ÿ");case"H":return e>="!"&&e<="ÿ"||e>="ｦ"&&e<="ﾟ";case"K":case"N":return!(t=="N"&&r._X_SBCS_BIG_KATA.indexOf(e)>-1)&&e>="ｦ"&&e<="ﾟ"}return!1},r.prototype._isDigit=function(t){return t>="0"&&t<="9"},r.prototype._isLetter=function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"},r.prototype._validatePosition=function(t){var e=this._mskArr;if(this._backSpace)for(;t>0&&t<e.length&&e[t-1].literal;)t--;if(t==0||!this._backSpace)for(;t<e.length&&e[t].literal;)t++;Z()==this._tbx&&ne(this._tbx,t),this._backSpace=!1},r.prototype._parseMask=function(){this._mskArr=[],this._firstPos=-1,this._lastPos=-1;for(var t,e=this._msk,n="|",i=0;e&&i<e.length;i++)switch(e[i]){case"0":case"9":case"#":case"A":case"a":case"L":case"l":case"９":case"Ｊ":case"Ｇ":case"Ｋ":case"Ｎ":case"Ｚ":case"K":case"N":case"H":this._firstPos<0&&(this._firstPos=this._mskArr.length),this._lastPos=this._mskArr.length,this._mskArr.push(new wn(e[i],n));break;case".":case",":case":":case"/":case"$":switch(e[i]){case".":case",":t=W.Globalize.numberFormat[e[i]];break;case":":case"/":t=W.Globalize.calendar[e[i]];break;case"$":t=W.Globalize.numberFormat.currency.symbol}for(var o=0;o<t.length;o++)this._mskArr.push(new wn(t[o]));break;case"<":case">":case"|":n=e[i];break;case"\\":i<e.length-1&&i++,this._mskArr.push(new wn(e[i]));break;default:this._mskArr.push(new wn(e[i]))}for(i=0;i<this._mskArr.length;i++){var s=this._mskArr[i];if(s.literal)for(o=0;o<this._mskArr.length;o++){var l=this._mskArr[o];if(l.wildCard&&this._isCharValid(l.wildCard,s.literal)){s.vague=!0;break}}}},r._X_DBCS_BIG_HIRA="ぁぃぅぇぉっゃゅょゎゕゖ",r._X_DBCS_BIG_KATA="ァィゥェォッャュョヮヵヶ",r._X_SBCS_BIG_KATA="ｧｨｩｪｫｬｭｮｯ",r}(),wn=function(t,e){e?(this.wildCard=t,this.charCase=e):this.literal=t},ke;(function(r){r[r.None=0]="None",r[r.Sum=1]="Sum",r[r.Cnt=2]="Cnt",r[r.Avg=3]="Avg",r[r.Max=4]="Max",r[r.Min=5]="Min",r[r.Rng=6]="Rng",r[r.Std=7]="Std",r[r.Var=8]="Var",r[r.StdPop=9]="StdPop",r[r.VarPop=10]="VarPop",r[r.CntAll=11]="CntAll",r[r.First=12]="First",r[r.Last=13]="Last"})(ke||(ke={}));function yr(r,t,e,n){var i=0,o=0,s=0,l=0,a=null,u=null,h=null,c=e?new nt(e):null;if((r=pe(r,ke))==ke.CntAll)return t.length;for(var d=0;d<t.length;d++){var f=t[d];if(c&&(f=c.getValue(f)),f!=null){if(r==ke.First)return f;i++,(a==null||f<a)&&(a=f),(u==null||f>u)&&(u=f),h=f,f&&typeof f=="string"&&f.length>1&&f[0]==="="&&f[1]!=="="&&n&&typeof n.evaluate=="function"&&(f=n.evaluate(f)),_e(f)&&!isNaN(f)?(o++,s+=f,l+=f*f):st(f)&&(o++,f==1&&(s++,l++))}}var p=o==0?0:s/o;switch(r){case ke.Avg:return p;case ke.Cnt:return i;case ke.Max:return u;case ke.Min:return a;case ke.Rng:return u-a;case ke.Sum:return s;case ke.VarPop:return o<=1?0:l/o-p*p;case ke.StdPop:return o<=1?0:Math.sqrt(l/o-p*p);case ke.Var:return o<=1?0:(l/o-p*p)*o/(o-1);case ke.Std:return o<=1?0:Math.sqrt((l/o-p*p)*o/(o-1));case ke.Last:return h;case ke.First:return null}throw"Invalid aggregate type."}function lu(r,t){for(var e in t)t.hasOwnProperty(e)&&(r[e]=t[e]);return r}var Rn=function(r){ti(t,r);function t(){var e=this;return Qn?e.length=0:e=r.call(this)||this,e}return t}(Array),Qn=!0;try{lu(Rn.prototype,Array.prototype),Qn=Rn.prototype.length===Array.prototype.length}catch{Qn=!1}var jr=typeof window<"u"?window.Symbol:null;!Qn&&jr&&jr.species&&Object.defineProperty(Rn,jr.species,{get:function(){return Array},enumerable:!1,configurable:!1});var At=function(r){ti(t,r);function t(e){var n=r.call(this)||this;if(n._updating=0,n.collectionChanged=new A,e){e=vt(e),n._updating++;for(var i=0;i<e.length;i++)n.push(e[i]);n._updating--}return n}return t.prototype.push=function(){for(var e=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return n.forEach(function(o){r.prototype.push.call(e,o),e._raiseCollectionChanged(We.Add,o,e.length-1)}),this.length},t.prototype.shift=function(){var e=r.prototype.shift.call(this);return this._raiseCollectionChanged(We.Remove,e,0),e},t.prototype.unshift=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=r.prototype.unshift.apply(this,e);return e.length==1?this._raiseCollectionChanged(We.Add,e[0],0):this._raiseCollectionChanged(),i},t.prototype.pop=function(){var e=r.prototype.pop.call(this);return this._raiseCollectionChanged(We.Remove,e,this.length),e},t.prototype.splice=function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s,l=We,a=this._raiseCollectionChanged.bind(this);return n&&i.length?(s=r.prototype.splice.apply(this,[e,n].concat(i)),n==1&&i.length==1?a(l.Change,i[0],e):a()):i.length?(s=r.prototype.splice.apply(this,[e,0].concat(i)),i.length==1?a(l.Add,i[0],e):a()):(s=r.prototype.splice.call(this,e,n),n==1?a(l.Remove,s[0],e):a()),s},t.prototype.slice=function(e,n){return r.prototype.slice.call(this,e,n)},t.prototype.indexOf=function(e,n){return r.prototype.indexOf.call(this,e,n)},t.prototype.sort=function(e){var n=r.prototype.sort.call(this,e);return this._raiseCollectionChanged(),n},t.prototype.insert=function(e,n){this.splice(e,0,n)},t.prototype.remove=function(e){var n=this.indexOf(e);return n>-1&&this.removeAt(n),n>-1},t.prototype.removeAt=function(e){this.splice(e,1)},t.prototype.setAt=function(e,n){e>=this.length&&(this.length=e+1),this.splice(e,1,n)},t.prototype.clear=function(){this.length&&this.splice(0,this.length)},t.prototype.beginUpdate=function(){this._updating++},t.prototype.endUpdate=function(e){e===void 0&&(e=!1),this._updating--,this._updating<=0&&!e&&this._raiseCollectionChanged()},Object.defineProperty(t.prototype,"isUpdating",{get:function(){return this._updating>0},enumerable:!0,configurable:!0}),t.prototype.deferUpdate=function(e){try{this.beginUpdate(),e()}finally{this.endUpdate()}},t.prototype.implementsInterface=function(e){return e=="INotifyCollectionChanged"},t.prototype.onCollectionChanged=function(e){e===void 0&&(e=Bt.reset),this.isUpdating||this.collectionChanged.raise(this,e)},t.prototype._raiseCollectionChanged=function(e,n,i){if(e===void 0&&(e=We.Reset),!this.isUpdating){var o=new Bt(e,n,i);this.onCollectionChanged(o)}},t}(Rn),oi;(function(r){r[r.Natural=0]="Natural",r[r.First=1]="First",r[r.Last=2]="Last"})(oi||(oi={}));var Br=2,Zt=function(){function r(t,e){var n=this;this._srcRaw=null,this._src=null,this._ncc=null,this._view=null,this._pgView=null,this._groups=null,this._fullGroups=null,this._digest="",this._idx=-1,this._filter=null,this._filters=new At,this._srtDsc=new At,this._grpDesc=new At,this._newItem=null,this._edtItem=null,this._edtClone=null,this._committing=!1,this._canceling=!1,this._pendingRefresh=!1,this._pendingRemove=!1,this._pgSz=0,this._pgIdx=0,this._updating=0,this._stableSort=!1,this._srtNulls=oi.Last,this._canFilter=!0,this._canGroup=!0,this._canSort=!0,this._canAddNew=!0,this._canCancelEdit=!0,this._canRemove=!0,this._canChangePage=!0,this._refreshOnEdit=!0,this._trackChanges=!1,this._chgAdded=new At,this._chgRemoved=new At,this._chgEdited=new At,this._orgVals=window.Map?new Map:null,this._srtCvt=null,this._srtCmp=null,this._getError=null,this._keepCurrentItem=null,this._initializing=!1,this.collectionChanged=new A,this.sourceCollectionChanging=new A,this.sourceCollectionChanged=new A,this.currentChanged=new A,this.currentChanging=new A,this.pageChanged=new A,this.pageChanging=new A,this._srtDsc.collectionChanged.addHandler(function(){n._srtDsc.forEach(function(i){K(i instanceof Hi,"sortDescriptions array must contain SortDescription objects.")}),n.canSort&&n._commitAndRefresh()}),this._grpDesc.collectionChanged.addHandler(function(){n._grpDesc.forEach(function(i){K(i instanceof vo,"groupDescriptions array must contain GroupDescription objects.")}),n.canGroup&&n._commitAndRefresh()}),this._filters.collectionChanged.addHandler(function(){n._filters.forEach(function(i){K(oe(i),"filters array must contain IPredicate functions.")}),n.canFilter&&n._commitAndRefresh()}),this.sourceCollection=t||new At,e&&(this._initializing=!0,this.deferUpdate(function(){Qt(n,e)}),this._initializing=!1),this._keepCurrentItem==null&&(this._keepCurrentItem=!0)}return r.prototype._copy=function(t,e){switch(t){case"sortDescriptions":var n=this.sortDescriptions;return n.deferUpdate(function(){n.clear(),vt(e).forEach(function(o){te(o)?o=new Hi(o,!0):o instanceof Hi||!o.property||(o=new Hi(o.property,o.ascending)),n.push(o)})}),!0;case"groupDescriptions":var i=this.groupDescriptions;return i.deferUpdate(function(){i.clear(),e.forEach(function(o){te(o)&&(o=new Gr(o)),i.push(o)})}),!0;case"currentItem":return this.currentItem=e,!0}return!1},Object.defineProperty(r.prototype,"calculatedFields",{get:function(){return this._calcFields},set:function(t){if(t&&!window.Proxy&&(console.warn("** Calculated fields require Proxy (see https://www.npmjs.com/package/proxy-polyfill)."),t=null),t!=this._calcFields){this._calcFields=t;var e=this._srcRaw;this._srcRaw=null,this.sourceCollection=e}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"newItemCreator",{get:function(){return this._itemCreator},set:function(t){this._itemCreator=Le(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"sortConverter",{get:function(){return this._srtCvt},set:function(t){t!=this._srtCvt&&(this._srtCvt=Le(t,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"sortComparer",{get:function(){return this._srtCmp},set:function(t){t!=this._srtCmp&&(this._srtCmp=Le(t,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"useStableSort",{get:function(){return this._stableSort},set:function(t){t!=this._stableSort&&(this._stableSort=M(t),this.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"sortNulls",{get:function(){return this._srtNulls},set:function(t){(t=pe(t,oi))!=this._srtNulls&&(this._srtNulls=t,this.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"sortNullsFirst",{get:function(){return this.sortNulls!=oi.Last},set:function(t){gr("sortNullsFirst","sortNulls"),this.sortNulls=M(t)?oi.First:oi.Last},enumerable:!0,configurable:!0}),r.prototype.getAggregate=function(t,e,n){return yr(t,n?this._pgView:this._view,e)},Object.defineProperty(r.prototype,"trackChanges",{get:function(){return this._trackChanges},set:function(t){this._trackChanges=M(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"refreshOnEdit",{get:function(){return this._refreshOnEdit},set:function(t){this._refreshOnEdit=M(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"itemsAdded",{get:function(){return this._chgAdded},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"itemsRemoved",{get:function(){return this._chgRemoved},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"itemsEdited",{get:function(){return this._chgEdited},enumerable:!0,configurable:!0}),r.prototype.clearChanges=function(){this._chgAdded.clear(),this._chgRemoved.clear(),this._chgEdited.clear(),this._orgVals&&this._orgVals.clear()},r.prototype.implementsInterface=function(t){switch(t){case"ICollectionView":case"IEditableCollectionView":case"IPagedCollectionView":case"INotifyCollectionChanged":return!0}return!1},Object.defineProperty(r.prototype,"getError",{get:function(){return this._getError},set:function(t){this._getError!=t&&(this._getError=Le(t),this._raiseCollectionChanged())},enumerable:!0,configurable:!0}),r.prototype.onCollectionChanged=function(t,e){t===void 0&&(t=Bt.reset),t.action!=We.Change||this._committing||this._canceling||t.item==this.currentEditItem||t.item==this.currentAddItem||this._trackItemChanged(t.item,e),this._updating||this.collectionChanged.raise(this,t)},r.prototype._raiseCollectionChanged=function(t,e,n){t===void 0&&(t=We.Reset);var i=new Bt(t,e,n);this.onCollectionChanged(i)},r.prototype.onSourceCollectionChanging=function(t){return this.sourceCollectionChanging.raise(this,t),!t.cancel},r.prototype.onSourceCollectionChanged=function(t){this.sourceCollectionChanged.raise(this,t)},Object.defineProperty(r.prototype,"canFilter",{get:function(){return this._canFilter},set:function(t){this._canFilter=M(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"canGroup",{get:function(){return this._canGroup},set:function(t){this._canGroup=M(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"canSort",{get:function(){return this._canSort},set:function(t){this._canSort=M(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"currentItem",{get:function(){return this._pgView&&this._idx>-1&&this._idx<this._pgView.length?this._pgView[this._idx]:null},set:function(t){this.moveCurrentTo(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"currentPosition",{get:function(){return this._idx},set:function(t){this.moveCurrentToPosition(V(t))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"filter",{get:function(){return this._filter},set:function(t){this._filter!=t&&(this._filter=Le(t),this.canFilter&&this.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"filters",{get:function(){return this._filters},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"groupDescriptions",{get:function(){return this._grpDesc},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"groups",{get:function(){return this._groups},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isEmpty",{get:function(){return!this._pgView||!this._pgView.length},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"sortDescriptions",{get:function(){return this._srtDsc},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"sourceCollection",{get:function(){return this._src},set:function(t){if(t!=this._srcRaw){if(!this.onSourceCollectionChanging(new He))return;var e=this.currentPosition;this.commitEdit(),this._ncc!=null&&this._ncc.collectionChanged.removeHandler(this._sourceChanged),this._srcRaw=t,this._src=vt(t,!1),this._calcFields&&(this._src=$s(this._src,this._calcFields)),this._ncc=Ft(this._src,"INotifyCollectionChanged"),this._ncc&&this._ncc.collectionChanged.addHandler(this._sourceChanged,this),this.clearChanges(),this.refresh(),this.moveCurrentToFirst(),this.onSourceCollectionChanged(),this.currentPosition<0&&e>-1&&this.onCurrentChanged()}},enumerable:!0,configurable:!0}),r.prototype._sourceChanged=function(t,e){this._updating<=0&&this.refresh()},r.prototype.contains=function(t){return this._pgView.indexOf(t)>-1},r.prototype.moveCurrentTo=function(t){return this.moveCurrentToPosition(this._pgView.indexOf(t))},r.prototype.moveCurrentToFirst=function(){return this.moveCurrentToPosition(0)},r.prototype.moveCurrentToLast=function(){return this.moveCurrentToPosition(this._pgView.length-1)},r.prototype.moveCurrentToPrevious=function(){return this._idx>0&&this.moveCurrentToPosition(this._idx-1)},r.prototype.moveCurrentToNext=function(){return this.moveCurrentToPosition(this._idx+1)},r.prototype.moveCurrentToPosition=function(t){if(t>=-1&&t<this._pgView.length&&t!=this._idx){var e=new He;if(this.onCurrentChanging(e)){var n=this._pgView[t],i=Js(n),o=this._edtItem,s=this._newItem;o&&o!=n&&o!=i?this.commitEdit():s&&s!=n&&s!=i&&this.commitNew(),this._idx=t,this.onCurrentChanged()}}return this._idx==t},r.prototype.refresh=function(){if(this._newItem||this._edtItem||this._updating>0)this._pendingRefresh=!0;else{var t=this.currentItem;this._performRefresh(),this.onCollectionChanged(),t==this.currentItem||this._initializing||this.onCurrentChanged()}},r.prototype._commitAndRefresh=function(){this.currentEditItem||this.currentAddItem?(this._pendingRefresh=!0,this.commitEdit()):this.refresh()},r.prototype._performRefresh=function(){if(this._updating>0)this._pendingRefresh=!0;else{this._pendingRefresh=!1,this._pendingRemove=!1;var t=this.currentItem;this._view=this._src?this._performFilter(this._src):[],this.canSort&&this._srtDsc.length>0&&(this._view==this._src&&(this._view=this._src.slice()),this._performSort(this._view)),this._groups=this.canGroup?this._createGroups(this._view):null,this._fullGroups=this._groups,this._groups&&(this._view=this._mergeGroupItems(this._groups)),this._pgIdx=ye(this._pgIdx,0,this.pageCount-1),this._pgView=this._getPageView(),this._groups&&this.pageCount>1&&(this._groups=this._createGroups(this._pgView),this._mergeGroupItems(this._groups));var e=this._keepCurrentItem&&t!=null?this._pgView.indexOf(t):-1;e<0&&(e=Math.min(this._idx,this._pgView.length-1)),this._idx=e,this._digest=this._getGroupsDigest(this.groups)}},r.prototype._performSort=function(t){if(this._stableSort){var e=t.map(function(o,s){return{item:o,index:s}}),n=this._compareItems();e.sort(function(o,s){var l=n(o.item,s.item);return l==0?o.index-s.index:l});for(var i=0;i<t.length;i++)t[i]=e[i].item}else t.sort(this._compareItems())},r.prototype._compareItems=function(){var t=this,e=this._srtDsc,n=this._srtCvt,i=this._srtCmp,o=r._collator,s=!0,l=0;return function(a,u){for(var h=0;h<e.length;h++){var c=e[h],d=c._bnd.getValue(a),f=c._bnd.getValue(u);if(n&&(d=n(c,a,d,s),f=n(c,u,f,!1),s=!1),i&&(l=i(d,f))!=null){if(l!=0)return c.ascending?+l:-l}else{if(d!=d&&(d=null),f!=f&&(f=null),d!==f&&(d==null||f==null))switch(t._srtNulls){case oi.First:return d==null?-1:1;case oi.Last:return d==null?1:-1;default:return l=d==null?-1:1,c.ascending?+l:-l}if(typeof d=="string"&&typeof f=="string"){if(o){if((l=o.compare(d,f))!=0)return c.ascending?+l:-l;continue}var p=d.toLowerCase(),_=f.toLowerCase();p!=_&&(d=p,f=_)}if((l=d<f?-1:d>f?1:0)!=0)return c.ascending?+l:-l}}return 0}},r.prototype._performFilter=function(t){return this.canFilter&&this._filter||this._filters.length?t.filter(this._filterItem,this):t},r.prototype._filterItem=function(t){for(var e=!this.canFilter||!this._filter||this._filter(t),n=0;n<this._filters.length&&e;n++)e=this._filters[n](t);return e},r.prototype.onCurrentChanged=function(t){this.currentChanged.raise(this,t)},r.prototype.onCurrentChanging=function(t){return this.currentChanging.raise(this,t),!t.cancel},Object.defineProperty(r.prototype,"items",{get:function(){return this._pgView},enumerable:!0,configurable:!0}),r.prototype.beginUpdate=function(){this._updating++},r.prototype.endUpdate=function(t){t===void 0&&(t=!0),this._updating--,t&&(this._pendingRefresh=!0),this._updating<=0&&(this._pendingRefresh&&this.refresh(),this._pendingRemove&&(this._pendingRemove=!1,this._raiseCollectionChanged()))},Object.defineProperty(r.prototype,"isUpdating",{get:function(){return this._updating>0},enumerable:!0,configurable:!0}),r.prototype.deferUpdate=function(t,e){e===void 0&&(e=!0);try{this.beginUpdate(),t()}finally{this.endUpdate(e)}},Object.defineProperty(r.prototype,"canAddNew",{get:function(){return this._canAddNew},set:function(t){t!=this._canAddNew&&(this._canAddNew=M(t),this._raiseCollectionChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"canCancelEdit",{get:function(){return this._canCancelEdit},set:function(t){this._canCancelEdit=M(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"canRemove",{get:function(){return this._canRemove},set:function(t){this._canRemove=M(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"currentAddItem",{get:function(){return this._newItem},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"currentEditItem",{get:function(){return this._edtItem},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isAddingNew",{get:function(){return this._newItem!=null},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isEditingItem",{get:function(){return this._edtItem!=null},enumerable:!0,configurable:!0}),r.prototype.editItem=function(t){t!=this._edtItem&&this.moveCurrentTo(t)&&(this.commitEdit(),this._edtItem=t,this._edtClone=this._extend({},this._edtItem))},r.prototype.commitEdit=function(){var t=this._edtItem,e=this._edtClone;if(t!=null){this._committing=!0;var n=this._getChangedFields(t,e),i=this._pendingRefresh;this._edtItem=null,this._edtClone=null;var o=this._pgView.indexOf(t),s=this._digest;if(this._needRefresh(n)&&this._refreshOnEdit&&this._performRefresh(),this._trackItemChanged(t,e),this._pgView.indexOf(t)!=o||s!=this._digest||i?this._raiseCollectionChanged():this._raiseCollectionChanged(We.Change,t,o),this.commitNew(),this._committing=!1,this.sourceCollection instanceof At){this._updating++;var l=new Bt(We.Change,t);this.sourceCollection.onCollectionChanged(l),this._updating--}}},r.prototype.cancelEdit=function(){var t=this._edtItem;if(t!=null){if(this._edtItem=null,!this.canCancelEdit)return;var e=this._src.indexOf(t);e>=0&&this._edtClone&&(this._extend(this._src[e],this._edtClone),this._edtClone=null,this._canceling=!0,this._raiseCollectionChanged(We.Change,t,e),this._canceling=!1,this._pendingRefresh&&this._refreshOnEdit&&(this._performRefresh(),this._raiseCollectionChanged()))}},r.prototype.addNew=function(t,e){if(e===void 0&&(e=!1),this.commitEdit(),!this.canAddNew)return null;var n=this.sourceCollection;if(t==null&&(t=this.newItemCreator?this.newItemCreator():n&&n.length?new n[0].constructor:{}),t!=null){if(this._updating++,n.push(t),this._updating--,t=n[n.length-1],this._newItem=t,this._pgView!=this._src&&this._pgView.push(t),this.groups&&this.groups.length){var i=this.groups[this.groups.length-1];for(i.items.push(t);i.groups&&i.groups.length;)(i=i.groups[i.groups.length-1]).items.push(t)}this._raiseCollectionChanged(We.Add,t,this._pgView.length-1),this.moveCurrentTo(t),e&&this.commitNew()}return this._newItem},r.prototype.commitNew=function(){var t=this._newItem;if(t!=null){this._newItem=null;var e=this._pgView.indexOf(t),n=this._digest;if(this._refreshOnEdit&&this._performRefresh(),this._trackChanges){var i=this._chgEdited.indexOf(t);i>-1&&this._chgEdited.removeAt(i),this._chgAdded.indexOf(t)<0&&this._chgAdded.push(t)}this._pgView.indexOf(t)!=e||n!=this._digest||this.calculatedFields?this._raiseCollectionChanged():this._raiseCollectionChanged(We.Change,t,e)}},r.prototype.cancelNew=function(){var t=this._newItem;t!=null&&this.remove(t)},r.prototype.remove=function(t){var e=t==this._newItem;if(e&&(this._newItem=null),t==this._edtItem&&this.cancelEdit(),this.canRemove){var n=this._src.indexOf(t);if(n>-1){var i=this._view.indexOf(t)<0,o=this.currentItem;this._updating++,this._src.splice(n,1),this._updating--;var s=this._digest;if(this._refreshOnEdit)this._performRefresh();else{this._updating>0&&(this._pendingRemove=!0);var l=this._pgView.indexOf(t);l>=0&&this._pgView.splice(l,1)}if(this._trackChanges){var a=this._chgAdded.indexOf(t);a>-1&&this._chgAdded.removeAt(a);var u=this._chgEdited.indexOf(t);u>-1&&this._chgEdited.removeAt(u),this._chgRemoved.indexOf(t)<0&&!e&&a<0&&this._chgRemoved.push(t)}var h=this.sortDescriptions.length>0,c=this.pageSize>0&&this._pgIdx>-1;h||c||s!=this._getGroupsDigest(this.groups)?this._raiseCollectionChanged():i||this._raiseCollectionChanged(We.Remove,t,n),this.currentItem!==o&&this.onCurrentChanged()}}},r.prototype.removeAt=function(t){t=Fe(t),this.remove(this._pgView[t])},r.prototype._trackItemChanged=function(t,e){if(this._trackChanges){var n=this.sourceCollection;if(n&&n.indexOf(t)>-1){var i=this._orgVals,o=i?i.get(t):null;e&&!o&&(i.set(t,e),o=e);var s=this._chgEdited.indexOf(t),l=We.Change;if(o&&this._sameContent(t,o)){s>-1&&this._chgEdited.removeAt(s);return}if(s<0&&this._chgAdded.indexOf(t)<0)this._chgEdited.push(t);else if(s>-1){var a=new Bt(l,t,s);this._chgEdited.onCollectionChanged(a)}else(s=this._chgAdded.indexOf(t))>-1&&(a=new Bt(l,t,s),this._chgAdded.onCollectionChanged(a))}}},r.prototype._extend=function(t,e,n){n===void 0&&(n=Br);for(var i in e)try{var o=e[i];n>0&&et(o)?o.constructor.name==="Map"?t[i]=o:(t[i]={},this._extend(t[i],o,n-1)):t[i]=o}catch{}return t},r.prototype._getChangedFields=function(t,e,n){n===void 0&&(n=Br),K(e!=null&&t!=null,"Two objects expected.");var i={};for(var o in e)try{this._sameValue(t[o],e[o],n)||(i[o]=!0)}catch{}for(var o in t)try{i[o]||this._sameValue(t[o],e[o],n)||(i[o]=!0)}catch{}var s=Object.keys(i);return s.length?s:null},r.prototype._sameValue=function(t,e,n){return n===void 0&&(n=Br),!!(t===e||F.equals(t,e)||Number.isNaN(t)&&Number.isNaN(e))||!(!et(t)||!et(e))&&(!(n>0)||this._getChangedFields(t,e,n-1)==null)},r.prototype._sameContent=function(t,e){return this._getChangedFields(t,e)==null},r.prototype._needRefresh=function(t){if(this._pendingRefresh)return!0;if(!t)return!1;if(this._filter)return!0;for(var e=0;e<this._srtDsc.length;e++){var n=this._getBindingRoot(this._srtDsc[e].property);if(t.indexOf(n)>-1)return!0}for(e=0;e<this._grpDesc.length;e++){var i=this._grpDesc[e];if(!(i instanceof Gr)||(n=this._getBindingRoot(i.propertyName),t.indexOf(n)>-1))return!0}return!1},r.prototype._getBindingRoot=function(t){var e=t.indexOf(".");return e>-1?t.substr(0,e):t},Object.defineProperty(r.prototype,"canChangePage",{get:function(){return this._canChangePage},set:function(t){this._canChangePage=M(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isPageChanging",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"itemCount",{get:function(){return this._pgView.length},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pageIndex",{get:function(){return this._pgIdx},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pageSize",{get:function(){return this._pgSz},set:function(t){t!=this._pgSz&&(this._pgSz=Fe(t),this.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"totalItemCount",{get:function(){return this._view.length},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pageCount",{get:function(){return this.pageSize?Math.ceil(this.totalItemCount/this.pageSize):1},enumerable:!0,configurable:!0}),r.prototype.moveToFirstPage=function(){return this.moveToPage(0)},r.prototype.moveToLastPage=function(){return this.moveToPage(this.pageCount-1)},r.prototype.moveToPreviousPage=function(){return this.moveToPage(this.pageIndex-1)},r.prototype.moveToNextPage=function(){return this.moveToPage(this.pageIndex+1)},r.prototype.moveToPage=function(t){var e=ye(t,0,this.pageCount-1);if(e!=this._pgIdx){if(!this.canChangePage)return!1;var n=new Ls(e);if(this.onPageChanging(n)&&this.onCurrentChanging(n)){this.commitEdit(),this.commitNew();var i=this.currentItem;this._pgIdx=e,this._pgView=this._getPageView(),this._idx=0,this.groupDescriptions&&this.groupDescriptions.length!=0?this.refresh():(this.onCollectionChanged(),i!=this.currentItem&&this.onCurrentChanged()),this.onPageChanged()}}return this._pgIdx==t},r.prototype.onPageChanged=function(t){this.pageChanged.raise(this,t)},r.prototype.onPageChanging=function(t){return this.pageChanging.raise(this,t),!t.cancel},r.prototype._getFullGroup=function(t){var e=this._getGroupByPath(this._fullGroups,t.level,t._path);return e!=null&&(t=e),t},r.prototype._getGroupByPath=function(t,e,n){if(t)for(var i=0;i<t.length;i++){var o=t[i];if(o.level==e&&o._path==n||o.level<e&&n.indexOf(o._path)==0&&(o=this._getGroupByPath(o.groups,e,n))!=null)return o}return null},r.prototype._getPageView=function(){if(this.pageSize<=0||this._pgIdx<0)return this._view;var t=this._pgSz*this._pgIdx,e=Math.min(t+this._pgSz,this._view.length);return this._view.slice(t,e)},r.prototype._createGroups=function(t){var e=this;if(!this._grpDesc||!this._grpDesc.length)return null;var n=[],i={},o=null;return t.forEach(function(s){for(var l=n,a=e._grpDesc.length,u="",h=0;h<a;h++){var c=e._grpDesc[h],d=c.groupNameFromItem(s,h),f=h==a-1;!(o=i[u])&&In(d)&&(o={},i[u]=o);var p=e._getGroup(c,l,o,d,h,f);u+="/"+d,p._path=u,f&&p.items.push(s),l=p.groups}}),n},r.prototype._getGroupsDigest=function(t){for(var e="",n=0;t!=null&&n<t.length;n++){var i=t[n];e+="{"+i.name+":"+(i.items?i.items.length:"*"),i.groups.length>0&&(e+=",",e+=this._getGroupsDigest(i.groups)),e+="}"}return e},r.prototype._mergeGroupItems=function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n];if(!i._isBottomLevel)for(var o=this._mergeGroupItems(i.groups),s=0,l=o.length;s<l;s++)i._items.push(o[s]);for(s=0,l=i._items.length;s<l;s++)e.push(i._items[s])}return e},r.prototype._getGroup=function(t,e,n,i,o,s){var l;if(n&&In(i)){if(l=n[i])return l}else for(var a=0;a<e.length;a++)if(t.namesMatch(e[a].name,i))return e[a];var u=new Tt(t,i,o,s);return e.push(u),n&&(n[i]=u),u},r._collator=typeof window<"u"&&window.Intl&&Intl.Collator?new Intl.Collator:null,r}(),Tt=function(){function r(t,e,n,i){this._gd=t,this._name=e,this._level=n,this._isBottomLevel=i,this._groups=[],this._items=[]}return Object.defineProperty(r.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"level",{get:function(){return this._level},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isBottomLevel",{get:function(){return this._isBottomLevel},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"groups",{get:function(){return this._groups},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"groupDescription",{get:function(){return this._gd},enumerable:!0,configurable:!0}),r.prototype.getAggregate=function(t,e,n,i){var o=Ft(n,Zt);return yr(t,(o?o._getFullGroup(this):this).items,e,i)},r.prototype._clone=function(){var t=new r(this.groupDescription,this.name,this.level,this.isBottomLevel);if(t._path=this._path,this.groups.length)for(var e=0;e<this.groups.length;e++)t.groups.push(this.groups[e]);if(this.items.length)for(e=0;e<this.items.length;e++)t.items.push(this.items[e]);return t},r}(),ll=function(t){this._id=t},Eo=typeof window<"u"&&window["wj-control-is-element"]?HTMLElement:Object,$r=!1;try{var rs=function(){};rs.prototype=Array.prototype,$r=rs.prototype!==Array.prototype}catch{$r=!0}var au=$r||Eo!==Object,al=function(r){ti(t,r);function t(){var e=this;return au&&(e=r.call(this)||this),e}return t}(Eo),H=function(r){ti(t,r);function t(e,n,i){i===void 0&&(i=!1);var o=r.call(this)||this;o.workingAs="PureJs",o.disposed=!1,o._orgAttributes=[],o._listeners=[],o._pristine=!0,o._focus=!1,o._updating=0,o._fullUpdate=!1,o._listenResizeEvents=!0,o.gotFocus=new A,o.lostFocus=new A,o.invalidInput=new A,o.refreshing=new A,o.refreshed=new A,o._updateWme(),K(t.getControl(e)==null,"Element is already hosting a control.");var s=ci(e);K(s!=null,"Cannot find the host element."),o._orgTabIndex=s.hasAttribute("tabindex")?s.tabIndex:0;for(var l=0;l<s.attributes.length;l++){var a=s.attributes[l];o._orgAttributes.push({name:a.name,value:a.textContent})}o._orgInner=s.innerHTML,o._orgTag=s.tagName,o._orgAtts=s.attributes,s.tagName!="INPUT"&&s.tagName!="SELECT"||(s=o._replaceWithDiv(s)),o._e=s,s[t._CTRL_KEY]=o;var u=o.addEventListener.bind(o);if(i==1){o._szCtl=new wt(s.offsetWidth,s.offsetHeight);var h=window.ResizeObserver,c=null;h&&(c=o._szObserver=new h(function(p){return o._resizeObserverCallback(p)})),c?c.observe(s):u(window,"resize",o._handleResize.bind(o))}var d=o._handleFocusBlur.bind(o);u(s,"focus",d,!0),u(s,"blur",d,!0);var f=o._handleDisabled.bind(o);return u(s,"mousedown",f,!0),u(s,"mouseup",f,!0),u(s,"click",f,!0),u(s,"dblclick",f,!0),u(s,"wheel",f,Jn(!0,!0)),u(s,"keydown",function(p){o.isDisabled&&p.keyCode!=C.Tab&&p.preventDefault()}),t._ctlCnt==0&&os(!0),t._ctlCnt++,o}return t.prototype.getTemplate=function(){for(var e=Object.getPrototypeOf(this);e;e=Object.getPrototypeOf(e)){var n=e.constructor.controlTemplate;if(n)return n}return null},t.prototype.applyTemplate=function(e,n,i,o){var s=this,l=this._e;e&&be(l,e);var a=null;n&&(a=Oe(n,l));for(var u=l.querySelectorAll("a."+ce.btn),h=0;h<u.length;h++){var c=u[h];S(c,"role","button",!0),S(c,"href","",!0),S(c,"draggable",!1,!0)}var d=l.querySelectorAll("button");for(h=0;h<d.length;h++)S(d[h],"type","button",!0);var f=l.querySelectorAll("input"),p=f.length==1?f[0]:null;if(p){var _=t._rxInputAtts;this._copyAttributes(p,l.attributes,_),this._copyAttributes(p,this._orgAtts,_)}if(p&&l.id){for(var v=l;v.parentElement;)v=v.parentElement;var b=v.querySelector('label[for="'+l.id+'"]');if(b instanceof HTMLLabelElement){var m=pr(l.id+"_input");p.id=m,b.htmlFor=m}}if(p){var w=p.value,g=!0,y=!1,I=document.createEvent("HTMLEvents");I.initEvent("change",!0,!1),this.gotFocus.addHandler(function(){g=!1,y=!0,w=p.value}),this.addEventListener(l,"focusin",function(T){g&&(y=!0,g=!1,w=p.value)}),this.addEventListener(p,"input",function(){s._pristine=!1,setTimeout(function(){w=p.value})}),this.addEventListener(p,"change",function(T){T.isTrusted&&(w=p.value)});var x=function(){s._containsFocus()||(g=!0,s._pristine&&(s._pristine=!1,s._updateState()),y&&w!=p.value&&(w=p.value,p.dispatchEvent(I)),y=!1)};this.addEventListener(l,"blur",function(){x()}),this.lostFocus.addHandler(function(){x()})}if(p?l.tabIndex=-1:l.getAttribute("tabindex")||(l.tabIndex=0),this._updateState(),i)for(var R in i){var k=i[R];if(this[R]=a.querySelector('[wj-part="'+k+'"]'),this[R]==null&&a.getAttribute("wj-part")==k&&(this[R]=a),this[R]==null)throw'Missing template part: "'+k+'"';if(k==o){var D="name",E=l.attributes[D];E&&E.value&&this[R].setAttribute(D,E.value),D="accesskey",(E=l.attributes[D])&&E.value&&(this[R].setAttribute(D,E.value),l.removeAttribute(D))}}return a},t.prototype.dispose=function(){if(this._e){this.disposed=!0;for(var e=this._e.querySelectorAll("."+ge.hostElement),n=0;n<e.length;n++){var i=t.getControl(e[n]);i&&i.dispose()}this._toInv&&(clearTimeout(this._toInv),this._toInv=null),this._toFocus&&(clearTimeout(this._toFocus),this._toFocus=null),this.focusService&&(this.focusService.dispose(),this.focusService=null);var o=this._szObserver;o&&o.disconnect(),this.removeEventListener();for(var s in this)s.length>2&&s.indexOf("on")==0&&(a=this[s[2].toLowerCase()+s.substr(3)])instanceof A&&a.removeAllHandlers();var l=this.collectionView;if(l instanceof Zt)for(var s in l){var a;(a=l[s])instanceof A&&a.removeHandler(null,this)}if(this._e.parentNode){for(;this._e.attributes.length>0;)this._e.removeAttribute(this._e.attributes[0].name);for(var u=0,h=this._orgAttributes;u<h.length;u++){var c=h[u];this._e.setAttribute(c.name,c.value)}this._e.innerHTML=this._orgInner}this._e[t._CTRL_KEY]=null,this._e=this._orgTag=this._szObserver=null,t._ctlCnt--,t._ctlCnt==0&&os(!1),t._ctlInvalidInput===this&&(t._toInvalidInput&&(clearTimeout(t._toInvalidInput),t._toInvalidInput=null),t._toClearCtlInvalid&&(clearTimeout(t._toClearCtlInvalid),t._toClearCtlInvalid=null),t._ctlInvalidInput=null)}},t.getControl=function(e){var n=ci(e);return n?Ve(n[t._CTRL_KEY],t,!0):null},Object.defineProperty(t.prototype,"hostElement",{get:function(){return this._e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightToLeft",{get:function(){return this._rtlDir==null&&(this._rtlDir=!!this._e&&getComputedStyle(this._e).direction=="rtl"),this._rtlDir},enumerable:!0,configurable:!0}),t.prototype.focus=function(){var e=this._e;e&&e.offsetHeight&&(this.isDisabled||!(e.tabIndex>=0)&&Ji(e,0)||e.focus())},t.prototype.containsFocus=function(){return this._containsFocusImpl(Z())},t.prototype._containsFocus=function(){return this.focusService||(this.focusService=new Ys),this._containsFocusImpl(tl(this.focusService.activeElement))},t.prototype._containsFocusImpl=function(e){return J(this._e,e,!0)},t.prototype.invalidate=function(e){var n=this;e===void 0&&(e=!0),this._rtlDir=null,this._fullUpdate=this._fullUpdate||e,this._toInv&&(clearTimeout(this._toInv),this._toInv=null),this.isUpdating||this.disposed||(this._toInv=setTimeout(function(){n.refresh(n._fullUpdate),n._toInv=null},t._REFRESH_INTERVAL))},t.prototype.refresh=function(e){var n=this;this.isUpdating||(this.onRefreshing(),this.refreshed.hasHandlers&&setTimeout(function(){n.onRefreshed()})),!this.isUpdating&&this._toInv&&(clearTimeout(this._toInv),this._toInv=null,this._fullUpdate=!1),this._updateState(),this._updateWme()},t.invalidateAll=function(e){e||(e=document.body);var n=e.children;if(n)for(var i=0;i<n.length;i++)t.invalidateAll(n[i]);var o=t.getControl(e);o&&o.invalidate()},t.refreshAll=function(e){if(e||(e=document.body),e.children)for(var n=0;n<e.children.length;n++)t.refreshAll(e.children[n]);var i=t.getControl(e);i&&i.refresh()},t.disposeAll=function(e){var n=t.getControl(e);if(n)n.dispose();else if(e.children)for(var i=0;i<e.children.length;i++)t.disposeAll(e.children[i])},t.prototype.beginUpdate=function(){this._updating++},t.prototype.endUpdate=function(e){e===void 0&&(e=!0),this._updating--,this._updating<=0&&e&&this.invalidate()},Object.defineProperty(t.prototype,"isUpdating",{get:function(){return this._updating>0},enumerable:!0,configurable:!0}),t.prototype.deferUpdate=function(e){try{this.beginUpdate(),e()}finally{this.endUpdate()}},Object.defineProperty(t.prototype,"isTouching",{get:function(){return t._touching},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tabOrder",{get:function(){return this._orgTabIndex},set:function(e){this._setTabOrder(e)},enumerable:!0,configurable:!0}),t.prototype._setTabOrder=function(e){var n=this._e;this._orgTabIndex=e;var i=n.querySelectorAll("input"),o=i.length===1?i[0]:null;n.tabIndex=this.isDisabled||o?-1:this._orgTabIndex,o&&(o.tabIndex=this._orgTabIndex)},Object.defineProperty(t.prototype,"isDisabled",{get:function(){return this._e&&this._e.getAttribute("disabled")!=null},set:function(e){this._setIsDisabled(e)},enumerable:!0,configurable:!0}),t.prototype._setIsDisabled=function(e){if((e=!!M(e,!0))!=this.isDisabled){var n=this._e;if(n){if(ee(n,q.disabled,e),S(n,"disabled",e?"disabled":null),S(n,"aria-disabled",e),n.id){var i=document.querySelector("[dropdown-id="+n.id+"]");i&&ee(i,q.disabled,e)}n.tabIndex=this.isDisabled||n.querySelectorAll("input").length===1?-1:this._orgTabIndex;for(var o=n.querySelectorAll("input,textarea,button,command,fieldset,keygen,optgroup,option,select"),s=t._DSBL_KEY,l=0;l<o.length;l++){var a=o[l];if(e)a[s]=a.disabled,a.disabled=!0;else if($(a,"."+ge.hostElement+"."+q.disabled))a[s]=a.disabled,a.disabled=!0;else{var u=a[s];st(u)||(u=!1),a.disabled=u,delete a[s]}}}}},t.prototype.initialize=function(e){Qt(this,e)},t.prototype.addEventListener=function(e,n,i,o,s){if(e){o==null&&(o=!1),st(o)&&s==null&&(n.indexOf("touch")>-1||n.indexOf("wheel")>-1)&&(s=!1);var l=st(o)&&st(s)?Jn(o,s):o;e.addEventListener(n,i,l),this._listeners.push({target:e,type:n,fn:i,capture:o})}},t.prototype.removeEventListener=function(e,n,i,o){for(var s=0,l=0;l<this._listeners.length;l++){var a=this._listeners[l];e!=null&&e!=a.target||n!=null&&n!=a.type||i!=null&&i!=a.fn||o!=null&&o!=a.capture||(a.target.removeEventListener(a.type,a.fn,a.capture),this._listeners.splice(l,1),l--,s++)}return s},t.prototype.onGotFocus=function(e){this.gotFocus.raise(this,e)},t.prototype.onLostFocus=function(e){this.lostFocus.raise(this,e)},t.prototype.onInvalidInput=function(e){this.invalidInput.raise(this,e);var n=this;if(e.cancel){var i=t._FOCUS_INTERVAL+50;(t._ctlInvalidInput==null||t._ctlInvalidInput===this)&&(t._ctlInvalidInput=this,t._toInvalidInput&&clearTimeout(t._toInvalidInput),t._toClearCtlInvalid&&clearTimeout(t._toClearCtlInvalid),t._toInvalidInput=setTimeout(function(){t._toInvalidInput=null,n.containsFocus()||"isDroppedDown"in n&&"_isDropdownOpened"in n&&n._isDropdownOpened&&(n.isDroppedDown=n._isDropdownOpened),n.focus(),t._toClearCtlInvalid=setTimeout(function(){t._ctlInvalidInput=null,t._toClearCtlInvalid=null},i)},i))}else t._ctlInvalidInput=null;return this._updateState(),!e.cancel},t.prototype.onRefreshing=function(e){this.refreshing.raise(this,e)},t.prototype.onRefreshed=function(e){this.refreshed.raise(this,e)},t.prototype._getProductInfo=function(){return"B0C3,Control"},t.prototype._getFocusedElements=function(e){for(var n=e;n;){if(!n.parentNode)return n.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&n.host!==void 0?n.querySelectorAll("."+q.focused):document.body.querySelectorAll("."+q.focused);n=n.parentNode}return[]},t.prototype._updateWme=function(){var e=this._getProductInfo(),n=t._toWme,i=hl;oe(i)&&!n[e]&&(n[e]=!0,i(this,t._licKey))},t.prototype._hasPendingUpdates=function(){return this._toInv!=null},t.prototype._handleResize=function(){if(this._e.parentElement||this._e.parentNode){var e=new wt(this._e.offsetWidth,this._e.offsetHeight);e.equals(this._szCtl)||(this._szCtl=e,this._listenResizeEvents&&(e.width||e.height)&&this.invalidate())}},t.prototype._resizeObserverCallback=function(e){e.forEach(function(n){var i=t.getControl(n.target);i&&i._handleResize()})},t.prototype._handleFocusBlur=function(){var e=this;this._toFocus||(this._toFocus=setTimeout(function(){e._toFocus=null,e._updateFocusState()},t._FOCUS_INTERVAL))},t.prototype._updateFocusState=function(){var e=this;setTimeout(function(){for(var n=Di.empty,i=e._getFocusedElements(e.hostElement),o=0;o<i.length;o++)(u=t.getControl(i[o]))&&u._focus&&!u.containsFocus()&&(kt(u._e,q.focus),u._focus=!1,u._updateState(),u.onLostFocus(n));var s=Z();if(s)for(var l=!0,a=s;a;){var u;(u=t.getControl(a))&&!u._focus&&u.containsFocus()&&(l&&(be(a,q.focus),l=!1),u._focus=!0,u._updateState(),u.onGotFocus(n)),a=a[t._OWNR_KEY]||a.parentNode}})},t.prototype._updateState=function(){var e=this.hostElement;if(e){ee(e,q.focused,this._focus),this._rtlDir=getComputedStyle(e).direction=="rtl",ee(e,Xt.rtl,this._rtlDir);var n=e.querySelector("input");if(n instanceof HTMLInputElement){ee(e,q.empty,n.value.length==0),ee(e,q.readOnly,n.readOnly);var i=n.validationMessage;ee(e,q.invalid,!this._pristine&&i!=null&&i.length>0)}}},t.prototype._handleDisabled=function(e){(this.isDisabled||$(e.target,"."+q.disabled))&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())},t.prototype._replaceWithDiv=function(e){var n=document.createElement("div");return e.parentElement.replaceChild(n,e),n.innerHTML=e.innerHTML,this._copyAttributes(n,e.attributes,/id|style|class/i),n},t.prototype._copyAttributes=function(e,n,i){if(e)for(var o=0;o<n.length;o++){var s=n[o].name;s.match(i)&&e.setAttribute(s,n[o].value)}},t.prototype._getKeyCode=function(e){var n=e.keyCode;if(this.rightToLeft)switch(n){case C.Right:n=C.Left;break;case C.Left:n=C.Right}return n},t.prototype._getCodeAsPerRTL=function(e){var n=e.code;if(this.rightToLeft)switch(n){case"ArrowRight":return"ArrowLeft";case"ArrowLeft":return"ArrowRight"}return n},t.sharedState={},t._toWme={},t._ctlCnt=0,t._touching=!1,t._REFRESH_INTERVAL=10,t._FOCUS_INTERVAL=5,t._ANIM_DEF_DURATION=400,t._ANIM_DEF_STEP=35,t._CLICK_DELAY=800,t._CLICK_REPEAT=75,t._CLIPBOARD_DELAY=100,t._POPUP_ZINDEX=1500,t._SEARCH_DELAY=500,t._HOVER_DELAY=400,t._LEAVE_DELAY=600,t._DRAG_SCROLL_EDGE=15,t._DRAG_SCROLL_STEP=20,t._CTRL_KEY="$WJ-CTRL",t._OWNR_KEY="$WJ-OWNR",t._SCRL_KEY="$WJ-SCRL",t._TTIP_KEY="$WJ-TTIP",t._DSBL_KEY="$WJ-DSBL",t._rxInputAtts=/name|tabindex|placeholder|autofocus|autocomplete|autocorrect|autocapitalize|spellcheck|readonly|minlength|maxlength|pattern|type|aria-.+/i,t}(al);function os(r){if("ontouchstart"in window||"onpointerdown"in window){var t=document,e=Jn(!0,!0),n=uu,i=hu,o=r?t.addEventListener.bind(t):t.removeEventListener.bind(t);"ontouchstart"in window?(o("touchstart",n,e),o("touchend",i,e),o("touchcancel",i,e)):"onpointerdown"in window&&(o("pointerdown",n,e),o("pointerup",i,e),o("pointercancel",i,e))}}function uu(r){(r.pointerType==null||r.pointerType=="touch")&&(H._toTouch&&(clearTimeout(H._toTouch),H._toTouch=null),H._touching=!0)}function hu(r){if((r.pointerType==null||r.pointerType=="touch")&&(H._toTouch=setTimeout(function(){H._toTouch=null,H._touching=!1},900),document.querySelector("ion-app"))){var t=r.target;$(t,".wj-dropdown-panel,.wj-dropdown")&&(t.focus(),r.stopPropagation(),r.stopImmediatePropagation())}}var cu=function(){function r(t){this._title=null,this._copyCss=!0,t!=null&&Qt(this,t)}return Object.defineProperty(r.prototype,"title",{get:function(){return this._title},set:function(t){this._title=G(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"copyCss",{get:function(){return this._copyCss},set:function(t){this._copyCss=M(t)},enumerable:!0,configurable:!0}),r.prototype.addCSS=function(t){this._css||(this._css=[]),this._css.push(t)},r.prototype.append=function(t){var e=this._getDocument();if(te(t))e.write(t);else if(t instanceof Element){t instanceof HTMLElement&&H.refreshAll(t);for(var n=t.cloneNode(!0),i=n.querySelectorAll("input"),o=0;o<i.length;o++){var s=i[o];switch(s.type){case"checkbox":S(s,"checked",!!s.checked||null),S(s,"indeterminate",!!s.indeterminate||null);break;case"radio":S(s,"checked",!!s.checked||null);break;default:S(s,"value",s.value||null)}}e.write(n.outerHTML)}else K(!1,"content should be an HTML string or an Element.")},r.prototype.print=function(t){var e=this;this._iframe&&(this._close(),setTimeout(function(){var n=e._iframe.contentWindow,i="onafterprint"in n&&!Gt();i&&(n.onafterprint=function(){e._afterPrint(t)}),!(Ie()&&n.document.body==null)&&document.queryCommandSupported("print")?n.document.execCommand("print",!0,null):(n.focus(),n.print()),i||e._afterPrint(t)},100))},r.prototype._afterPrint=function(t){document.body.removeChild(this._iframe),this._iframe=null,oe(t)&&t()},r.prototype._getDocument=function(){if(!this._iframe){var t=this._iframe=document.createElement("iframe");be(t,Fs.printDocument),B(t,{position:"fixed",left:32e3,top:32e3}),document.body.appendChild(t)}return this._iframe.contentDocument},r.prototype._close=function(){var t=this,e=this._getDocument();if(e.close(),e.title=this.title!=null?this.title:document.title,e.title&&e.title.trim()||(e.title=" "),this._copyCss&&[document.head,document.body].forEach(function(s){for(var l=s.querySelectorAll("LINK"),a=0;a<l.length;a++){var u=l[a];if(u.rel.match(/stylesheet/i)&&(!u.type||u.type.match(/text\/css/i))){var h=Yr(u.href,{async:!1});t._addStyle(h.responseText)}}var c=s.querySelectorAll("STYLE");for(a=0;a<c.length;a++)t._addStyle(c[a].textContent)}),this._css)for(var n=0;n<this._css.length;n++){var i=e.createElement("style"),o=Yr(this._css[n],{async:!1});i.textContent=o.responseText,e.head.appendChild(i)}},r.prototype._addStyle=function(t){var e=this._getDocument(),n=e.createElement("style");n.textContent=t,e.head.appendChild(n)},r}(),Jr=function(){function r(){}return r.copy=function(t){r._copyPaste(G(t),null)},r.paste=function(t){t=Le(t),r._copyPaste(null,t)},r._copyPaste=function(t,e){for(var n=Z(),i=$(n,"."+ge.hostElement);i&&H.getControl(i);)i=i.parentElement;if(i=i||document.body){var o=!1,s=Oe('<textarea class="'+zs.clipboard+'">',i,{position:"fixed",opacity:"0"});s.onkeydown=function(l){return l.preventDefault()},s.onchange=function(l){return l.stopImmediatePropagation()},te(t)?(s.value=t,s.select(),document.execCommand("copy")&&(o=!0)):(s.select(),oe(e)&&document.execCommand("paste")&&(e(s.value),o=!0)),setTimeout(function(){n.focus({preventScroll:!0}),(Ie()?setTimeout:function(l,a){return l()})(function(){return Ne(s)},500),!o&&oe(e)&&e(s.value)},H._CLIPBOARD_DELAY)}},r}(),Ni=function(){function r(t){this._isDown=!1,this._mousedownBnd=this._mousedown.bind(this),this._mouseupBnd=this._mouseup.bind(this),this._clickBnd=this._click.bind(this),this.element=t,this._connect(!0)}return Object.defineProperty(r.prototype,"element",{get:function(){return this._e},set:function(t){this._connect(!1),this._e=Ve(t,HTMLElement,!0),this._connect(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"disabled",{get:function(){return this._disabled},set:function(t){this._disabled=M(t)},enumerable:!0,configurable:!0}),r.prototype._connect=function(t){var e=this;this._e&&r._startEvents.forEach(function(n){t?e._e.addEventListener(n,e._mousedownBnd,{passive:!0}):e._e.removeEventListener(n,e._mousedownBnd)})},r.prototype._clearTimeouts=function(){this._toRepeat&&(clearTimeout(this._toRepeat),this._toRepeat=null),this._toDelay&&(clearTimeout(this._toDelay),this._toDelay=null)},r.prototype._mousedown=function(t){var e=this;this._isDown&&this._mouseup(null),this._disabled||(this._isDown=!0,r._stopEvents.forEach(function(n){document.addEventListener(n,e._mouseupBnd)}),this._clearTimeouts(),this._toDelay=setTimeout(function(){e._isDown&&(e._click(),e._toRepeat=setTimeout(e._clickBnd,H._CLICK_REPEAT))},H._CLICK_DELAY))},r.prototype._mouseup=function(t){var e=this;this._isDown&&t&&t.type!="keydown"&&this._clicked&&t.preventDefault(),r._stopEvents.forEach(function(n){document.removeEventListener(n,e._mouseupBnd)}),this._clearTimeouts(),this._isDown=!1,this._clicked=!1},r.prototype._click=function(){this._clicked=!0,this._clearTimeouts(),this._e&&(this._e.click(),this._isDown&&(this._toRepeat=setTimeout(this._clickBnd,H._CLICK_REPEAT)))},r._startEvents=["mousedown","touchstart"],r._stopEvents=["mouseup","mouseout","keydown","touchend","touchcancel"],r}(),Lt;(function(r){r[r.Above=0]="Above",r[r.AboveRight=1]="AboveRight",r[r.RightTop=2]="RightTop",r[r.Right=3]="Right",r[r.RightBottom=4]="RightBottom",r[r.BelowRight=5]="BelowRight",r[r.Below=6]="Below",r[r.BelowLeft=7]="BelowLeft",r[r.LeftBottom=8]="LeftBottom",r[r.Left=9]="Left",r[r.LeftTop=10]="LeftTop",r[r.AboveLeft=11]="AboveLeft"})(Lt||(Lt={}));function ei(r,t,e,n,i,o){i===void 0&&(i=!0);var s=r.offsetHeight||r.offsetWidth,l=e;(st(e)||e==null)&&(l=e?Lt.AboveLeft:Lt.BelowLeft);var a=fu(t);if(pu(r,a),gu(r,t,i),H.refreshAll(r),ss(r,t,l),Gt()&&requestAnimationFrame(function(){ss(r,t,l)}),t instanceof HTMLElement&&(r[H._OWNR_KEY]=t),!s){if(mu(r,t,o),n)return wo(function(u){return r.style.opacity=u<1?u.toString():""});r.style.opacity=""}return null}function Vt(r,t,e){t===void 0&&(t=!0),e===void 0&&(e=!1);var n=null;return e?n=wo(function(i){r.style.opacity=(1-i).toString(),i==1&&(Xr(r,t),r.style.opacity="")}):Xr(r,t),n}function ss(r,t,e){var n=yu(r,t),i=_u(r),o=vu(r,n,e,i),s={position:"absolute",zIndex:H._POPUP_ZINDEX},l=i.x==0;l?(s.left=o.x,s.top=o.y):s.transform="translate("+o.x+"px, "+o.y+"px)";var a=r.getBoundingClientRect().width;if(B(r,s),l){var u=a-r.getBoundingClientRect().width;u>0&&(r.style.left=o.x-Math.ceil(u)+"px")}}function Xr(r,t){r.style.display="none",t&&r.parentElement&&setTimeout(function(){r.style.display=="none"&&(Ne(r),oe(t)&&t())},H._FOCUS_INTERVAL+50);var e=r[H._SCRL_KEY];e instanceof H&&e.dispose(),delete r[H._SCRL_KEY],delete r[H._OWNR_KEY]}function du(r){var t=window.jQuery,e=oe(t)?t(r):null;return e&&oe(e.dialog)&&fe(r,"ui-dialog")}function fu(r){var t=document.body;if(r instanceof HTMLElement){if(!J(document.body,r))return t;for(var e=r;e;e=e.parentElement){if(e.tagName=="DIALOG"||e.tagName=="ION-CONTENT"||getComputedStyle(e).position=="fixed"){t=e;break}if(du(e)){t=e.querySelector(".ui-dialog-content")||e;break}}}return t}function pu(r,t){(!r.offsetHeight||!r.offsetWidth||r.parentElement!=t)&&(B(r,{opacity:"0",position:"fixed",left:0,top:0,transform:"",display:""}),t.appendChild(r))}function _u(r){var t=document.body,e=document.documentElement,n=r.parentElement,i=new Ye(t.scrollLeft||pageXOffset,t.scrollTop||pageYOffset);if(n!=t){var o=n==t?e:r.offsetParent||n;if(o==t&&(o=n),o){var s=o.getBoundingClientRect();i=new Ye(o.scrollLeft-s.left,o.scrollTop-s.top)}}if(n instanceof HTMLElement){var l=getComputedStyle(n);i.x-=parseFloat(l.borderLeftWidth),i.y-=parseFloat(l.borderTopWidth)}return i}function gu(r,t,e){if(t instanceof HTMLElement&&e){var n=e instanceof HTMLElement?e:t,i=getComputedStyle(n);new bt(i.backgroundColor).a==1&&B(r,{color:i.color,backgroundColor:i.backgroundColor,fontFamily:i.fontFamily,fontSize:i.fontSize,fontWeight:i.fontWeight,fontStyle:i.fontStyle})}}function mu(r,t,e){var n=t instanceof MouseEvent?t.target:t;if(n instanceof HTMLElement&&n.parentElement!=document.body){var i=Date.now(),o=n.getBoundingClientRect(),s=new H(document.createElement("div"));r[H._SCRL_KEY]=s,s.addEventListener(document,"scroll",function(l){if(l.target!=r.parentElement&&Date.now()-i>100&&J(document,n)&&!J(r,l.target)&&(l.target!=document||t!=null&&r.style.position=="fixed")){var a=n.getBoundingClientRect(),u=Math.abs(a.left-o.left),h=Math.abs(a.top-o.top);(u>1||h>1)&&(oe(e)&&e(),Xr(r,!0),s.dispose())}},!0)}}function vu(r,t,e,n){var i=document.documentElement,o=i.clientWidth,s=i.clientHeight,l=Lt;switch(e){case l.AboveLeft:case l.AboveRight:case l.BelowLeft:case l.BelowRight:if(t){var a=t.width;a&&(Ie()&&(a-=r.offsetWidth-r.clientWidth),r.style.minWidth=a+"px")}}var u=getComputedStyle(r),h=parseFloat(u.marginTop)+parseFloat(u.marginBottom),c=parseFloat(u.marginLeft)+parseFloat(u.marginRight),d=new wt(r.offsetWidth+c,r.offsetHeight+h),f=new Ye((o-d.width)/2,Math.round((s-d.height)/2*.7));if(t){u.direction=="rtl"&&(e=bu(e));var p=t.left,_=o-t.right;switch(f.x=t.left,e){case l.Above:case l.Below:f.x=t.left+(t.width-d.width)/2;break;case l.AboveLeft:case l.BelowLeft:f.x=t.left;break;case l.AboveRight:case l.BelowRight:f.x=t.right-d.width;break;case l.Left:case l.LeftTop:case l.LeftBottom:f.x=p>=d.width||p>=_?t.left-d.width:t.right;break;case l.RightTop:case l.RightBottom:case l.Right:f.x=_>=d.width||_>=p?t.right:t.left-d.width}var v=t.top,b=s-t.bottom;switch(e){case l.Above:case l.AboveLeft:case l.AboveRight:f.y=v>d.height||v>b?t.top-d.height:t.bottom;break;case l.Below:case l.BelowLeft:case l.BelowRight:f.y=b>d.height||b>v?t.bottom:t.top-d.height;break;case l.LeftTop:case l.RightTop:f.y=t.top;break;case l.LeftBottom:case l.RightBottom:f.y=t.bottom-d.height;break;case l.Left:case l.Right:f.y=t.bottom-d.height+(d.height-t.height)/2}}return f.x=Math.min(f.x,o-d.width),f.y=Math.min(f.y,s-d.height),f.x=Math.max(0,f.x)+n.x,f.y=Math.max(0,f.y)+n.y,f}function bu(r){var t=Lt;switch(r){case t.AboveLeft:return t.AboveRight;case t.AboveRight:return t.AboveLeft;case t.BelowLeft:return t.BelowRight;case t.BelowRight:return t.BelowLeft;case t.Left:return t.Right;case t.LeftTop:return t.RightTop;case t.LeftBottom:return t.RightBottom;case t.Right:return t.Left;case t.RightTop:return t.LeftTop;case t.RightBottom:return t.LeftBottom}return r}function yu(r,t){return t instanceof MouseEvent?t.clientX<=0&&t.clientY<=0&&t.target instanceof HTMLElement?ht.fromBoundingRect(t.target.getBoundingClientRect()):new ht(t.pageX-pageXOffset,t.pageY-pageYOffset,0,0):t instanceof Ye?new ht(t.x,t.y,0,0):t instanceof HTMLElement?ht.fromBoundingRect(t.getBoundingClientRect()):t&&t.top!=null&&t.left!=null?t:null}var ft;(function(r){r[r.Focus=0]="Focus",r[r.Hover=1]="Hover",r[r.Both=2]="Both"})(ft||(ft={}));var er=function(){function r(t){this._showAutoTipBnd=this._showAutoTip.bind(this),this._hideAutoTipBnd=this._hideAutoTip.bind(this),this._mousemoveBnd=this._mousemove.bind(this),this._focusBnd=this._focus.bind(this),this._mousemovedocBnd=this._mousemovedoc.bind(this),this._keydownBnd=this._keydown.bind(this),this._keydownHandleBnd=this.keydownHandle.bind(this),this._html=!0,this._cssClass="",this._gap=6,this._isAnimated=!1,this._position=Lt.Above,this._trigger=ft.Hover,this._showAtMouse=!1,this._showDelay=500,this._hideDelay=0,this._tooltipVisibleOnHover=!0,this._tips=[],this._forceRecreate=!1,this.popup=new A,Qt(this,t)}return Object.defineProperty(r.prototype,"position",{get:function(){return this._position},set:function(t){this._position=pe(t,Lt)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"trigger",{get:function(){return this._trigger},set:function(t){var e=this;this._trigger=pe(t,ft),this._tips.forEach(function(n){e._detach(n.element),e._attach(n.element)})},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isAnimated",{get:function(){return this._isAnimated},set:function(t){this._isAnimated=M(t)},enumerable:!0,configurable:!0}),r.prototype.setTooltip=function(t,e,n){t=ci(t),e=this._getContent(e);var i=this._indexOf(t);i>-1&&(this._detach(t),this._tips.splice(i,1)),e&&(this._attach(t),this._tips.push({element:t,content:e,position:n}));var o=r._eTip;o&&o[H._TTIP_KEY]==t&&(e?this._setContent(e):this._hideAutoTip())},r.prototype.getTooltip=function(t){t=ci(t);for(var e=this._tips,n=0;n<e.length;n++)if(e[n].element==t)return e[n].content;return null},r.prototype.show=function(t,e,n,i){if(t=ci(t),e=this._getContent(e),t){i==null&&(i=this.position),document.addEventListener("keydown",this._keydownHandleBnd);var o=r._eTip;this.forceRecreate&&o&&o.remove(),(!o||this.forceRecreate)&&(be(o=r._eTip=document.createElement("div"),$n.hostElement),o.style.visibility="none"),o.setAttribute("class",$n.hostElement),this._tooltipVisibleOnHover&&[ft.Hover,ft.Both].includes(this.trigger)&&o.addEventListener("mouseleave",this._hideAutoTipBnd),be(o,this.cssClass),fe(t,q.invalid)?o.setAttribute("role","alert"):o.setAttribute("role","tooltip"),this._setContent(e),o[H._TTIP_KEY]=t;var s=new ul(e,t);if(this.onPopup(s),s.content&&!s.cancel){this._setContent(s.content),n||(n=ht.fromBoundingRect(t.getBoundingClientRect()));var l=this.gap,a=Lt;if(l)switch(i){case a.Above:case a.AboveLeft:case a.AboveRight:case a.Below:case a.BelowLeft:case a.BelowRight:n=n.inflate(0,l);break;default:n=n.inflate(l,0)}ei(o,n,i,this.isAnimated),document.addEventListener("mousedown",this._hideAutoTipBnd)}}},r.prototype.hide=function(){var t=r._eTip;t&&(Ne(t),kt(t,this.cssClass),t.innerHTML="",this._tooltipVisibleOnHover&&t.removeEventListener("mouseleave",this._hideAutoTipBnd),r._eTip[H._TTIP_KEY]=null,r._eTip=null),document.removeEventListener("mousedown",this._hideAutoTipBnd),document.removeEventListener("keydown",this._keydownHandleBnd),this._tooltipVisibleOnHover&&document.removeEventListener("mousemove",this._mousemovedocBnd)},r.prototype.dispose=function(){var t=this;this.hide();var e=this._tips;e.length&&(e.forEach(function(n){t._detach(n.element)}),e.splice(0,e.length)),r._eTip&&(r._eTip[H._TTIP_KEY]=null,r._eTip=null),this._clearTimeouts()},Object.defineProperty(r.prototype,"isVisible",{get:function(){var t=r._eTip;return t!=null&&t.parentElement!=null&&t.offsetWidth>0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isContentHtml",{get:function(){return this._html},set:function(t){this._html=M(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"cssClass",{get:function(){return this._cssClass},set:function(t){this._cssClass=G(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"gap",{get:function(){return this._gap},set:function(t){this._gap=V(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"showAtMouse",{get:function(){return this._showAtMouse},set:function(t){this._showAtMouse=M(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"showDelay",{get:function(){return this._showDelay},set:function(t){this._showDelay=Fe(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hideDelay",{get:function(){return this._hideDelay},set:function(t){this._hideDelay=Fe(t)},enumerable:!0,configurable:!0}),r.prototype.onPopup=function(t){return this.popup&&this.popup.raise(this,t),!t.cancel},r.prototype.keydownHandle=function(t){t.key==="Escape"&&this.hide()},r.prototype._indexOf=function(t){for(var e=0;e<this._tips.length;e++)if(this._tips[e].element==t)return e;return-1},r.prototype._attach=function(t){if(this._tooltipVisibleOnHover)switch(this._trigger){case ft.Focus:t.addEventListener("focus",this._focusBnd),t.addEventListener("keydown",this._keydownBnd),t.addEventListener("blur",this._hideAutoTipBnd);break;case ft.Both:t.addEventListener("mouseenter",this._showAutoTipBnd),t.addEventListener("mouseleave",this._hideAutoTipBnd),t.addEventListener("focus",this._focusBnd),t.addEventListener("keydown",this._keydownBnd),t.addEventListener("blur",this._hideAutoTipBnd);break;default:t.addEventListener("mouseenter",this._showAutoTipBnd),t.addEventListener("mouseleave",this._hideAutoTipBnd)}else t.addEventListener("mouseenter",this._showAutoTipBnd),t.addEventListener("mouseleave",this._hideAutoTipBnd);t.addEventListener("click",this._showAutoTipBnd),this.showAtMouse&&t.addEventListener("mousemove",this._mousemoveBnd)},r.prototype._detach=function(t){t.removeEventListener("focus",this._focusBnd),t.removeEventListener("mouseenter",this._showAutoTipBnd),t.removeEventListener("mouseleave",this._hideAutoTipBnd),t.removeEventListener("click",this._showAutoTipBnd),t.removeEventListener("mousemove",this._mousemoveBnd),t.removeEventListener("keydown",this._keydownBnd),t.removeEventListener("blur",this._hideAutoTipBnd),t.removeEventListener("mousedown",this._hideAutoTipBnd)},r.prototype._keydown=function(t,e){t.key=="Tab"&&(this._clearTimeouts(),this.hide())},r.prototype._focus=function(t){t&&t.target&&this._showAutoTip(void 0,t.target)},r.prototype._showAutoTip=function(t,e){var n=this,i=this._hideDelay;if(t&&[ft.Hover,ft.Both].includes(this.trigger)){if(t.defaultPrevented)return;if(t.type=="click"&&!H._touching){this._hideAutoTip(t);return}var o=t&&t.type=="mouseenter"?this._showDelay:0;this._clearTimeouts(),this._eMouse=t;var s=t.target;this._toShow=setTimeout(function(){var l=n._indexOf(s);if(l>-1){var a=n._tips[l],u=n._eMouse,h=n._showAtMouse?new ht(u.clientX,u.clientY,0,0):null,c=a&&a.element;if(c&&n._hasOffset(c)){var d=H.getControl(a.element);(d==null||d.isVisible!=0)&&(n.show(a.element,a.content,h,a.position),i>0&&(n._toHide=setTimeout(function(){n.hide()},i)))}}},o)}e&&[ft.Focus,ft.Both].includes(this.trigger)&&(o=this._showDelay,this._toShow=setTimeout(function(){var l=n._indexOf(e);if(l>-1){var a=n._tips[l],u=a&&a.element;if(u&&n._hasOffset(u)){var h=H.getControl(a.element);(h==null||h.isVisible!=0)&&(n.show(a.element,a.content,null,a.position),i>0&&(n._toHide=setTimeout(function(){n.hide()},i)))}}},o))},r.prototype._mousemove=function(t){this._eMouse=t},r.prototype._mousemovedoc=function(t){[ft.Hover,ft.Both].includes(this.trigger)&&this._checkBoundsAndHide(t,!1)},r.prototype._hideAutoTip=function(t){t&&r._eTip&&(this._tooltipVisibleOnHover?(t.type=="mouseleave"&&document.addEventListener("mousemove",this._mousemovedocBnd),this._checkBoundsAndHide(t,!0)):(this.trigger==ft.Hover||this.trigger==ft.Both)&&t&&t.type!="click"&&t.type!="mousedown"&&(this._clearTimeouts(),this.hide()))},r.prototype._checkBoundsAndHide=function(t,e){var n=r._eTip;if(n){var i=n[H._TTIP_KEY],o=ht.fromBoundingRect(n.getBoundingClientRect()),s=ht.fromBoundingRect(i.getBoundingClientRect()),l=this.gap+2,a=Lt,u=0;if(t){var h=this._indexOf(i);switch(h>-1&&(u=this._tips[h]&&this._tips[h].position?this._tips[h].position:this.position),u){case a.Above:case a.AboveLeft:case a.AboveRight:s=s.inflate(0,l,0,0);break;case a.Below:case a.BelowLeft:case a.BelowRight:s=s.inflate(0,0,0,l);break;case a.Left:case a.LeftTop:case a.LeftBottom:s=s.inflate(l,0,0,0);break;case a.Right:case a.RightTop:case a.RightBottom:s=s.inflate(0,0,l,0)}var c=t,d=!0;n.getClientRects().length>0&&c!=null&&(d=!(c.clientX>=o.left&&c.clientX<=o.right&&c.clientY>=o.top&&c.clientY<=o.bottom));var f=!0;c!=null&&(f=!(c.clientX>=s.left&&c.clientX<=s.right&&c.clientY>=s.top&&c.clientY<=s.bottom)),(d&&f||t.type=="blur")&&(e&&this._clearTimeouts(),this.hide())}}},r.prototype._clearTimeouts=function(){this._toShow&&(clearTimeout(this._toShow),this._toShow=null),this._toHide&&(clearTimeout(this._toHide),this._toHide=null)},r.prototype._getContent=function(t){if((t=G(t))&&t[0]=="#"){var e=ci(t);e&&(t=e.innerHTML)}return t},r.prototype._setContent=function(t){var e=r._eTip;e&&(this._html?e.innerHTML=t:e.textContent=t)},r.prototype._hasOffset=function(t){var e=new wt(t.offsetWidth,t.offsetHeight);if(t instanceof SVGGraphicsElement){var n=t.getBBox();e.width=n.width,e.height=n.height}return e.width>0||e.height>0},Object.defineProperty(r.prototype,"forceRecreate",{get:function(){return this._forceRecreate},set:function(t){this._forceRecreate=t},enumerable:!0,configurable:!0}),r}(),ul=function(r){ti(t,r);function t(e,n){var i=r.call(this)||this;return i._content=G(e),i._e=n,i}return Object.defineProperty(t.prototype,"tip",{get:function(){return er._eTip},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this._e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"content",{get:function(){return this._content},set:function(e){this._content=G(e)},enumerable:!0,configurable:!0}),t}(He);kn("wijmo",va);var Wi="The Wijmo license in this application ",Io={evl:"Wijmo Evaluation Version ({version})",prd:Wi+"is not valid for the <b>{control}</b> control.",ver:Wi+"is not valid for the version in use. The license version is <b>{licVer}</b>; the product version is <b>{version}</b>.",dmn:Wi+"is not valid for the current domain. The license domain is <b>{licDomain}</b>; the current domain is <b>{domain}</b>.",exp:Wi+"has expired. The license expiration date is <b>{expDate:d}</b>.",lic:Wi+"is invalid.",mss:Wi+"is not set.",ctc:'If you are a customer, you can <a target="_blank" rel="noopener" href="https://developer.mescius.com/licensing/wijmo?utm_source=Wijmo-In-App&utm_medium=Click-to-Site&utm_campaign=Wijmo-User-Analysis">create a license</a> online. Otherwise, you can <a target="_blank" rel="noopener" href="https://developer.mescius.com/wijmo/request-trial-key?utm_source=Wijmo-In-App&utm_medium=Click-to-Site&utm_campaign=Wijmo-User-Analysis">generate a 30-day license</a> for free. For further assistance, contact MESCIUS: <a href="mailto:us.sales@mescius.com">us.sales@mescius.com</a>.',hdr:"Wijmo License",cls:"CLOSE"},Ui={};function hl(r,t){var e=H._wme;if(!(e&&J(document.body,e)&&e.offsetWidth&&e.offsetHeight))if(t){var n=cl(r);Ui[n]||(Ui[n]=!0,Tu(t,{algorithmCode:"B0",publicKey:"l6/zrbWoSbcLFwEetFh38rH3ErBZE9H+Cqix3R+wTlfA1wD5B+lUcCQn+EJ60I4RGrm0x1sFjkiLWwB0jAn6BWZv0W4WbqAKriOdeoivxDp1Wmjs3qkEDhvbsjPtfvwx2BHil6o+/tDrdMJQSGs18WZm2PoQLQuL+9VhZ4FNRHUQU3Jtioke/OZEGHJOdYVwvCGalzBad6QFOiVbDBQPePpS3++GJzOxN8SN/7lyS5/IdKiy3WJRaVGkB370+HbN6hKraDfUgReLX26yxRaKC/5aWnGAJ2NnWLoGyAGRcwT9dVjo4bcAZNrrA0U9JVKQxaSskhdv2p49XzJkltXx5w=="},function(i){Vr(r,t,i),delete Ui[n]},function(){Vr(r,t,null),delete Ui[n]}))}else Vr(r,null,null)}function cl(r){return r._getProductInfo().split(",")[0]}function wu(r){return r._getProductInfo().split(",")[1]}function Vr(r,t,e){var n=W.Licensing||Io,i=null;e?xu(r,e)?Eu(r,e)?Iu(r,e)?Cu(r,e)?fl(r,e)&&(i=n.evl):i=n.prd:i=n.dmn:i=n.ver:i=n.exp:i=t?n.lic:n.mss,i&&Su(r,i+="<br/><br/>"+n.ctc,e)}function Cu(r,t){var e=cl(r);if(e&&e.length>=4){for(var n=0;n<t.Prd.length;n++)if(t.Prd[n].C.indexOf(e)>-1)return!0}return!1}function xu(r,t){if(t.Exp){var e=t.Exp,n=new Date(parseInt(e.substr(0,4))||0,parseInt(e.substr(4,2))-1||0,parseInt(e.substr(6,2))||0);if(Math.ceil((n.valueOf()-Date.now())/864e5)<=0)return!1}return!0}function Eu(r,t){var e=t.Anl?t.Anl.ver:null,n=bo();return e&&n?parseInt(e.replace("v",""))+10>=parseInt(n.split(".")[1]):!0}function Iu(r,t){if(pl()||!t.Dms)return!0;for(var e=location.hostname,n=t.Dms.split(","),i=0;i<n.length;i++)if(dl(e,n[i]))return!0;return!1}function dl(r,t){var e="^"+t.replace(/\./g,"\\.").replace(/\*/g,"(.*)")+"$",n=new RegExp(e,"i").test(r);return n||t.substr(0,2)!="*."?n:dl(r,t.substr(2))}function fl(r,t){return!!t&&t.Evl}function pl(){var r=location,t=atob("Xih8bG9jYWxob3N0fGZpZGRsZS5qc2hlbGwubmV0fHJ1bi5wbG5rci5jb3xzLmNvZGVwZW4uaW98bnVsbC5qc2Jpbi5jb218Lio/LnN0YWNrYmxpdHouaW98MTI3LjAuMC4xfFt3LV0rLmxvY2FsfFt3LV0rfDo6MSkk");return r.protocol=="file:"||new RegExp(t,"i").test(r.hostname)}function Su(r,t,e){if(t=ls(r,t,e),!Ui[" "]&&!pl()&&!fl(r,e)){Ui[" "]=!0;var n=W.Licensing||Io,i=Oe('<div style="position:fixed;background:rgba(0,0,0,0.3);left:0;top:0;width:100%;height:100%;font-family: sans-serif;z-index:10000;"><div style="position:relative;overflow:auto;background:white;width:450px;padding:36pt;left:50%;top:50%;transform:translate(-50%,-50%)"><div><p style="font-size:150%;font-weight:bold">'+n.hdr+"</p><p>"+t+'</p></div><div style="text-align:right;margin-top:24pt"><button style="border:none;background:rgba(158,158,158,.2);padding:8px 16px">'+n.cls+"</button></div></div></div>",document.body);i.addEventListener("click",function(l){l.target instanceof HTMLButtonElement&&Ne(i)})}if(!H._wme){var o=Oe('<div><a href="'+Du()+'" target="_blank" rel="noopener">'+ls(r)+"</a></div>"),s={position:"fixed",display:"block",visibility:"visible",background:"rgba(240,240,240,.9)",padding:"8px 12px",margin:"6px",fontFamily:"sans-serif",fontSize:"14pt",fontWeight:"bold",zIndex:1e4,opacity:.8,height:"auto",width:"auto",transform:"none"};switch(Math.round(100*Math.random())%3){case 0:s.right=s.bottom=0;break;case 1:s.left=s.bottom=0;break;case 2:s.right=s.top=0}B(o,s),document.body.appendChild(o),H._wme=o,Ru(o,t)}}function Ru(r,t){var e,n=Oe(t);n.className=$n.hostElement,B(n,{pointerEvents:"auto",padding:"10px",margin:"6px"}),[r,n].forEach(function(s){s.addEventListener("mouseenter",function(){return o(!0)}),s.addEventListener("mouseleave",function(){return o(!1)})});var i=0;function o(s){i+=s?1:-1,e&&clearTimeout(e),e=setTimeout(function(){e=null,i==1?ei(n,r.getBoundingClientRect()):i<1&&Vt(n)},500)}}function Du(){switch(W.Globalize.name){case"ja":return"https://developer.mescius.jp/wijmo/about-license";case"ko":return"https://www.mescius.co.kr/wijmo#price";default:return"https://developer.mescius.com/licensing/wijmo?utm_source=Wijmo-In-App&utm_medium=Click-to-Site&utm_campaign=Wijmo-User-Analysis"}}function ls(r,t,e){(!t||t.trim().length<15)&&(t=(W.Licensing||Io).evl),(!t||t.trim().length<15)&&(t=atob("V2lqbW8gRXZhbHVhdGlvbiBWZXJzaW9uICh7dmVyc2lvbn0p"));var n=null;if(e&&e.Exp){var i=e.Exp;n=new Date(parseInt(i.substr(0,4))||0,parseInt(i.substr(4,2))-1||0,parseInt(i.substr(6,2))||0)}return t=zt(t,{version:bo(),domain:location.hostname,control:wu(r),licVer:e&&e.Anl?"5."+e.Anl.ver.replace("v","")+".*":null,licDomain:e?e.Dms:null,expDate:n})}function Tu(r,t,e,n){var i=Pu(r,t.algorithmCode);if(!i)return n();var o=i.lic,s=i.prefix+"#"+t.algorithmCode;if(ju(s+JSON.stringify(o.D))!=o.H)return n();var l=window.msCrypto||window.crypto,a=l?l.subtle:null;if(!a||!location.protocol.match(/^https/i))return e(o.D);var u={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},h={alg:"RS256",e:"AQAB",kty:"RSA",n:Fu(t.publicKey)};h=window.msCrypto?ds(JSON.stringify(h)):h;try{fs(a.importKey("jwk",h,u,!1,["verify"])).then(function(c){var d=Lu(cs(zu(s+JSON.stringify(o.D))));fs(a.verify(u,c,cs(o.S),ds(d))).then(function(f){return f?e(o.D):n()})},function(){return e(o.D)})}catch{return e(o.D)}}var as,So=typeof window>"u"?null:window.Uint8Array||window.TypedArray;function Pu(r,t){try{t="#"+t;var e=r.indexOf(t);if(e>-1)return{prefix:r.substring(0,e),lic:JSON.parse(Mu(r.substr(e+t.length)))}}catch{}return null}function Mu(r){if(!r)return"";var t=Au(r);t=ku(t);var e=Math.ceil(t.length/2);return Hu(t=(t=(t=t.substr(e)+t.substr(0,e)).replace("#","=")).replace("&","=="))}function Au(r){for(var t=r.split(""),e=t.length-5;e>=0;e--)us(t,e+1,e+3,hs),us(t,e,e+2,hs);return t.join("")}function us(r,t,e,n){r.length>1&&r.splice(e,1,n(r.splice(t,1,n(r[e]))[0]))}function Ou(r,t){var e=r.charCodeAt(0);return e>=65&&e<=90?r.toLowerCase():e>=97&&e<=122?r.toUpperCase():e>=48&&e<=57?String.fromCharCode(48+(e-48+10+t)%10):r}function hs(r){return Ou(r,-1)}function ku(r){return r.split("").reverse().join("")}function Hu(r){for(var t=atob(r),e="",n=0;n<t.length;n++)e+="%"+("00"+t.charCodeAt(n).toString(16)).slice(-2);return decodeURIComponent(e)}function Lu(r){return String.fromCharCode.apply(null,new So(r))}function cs(r){for(var t=atob(r),e=t.length,n=new So(e),i=0;i<e;i++)n[i]=t.charCodeAt(i);return n.buffer}function zu(r){return btoa(encodeURIComponent(r).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode(parseInt(e,16))}))}function Fu(r){return r.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"")}function ds(r){for(var t=new ArrayBuffer(r.length),e=new So(t),n=0,i=r.length;n<i;n++)e[n]=r.charCodeAt(n);return t}function ju(r){for(var t=0,e=5381,n=0,i=r.length-1;i>=0;i--){var o=r.charCodeAt(i);t=o+(t<<6)+(t<<16)-t,e=o+((e<<5)+e),n=o+((n<<5)-n)}var s=t^e^n;return s<0&&(s=~s),s.toString(16).toUpperCase()}function fs(r){return"oncomplete"in r&&(r.then=function(t,e){r.resolve=t,r.reject=e},r.oncomplete=function(t){r.resolve(r.result)},r.onerror=function(t){r.reject()}),r}/*!
    *
    * Wijmo Library 5.20251.40
    * https://developer.mescius.com/wijmo
    *
    * Copyright(c) MESCIUS inc. All rights reserved.
    *
    * Licensed under the End-User License Agreement For MESCIUS Wijmo Software.
    * us.sales@mescius.com
    * https://developer.mescius.com/wijmo/licensing
    *
    */var tr=function(){return(tr=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r}).apply(this,arguments)},Bu=function(r,t,e,n){return new(e||(e=Promise))(function(i,o){function s(u){try{a(n.next(u))}catch(h){o(h)}}function l(u){try{a(n.throw(u))}catch(h){o(h)}}function a(u){u.done?i(u.value):new e(function(h){h(u.value)}).then(s,l)}a((n=n.apply(r,t||[])).next())})},Vu=function(r,t){var e,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(a){return function(u){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,n=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){s=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){s.label=c[1];break}if(c[0]===6&&s.label<i[1]){s.label=i[1],i=c;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(c);break}i[2]&&s.ops.pop(),s.trys.pop();continue}c=t.call(r,s)}catch(d){c=[6,d],n=0}finally{e=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([a,u])}}},Nu=function(r){r()},Gu=function(){throw"Wijmo: React dependencies not loaded properly"},Zr={flushSync:Nu,createRoot:Gu},ir=Yn||Zr,Ri=ir.flushSync;function Wu(){return Bu(this,void 0,void 0,function(){var r;return Vu(this,function(t){try{r=require("react-dom/client"),ir=r||Yn||Zr,Ri=r.flushSync||Ri}catch{ir=Yn||Zr}return[2]})})}var nn,zi=[];if(!nn){var ps=parseInt(ve.version);nn=ps,ps>=18&&Wu()}function wr(r){return nn>=19?function(t){return r(t,t.ref)}:ve.forwardRef(r)}var nr=!0,_s={inputs:["isDisabled","tabOrder"],events:["gotFocus","invalidInput","lostFocus","refreshed","refreshing"]},qu=new Set(["panes","columnGroups","columns","items"]),Ku=new Set(["initialized","wjItemTemplate"]);function _l(r,t){var e=r.controlRef.current,n={},i={};if(t){for(var o=Ge(t)?t.flat(1/0):[t],s=[],l=0,a=new Set,u=0,h=o;u<h.length;u++)(g=h[u])&&g.type&&g.type.$$typeof==Symbol.for("react.forward_ref")?(nn>=19?s.push(g.type.render(g.props,g.props.ref)):s.push(g.type.render(g.props,g.ref)),s[s.length-1].$index=l,s[s.length-1].$key=g.key):g&&oe(g.type)&&(s.push(g.type(g.props)),s[s.length-1].$index=l,s[s.length-1].$key=g.key),g||a.add(l),l++;for(var c=[],d=0,f=s;d<f.length;d++)(g=f[d]).assignedToParent?(g.wjProperty&&(g.parentProp=G(g.wjProperty),g.isParentPropArray=e[g.parentProp]&&Ge(e[g.parentProp])),g.isParentPropArray&&!n[g.parentProp]&&(n[g.parentProp]=[]),g.isParentPropArray?n[g.parentProp].push({getInstance:g.getInstance,props:g.props,$key:g.$key,$index:g.$index}):n[g.parentProp]={getInstance:g.getInstance,props:g.props}):c.push(g);var p=r.childInfo,_=function(O){if(Ge(n[O])){var X=!1;e[O]&&e[O]._updating!=null&&!qu.has(O)&&(e[O]._updating++,X=!0);var Q=p[O];i[O]=[];var Y=!1;p[O]||(Q=[],e[O]&&e[O].clear?(e[O].clear(),Y=!0):e[O]||(e[O]=new At)),!Ju(Q,n[O],"$key")&&e[O]&&e[O].clear&&(e[O].clear(),Y=!0);for(var se=Q.length-1;se>=0;se--)a.has(Q[se].$index)&&(e[O].remove(Q[se].instance),Q.splice(se,1));for(var ue=[],de={},Te=0,Ce=Q;Te<Ce.length;Te++){var N=Ce[Te];N.$key!=null?de[""+N.$key]=N:ue.push(N)}for(var je=0,Ze=function(ct){if(ct===void 0&&(ct=null),ct!=null){var qt=de[ct];return qt!=null&&delete de[ct],qt}return ue[je++]},he=0;he<n[O].length;he++){var ze=!1;(me=Ze(n[O][he].$key))?me.updateProps(n[O][he].props):(me=n[O][he].getInstance(e),ze=!0),me.$index=n[O][he].$index,me.$key=n[O][he].$key,(Y||ze)&&(e[O].length==he?e[O].push(me.instance):e[O].splice(he,0,me.instance)),i[O].push(me)}for(var ot=0,gt=Object.keys(de);ot<gt.length;ot++){var mt=gt[ot];e[O].remove(de[mt].instance)}for(;!nr;)e[O].pop();X&&(e[O]._updating--,!Y&&p[O]&&p[O].length==n[O].length||e[O]._raiseCollectionChanged&&e[O]._raiseCollectionChanged())}else{var me;(me=p[O])?me.updateProps(n[O].props):(me=n[O].getInstance(e),e[O]=me.instance),i[O]=me}};for(var v in n)_(v);for(var b=[],m=0,w=p.$_nonassignable||[];m<w.length;m++){var g=w[m];a.has(g.$index)?g.instance&&g.instance.dispose&&oe(g.instance.dispose)&&g.instance.dispose():b.push(g)}for(var y=[],I=0;I<c.length;I++){var x=b[I];x?x.updateProps(c[I].props):x=c[I].getInstance(e),x.$index=c[I].$index,y.push(x)}for(i.$_nonassignable=y;I<b.length;I++)b[I].instance&&b[I].instance.dispose&&oe(b[I].instance.dispose)&&b[I].instance.dispose()}for(var R=0,k=Object.keys(r.childInfo);R<k.length;R++){var D=k[R];if(Ge(r.childInfo[D])&&!n[D]&&e[D]&&e[D].remove)for(var E=0,T=r.childInfo[D];E<T.length;E++){var L=T[E];e[D].remove(L.instance)}}return i}function Qr(r,t,e){if(e===void 0&&(e=null),!t||!nr)return tr({},r);var n={};for(var i in r){var o=!1;e&&(o=e.knowProperties.has(i)||e.knowEvents.has(i)||e.knowCustomProps.has(i)),(e&&!o||r[i]!==t[i])&&(n[i]=r[i])}return n}function Uu(r){var t=ve.useRef({}),e=ve.useRef(),n=ve.useRef(),i=ve.useRef(),o=ve.useRef(),s=ve.useRef({}),l=ve.useRef(!1),a=ve.useRef(null);r.customProps||(r.customProps={}),e.current||(e.current={},e.current.knowProperties=new Set(r.properties),e.current.knowEvents=new Set(r.events),e.current.knowCustomProps=new Set(Object.keys(r.customProps)));var u=r.props;o.current&&(u=Qr(r.props,t.current,e.current),t.current=r.props);var h={},c={},d={},f={},p=r.ref||null;for(var _ in u)e.current.knowProperties.has(_)?h[_]=u[_]:e.current.knowEvents.has(_)?(c[_]=u[_],h[_]=u[_]):r.customProps[_]?f[_]=u[_]:Ku.has(_)||(d[_]=u[_]);if(o.current&&nr)for(var _ in c)delete h[_];var v=function(){p&&p.current&&(p.current.props=r.props),b();var m=[],w=h,g;if(!(i.current&&o.current&&!nr)){if(!i.current){w=tr({},h);for(var g in c)delete w[g]}}if(i.current=c,o.current){Qt(o.current,w,!1,!0);for(var y in f)r.customProps[y](o.current,f[y]);(function(){for(var I=0,x=m;I<x.length;I++){var R=x[I];R._cachedHandlersChanged&&(R._handlersChanged=R._cachedHandlersChanged,R._cachedHandlersChanged=null)}m=[]})()}},b=function(){s.current=_l({controlRef:o,childInfo:s.current},r.props.children)};return ve.useLayoutEffect(function(){if(n.current&&!o.current){if(o.current=new r.constructor(n.current,h),r.prePropsInit&&r.prePropsInit(o.current),p)if(oe(p)){var m=p({control:o.current,props:r.props});oe(m)&&(a.current=m)}else p.current&&p.current.control==o.current||(p.current={control:o.current,props:r.props});r.props.children&&v(),r.initControl&&r.initControl(o.current),r.props.initialized&&setTimeout(function(){o.current&&r.props.initialized(o.current)})}else l.current&&(l.current=!1);return function(){if(o.current){var w=o.current;l.current=!0,queueMicrotask(function(){l.current&&(w.dispose(),o.current=null,s.current={},l.current=!1,a.current&&a.current())})}}},[]),o.current&&queueMicrotask(function(){return v()}),{renderResult:ve.createElement("div",tr({},d,{ref:n}),[]),wjControl:o.current}}function gs(r,t,e){var n={};for(var i in r)(t.has(i)||e.has(i))&&(n[i]=r[i]);return n}function ms(r,t,e,n){var i=n.current,o={};for(var s in t)e.has(s)&&(o[s]=t[s]);for(var l in i)r[l]&&(t[l]?r[l].removeHandler(i[l]):o[l]=i[l]);return o}function Yu(r,t){var e={};for(var n in t)r[n]!==void 0&&(e[n]=r[n]);return e}function Ro(r){var t={};return t.knowProperties=new Set(r.properties),t.knowEvents=new Set(r.events),r.customProps||(r.customProps={}),{getInstance:function(e){var n={current:{}},i={current:{}},o={current:{}},s=Qr(r.props,n.current),l=gs(s,t.knowProperties,t.knowEvents),a=Yu(s,r.customProps||{}),u=r.customConstructor?r.customConstructor(e,l,a):new r.constructor(r.needParentInstance?e:l,r.needParentInstance?l:void 0);r.ref&&(oe(r.ref)?r.ref({control:u,props:r.props}):r.ref.current&&r.ref.current.control==u||(r.ref.current={control:u,props:r.props})),o.current=ms(u,s,t.knowEvents,o);var h=function(c){var d=Qr(c,n.current);n.current=c,r.ref&&r.ref.current&&(r.ref.current.props=c),o.current=ms(u,d,t.knowEvents,o);var f,p=gs(d,t.knowProperties,t.knowEvents);u.initialize?u.initialize(p):Qt(u,p,!1,!0);for(var _ in r.customProps)d[_]!==void 0&&r.customProps[_](u,d[_]);f=c.children||[],i.current=_l({controlRef:{current:u},childInfo:i.current},f)};return h(r.props||[]),r.props.initialized&&oe(r.props.initialized)&&r.props.initialized(u),{instance:u,updateProps:h}},props:r.props,parentProp:r.parentProp,wjProperty:r.props.wjProperty,isParentPropArray:r.isParentPropArray,assignedToParent:r.assignedToParent}}var Wn={isReactRendering:null};function gl(){if(Wn.isReactRendering==null)try{var r=console.error,t=!1;console.error=function(){var e=arguments[0]||"";e.includes("flushSync")&&(t=!0)},Ri(function(){}),console.error=r,Wn.isReactRendering=t}catch{}finally{queueMicrotask(function(){Wn.isReactRendering=null})}return!!Wn.isReactRendering}function ml(){return Yn}function $u(r,t,e){if(e===void 0&&(e=!1),nn<18)(0,ml().render)(r,t);else{gl()&&(e=!0);var n,i=zi.findIndex(function(o){return o.host===t});i===-1?(n=ir.createRoot(t),zi.push({host:t,root:n})):n=zi[i].root,n.__scheduledForUnmount=!1,e?queueMicrotask(function(){Ri(function(){n.render(r)})}):Ri(function(){n.render(r)})}return t}function vs(r){var t=r._internalRoot&&r._internalRoot.containerInfo.firstChild,e=r._internalRoot&&r._internalRoot.current&&r._internalRoot.current.child&&r._internalRoot.current.child.stateNode;e&&t==e?r.unmount():r._internalRoot=null,r.__scheduledForUnmount=null}function bs(r){if(nn<18)(0,ml().unmountComponentAtNode)(r);else{var t=zi.findIndex(function(n){return n.host===r});if(t!==-1){var e=zi[t].root;gl()?(e.__scheduledForUnmount=!0,queueMicrotask(function(){e.__scheduledForUnmount&&Ri(function(){vs(e),zi.splice(t,1)})})):Ri(function(){vs(e),zi.splice(t,1)})}}}function Ju(r,t,e){if(r.length!=t.length)return!1;for(var n=0;n<r.length;n++)if(r[n][e]!=t[n][e])return!1;return!0}function Xu(){Ri(function(){})}/*!
    *
    * Wijmo Library 5.20251.40
    * https://developer.mescius.com/wijmo
    *
    * Copyright(c) MESCIUS inc. All rights reserved.
    *
    * Licensed under the End-User License Agreement For MESCIUS Wijmo Software.
    * us.sales@mescius.com
    * https://developer.mescius.com/wijmo/licensing
    *
    */var Xe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])})(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),vl={hostElement:"wj-autocomplete"},xe={buttonsOutside:"wj-btns-outside",calendarHeader:"wj-calendar-header",calendarMonth:"wj-calendar-month",calendarMultiMonth:"wj-calendar-multimonth",calendarOuter:"wj-calendar-outer",calendarYear:"wj-calendar-year",dayOtherMonth:"wj-day-othermonth",dayToday:"wj-day-today",dayWeekend:"wj-day-weekend",header:"wj-header",hostElement:"wj-calendar",monthSelect:"wj-month-select",weekAfter:"wj-week-after",weekBefore:"wj-week-before",yearPicker:"wj-yearpicker",focused:"wj-state-focus",selectedYear:"wj-select-year",confirmationButtonContainer:"wj-calendar-confirmation-button-container",button:"wj-calendar-button"},eo={hostElement:"wj-collectionview-navigator",pager:"wj-pager"},Ki={colorBox:"wj-colorbox",hostElement:"wj-colorpicker"},Do={hostElement:"wj-combobox",stateMatch:"wj-state-match"},gi={dropDownPanel:"wj-dropdown-panel",hostElement:"wj-dropdown"},tt={input:"wj-input",inputBtnVisible:"wj-input-btn-visible",inputGroup:"wj-input-group",inputGroupBtn:"wj-input-group-btn"},to={hostElement:"wj-inputcolor",inputColorBox:"wj-inputcolorbox"},rr={hostElement:"wj-inputdate",inputDateDropDown:"wj-inputdate-dropdown"},bl={hostElement:"wj-inputdaterange"},yl={hostElement:"wj-inputdatetime"},wl={hostElement:"wj-inputmask"},qn={hostElement:"wj-inputnumber",numeric:"wj-numeric",showSpinner:"wj-input-show-spinner"},Cl={hostElement:"wj-inputtime"},pt={header:"wj-header",hostElement:"wj-listbox",listBoxItem:"wj-listbox-item"},Cn={hostElement:"wj-menu",menuItems:"wj-menu-items",subItems:"wj-subitems"},ri={hostElement:"wj-multi-autocomplete",token:"wj-token",tokenActive:"wj-token-active",tokenClose:"wj-token-close",tokenHelper:"wj-token-helper",tokenLabel:"wj-token-label"},xl={hostElement:"wj-multiselect"},Kn={header:"wj-header",hostElement:"wj-multiselectlistbox",selectAll:"wj-select-all"},Ai={dialogHeader:"wj-dialog-header",hostElement:"wj-popup",popupBackDrop:"wj-popup-backdrop",dialogBody:"wj-dialog-body",dialogFooter:"wj-dialog-footer"};rt("InputNumber",{ariaLabels:{incVal:"Increase Value",decVal:"Decrease Value",inputNumberInput:"InputNumber Input",inputNumber:"Input Number"}});var Zu=function(r){Xe(t,r);function t(e,n){var i=r.call(this,e)||this;i._value=null,i._min=null,i._max=null,i._format="",i._step=null,i._showBtn=!0,i._readOnly=!1,i._handleWheel=!0,i._oldText="",i._fromKb=!0,i._inputElementAriaLabel=W.InputNumber.ariaLabels.inputNumberInput,i._ariaLabelledby=null,i.textChanged=new A,i.valueChanged=new A;var o=i.getTemplate();i.applyTemplate(ge.hostElement+" "+ge.content+" "+qn.hostElement,o,{_tbx:"input",_btnUp:"btn-inc",_btnDn:"btn-dec"},"input");var s=i.inputElement;i.hostElement,S(s,"role","spinbutton",!0),i._updateInputAriaLabel();var l=W.InputNumber.ariaLabels;Ee(i._btnUp.querySelector("button"),l.incVal),Ee(i._btnDn.querySelector("button"),l.decVal),i._tbx.type.match(/number/i)&&(i.inputType="");var a=i._tbx;a.autocomplete="off",a.spellcheck=!1,i._updateSymbols();var u=i.addEventListener.bind(i);u(a,"keypress",i._keypress.bind(i)),u(a,"keydown",i._keydown.bind(i)),u(a,"input",i._input.bind(i)),u(a,"blur",function(){i.text!=i._oldText&&i._setText(i.text)}),u(a,"paste",function(){i._fromKb=!1}),u(a,"compositionstart",function(){i._composing=!0}),u(a,"compositionend",function(){i._composing=!1,setTimeout(function(){var c=i.text,d=i._oldText,f=i._chrPct;d&&d.indexOf(f)>-1&&c.indexOf(f)<0&&(c+=f),i._setText(c)})});var h=i._clickSpinner.bind(i);return u(i._btnUp,"click",h),u(i._btnDn,"click",h),i._rptUp=new Ni(i._btnUp.querySelector("button")),i._rptDn=new Ni(i._btnDn.querySelector("button")),u(a,"wheel",function(c){if(i.handleWheel&&!c.defaultPrevented&&!c.ctrlKey&&i._isEditable()&&i.containsFocus()){var d=ye(-c.deltaY,-1,1);i._increment((i.step||1)*d),setTimeout(function(){return i.selectAll()}),c.preventDefault()}}),i.value=0,i.isRequired=!0,i.initialize(n),i}return Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate='<div class="'+ge.template+'"><div class="'+tt.input+'"><div class="'+tt.inputGroup+'"><span wj-part="btn-dec" class="'+tt.inputGroupBtn+'" tabindex="-1"><button class="'+ce.btn+" "+ce.btnDefault+'" tabindex="-1">-</button></span><input type="tel" inputmode="numeric" wj-part="input" class="'+ce.formControl+" "+qn.numeric+'"/><span wj-part="btn-inc" class="'+tt.inputGroupBtn+'" tabindex="-1"><button class="'+ce.btn+" "+ce.btnDefault+'" tabindex="-1">+</button></span></div></div></div>'),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputElement",{get:function(){return this._tbx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputType",{get:function(){return this._tbx.type},set:function(e){this._tbx.type=G(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){if(e!=this._value){if((e=V(e,!this.isRequired||e==null&&this._value==null))==null)this._setText("");else if(!isNaN(e)){var n=re.format(e,this.format);this._setText(n)}}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRequired",{get:function(){return this._tbx.required},set:function(e){this._tbx.required=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isReadOnly",{get:function(){return this._readOnly},set:function(e){this._readOnly=M(e),this.inputElement.readOnly=this._readOnly,ee(this.hostElement,q.readOnly,this.isReadOnly)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"handleWheel",{get:function(){return this._handleWheel},set:function(e){this._handleWheel=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this._min},set:function(e){e!=this._min&&(this._min=V(e,!0),this._updateAria())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},set:function(e){e!=this._max&&(this._max=V(e,!0),this._updateAria())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"step",{get:function(){return this._step},set:function(e){this._step=V(e,!0),this._updateBtn()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){return this._format},set:function(e){e!=this.format&&(this._format=G(e),this.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._tbx.value},set:function(e){e!=this.text&&(this._oldText=this.text,this._setText(e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"placeholder",{get:function(){return this._tbx.placeholder},set:function(e){this._tbx.placeholder=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showSpinner",{get:function(){return this._showBtn},set:function(e){this._showBtn=M(e),this._updateBtn()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"repeatButtons",{get:function(){return!this._rptUp.disabled},set:function(e){this._rptUp.disabled=this._rptDn.disabled=!M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ariaLabelledBy",{get:function(){return this._ariaLabelledby},set:function(e){an(this,this._tbx,e,this._updateInputAriaLabel.bind(this))},enumerable:!0,configurable:!0}),t.prototype.selectAll=function(){var e=this._tbx;ne(e,0,e.value.length)},t.prototype.clamp=function(e){return ye(e,this.min,this.max)},t.prototype.onTextChanged=function(e){this.textChanged.raise(this,e),this._updateState()},t.prototype.onValueChanged=function(e){this._updateAria(),this.valueChanged.raise(this,e)},t.prototype.dispose=function(){this._rptUp.element=null,this._rptDn.element=null,r.prototype.dispose.call(this)},t.prototype.onGotFocus=function(e){this._oldValue=this.value,this.isTouching||(this._tbx.focus(),this.selectAll()),r.prototype.onGotFocus.call(this,e)},t.prototype.onLostFocus=function(e){if(this._composing&&(this._composing=!1,this._setText(this.text)),this._isEditable()){var n=this.clamp(this.value);if(n==this.value||this.onInvalidInput(new He)){var i=re.format(n,this.format);this._setText(i)}}r.prototype.onLostFocus.call(this,e)},t.prototype.refresh=function(e){if(e===void 0&&(e=!0),r.prototype.refresh.call(this,e),this.hostElement){this._updateSymbols();var n=re.format(this.value,this.format);this._setText(n)}},t.prototype._isEditable=function(){return!this.isReadOnly&&!this.isDisabled},t.prototype._updateSymbols=function(){var e=W.Globalize.numberFormat,n=re._parseNumericFormat(this.format);this._chrDec=e["."]||".",this._chrTho=e[","]||",",this._chrNeg=e["-"]||"-",this._chrPls=e["+"]||"+",this._chrPct=e["%"]||"%",this._chrCur=n.curr||e.currency.symbol||"$",this._fmtSpc=n.spec,this._fmtPrc=n.prec,this._rxSym=new RegExp("^[%+\\-() \\"+this._chrDec+"\\"+this._chrCur+"\\"+this._chrNeg+"\\"+this._chrPls+"\\"+this._chrPct+"]*$"),this._rxNeg=new RegExp("^\\s*(\\-|\\"+this._chrNeg+")|([^e](\\-|\\"+this._chrNeg+")|\\()")},t.prototype._isNumeric=function(e,n){var i=e==this._chrDec||e>="0"&&e<="9",o=this._fmtSpc=="x";return!i&&o&&(i=e>="a"&&e<="f"||e>="A"&&e<="F"),i||n||o||(i=e==this._chrPls||e==this._chrNeg||e=="("||e==")"),i},t.prototype._getInputRange=function(e){for(var n=[0,0],i=this.text,o=!1,s=0;s<i.length;s++)this._isNumeric(i[s],e)&&(o||(n[0]=s,o=!0),n[1]=s+1);return n},t.prototype._flipSign=function(){var e=this._getSelStartDigits();this.value*=-1,this._setSelStartDigits(e)},t.prototype._getSelStartDigits=function(){for(var e=0,n=this._tbx.selectionStart,i=this._tbx.value,o=0;o<i.length&&o<n;o++)this._isNumeric(i[o],!0)&&e++;return e},t.prototype._setSelStartDigits=function(e){for(var n=this._tbx.value,i=0;i<n.length&&e>=0;i++)if(this._isNumeric(n[i],!0)){if(!e){ne(this._tbx,i);break}e--}else if(!e){ne(this._tbx,i);break}},t.prototype._increment=function(e){if(e){var n=this.clamp(_e(this.value)?this.value+e:0),i=re.format(n,this.format,!1,!1);this._setText(i)}},t.prototype._updateBtn=function(){var e=this.showSpinner&&!!this.step,n=e;B([this._btnUp,this._btnDn],{display:e?"":"none"}),ee(this.hostElement,qn.showSpinner,e),Ct(this._btnUp,n),Ct(this._btnDn,n),this._updateAria()},t.prototype._setText=function(e,n,i){if(n===void 0&&(n=!1),i===void 0&&(i=!1),!this._composing){var o=this._tbx,s=this._chrDec,l=this._rxNeg.test(e),a=this._delKey,u=this.containsFocus();if(e&&this._rxSym.test(e)&&u&&(e=this.isRequired||!a?(l?"-0":"0")+(e.indexOf(s)>-1?s:""):""),this._delKey=!1,a&&this.value==0&&!this.isRequired&&(e=""),!e){if(!this.isRequired||i){o.value="",this._oldText&&(this._oldText=e,this.onTextChanged()),this._value!=null&&(this._value=null,this.onValueChanged()),this._updateBtn();return}e="0"}var h=e.indexOf(s),c=this._format||(h>-1?"n2":"n0"),d=re.parseFloat(e,c);if(isFinite(d)||(d=this.clamp(d)),isNaN(d))this.onInvalidInput(new He)?o.value=this._oldText:(o.value=e,this.focus());else{var f=u&&h>-1?2:null,p=re.format(d,c,!1,n,f);l&&d>=0&&!a&&(p=this._chrNeg+p),u&&h>-1&&this._fmtSpc=="g"&&this._fmtPrc!=0&&(p=e).indexOf(s)<0&&(p+=s),o.value!=p&&(o.value=p,d=re.parseFloat(p,c)),this.text!=this._oldText&&(this._oldText=this.text,this.onTextChanged()),d!=this._value&&(this._value=d,this.onValueChanged()),this._updateBtn(),this._updateState()}}},t.prototype._keypress=function(e){if(!e.defaultPrevented&&!this._composing&&this._isEditable()&&e.charCode&&!e.ctrlKey&&!e.metaKey&&e.keyCode!=C.Enter){var n=this._tbx,i=String.fromCharCode(e.charCode);if(this._isNumeric(i,!1)){var o=n.maxLength;if(o>-1&&n.value.length>=o&&n.selectionEnd==n.selectionStart){e.preventDefault();return}var s=this._getInputRange(!0),l=n.selectionStart,a=n.selectionEnd;if(l<s[0]&&a<n.value.length&&(a=Math.max(a,s[0]),ne(n,s[0],a)),l>=s[1]){var u=this._fmtPrc!=null?this._fmtPrc:2,h=n.value.indexOf(this._chrDec);h>-1&&l-h>u&&e.preventDefault()}}else e.preventDefault();switch(i){case"-":case this._chrNeg:this.clamp(-1)>=0?this.value<0&&this._flipSign():this.value&&n.selectionStart==n.selectionEnd?this._flipSign():this.clamp(-1)<0&&(n.value=this._chrNeg,ne(n,1)),e.preventDefault();break;case"+":case this._chrPls:this.value<0&&this._flipSign(),e.preventDefault();break;case".":case this._chrDec:if(this._fmtPrc==0)e.preventDefault();else{var c=n.value.indexOf(this._chrDec);c>-1&&(n.selectionStart<=c&&c++,ne(n,c),e.preventDefault())}}if(!e.defaultPrevented&&Ie()){var d=n.value;(l=n.selectionStart)==(a=n.selectionEnd)&&(n.value=d.substr(0,l)+i+d.substr(a),ne(n,l+1),e.preventDefault(),this._input())}}},t.prototype._keydown=function(e){var n=this;if(this._delKey=!1,!e.defaultPrevented&&!this._composing){var i=fe(this._tbx,"wj-grid-ime");if(!i||e.keyCode==C.Back||e.keyCode==C.Delete){var o=this._tbx,s=o.value,l=o.selectionStart,a=o.selectionEnd;switch(e.keyCode){case 65:e.ctrlKey&&(setTimeout(function(){n.selectAll()}),e.preventDefault());break;case C.Up:case C.Down:this.step&&this._isEditable()&&(this._increment(this.step*(e.keyCode==C.Up?1:-1)),setTimeout(function(){n.selectAll()}),e.preventDefault());break;case C.Back:if(this._delKey=!0,a-l<2&&this._isEditable()){var u=s[a-1];(u==this._chrDec||u==this._chrPct||u==this._chrTho||u==")")&&(setTimeout(function(){a=u==n._chrPct?n._getInputRange(!0)[1]:a-1,ne(o,a)}),e.preventDefault())}break;case C.Delete:if(this._delKey=!0,a-l<2&&this._isEditable())if(s=="0"&&l==1)ne(o,0);else{var h=s[l];(h==this._chrDec||h==this._chrPct)&&(setTimeout(function(){ne(o,l+1)}),e.preventDefault())}break;case C.Escape:this.value=this._oldValue,this.selectAll()}i&&this._delKey&&this._isEditable()&&this._setText(null,!1,!0)}}},t.prototype._input=function(){var e=this;this._composing?this._fromKb=!0:setTimeout(function(){var n=e._tbx,i=n.value,o=i.indexOf(e._chrDec),s=n.selectionStart,l=e._getSelStartDigits();if(e._fmtSpc=="p"&&i.length&&i.indexOf(e._chrPct)<0&&(i+=e._chrPct),e._setText(i,e._fromKb),e._fromKb=!0,e.containsFocus()){var a=n.value,u=a.indexOf(e._chrDec),h=e._getInputRange(!0);if(i==e._chrNeg+e._chrDec&&u>-1){ne(n,u+1);return}if(i[0]==e._chrNeg&&a[0]!=e._chrNeg){a.length==1?ne(n,1):e._setSelStartDigits(l);return}i?i==e._chrDec&&u>-1?s=u+1:s<=o&&u>-1||o<0&&u<0?s+=a.length-i.length:o<0&&u>-1&&(s=u):s=u>-1?u:h[1],s=ye(s,h[0],h[1]),ne(n,s)}})},t.prototype._clickSpinner=function(e){var n=this;!e.defaultPrevented&&this._isEditable()&&this.step&&(this._increment(this.step*(J(this._btnUp,e.target)?1:-1)),this.isTouching||(H.sharedState.InvalidScroll=pi(),setTimeout(function(){return n.selectAll()})))},t.prototype._updateAria=function(){var e=this.inputElement;this.hostElement&&(S(e,"aria-valuemin",this.min),S(e,"aria-valuemax",this.max),S(e,"aria-valuenow",this.value),S(e,"aria-valuetext",this.text),S(e,"step",this.step),Ct(this._btnDn,this.min==null||this.value>this.min),Ct(this._btnUp,this.max==null||this.value<this.max))},t.prototype._updateInputAriaLabel=function(){var e=this.inputElement;!e||e.id||this._ariaLabelledby?S(e,"aria-label",null):S(e,"aria-label",this._inputElementAriaLabel)},t.prototype.getAriaLabelForScreenReader=function(){return W.InputNumber.ariaLabels.inputNumber},t._ctrlTemplate="",t}(H);rt("InputMask",{ariaLabels:{inputMask:"Input Mask"}});var Qu=function(r){Xe(t,r);function t(e,n){var i=r.call(this,e)||this;i._fullEdit=!1,i.valueChanged=new A;var o=i.getTemplate();if(i.applyTemplate(ge.hostElement+" "+ge.content+" "+wl.hostElement,o,{_tbx:"input"},"input"),i._orgTag=="INPUT"){var s=i._tbx.getAttribute("value");s&&(i.value=s)}return i._msk=new un(i._tbx),i.isRequired=!0,i.initialize(n),i.addEventListener(i._tbx,"input",function(){i.onValueChanged()}),i.addEventListener(i._tbx,"blur",i._commitText.bind(i)),i.addEventListener(i._tbx,"keydown",function(l){l.keyCode==C.Enter&&i._commitText()}),i}return Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate='<div class="'+tt.input+'"><div class="'+tt.inputGroup+'"><input wj-part="input" class="'+ce.formControl+'"/></div></div>'),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputElement",{get:function(){return this._tbx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputType",{get:function(){return this._tbx.type},set:function(e){this._tbx.type=G(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._tbx.value},set:function(e){e!=this.value&&(this._tbx.value=G(e),e=this._msk._applyMask(),this._tbx.value=e,this.onValueChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rawValue",{get:function(){return this._msk.getRawValue()},set:function(e){e!=this.rawValue&&(this.value=G(e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._msk.mask||""},set:function(e){var n=this.value;this._msk.mask=G(e),this.value!=n&&this.onValueChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"promptChar",{get:function(){return this._msk.promptChar},set:function(e){var n=this.value;this._msk.promptChar=e,this.value!=n&&this.onValueChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"overwriteMode",{get:function(){return this._msk.overwriteMode},set:function(e){this._msk.overwriteMode=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"placeholder",{get:function(){return this._tbx.placeholder},set:function(e){this._tbx.placeholder=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maskFull",{get:function(){return this._msk.maskFull},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRequired",{get:function(){return this._tbx.required},set:function(e){this._tbx.required=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isReadOnly",{get:function(){return this._tbx.readOnly},set:function(e){this._tbx.readOnly=M(e),ee(this.hostElement,q.readOnly,this.isReadOnly)},enumerable:!0,configurable:!0}),t.prototype.selectAll=function(){var e=this._msk.getMaskRange();ne(this._tbx,e[0],e[1]+1)},t.prototype.onValueChanged=function(e){this.value!=this._oldValue&&(this._oldValue=this.value,this.valueChanged.raise(this,e)),this._updateState()},t.prototype._commitText=function(){(this.rawValue||this.isRequired)&&(this.maskFull||this.onInvalidInput(new He)),this._updateState()},t.prototype.dispose=function(){this._msk.input=null,r.prototype.dispose.call(this)},t.prototype.refresh=function(e){e===void 0&&(e=!0),r.prototype.refresh.call(this,e),this.hostElement&&this._msk.refresh()},t.prototype.onGotFocus=function(e){this.selectAll(),r.prototype.onGotFocus.call(this,e)},t.prototype.getAriaLabelForScreenReader=function(){return W.InputMask.ariaLabels.inputMask},t._ctrlTemplate="",t}(H),El=function(r){Xe(t,r);function t(e,n){var i=r.call(this,e)||this;i._hsb=[.5,1,1],i._alpha=1,i.valueChanged=new A;var o=i.getTemplate();i.applyTemplate(ge.hostElement+" "+ge.content+" "+Ki.hostElement,o,{_eSB:"div-sb",_eHue:"div-hue",_eAlpha:"div-alpha",_ePreview:"div-pv",_ePal:"div-pal",_eText:"div-text"}),i._palette="#FFF,#000,#F00,#FFC000,#FFFF00,#92D050,#00B050,#00B0F0,#0070C0,#7030A0".split(","),i._updatePalette(),i._eHue.style.backgroundImage="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAD4CAIAAACi6hsPAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuM4zml1AAAAGvSURBVDhPXdBPaM9xHMfxz4pWaxcmtoOhpdXSVpiyHWxqmVpDjaU5rK34XfypjTJ/p+ZPay6jhsOsRrKwaJElf9IQq03WIkv4FeMwMq221tfje1ByeFzfvd7PEKWGEKWTQRZLySWfVRRTQjmVbKWGOhLsZT+HaeY0bbTTQSfdXOcWffTzmAFeMcwoYyT5ygS/mA5hNgphip98J8kHRnnNSwZ4yH1uc4OrdHGR87RximYO0cgedlLLdqqoYAPrWMtKVrCcJSxiPmnMJUQp/Bsyk2xyyKOAQooopYwKtlDNDur5G7SBJo7RQiv/B+2hl3s84CkvGGKEOOYnxolj/mYmhBmDJ5ngCx95xxsGecYj4pB3iENeoZMO2mmlhaMcpIE4ZII6aqhmM3HMMkooopB88sghm0wySCeVlCjMCVFIYx4LWUwOeRSwhmLWU84mqqihll3sppEmjnOSs5zjEl1c4yZ99POE5wwxwns+840fTDFLFKaZZIJxkozxlmEGGSC+GF++Sy89dHOZC8Rr4lVnOMERDrCPBPXEX22jko2UEn+/mnxyWUYWC0gnNUQh/AEc0HJs6cex0gAAAABJRU5ErkJggg==)",i._eHue.style.backgroundSize="contain",navigator.appVersion.indexOf("MSIE 9")>-1&&(i._eSB.children[0].style.filter="progid:DXImageTransform.Microsoft.gradient(startColorstr=#ffffffff,endColorstr=#00ffffff,GradientType=1)",i._eSB.children[1].style.filter="progid:DXImageTransform.Microsoft.gradient(startColorstr=#00000000,endColorstr=#ff000000,GradientType=0)"),o=t._tplCursor,i._cSB=Oe(o),i._cHue=Oe(o),i._cHue.style.width="100%",i._cAlpha=Oe(o),i._cAlpha.style.height="100%",i._eSB.appendChild(i._cSB),i._eHue.appendChild(i._cHue),i._eAlpha.appendChild(i._cAlpha);var s=i.addEventListener.bind(i),l=i.removeEventListener.bind(i),a=document;s(i.hostElement,"mousedown",function(c){s(a,"mousemove",u),s(a,"mouseup",h),i._mouseDown(c)}),s(i.hostElement,"touchstart",function(c){s(a,"touchmove",u),s(a,"touchend",h),i._mouseDown(c)});var u=function(c){i._mouseMove(c)},h=function(c){l(a,"mousemove",u),l(a,"mouseup",h),l(a,"touchmove",u),l(a,"touchend",h),i._mouseUp(c)};return s(i.hostElement,"click",function(c){var d=c.target;if(d&&d.tagName=="DIV"&&J(i._ePal,d)){var f=d.style.backgroundColor;f&&(i.value=new bt(f).toString())}}),i.value="#ffffff",i.initialize(n),i._updatePanels(),i}return Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate='<div style="position:relative;width:100%;height:100%"><div style="float:left;width:50%;height:100%;box-sizing:border-box;padding:2px"><div wj-part="div-pal"><div style="float:left;width:10%;box-sizing:border-box;padding:2px"><div style="background-color:black;width:100%">&nbsp;</div><div style="height:6px"></div></div></div><div wj-part="div-text" style="position:absolute;bottom:0px;display:none"></div></div><div style="float:left;width:50%;height:100%;box-sizing:border-box;padding:2px"><div wj-part="div-sb" class="'+Ki.colorBox+'" style="float:left;width:89%;height:89%"><div style="position:absolute;width:100%;height:100%;background:linear-gradient(to right, white 0%,transparent 100%)"></div><div style="position:absolute;width:100%;height:100%;background:linear-gradient(to top, black 0%,transparent 100%)"></div></div><div style="float:left;width:1%;height:89%"></div><div style="float:left;width:10%;height:89%"><div wj-part="div-hue" class="'+Ki.colorBox+'"></div></div><div style="float:left;width:89%;height:1%"></div><div style="float:left;width:89%;height:10%"><div style="width:100%;height:100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuM4zml1AAAAAcSURBVBhXY/iPBBYgAWpKQGkwgMqDAdUk/v8HAM7Mm6GatDUYAAAAAElFTkSuQmCC)"><div wj-part="div-alpha" class="'+Ki.colorBox+'"></div></div></div><div style="float:left;width:1%;height:10%"></div><div style="float:left;width:10%;height:10%"><div wj-part="div-pv" class="'+Ki.colorBox+'" style="position:static"></div></div></div></div>'),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showAlphaChannel",{get:function(){return this._eAlpha.parentElement.style.display!="none"},set:function(e){this._eAlpha.parentElement.style.display=M(e)?"":"none"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showColorString",{get:function(){return this._eText.style.display!="none"},set:function(e){this._eText.style.display=M(e)?"":"none"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){if(e!=this.value){e=(e=G(e)).trim();var n=bt.fromString(e);if(n){this._value=e,this._eText.innerText=e;var i=n.getHsb();(this._hsb[0]!=i[0]||this._hsb[1]!=i[1]||this._hsb[2]!=i[2]||this._alpha!=n.a)&&(i[2]==0?(i[0]=this._hsb[0],i[1]=this._hsb[1]):i[1]==0&&(i[0]=this._hsb[0]),this._hsb=i,this._alpha=n.a,this._updatePanels(),this.onValueChanged())}}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"palette",{get:function(){return this._palette},set:function(e){(e=(e=vt(e)).slice(0,10)).every(function(n){return bt.fromString(n)!=null})&&(this._palette=e,this._updatePalette())},enumerable:!0,configurable:!0}),t.prototype.onValueChanged=function(e){this._updatePanels(),this.valueChanged.raise(this,e)},t.prototype._mouseDown=function(e){this._htDown=this._getTargetPanel(e),this._htDown&&(e.preventDefault(),this.focus(),this._mouseMove(e))},t.prototype._mouseMove=function(e){var n=e.touches?e.touches[0]:e,i=this._htDown;if(i){var o=i.getBoundingClientRect(),s=this._hsb;i==this._eHue?s[0]=ye((n.clientY-o.top)/o.height,0,.99):i==this._eSB?(s[1]=ye((n.clientX-o.left)/o.width,0,1),s[2]=ye(1-(n.clientY-o.top)/o.height,0,1)):i==this._eAlpha&&(this._alpha=ye((n.clientX-o.left)/o.width,0,1)),this._updateColor()}},t.prototype._mouseUp=function(e){this._htDown=null},t.prototype._updateColor=function(){var e=bt.fromHsb(this._hsb[0],this._hsb[1],this._hsb[2],this._alpha);this.value=e.toString(),this._updatePanels()},t.prototype._updatePalette=function(){var e=new bt("#fff"),n=new bt("#000");this._ePal.innerHTML="";for(var i=0;i<this._palette.length;i++){var o=Oe('<div style="float:left;width:10%;box-sizing:border-box;padding:1px">'),s=new bt(this._palette[i]),l=s.getHsb();o.appendChild(this._makePalEntry(s,4));for(var a=0;a<5;a++){if(l[1]==0){var u=.1*a+(l[2]>.5?.05:.55);s=bt.interpolate(e,n,u)}else s=bt.fromHsb(l[0],.1+.2*a,1-.1*a);o.appendChild(this._makePalEntry(s,0))}this._ePal.appendChild(o)}},t.prototype._makePalEntry=function(e,n){var i=document.createElement("div");return B(i,{cursor:"pointer",backgroundColor:e.toString(),marginBottom:n||""}),i.innerHTML="&nbsp",i},t.prototype._updatePanels=function(){var e=bt.fromHsb(this._hsb[0],1,1,1),n=bt.fromHsb(this._hsb[0],this._hsb[1],this._hsb[2],1);this._eSB.style.backgroundColor=e.toString(),this._eAlpha.style.background="linear-gradient(to right, transparent 0%, "+n.toString()+" 100%)",navigator.appVersion.indexOf("MSIE 9")>-1&&(this._eAlpha.style.filter="progid:DXImageTransform.Microsoft.gradient(startColorstr=#00000000,endColorstr="+n.toString()+", GradientType = 1)"),this._ePreview.style.backgroundColor=this.value,this._cHue.style.top=(100*this._hsb[0]).toFixed(0)+"%",this._cSB.style.left=(100*this._hsb[1]).toFixed(0)+"%",this._cSB.style.top=(100-100*this._hsb[2]).toFixed(0)+"%",this._cAlpha.style.left=(100*this._alpha).toFixed(0)+"%"},t.prototype._getTargetPanel=function(e){var n=e.target;return J(this._eSB,n)?this._eSB:J(this._eHue,n)?this._eHue:J(this._eAlpha,n)?this._eAlpha:null},t._ctrlTemplate="",t._tplCursor='<div style="position:absolute;left:50%;top:50%;width:7px;height:7px;transform:translate(-50%,-50%);border:2px solid #f0f0f0;border-radius:50px;box-shadow:0px 0px 4px 2px #0f0f0f"></div>',t}(H);rt("CollectionViewNavigator",{ariaLabels:{byPage:{btnFirst:"Navigate to first page",btnPrev:"Navigate to previous page",btnNext:"Navigate to next page",btnLast:"Navigate to last page"},byItem:{btnFirst:"Navigate to first item",btnPrev:"Navigate to previous item",btnNext:"Navigate to next item",btnLast:"Navigate to last item"}}});var eh=function(r){Xe(t,r);function t(e,n){var i=r.call(this,e)||this;i._view=null,i._byPage=!1,i._fmt="{current:n0} / {count:n0}",i._liveRegionON=!1,i._ariaLabel="";var o=i.getTemplate();i.applyTemplate(ge.hostElement+" "+ge.content+" "+eo.pager+" "+eo.hostElement,o,{_btnFirst:"btn-first",_btnPrev:"btn-prev",_txtCurr:"txt-curr",_btnNext:"btn-next",_btnLast:"btn-last"},"input"),i.hostElement.tabIndex=-1,i._updateAriaLabels();var s=ln();return i._txtCurr.id=s,[i._btnFirst,i._btnPrev,i._btnNext,i._btnLast].forEach(function(l){S(l.firstElementChild,"aria-controls",i._txtCurr.id)}),S(i.hostElement.firstElementChild,"role","group"),S(i._txtCurr,"role","status"),i._rptNext=new Ni(i._btnNext.querySelector("button")),i._rptPrev=new Ni(i._btnPrev.querySelector("button")),i.addEventListener(i.hostElement,"click",i._click.bind(i)),i.addEventListener(i.hostElement,"keydown",i._keydown.bind(i)),S(i.hostElement,"role","navigation"),i._addA11yRelatedHandlers(),i.initialize(n),i._update(),i}return Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate='<div class="'+tt.inputGroup+'"><span wj-part="btn-first" class="'+tt.inputGroupBtn+'"><button class="'+ce.btn+" "+ce.btnDefault+'"><span class="'+ut.stepBackward+'"></span></button></span><span wj-part="btn-prev" class="'+tt.inputGroupBtn+'"> <button class="'+ce.btn+" "+ce.btnDefault+'"><span class="'+ut.left+'"></span> </button></span><span wj-part="txt-curr" tabIndex="0"></span><span wj-part="btn-next" class="'+tt.inputGroupBtn+'"><button class="'+ce.btn+" "+ce.btnDefault+'"><span class="'+ut.right+'"></span></button></span><span wj-part="btn-last" class="'+tt.inputGroupBtn+'"><button class="'+ce.btn+" "+ce.btnDefault+'"><span class="'+ut.stepForward+'"></span></button></span></div>'),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cv",{get:function(){return this._view},set:function(e){if(e!=this._view){var n=this._view;n&&(n.collectionChanged.removeHandler(this._collectionChanged),n.currentChanged.removeHandler(this._currentChanged)),n=this._view=Ve(e,"ICollectionView",!0),this._update(),n&&(n.collectionChanged.addHandler(this._collectionChanged,this),n.currentChanged.addHandler(this._currentChanged,this))}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byPage",{get:function(){return this._byPage},set:function(e){e!=this._byPage&&(this._byPage=M(e),this._update(),this._updateAriaLabels())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headerFormat",{get:function(){return this._fmt},set:function(e){e!=this._fmt&&(this._fmt=G(e),this._update())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"repeatButtons",{get:function(){return!this._rptNext.disabled},set:function(e){this._rptNext.disabled=this._rptPrev.disabled=!M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ariaLabel",{get:function(){if(this.hostElement){var e=this.hostElement.getAttribute("aria-label");if(e)return e}return this._ariaLabel},set:function(e){this.ariaLabel!==e&&(this._ariaLabel=e,this.hostElement&&S(this.hostElement,"aria-label",e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDisabled",{get:function(){return this._isDisabled},set:function(e){this._setIsDisabled(e)},enumerable:!0,configurable:!0}),t.prototype.focus=function(){var e=this._e;e&&e.offsetHeight&&(this.isDisabled||Ji(e,0)||this._txtCurr.tabIndex>=0&&this._txtCurr.focus())},t.prototype._update=function(){var e=this,n=this._view,i=this._byPage,o=n?i?n.pageIndex:n.currentPosition:0,s=n?i?n.pageCount:n.itemCount:0;this.isDisabled||(Ct(this._btnFirst,n&&o>0),Ct(this._btnPrev,n&&o>0),Ct(this._txtCurr,n!=null),Ct(this._btnNext,n&&o<s-1),Ct(this._btnLast,n&&o<s-1)),[this._btnFirst,this._btnPrev,this._btnNext,this._btnLast].forEach(function(l){l.firstElementChild.disabled?l.firstElementChild.setAttribute("tabindex","-1"):l.firstElementChild.setAttribute("tabindex",e._orgTabIndex.toString())}),this._txtCurr.textContent=zt(this._fmt,{current:n?o+1:0,count:n?s:0,currentItem:n?n.currentPosition+1:0,itemCount:n?n.itemCount:0,currentPage:n?n.pageIndex+1:0,pageCount:n?n.pageCount:0})},t.prototype._currentChanged=function(){this._update()},t.prototype._collectionChanged=function(){this._update()},t.prototype._click=function(e){var n=e.target,i=this._view,o=this._byPage;i&&(J(this._btnFirst,n)?o?i.moveToFirstPage():i.moveCurrentToFirst():J(this._btnPrev,n)?o?i.moveToPreviousPage():i.moveCurrentToPrevious():J(this._btnNext,n)?o?i.moveToNextPage():i.moveCurrentToNext():J(this._btnLast,n)&&(o?i.moveToLastPage():i.moveCurrentToLast()),(this.byPage?i.pageIndex>=i.pageCount-1||i.pageIndex<=0:i.currentPosition>=i.itemCount-1||i.currentPosition<=0)&&!this.isDisabled&&this._txtCurr.tabIndex>=0&&this._txtCurr.focus(),e.preventDefault())},t.prototype._updateAriaLabels=function(){var e=W.CollectionViewNavigator.ariaLabels[this._byPage?"byPage":"byItem"];S(this._btnFirst.firstElementChild,"aria-label",e.btnFirst),S(this._btnPrev.firstElementChild,"aria-label",e.btnPrev),S(this._btnNext.firstElementChild,"aria-label",e.btnNext),S(this._btnLast.firstElementChild,"aria-label",e.btnLast)},t.prototype._addA11yRelatedHandlers=function(){var e=this;this.addEventListener(this._txtCurr,"focus",function(n){e._txtCurr===document.activeElement&&(S(e._txtCurr,"aria-live","off"),S(e._txtCurr,"aria-label",e._txtCurr.textContent),e._liveRegionON=!1)}),this.addEventListener(this._txtCurr,"blur",function(n){e._txtCurr!==document.activeElement&&e._txtCurr.removeAttribute("aria-label")}),[this._btnFirst.firstElementChild,this._btnPrev.firstElementChild,this._btnNext.firstElementChild,this._btnLast.firstElementChild].forEach(function(n){e.addEventListener(n,"focus",function(i){setTimeout(function(){if(!e._liveRegionON){var o=Co()?"polite":"assertive";S(e._txtCurr,"aria-live",o),e._liveRegionON=!0}})})})},t.prototype._setTabOrder=function(e){var n=this._e,i=this._txtCurr.getAttribute("disabled")!=null;this._orgTabIndex=e,this.isDisabled||i?(n.tabIndex=-1,this._txtCurr.tabIndex=-1):i||(this._txtCurr.tabIndex=this._orgTabIndex)},t.prototype._keydown=function(e){if(J(this._txtCurr,e.target)&&(e.ctrlKey||e.metaKey)&&(e.key==="A"||e.key==="a")){e.preventDefault();var n=document.createRange();n.selectNodeContents(this._txtCurr);var i=window.getSelection();i.removeAllRanges(),i.addRange(n)}},t.prototype._setIsDisabled=function(e){var n=this;if((e=!!M(e,!0))!=this.isDisabled){var i=this._e;i&&(this._isDisabled=e,ee(i,q.disabled,e),[this._btnFirst,this._btnPrev,this._btnNext,this._btnLast].forEach(function(o){e?(o.firstElementChild.setAttribute("disabled",""),o.firstElementChild.setAttribute("tabindex","-1")):(o.firstElementChild.removeAttribute("disabled"),o.firstElementChild.setAttribute("tabindex",n._orgTabIndex.toString())),ee(o,q.disabled,e)}),this._txtCurr.tabIndex=e?-1:this._orgTabIndex,ee(this._txtCurr,q.disabled,e))}},t._ctrlTemplate="",t}(H);rt("Listbox",{ariaLabels:{listBox:"list box"}});var hn=function(r){Xe(t,r);function t(e,n){var i=r.call(this,e,null,!0)||this;i._cv=null,i._itemFormatter=null,i._pathDisplay=new nt(""),i._pathValue=new nt(""),i._pathChecked=new nt(""),i._html=!1,i._shGroups=!1,i._checkedItems=[],i._itemRole="option",i._caseSensitive=!1,i._addMode=!1,i._isShiftDown=!1,i._shouldClearOnShift=!0,i._vThreshold=t._VTHRESH,i._isVirtual=!1,i._children=[],i._ignoreItemFormatterTextArray=[],i._itemFormatterHelper=document.createElement("div"),i._clientHeight=-1,i._itemHeight=30,i._itemsAbove=-1,i._itemsBelow=-1,i._eSizer=document.createElement("div"),i._ePadTop=document.createElement("div"),i._ePadBot=document.createElement("div"),i._checking=!1,i._ignoredItemChangedEvents=!1,i._search="",i._fmtItemHandlers=0,i._itemCount=0,i._oldSel=null,i._container=null,i._oldSelectedIndex=-1,i._ariaLabel=W.Listbox.ariaLabels.listBox,i.selectedIndexChanged=new A,i.itemsChanged=new A,i.loadingItems=new A,i.loadedItems=new A,i.itemChecked=new A,i.checkedItemsChanged=new A,i.formatItem=new A(function(){i.invalidate()}),i._handleKeyUp=function(s){s.key==="Shift"&&(i._isShiftDown=!1,i._shouldClearOnShift=!0)},i.applyTemplate(ge.hostElement+" "+ge.content+" "+pt.hostElement,null,null);var o=i.hostElement;return S(o,"role","listbox",!0),i._updateAriaLabel(),i._orgTag=="SELECT"&&i._initFromSelect(i.hostElement),i.addEventListener(o,"click",i._click.bind(i)),i.addEventListener(o,"keydown",i._keydown.bind(i)),i.addEventListener(o,"keypress",i._keypress.bind(i)),i.addEventListener(o,"keyup",i._handleKeyUp.bind(i)),i.addEventListener(o,"wheel",function(s){o.scrollHeight>o.offsetHeight&&(s.deltaY<0&&o.scrollTop==0||s.deltaY>0&&o.scrollTop+o.offsetHeight>=o.scrollHeight)&&(s.preventDefault(),s.stopPropagation(),s.stopImmediatePropagation())}),[i._eSizer,i._ePadTop,i._ePadBot].forEach(function(s){s.tabIndex=-1,S(s,"aria-hidden",!0),B(s,{pointerEvents:"none",opacity:"0"})}),i.initialize(n),i._updateViewRange(),i.addEventListener(i.hostElement,"scroll",function(s){i._updateViewRange()}),i}return Object.defineProperty(t.prototype,"ariaLabelledBy",{get:function(){return this.hostElement.getAttribute("aria-labelledby")},set:function(e){an(this,this.hostElement,e,this._updateAriaLabel.bind(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemsSource",{get:function(){return this._items},set:function(e){this._items!=e&&(this._cv&&(this._cv.currentChanged.removeHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this),this._cv=null),this._items=e,this._cv=On(e),this._cv!=null&&(this._cv.currentChanged.addHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this)),this._populateList(),this.onItemsChanged(),this.onSelectedIndexChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collectionView",{get:function(){return this._cv},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"virtualizationThreshold",{get:function(){return this._vThreshold},set:function(e){if(e!=this._vThreshold){var n=this._getVirtual();this._vThreshold=V(e,!1,!0),n!=this._getVirtual()&&this._populateList()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showGroups",{get:function(){return this._shGroups},set:function(e){e!=this._shGroups&&(this._shGroups=M(e),this._populateList())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isContentHtml",{get:function(){return this._html},set:function(e){e!=this._html&&(this._html=M(e),this._populateList())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemFormatter",{get:function(){return this._itemFormatter},set:function(e){e!=this._itemFormatter&&(this._itemFormatter=Le(e),this._populateList())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayMemberPath",{get:function(){return this._pathDisplay.path},set:function(e){e!=this.displayMemberPath&&(this._pathDisplay.path=G(e),this._populateList())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedValuePath",{get:function(){return this._pathValue.path},set:function(e){this._pathValue.path=G(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checkedMemberPath",{get:function(){return this._pathChecked.path},set:function(e){e!=this.checkedMemberPath&&(this._pathChecked.path=G(e),S(this.hostElement,"aria-multiselectable",this.checkedMemberPath!==""?"true":"false"),this._populateList())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"caseSensitiveSearch",{get:function(){return this._caseSensitive},set:function(e){this._caseSensitive=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemRole",{get:function(){return this._itemRole},set:function(e){e!=this.itemRole&&(this._itemRole=G(e),this._populateList())},enumerable:!0,configurable:!0}),t.prototype.getDisplayValue=function(e,n){var i=null;e>-1&&Ue(this._cv)&&(i=this._cv.items[e],this.displayMemberPath&&(i=this._pathDisplay.getValue(i)));var o=i!=null?i.toString():"";return this._itemFormatter&&!n&&(o=this._itemFormatter(e,o)),o},t.prototype.getDisplayText=function(e){return this._getDisplayText(e)},t.prototype._getDisplayText=function(e,n){if(n&&this._ignoreItemFormatterTextArray[e])return this._ignoreItemFormatterTextArray[e];var i=this._getChild(e);return i!=null?i.textContent:""},t.prototype.isItemEnabled=function(e){var n=this._getChild(e);return n!=null&&!n.hasAttribute("disabled")&&!fe(n,q.disabled)&&!fe(n,Xt.separator)},Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this._cv?this._cv.currentPosition:-1},set:function(e){this._cv&&(this._oldSelectedIndex=this._cv.currentPosition,this._cv.moveCurrentToPosition(V(e)))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedItem",{get:function(){return this._cv?this._cv.currentItem:null},set:function(e){this._cv&&this._cv.moveCurrentTo(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedValue",{get:function(){var e=this.selectedItem;return e&&this.selectedValuePath&&(e=this._pathValue.getValue(e)),e},set:function(e){var n=this._cv,i=n?n.items:null,o=this.selectedValuePath,s=-1;if(i){for(var l=0;l<i.length;l++){var a=i[l],u=o?this._pathValue.getValue(a):a;if(u===e||F.equals(u,e)){s=l;break}if(this.isContentHtml&&te(u)&&u.indexOf("<")>-1&&Dt(u)===e){s=l;break}}this.selectedIndex=s}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxHeight",{get:function(){var e=this.hostElement,n=e?parseFloat(e.style.maxHeight):null;return isNaN(n)?null:n},set:function(e){var n=this.hostElement;n&&(e=V(e,!0),n.style.maxHeight=e==null?"":e+"px")},enumerable:!0,configurable:!0}),t.prototype.showSelection=function(e){e===void 0&&(e=this.containsFocus());var n=this.hostElement,i=this._children,o=this._getSelectedElement(!1),s=new ht(0,0,0,0);o!=this._oldSel&&(this._updateItemAttributes(o,!0),this._updateItemAttributes(this._oldSel,!1),this._oldSel=o),o instanceof HTMLElement?s=this._getBoundingClientRect(o):this._children.length>0&&(s=this._getBoundingClientRect(this._getChild(0)));var l=this._getBoundingClientRect(n),a=0;if(this._shGroups&&(a=this._itemHeight,!this._isVirtual)){var u=i[0];u&&u.offsetHeight&&fe(u,pt.header)&&(a=u.offsetHeight)}s.bottom>l.bottom?n.scrollTop+=s.bottom-l.bottom:s.top<l.top+a&&(n.scrollTop-=l.top+a-s.top),this._updateViewRange(),o=this._getSelectedElement(!0),S(n,"aria-activedescendant",o?o.id:null),e&&(o&&!J(o,Z())?o:n).focus(),n.tabIndex=o?-1:this._orgTabIndex},t.prototype.loadList=function(){this._populateList()},t.prototype.getItemChecked=function(e){var n=this._cv.items[e],i=this._pathChecked;return et(n)&&i.path?i.getValue(n):this._getCheckboxState(e)},t.prototype.setItemChecked=function(e,n){this._setItemChecked(e,n,!0)},t.prototype.toggleItemChecked=function(e){this.setItemChecked(e,!this.getItemChecked(e))},Object.defineProperty(t.prototype,"checkedItems",{get:function(){return this._checkedItems},set:function(e){e=Array.from(new Set(e));var n=vt(e,!1);this._arrayEquals(n,this._checkedItems)||(this._updateCheckedList(n),this._arrayEquals(n,this._checkedItems)||(this._checkedItems=n,this.onCheckedItemsChanged()))},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(e){return(e=$(e,"."+pt.listBoxItem))?e[t._DIDX_KEY]:-1},t.prototype.onSelectedIndexChanged=function(e){this.selectedIndexChanged.raise(this,e)},t.prototype.onItemsChanged=function(e){this.itemsChanged.raise(this,e)},t.prototype.onLoadingItems=function(e){this.loadingItems.raise(this,e)},t.prototype.onLoadedItems=function(e){this.loadedItems.raise(this,e)},t.prototype.onItemChecked=function(e){this.itemChecked.raise(this,e)},t.prototype.onCheckedItemsChanged=function(e){this.checkedItemsChanged.raise(this,e)},t.prototype.onFormatItem=function(e){this.formatItem.raise(this,e)},t.prototype.refresh=function(e){if(e===void 0&&(e=!0),r.prototype.refresh.call(this,e),this.hostElement){var n=this._cv?this._cv.items.length:0,i=this.formatItem.handlerCount;n!=this._itemCount||i!=this._fmtItemHandlers?(this._fmtItemHandlers=i,this._populateList()):this._updateViewRange()}},t.prototype._updateAriaLabel=function(){this.hostElement&&(this.ariaLabelledBy?Ee(this.hostElement,null):Ee(this.hostElement,this._ariaLabel))},t.prototype._updateCheckedList=function(e){var n=this,i=this._cv,o=this._pathChecked,s=new Map;if(o&&i){var l=i.sourceCollection;if(l&&l.length){et(l[0])||(o=null),e.forEach(function(u){return s.set(u,!0)}),this._checking=!0;var a=[];l.forEach(function(u){var h=s.has(u);h&&a.push(u),o&&o.setValue(u,h)}),this._checking=!1,e=a}i.items.forEach(function(u,h){n._setItemChecked(h,s.has(u),!1)})}},t.prototype._getBoundingClientRect=function(e){if(!e.offsetHeight){var n=this.indexOf(e),i=this.hostElement;if(n>-1&&i){n=this._getElementIndex(n);var o=i.getBoundingClientRect();return new ht(0,o.top-i.scrollTop+n*this._itemHeight,o.width,this._itemHeight)}}return ht.fromBoundingRect(e.getBoundingClientRect())},t.prototype._updateItemAttributes=function(e,n){if(e){var i=this.checkedMemberPath?e.getAttribute("aria-selected")==="true":null;ee(e,q.selected,n),S(e,"aria-selected",this._getAriaSelected(n,i)),e.tabIndex=n?this._orgTabIndex:-1}},t.prototype._getCheckedItems=function(){var e=this,n=this._cv,i=this._pathChecked,o=[];return n&&i&&i.path&&(o=n.sourceCollection.filter(function(s,l){if(n.filter&&!n.filter(s))return!!e._addMode&&i.getValue(s);if(et(s))return i.getValue(s);var a=n.items[l]==s?l:n.items.indexOf(s);return e.getItemChecked(a)})),o},t.prototype._arrayEquals=function(e,n){if(e==n)return!0;if(!e||!n||e.length!=n.length)return!1;for(var i=0;i<e.length;i++)if(!this._isEqual(e[i],n[i]))return!1;return!0},t.prototype._getChild=function(e){return e=this._getElementIndex(e),this._children[e]},t.prototype._getElementIndex=function(e){if(this._shGroups)for(var n=this._children,i=0;i<=e&&i<n.length;i++){var o=n[i];fe(o,pt.header)&&e++}return e},t.prototype._setItemChecked=function(e,n,i){i===void 0&&(i=!0);var o=this._cv.items[e],s=this._pathChecked,l=!1,a=this.selectedIndex,u=this._checking;if(et(o)&&s.path){if(!!s.getValue(o)!=n){var h=Ft(this._cv,"IEditableCollectionView");l=!0,this._checking=!0,h?(h.editItem(o),s.setValue(o,n),h.commitEdit()):(s.setValue(o,n),h.refresh()),this._checking=u}}else if(i){var c=this._findArrayItem(this._checkedItems,o);(n&&c<0||!n&&c>=0)&&(l=!0)}return this._setCheckboxState(e,n),i&&(l&&(this._checkedItems=this._checkedItemsUpdate(o,n),this.onItemChecked(),this.onCheckedItemsChanged()),a!=this.selectedIndex&&this.onSelectedIndexChanged()),l},t.prototype._checkedItemsUpdate=function(e,n){var i=this._cv.sourceCollection,o=this._checkedItems,s=0;if(n){for(var l=0;l<i.length;l++){var a=i[l];if(s<o.length&&this._isEqual(a,o[s]))s++;else if(this._isEqual(a,e))return o.slice(0,s).concat([e]).concat(o.slice(s))}return o}var u=this._findArrayItem(o,e);return o.slice(0,u).concat(o.slice(u+1))},t.prototype._isEqual=function(e,n){return e===n||Number.isNaN(e)&&Number.isNaN(n)},t.prototype._findArrayItem=function(e,n){if(!Number.isNaN(n))return e.indexOf(n);for(var i=0;i<e.length;i++)if(Number.isNaN(e[i]))return i;return-1},t.prototype._cvCollectionChanged=function(){this._checking||(this._populateList(),this.onItemsChanged())},t.prototype._cvCurrentChanged=function(){this._checking||(this.showSelection(),this._ignoredItemChangedEvents||this.onSelectedIndexChanged())},t.prototype._populateList=function(){var e=this.hostElement,n=this._cv;if(this._itemCount=n?n.items.length:0,this._isVirtual=this._getVirtual(),this._oldSel=null,this._itemsAbove=-1,this._itemsBelow=-1,e){var i=this.containsFocus(),o=void 0;this.onLoadingItems();var s=this._children=[];if(e.textContent="",n){var l=0,a=void 0,u=[];if(this._ignoreItemFormatterTextArray=[],this._shGroups&&n.groups&&n.groups.length){o={};for(var h=0;h<n.groups.length;h++){var c=n.groups[h];o[l]=c,a=this._createHeaderItem(c,h),u.push(a);for(var d=0;d<c.items.length;d++,l++)a=this._createItem(l,h),u.push(a)}}else for(d=0;d<n.items.length;d++,l++)a=this._createItem(l),u.push(a);var f=this._isVirtual?document.createElement("div"):e,p=0;for(f.innerHTML=u.join(""),d=0;d<f.children.length;d++){var _=f.children[d];p==n.currentPosition&&(this._oldSel=_),_[t._DIDX_KEY]=_.className.indexOf(pt.header)<0?p++:-1,s.push(_)}}if(this.formatItem.hasHandlers&&n){l=0;var v=n.items;for(_=new To(0,null,null),d=0;d<s.length;d++)_._item=s[d],this._shGroups&&fe(_._item,pt.header)?(_._index=-1,_._data=o[l]):(_._index=l,_._data=v[l++]),this.onFormatItem(_)}if(this._isVirtual){var b=this._getCanvasContext(),m=null,w=0;for(d=0;d<s.length;d++){a=s[d];var g=b.measureText(a.textContent);g.width>w&&(m=a,w=g.width)}if(m){var y=!1,I=e.style.display,x=e.style.position;e.parentElement||(y=!0,(this._container||document.body).appendChild(e),B(e,{display:"",position:"absolute"})),e.appendChild(m);var R=m.style.whiteSpace;m.style.whiteSpace="nowrap",this._ePadTop.style.width=m.offsetWidth+"px",this._itemHeight=m.offsetHeight||this._itemHeight,m.style.whiteSpace=R,this._eSizer.style.height=s.length*this._itemHeight+"px",e.appendChild(this._eSizer),this._clientHeight=e.clientHeight,Ne(this._eSizer),y&&(Ne(e),B(e,{display:I,position:x})),Ne(m)}else this._ePadTop.style.width="";this._updateViewRange()}this.checkedItems=this._getCheckedItems();var k=this._getSelectedElement(!0);i?(k||e).focus():k&&this.showSelection(),e.tabIndex=k?-1:this._orgTabIndex,this.onLoadedItems()}},t.prototype._getCanvasContext=function(){var e=document.createElement("canvas").getContext("2d"),n=getComputedStyle(this.hostElement);return n.fontSize&&n.fontFamily&&(e.font=n.fontSize+" "+n.fontFamily.split(",")[0]),e},t.prototype._getVirtual=function(){if(this._itemCount<=this._vThreshold)return!1;var e=this.hostElement;if(e){var n=getComputedStyle(e);if(parseInt(n.columnCount)>1||n.display.indexOf("flex")>-1||n.display.indexOf("grid")>-1)return!1}return!0},t.prototype._getMaxSupportedCssHeight=function(){var e=265e5;return Ie()?e=15e5:Gt()&&(e=175e5),e},t.prototype._updateViewRange=function(){var e=this.hostElement,n=this._itemHeight,i=this._children;if(!(e&&e.parentElement&&this._isVirtual&&i))return!1;var o=e.scrollTop;K(n*i.length<this._getMaxSupportedCssHeight(),"The number of items ("+i.length+") exceeds the maximum number of items ("+Math.floor(this._getMaxSupportedCssHeight()/n)+") allowed for this browser.");var s=Math.max(e.clientHeight,this._clientHeight),l=Math.floor(o/n),a=Math.min(i.length,Math.ceil((o+s)/n)-l),u=Math.max(0,i.length-l-a);if(l==this._itemsAbove&&u==this._itemsBelow)return!1;this._itemsAbove=l,this._itemsBelow=u;var h=document.createDocumentFragment(),c=this.containsFocus();if(this._ePadTop.style.height=l*n+"px",h.appendChild(this._ePadTop),this.showGroups&&!fe(i[l],pt.header)){for(var d=l;d>=0;d--)if(fe(i[d],pt.header)){h.appendChild(i[d]);break}}for(d=l;d<=l+a&&d<i.length;d++)h.appendChild(i[d]);this._ePadBot.style.height=u*n+"px",h.appendChild(this._ePadBot),e.textContent="",e.appendChild(h);var f=(l+a+u)*n-e.scrollHeight;this._ePadBot.style.height=this._ePadBot.offsetHeight-f+"px";var p=this._getSelectedElement(!0);return c&&(p||e).focus({preventScroll:!0}),e.tabIndex=p?-1:this._orgTabIndex,!0},t.prototype._getSelectedElement=function(e){var n=this.selectedIndex,i=this._getElementIndex(n),o=i>-1?this._children[i]:null;return e&&o&&!o.offsetHeight&&(o=null),o},t.prototype._handleResize=function(){this._updateViewRange()},t.prototype._createItem=function(e,n){var i=this._cv.items[e],o=e==this._cv.currentPosition,s=this.getDisplayValue(e),l=this.getDisplayValue(e,this.itemFormatter!==void 0);this._html!=1&&(s=Wt(s),l=Wt(l)),this._itemFormatterHelper.innerHTML=l,l=this._itemFormatterHelper.textContent,this._ignoreItemFormatterTextArray.push(l);var a=null;this.checkedMemberPath&&(a=!1,et(i)?a=!!this._pathChecked.getValue(i):this._checkedItems&&(a=this._checkedItems.indexOf(i)>-1),s=`
            <label class="wj-checklist-item">
              <span class="wj-checklist-base" role="checkbox" aria-hidden="true">
                <span class="wj-checklist-mark" style="display: `+(a?"block":"none")+`"></span>
              </span>
              <span class="wj-checklist-caption">`+s+`</span>
            </label>`);var u=pt.listBoxItem;if(o&&(u+=" "+q.selected),a&&(u+=" "+q.checked),this._html){var h=[Xt.separator,q.disabled];if(s.indexOf(h[0])>-1||s.indexOf(h[1])>-1){var c=Oe(s);h.forEach(function(f){fe(c,f)&&(u+=" "+f)})}}var d="aria-describedby = listGroup-"+n;return'<div id="'+("listitem-"+e)+'" class="'+u+`" 
         role="`+this.itemRole+`" 
          `+(n!==void 0?d:"")+`
         `+(this._getAriaSelected(o,a)?'aria-selected="true"':"")+` 
         tabindex="`+(o&&!this.isDisabled?this._orgTabIndex:-1)+'">'+s+"</div>"},t.prototype._getAriaSelected=function(e,n){return!!(n??e)||null},t.prototype._createHeaderItem=function(e,n){var i=Wt(e.name);return'<div id="listGroup-'+n+'" class="'+pt.listBoxItem+" "+pt.header+" "+q.disabled+'" role="group" tabindex="-1">'+i+"</div>"},t.prototype._click=function(e){if(e.button==0&&!e.defaultPrevented){var n=this.indexOf(e.target);if(n>-1)if(this.selectedIndex=n,this.checkedMemberPath){var i=this._children[this._getElementIndex(n)];i&&(i.focus({preventScroll:!0}),this.setItemChecked(n,i.getAttribute("aria-selected")!=="true"))}else $(e.target,"."+pt.listBoxItem).focus({preventScroll:!0})}},t.prototype._keydown=function(e){var n=this.selectedIndex;if(!e.defaultPrevented){if(e.keyCode==65&&(e.ctrlKey||e.metaKey)){var i=this.collectionView;if(this.checkedMemberPath&&Ue(i)){for(var o=this._children,s=[],l=!0,a=0;a<o.length;a++)if(!fe(o[a],Xs)){var u=i.items[a];s.push(u),l&&!this.checkedItems.includes(u)&&(l=!1)}s.length!==i.items.length?this.checkedItems=l?this.checkedItems.filter(function(d){return!s.includes(d)}):this.checkedItems.concat(s):this.checkedItems=this.checkedItems.length!=i.items.length?i.items:[],e.preventDefault();return}}if(!e.altKey&&!e.metaKey)switch(e.shiftKey&&(this._isShiftDown=!0),e.keyCode){case C.Down:e.preventDefault(),this._selectNext(e.shiftKey);break;case C.Up:e.preventDefault(),this._selectPrev(e.shiftKey);break;case C.Home:e.preventDefault(),e.ctrlKey&&e.shiftKey?this._selectRange(0):this._selectFirst();break;case C.End:e.preventDefault(),e.ctrlKey&&e.shiftKey?this._selectRange(this._children.length-1):this._selectLast();break;case C.PageDown:e.preventDefault(),this._selectNextPage();break;case C.PageUp:e.preventDefault(),this._selectPrevPage();break;case C.Space:if(this.checkedMemberPath&&n>-1){var h=this._children[this._getElementIndex(n)];if(h&&this.isItemEnabled(n)&&!h.hasAttribute("disabled")){var c=h.getAttribute("aria-selected")==="true";this.setItemChecked(n,!c),e.preventDefault()}}}}},t.prototype._getCheckboxState=function(e){var n=this._children[this._getElementIndex(e)];if(n)return n.getAttribute("aria-selected")==="true"},t.prototype._setCheckboxState=function(e,n){var i=this._getElementIndex(e),o=this._children[i];if(o){var s=o.querySelector(".wj-checklist-mark");if(s)o.setAttribute("aria-selected",n.toString()),ee(o,q.checked,n),s.style.display=n?"block":"none";else{var l=this._getCheckbox(i);if(l){l.checked=n;var a=$(l,"."+pt.listBoxItem);a&&(ee(a,q.checked,n),S(a,"aria-selected",!!n||null))}}}},t.prototype._getCheckbox=function(e){var n=this._children;return this.hostElement&&e>-1&&e<n.length?n[e].querySelector("input[type=checkbox]"):null},t.prototype._keypress=function(e){var n=this;if(!e.defaultPrevented&&!(e.target instanceof HTMLInputElement)&&(e.charCode>32||e.charCode==32&&this._search)){e.preventDefault(),this._search+=String.fromCharCode(e.charCode),this._toSearch&&clearTimeout(this._toSearch),this._toSearch=setTimeout(function(){n._toSearch=null,n._search=""},H._SEARCH_DELAY);var i=this._findNext();i<0&&this._search.length>1&&(this._search=this._search[this._search.length-1],i=this._findNext()),i>-1&&(this.selectedIndex=i)}},t.prototype._selectNext=function(e){e===void 0&&(e=!1);var n=this.selectedIndex,i=this._findNextEnabled(n+1);return i>-1&&(e&&this._selectRange(i),this.selectedIndex=i),i>-1},t.prototype._selectPrev=function(e){e===void 0&&(e=!1);var n=this.selectedIndex,i=this._findPrevEnabled(n-1);return i>-1&&(e&&this._selectRange(i),this.selectedIndex=i),i>-1},t.prototype._findNextEnabled=function(e){for(var n=e;n<this._children.length;n++)if(this.isItemEnabled(n))return n;return-1},t.prototype._findPrevEnabled=function(e){for(var n=e;n>=0;n--)if(this.isItemEnabled(n))return n;return-1},t.prototype._selectFirst=function(){for(var e=0;e<this._children.length;e++)if(this.isItemEnabled(e))return this.selectedIndex=e,!0;return!1},t.prototype._selectLast=function(){for(var e=this._children.length-1;e>=0;e--)if(this.isItemEnabled(e))return this.selectedIndex=e,!0;return!1},t.prototype._selectNextPage=function(){var e=this.hostElement.offsetHeight,n=this._children,i=this._cv?this._cv.items.length:0,o=0;if(e>0)for(var s=this.selectedIndex+1;s<i;s++){var l=n[s].scrollHeight||this._itemHeight;if(o+l>e&&this.isItemEnabled(s))return this.selectedIndex=s,!0;o+=l}return this._selectLast()},t.prototype._selectPrevPage=function(){var e=this.hostElement.offsetHeight,n=this._children,i=0;if(e>0)for(var o=this.selectedIndex-1;o>0;o--){var s=n[o].scrollHeight||this._itemHeight;if(i+s>e&&this.isItemEnabled(o))return this.selectedIndex=o,!0;i+=s}return this._selectFirst()},t.prototype._findNext=function(){if(this.hostElement){var e=this._children.length,n=this.selectedIndex;(n<0||this._search.length==1)&&n++;var i=this._search,o=this.caseSensitiveSearch;o||(i=i.toLowerCase());for(var s=0;s<e;s++){var l=(n+s)%e;if(this.isItemEnabled(l)){var a=this.getDisplayText(l).trim();if(o||(a=a.toLowerCase()),a.indexOf(i)==0)return l}}}return-1},t.prototype._initFromSelect=function(e){for(var n=e.children,i=[],o=-1,s=0;s<n.length;s++){var l=n[s];l.tagName=="OPTION"&&(l.hasAttribute("selected")&&(o=i.length),l.innerHTML?i.push({hdr:l.innerHTML,val:l.getAttribute("value"),cmdParam:l.getAttribute("cmd-param")}):i.push({hdr:'<div class="'+Xt.separator+'"></div>'}),e.removeChild(l),s--)}i&&(this.displayMemberPath="hdr",this.selectedValuePath="val",this.itemsSource=i,this.selectedIndex=o)},t.prototype._setIsDisabled=function(e){r.prototype._setIsDisabled.call(this,e),this._updateTabIndex()},t.prototype._setTabOrder=function(e){r.prototype._setTabOrder.call(this,e),this.isDisabled||this._updateTabIndex()},t.prototype._updateTabIndex=function(){var e=this.hostElement,n=this._getSelectedElement(!0);n?(n.tabIndex=this.isDisabled?-1:this._orgTabIndex,e.tabIndex=-1):e.tabIndex=this.isDisabled?-1:this._orgTabIndex},t.prototype._selectRange=function(e){if(this.selectedIndex!==-1){this._shouldClearOnShift&&this._isShiftDown&&(this.checkedItems=[],this._shouldClearOnShift=!1);var n=Math.min(this.selectedIndex,e),i=Math.max(this.selectedIndex,e),o=this.collectionView.items.slice(n,i+1);this.checkedItems=Array.from(new Set(this.checkedItems.concat(o)))}},t._DIDX_KEY="$WJ-DIDX",t._VTHRESH=Number.MAX_VALUE/2,t}(H),To=function(r){Xe(t,r);function t(e,n,i){var o=r.call(this)||this;return o._index=V(e),o._data=n,o._item=Ve(i,HTMLElement,!0),o}return Object.defineProperty(t.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),t}(Di);rt("MultiSelectListBox",{filterPlaceholder:"Filter",selectAll:"Select All"});var Il=function(r){Xe(t,r);function t(e,n){var i=r.call(this,e)||this;i._selectAllLabel=null,i._filterPlaceholder=null,i._filterText="",i._checkOnFilter=!0,i._delay=H._SEARCH_DELAY,i.checkedItemsChanged=new A,i.selectedIndexChanged=new A;var o=i.getTemplate();i.applyTemplate(ge.hostElement+" "+ge.content+" "+Kn.hostElement,o,{_selectAll:"select-all",_filter:"filter",_lbHost:"list-box"}),i._selectAll.style.display="none",i._filter.style.display="none",i._lbx=new hn(i._lbHost,{checkedMemberPath:t._DEF_CHECKED_PATH,loadedItems:function(){return i._updateCheckAllCheckbox()},checkedItemsChanged:function(l){return i.onCheckedItemsChanged(l)},selectedIndexChanged:function(){return i.onSelectedIndexChanged()}}),i._cbSelectAll=i._selectAll.querySelector("input[type=checkbox]"),i._spSelectAll=i._selectAll.querySelector("label>span");var s=W.MultiSelectListBox;return Ot(i._spSelectAll,s.selectAll),i._filter.placeholder=s.filterPlaceholder,i.initialize(n),i.addEventListener(i._filter,"input",function(){i._filter.value!=i._filterText&&(i._filterText=i._filter.value,i._toSearch&&clearTimeout(i._toSearch),i._toSearch=setTimeout(function(){i._toSearch=null,i._applyFilter()},i.delay))}),i.addEventListener(i._cbSelectAll,"click",function(l){var a=i._lbx.collectionView;Ue(a)&&(i.checkedItems=l.target.checked?a.items:[])}),i.addEventListener(i.hostElement,"keydown",function(l){var a=i.showFilterInput?i._filter:null,u=i._lbx;if(a&&l.keyCode==C.F3&&(ne(a,0,a.value.length),l.preventDefault()),Z()==a){var h=!l.altKey;switch(l.keyCode){case C.Escape:case C.F4:h=!1}h&&l.stopPropagation()}if(!u.containsFocus())switch(l.keyCode){case C.Up:case C.Down:if(i._lbx.focus(),!l.altKey){var c=u.selectedIndex+(l.keyCode==C.Up?-1:1);u.selectedIndex=Math.max(0,c)}l.preventDefault()}},!0),i.hostElement.tabIndex=-1,i._lbx.tabOrder=i._orgTabIndex,i}return Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate='<div class="'+ge.template+" "+pt.hostElement+'"><input wj-part="filter" class="'+ce.formControl+'" tabindex="-1"><div wj-part="select-all" class="'+Kn.header+" "+Kn.selectAll+" "+pt.listBoxItem+'"><label><input type="checkbox" tabindex="-1"> <span></span></label></div><div wj-part="list-box"/></div>'),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemsSource",{get:function(){return this._lbx.itemsSource},set:function(e){this._lbx.itemsSource=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collectionView",{get:function(){return this._lbx.collectionView},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"virtualizationThreshold",{get:function(){return this._lbx.virtualizationThreshold},set:function(e){this._lbx.virtualizationThreshold=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayMemberPath",{get:function(){return this._lbx.displayMemberPath},set:function(e){this._lbx.displayMemberPath=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isContentHtml",{get:function(){return this._lbx.isContentHtml},set:function(e){this._lbx.isContentHtml=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"caseSensitiveSearch",{get:function(){return this._lbx.caseSensitiveSearch},set:function(e){this._lbx.caseSensitiveSearch=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"delay",{get:function(){return this._delay},set:function(e){this._delay=V(e,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showGroups",{get:function(){return this._lbx.showGroups},set:function(e){this._lbx.showGroups=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checkOnFilter",{get:function(){return this._checkOnFilter},set:function(e){e!=this.checkOnFilter&&(this._checkOnFilter=M(e),this.checkedItems=[])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this._lbx.selectedIndex},set:function(e){this._lbx.selectedIndex=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"listBox",{get:function(){return this._lbx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showFilterInput",{get:function(){return this._filter.style.display==""},set:function(e){e!=this.showFilterInput&&(this._filter.style.display=M(e)?"":"none",this.showFilterInput||(this._filter.value="",this._applyFilter()))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filterInputPlaceholder",{get:function(){return this._filterPlaceholder},set:function(e){e!=this._filterPlaceholder&&(this._filterPlaceholder=G(e),this.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showSelectAllCheckbox",{get:function(){return this._selectAll.style.display==""},set:function(e){this._selectAll.style.display=M(e)?"":"none"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectAllLabel",{get:function(){return this._selectAllLabel},set:function(e){e!=this._selectAllLabel&&(this._selectAllLabel=G(e),this.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checkedMemberPath",{get:function(){var e=this.listBox.checkedMemberPath;return e!=t._DEF_CHECKED_PATH?e:null},set:function(e){e=G(e),this.listBox.checkedMemberPath=e||t._DEF_CHECKED_PATH},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checkedItems",{get:function(){return this.listBox.checkedItems},set:function(e){this.listBox.checkedItems=vt(e)},enumerable:!0,configurable:!0}),t.prototype.onCheckedItemsChanged=function(e){var n=this;this._updateCheckAllCheckbox(),this.checkedItemsChanged.raise(this,e),e._items&&typeof e._items[0]=="object"&&(this.checkedMemberPath||t._DEF_CHECKED_PATH)in e._items[0]&&setTimeout(function(){n._lbx._updateCheckedList(n.checkedItems)},0)},t.prototype.onSelectedIndexChanged=function(e){this.selectedIndexChanged.raise(this,e)},t.prototype.refresh=function(e){if(e===void 0&&(e=!0),r.prototype.refresh.call(this,e),this.hostElement){var n=W.MultiSelectListBox;this._filter.placeholder=this._filterPlaceholder!=null?this._filterPlaceholder:n.filterPlaceholder,this._spSelectAll&&Ot(this._spSelectAll,this._selectAllLabel!=null?this._selectAllLabel:n.selectAll),this._updateCheckAllCheckbox()}},t.prototype.dispose=function(){this.listBox.dispose(),r.prototype.dispose.call(this)},t.prototype._applyFilter=function(){var e=this,n=this._lbx,i=n.collectionView,o=this._filter.value,s=o?new RegExp(yo(o),n.caseSensitiveSearch?"":"i"):null,l=this.displayMemberPath,a=l?new nt(l):null,u=this.checkOnFilter?null:this.checkedItems;i.filter=function(h){return s!=null?u&&u.indexOf(h)>-1?!0:(a&&(h=a.getValue(h)),e.isContentHtml&&(h=Dt(h)),h!=null&&s.test(h.toString())):!0},n.selectedIndex=Math.max(0,n.selectedIndex),this._checkOnFilter&&(this.checkedItems=s?i.items:[])},t.prototype._updateCheckAllCheckbox=function(){var e=this._lbx.collectionView,n=this._cbSelectAll;if(Ue(e)){var i=e.items.length,o=this.checkedItems.length;tn(n,o==i||o!=0&&null),n.disabled=!1}else tn(n,!1),n.checked=!1,n.disabled=!0},t.prototype._setIsDisabled=function(e){r.prototype._setIsDisabled.call(this,e),this.hostElement.tabIndex=-1,this.isDisabled?this._lbx.tabOrder=-1:this._lbx.tabOrder=this._orgTabIndex},t.prototype._setTabOrder=function(e){this._orgTabIndex=e,this._lbx.tabOrder=e},t.prototype.tryForceClearDelayAndFilter=function(){var e=this;if(this._toSearch){var n=this._delay;this._filterText=this._filter.value,this._toSearch&&clearTimeout(this._toSearch),this._toSearch=setTimeout(function(){e._toSearch=null,e._applyFilter()},0),this._delay=n}},t.prototype.onLostFocus=function(){this.tryForceClearDelayAndFilter(),r.prototype.onLostFocus.call(this)},t._DEF_CHECKED_PATH="$checked",t._ctrlTemplate="",t}(H);rt("Calendar",{ariaLabels:{calendar:"Calendar",chooseDate:"Choose Date",chooseMonth:"Choose Month",monthView:"Month View",yearView:"Year View",selectYear:"Select Year",prvMo:"Previous Month",today:"Select Today",nxtMo:"Next Month",prvYr:"Previous Year",currMo:"Current Month",nxtYr:"Next Year"},buttons:{ok:"OK",cancel:"Cancel"}});var $e;(function(r){r[r.None=0]="None",r[r.Day=1]="Day",r[r.Month=2]="Month",r[r.Range=3]="Range"})($e||($e={}));var Xi;(function(r){r[r.None=0]="None",r[r.FirstMonth=1]="FirstMonth",r[r.LastMonth=2]="LastMonth",r[r.FirstAndLastMonths=3]="FirstAndLastMonths",r[r.AllMonths=4]="AllMonths",r[r.Outside=5]="Outside"})(Xi||(Xi={}));var di;(function(r){r[r.None=0]="None",r[r.All=1]="All"})(di||(di={}));var Sl=function(r){Xe(t,r);function t(e,n){var i=r.call(this,e)||this;i._yrPicker=!0,i._mtPicker=Xi.FirstMonth,i._wksBefore=0,i._wksAfter=0,i._rngMin=0,i._rngMax=0,i._min=null,i._max=null,i._readOnly=!1,i._handleWheel=!0,i._fdw=null,i._selMode=$e.Day,i._ariaLabel=W.Calendar.ariaLabels.calendar,i._tmYrHidden=0,i._fmtYrMo="y",i._fmtYr="yyyy",i._fmtDayHdr="ddd",i._fmtDay="d ",i._fmtMonths="MMM",i._fmtDayTitle="dddd",i.valueChanged=new A,i.rangeEndChanged=new A,i.rangeChanged=new A,i.displayMonthChanged=new A,i.formatItem=new A(function(){i.invalidate()}),i._updateCellFocus=function(a,u){ee(a,xe.focused,u),S(a,"tabIndex",u?"0":"-1"),u&&i.containsFocus()&&a.focus()},i.cancelButtonClicked=new A,i.OKButtonClicked=new A,i._enterKeyDownToSetValue=new A,i._value=i._rngEnd=F.newDate(),i._month=i._getMonth(i._value),i._cals=[i],i._createChildren(),i._createYearPicker();var o=i.hostElement,s=i.addEventListener.bind(i);s(o,"keydown",i._keydown.bind(i)),s(o,"click",i._click.bind(i)),s(i._btnCancel,"click",i.oneCancelButtonClick.bind(i)),s(i._btnOK,"click",i.onOkButtonClick.bind(i)),i._focusValue=F.newDate(),S(o,"role","application"),S(i.hostElement,"aria-label",i._ariaLabel);var l=W.Calendar.buttons;return Ot(i._btnOK,l.ok),Ot(i._btnCancel,l.cancel),i._keyActionTab=di.None,i._rptUp=new Ni(i._btnPrv),i._rptDn=new Ni(i._btnNxt),i.addEventListener(o,"wheel",function(a){i.handleWheel&&!a.defaultPrevented&&!i.isReadOnly&&i.containsFocus()&&(a.deltaY<0?i._btnPrv.click():i._btnNxt.click(),a.preventDefault())}),i.initialize(n),i.refresh(!0),i}return Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate='<div class="'+ge.content+" "+xe.calendarOuter+'"><div wj-part="tbl-header" class='+xe.calendarHeader+'><div wj-part="btn-month" class='+xe.monthSelect+' role="button" aria-live="polite"><span wj-part="span-month"></span> <span class='+ut.down+'></span></div><div class="'+ce.btnGroup+'"><button wj-part="btn-prev" class="'+ce.btn+" "+ce.btnDefault+'" tabindex="-1"><span class='+ut.left+'></span></button><button wj-part="btn-today" class="'+ce.btn+" "+ce.btnDefault+'" tabindex="-1"><span class='+ut.circle+'></span></button><button wj-part="btn-next" class="'+ce.btn+" "+ce.btnDefault+'" tabindex="-1"><span class='+ut.right+'></span></button></div></div><table wj-part="tbl-month" class='+xe.calendarMonth+' role="grid"></table><table wj-part="tbl-year" class='+xe.calendarYear+' role="grid"></table><div wj-part="confirmation-button-container" class="'+xe.confirmationButtonContainer+'"><button wj-part="btn-ok" class="'+ce.btn+" "+xe.button+'"></button><button wj-part="btn-cancel" class="'+ce.btn+" "+xe.button+'"></button></div>'),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){if((!F.sameDate(e,this._value)||!F.sameTime(e,this._value))&&(this._clearingRangeEnd=!F.equals(this._value,e),this.rangeEnd=null,this._clearingRangeEnd=!1,e=It(e,!0),e=this._clamp(e),(this._valid(e)||e==null)&&(this.ensureVisible(e||new Date),F.equals(this._value,e)||(this._value=e,this.focusMode&&(this._focusValue=e),this.invalidate(!1),this.onValueChanged())),!this.value)){var n=this.min,i=this.max,o=this.displayMonth;i&&i<o?this.ensureVisible(i):n&&n>o&&this.ensureVisible(n)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"focusValue",{get:function(){return this._focusValue},set:function(e){this._clearingRangeEnd=!F.equals(this._focusValue,e),this.rangeEnd=null,this._clearingRangeEnd=!1,e=It(e,!0),e=this._clamp(e),(this._valid(e)||e==null)&&(this.ensureVisible(e||new Date),this._focusValue=e,this.invalidate(!1))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rangeEnd",{get:function(){return this._rngEnd},set:function(e){if(e=It(e,!0),(e=this._clamp(e))&&this._value&&this._rngMode()){e<this._value&&(e=this._value);var n=this._rngMin,i=this._rngMax;if(n&&n>0||i&&i>0){var o=this._value,s=Math.ceil((e.getTime()-o.getTime())/864e5)+1;n&&n>0&&s<n&&(e=F.addDays(o,n-1)),i&&i>0&&s>i&&(e=F.addDays(o,i-1))}}(this._valid(e)||e==null)&&!F.equals(this._rngEnd,e)&&(this._rngEnd=e,this.ensureVisible(e),this.invalidate(!1),this._clearingRangeEnd||this.onRangeEndChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rangeMin",{get:function(){return this._rngMin},set:function(e){(e=V(e,!0,!0))!=this._rngMin&&(this._rngMin=e,this._syncProp(this,"rangeMin"),this._rngMode()&&this._rngEnd&&(this.rangeEnd=this._rngEnd))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rangeMax",{get:function(){return this._rngMax},set:function(e){(e=V(e,!0,!0))!=this._rngMax&&(this._rngMax=e,this._syncProp(this,"rangeMax"),this._rngMode()&&this._rngEnd&&(this.rangeEnd=this._rngEnd))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this._min},set:function(e){(e=It(e,!0))!=this.min&&(this._min=e,this._syncProp(this,"min"),this.refresh(),!this.value&&e&&e>this.displayMonth&&this.ensureVisible(e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},set:function(e){(e=It(e,!0))!=this.max&&(this._max=e,this._syncProp(this,"max"),this.refresh(),!this.value&&e&&e<this.displayMonth&&this.ensureVisible(e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectionMode",{get:function(){return this._selMode},set:function(e){var n=$e;(e=pe(e,n))!=this._selMode&&(this._selMode=e,this._mthMode()&&(this.monthView=!1),this._rngEnd=e==n.Range?this._value:null,this.refresh(),this._syncProp(this,"selectionMode"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isReadOnly",{get:function(){return this._readOnly},set:function(e){this._readOnly=M(e),ee(this.hostElement,q.readOnly,this.isReadOnly),this._syncProp(this,"isReadOnly")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"handleWheel",{get:function(){return this._handleWheel},set:function(e){this._handleWheel!=e&&(this._handleWheel=M(e),this._syncProp(this,"handleWheel"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"repeatButtons",{get:function(){return!this._rptUp.disabled},set:function(e){this._rptUp.disabled=this._rptDn.disabled=!M(e),this._syncProp(this,"repeatButtons")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showYearPicker",{get:function(){return this._yrPicker},set:function(e){e!=this._yrPicker&&(this._yrPicker=M(e),this._syncProp(this,"showYearPicker"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showMonthPicker",{get:function(){return this._mtPicker},set:function(e){if(e!=this._mtPicker){var n=Xi;st(e)&&(e=e?n.FirstMonth:n.None),this._mtPicker=pe(e,n),ee(this.hostElement,ce.btnsOutside,this._getShowMonthPicker()==n.Outside),this.refresh(),this._syncProp(this,"showMonthPicker")}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstDayOfWeek",{get:function(){return this._fdw},set:function(e){if(e!=this._fdw){if((e=V(e,!0))&&(e>6||e<0))throw"firstDayOfWeek must be between 0 and 6 (Sunday to Saturday).";this._fdw=e,this.refresh(),this._syncProp(this,"firstDayOfWeek")}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayMonth",{get:function(){return this._month},set:function(e){e=It(e),e=this._getMonth(e);var n=this._getDisplayMonthRange();n.to&&e>n.to&&(e=n.to),n.from&&e<n.from&&(e=n.from),F.equals(this.displayMonth,e)||(this._month=e,this.invalidate(!0),this.onDisplayMonthChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"monthCount",{get:function(){var e=this.hostElement;return e?e.querySelectorAll("."+xe.hostElement).length+1:0},set:function(e){var n=this,i=this.hostElement;if(e!=this.monthCount&&i){var o=i.querySelectorAll("."+xe.hostElement);e=Fe(e,!1),K(e>0,"monthCount must be >= 1."),K(e==1||!$(i.parentElement,"."+xe.hostElement),"Only top-level calendars can set monthCount.");for(var s=0;s<o.length;s++){var l=o[s];Ne(l),this._getCalendar(l).dispose()}for(this._cals=[this],s=1;s<e;s++){(l=new t(document.createElement("div"),{itemFormatter:this.itemFormatter,itemValidator:this.itemValidator,formatItem:function(h,c){return n.onFormatItem(c)}}))._selMode=this._selMode,l._value=this._value,l._rngEnd=this._rngEnd;for(var a in this)if(!/^(_.*|constructor|displayMonth|monthCount|hostElement|rightToLeft|isUpdating|isTouching)$/.test(a)){var u=this[a];oe(u)||u instanceof A||(l[a]=u)}this._cals.push(l),i.appendChild(l.hostElement)}ee(i,xe.calendarMultiMonth,e>1),this._syncProp(this,"displayMonth")}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formatYearMonth",{get:function(){return this._fmtYrMo},set:function(e){e!=this._fmtYrMo&&(this._fmtYrMo=G(e),this._syncProp(this,"formatYearMonth"),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formatDayHeaders",{get:function(){return this._fmtDayHdr},set:function(e){e!=this._fmtDayHdr&&(this._fmtDayHdr=G(e),this._syncProp(this,"formatDayHeaders"),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formatDays",{get:function(){return this._fmtDay},set:function(e){e!=this._fmtDay&&(this._fmtDay=G(e),this._syncProp(this,"formatDays"),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formatYear",{get:function(){return this._fmtYr},set:function(e){e!=this._fmtYr&&(this._fmtYr=G(e),this._syncProp(this,"formatYear"),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formatMonths",{get:function(){return this._fmtMonths},set:function(e){e!=this._fmtMonths&&(this._fmtMonths=G(e),this._syncProp(this,"formatMonths"),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showHeader",{get:function(){return this._tbHdr.style.display!="none"},set:function(e){e!=this.showHeader&&(this._tbHdr.style.display=M(e)?"":"none",this._syncProp(this,"showHeader"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"monthView",{get:function(){return this._tbMth.style.display!="none"},set:function(e){if(e!=this.monthView){this._tbMth.style.display=e?"":"none",this._tbYr.style.display=e?"none":"",this.refresh();var n=W.Calendar.ariaLabels;Ee(this._btnPrv,e?n.prvMo:n.prvYr),Ee(this._btnTdy,e?n.today:n.currMo),Ee(this._btnNxt,e?n.nxtMo:n.nxtYr),Ee(this._btnMth,e?n.monthView:n.yearView),this._updateMonthButtonAria(),this._syncProp(this,"monthView")}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weeksBefore",{get:function(){return this._wksBefore},set:function(e){e!=this._wksBefore&&(this._wksBefore=Math.floor(V(e,!1,!0)),this._syncProp(this,"weeksBefore"),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weeksAfter",{get:function(){return this._wksAfter},set:function(e){e!=this._wksAfter&&(this._wksAfter=Math.floor(V(e,!1,!0)),this._syncProp(this,"weeksAfter"),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemFormatter",{get:function(){return this._itemFormatter},set:function(e){e!=this._itemFormatter&&(this._itemFormatter=Le(e),this._syncProp(this,"itemFormatter"),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemValidator",{get:function(){return this._itemValidator},set:function(e){e!=this._itemValidator&&(this._itemValidator=Le(e),this._syncProp(this,"itemValidator"),this.invalidate())},enumerable:!0,configurable:!0}),t.prototype.hitTest=function(e){var n=e instanceof MouseEvent?e.target:e instanceof Element?e:null;return K(n!=null,"MouseEvent or Element expected"),n?n[t._DATE_KEY]:null},t.prototype.ensureVisible=function(e){if(e!=null){var n=this._getCalendars(),i=n.indexOf(this),o=n[0],s=n[n.length-1];e<o.displayMonth?this.displayMonth=F.addMonths(this._getMonth(e),i):e>s.displayMonth&&(this.displayMonth=F.addMonths(this._getMonth(e),i-n.length+1))}},t.prototype.onValueChanged=function(e){this.valueChanged.raise(this,e),this._syncProp(this,"value")},t.prototype.onRangeEndChanged=function(e){this.rangeEndChanged.raise(this,e),this._syncProp(this,"rangeEnd"),this._value&&this._rngEnd&&this.onRangeChanged(e)},t.prototype.onRangeChanged=function(e){this.rangeChanged.raise(this,e)},t.prototype.onDisplayMonthChanged=function(e){this.displayMonthChanged.raise(this,e),this._syncProp(this,"displayMonth")},t.prototype.onFormatItem=function(e){this.formatItem.raise(this,e)},t.prototype._containsFocusImpl=function(e){return r.prototype._containsFocusImpl.call(this,e)||this._lbYears._containsFocusImpl(e)},t.prototype.dispose=function(){this._rptUp.element=null,this._rptDn.element=null,this._lbYears.dispose(),r.prototype.dispose.call(this)},t.prototype.refresh=function(e){e===void 0&&(e=!0);var n=this.hostElement,i=this.containsFocus();if(n){r.prototype.refresh.call(this,e),e&&this._updateContent(),this._updateSelection();var o=this._getDisplayMonthRange(),s=this.displayMonth,l=o.from==null||s>o.from,a=o.to==null||s<o.to;Ct(this._btnPrv,l),Ct(this._btnNxt,a),l&&a||this.containsFocus()||this.focus();var u=!0,h=F.newDate(),c=this._min&&this._min>h,d=this._max&&this._max<h;if((c||d)&&(u=!1),Ct(this._btnTdy,u),i&&!this._isButtonFocused()){var f=(this.monthView?this._tbMth:this._tbYr).querySelector("td."+q.selected)||n;f&&!this.focusMode&&f.focus()}var p=this._getCalendars();p.length>1&&this==p[0]&&p.forEach(function(_,v){v>0&&_.refresh(e)})}},t.prototype._getShowMonthPicker=function(){var e=Xi,n=this._getCalendars(),i=n.indexOf(this),o=this.showMonthPicker;switch(o){case e.FirstMonth:case e.Outside:return i==0?o:0;case e.LastMonth:return i==n.length-1?o:0;case e.FirstAndLastMonths:return i==0||i==n.length-1?o:0;case e.AllMonths:return o}return 0},t.prototype._getDisplayMonthRange=function(){var e={from:null,to:null};if(this.min||this.max){var n=this._getCalendars(),i=n.indexOf(this),o=this._mthMode()?F.addYears:F.addMonths;this.min&&(e.from=o(this._getMonth(this.min),i)),this.max&&(e.to=o(this._getMonth(this.max),i-n.length+1))}return e},t.prototype._getCalendar=function(e){return H.getControl(e)},t.prototype._getCalendars=function(){var e=$(this.hostElement,"."+xe.calendarMultiMonth);return(e?this._getCalendar(e):this)._cals},t.prototype._syncProp=function(e,n){var i=this;if(!this._syncing){var o=this._getCalendars();if(o&&o.length>1){var s=e[n],l=this._mthMode()?F.addYears:F.addMonths;n=="displayMonth"&&(s=l(s,-o.indexOf(e))),o[0].deferUpdate(function(){i._syncing=!0,o.forEach(function(a,u){if(a!=e){var h=a.displayMonth;a[n]=n=="displayMonth"?l(s,u):s,n=="value"&&(a.displayMonth=h,i._rngMode()&&(a.rangeEnd=null))}}),i._syncing=!1})}}},t.prototype._updateContent=function(){var e=this.displayMonth,n=re.format,i=F,o=this._getShowMonthPicker();Ot(this._spMth,n(e,this._fmtYrMo));var s=this._btnMth.querySelector("."+ut.down);s&&(s.style.display=this._mthMode()||!o?"none":"");var l=$(this._btnTdy,"."+ce.btnGroup);l&&(l.style.display=o?"":"none");var a=this._fdw!=null?this._fdw:re.getFirstDayOfWeek(),u=i.addDays(e,-(e.getDay()-a+7)%7),h=i.monthLast(e),c=this._tbMth.querySelectorAll("th");this._updateMonthButtonAria();for(var d=0;d<7&&d<c.length;d++){var f=i.addDays(u,d);Ot(c[d],n(f,this._fmtDayHdr)),S(c[d],"tabIndex","-1"),S(c[d],"abbr",n(f,this._fmtDayTitle))}var p=!1;this._dateViewContainsFocus()&&(p=!0);var _=this._tbMth.querySelectorAll("tr");for(d=1;d<_.length;d++)Ne(_[d]);p&&this.focus();var v=i.addDays(u,-7*this._wksBefore);for(d=0;d<this._wksBefore;d++)v=this._addWeek(v,xe.weekBefore);for(;v<=h;)v=this._addWeek(v);for(d=0;d<this._wksAfter;d++)v=this._addWeek(v,xe.weekAfter);c=this._tbYr.querySelectorAll("td");var b=this._tbYr.querySelectorAll("th");for(b.length&&Ot(b[0],n(e,this._fmtYr)),d=0;d<c.length;d++){v=i.newDate(e.getFullYear(),d,1);var m=c[d],w=!this._monthInValidRange(v);m[t._DATE_KEY]=v;var g=re.format(v,"MMMM yyyy");Ot(m,n(v,this._fmtMonths)),ee(m,q.disabled,w),Ee(m,g),S(m,"tabIndex","-1"),S(m,"abbr",g)}this._confirmationButtonContainer.style.display=this.showConfirmationButtons?"":"none",this._updateButtonTabIndex()},t.prototype._updateSelection=function(){for(var e=t._DATE_KEY,n=F,i=this._tbMth.querySelectorAll("td"),o=0;o<i.length;o++){var s=(d=i[o])[e],l=this.value,a=this.rangeEnd,u=this._selMode&&l!=null&&n.sameDate(s,l),h=this._selMode&&l!=null&&n.sameDate(s,a),c=this._selMode&&l!=null&&s>l&&a!=null&&s<=a;ee(d,q.selected,u),ee(d,q.multiSelected,c),ee(d,q.lastSelected,h),S(d,"aria-selected",!!u||null),this._customizeCell(o,s,d)}for(i=this._tbYr.querySelectorAll("td"),o=0;o<i.length;o++){var d;s=(d=i[o])[e],u=this._sameMonth(s,this.value),ee(d,q.selected,u),S(d,"aria-selected",!!u||null)}this.focusMode&&this.isDisabled!==!0&&this._updateFocusInAccessibilityMode()},t.prototype._updateFocusInAccessibilityMode=function(){for(var e,n=t._DATE_KEY,i=F,o=this._tbMth.querySelectorAll("td"),s=0;s<o.length;s++){var l=(h=o[s])[n],a=this._selMode&&this.focusValue!=null&&i.sameDate(l,this.focusValue)&&this._isSameDay(this.focusValue,l);e===void 0&&!h.classList.contains(xe.dayOtherMonth)&&this._isDayValid(l)&&(e=h),this._isSameDay(this.focusValue,l)&&this._isDayValid(l)&&(e=h),this._updateCellFocus(h,a)}this._tbMth.querySelectorAll('[tabindex="0"]').length===0&&this.monthView&&e&&(S(e,"tabIndex","0"),ee(e,xe.focused,!0),this._focusValue=e[n]);var u=(o=this._tbYr.querySelectorAll("td"))[0];for(s=0;s<o.length;s++){var h;l=(h=o[s])[n],a=this._sameMonth(l,this.focusValue),this._isSameMonth(this.value,l)&&(u=h),this._updateCellFocus(h,a)}this._tbYr.querySelectorAll('td[tabindex="0"]').length===0&&!this.monthView&&(S(u,"tabIndex","0"),ee(u,xe.focused,!0),this._focusValue=u[n])},t.prototype._addWeek=function(e,n){for(var i=this._createElement("tr",this._tbMth,n),o=F,s=0;s<7;s++){var l=this._createElement("td",i),a=o.addDays(e,s);l[t._DATE_KEY]=a,Ot(l,re.format(a,this._fmtDay)),Ee(l,re.format(a,"D"));var u=!this._valid(a),h=a.getDay(),c=a.getMonth()!=this.displayMonth.getMonth();ee(l,xe.dayToday,o.sameDate(a,o.newDate())),ee(l,xe.dayWeekend,h==0||h==6),ee(l,xe.dayOtherMonth,c),ee(l,q.invalid,u||!this._inValidRange(a)),S(l,"aria-disabled",u||!this._inValidRange(a))}return o.addDays(e,7)},t.prototype._customizeCell=function(e,n,i){if(oe(this.itemFormatter)&&this.itemFormatter(n,i),this.formatItem.hasHandlers){var o=new To(e,n,i);this.onFormatItem(o)}},t.prototype._canChangeValue=function(){return!this._readOnly&&this._selMode!=$e.None},t.prototype._valid=function(e){return!(!Be(e)||!F.sameDate(e,this._clamp(e)))&&(!oe(this.itemValidator)||this.itemValidator(e))},t.prototype._inValidRange=function(e){var n=F.fromDateTime;return!(this.min&&e<n(this.min,e))&&!(this.max&&e>n(this.max,e))},t.prototype._monthInValidRange=function(e){if(this.min||this.max){var n=e.getFullYear(),i=e.getMonth(),o=F,s=o.newDate(n,i,1),l=o.newDate(n,i+1,0);if(this.min&&this.min>l||this.max&&this.max<s)return!1}return!0},t.prototype._sameMonth=function(e,n){return Be(e)&&Be(n)&&e.getMonth()==n.getMonth()&&e.getFullYear()==n.getFullYear()},t.prototype._getValidDate=function(e,n){if(Be(e))for(var i=e.getFullYear(),o=e.getMonth()+(n?0:1),s=n?1:0,l=F,a=l.newDate(i,o,s),u=n?1:-1,h=0;h<31;h++){if(this._valid(a))return a;a=l.addDays(a,u)}return null},t.prototype._clamp=function(e){if(e){var n=F.fromDateTime;if(this.min){var i=n(this.min,e);e<i&&(e=i)}if(this.max){var o=n(this.max,e);e>o&&(e=o)}}return e},t.prototype._createChildren=function(){var e=this.getTemplate();this.applyTemplate(ge.hostElement+" "+xe.hostElement,e,{_tbHdr:"tbl-header",_btnMth:"btn-month",_spMth:"span-month",_btnPrv:"btn-prev",_btnTdy:"btn-today",_btnNxt:"btn-next",_tbMth:"tbl-month",_tbYr:"tbl-year",_confirmationButtonContainer:"confirmation-button-container",_btnOK:"btn-ok",_btnCancel:"btn-cancel"}),this._tbYr.style.display="none";var n=W.Calendar.ariaLabels;Ee(this._tbMth,n.chooseDate),Ee(this._tbYr,n.chooseMonth),Ee(this._btnPrv,n.calendar),Ee(this._btnMth,n.monthView),Ee(this._btnPrv,n.prvMo),Ee(this._btnTdy,n.today),Ee(this._btnNxt,n.nxtMo);for(var i=this._createElement("tr",this._tbMth,xe.header),o=0;o<7;o++)this._createElement("th",i).setAttribute("scope","col");i=this._createElement("tr",this._tbYr,xe.header),this._showYearListBoxButton=this._createElement("th",i),this._showYearListBoxButton.setAttribute("colspan","4"),this._showYearListBoxButton.setAttribute("scope","col"),Ee(this._showYearListBoxButton,n.selectYear),ee(this._showYearListBoxButton,xe.selectedYear),this._showYearListBoxButton.setAttribute("role","button"),this._showYearListBoxButton.setAttribute("tabIndex","-1");for(var s=0;s<3;s++){i=this._createElement("tr",this._tbYr);for(var l=0;l<4;l++)this._createElement("td",i)}},t.prototype._createYearPicker=function(){var e=this,n=this.hostElement,i=this._createElement("div",null,gi.dropDownPanel+" "+xe.yearPicker);i.tabIndex=this._orgTabIndex,this._lbYears=new hn(i,{lostFocus:function(o){if(Vt(i),e._tmYrHidden=Date.now(),e.removeEventListener(window,"touchstart"),o.selectedIndex>-1){var s=F.clone(e.displayMonth);s.setFullYear(o.selectedIndex+o.itemsSource[0]),e.displayMonth=s}e.keyActionTab===di.All&&e._showYearListBoxButton.focus()}}),Ee(this._lbYears.hostElement,W.Calendar.ariaLabels.selectYear),this.addEventListener(i,"keydown",function(o){switch(o.keyCode){case C.Enter:n.focus();break;case C.Space:n.focus(),o.preventDefault();break;case C.Escape:e._lbYears.selectedIndex=-1,n.focus()}o.defaultPrevented&&o.stopPropagation()}),this.addEventListener(i,"click",function(o){n.focus()})},t.prototype._createElement=function(e,n,i){var o=document.createElement(e);return i&&be(o,i),n&&n.appendChild(o),o},t.prototype._click=function(e){if(!e.defaultPrevented&&e.button==0){var n=!1,i=e.target;if(J(this._btnMth,i)&&!this._mthMode()&&this._getShowMonthPicker()?(this.monthView=!this.monthView,n=!0):J(this._btnPrv,i)?(this._navigate(-1),n=!0):J(this._btnNxt,i)?(this._navigate(1),n=!0):J(this._btnTdy,i)&&(this._navigate(0),n=!0),i&&!n&&this._yrPicker&&J(this._tbYr,i)&&$(i,"."+xe.header)){this._showYearPickerAction(e);return}if(i&&!n){var o=$(i,"td");if(o){var s=this.hitTest(o),l=F.fromDateTime;if(this.monthView){if(s&&this._canChangeValue()){var a=l(s,this._value);this._inValidRange(a)&&this._valid(a)&&(this._rngMode()&&this.value&&!this.rangeEnd&&a>=this.value?this.rangeEnd=a:this.value=a),n=!0}}else s&&(this.displayMonth=s,this._mthMode()?this._canChangeValue()&&(a=l(this.displayMonth,this.value),this._inValidRange(a)&&(this.value=a)):this.monthView=!0,n=!0)}}n&&(e.preventDefault(),this.focusMode||e.detail===0||this.focus())}},t.prototype._keydown=function(e){if(!e.defaultPrevented){if(e.altKey)switch(e.keyCode){case C.Up:case C.Down:return;case C.End:this._navigate(0),e.preventDefault();return}var n=e.target;if(!(e.ctrlKey||e.metaKey||e.shiftKey&&!this._rngMode())){if((e.key==="Enter"||e.code==="Space")&&n&&this.keyActionTab===di.All){if(J(this._btnMth,n)&&!this._mthMode()&&this._getShowMonthPicker()){this.monthView=!this.monthView,e.code==="Space"&&e.preventDefault();return}if(this._yrPicker&&J(this._tbYr,n)&&$(n,"."+xe.header)){this._showYearPickerAction(e);return}}if(this.focusMode){if((e.key==="Enter"||e.code==="Space")&&n.classList.contains(xe.focused)){var i=$(n,"td");if(i){var o=this.hitTest(i),s=F.fromDateTime;if(this.monthView){if(o&&this._canChangeValue()){var l=s(o,this._value);this._inValidRange(l)&&this._valid(l)&&(this._rngMode()&&this.value&&!this.rangeEnd&&l>=this.value?this.rangeEnd=l:(this._enterKeyDownToSetValue.raise(this,e),this.value=l))}}else o&&(this.displayMonth=o,this._mthMode()?this._canChangeValue()&&(l=s(this.displayMonth,this.value),this._inValidRange(l)&&(this.value=l)):this.monthView=!0)}e.code==="Space"&&e.preventDefault();return}if(!J(this._tbMth,e.target)&&(!J(this._tbYr,e.target)||J(this._tbYr.firstElementChild,e.target)))return}var a=this._getKeyCode(e),u=0,h=0,c=!0;if(this.monthView)switch(a){case C.Left:u=-1;break;case C.Right:u=1;break;case C.Up:u=-7;break;case C.Down:u=7;break;case C.PageDown:h=e.altKey?12:1;break;case C.PageUp:h=e.altKey?-12:-1;break;case C.Home:case C.End:if(this._canChangeValue()&&!e.shiftKey){var d=this.value||this.displayMonth;(f=this._getValidDate(d,a==C.Home))&&(this.value=F.fromDateTime(f,this.value),this._rngEnd=null)}break;default:c=!1}else switch(a){case C.Left:h=-1;break;case C.Right:h=1;break;case C.Up:h=-4;break;case C.Down:h=4;break;case C.PageDown:h=e.altKey?120:12;break;case C.PageUp:h=e.altKey?-120:-12;break;case C.Home:h=this.value?-this.value.getMonth():0;break;case C.End:h=this.value?11-this.value.getMonth():0;break;case C.Enter:this._mthMode()?c=!1:this.monthView=!0;break;default:c=!1}if(this._canChangeValue()&&(u||h)){l=e.shiftKey&&this.rangeEnd!=null?this.rangeEnd:this.focusMode?this.focusValue:this.value;var f=F;if(l?(l=f.addDays(l,u),l=f.addMonths(l,h)):l=this._getValidDate(new Date,!0),h&&!this._valid(l)){d=l.getMonth();for(var p=1;p<31&&!this._valid(l);p++){var _=f.addDays(l,+p),v=f.addDays(l,-p);this._valid(_)&&_.getMonth()==d?l=_:this._valid(v)&&v.getMonth()==d&&(l=v)}}for(p=0;p<31&&!this._valid(l);p++)l=f.addDays(l,u>0||h>0?1:-1);e.shiftKey&&this._rngMode()&&l>this.value?this.rangeEnd=l:this.focusMode?this.focusValue=l:this.value=l}c&&e.preventDefault()}}},t.prototype._getMonth=function(e){var n=F;return e=e||n.newDate(),n.newDate(e.getFullYear(),e.getMonth(),1)},t.prototype._mthMode=function(){return this.selectionMode==$e.Month},t.prototype._rngMode=function(){return this.selectionMode==$e.Range},t.prototype._navigate=function(e){var n=this.monthView,i=this.displayMonth,o=F;switch(e){case 0:var s=o.newDate();this._canChangeValue()&&(this.value=n?o.fromDateTime(s,this.value):this._getMonth(s)),i=this._getMonth(s);break;case 1:i=o.addMonths(i,n?1:12);break;case-1:i=o.addMonths(i,n?-1:-12)}this.displayMonth=i},t.prototype._setTabOrder=function(e){r.prototype._setTabOrder.call(this,e),this._lbYears.tabOrder=this._orgTabIndex},t.prototype._showYearPickerAction=function(e){var n=this,i=e.target;if(Date.now()-this._tmYrHidden<600)e.preventDefault();else{for(var o=this.displayMonth.getFullYear(),s=this.min?this.min.getFullYear():o-100,l=this.max?this.max.getFullYear():o+100,a=[],u=s;u<=l;u++)a.push(u);var h=this._lbYears,c=h.hostElement,d=$(i,"."+xe.header),f=this.hostElement,p=$(f,"."+rr.inputDateDropDown)||f;h.itemsSource=a,h.selectedIndex=o-a[0],S(c,"dir",this.rightToLeft?"rtl":null),B(c,{minWidth:"",width:d.offsetWidth}),ei(c,d,!1,!1,p),requestAnimationFrame(function(){h.showSelection(!0)}),this.addEventListener(window,"touchstart",function(_){J(c,_.target)||(Vt(c),n._tmYrHidden=Date.now(),n.removeEventListener(window,"touchstart"))}),e.preventDefault()}},Object.defineProperty(t.prototype,"focusMode",{get:function(){return this._focusMode},set:function(e){this._focusMode=e,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keyActionTab",{get:function(){return this._keyActionTab},set:function(e){this._keyActionTab=e,this._updateButtonTabIndex()},enumerable:!0,configurable:!0}),t.prototype._isButtonFocused=function(){var e=Z();if(!e)return!1;var n=e.getAttribute("role"),i=e.type;return n&&n.toLowerCase()==="button"||i&&i.toLowerCase()==="button"},t.prototype._isSameDay=function(e,n){return n.getMonth()==this.displayMonth.getMonth()&&e.getDate()===n.getDate()},t.prototype._isSameMonth=function(e,n){return e.getMonth()===n.getMonth()},t.prototype._dateViewContainsFocus=function(){var e=this._tbYr.querySelectorAll("td"),n=Array.from(e).find(function(i){return i===Z()});return this._tbMth.contains(Z())||n!==void 0},t.prototype.getFocusableElements=function(){return Array.from(this.hostElement.querySelectorAll("a, button, input, textarea, select, [tabindex]:not([tabindex='-1'])")).filter(function(e){return!e.hasAttribute("disabled")&&e.offsetParent!==null})},t.prototype._updateMonthButtonAria=function(){var e=W.Calendar.ariaLabels,n=this.monthView?e.monthView:e.yearView;Ee(this._btnMth,n+", "+re.format(this.displayMonth,this._fmtYrMo))},t.prototype._isDayValid=function(e){return this._valid(e)&&this._inValidRange(e)},t.prototype.cancelButtonClick=function(e){this.cancelButtonClicked.raise(this,e)},t.prototype.oneCancelButtonClick=function(e){this.cancelButtonClick(e)},t.prototype.OKButtonClick=function(e){this.OKButtonClicked.raise(this,e)},t.prototype.onOkButtonClick=function(e){this.OKButtonClick(e),this.value=this.focusValue},Object.defineProperty(t.prototype,"ariaLabel",{get:function(){return this._ariaLabel},set:function(e){this.ariaLabel!==e&&this.hostElement&&(this._ariaLabel=e,S(this.hostElement,"aria-label",e))},enumerable:!0,configurable:!0}),t.prototype._updateButtonTabIndex=function(){this.keyActionTab===di.All&&this.isDisabled!==!0?(S(this._btnMth,"tabindex","0"),S(this._btnPrv,"tabindex","0"),S(this._btnTdy,"tabindex","0"),S(this._btnNxt,"tabindex","0"),S(this._showYearListBoxButton,"tabindex","0")):(S(this._btnMth,"tabindex","-1"),S(this._btnPrv,"tabindex","-1"),S(this._btnTdy,"tabindex","-1"),S(this._btnNxt,"tabindex","-1"),S(this._showYearListBoxButton,"tabindex","-1"))},t.prototype._onEnterKeyDownToSetValue=function(e){this._enterKeyDownToSetValue.raise(this,e)},Object.defineProperty(t.prototype,"showConfirmationButtons",{get:function(){return this._showConfirmationButtons},set:function(e){this._showConfirmationButtons=e},enumerable:!0,configurable:!0}),t.prototype._setIsDisabled=function(e){r.prototype._setIsDisabled.call(this,e),this._updateButtonTabIndex()},t._DATE_KEY="$WJ-DATE",t._ctrlTemplate="",t}(H);rt("DropDown",{ariaLabels:{tgl:"Toggle Dropdown"}});var xi;(function(r){r[r.Select=0]="Select",r[r.Open=1]="Open",r[r.Toggle=2]="Toggle"})(xi||(xi={}));var St;(function(r){r[r.ChangeSelectionOnly=0]="ChangeSelectionOnly",r[r.OpenDropdown=1]="OpenDropdown"})(St||(St={}));var _i;(function(r){r[r.CloseAndKeepFocus=0]="CloseAndKeepFocus",r[r.CloseAndMoveFocus=1]="CloseAndMoveFocus"})(_i||(_i={}));var De,mi=function(r){Xe(t,r);function t(e,n){var i=r.call(this,e)||this;i._clickAction=xi.Select,i._showBtn=!0,i._autoExpand=!0,i._animate=!1,i._internalSettingText=!1,i._oldText="",i._keyActionDownArrow=St.ChangeSelectionOnly,i._keyActionUpArrow=St.ChangeSelectionOnly,i._isDropdownOpened=!1,i.textChanged=new A,i.isDroppedDownChanging=new A,i.isDroppedDownChanged=new A;var o,s=i.getTemplate();i.applyTemplate(ge.hostElement+" "+ge.content+" "+gi.hostElement,s,{_tbx:"input",_btn:"btn",_dropDown:"dropdown"},"input"),i.hostElement&&i.hostElement.id&&(o=i.hostElement.id),o&&i._dropDown&&i._dropDown.setAttribute("dropdown-id",o),i._dropDown.style.display="none";var l=W.DropDown.ariaLabels;Ee(i._btn.querySelector("button"),l.tgl);var a=i._elRef=i._tbx;vr(a),i._createDropDown(),i._updateTbxAriaHaspopup(),i._updateBtn(),i._updateTbx();var u=i.hostElement;be(u,q.collapsed),i.addEventListener(window,"resize",function(){i.isDroppedDown&&i.invalidate()});var h=i.dropDown,c=i.addEventListener.bind(i),d=i._updateFocusState.bind(i);c(h,"blur",d,!0),c(h,"focus",d);var f=i._keydown.bind(i);c(u,"keydown",f),c(h,"keydown",f);var p=i._keypress.bind(i);return c(u,"keypress",p,!0),c(h,"keypress",p,!0),c(a,"input",i._input.bind(i)),c(a,"beforeinput",function(_){_.inputType!=="historyUndo"&&_.inputType!=="historyRedo"||_.preventDefault()}),c(a,"blur",function(){i._commitText(!0,!1)},!0),c(a,"click",function(){i._autoExpand&&i._expandSelection()}),c(a,"mousedown",function(_){switch(i._clickAction){case xi.Open:i.isDroppedDown||(_.preventDefault(),i.focus(),i.isDroppedDown=!0);break;case xi.Toggle:_.preventDefault(),i.focus(),i.isDroppedDown=!i.isDroppedDown}}),c(i._btn,"mousedown",function(_){i._btnclick(_)}),Ne(h),Ie()&&i._elRef==i._tbx&&c(u,"mouseup",function(_){if(!_.defaultPrevented&&_.button==0&&fe(_.target,ce.btn)){var v=Z();v&&v!=_.target&&setTimeout(function(){v.focus()})}}),bi()&&c(a,"keyup",function(){i._setText(i.text,!1)}),c(h,"click",i._dropDownClick.bind(i)),i}return Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate='<div class="'+ge.template+'"><div class="'+tt.input+'"><div class="'+tt.inputGroup+" "+tt.inputBtnVisible+'"><input wj-part="input" type="text" class="'+ce.formControl+'"><span wj-part="btn" class="'+tt.inputGroupBtn+'"><button class="'+ce.btn+" "+ce.btnDefault+'" tabindex="-1"><span class='+ut.down+'></span></button></span></div></div><div wj-part="dropdown" class="'+ge.content+" "+gi.dropDownPanel+'"></div></div>'),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._tbx.value},set:function(e){e!=this.text&&(this._setText(e,!0),this._commitText())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputElement",{get:function(){return this._tbx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputType",{get:function(){return this._tbx.type},set:function(e){this._tbx.type=G(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isReadOnly",{get:function(){return this._tbx.readOnly},set:function(e){this._tbx.readOnly=M(e),ee(this.hostElement,q.readOnly,this.isReadOnly),this.isReadOnly&&this._toggleDropDown(!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRequired",{get:function(){return this._tbx.required},set:function(e){this._tbx.required=M(typeof e=="boolean"?e:this.isRequired)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"placeholder",{get:function(){return this._tbx.placeholder},set:function(e){this._tbx.placeholder=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clickAction",{get:function(){return this._clickAction},set:function(e){this._clickAction=pe(e,xi)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDroppedDown",{get:function(){var e=this._dropDown;return e&&e.style.display!="none"},set:function(e){var n=this.hostElement,i=this._dropDown,o=this.containsFocus(),s=new Set(["InputDateTime","WjInputDateTime"]);if(n&&i){var l=!this.isReadOnly;this.isTouching&&(l=!0),e=M(e)&&!this.isDisabled&&l&&n.offsetWidth>0,this.isDroppedDown&&!e&&this.isDisabled&&(e=this.isDroppedDown),e||Z().tagName!="INPUT"||this.inputElement===Z()||!this._isInvalidInputCancelled?e!=this.isDroppedDown&&(s.has(this.constructor.name)||!this._isInvalidInputCancelled||!this.isDroppedDown&&this._isInvalidInputCancelled)&&this.onIsDroppedDownChanging(new He)&&(this._toggleDropDown(e),o&&(this.isTouching&&this.showDropDownButton?n.focus():this.selectAll()),this._updateFocusState(),this._updateBtn(),this._updateTbx(),ee(n,q.collapsed,!this.isDroppedDown),this.onIsDroppedDownChanged()):(this._isDropdownOpened=this.isDroppedDown,this._toggleDropDown(e))}},enumerable:!0,configurable:!0}),t.prototype._toggleDropDown=function(e){var n=this,i=this.hostElement,o=this._dropDown;e?(this._minWidthDropdown=o.style.minWidth,o.style.display="",this._updateDropDown(),this.addEventListener(window,"touchstart",function(s){for(var l=H._touching,a=s.target;a;){if(a==i)return;a=a[H._OWNR_KEY]||a.parentNode}H._touching=!0,n.isDroppedDown=!1,H._touching=l})):(this.removeEventListener(window,"touchstart"),Vt(o),o.style.minWidth=this._minWidthDropdown)},Object.defineProperty(t.prototype,"dropDown",{get:function(){return this._dropDown},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dropDownCssClass",{get:function(){return this._cssClass},set:function(e){e!=this._cssClass&&(kt(this._dropDown,this._cssClass),this._cssClass=G(e),be(this._dropDown,this._cssClass))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showDropDownButton",{get:function(){return this._showBtn},set:function(e){this._showBtn=M(e),this._updateBtn()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoExpandSelection",{get:function(){return this._autoExpand},set:function(e){this._autoExpand=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAnimated",{get:function(){return this._animate},set:function(e){this._animate=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keyActionDownArrow",{get:function(){return this._keyActionDownArrow},set:function(e){this._keyActionDownArrow=pe(e,St)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keyActionUpArrow",{get:function(){return this._keyActionUpArrow},set:function(e){this._keyActionUpArrow=pe(e,St)},enumerable:!0,configurable:!0}),t.prototype.selectAll=function(){var e=this._tbx;this._elRef==e&&ne(e,0,this.text.length),this.containsFocus()||this.focus()},t.prototype.onTextChanged=function(e){this.textChanged.raise(this,e),this._updateState()},t.prototype.onIsDroppedDownChanging=function(e){return this.isDroppedDownChanging.raise(this,e),!e.cancel},t.prototype.onIsDroppedDownChanged=function(e){this.isDroppedDownChanged.raise(this,e)},t.prototype.onGotFocus=function(e){this.isTouching||J(this._dropDown,Z())||this.selectAll(),r.prototype.onGotFocus.call(this,e)},t.prototype.onLostFocus=function(e){this._commitText(),this.isDroppedDown=!1,r.prototype.onLostFocus.call(this,e)},t.prototype._containsFocusImpl=function(e){return r.prototype._containsFocusImpl.call(this,e)||this.isDroppedDown&&J(this._dropDown,e)},t.prototype.dispose=function(){this.isDroppedDown=!1;var e=this._dropDown;if(e){this._dropDown=null,Ne(e);var n=H.getControl(e);n&&n.dispose()}r.prototype.dispose.call(this)},t.prototype.refresh=function(e){e===void 0&&(e=!0),r.prototype.refresh.call(this,e);var n=this.hostElement;if(n&&n.offsetHeight&&this.isDroppedDown){var i=Z();this.isAnimated&&this._dropDown.style.opacity!=""||ei(this._dropDown,n,!1,!1,this.dropDownCssClass==null),i instanceof HTMLElement&&i!=Z()&&i.focus()}},t.prototype._handleResize=function(){this.isDroppedDown&&this.refresh()},t.prototype._dropDownClick=function(e){e.stopPropagation()},t.prototype._expandSelection=function(){var e=this._tbx,n=e.value,i=e.selectionStart,o=e.selectionEnd;if(n&&i==o){var s=this._getCharType(n,i);if(s>-1){for(;o<n.length&&this._getCharType(n,o)==s;o++);for(;i>0&&this._getCharType(n,i-1)==s;i--);i!=o&&ne(e,i,o)}}},t.prototype._getCharType=function(e,n){var i=e[n];return i>="0"&&i<="9"?0:i>="a"&&i<="z"||i>="A"&&i<="Z"?1:-1},t.prototype._keydown=function(e){if(!e.defaultPrevented&&!this._isHiddenEditor()){switch(e.keyCode){case C.Escape:case C.Enter:this.isDroppedDown&&(this.isDroppedDown=!1,this.containsFocus()||this.focus(),e.preventDefault());break;case C.F4:this.toggleDropDown(e);break;case C.Up:this.handleUpArrowKey(e);break;case C.Down:this.handleDownArrowKey(e)}if(!e.defaultPrevented&&e.keyCode==C.Escape&&Ie()){var n=this._tbx;if(e.target==n){var i=n.value;n.value=i+" ",n.value=i}}}},t.prototype.toggleDropDown=function(e){this.isHostVisible()&&(this.isDroppedDown=!this.isDroppedDown,e.preventDefault())},t.prototype.handleUpArrowKey=function(e){e.altKey?this.toggleDropDown(e):this.keyActionUpArrow!==St.OpenDropdown||this.isDroppedDown||this.openDropDown(e)},t.prototype.handleDownArrowKey=function(e){e.altKey?this.toggleDropDown(e):this.keyActionDownArrow===St.OpenDropdown&&!this.isDroppedDown&&(this.openDropDown(e),this._afterOpenDropdownByDownArrow())},t.prototype._afterOpenDropdownByDownArrow=function(){},t.prototype.openDropDown=function(e){this.isHostVisible()&&(this.isDroppedDown=!0,e.preventDefault())},t.prototype.isHostVisible=function(){var e=this.hostElement;return!(!e||!e.offsetHeight)},t.prototype._isHiddenEditor=function(){return fe(this._tbx,"wj-grid-ime")},t.prototype._keypress=function(e){e.code!="AltLeft"&&e.code!="AltRight"||e.preventDefault()},t.prototype._input=function(e){this._setText(this.text,!1)},t.prototype._btnclick=function(e){var n=this;!e.defaultPrevented&&e.button==0&&(this._isInvalidInputCancelled=!1,e.preventDefault(),this.isTouching?(this.isReadOnly=!0,this.isDroppedDown=!this.isDroppedDown,this.focus(),setTimeout(function(){n.isReadOnly=!1},0)):(this.focus(),this.isDroppedDown=!this.isDroppedDown))},t.prototype._setText=function(e,n,i,o){var s=!1;(e=(e||"").toString())!=this._tbx.value&&(this._tbx.value=e,(i||!e)&&(this.onTextChanged(),s=!0)),e!=this._oldText&&(this._oldText=e,this._internalSettingText||s||this.onTextChanged()),o&&(this._tbx.value=this._tbx.value.trim()),this._updateState()},t.prototype._updateBtn=function(){this._btn.style.display=this._showBtn?"":"none",this._updateBtnAria()},t.prototype._updateBtnAria=function(){var e=this._btn.querySelector("button"),n=this.isDroppedDown,i=this.dropDown?this.dropDown.id:null;S(e,"aria-expanded",!!n),S(e,"aria-controls",n?i:null)},t.prototype._updateTbx=function(){this._updateTbxAria()},t.prototype._updateTbxAria=function(){var e=this._tbx,n=this.isDroppedDown,i=this.dropDown?this.dropDown.id:null;S(e,"aria-controls",n?i:null),S(e,"aria-expanded",n)},t.prototype._updateTbxAriaHaspopup=function(){var e=this._tbx,n=this.dropDown&&this.dropDown.getAttribute("role");S(e,"aria-haspopup",n)},t.prototype._createDropDown=function(){},t.prototype._commitText=function(e,n){},t.prototype._updateDropDown=function(){if(this.isDroppedDown){this._commitText();var e=this.dropDown;S(e,"dir",this.rightToLeft?"rtl":null),ei(e,this.hostElement,!1,this._animate,this.dropDownCssClass==null)}},t._ctrlTemplate="",t}(H);rt("Popup",{ariaLabels:{close:"close",backdrop:"backdrop",isDraggable:"draggable",isResizable:"resizable",popupVisible:"visible",popupHide:"hidden",popup:"popup"}});var Qe;(function(r){r[r.None=0]="None",r[r.ClickOwner=1]="ClickOwner",r[r.ClickPopup=2]="ClickPopup",r[r.Click=3]="Click",r[r.BlurOwner=4]="BlurOwner",r[r.BlurPopup=8]="BlurPopup",r[r.Blur=12]="Blur",r[r.ClickOrBlur=15]="ClickOrBlur",r[r.DownOwner=16]="DownOwner",r[r.DownPopup=32]="DownPopup",r[r.Down=48]="Down",r[r.EnterOwner=64]="EnterOwner",r[r.EnterPopup=128]="EnterPopup",r[r.Enter=192]="Enter",r[r.LeaveOwner=256]="LeaveOwner",r[r.LeavePopup=512]="LeavePopup",r[r.Leave=768]="Leave"})(Qe||(Qe={}));(function(r){r[r.None=0]="None",r[r.Left=1]="Left",r[r.Top=2]="Top",r[r.Right=4]="Right",r[r.Bottom=8]="Bottom",r[r.LeftTop=3]="LeftTop",r[r.RightTop=6]="RightTop",r[r.RightBottom=12]="RightBottom",r[r.LeftBottom=9]="LeftBottom"})(De||(De={}));var th=function(r){Xe(t,r);function t(e,n){var i=r.call(this,e)||this;i._owner=null,i._ariaLabel=W.Popup.ariaLabels.popup,i._modal=!1,i._position=Lt.BelowLeft,i._showTrigger=Qe.ClickOwner,i._hideTrigger=Qe.Blur,i._hideAnim=[],i._fadeIn=!0,i._fadeOut=!0,i._removeOnHide=!0,i._draggable=!1,i._resizable=!1,i._result=null,i._resultEnter=null,i._resultSubmit=null,i._callback=null,i._visible=!1,i._ownerClickBnd=i._ownerClick.bind(i),i._ownerDownBnd=i._ownerDown.bind(i),i._ownerBlurBnd=i._ownerBlur.bind(i),i._ownerEnterBnd=i._ownerEnter.bind(i),i._ownerLeaveBnd=i._ownerLeave.bind(i),i._mousedownBnd=i._mousedown.bind(i),i._mousemoveBnd=i._mousemove.bind(i),i._mousedragBnd=i._mousedrag.bind(i),i._mouseupBnd=i._mouseup.bind(i),i._hideBnd=i.hide.bind(i),i._lastShow=0,i._initialOwner=null,i._activeEdge=De.None,i.showing=new A,i.shown=new A,i.hiding=new A,i.hidden=new A,i.resizing=new A,i.resized=new A,i.dragging=new A,i.dragged=new A,i.sizeChanging=new A,i.sizeChanged=new A,i.positionChanging=new A,i.positionChanged=new A;var o=i.hostElement;be(o,ge.hostElement+" "+ge.content+" "+Ai.hostElement),i.hostElement&&(i._initialOwner=i.hostElement.parentElement,S(i.hostElement,"role","dialog")),o.getAttribute("tabindex")||(o.tabIndex=0),Vt(o,!1);var s=i.addEventListener.bind(i);s(o,"compositionstart",function(){i._composing=!0}),s(o,"compositionend",function(){i._composing=!1}),s(window,"resize",function(){!i.isVisible||i._dragged||i.isTouching||i.invalidate()}),s(o,"keydown",function(u){if(!u.defaultPrevented){var h=u.ctrlKey&&u.altKey&&!u.shiftKey,c=u.ctrlKey&&u.shiftKey&&!u.altKey;if(h||c){var d=i.hostElement.getBoundingClientRect(),f=ht.fromBoundingRect(d);if(h&&i.isDraggable){switch(u.preventDefault(),u.keyCode){case C.Left:f.left=Math.max(0,f.left-10);break;case C.Right:f.left=Math.min(window.innerWidth-f.width,f.left+10);break;case C.Up:f.top=Math.max(0,f.top-10);break;case C.Down:f.top=Math.min(window.innerHeight-f.height,f.top+10)}var p=new xn(f);i.onPositionChanging(p)&&(B(i.hostElement,{left:f.left+window.scrollX,top:f.top+window.scrollY,transform:"none"}),i.onPositionChanged())}else if(c&&i.isResizable){u.preventDefault();var _=window.getComputedStyle(i.hostElement),v=Math.max(parseInt(_.minWidth)||0,t._SZ_MIN),b=Math.max(parseInt(_.minHeight)||0,t._SZ_MIN);if(i._activeEdge===De.None)switch(u.keyCode){case C.Up:i._activeEdge=De.Top;break;case C.Down:i._activeEdge=De.Bottom;break;case C.Left:i._activeEdge=De.Left;break;case C.Right:i._activeEdge=De.Right}var m=i._activeEdge===De.Top||i._activeEdge===De.Bottom,w=i._activeEdge===De.Left||i._activeEdge===De.Right;if(m&&![C.Up,C.Down].includes(u.keyCode)||w&&![C.Left,C.Right].includes(u.keyCode))return;if(i._activeEdge!==De.None){var g=0;switch(u.keyCode){case C.Up:case C.Left:g=-10;break;case C.Down:case C.Right:g=10}switch(i._activeEdge){case De.Top:var y=Math.min(Math.max(f.top+g,0),f.bottom-b);f.height=f.bottom-y,f.top=y;break;case De.Bottom:var I=Math.min(Math.max(f.bottom+g,f.top+b),window.innerHeight);f.height=I-f.top;break;case De.Left:var x=Math.min(Math.max(f.left+g,0),f.right-v);f.width=f.right-x,f.left=x;break;case De.Right:var R=Math.min(Math.max(f.right+g,f.left+v),window.innerWidth);f.width=R-f.left}f.left=Math.max(0,Math.min(f.left,window.innerWidth-f.width)),f.top=Math.max(0,Math.min(f.top,window.innerHeight-f.height));var k=new xn(f);i.onSizeChanging(k)&&(B(i.hostElement,{left:f.left+window.scrollX,top:f.top+window.scrollY,width:f.width,height:f.height,transform:"none"}),i.onSizeChanged())}}}if(u.keyCode==C.Escape&&!i._composing&&(u.preventDefault(),i.hide()),u.keyCode==C.Enter&&!i._composing){var D=i.dialogResultEnter;D&&(u.preventDefault(),i._validateAndHide(D))}u.keyCode==C.Tab&&i.modal&&(u.preventDefault(),Ji(o,u.shiftKey?-1:1))}}),s(document,"keyup",function(u){u.ctrlKey||u.shiftKey||i._activeEdge===De.None||(i._activeEdge=De.None)}),s(o,"click",function(u){var h=u.target;if(h instanceof HTMLElement){if(h instanceof HTMLButtonElement&&h.type=="submit"){var c=i.hostElement,d=i.dialogResultSubmit;c instanceof HTMLFormElement&&d&&c.reportValidity()&&(u.preventDefault(),i.hide(d))}var f=h.className.match(/\bwj-hide[\S]*\b/);f&&f.length>0&&(u.preventDefault(),u.stopPropagation(),i.hide(f[0]))}});var l=i._toggle.bind(i),a=Qe;return i.addEventListener(o,"click",function(u){i._ignoreClick||l(u,a.ClickPopup)},!0),i.addEventListener(o,"mousedown",function(u){i._ignoreClick=!1,l(u,a.DownPopup)},!0),i.addEventListener(o,"mouseenter",function(u){u.target==o&&l(u,a.EnterPopup)},!0),i.addEventListener(o,"mouseleave",function(u){u.target==o&&l(u,a.LeavePopup)},!0),i.addEventListener(o,"blur",function(u){i.containsFocus()||l(u,a.BlurPopup)},!0),s(document,"wheel",function(u){if(i.isVisible&&i._modal){for(var h=u.target;h&&h!=document.body;h=h.parentElement)if(h.scrollHeight>h.clientHeight)return;u.preventDefault()}}),i.initialize(n),i._updateAriaLabel(),i}return Object.defineProperty(t.prototype,"ariaLabelledBy",{get:function(){return this.hostElement.getAttribute("aria-labelledby")},set:function(e){an(this,this.hostElement,e,this._updateAriaLabel.bind(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"owner",{get:function(){return this._owner},set:function(e){var n=this._owner;n&&(this.removeEventListener(n,"click"),this.removeEventListener(n,"mousedown"),this.removeEventListener(n,"mouseenter"),this.removeEventListener(n,"mouseleave"),this.removeEventListener(n,"blur")),(n=this._owner=e!=null?ci(e):null)&&(this.addEventListener(n,"click",this._ownerClickBnd,!0),this.addEventListener(n,"mousedown",this._ownerDownBnd,!0),this.addEventListener(n,"mouseenter",this._ownerEnterBnd,!0),this.addEventListener(n,"mouseleave",this._ownerLeaveBnd,!0),this.addEventListener(n,"blur",this._ownerBlurBnd,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(e){this._position=pe(e,Lt)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"content",{get:function(){return this.hostElement.firstElementChild},set:function(e){e!=this.content&&(this.hostElement.innerHTML="",e instanceof HTMLElement&&this.hostElement.appendChild(e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showTrigger",{get:function(){return this._showTrigger},set:function(e){this._showTrigger=pe(e,Qe)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hideTrigger",{get:function(){return this._hideTrigger},set:function(e){this._hideTrigger=pe(e,Qe)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fadeIn",{get:function(){return this._fadeIn},set:function(e){this._fadeIn=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fadeOut",{get:function(){return this._fadeOut},set:function(e){this._fadeOut=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"removeOnHide",{get:function(){return this._removeOnHide},set:function(e){if((e=M(e))!=this.removeOnHide&&(this._removeOnHide=e,!this.isVisible)){var n=this.hostElement;e?Ne(n):n&&document.body&&(n.style.display="none",document.body.appendChild(n))}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"modal",{get:function(){return this._modal},set:function(e){this._modal=M(e),S(this.hostElement,"aria-modal",e?"true":null)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDraggable",{get:function(){return this._draggable},set:function(e){this._draggable=M(e),this._updateAriaLabel()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isResizable",{get:function(){return this._resizable},set:function(e){this._resizable=M(e),this._updateAriaLabel()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dialogResult",{get:function(){return this._result},set:function(e){this._result=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dialogResultEnter",{get:function(){return this._resultEnter},set:function(e){this._resultEnter=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dialogResultSubmit",{get:function(){return this._resultSubmit},set:function(e){this._resultSubmit=G(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){var e=this.hostElement;return this._visible&&e!=null&&e.offsetHeight>0},enumerable:!0,configurable:!0}),t.prototype.show=function(e,n){var i=this;if(this._lastShow=Date.now(),!this.isVisible){var o=this.hostElement;this.dialogResult=null,this._callback=null,this._oldFocus=null,this._myFocus=null,this._hideAnim.forEach(function(l){clearInterval(l)}),this._hideAnim.length>0&&(this._hideAnim.length=0,this._bkDrop&&(Vt(this._bkDrop,this.removeOnHide),this._bkDrop.style.opacity=""),Vt(o,this.removeOnHide),o.style.opacity="");var s=new He;this.onShowing(s)&&(e!=null&&(this.modal=M(e)),n!=null&&(this._callback=Le(n)),this._oldFocus=Z(),ei(o,this._owner,this._position,this._fadeIn,!1,this._hideBnd),this._modal&&this._showBackdrop(),S(this._oldFocus,"aria-expanded","true"),this._composing=!1,this._visible=!0,this.onShown(s),this._updateAriaLabel(),this._clearTimeouts(),this.modal&&(this.addEventListener(window,"focus",function(){if(!i.containsFocus()){var l=i._myFocus;l&&l.offsetHeight?l.focus():Ji(o,0)}}),this.addEventListener(o,"focusin",function(){var l=Z();l&&J(o,l)&&(l.tabIndex>-1||!i._myFocus)&&(i._myFocus=l)})),this._resized=this._dragged=this._ignoreClick=!1,this._handleDragResize(!0),this.addEventListener(window,"touchstart",function(l){i._hideTrigger&Qe.Blur&&!J(o,l.target,!0)&&i.hide()}),setTimeout(function(){i.addEventListener(window,"click",function(l){i._hideTrigger&Qe.BlurPopup&&i.isDisabled&&!J(o,l.target,!0)&&i.hide()})}),setTimeout(function(){if(!i.isDisabled&&!i.containsFocus()&&!i.isTouching){var l=o.querySelector("[autofocus]");l&&l.clientHeight>0&&!l.disabled&&l.tabIndex>-1&&!$(l,"[disabled],."+q.disabled)?(l.focus(),oe(l.select)&&l.select()):Ji(o,0)}!i.isDisabled&&!i.containsFocus()&&(o.tabIndex=0,o.focus())},100))}},t.prototype.hide=function(e){var n=this;if(this.removeEventListener(window,"touchstart"),this.removeEventListener(window,"click"),this.isVisible){Li(e)||(this.dialogResult=e);var i=new He,o=this.hostElement;if(this.onHiding(i)){this._handleDragResize(!1);for(var s=this.containsFocus()?this._oldFocus:null,l=o.querySelectorAll("."+ge.hostElement+"."+gi.hostElement),a=0;a<l.length;a++){var u=H.getControl(l[a]);u instanceof mi&&(u.isDroppedDown=!1)}var h=this.removeOnHide,c=this.fadeOut;setTimeout(function(){if(n._updateState(),n.onHidden(i),n._callback&&n._callback(n),n.hideTrigger&Qe.LeavePopup){var d=H.getControl($(n.owner,"."+Ai.hostElement));if(d instanceof t&&(d.hideTrigger&Qe.Leave)!=0){var f=t._evtHover,p=f?document.elementFromPoint(f.clientX,f.clientY):null,_=H.getControl($(p,"."+Ai.hostElement));_ instanceof t&&!_.isVisible&&(p=null),p&&J(d.hostElement,p,!0)||d.hide()}}},H._FOCUS_INTERVAL+50),this._bkDrop&&this._hideAnim.push(Vt(this._bkDrop,h,c)),this._hideAnim.push(Vt(o,h,c)),S(this._oldFocus,"aria-expanded","false"),this._visible=!1,this._oldFocus=null,this._myFocus=null,this._updateAriaLabel(),this.removeEventListener(window,"focus"),this.removeEventListener(o,"focusin"),this.containsFocus()&&Z().blur(),this._clearTimeouts(),!this.isVisible&&s&&s.offsetHeight&&s.focus()}}},t.prototype.onShowing=function(e){return this.showing.raise(this,e),!e.cancel},t.prototype.onShown=function(e){this.shown.raise(this,e)},t.prototype.onHiding=function(e){return this.hiding.raise(this,e),!e.cancel},t.prototype.onHidden=function(e){this._wasVisible=!1,this.hidden.raise(this,e)},t.prototype.onResizing=function(e){return this.resizing.raise(this,e),!e.cancel},t.prototype.onResized=function(e){this.resized.raise(this,e)},t.prototype.onDragging=function(e){return this.dragging.raise(this,e),!e.cancel},t.prototype.onDragged=function(e){this.dragged.raise(this,e)},t.prototype.onSizeChanging=function(e){return this.sizeChanging.raise(this,e),!e.cancel},t.prototype.onSizeChanged=function(e){this.sizeChanged.raise(this,e)},t.prototype.onPositionChanging=function(e){return this.positionChanging.raise(this,e),!e.cancel},t.prototype.onPositionChanged=function(e){this.positionChanged.raise(this,e)},t.prototype.onLostFocus=function(e){if(r.prototype.onLostFocus.call(this,e),this._hideTrigger&Qe.BlurPopup&&!this.containsFocus()){var n=document.createEvent("Event");n.initEvent("blur",!0,!0),this._toggle(n,Qe.BlurPopup)}},t.prototype.dispose=function(){this._initialOwner.appendChild(this.hostElement),this._initialOwner=null,this.owner=null,this._bkDrop&&this._bkDrop.remove(),r.prototype.dispose.call(this)},t.prototype.refresh=function(e){e===void 0&&(e=!0);var n=this.hostElement;if(r.prototype.refresh.call(this,e),this.isVisible&&!this._refreshing&&n){this._refreshing=!0;for(var i=Z(),o=this._owner?this._owner.getBoundingClientRect():null,s=[],l=n.querySelectorAll("."+gi.hostElement),a=0;a<l.length;a++){var u=H.getControl(l[a]);u instanceof mi&&u.isDroppedDown&&(s.push(u),u.dropDown.style.display="none")}ei(n,o,this._position),s.forEach(function(h){h.dropDown.style.display="",h._updateDropDown()}),this._modal&&i instanceof HTMLElement&&i!=Z()&&i.focus(),this._refreshing=!1}},t.prototype._clearTimeouts=function(){this._toShow&&(clearTimeout(this._toShow),this._toShow=null),this._toHideLeave&&(clearTimeout(this._toHideLeave),this._toHideLeave=null),this._toHideBlur&&(clearTimeout(this._toHideBlur),this._toHideBlur=null)},t.prototype._handleDragResize=function(e){var n=this.hostElement,i=this._draggable?this._getHeaderElement():null,o=this.addEventListener.bind(this),s=this.removeEventListener.bind(this),l=this._mousemoveBnd,a=this._mousedownBnd;e?(o(n,"mousemove",l),o(n,"mousedown",a),o(n,"touchstart",a),i&&(i.style.touchAction="none")):(this._mousedownEvt=null,this._rcBounds=null,s(n,"mousemove",l),s(n,"mousedown",a),s(n,"touchstart",a),s(document,"mousemove",this._mousedragBnd),s(document,"mouseup",this._mouseupBnd),i&&(i.style.touchAction=""))},t.prototype._mousemove=function(e){if(!this._mousedownEvt){var n=this.hostElement,i=this._getEdges(n,e),o="",s=De;this._edges=i,this._resizable&&(i==s.LeftTop||i==s.RightBottom?o="nwse-resize":i==s.LeftBottom||i==s.RightTop?o="nesw-resize":i==s.Left||i==s.Right?o="ew-resize":i!=s.Top&&i!=s.Bottom||(o="ns-resize")),this._draggable&&!o&&this._getClosestHeader(e.target)&&(o="move"),n.style.cursor=o}},t.prototype._mousedown=function(e){if(!e.defaultPrevented){var n=e.touches&&e.touches.length>0?e.touches[0]:e;if(this._edges=this._getEdges(this.hostElement,n),this._edges||this._draggable&&this._getClosestHeader(e.target)){var i=new He;if(this._edges?this.onResizing(i):this.onDragging(i)){this._mousedownEvt=n,this._rcBounds=this.hostElement.getBoundingClientRect();var o=this.addEventListener.bind(this),s=document,l=this._mousedragBnd,a=this._mouseupBnd;o(s,"mousemove",l),o(s,"touchmove",l),o(s,"mouseup",a),o(s,"touchend",a)}}this._ignoreClick=!1}},t.prototype._mouseup=function(){this._mousedownEvt=null,this._rcBounds=null,this._activeEdge=De.None;var e=this.removeEventListener.bind(this),n=document,i=this._mousedragBnd,o=this._mouseupBnd;e(n,"mousemove",i),e(n,"touchmove",i),e(n,"mouseup",o),e(n,"touchend",o),this._resized?this.onResized():this._dragged&&this.onDragged(),this._resized=this._dragged=this._ignoreClick=!1},t.prototype._mousedrag=function(e){if(!e.defaultPrevented){var n=this.hostElement,i=this._mousedownEvt,o=e.touches&&e.touches.length>0?e.touches[0]:e,s=o.clientX-i.clientX,l=o.clientY-i.clientY,a=this._rcBounds,u=this._edges,h=t._SZ_MIN,c=ht.fromBoundingRect(a);if(u){var d=window.getComputedStyle(n),f=parseInt(d.getPropertyValue("min-width"))||h,p=parseInt(d.getPropertyValue("min-height"))||h;if(u&De.Left){var _=c.right-f;c.left=Math.min(c.left+s,_),c.width=Math.max(c.width-s,f)}else u&De.Right&&(c.width=Math.max(c.width+s,f));if(u&De.Top){var v=c.bottom-p;c.top=Math.min(c.top+l,v),c.height=Math.max(c.height-l,p)}else u&De.Bottom&&(c.height=Math.max(c.height+l,p));if(this.onSizeChanging(new xn(c))&&(B(n,{left:c.left+window.scrollX,top:c.top+window.scrollY,width:c.width,height:c.height,transform:"none"}),this._resized=this._dragged=this._ignoreClick=!0,this.onSizeChanged()),!window.ResizeObserver)for(var b=this.hostElement.children,m=0;m<b.length;m++)H.invalidateAll(b[m])}else this._draggable&&(this._dragged||Math.abs(s)+Math.abs(l)>t._DRAG_THRESHOLD)&&(c.left=Math.max(a.left+s+(o.pageX-o.clientX),50-a.width),c.top=Math.max(a.top+l+(o.pageY-o.clientY),0),this.onPositionChanging(new xn(c))&&(B(n,{left:c.left,top:c.top,width:c.width,height:c.height,transform:"none"}),this._dragged=this._ignoreClick=!0,this.onPositionChanged()))}},t.prototype._getEdges=function(e,n){var i=0;if(this._resizable){var o=e.getBoundingClientRect(),s=t._SZ_EDGE;n.clientX-o.left<s&&(i|=De.Left),n.clientY-o.top<s&&(i|=De.Top),o.right-n.clientX<s&&(i|=De.Right),o.bottom-n.clientY<s&&(i|=De.Bottom)}return i},t.prototype._ownerClick=function(e){this._toggle(e,Qe.ClickOwner)},t.prototype._ownerDown=function(e){this._wasVisible=this.isVisible,this._toggle(e,Qe.DownOwner)},t.prototype._ownerBlur=function(e){J(this._owner,Z())||this._toggle(e,Qe.BlurOwner)},t.prototype._ownerEnter=function(e){e.target==this._owner&&this._toggle(e,Qe.EnterOwner)},t.prototype._ownerLeave=function(e){e.target==this._owner&&this._toggle(e,Qe.LeaveOwner)},t.prototype._toggle=function(e,n){var i=this;if(e instanceof MouseEvent&&(t._evtHover=e),!(e.type=="mouseenter"&&Date.now()-this._lastShow<300||e.defaultPrevented)){var o=(this._hideTrigger&n)!=0,s=(this._showTrigger&n)!=0,l=Qe;(o||s)&&this._clearTimeouts(),o&&this.isVisible&&(n&l.Leave?this._toHideLeave=setTimeout(function(){var a=t._evtHover,u=a?document.elementFromPoint(a.clientX,a.clientY):null;u&&J(i.hostElement,u,!0)||i.hide()},H._LEAVE_DELAY):n&l.Blur?this._toHideBlur=setTimeout(function(){i.containsFocus()||J(i._owner,Z())||i.hide()},H._FOCUS_INTERVAL+50):this.hide()),s&&n!=l.ClickPopup&&(this._wasVisible||(n&l.Enter?this._toShow=setTimeout(function(){i.show()},H._HOVER_DELAY):this.show()))}},t.prototype._getHeaderElement=function(){var e=this.hostElement;return e.querySelector("."+Ai.dialogHeader)||e.querySelector(".modal-header")},t.prototype._getClosestHeader=function(e){return $(e,"."+Ai.dialogHeader)||$(e,".modal-header")},t.prototype._showBackdrop=function(){var e=this;this._bkDrop||(this._bkDrop=document.createElement("div"),this._bkDrop.tabIndex=-1,S(this._bkDrop,"role","presentation"),S(this._bkDrop,"aria-hidden","true"),S(this._bkDrop,"aria-label",W.Popup.ariaLabels.backdrop),be(this._bkDrop,Ai.popupBackDrop),this.addEventListener(this._bkDrop,"mousedown",function(i){i.preventDefault(),i.stopPropagation(),e.hostElement.focus(),e.hideTrigger&Qe.Blur&&e.hide()})),B(this._bkDrop,{zIndex:H._POPUP_ZINDEX,display:""});var n=this.hostElement;n.parentElement.insertBefore(this._bkDrop,n)},t.prototype._validateAndHide=function(e){var n=this.hostElement;if(n instanceof HTMLFormElement)n.reportValidity()&&this.hide(e);else{var i=this.hostElement.querySelector(":invalid");i?i.focus():this.hide(e)}},t.prototype._updateAriaLabel=function(){this.hostElement&&(this.ariaLabelledBy?this._updateAriaLabelImp(""):this._updateAriaLabelImp(this._ariaLabel))},t.prototype._updateAriaLabelImp=function(e){var n=[];this.isDraggable&&n.push(W.Popup.ariaLabels.isDraggable),this.isResizable&&n.push(W.Popup.ariaLabels.isResizable),this.isVisible?n.push(W.Popup.ariaLabels.popupVisible):n.push(W.Popup.ariaLabels.popupHide);var i=n.join(",");S(this.hostElement,"aria-label",e?e+" "+i:i)},t._DRAG_THRESHOLD=6,t._SZ_EDGE=10,t._SZ_MIN=40,t}(H),xn=function(r){Xe(t,r);function t(e){var n=r.call(this)||this;return n._rc=e,n}return Object.defineProperty(t.prototype,"bounds",{get:function(){return this._rc},enumerable:!0,configurable:!0}),t}(He);rt("InputDate",{ariaLabels:{inputDateInput:"InputDate Input",inputDate:"Input Date",button:"Choose Date",dialog:"Calendar"}});var Rl=function(r){Xe(t,r);function t(e){var n=r.call(this)||this;return n._isUserInput=e,n}return Object.defineProperty(t.prototype,"isUserInput",{get:function(){return this._isUserInput},enumerable:!0,configurable:!0}),t}(He),or=function(r){Xe(t,r);function t(e,n){var i=r.call(this,e)||this;i._fmt="d",i._sep=" - ",i._rngs=null,i._showCal=!1,i._clsOnSel=!0,i._handleWheel=!0,i._preserveCalendarNavigation=!0,i._isTriggered=!1,i._rangeChanged=!1,i._textInitialized=!1,i._previousText="",i._keepInvalidText=!1,i._inputAriaLabel=W.InputDate.ariaLabels.inputDateInput,i._currentInput="",i._ariaLabelledby=null,i._keyActionTab=_i.CloseAndMoveFocus,i.valueChanged=new A,i.rangeEndChanged=new A,i.rangeChanged=new A,be(i.hostElement,rr.hostElement);var o=W.InputDate.ariaLabels;S(i._btn.querySelector("button"),"aria-haspopup","dialog"),S(i._dropDown,"role","dialog"),Ee(i._dropDown,o.dialog),S(i._dropDown,"aria-modal",!0),S(i._tbx,"role","combobox"),S(i._tbx,"aria-haspopup","dialog"),Ee(i._btn.querySelector("button"),o.button),i.dropDown.id=pr(i.hostElement.id+"_dropdown"),i._msk=new un(i._tbx);var s=i.addEventListener.bind(i);bi()||(i.inputType="tel"),i._tbx.type.match(/^(tel|text|)$/i)||(i.inputType="text");var l=i._mouseWheel.bind(i);s(i.hostElement,"wheel",l);var a=i._lbx=new hn(document.createElement("div"),{displayMemberPath:"name",selectedIndexChanged:function(d){var f=d.selectedItem,p=F.fromDateTime,_=F.sameDate;if(f&&f.from&&f.to){if(!_(f.from,i.value)||!_(f.to,i.rangeEnd)){var v=i.value;i.value=p(f.from,v),i.rangeEnd=p(f.to,v)}i._selectAll()}else i._cal.hostElement.style.display=""}}),u=i._cal=new Sl(document.createElement("div"));u.tabOrder=a.tabOrder=-1;var h=i._dropDown;if(be(h,rr.inputDateDropDown),h.appendChild(a.hostElement),h.appendChild(u.hostElement),i.addEventListener(h,"click",function(){i._isTriggered=!0,setTimeout(function(){i._isTriggered=!1},50)},!0),i.addEventListener(h,"keydown",function(d){d.key==="Enter"&&(i._isTriggered=!0,setTimeout(function(){i._isTriggered=!1},50))},!0),i._orgTag=="INPUT"){var c=i._tbx.getAttribute("value");c&&(u.value=u.rangeEnd=re.parseDate(c,"yyyy-MM-dd"))}return i.isRequired=!0,i._tbx.value=i._oldText=i._getText(),i.initialize(n),(i._textInitialized||i._tbx.value!==i._oldText)&&(i._oldText=i._tbx.value,i._currentInput="text",i._textInitialized=!0,i._commitText(),i.onTextChanged()),i._updateState(),u.valueChanged.addHandler(function(d,f){i._refreshText(),i.onValueChanged(f)}),u.rangeEndChanged.addHandler(function(d,f){u._rngMode()&&(i.onRangeEndChanged(f),i._closeOnChange(),u._clearingRangeEnd||i._refreshText())}),u.cancelButtonClicked.addHandler(function(d,f){i._closeOnChange()}),u.OKButtonClicked.addHandler(function(d,f){i._closeOnChange(),i._refreshText()}),u._enterKeyDownToSetValue.addHandler(function(d,f){i._closeOnChange()}),u.addEventListener(u.hostElement,"click",function(d){if(u.selectionMode&&!u._rngMode()){var f=d.target,p=u.hitTest(f);(F.sameDate(i.value,p)||$(f,"[wj-part=btn-today]"))&&(i._closeOnChange(),i._refreshText())}}),i._updateInputAriaLabel(),i}return Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate=mi.controlTemplate),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),t.prototype._mouseWheel=function(e){if(this.handleWheel&&!e.defaultPrevented&&!this.isDroppedDown&&this.containsFocus()&&this.value!=null&&this._canChangeValue()){var n=this._tbx,i=n.selectionStart,o=n.selectionEnd,s=ye(-e.deltaY,-1,1),l=this.value,a=re.getFullFormat(this.format);a==null&&(a=this.format);var u=a.match($t());if(o-i===n.value.length&&u!=null||this.selectionMode==$e.Range){for(var h=1;l=this.selectionMode==$e.Month?F.addMonths(this.value,h*s):F.addDays(this.value,h*s),!(this._isValidDate(l)||!(this.max===null||l<this.max)||!(this.min===null||l>this.min));h++);this.value=l;var c=this._getText();ne(n,0,c.length)}else this._updateDateTimeValue(s,u,a);e.preventDefault()}},Object.defineProperty(t.prototype,"value",{get:function(){return this._cal.value},set:function(e){this._cal.value=e,(this.text||this.isRequired)&&this._refreshText()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rangeEnd",{get:function(){return this._cal.rangeEnd},set:function(e){this._cal.rangeEnd=e,(this.text||this.isRequired)&&this._refreshText()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rangeMin",{get:function(){return this._cal.rangeMin},set:function(e){this._cal.rangeMin=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rangeMax",{get:function(){return this._cal.rangeMax},set:function(e){this._cal.rangeMax=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keepInvalidText",{get:function(){return this._keepInvalidText},set:function(e){if(new Set(["InputDateTime","WjInputDateTime"]).has(this.constructor.name))throw this._keepInvalidText=!1,"keepInvalidText property cannot be used with InputDateTime control";this._keepInvalidText=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._tbx.value},set:function(e){var n=(e||"").toString();n!=this.text&&(n!=this._tbx.value&&(this._tbx.value=n),n!=this._oldText&&(this._oldText=n,this._previousText=n),Wr(this._currentInput)&&(this._textInitialized=!0,this._currentInput="text",this._commitText()),this.onTextChanged(),this._currentInput="")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){return this._fmt},set:function(e){e!=this.format&&(this._fmt=G(e),this._refreshText())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"separator",{get:function(){return this._sep},set:function(e){e!=this._sep&&(this._sep=G(e,!1),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._msk.mask},set:function(e){this._msk.mask=G(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"closeOnSelection",{get:function(){return this._clsOnSel},set:function(e){this._clsOnSel=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"handleWheel",{get:function(){return this._handleWheel},set:function(e){e=M(e),this._handleWheel=e,e||(this.calendar.handleWheel=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"predefinedRanges",{get:function(){return this._rngs},set:function(e){this._rngs!=e&&(K(e==null||et(e),"Object expected"),this._rngs=e,this._lbx.itemsSource=this._getRanges(e),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alwaysShowCalendar",{get:function(){return this._showCal},set:function(e){this._showCal=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this._cal.min},set:function(e){this._cal.min=It(e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._cal.max},set:function(e){this._cal.max=It(e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"repeatButtons",{get:function(){return this._cal.repeatButtons},set:function(e){this._cal.repeatButtons=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showYearPicker",{get:function(){return this._cal.showYearPicker},set:function(e){this._cal.showYearPicker=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showMonthPicker",{get:function(){return this._cal.showMonthPicker},set:function(e){this._cal.showMonthPicker=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showHeader",{get:function(){return this._cal.showHeader},set:function(e){this._cal.showHeader=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weeksBefore",{get:function(){return this._cal.weeksBefore},set:function(e){this._cal.weeksBefore=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weeksAfter",{get:function(){return this._cal.weeksAfter},set:function(e){this._cal.weeksAfter=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectionMode",{get:function(){return this._cal.selectionMode},set:function(e){e!=this.selectionMode&&(this._cal.selectionMode=e,this._refreshText())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"monthCount",{get:function(){return this._cal.monthCount},set:function(e){this._cal.monthCount=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"calendar",{get:function(){return this._cal},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputElement",{get:function(){return this._tbx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputType",{get:function(){return this._tbx.type},set:function(e){e.match(/^(tel|text|)$/i)?this._tbx.type=G(e):console.warn("invalid input type '"+e+"', don't use any input types other than 'tel' or 'text'")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"preserveCalendarNavigation",{get:function(){return this._preserveCalendarNavigation},set:function(e){this._preserveCalendarNavigation=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemValidator",{get:function(){return this._cal.itemValidator},set:function(e){e!=this.itemValidator&&(this._cal.itemValidator=Le(e),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemFormatter",{get:function(){return this._cal.itemFormatter},set:function(e){this._cal.itemFormatter=Le(e)},enumerable:!0,configurable:!0}),t.prototype.onValueChanged=function(e){this.valueChanged.raise(this,e)},t.prototype.onRangeEndChanged=function(e){this.rangeEndChanged.raise(this,e),this.rangeEnd&&(this.isDroppedDown?this._rangeChanged=!0:this.onRangeChanged(e))},t.prototype.onRangeChanged=function(e){this._rangeChanged=!1,this.rangeChanged.raise(this,e)},t.prototype.refresh=function(e){e===void 0&&(e=!0),r.prototype.refresh.call(this,e),this.hostElement&&(this._msk&&this._msk.refresh(),this._cal&&this._cal.refresh(),this._refreshText())},t.prototype.onIsDroppedDownChanging=function(e){if(!this.isDroppedDown){var n=this._lbx,i=this._cal,o=n.collectionView,s=n.hostElement.style,l=i.hostElement.style;if(i._rngMode()&&Ue(o)){var a=this._updateRangeSelection();s.display="",l.display=!this._showCal&&a&&a.from&&o.items.some(function(u){return!u.to})?"none":""}else s.display="none",l.display="";i._mthMode()||(i.monthView=!0),i.value&&!this.preserveCalendarNavigation&&(i.displayMonth=i.value)}return r.prototype.onIsDroppedDownChanging.call(this,e)},t.prototype.onIsDroppedDownChanged=function(e){r.prototype.onIsDroppedDownChanged.call(this,e);var n=this.containsFocus();this.isDroppedDown?(n&&(this._tryFocus(this._cal)||this._tryFocus(this._lbx)||this.dropDown.focus()),this._lbx.showSelection(),this._cal.refresh()):(this._commitText(),this._rangeChanged&&this.onRangeChanged())},t.prototype._updateDropDown=function(){this._commitText();var e=getComputedStyle(this.hostElement);this._dropDown.style.minWidth=18*parseFloat(e.fontSize)+"px",this._cal.refresh(),r.prototype._updateDropDown.call(this)},t.prototype.onGotFocus=function(e){var n=this._tbx;this._elRef==n&&(this.isDroppedDown?this.dropDown.focus():this.selectAll()),this.containsFocus()||this.focus(),this.gotFocus.raise(this,e)},t.prototype._keydown=function(e){if(!(e.defaultPrevented||e.altKey||e.ctrlKey||e.metaKey)){if(this._isInvalidInputCancelled=!1,this._isHiddenEditor())return;var n=Z();switch(e.keyCode){case C.Enter:if(this.showConfirmationButtons&&n!==this._tbx)return;this._currentInput="user",this._textInitialized=!1,this._commitText(!1,!0);break;case C.Escape:this.text=this._getText(),this.selectAll();break;case C.Tab:if(this.showConfirmationButtons&&n!==this._tbx){var i=this._cal.getFocusableElements(),o=i[0],s=i[i.length-1];e.shiftKey?n===o&&(e.preventDefault(),s.focus()):n===s&&(e.preventDefault(),o.focus())}else this.isDroppedDown&&(this.isDroppedDown=!1,this.containsFocus()||this.focus(),this.keyActionTab===_i.CloseAndKeepFocus&&e.preventDefault());this._currentInput="user",this._textInitialized=!1,this._commitText(!0);break;case C.Up:case C.Down:if(e.keyCode===C.Up&&this.keyActionUpArrow===St.OpenDropdown||e.keyCode===C.Down&&this.keyActionDownArrow===St.OpenDropdown)break;if(!this.isDroppedDown&&this.value&&this._canChangeValue()){this._currentInput="user",this._textInitialized=!1;var l=this._tbx,a=l.selectionStart,u=l.selectionEnd,h=(l.value,e.keyCode==C.Up?1:-1),c=this.value,d=re.getFullFormat(this.format);this.format=="g"&&d.includes("г")&&(d=d.replace(/\"г.\" /,"")),d==null&&(d=this.format);var f=d.match($t());if(u-a===l.value.length&&f!=null||this.selectionMode==$e.Range){for(var p=1;c=this.selectionMode==$e.Month?F.addMonths(this.value,p*h):F.addDays(this.value,p*h),!(this._isValidDate(c)||!(this.max===null||c<this.max)||!(this.min===null||c>this.min));p++);this.value=c;var _=this._getText();ne(l,0,_.length)}else this._updateDateTimeValue(h,f,d);e.preventDefault()}}}r.prototype._keydown.call(this,e)},t.prototype._expandSelection=function(){if(this._cal._rngMode()){var e=this._tbx,n=e.value,i=e.selectionStart,o=e.selectionEnd,s=this._sep,l=n.indexOf(s);l>-1&&i==o&&(o<=l?ne(e,0,l):i>=l+s.length&&ne(e,l+s.length,e.value.length))}else r.prototype._expandSelection.call(this)},t.prototype._updateDateTimeValue=function(e,n,i){var o=this._tbx,s=o.selectionStart,l=o.value,a=this.value,u={},h={},c=0,d=0,f=0,p=[],_=[],v=o.value.match($t());n==null||v==null?(p=[this.format],_=["0"],n=[""]):(n.forEach(function(g,y){var I=g.replaceAll('"',""),x=i.substring(c),R=l.substring(d),k=x.indexOf(g),D=R.indexOf(I);if(D==-1){var E=v[y];D=R.indexOf(E)}var T=x.substring(0,k);T!=""&&(u[T]=c,h[T]=d),c=c+k+g.length,d=d+D+I.length,y==n.length-1&&(T=i.substring(c),u[T]=c,h[T]=d)}),p=Object.keys(u),_=Object.values(h));var b=_.filter(function(g){return s>=parseInt(g.toString())});b.length>0&&(f=b.length-1);for(var m=p[f],w=1;m.indexOf("d")!=-1?a=F.addDays(this.value,w*e):m.indexOf("M")!=-1?a=F.addMonths(this.value,w*e):m.indexOf("y")!=-1&&(a=F.addYears(this.value,w*e)),!(this._isValidDate(a)||!(this.max===null||a<this.max)||!(this.min===null||a>this.min));w++);this.value=a,this._reselectText(n,f)},t.prototype._reselectText=function(e,n){var i=this._getText(),o=this._tbx,s=0,l=-1,a=-1;if(e.length==1&&e[0]=="")l=0,a=i.length;else{var u=o.value.match($t());e.forEach(function(h,c){var d=h.replaceAll('"',""),f=i.substring(s);f.startsWith("г.")&&(f=f.replace("г. ",""),s+=3);var p=f.indexOf(d);if(p==0&&n++,p==-1){var _=u[c];p=f.indexOf(_)}var v=p===-1?f:f.substring(0,p);c==n&&l==-1&&(a=(l=s)+v.length),s=s+p+d.length})}l==-1&&(l=s,a=o.value.length),ne(o,l,a)},t.prototype._refreshText=function(){var e=this._getText();(e!=this.text||e!==this._oldText)&&(this._tbx.value=this._oldText=this._previousText=e,this.onTextChanged())},t.prototype._selectAll=function(){this.isDroppedDown||!this.containsFocus()||this.isTouching||this.selectAll()},t.prototype._closeOnChange=function(){var e=this;if(this._clsOnSel&&this._isTriggered){var n=this._cal;(!n._rngMode()||n.value&&n.rangeEnd)&&setTimeout(function(){e._isInvalidInputCancelled=!1,e.isDroppedDown=!1})}},t.prototype._tryFocus=function(e){var n=e.hostElement;return n&&n.offsetHeight?(n.focus(),!0):!1},t.prototype._clamp=function(e){return this._cal._clamp(e)},t.prototype._getText=function(){var e=re.format,n=this._fmt,i=e(this.value,n);return this._cal._rngMode()&&i&&(this.rightToLeft?i=e(this.rangeEnd,n)+this._sep+i:i+=this._sep+e(this.rangeEnd,n)),i},t.prototype._commitText=function(e,n){var i=this._tbx.value;this._isInvalidInputCancelled=!1,Wr(this._currentInput)&&(this._textInitialized=!1,this._currentInput="user");var o=!1,s=this._fmt,l=this._cal,a=re.parseDate,u=new Rl(!this._textInitialized);if(i)if(l._rngMode()){var h=i.split(this._sep),c=this.rightToLeft?h[1]:h[0];if(h.length==2&&c)if(f=a(c,s,this.value)){var d=a(this.rightToLeft?h[0]:h[1],s,this.value);F.sameDate(f,this._clamp(f))?o=!0:this._shouldRaiseInvalidInput(n)&&this.onInvalidInput(u)?this._textInitialized&&this._keepInvalidText||(o=!0):(this._selectAll(),o=!1),o&&(d?(l.value=this._fromDateTime(f),F.sameDate(d,this._clamp(d))?(l.rangeEnd=d&&d>=f?this._fromDateTime(d):f,this.text=this._getText()):this._triggerInvalidInputEvent(u,f,d,n)):this._shouldRaiseInvalidInput(n)&&this.onInvalidInput(u)?(!this._textInitialized||!this._keepInvalidText)&&(l.value=this._fromDateTime(f),l.rangeEnd=f,this.text=this._getText()):(this._isInvalidInputCancelled=!0,this._selectAll()))}else this._nullValueInvalidInput(u,n);else this._nullValueInvalidInput(u,n)}else(f=a(i,s,this.value))?F.sameDate(f,this._clamp(f))?this.value=this._fromDateTime(f):this._triggerInvalidInputEvent(u,f,null,n):this._nullValueInvalidInput(u,n);else if(this.isRequired){var f;(f=a(i,s,this.value))?this.value=this._fromDateTime(f):this.containsFocus()||(this.text=this._getText())}else this.value=this.rangeEnd=null;this._currentInput="",e||this._selectAll()},t.prototype._triggerInvalidInputEvent=function(e,n,i,o){this._shouldRaiseInvalidInput(o)&&this.onInvalidInput(e)?(!this._textInitialized||!this._keepInvalidText)&&(this.value=this._fromDateTime(n),this.calendar._rngMode()&&(this.calendar.rangeEnd=i&&i>=n?this._fromDateTime(i):n)):(this.isDroppedDown||!this.containsFocus()||this.isTouching||this.focus(),this._isInvalidInputCancelled=!0,this._selectAll())},t.prototype._nullValueInvalidInput=function(e,n){this._shouldRaiseInvalidInput(n)&&this.onInvalidInput(e)?this._textInitialized&&this._keepInvalidText||(this.text=this._getText()):(this.isDroppedDown||!this.containsFocus()||this.isTouching||this.focus(),this._isInvalidInputCancelled=!0,this._selectAll())},t.prototype._fromDateTime=function(e){return F.fromDateTime(e,this.value)},t.prototype._canChangeValue=function(){return!this.isReadOnly&&!this.isDisabled&&this.selectionMode!=$e.None},t.prototype._isValidDate=function(e){return!(e&&(this._clamp(e)!=e||this.itemValidator&&!this.itemValidator(e)))},t.prototype._getRanges=function(e){var n=[];if(et(e))for(var i in e){var o=e[i];n.push({name:i,from:o?o[0]:null,to:o?o[1]:null})}return new Zt(n,{currentItem:null})},t.prototype._updateRangeSelection=function(){var e=this._lbx,n=-1;if(Ue(e.collectionView))for(var i=this._lbx.collectionView.items,o=F.sameDate,s=0;s<i.length;s++){var l=i[s];if(l.from){if(o(l.from,this.value)&&o(l.to,this.rangeEnd)){n=s;break}}else n=s}return e.selectedIndex=n,e.selectedItem},t.prototype._copy=function(e,n){if(e==="text"){var i=(n||"").toString();return i!==this.text&&(this._tbx.value=i,this._textInitialized=!0),!0}return!1},Object.defineProperty(t.prototype,"showConfirmationButtons",{get:function(){return this._showConfirmationButtons},set:function(e){this._showConfirmationButtons=e,this._cal.focusMode=e,this._cal.showConfirmationButtons=e,this._cal.keyActionTab=e?di.All:di.None},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ariaLabelledBy",{get:function(){return this._ariaLabelledby},set:function(e){an(this,this._tbx,e,this._updateInputAriaLabel.bind(this))},enumerable:!0,configurable:!0}),t.prototype._updateInputAriaLabel=function(){this._tbx&&(this._tbx.id||this.ariaLabelledBy?Ee(this._tbx,null):Ee(this._tbx,this._inputAriaLabel))},t.prototype.getAriaLabelForScreenReader=function(){return W.InputDate.ariaLabels.inputDate},Object.defineProperty(t.prototype,"keyActionTab",{get:function(){return this._keyActionTab},set:function(e){this._keyActionTab=pe(e,_i)},enumerable:!0,configurable:!0}),t.prototype._shouldRaiseInvalidInput=function(e){return Sn(e)?!this._containsFocus():e},t._ctrlTemplate="",t}(mi);rt("InputDateRange",{ariaLabels:{inputDateRangeInput:"InputDateRange Input"}});var ih=function(r){Xe(t,r);function t(e,n){var i=r.call(this,e,{selectionMode:$e.Range,showMonthPicker:"Outside",monthCount:2})||this;return i._inputAriaLabel=W.InputDateRange.ariaLabels.inputDateRangeInput,be(i.hostElement,bl.hostElement),i._tbx.value=i._oldText=i._getText(),i.initialize(n),i._tbx.value!==i._oldText&&(i._oldText=i._tbx.value,i._currentInput="text",i._commitText()),i._updateInputAriaLabel(),i}return Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate=or.controlTemplate),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectionMode",{get:function(){return this.calendar.selectionMode},set:function(e){e=pe(e,$e),K(e==$e.Range,'InputDateRange.selectionMode must be "Range"'),this.calendar.selectionMode=e},enumerable:!0,configurable:!0}),t.prototype._mouseWheel=function(e){if(!e.defaultPrevented&&!this.isDroppedDown&&this.containsFocus()&&this.value!=null&&this._canChangeValue()){var n=ye(-e.deltaY,-1,1),i=this.value;this.value=this.selectionMode==$e.Month?F.addMonths(i,n):F.addDays(i,n),this.selectAll(),e.preventDefault()}},t.prototype.onGotFocus=function(e){var n=this._tbx;this._elRef!=n||this.isDroppedDown||this.selectAll(),this.containsFocus()||this.focus(),this.gotFocus.raise(this,e)},t.prototype._keydown=function(e){if(!(e.defaultPrevented||e.altKey||e.ctrlKey||e.metaKey)){if(this._isInvalidInputCancelled=!1,this._isHiddenEditor())return;switch(e.keyCode){case C.Up:case C.Down:if(!this.isDroppedDown&&this.value&&this._canChangeValue()){var n=e.keyCode==C.Up?1:-1,i=this.selectionMode==$e.Month?F.addMonths(this.value,n):F.addDays(this.value,n);this.value=this._fromDateTime(i),this.selectAll(),e.preventDefault()}}}r.prototype._keydown.call(this,e)},t._ctrlTemplate="",t}(or);rt("InputColor",{ariaLabels:{inputColor:"Input Color"}});var nh=function(r){Xe(t,r);function t(e,n){var i=r.call(this,e)||this;i._textInitialized=!1,i.valueChanged=new A,be(i.hostElement,to.hostElement);var o='<div class="'+to.inputColorBox+'"></div>';return i._ePreview=Oe(o,i.hostElement.firstElementChild),i._orgTag=="INPUT"&&(i._tbx.type="",i._commitText()),i.value="#ffffff",i.isRequired=!0,i._tbx.value=i._oldText=i.value,i.initialize(n),i._textInitialized&&i._tbx.value!==i._oldText&&(i._oldText=i._tbx.value,i.onTextChanged(),i._commitText(),i._textInitialized=!1),i.addEventListener(i._colorPicker.hostElement,"click",function(s){var l=s.target;l&&l.tagName=="DIV"&&($(l,'[wj-part="div-pal"]')||$(l,'[wj-part="div-pv"]'))&&l.style.backgroundColor&&(i.isDroppedDown=!1)}),i._colorPicker.tabOrder=-1,i}return Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate=mi.controlTemplate),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){this.text=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._tbx.value},set:function(e){(e=G(e))!=this.text&&(e||!this.isRequired)&&(!e||bt.fromString(e.replace(/\s+/g,"")))&&(this._setText(e,!0),this._commitText())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputType",{get:function(){return this._tbx.type},set:function(e){e.match(/^(tel|text|)$/i)?this._tbx.type=G(e):console.warn("invalid input type '"+e+"', don't use any input types other than 'tel' or 'text'")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showAlphaChannel",{get:function(){return this._colorPicker.showAlphaChannel},set:function(e){this._colorPicker.showAlphaChannel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showColorString",{get:function(){return this._colorPicker.showColorString},set:function(e){this._colorPicker.showColorString=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"palette",{get:function(){return this._colorPicker.palette},set:function(e){this._colorPicker.palette=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"colorPicker",{get:function(){return this._colorPicker},enumerable:!0,configurable:!0}),t.prototype.onValueChanged=function(e){this.valueChanged.raise(this,e)},t.prototype.onIsDroppedDownChanged=function(e){r.prototype.onIsDroppedDownChanged.call(this,e),this.isDroppedDown&&!this.isTouching&&this.selectAll()},t.prototype._createDropDown=function(){var e=this;this._colorPicker=new El(this._dropDown),B(this._dropDown,{minWidth:420,minHeight:200}),this._colorPicker.valueChanged.addHandler(function(){e.value=e._colorPicker.value})},t.prototype._keydown=function(e){if(!e.defaultPrevented)switch(e.keyCode){case C.Enter:this._commitText(),this.selectAll();break;case C.Escape:this.text=this.value,this.selectAll();break;case C.Tab:this.isDroppedDown&&(this.isDroppedDown=!1,this.containsFocus()||this.focus(),e.preventDefault())}r.prototype._keydown.call(this,e)},t.prototype._commitText=function(){if(this._value!=this.text){var e=!this.text||!this.text.trim();if(!this.isRequired&&e){this._value="",this._ePreview.style.backgroundColor="",this.onValueChanged();return}if(bt.fromString(this.text.replace(/\s+/g,""))){if(this.text&&this.text!==this.text.replace(/\s+/g,"")){this.text=this.text.replace(/\s+/g,"");return}var n=this._colorPicker;n.value=this.text,this._value=n.value,this._ePreview.style.backgroundColor=this.value,this.onValueChanged()}else this.onInvalidInput(new He)&&(this.text=this._value?this._value:"")}},t.prototype._copy=function(e,n){if(e==="text"){var i=(n||"").toString();return i!==this.text&&(this._tbx.value=i,this._textInitialized=!0),!0}return!1},t.prototype.getAriaLabelForScreenReader=function(){return W.InputColor.ariaLabels.inputColor},t._ctrlTemplate="",t}(mi);rt("ComboBox",{ariaLabels:{comboBoxInput:"ComboBox Input",comboBox:"Combo Box"}});var vi=function(r){Xe(t,r);function t(e,n){var i=r.call(this,e)||this;i._editable=!1,i._trimText=!0,i._handleWheel=!0,i._delKey=0,i._draggingText=!1,i._textIsComposing="",i._pathHdr=new nt(null),i._bsCollapse=!0,i._fmtItemHandlers=0,i._emptyValueAction=!1,i._oldIndexToBeRestoredOnBlur=null,i._restoreComboboxTbxVal=!1,i._isWheel=!1,i._selItems=null,i._oldFilter=null,i._keyActionTab=_i.CloseAndMoveFocus,i._keyActionPrintCharacters=St.OpenDropdown,i._inputElementAriaLabel=W.ComboBox.ariaLabels.comboBoxInput,i._ariaLabelledby=null,i.itemsSourceChanged=new A,i.selectedIndexChanged=new A;var o=i.hostElement;be(o,Do.hostElement),i.dropDown.id=pr(o.id+"_dropdown"),i.autoExpandSelection=!1;var s=i._tbx;i.addEventListener(s,"compositionstart",function(){i._composing=!0}),i.addEventListener(s,"compositionend",function(){i._textIsComposing=i.text,i._composing=!1,i._setText(i._textIsComposing,!0),!i._textIsComposing&&i.isRequired&&(i._oldText="",i._oldIndexToBeRestoredOnBlur=null),setTimeout(function(){i._textIsComposing=""})}),i.addEventListener(s,"drag",function(){i._draggingText=!0}),i.addEventListener(o,"wheel",i._wheel.bind(i)),i._orgTag=="SELECT"&&i._lbx._initFromSelect(o);var l=i._lbx;return l.loadedItems.addHandler(function(a){i.selectedIndex>-1&&(i.selectedIndex=l.selectedIndex)}),l.tabOrder=-1,i.isRequired=!0,i.initialize(n),i._updateTbxAriaHaspopup(),i._updateInputAriaLabel(),i}return Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate=mi.controlTemplate),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemsSource",{get:function(){return this._lbx.itemsSource},set:function(e){this._lbx.itemsSource!=e&&(this._lbx.itemsSource=e,this.onItemsSourceChanged()),this._updateBtn()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collectionView",{get:function(){return this._lbx.collectionView},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"virtualizationThreshold",{get:function(){return this._lbx.virtualizationThreshold},set:function(e){this._lbx.virtualizationThreshold=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showGroups",{get:function(){return this._lbx.showGroups},set:function(e){this._lbx.showGroups=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayMemberPath",{get:function(){return this._lbx.displayMemberPath},set:function(e){if(this.displayMemberPath!==e){this._lbx.displayMemberPath=e;var n=this._getDisplayText(void 0,void 0,!0);this.text!=n&&this._setText(n,!0)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headerPath",{get:function(){return this._pathHdr.path},set:function(e){this._pathHdr.path=G(e);var n=this._getDisplayText(void 0,void 0,!0);this.text!=n&&this._setText(n,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedValuePath",{get:function(){return this._lbx.selectedValuePath},set:function(e){this._lbx.selectedValuePath=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isContentHtml",{get:function(){return this._lbx.isContentHtml},set:function(e){if(e!=this.isContentHtml){this._lbx.isContentHtml=M(e);var n=this._getDisplayText(void 0,void 0,!0);this.text!=n&&this._setText(n,!0)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"caseSensitiveSearch",{get:function(){return this._lbx.caseSensitiveSearch},set:function(e){this._lbx.caseSensitiveSearch=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trimText",{get:function(){return this._trimText},set:function(e){e!=this._trimText&&(this._trimText=M(e),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemFormatter",{get:function(){return this._lbx.itemFormatter},set:function(e){this._lbx.itemFormatter=Le(e),this.selectedIndex=this._lbx.selectedIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formatItem",{get:function(){return this._lbx.formatItem},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this._lbx.selectedIndex},set:function(e){e!=this.selectedIndex&&_e(e)&&(this._lbx.selectedIndex=e);var n=this._lbx._oldSelectedIndex!=this.selectedIndex;e=this.selectedIndex;var i=this._getDisplayText(e,void 0,!0);if(this.text!=i||n){var o=this._internalSettingText;this._internalSettingText=this._lbx._ignoredItemChangedEvents,this._setText(i,!0),this.text!=""&&(this._emptyValueAction=!1),this._internalSettingText=o}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedItem",{get:function(){return this._lbx.selectedItem},set:function(e){this._lbx.selectedItem=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedValue",{get:function(){return this.collectionView?this._lbx.selectedValue:this.text},set:function(e){this.collectionView?this._lbx.selectedValue=e:e!=null&&(this.text=e.toString())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEditable",{get:function(){return this._editable},set:function(e){this._editable=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"handleWheel",{get:function(){return this._handleWheel},set:function(e){this._handleWheel=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxDropDownHeight",{get:function(){return this._lbx.maxHeight},set:function(e){this._lbx.maxHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxDropDownWidth",{get:function(){var e=this._dropDown,n=e?parseInt(e.style.maxWidth):null;return isNaN(n)?null:n},set:function(e){var n=this._dropDown.style;e=V(e,!0),n.maxWidth=e==null?"":e+"px",n.minWidth=""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keyActionPrintCharacters",{get:function(){return this._keyActionPrintCharacters},set:function(e){this._keyActionPrintCharacters=pe(e,St)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keyActionTab",{get:function(){return this._keyActionTab},set:function(e){this._keyActionTab=pe(e,_i)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ariaLabelledBy",{get:function(){return this._ariaLabelledby},set:function(e){an(this,this._tbx,e,this._updateInputAndListBoxAriaLabel.bind(this))},enumerable:!0,configurable:!0}),t.prototype._updateInputAndListBoxAriaLabel=function(){this._updateInputAriaLabel()},t.prototype.getDisplayText=function(e,n){return e===void 0&&(e=this.selectedIndex),n===void 0&&(n=this._trimText),this._getDisplayText(e,n)},t.prototype._getDisplayText=function(e,n,i){e===void 0&&(e=this.selectedIndex),n===void 0&&(n=this._trimText);var o,s=this.collectionView;if(this.headerPath&&e>-1&&Ue(s)){var l=s.items[e];o=(o=l?this._pathHdr.getValue(l):null)!=null?o.toString():"",this.isContentHtml&&(o=Dt(o))}else o=this._lbx._getDisplayText(e,i&&this.itemFormatter!==void 0&&!this._hasCustomFormatItem());return n?o.trim():o},t.prototype._hasCustomFormatItem=function(){return this.formatItem.hasHandlers},t.prototype.indexOf=function(e,n,i){i===void 0&&(i=!1);var o=this.collectionView,s=this.caseSensitiveSearch;if(Ue(o)&&e!=null){e=e.toString(),s||(e=e.toLowerCase()),this._trimText&&!i&&(this.indexOf(e,!1,!0)!==-1||(e=e.trim()));var l=this.selectedIndex,a=this._getDisplayText(l,void 0,!0);if(n){if(s||(a=a.toLowerCase()),e==a)return l}else if(!e&&a=="")return l;for(var u=0;u<o.items.length;u++)if(this._lbx.isItemEnabled(u)){if(a=this._getDisplayText(u,void 0,!0),this.trimText&&(a=a.trim()),s||(a=a.toLowerCase()),n){if(a==e&&this._emptyValueAction===!1)return u}else if(e&&a.indexOf(e)==0||!e&&a==""&&this._emptyValueAction===!1)return u}}return-1},Object.defineProperty(t.prototype,"listBox",{get:function(){return this._lbx},enumerable:!0,configurable:!0}),t.prototype.onItemsSourceChanged=function(e){this.itemsSourceChanged.raise(this,e)},t.prototype.onSelectedIndexChanged=function(e){this._updateBtn(),this.selectedIndexChanged.raise(this,e)},t.prototype.refresh=function(e){e===void 0&&(e=!0),r.prototype.refresh.call(this,e),this.hostElement&&Ue(this.collectionView)&&(this._lbx.refresh(),this.selectedIndex>-1&&(this.selectedIndex=this._lbx.selectedIndex))},t.prototype.onLostFocus=function(e,n,i){this._trimText&&(this.text=this.text.trim()),this._composing&&(this._composing=!1,!this.text&&this.isRequired&&(this._oldText="",this._oldIndexToBeRestoredOnBlur=null),this._setText(this.text,!0)),(!this.text&&this.isRequired&&!(Array.isArray(this._selItems)&&this._selItems.length>0)||i)&&Ue(this.collectionView)&&!(this.isRequired&&!this.isEditable&&this.text&&this.indexOf(this.text,!1)>-1&&this.indexOf(this.text,!0)<0)&&(n!==void 0&&(this.selectedIndex=n!==-1?n:0),this._oldIndexToBeRestoredOnBlur!==null?this.selectedIndex=this._oldIndexToBeRestoredOnBlur!==-1?this._oldIndexToBeRestoredOnBlur:0:this.collectionView.currentItem==null&&(this.selectedIndex=0));var o=this.text,s=this.collectionView?this.collectionView.items.length:0,l=this.selectedIndex;r.prototype.onLostFocus.call(this,e);var a=this.collectionView?this.collectionView.items.length:0,u=this.selectedIndex,h=this.text;l===u&&o===h&&(this._oldFilter&&(this.collectionView.filter=this._oldFilter,this._oldFilter=null),this._trySelectionUpdateOnItemsSourceChanged(a!==s,o))},t.prototype.onIsDroppedDownChanging=function(e){return!this.isDroppedDown&&!this._hasItems()?(e.cancel=!0,!1):r.prototype.onIsDroppedDownChanging.call(this,e)},t.prototype.onIsDroppedDownChanged=function(e){r.prototype.onIsDroppedDownChanged.call(this,e),this.isDroppedDown&&(this._fmtItemHandlers=this.formatItem.handlerCount,this._lbx.showSelection()),this._updateTbxAria()},t.prototype._trySelectionUpdateOnItemsSourceChanged=function(e,n){if(e&&n){var i=this.indexOf(n,!0);i<0&&(i=this.indexOf(n,!1)),this.selectedIndex=i}},t.prototype._setIsDisabled=function(e){r.prototype._setIsDisabled.call(this,e),this._updateBtn()},t.prototype._updateBtn=function(){var e=this.collectionView,n=this._tbx,i=this._hasItems();r.prototype._updateBtn.call(this),this._btn.style.display=this._showBtn&&e!=null?"":"none",Ct(this._btn,i&&!this.isDisabled),S(n,"role",i?"combobox":null),S(n,"aria-autocomplete",i?"both":null),this._updateTbxAria()},t.prototype._hasItems=function(){return Ue(this.collectionView)},t.prototype._updateTbxAria=function(){r.prototype._updateTbxAria.call(this);var e=this._tbx,n=this.isDroppedDown,i=this.dropDown?this.dropDown.id:null,o=i&&Ue(this.collectionView),s=this._lbx,l=s.selectedIndex,a=s.hostElement?s.hostElement.children:null,u=l>-1&&l<a.length?a[l].id:null;S(e,"aria-controls",o&&n?i:null),S(e,"aria-expanded",o?n:null),S(e,"aria-activedescendant",this.isDroppedDown&&u&&u.length?u:null)},t.prototype._updateInputAriaLabel=function(){var e=this._tbx;e&&(e.id||this._ariaLabelledby?S(e,"aria-label",null):S(e,"aria-label",this._inputElementAriaLabel))},t.prototype._createDropDown=function(){var e=this;this._lbx||(this._lbx=new hn(this._dropDown),this._lbx._container=this.hostElement),this._lbx.maxHeight=200,this._lbx.selectedIndexChanged.addHandler(function(){e._updateBtn();var n=e._lbx.selectedIndex;e.selectedIndex=n,e.onSelectedIndexChanged()}),this._lbx.itemsChanged.addHandler(function(){e._updateBtn()})},t.prototype._wheel=function(e){if(this._isWheel=!0,this.handleWheel&&!e.defaultPrevented&&!this.isDroppedDown&&!this.isReadOnly&&this.containsFocus()&&this.selectedIndex>-1){var n=this._findNext("",e.deltaY>0?1:-1);n>-1&&(this.selectedIndex=n),e.preventDefault()}this._isWheel=!1},t.prototype._dropDownClick=function(e){e.defaultPrevented||e.target!=this._dropDown&&(this.isDroppedDown=!1),this._restoreComboboxTbxVal&&(this._tbx.value=this._getDisplayText(this.selectedIndex,void 0,!0)),r.prototype._dropDownClick.call(this,e)},t.prototype._setText=function(e,n,i){if(i===void 0&&(i=!1),!this._composing&&!this._settingText){if(this._settingText=!0,this.containsFocus()){var o=this.formatItem.handlerCount;this._fmtItemHandlers!=o&&(this._fmtItemHandlers=o,this._lbx.loadList())}e=[null,void 0,NaN].includes(e)?"":e.toString();var s=this.selectedIndex,l=this.collectionView,a=this._getSelStart(),u=-1,h=!0;if(this.isEditable&&(this._delKey||this._getSelEnd()<e.length||!this.containsFocus())&&(n=!0,h=!1),s=this.indexOf(e,n),h&&(s<0&&n&&(s=this.indexOf(e,!1)),s<0&&a>0&&!i&&(s=this.indexOf(e.substr(0,a),!1)),!n)){var c=this.indexOf(e,!0);c>-1&&s>-1&&c!=s&&(s=c)}if(s<0&&this._delKey&&(s=this.indexOf(e,n)),s<0&&!this.isEditable&&Ue(l)&&(e&&this.isRequired||this.containsFocus()&&(e||this.isRequired))){var d=this._oldText||"";s=Math.max(0,this.indexOf(d,!1)),a=0;for(var f=0;f<e.length&&f<d.length;f++)if(e[f]!=d[f]){a=f;break}}if((!this._delKey||!this.isEditable||this._delKey&&this.isEditable&&e==this._getDisplayText(s,void 0,!0))&&(!this._pristine||this._pristine&&!this.isEditable)||this._isWheel||this._delKey&&e==""&&s>-1){s>-1&&(u=a,e=this._getDisplayText(s,void 0,!0));var p=this._tbx;e!=p.value&&(p.value=e),u>-1&&this.containsFocus()&&!this.isTouching&&this._updateInputSelection(u)}l&&((!e||this.trimText&&e.trim()==""&&!this.containsFocus()&&this.isEditable)&&(s>-1?this._oldIndexToBeRestoredOnBlur=s:(this._oldIndexToBeRestoredOnBlur=this.indexOf(this._oldText,!0),this._oldIndexToBeRestoredOnBlur=this._oldIndexToBeRestoredOnBlur<0?this.indexOf(this._oldText,!1):this._oldIndexToBeRestoredOnBlur)),this._restoreComboboxTbxVal=e&&s>-1,l.moveCurrentToPosition(s)),this.containsFocus()||this.isEditable||this.isRequired||e!=e.trim()||!this.trimText||(this._tbx.value=this._getDisplayText(s,this.trimText,!0)),!this.containsFocus()&&s>-1&&this.isEditable&&(e=this._getDisplayText(s,this.trimText,!0)),!this.containsFocus()&&this._hasItems()&&s<0&&!this.isEditable&&!this.isRequired&&(e="");var _=!1;!e&&s<0&&this.isRequired&&!this.containsFocus()&&(_=!0),this.trimText&&!this.containsFocus()&&this.isEditable&&(this.isRequired&&e.trim()==""?_=!0:e=e.trim()),_&&(this.selectedIndex=this._oldIndexToBeRestoredOnBlur,this.selectedIndex<0&&(this.selectedIndex=0));var v=!this.containsFocus()&&!this.isEditable&&this.trimText;v&&(this._tbx.value=this._getDisplayText(s,!0,!0)),this._delKey=0,this._settingText=!1,r.prototype._setText.call(this,_?this._getDisplayText(this.selectedIndex,void 0,!0):e,n,_,v)}},t.prototype._findNext=function(e,n,i){i===void 0&&(i=this.selectedIndex);var o=this.collectionView,s=o?o.items.length:0,l=this._lbx,a=this.caseSensitiveSearch;if(o&&s&&n){a||(e=e.toLowerCase()),this.trimText&&(e=e.trim());for(var u=i+n;u>-1&&u<s;u+=n){var h=this._getDisplayText(u,void 0,!0);if(a||(h=h.toLowerCase()),h.indexOf(e)==0&&(!this.dropDown.children[u]||l.isItemEnabled(u)))return u}}return i},t.prototype._findNextWhenIsEditableFalse=function(e,n,i){i===void 0&&(i=this.selectedIndex);var o=this._findNext(e,n,i);return o!==i?o:-1},t.prototype._keydown=function(e){if(r.prototype._keydown.call(this,e),!e.defaultPrevented&&!this.isReadOnly&&!e.altKey&&Ue(this.collectionView)&&this._elRef==this._tbx&&!this._isHiddenEditor()){this._delKey=0;var n=this._getSelStart(),i=this._getSelEnd();switch(e.keyCode){case C.Tab:this.isDroppedDown&&(this.isDroppedDown=!1,this.keyActionTab===_i.CloseAndKeepFocus&&e.preventDefault());break;case C.Back:case C.Delete:case 88:if(!e.ctrlKey&&!e.metaKey&&e.keyCode==88)break;this._bsCollapse&&!this.isEditable&&n>0&&i==this._tbx.value.length&&Ue(this.collectionView)&&(this._setSelRange(n-1,i),n-=1),this._delKey=e.keyCode;break;case C.Up:case C.Down:n==this.text.length&&(n=0),this.selectedIndex=this._findNext(this.text.substr(0,n),e.keyCode==C.Up?-1:1),this._setSelRange(n,this.text.length),e.preventDefault();break;case C.PageUp:this._lbx._selectPrevPage(),this.selectAll(),e.preventDefault();break;case C.PageDown:this._lbx._selectNextPage(),this.selectAll(),e.preventDefault();break;case C.Home:case C.End:var o=this._tbx;S(o,"aria-activedescendant",null)}this.text.length>0&&["Backspace","Delete","x"].includes(e.key)&&n===0&&i===this.text.length||this._delKey&&this.text.length===1?this._emptyValueAction=!0:this._composing||(this._emptyValueAction=!1)}},t.prototype._afterOpenDropdownByDownArrow=function(){this.selectedIndex===-1&&(this.selectedIndex=0,this.selectAll())},t.prototype._input=function(e){this._handleDragTextState();var n=this._getSelStart(),i=this._getSelEnd(),o=this._delKey,s=this.text;this._shouldOpenDropdown()&&(this._controlDropdownVisibility(),this._tbx.value=s,this._setSelRange(n,i),this._delKey=o);var l=s.trim();!this.isEditable&&l?this._handleIsEditableFalseInput():this._updateComponentText(),this._updateEmptyValueFlag(),this._resetDragState()},t.prototype._handleDragTextState=function(){this._draggingText&&(this._emptyValueAction=this.text==="")},t.prototype._handleComposingState=function(){this._composing&&(this._composing=!1)},t.prototype._shouldOpenDropdown=function(){return this.keyActionPrintCharacters===St.OpenDropdown},t.prototype._handleIsEditableFalseInput=function(){var e=this.text,n=this.text.length,i=this._findNextWhenIsEditableFalse(e,1,this.selectedIndex-1);if(i===-1&&(i=this._findNextWhenIsEditableFalse(e,1,-1))===-1){var o=e[e.length-1];n=1,(i=this._findNextWhenIsEditableFalse(o,1))===-1&&(i=this._findNextWhenIsEditableFalse(o,1,-1))}i!==-1?this._updateSelection(i,n):this._updateComponentText()},t.prototype._updateSelection=function(e,n){this._tbx.value=this._getDisplayText(e,void 0,!0),this._updateInputSelection(n);var i=this.collectionView;i&&i.moveCurrentToPosition(e)},t.prototype._updateComponentText=function(){var e=this._textIsComposing||this.text;this._setText(e,!1)},t.prototype._updateEmptyValueFlag=function(){this.text&&(this._emptyValueAction=!1)},t.prototype._controlDropdownVisibility=function(){this.text&&!this.isDroppedDown&&(this.isDroppedDown=!0)},t.prototype._resetDragState=function(){this._draggingText=!1},t.prototype._updateInputSelection=function(e){var n=this._tbx;this._elRef==n&&this._setSelRange(e,n.value.length)},t.prototype._getSelStart=function(){var e=this._tbx;return e&&e.value?e.selectionStart:0},t.prototype._getSelEnd=function(){var e=this._tbx;return e&&e.value?e.selectionEnd:0},t.prototype._setSelRange=function(e,n){var i=this._tbx;this._elRef!=i||i.readOnly||ne(i,e,n)},t.prototype.getAriaLabelForScreenReader=function(){return W.ComboBox.ariaLabels.comboBox},t._ctrlTemplate="",t}(mi);rt("MultiSelect",{itemsSelected:"{count:n0} items selected",selectAll:"Select All",ariaLabels:{multiSelectInput:"MultiSelect Input",multiSelect:"Multi Select"}});var io=function(r){Xe(t,r);function t(e,n){var i=r.call(this,e)||this;return i._maxHdrItems=2,i._readOnly=!1,i._hdrFmt=null,i._inputElementAriaLabel=W.MultiSelect.ariaLabels.multiSelectInput,i.checkedItemsChanged=new A,be(i.hostElement,xl.hostElement),i._tbx.readOnly=!0,i.checkedMemberPath=null,i.removeEventListener(i.dropDown,"click"),i._lbx.itemsChanged.addHandler(function(){i._updateHeader(!1)}),i._lbx.checkedItemsChanged.addHandler(function(){i._updateHeader(!1),i.onCheckedItemsChanged()}),i.clickAction=xi.Toggle,i.initialize(n),i._updateInputAriaLabel(),i}return Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate=vi.controlTemplate),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showSelectAllCheckbox",{get:function(){return this._msLbx.showSelectAllCheckbox},set:function(e){this._msLbx.showSelectAllCheckbox=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showFilterInput",{get:function(){return this._msLbx.showFilterInput},set:function(e){this._msLbx.showFilterInput=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"delay",{get:function(){return this._msLbx.delay},set:function(e){this._msLbx.delay=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"caseSensitiveSearch",{get:function(){return this._msLbx.caseSensitiveSearch},set:function(e){this._msLbx.caseSensitiveSearch=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filterInputPlaceholder",{get:function(){return this._msLbx.filterInputPlaceholder},set:function(e){this._msLbx.filterInputPlaceholder=G(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checkOnFilter",{get:function(){return this._msLbx.checkOnFilter},set:function(e){e!=this.checkOnFilter&&(this._msLbx.checkOnFilter=M(e),this.checkedItems=[])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectAllLabel",{get:function(){return this._msLbx.selectAllLabel},set:function(e){this._msLbx.selectAllLabel=G(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checkedMemberPath",{get:function(){return this._msLbx.checkedMemberPath},set:function(e){this._msLbx.checkedMemberPath=G(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxHeaderItems",{get:function(){return this._maxHdrItems},set:function(e){this._maxHdrItems!=e&&(this._maxHdrItems=V(e),this._updateHeader())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headerFormat",{get:function(){return this._hdrFmt},set:function(e){e!=this._hdrFmt&&(this._hdrFmt=G(e),this._updateHeader())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headerFormatter",{get:function(){return this._hdrFormatter},set:function(e){e!=this._hdrFormatter&&(this._hdrFormatter=Le(e),this._updateHeader())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checkedItems",{get:function(){return this._msLbx.checkedItems},set:function(e){this._msLbx.checkedItems=e==null?[]:vt(e),this._updateHeader()},enumerable:!0,configurable:!0}),t.prototype.onCheckedItemsChanged=function(e){this.checkedItemsChanged.raise(this,e)},t.prototype.dispose=function(){this._lbx.dispose(),r.prototype.dispose.call(this)},t.prototype.onIsDroppedDownChanged=function(e){var n=this;r.prototype.onIsDroppedDownChanged.call(this,e),setTimeout(function(){if(n.isDroppedDown&&n.containsFocus())if(n.showFilterInput&&!n.isTouching)n._msLbx._filter.focus();else{var i=n.listBox;if(i.selectedIndex<0){var o=0,s=i.checkedItems;s.length&&(o=i.collectionView.items.indexOf(s[0])),i.selectedIndex=Math.max(0,o)}i.showSelection(!0),i.focus()}})},t.prototype.onLostFocus=function(){this._msLbx.onLostFocus(),this.isDroppedDown=!1,r.prototype.onLostFocus.call(this)},t.prototype._createDropDown=function(){var e=this,n=Oe("<div></div>",this._dropDown);this._msLbx=new Il(n),this._lbx=this._msLbx.listBox,this._lbx.itemsChanged.addHandler(function(){e.isDroppedDown&&e.refresh()}),r.prototype._createDropDown.call(this)},Object.defineProperty(t.prototype,"isReadOnly",{get:function(){return this._readOnly},set:function(e){this._readOnly=M(e),ee(this.hostElement,q.readOnly,this.isReadOnly)},enumerable:!0,configurable:!0}),t.prototype.refresh=function(e){e===void 0&&(e=!0),r.prototype.refresh.call(this,e),this.hostElement&&this._updateHeader()},t.prototype._setText=function(e,n){},t.prototype._keydown=function(e){var n=e.altKey&&(e.keyCode===38||e.keyCode===40);this.isDroppedDown&&n&&this.showFilterInput?(this.isDroppedDown=!1,e.preventDefault()):(r.prototype._keydown.call(this,e),fe(this._tbx,"wj-grid-ime")||!e.defaultPrevented&&Ue(this.collectionView)&&e.keyCode>32&&e.keyCode!==123&&(this.isDroppedDown=!0))},t.prototype._hasItems=function(){var e=this.collectionView,n=e?e.sourceCollection:null;return Ue(e)||n&&n.length&&this.showFilterInput},t.prototype._updateHeader=function(e,n){e===void 0&&(e=!0);var i="";if(oe(this._hdrFormatter))i=this._hdrFormatter(this);else{var o=this.checkedItems,s=[];if(this.displayMemberPath){var l=new nt(this.displayMemberPath);s=o.reduce(function(c,d){return(d.binding?c.find(function(f){return f.binding===d.binding}):c.find(function(f){return l.getValue(f)===l.getValue(d)}))||c.push(d),c},[]),o=s}if(o.length>0)if(o.length<=this._maxHdrItems){if(this.headerPath){var a=new nt(this.headerPath);o=o.map(function(c){return a.getValue(c)})}else if(this.displayMemberPath){var u=new nt(this.displayMemberPath);o=o.map(function(c){return u.getValue(c)})}this.isContentHtml&&(o=o.map(function(c){return Dt(c)})),this.trimText&&(o=o.map(function(c){return c?c.toString().trim():""})),i=o.join(", ")}else i=zt(this.headerFormat||W.MultiSelect.itemsSelected,{count:o.length})}var h=this.inputElement;i!=h.value&&(h.value=i,this.onTextChanged()),e&&this._lbx._updateCheckedList(this.checkedItems),this._updateState()},t.prototype.getAriaLabelForScreenReader=function(){return W.MultiSelect.ariaLabels.multiSelect},t._DEF_CHECKED_PATH="$checked",t._ctrlTemplate="",t}(vi);rt("Menu",{ariaLabels:{menuButton:"Menu"}});var rh=function(r){Xe(t,r);function t(e,n){var i=r.call(this,e)||this;i._closing=!1,i._cmd=null,i._cmdPath=null,i._cmdParamPath=null,i._subPath=null,i._owner=null,i._isButton=!1,i._openOnHover=!1,i._closeOnLeave=!0,i._subMenu=null,i._hoverEnterBnd=i._hoverEnter.bind(i),i._hoverLeaveBnd=i._hoverLeave.bind(i),i._hoverOverBnd=i._hoverOver.bind(i),i._ariaLabel=W.Menu.ariaLabels.menuButton,i._aFEnabledItem=!1,i.itemClicked=new A;var o=i.hostElement,s=i._tbx,l=i._lbx,a=i.dropDown;be(o,Cn.hostElement),s.style.display="none";var u='<div wj-part="header" class="'+ce.formControl+'"/>';return i._hdr=i._elRef=Oe(u),s.parentElement.insertBefore(i._hdr,i._tbx),o.tabIndex=i.isDisabled?-1:i._orgTabIndex,i.isRequired=!1,S(o,"role","button"),S(s,"role",null),S(s,"aria-autocomplete",null),S(s,"aria-owns",null),S(a,"role","menu"),l.itemRole="menuitem",i._orgTag=="SELECT"&&(i.header=o.getAttribute("header"),i._lbx.itemsSource&&(i.commandParameterPath="cmdParam")),i.isContentHtml=!0,i.maxDropDownHeight=500,i.addEventListener(i._hdr,"click",function(h){h.defaultPrevented||(i._clearHover(h),i._isButton?(i.isDroppedDown=!1,i._raiseCommand()):i.isDroppedDown=!i.isDroppedDown)}),i.addEventListener(i._hdr,"mousedown",function(h){h.defaultPrevented||i._clearHover(h)}),l.lostFocus.addHandler(function(){i.containsFocus()||(i.isDroppedDown=!1)}),be(a,Cn.menuItems),l.formatItem.addHandler(i._formatMenuItem.bind(i)),i.initialize(n),S(o,"aria-expanded",!1),S(o,"aria-label",i._ariaLabel),S(o,"aria-haspopup","menu"),S(o,"aria-owns",a.id),S(o,"aria-controls",a.id),i}return Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate=vi.controlTemplate),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ariaLabel",{get:function(){return this._ariaLabel},set:function(e){e!=this._ariaLabel&&(this._ariaLabel=e,S(this.hostElement,"aria-label",this._ariaLabel))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoSelectOnFocus",{get:function(){return this._aFEnabledItem},set:function(e){this._aFEnabledItem=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"header",{get:function(){return this._hdr.innerHTML},set:function(e){this._hdr.innerHTML=G(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"command",{get:function(){return this._cmd},set:function(e){this._cmd=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"commandPath",{get:function(){return this._cmdPath},set:function(e){this._cmdPath=G(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"commandParameterPath",{get:function(){return this._cmdParamPath},set:function(e){this._cmdParamPath=G(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subItemsPath",{get:function(){return this._subPath},set:function(e){e!=this._subPath&&(this._subPath=e,this.refresh(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"openOnHover",{get:function(){return this._openOnHover},set:function(e){this._openOnHover=M(e),this._updateHoverEvents()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"closeOnLeave",{get:function(){return this._closeOnLeave},set:function(e){this._closeOnLeave=M(e),this._updateHoverEvents()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isButton",{get:function(){return this._isButton},set:function(e){this._isButton=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"owner",{get:function(){return this._owner},set:function(e){this._owner=Ve(e,HTMLElement,!0),this._enableDisableItems()},enumerable:!0,configurable:!0}),t.prototype.show=function(e){if(!this.isDroppedDown){var n=this._lbx._ignoredItemChangedEvents;if(this._lbx._ignoredItemChangedEvents=!0,this.selectedIndex=-1,this._lbx._ignoredItemChangedEvents=n,this.onIsDroppedDownChanging(new He)){var i=this.dropDown,o=this.owner;!o&&e instanceof MouseEvent&&(o=e.target),o instanceof HTMLElement&&(i[H._OWNR_KEY]=o),e instanceof MouseEvent&&this.openOnHover&&this.closeOnLeave&&(e=new Ye(e.pageX-pageXOffset-2,e.pageY-pageYOffset-2)),ei(i,e,!1,this.isAnimated),this.onIsDroppedDownChanged()}}},t.prototype.hide=function(){this.isDroppedDown&&this.onIsDroppedDownChanging(new He)&&(Vt(this.dropDown),this.onIsDroppedDownChanged())},t.prototype.onItemClicked=function(e){this.itemClicked.raise(this,e)},t.prototype.refresh=function(e){e===void 0&&(e=!0),r.prototype.refresh.call(this,e),this.hostElement&&this._enableDisableItems()},t.prototype.onIsDroppedDownChanged=function(e){if(r.prototype.onIsDroppedDownChanged.call(this,e),S(this.hostElement,"aria-expanded",this.isDroppedDown),this.isDroppedDown){this._closing=!0;var n=this._lbx._ignoredItemChangedEvents;if(this._lbx._ignoredItemChangedEvents=!0,this._defaultItem=this.selectedItem,this.isRequired=!1,this.selectedIndex=-1,this._enableDisableItems(),this._closing=!1,this._lbx._ignoredItemChangedEvents=n,this._aFEnabledItem){for(var i=this.dropDown.children,o=0;o<i.length;o++)if(!i[o].classList.contains(q.disabled)){this.selectedIndex=o,i[o].focus();break}}else this.dropDown.focus()}else{if(!this.selectedItem){var s=this._lbx._checking;this._lbx._checking=!0,this.selectedItem=this._defaultItem,this._lbx._checking=s}var l=this._subMenu;l&&(l.isDroppedDown=!1)}},t.prototype._updateHoverEvents=function(){var e=this.hostElement,n=this.dropDown,i=this.addEventListener.bind(this),o=this.removeEventListener.bind(this),s="mouseleave";o(e,"mouseenter",this._hoverEnterBnd),o(e,s,this._hoverLeaveBnd),o(n,"mouseover",this._hoverOverBnd),o(n,s,this._hoverLeaveBnd),this._openOnHover&&(i(e,"mouseenter",this._hoverEnterBnd),i(n,"mouseover",this._hoverOverBnd),this._closeOnLeave&&(i(e,s,this._hoverLeaveBnd),i(n,s,this._hoverLeaveBnd)))},t.prototype._getSubItems=function(e){var n=this.subItemsPath,i=e&&n?e[n]:null;return Ge(i)&&i.length?i:null},t.prototype._formatMenuItem=function(e,n){var i=n.item;this._getSubItems(n.data)?(be(i,Cn.subItems),S(i,"aria-expanded",!1)):i.innerHTML=="-"&&(i.innerHTML="",be(i,Xt.separator),S(i,"role","separator"))},t.prototype._keydown=function(e){if(!e.defaultPrevented){var n=this._getKeyCode(e);if(this.isDroppedDown)switch(n){case C.Tab:this.isDroppedDown&&(this.isDroppedDown=!1,this.containsFocus()||this.focus(),e.preventDefault());break;case C.Enter:case C.Right:if(this._showSubMenu()){e.preventDefault();return}break;case C.Left:var i=H.getControl(this.owner);if(i instanceof t){var o=i.dropDown,s=i.selectedIndex,l=s>-1?o.children[s]:o;S(l,"aria-expanded",!1),l.removeAttribute("aria-owns"),l.focus(),e.preventDefault();return}}n==C.Enter&&(this.isDroppedDown?this.selectedIndex>-1&&this._raiseCommand():(this.isDroppedDown=!0,e.preventDefault()))}r.prototype._keydown.call(this,e)},t.prototype._dropDownClick=function(e){if(!e.defaultPrevented&&e.target!=this.dropDown){if(this._clearHover(e),this._showSubMenu()){e.preventDefault();return}this.selectedIndex>-1&&this._raiseCommand()}r.prototype._dropDownClick.call(this,e)},t.prototype._showSubMenu=function(){var e=this,n=this._getSubItems(this.selectedItem);if(!n)return null;var i=this.dropDown.children[this.selectedIndex],o=i.getBoundingClientRect(),s=new Ye(o.right,o.top);if(o.height==0)return null;var l=this.rightToLeft||this.dropDown.getAttribute("dir")=="rtl";l&&(s.x=o.left);var a=this._subMenu;a&&(a.isDroppedDown=!1),a=new t(document.createElement("div"),{owner:this.hostElement,itemsSource:n,autoSelectOnFocus:this._aFEnabledItem,itemClicked:function(d,f){e.itemClicked.raise(d,f)},formatItem:function(d,f){e.formatItem.raise(d,f)}}),i&&(S(i,"aria-expanded",!0),S(i,"aria-owns",a.dropDown.id));var u=this.collectionView,h=a.collectionView;u&&u.filter&&h&&!h.filter&&(h.filter=u.filter),"displayMemberPath,selectedValuePath,isContentHtml,command,commandPath,commandParameterPath,maxDropDownWidth,maxDropDownHeight,dropDownCssClass,isAnimated,subItemsPath,openOnHover,closeOnLeave".split(",").forEach(function(d){a[d]=e[d]});var c=a.dropDown;return S(c,"dir",l?"rtl":null),a.show(s),c[H._OWNR_KEY]=this.dropDown,a},t.prototype._raiseCommand=function(e){var n=this.selectedItem,i=this._getSubItems(n),o=this._getCommand(n);if(o&&!i){var s=this._getCommandParm(n);if(!this._canExecuteCommand(o,s))return;this._executeCommand(o,s)}var l=this.headerPath;if(l){var a=new nt(l).getValue(n);a=a==null?"":a.toString(),this.header=this.isContentHtml?a:Wt(a)}if(this.onItemClicked(e),this.containsFocus()){for(var u=this;u&&u.owner;){var h=H.getControl(u.owner);if(!(h instanceof t))break;u=h}var c=u.owner;if(!c&&u.dropDown&&(c=u.dropDown[H._OWNR_KEY]),u.isDroppedDown=!1,u.focus(),!u.containsFocus()&&c instanceof HTMLElement&&c.offsetHeight)if(Ie){var d=document.documentElement,f=d.scrollLeft,p=d.scrollTop;c.focus(),d.scrollLeft=f,d.scrollTop=p}else c.focus()}},t.prototype._getCommand=function(e){var n=e&&this._cmdPath?e[this._cmdPath]:null;return n||this._cmd},t.prototype._getCommandParm=function(e){var n=this._cmdParamPath;return e&&n?e[n]:e},t.prototype._executeCommand=function(e,n){e&&!oe(e)&&(e=e.executeCommand),oe(e)&&e(n)},t.prototype._canExecuteCommand=function(e,n){if(e){var i=e.canExecuteCommand;if(oe(i))return i(n)}return!0},t.prototype._enableDisableItems=function(){if(this.collectionView&&(this._cmd||this._cmdPath))for(var e=this.collectionView.items,n=0;n<e.length;n++){var i=e[n],o=this._getCommand(i);if(o){var s=this._lbx.hostElement.children[n],l=this._getCommandParm(i);ee(s,q.disabled,!this._canExecuteCommand(o,l))}}},t.prototype._clearHover=function(e){this._toHover&&clearTimeout(this._toHover),this._toHover=null,t._evtHover=e},t.prototype._isTargetDisabled=function(e){return fe(e.target,q.disabled)},t.prototype._hoverEnter=function(e){var n=this;this._clearHover(e),this._toHover=setTimeout(function(){n._toHover=null,n.isDroppedDown=!0},H._HOVER_DELAY)},t.prototype._hoverOver=function(e){var n=this;this._clearHover(e),this._toHover=setTimeout(function(){n._toHover=null;var i=n.listBox.indexOf(e.target);i>-1&&!fe(e.target,q.disabled)&&(n.selectedIndex=i,n._subMenu=n._showSubMenu())},H._HOVER_DELAY)},t.prototype._hoverLeave=function(e){var n=this;this._clearHover(e),this.isDroppedDown&&(this._toHover=setTimeout(function(){var i=(e=t._evtHover)?document.elementFromPoint(e.clientX,e.clientY):null,o=$(i,"."+pt.hostElement+"."+Cn.menuItems),s=n._subMenu;!o&&!J(n.hostElement,i,!0)&&(n.isDroppedDown=!1,s&&(s.isDroppedDown=!1))},H._LEAVE_DELAY))},t.prototype._setIsDisabled=function(e){r.prototype._setIsDisabled.call(this,e),this.hostElement.tabIndex=this.isDisabled?-1:this._orgTabIndex},t.prototype._setTabOrder=function(e){r.prototype._setTabOrder.call(this,e),this.hostElement.tabIndex=this.isDisabled?-1:this._orgTabIndex},t._ctrlTemplate="",t}(vi);rt("InputTime",{ariaLabels:{inputTime:"Input Time",inputTimeInput:"InputTime Input"}});var Dl=function(r){Xe(t,r);function t(e,n){var i=r.call(this,e)||this;if(i._format="t",i._inputElementAriaLabel=W.InputTime.ariaLabels.inputTimeInput,i.valueChanged=new A,be(i.hostElement,Cl.hostElement),i.isEditable=!0,i._value=F.newDate(),i._min=i._max=null,i._msk=new un(i._tbx),bi()||(i._tbx.type="tel"),i._orgTag=="INPUT"){var o=i._tbx.getAttribute("value");o&&(i.value=re.parseDate(o,"HH:mm:ss"))}return i.step=15,i.autoExpandSelection=!0,i.initialize(n),i._commitText(),i._updateInputAriaLabel(),i}return Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate=vi.controlTemplate),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputElement",{get:function(){return this._tbx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputType",{get:function(){return this._tbx.type},set:function(e){this._tbx.type=G(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){(e=It(e,!this.isRequired))&&(e=this._clamp(e)),this._setText(e?re.format(e,this.format):"",!0,!0),this.selectedItem&&this.selectedItem.value&&(e=F.fromDateTime(e,this.selectedItem.value)),e!=this._value&&!F.equals(e,this._value)&&(this._value=e,this.onValueChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._tbx.value},set:function(e){e!=this.text&&(this.text||!this.isRequired)&&(this._setText(e,!0),this._commitText()),!this.text&&this.isRequired&&(this.selectedIndex=this._oldIndexToBeRestoredOnBlur<0?0:this._oldIndexToBeRestoredOnBlur)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this._min},set:function(e){this._min=It(e,!0),this.isDroppedDown=!1,this._updateItems()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},set:function(e){this._max=It(e,!0),this.isDroppedDown=!1,this._updateItems()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"step",{get:function(){return this._step},set:function(e){e!=this.step&&(this._step=V(e,!0),this.isDroppedDown=!1,this._updateItems())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){return this._format},set:function(e){e!=this.format&&(this._format=G(e),this._tbx.value=re.format(this.value,this.format),Ue(this.collectionView)&&this._updateItems())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._msk.mask},set:function(e){this._msk.mask=G(e)},enumerable:!0,configurable:!0}),t.prototype.onLostFocus=function(){r.prototype.onLostFocus.call(this)},t.prototype.onValueChanged=function(e){this.valueChanged.raise(this,e)},t.prototype.onItemsSourceChanged=function(e){r.prototype.onItemsSourceChanged.call(this,e),this._hasCustomItems=this.itemsSource!=null},t.prototype.refresh=function(e){e===void 0&&(e=!0),r.prototype.refresh.call(this,e),this.hostElement&&(this._msk.refresh(),this._tbx.value=re.format(this.value,this.format),this._updateItems())},t.prototype.onSelectedIndexChanged=function(e){if(this.selectedIndex>-1&&!this._settingText){var n=this.value?this.value:F.newDate(),i=this.selectedItem.value!=null?this.selectedItem.value:re.parseDate(this.text,this.format,this.value);this.value=F.fromDateTime(n,i)}r.prototype.onSelectedIndexChanged.call(this,e)},t.prototype._clamp=function(e){return this._min!=null&&this._getTime(e)<this._getTime(this._min)&&(e=F.fromDateTime(e,this._min)),this._max!=null&&this._getTime(e)>this._getTime(this._max)&&(e=F.fromDateTime(e,this._max)),e},t.prototype._wheel=function(e){if(this.handleWheel&&!e.defaultPrevented&&!this.isDroppedDown&&this.value&&this._canChangeValue()&&this.containsFocus()&&this.isEditable){var n=this._tbx,i=n.selectionStart,o=n.selectionEnd,s=ye(-e.deltaY,-1,1),l=(this.value,W.Globalize.calendar.patterns[this.format]);l==null&&(l=this.format);var a=l.match($t());if(o-i===n.value.length&&_e(this.step)&&this.step>0){var u=F.addMinutes(this.value,this.step*-s);u=this._clamp(u),this.value=u,this.selectAll()}else this._updateTimeValue(s,a,l);e.preventDefault()}r.prototype._wheel.call(this,e)},t.prototype._updateInputSelection=function(e){if(this._delKey)r.prototype._updateInputSelection.call(this,e);else{for(var n=this._tbx.value;e<n.length&&!n[e].match(/[a-z0-9]/i);)e++;ne(this._tbx,e,this._tbx.value.length)}},t.prototype._updateItems=function(){if(!this._hasCustomItems){var e=[],n=new Date,i=new Date(n.getFullYear(),n.getMonth(),n.getDate()),o=new Date(n.getFullYear(),n.getMonth(),n.getDate(),23,59,59),s=this.step;if(this.min&&i.setHours(this.min.getHours(),this.min.getMinutes(),this.min.getSeconds()),this.max&&o.setHours(this.max.getHours(),this.max.getMinutes(),this.max.getSeconds()),_e(s)&&s>=1)for(var l=i;l<=o;l=F.addMinutes(l,s))e.push({value:l,text:re.format(l,this.format)});var a=this.value;this._settingText=!0,this.displayMemberPath="text",this.selectedValuePath="text",this.itemsSource=e,this._hasCustomItems=!1,this._settingText=!1,!a&&this.isRequired||(this.value=a)}},t.prototype._getTime=function(e){return 3600*e.getHours()+60*e.getMinutes()+e.getSeconds()},t.prototype._getText=function(){var e=re.format,n=this._format;return e(this.value,n)},t.prototype._canChangeValue=function(){return!this.isReadOnly&&!this.isDisabled},t.prototype.getSeconds=function(e){return 3600*e.getHours()+60*e.getMinutes()+e.getSeconds()},t.prototype._keydown=function(e){if(!(e.defaultPrevented||e.altKey||e.ctrlKey||e.metaKey)){if(this._isHiddenEditor())return;switch(e.keyCode){case C.Enter:this._commitText(),this.selectAll();break;case C.Escape:this.text=re.format(this.value,this.format),this.selectAll();break;case C.Up:case C.Down:if(!this.isDroppedDown&&this.value&&this._canChangeValue()&&this.isEditable){var n=this._tbx,i=n.selectionStart,o=n.selectionEnd,s=e.keyCode==C.Up?1:-1,l=W.Globalize.calendar.patterns[this.format];l==null&&(l=this.format);var a=l.match($t());if(o-i==n.value.length)r.prototype._keydown.call(this,e);else{if(!(s==1&&(this.max===null||this.getSeconds(this.value)<this.getSeconds(this.max))||s==-1&&(this.min===null||this.getSeconds(this.value)>this.getSeconds(this.min))))return;this._updateTimeValue(s,a,l)}e.preventDefault()}}}r.prototype._keydown.call(this,e)},t.prototype._updateTimeValue=function(e,n,i){var o=this._tbx,s=o.selectionStart,l=o.value,a=this.value,u={},h={},c=0,d=0,f=0,p=[],_=[],v=o.value.match($t());n==null||v==null?(p=[this.format],_=["0"],n=[""]):(n.forEach(function(w,g){var y=w.replaceAll('"',""),I=i.substring(c),x=l.substring(d),R=I.indexOf(w),k=x.indexOf(y),D=I.substring(0,R);u[D]=c,h[D]=d,c=c+R+w.length,d=d+k+y.length,g==n.length-1&&k!=-1&&(D=i.substring(c),u[D]=c,h[D]=d)}),p=Object.keys(u),_=Object.values(h));var b=_.filter(function(w){return s>=parseInt(w.toString())});b.length>0&&(f=b.length-1);var m=p[f];m.indexOf("h")!=-1||m.indexOf("H")!=-1?a=F.addHours(this.value,e):m.indexOf("m")!=-1?a=F.addMinutes(this.value,e):m.indexOf("s")!=-1?a=F.addSeconds(this.value,e):m.indexOf("t")!=-1&&(a=this.value.getHours()>=12?F.addHours(this.value,-12):F.addHours(this.value,12)),a.getDate()!=new Date().getDate()&&(a=F.fromDateTime(new Date,a)),this.value=a,this._reselectText(n,f)},t.prototype._reselectText=function(e,n){var i=this._getText(),o=this._tbx,s=0,l=-1,a=-1;e.forEach(function(u,h){var c=u.replaceAll('"',""),d=i.substring(s),f=d.indexOf(c),p=d.substring(0,f),_=p==""?d.length:p.length;h==n&&l==-1&&(a=(l=s)+_),s=s+f+c.length}),l==-1&&(l=s,a=o.value.length),ne(o,l,a)},t.prototype._commitText=function(){if(this.text||this.isRequired){var e=this.value?re.format(this.value,this.format):"";if(this.text!=e){var n=this.selectedItem&&this.selectedItem.value?this.selectedItem.value:re.parseDate(this.text,this.format,this.value);n?(F.sameTime(n,this._clamp(n))||this.onInvalidInput(new He))&&(this.value=F.fromDateTime(this.value,n)):this.onInvalidInput(new He)&&(this.text=e)}}else this.value=null},t.prototype._copy=function(e,n){return e==="text"?((n||"").toString()!==this.text&&this._setText(n,!0),!0):!1},t.prototype.getAriaLabelForScreenReader=function(){return W.InputTime.ariaLabels.inputTime},t.prototype._input=function(e){this._draggingText&&(this.text===""?this._emptyValueAction=!0:this._emptyValueAction=!1),this._composing&&(this._composing=!1),this._setText(this._textIsComposing!=""?this._textIsComposing:this.text,!1),this.text!=""&&(this._emptyValueAction=!1),this._draggingText=!1},t._ctrlTemplate="",t}(vi);rt("InputDateTime",{ariaLabels:{inputDateTimeInput:"InputDateTime Input",tglDate:"Toggle Calendar",tglTime:"Toggle Time List"}});var oh=function(r){Xe(t,r);function t(e,n){var i=r.call(this,e)||this;i._inputAriaLabel=W.InputDateTime.ariaLabels.inputDateTimeInput,be(i.hostElement,yl.hostElement);var o=W.InputDateTime.ariaLabels;Ee(i._btn,o.tglDate),Ee(i._btnTm,o.tglTime),i._updateInputAriaLabel(),i.value=new Date,i.format="g",i._inputTime=new Dl(document.createElement("div"),{valueChanged:function(a){var u=i.rangeEnd;i.value=F.fromDateTime(i.value,a.value),i.calendar._rngMode()&&u&&(i.rangeEnd=F.fromDateTime(u,a.value))},isDroppedDownChanged:function(a){a.listBox.containsFocus()&&i.inputElement.focus(),i._selectAll()},keyActionPrintCharacters:0,keyActionTab:0});var s=i.addEventListener.bind(i);i._btnTm=i.hostElement.querySelector('[wj-part="btn-tm"]'),s(i._btnTm,"mousedown",function(a){i._btnclick(a)}),i._ddDate=i._dropDown;var l=i._ddTime=i._inputTime.dropDown;return s(l,"keydown",i._keydown.bind(i),!0),s(l,"blur",function(){i._updateFocusState()},!0),s(l,"click",function(a){a.defaultPrevented||a.target!=l&&i.hostElement.focus()},!0),i.initialize(n),i._tbx.value!==i._oldText&&i._commitText(),i}return Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate='<div class="'+ge.template+'"><div class="'+tt.input+'"><div class="'+tt.inputGroup+" "+tt.inputBtnVisible+'"><input wj-part="input" type="text" class="'+ce.formControl+'"/><span class="'+tt.inputGroupBtn+'"><button wj-part="btn" class="'+ce.btn+" "+ce.btnDefault+'" tabindex="-1"><span class='+ut.calendar+'></span></button><button wj-part="btn-tm" class="'+ce.btn+" "+ce.btnDefault+'" tabindex="-1"><span class='+ut.clock+'></span></button></span></div></div><div wj-part="dropdown" class="'+ge.content+" "+gi.dropDownPanel+'"></div></div>'),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeMin",{get:function(){return this._inputTime.min},set:function(e){this._inputTime.min=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeMax",{get:function(){return this._inputTime.max},set:function(e){this._inputTime.max=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeFormat",{get:function(){return this._inputTime.format},set:function(e){this._inputTime.format=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeStep",{get:function(){return this._inputTime.step},set:function(e){this._inputTime.step=e,this._btnTm.style.display=_e(e)&&e>0?"":"none"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputTime",{get:function(){return this._inputTime},enumerable:!0,configurable:!0}),t.prototype._fromDateTime=function(e){return e},t.prototype._btnclick=function(e){var n=$(e.target,"button")==this._btn?this._ddDate:this._ddTime;this._setDropdown(n),r.prototype._btnclick.call(this,e)},t.prototype.dispose=function(){this._setDropdown(this._ddDate),r.prototype.dispose.call(this),this._inputTime.dispose()},t.prototype.refresh=function(e){e===void 0&&(e=!0),this._inputTime.refresh(),r.prototype.refresh.call(this,e)},t.prototype._updateBtn=function(){r.prototype._updateBtn.call(this),this._btnTm&&(this._btnTm.tabIndex=this._btn.tabIndex,this._btnTm.parentElement.style.display=this._btn.style.display)},t.prototype._setDropdown=function(e){if(this._dropDown==e)return!1;this.isDroppedDown&&(this.isDroppedDown=!1);var n=this.dropDownCssClass;return this.dropDownCssClass="",this._dropDown=e,this.dropDownCssClass=n,!0},t.prototype._updateDropDown=function(){var e=this._inputTime;this._dropDown==e.dropDown?(this._commitText(),r.prototype._updateDropDown.call(this),e.isRequired=this.isRequired&&this.value!=null,e.value=this.value,this.isDroppedDown&&e.listBox.showSelection()):r.prototype._updateDropDown.call(this)},t.prototype._mouseWheel=function(e){if(this.handleWheel&&!e.defaultPrevented&&!this.isDroppedDown&&this.containsFocus()&&this.value!=null&&this._canChangeValue()){var n=this._tbx,i=n.selectionStart,o=n.selectionEnd,s=ye(-e.deltaY,-1,1),l=this.value,a=re.getFullFormat(this.format);a==null&&(a=this.format);var u=a.match($t());if(o-i===n.value.length&&u!=null||this.selectionMode==$e.Range){l=this.selectionMode==$e.Month?F.addMonths(this.value,s):F.addDays(this.value,s),this.value=l;var h=this._getText();ne(n,0,h.length)}else(s==1&&(this.max===null||this.value<this.max)||s==-1&&(this.min===null||this.value>this.min))&&this._updateDateTimeValue(s,u,a);e.preventDefault()}},t.prototype._keydown=function(e){if(!(e.defaultPrevented||e.altKey||e.ctrlKey||e.metaKey)){if(this._isHiddenEditor())return;switch(e.keyCode){case C.Up:case C.Down:if(!this.isDroppedDown&&this.value&&this._canChangeValue()){var n=this._tbx,i=n.selectionStart,o=n.selectionEnd,s=(n.value,e.keyCode==C.Up?1:-1),l=this.value,a=re.getFullFormat(this.format);this.format=="g"&&a.includes("г")&&(a=a.replace(/\"г.\" /,"")),a==null&&(a=this.format);var u=a.match($t());if(o-i===n.value.length&&u!=null||this.selectionMode==$e.Range){l=this.selectionMode==$e.Month?F.addMonths(this.value,s):F.addDays(this.value,s),this.value=l;var h=this._getText();ne(n,0,h.length)}else(s==1&&(this.max===null||this.value<this.max)||s==-1&&(this.min===null||this.value>this.min))&&this._updateDateTimeValue(s,u,a);e.preventDefault()}}}r.prototype._keydown.call(this,e)},t.prototype._updateDateTimeValue=function(e,n,i){var o=this._tbx,s=o.selectionStart,l=o.value,a=this.value,u={},h={},c=0,d=0,f=0,p=[],_=[],v=o.value.match($t());n==null||v==null?(p=[this.format],_=["0"],n=[""]):(n.forEach(function(y,I){var x=y.replaceAll('"',""),R=i.substring(c),k=l.substring(d);k.startsWith("г.")&&(k=k.replace("г. ",""),d+=3);var D=R.indexOf(y),E=k.indexOf(x);if(E==-1){var T=v[I];E=k.indexOf(T)}var L=R.substring(0,D);L!=""&&(u[L]=c,h[L]=d),c=c+D+y.length,d=d+E+x.length,I==n.length-1&&E!==-1&&(L=i.substring(c),u[L]=c,h[L]=d)}),p=Object.keys(u),_=Object.values(h));var b=_.filter(function(y){return s>=parseInt(y.toString())});b.length>0&&(f=b.length-1);var m=new Date,w=new Date;this.timeMax!==null&&(m=new Date(this.value.getFullYear(),this.value.getMonth(),this.value.getDate(),this.timeMax.getHours(),this.timeMax.getMinutes(),this.timeMax.getSeconds())),this.timeMin!==null&&(w=new Date(this.value.getFullYear(),this.value.getMonth(),this.value.getDate(),this.timeMin.getHours(),this.timeMin.getMinutes(),this.timeMin.getSeconds()));var g=p[f];g.indexOf("d")!=-1?a=F.addDays(this.value,e):g.indexOf("M")!=-1?a=F.addMonths(this.value,e):g.indexOf("y")!=-1?a=F.addYears(this.value,e):(e==1&&(this.timeMax===null||this.value<m)||e==-1&&(this.timeMin===null||this.value>w))&&(g.indexOf("h")!=-1||g.indexOf("H")!=-1?a=F.addHours(this.value,e):g.indexOf("m")!=-1?a=F.addMinutes(this.value,e):g.indexOf("s")!=-1?a=F.addSeconds(this.value,e):g.indexOf("t")!=-1&&(a=this.value.getHours()>=12?F.addHours(this.value,-12):F.addHours(this.value,12)),(this.timeMax&&a>m||this.timeMin&&a<w)&&(a=this.value)),this.value=a,this._reselectText(n,f)},t.prototype._commitText=function(e,n){var i=this._tbx.value,o=re.parseDate(i,this.format,this.value),s=new Date,l=new Date;o?(this.timeMax!==null&&(s=new Date(o.getFullYear(),o.getMonth(),o.getDate(),this.timeMax.getHours(),this.timeMax.getMinutes(),this.timeMax.getSeconds())),this.timeMin!==null&&(l=new Date(o.getFullYear(),o.getMonth(),o.getDate(),this.timeMin.getHours(),this.timeMin.getMinutes(),this.timeMin.getSeconds())),(this.timeMax&&o>s||this.timeMin&&o<l)&&(this.value=F.fromDateTime(o,this.value)),r.prototype._commitText.call(this,e,n)):r.prototype._commitText.call(this,e,n)},t._ctrlTemplate="",t}(or);rt("AutoComplete",{ariaLabels:{autoCompleteInput:"AutoComplete Input",autoComplete:"Auto Complete"}});var no=function(r){Xe(t,r);function t(e,n){var i=r.call(this,e)||this;return i._cssMatch=Do.stateMatch,i._minLength=2,i._maxItems=6,i._itemCount=0,i._beginsWith=!1,i._delay=H._SEARCH_DELAY,i._selItems=null,i._query="",i._inCallback=!1,i._srchProps=[],i._oldSelectedIndex=-1,i._inputElementAriaLabel=W.AutoComplete.ariaLabels.autoCompleteInput,i._isBlurInput=!1,be(i.hostElement,vl.hostElement),i._bsCollapse=!1,i.isEditable=!0,i.isRequired=!1,i.listBox.formatItem.addHandler(i._formatListItem,i),i._itemsSourceFnCallbackBnd=i._itemSourceFunctionCallback.bind(i),i.initialize(n),i._updateInputAriaLabel(),i}return Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate=vi.controlTemplate),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minLength",{get:function(){return this._minLength},set:function(e){this._minLength=V(e,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"beginsWithSearch",{get:function(){return this._beginsWith},set:function(e){this._beginsWith=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxItems",{get:function(){return this._maxItems},set:function(e){this._maxItems=V(e,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"delay",{get:function(){return this._delay},set:function(e){this._delay=V(e,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"searchMemberPath",{get:function(){return this._srchProp},set:function(e){this._srchProp=G(e),this._srchProps=e?e.trim().split(/\s*,\s*/):[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemsSourceFunction",{get:function(){return this._itemsSourceFn},set:function(e){this._itemsSourceFn!==e&&(this._itemsSourceFn=Le(e),oe(this._itemsSourceFn)&&this.itemsSourceFunction(this.text,this.maxItems,this._itemsSourceFnCallbackBnd))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cssMatch",{get:function(){return this._cssMatch},set:function(e){this._cssMatch=G(e)},enumerable:!0,configurable:!0}),t.prototype.onSelectedIndexChanged=function(e){this._settingText||r.prototype.onSelectedIndexChanged.call(this,e)},t.prototype._updateTbxAria=function(){r.prototype._updateTbxAria.call(this);var e=this._tbx;S(e,"aria-autocomplete","list")},t.prototype._keydown=function(e){if(!this._isHiddenEditor()){if(!e.defaultPrevented&&this.isDroppedDown)switch(e.keyCode){case C.Up:case C.Down:this.selectAll()}r.prototype._keydown.call(this,e)}},t.prototype._input=function(e){this._handleDragTextState(),this._handleComposingState(),this._updateComponentText(),this._updateEmptyValueFlag(),this._resetDragState()},t.prototype._commitText=function(e){var n=this;e&&this._composing&&this.isDroppedDown&&!Gt()&&!Ht()&&this._textIsComposing==""&&(this._isBlurInput=!0,this.isDroppedDown=!1,setTimeout(function(){n.onLostFocus()},this.delay+1)),e&&!this._composing&&(Gt()||Ht())&&Z()==this.inputElement&&this.onLostFocus()},t.prototype._setText=function(e){var n=this;if(this._isBlurInput&&this.text.length==0&&(this._tbx.value=e,this._isBlurInput=!1),this.trimText&&!this.containsFocus()&&typeof e=="string"&&(e=e.trim()),this._composing&&e!=this._oldText&&(this._oldText=e,this.onTextChanged()),!(this._inCallback||this._settingText||(Gt()||Ht())&&this._composing)){if(this._toSearch||(this._oldSelectedIndex=this.selectedIndex),this.selectedIndex>-1&&this._getDisplayText(void 0,void 0,!0)!=e&&(this._settingText=!0,this.selectedIndex=-1,this._settingText=!1),this._toSearch&&clearTimeout(this._toSearch),e!=this._oldText||e!=this.text){typeof e!="string"&&(e="");var i=this._tbx,o=this._tbx.selectionStart;i.value!=e&&(i.value=e),this._isWheel&&this.containsFocus()&&this._updateInputSelection(o),this._oldText=e,this.onTextChanged();var s=this.collectionView;if(!e&&s){(this._query||this.selectedIndex<0)&&(this.isDroppedDown=!1),this._query=this._rxHighlight=null,s.filter=null;var l=this.itemsSourceFunction;if(oe(l)&&(this.isDroppedDown=!1,l(this._query,this.maxItems,this._itemsSourceFnCallbackBnd)),this.isRequired&&!this.containsFocus()&&!Array.isArray(this._selItems)){var a=this._oldSelectedIndex>-1?this._oldSelectedIndex:0;this.selectedIndex=a}this.selectedIndex==-1&&this._oldSelectedIndex!=-1&&this.onSelectedIndexChanged();return}}if(e!=this._getDisplayText(void 0,void 0,!0)){!this.containsFocus()&&this.trimText&&(this.isRequired&&!this.text.trim().length?(a=this._oldSelectedIndex>-1?this._oldSelectedIndex:0,this.selectedIndex=a):this._tbx.value=this._tbx.value.trim());var u=!this.containsFocus()&&e.length<this.minLength;this.collectionView&&!this.containsFocus()&&(this.collectionView.filter=null);var h=this.indexOf(e,!0),c=this.indexOf(e,!1);if(u)return;if(!this.containsFocus()&&(!e||this.trimText&&!this.text.trim().length||this.collectionView!=null&&h<0&&c<0)&&this.isRequired&&!this.isEditable)(a=this._oldSelectedIndex>-1?this._oldSelectedIndex:Ue(this.collectionView)?0:-1)!=this.selectedIndex&&(this.selectedIndex=a);else if((Array.isArray(this.itemsSource)||typeof this.itemsSourceFunction=="function")&&!this.containsFocus()&&e&&h<0&&(c<0||c!=h)&&!this.isRequired&&!this.isEditable)this._tbx.value="",this.selectedIndex=-1,this.onSelectedIndexChanged();else{var d=this._delay>0?setTimeout:function(f,p){return f()};this._pendingSearchFn=function(){n._toSearch=null;var f=n.text;if(!n._composing&&f.trim().length>=n._minLength&&f!=n._query){n._query=f.trim(),f=yo(f);var p=Wt(f.trim()),_=n.caseSensitiveSearch?"":"i";n._beginsWith||(_+="g"),n._rxSrch=n._beginsWith?new RegExp("^"+f+".*",_):new RegExp("(?=.*"+f.replace(/ /g,")(?=.*")+")",_),n._rxHighlight=n._beginsWith?new RegExp("^"+f,_):new RegExp("("+p.replace(/\s+/g,"|")+")",_);var v=n.itemsSourceFunction;oe(v)?v(n._query,n.maxItems,n._itemsSourceFnCallbackBnd):n._updateItems()}!e.trim().length&&!n.isEditable&&n.indexOf(e,!0)<0&&(n.selectedIndex=-1),n.selectedIndex==-1&&n._oldSelectedIndex!=-1&&n.onSelectedIndexChanged()},this._toSearch=d(this._pendingSearchFn,this._delay)}}else this._tbx.value===""&&e&&(this._tbx.value=e)}},t.prototype.onLostFocus=function(e){var n=!1;if(this.isRequired&&!this.isEditable&&this.text&&this.text.length>=this.minLength){n=!0;var i=this.indexOf(this.text,!0);i<0&&(i=this.indexOf(this.text,!1)),i>-1&&(this._oldSelectedIndex=i),i<0&&(this._oldSelectedIndex=0)}this._toSearch&&(clearTimeout(this._toSearch),this.text!==this._getDisplayText(void 0,void 0,!0)&&this._pendingSearchFn&&this._pendingSearchFn(),n=!1);var o=this.collectionView;o&&o.items.length===0&&(this._oldFilter=o.filter,o.filter=null),r.prototype.onLostFocus.call(this,e,this._oldSelectedIndex,n)},t.prototype.onGotFocus=function(e){this._toSearch||(this._oldSelectedIndex=this.selectedIndex),r.prototype.onGotFocus.call(this,e)},t.prototype.reset=function(){this._oldSelectedIndex=-1},t.prototype._itemSourceFunctionCallback=function(e){this._inCallback=!0;var n=On(e||[]);if(n.moveCurrentToPosition(-1),this.itemsSource=n,this._inCallback=!1,this.containsFocus()){var i=this._tbx,o=i.selectionStart,s=i.selectionEnd,l=this.collectionView;this.isDroppedDown=l!=null&&l.items.length>0,ne(i,o,s),this.refresh()}},t.prototype.onIsDroppedDownChanged=function(e){if(r.prototype.onIsDroppedDownChanged.call(this,e),this.containsFocus()&&!this.isTouching){var n=this.collectionView;if(this.selectedIndex<0&&n){var i=n.items,o=this.text;i.length==1&&i[0]==o?this.selectedIndex=0:ne(this._tbx,o.length)}}this._query=""},t.prototype._updateItems=function(){var e=this.collectionView;if(e){this._inCallback=!0,e.beginUpdate(),this._itemCount=0,e.filter=this._filter.bind(this),e.moveCurrentToPosition(-1),e.endUpdate(),this._inCallback=!1;var n=e.items.length,i=this._tbx,o=i.selectionStart,s=i.selectionEnd;if(this.text.trim()||(n=0),this.isDroppedDown=n>0&&this.containsFocus(),n||this.isEditable||(this.selectedIndex=-1),n==1&&this.selectedIndex<0){var l=this._getItemText(e.items[0],!1),a=i.value;this.caseSensitiveSearch||(l=l.toLowerCase(),a=a.toLowerCase()),(l==a||this.trimText&&l.trim()==a)&&(this.selectedIndex=0)}this.isDroppedDown&&ne(i,o,s),this.refresh()}},t.prototype._filter=function(e){if(this._itemCount>=this._maxItems&&this._query)return!1;var n=[this._getItemText(e,!1)];this._srchProps&&this._srchProps.forEach(function(o){var s=e[o];s!=null&&n.push(s)}),this.isContentHtml&&(n=n.map(function(o){return o.replace(/(<[^>]*>|&[^;]*;)/g,"")}));for(var i=0;i<n.length;i++)if(this._rxSrch.test(n[i]))return this._itemCount++,!0;return!1},t.prototype._getItemText=function(e,n){var i=e?e.toString():"",o=n&&this.headerPath?this._pathHdr:this._lbx._pathDisplay;return o&&(i=(i=o.getValue(e))!=null?i.toString():""),i},t.prototype._formatListItem=function(e,n){var i=this;this._cssMatch&&this._rxHighlight&&this._query&&(n.item.innerHTML=n.item.innerHTML.replace(this._rxHighlight,function(o,s,l,a){return i._enclosed(a,l,"<",">")||i._enclosed(a,l,"&",";")?o:'<span class="'+i._cssMatch+'">'+o+"</span>"}))},t.prototype._enclosed=function(e,n,i,o){for(var s=n;s>=0&&e[s]!=o;s--)if(e[s]==i){for(var l=n;l<e.length&&e[l]!=i;l++)if(e[l]==o)return!0}return!1},t.prototype._wheel=function(e){r.prototype._wheel.call(this,e)},t.prototype.getAriaLabelForScreenReader=function(){return W.AutoComplete.ariaLabels.autoComplete},t.prototype._hasCustomFormatItem=function(){return this.formatItem.getHandler.length>1},t._ctrlTemplate="",t}(vi);rt("MultiAutoComplete",{ariaLabels:{multiAutoCompleteInput:"MultiAutoComplete Input"}});var sh=function(r){Xe(t,r);function t(e,n){var i=r.call(this,e)||this;return i._maxSelItems=null,i._lastInputValue="",i._selPath=new nt(null),i._notAddItm=!1,i._inputElementAriaLabel=W.MultiAutoComplete.ariaLabels.multiAutoCompleteInput,i.selectedItemsChanged=new A,be(i.hostElement,ri.hostElement),i._wjTpl=i.hostElement.querySelector("."+ge.template),i._wjInput=i.hostElement.querySelector("."+tt.input),i.showDropDownButton=!1,i._selItems=[],i.initialize(n),i.addEventListener(i.hostElement,"keyup",i._keyup.bind(i),!0),i.addEventListener(window,"resize",i._adjustInputWidth.bind(i)),i.addEventListener(i._tbx,"focus",function(){i._itemOff()}),i._addHelperInput(),i._initSeltems(),i.listBox.itemsChanged.addHandler(function(){if(i.selectedIndex!==-1){var o=i.collectionView;(o&&(o.constructor.name=="CollectionView"||o.constructor.name=="ODataVirtualCollectionView")||o.virtualization)&&(i.selectedIndex=-1)}}),i._refreshHeader(),i._updateTabIndex(),i._updateInputAriaLabel(),i}return Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate=no.controlTemplate),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showDropDownButton",{set:function(e){this._showBtn=!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxSelectedItems",{get:function(){return this._maxSelItems},set:function(e){this._maxSelItems!=e&&(this._maxSelItems=V(e,!0),this._updateMaxItems(),this._refreshHeader(),this._clearSelIndex())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedMemberPath",{get:function(){return this._selPath.path},set:function(e){(e=G(e))!==this.selectedMemberPath&&(this._selPath.path=e,this._initSeltems(),this._refreshHeader(),this.onSelectedItemsChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedItems",{get:function(){return this._selItems},set:function(e){e=Array.from(new Set(e));var n=this._selItems===e;if(n||this._selItems==null||e==null||this._selItems.length!==e.length||(n=this._selItems.every(function(s,l){return s===e[l]})),this._selItems=vt(e),!n){if(this.selectedMemberPath&&this.selectedMemberPath!==""&&this._selItems)for(var i=0;i<this._selItems.length;i++){var o=this._selItems[i];this._setSelItem(o,!1)}this._updateMaxItems(),this.onSelectedItemsChanged(),this._refreshHeader(),this._clearSelIndex()}},enumerable:!0,configurable:!0}),t.prototype.onSelectedItemsChanged=function(e){this.selectedItemsChanged.raise(this,e)},t.prototype.onIsDroppedDownChanged=function(e){!this.isDroppedDown&&this.selectedIndex>-1&&!this._notAddItm&&this._addItem(!0),this._notAddItm=!1,r.prototype.onIsDroppedDownChanged.call(this,e)},t.prototype.refresh=function(e){e===void 0&&(e=!0),r.prototype.refresh.call(this,e),this.hostElement&&(this._initSeltems(),this.isDroppedDown||this._refreshHeader())},t.prototype._keydown=function(e){if(!this.isReadOnly){if(!e.defaultPrevented)switch(e.keyCode){case C.Back:this._lastInputValue=this._tbx.value;break;case C.Enter:this._itemOff(),this._addItem(!0),Ie()&&ne(this._tbx,this._tbx.textContent.length,this._tbx.textContent.length);break;case C.Tab:this.isDroppedDown?(this._addItem(!1),this._tbx.value="",this._lbx.selectedIndex=-1,this.isDroppedDown=!1,this.containsFocus()||this.focus(),e.preventDefault()):this._updateFocus();break;case C.Space:if(this._tbx.value!=="")return;!this.isDroppedDown&&!this._tbx.disabled&&(this.isDroppedDown=!0,this._clearSelIndex());break;case C.Escape:this.isDroppedDown&&(this._notAddItm=!0);break;case C.Left:this._itemOn(!this.rightToLeft);break;case C.Right:this._itemOn(!!this.rightToLeft);break;case C.Up:case C.Down:var n=Z();if(e.altKey){if(this._tbx==n){this.isDroppedDown=!this.isDroppedDown,this.isDroppedDown||this._tbx.focus(),e.preventDefault();return}}else if(this._tbx!==n)return;default:if(e.keyCode===C.Back||e.keyCode===C.Delete)return;this._itemOff(),this._maxSelItems!=null&&this._selItems.length>=this._maxSelItems&&e.preventDefault()}this._tbx.disabled||r.prototype._keydown.call(this,e)}},t.prototype._updateState=function(){r.prototype._updateState.call(this),this._wjTpl&&(fe(this.hostElement,q.focused)||this._itemOff())},t.prototype._keyup=function(e){if(!this.isReadOnly&&!e.defaultPrevented)switch(e.keyCode){case C.Back:this._tbx.value.length===0&&this._lastInputValue.length===0&&this._delItem(!1);break;case C.Delete:this._delItem(!0)}},t.prototype._addHelperInput=function(){var e=document.createElement("input");e.type="text",e.tabIndex=-1,e.className=ri.tokenHelper,e.readOnly=!0,this._wjTpl.insertBefore(e,this._wjInput),this._helperInput=e},t.prototype._refreshHeader=function(){for(var e=this.hostElement.querySelectorAll("."+ri.token),n=0;n<e.length;n++)this._wjTpl.removeChild(e[n]);var i=this.selectedItems;if(i&&i.length!==0){for(n=0;n<i.length;n++)this._insertToken(i[n]);this._wjInput.style.cssFloat=this.rightToLeft?"right":"left",this._adjustInputWidth()}else this._wjInput.style.cssFloat=this.rightToLeft?"right":"left",this._adjustInputWidth()},t.prototype._insertToken=function(e){var n=this._getItemText(e,!0);this.isContentHtml||(n=Wt(n)),this._wjTpl.insertBefore(this._createItem(n),this._wjInput)},t.prototype._updateMaxItems=function(){this._maxSelItems!=null&&this._selItems&&this._selItems.length>this._maxSelItems&&(this._selItems=this._selItems.slice(0,this._maxSelItems))},t.prototype._updateFocus=function(){var e=this,n=this._wjTpl.querySelector("."+t._clsActive);n?(kt(n,t._clsActive),setTimeout(function(){e._tbx.focus()})):this._clearSelIndex()},t.prototype._addItem=function(e){this.selectedItems.indexOf(this.selectedItem)>-1?this._clearSelIndex():this.selectedIndex>-1&&(this._updateSelItems(this.selectedItem,!0),this._refreshHeader(),e&&this._clearSelIndex(),this._disableInput(!0))},t.prototype._delItem=function(e){var n,i,o=this._wjTpl.querySelector("."+t._clsActive),s=!1;(!e||o)&&(o?(i=this._getItemIndex(o))>-1&&(n=this._selItems[i],s=!0):this._selItems.length>0&&(n=this._selItems[this._selItems.length-1],s=!0),s&&(this._updateSelItems(n,!1),this._refreshHeader(),this._clearSelIndex(),this._disableInput(!1)),this._tbx.focus())},t.prototype._updateSelItems=function(e,n){if(n){if(this._selItems&&this._selItems.length!==0||(this._selItems=[]),this._maxSelItems!=null&&this._selItems.length>=this._maxSelItems)return;this._selItems.push(e)}else{var i=this._selItems.indexOf(e);this._selItems.splice(i,1)}this._hasSelectedMemeberPath()&&this._setSelItem(e,n),this.onSelectedItemsChanged()},t.prototype._createItem=function(e){var n=this,i=document.createElement("div"),o=document.createElement("span"),s=document.createElement("a");return i.appendChild(o),i.appendChild(s),i.className=ri.token,o.className=ri.tokenLabel,o.innerHTML=e,s.className=ri.tokenClose,s.href="#",s.tabIndex=-1,s.text="×",i.style.cssFloat=this.rightToLeft?"right":"left",this.addEventListener(i,"click",function(l){n._helperInput.focus();var a=n._wjTpl.querySelector("."+t._clsActive);a&&kt(a,t._clsActive),be(i,t._clsActive),l.stopPropagation(),l.preventDefault()}),this.addEventListener(s,"click",function(l){if(!n.isReadOnly){var a=n._getItemIndex(i);if(a>-1){var u=n._selItems[a];n._updateSelItems(u,!1)}n._wjTpl.removeChild(i),n._adjustInputWidth(),n._disableInput(!1),n._tbx.focus(),l.stopPropagation(),l.preventDefault()}}),i},t.prototype._itemOn=function(e){var n,i,o,s=Z();if((this._tbx!=s||this._tbx.value.length===0)&&(n=this._wjTpl.querySelectorAll("."+ri.token)).length!==0){if(i=this._wjTpl.querySelector("."+t._clsActive),o=this._getItemIndex(i),e){if(o===0)return;o===-1?(be(n[n.length-1],t._clsActive),this._helperInput.focus()):(kt(i,t._clsActive),be(n[o-1],t._clsActive),this._helperInput.focus())}else if(!e){if(o===-1)return;o!==n.length-1?(kt(i,t._clsActive),be(n[o+1],t._clsActive),this._helperInput.focus()):(kt(i,t._clsActive),this._tbx.focus())}}},t.prototype._itemOff=function(){var e=this._wjTpl.querySelector("."+t._clsActive);e&&kt(e,t._clsActive)},t.prototype._initSeltems=function(){if(this.selectedMemberPath){this._selItems.splice(0,this._selItems.length);var e=this.collectionView;if(e)for(var n=0;n<e.sourceCollection.length;n++)this._getSelItem(n)&&this._selItems.push(e.sourceCollection[n])}},t.prototype._getSelItem=function(e){var n=this.collectionView,i=n?n.sourceCollection[e]:null;return!(!et(i)||!this.selectedMemberPath)&&this._selPath.getValue(i)},t.prototype._setSelItem=function(e,n){this.itemsSource,et(e)&&this._selPath.getValue(e)!=n&&this._selPath.setValue(e,n)},t.prototype._clearSelIndex=function(){this.selectedIndex=-1},t.prototype._hasSelectedMemeberPath=function(){return this.selectedMemberPath&&this.selectedMemberPath!==""},t.prototype._disableInput=function(e){this._maxSelItems!=null&&(this._selItems.length<this._maxSelItems?(this._tbx.disabled=!1,this._tbx.focus()):(this._tbx.disabled=!0,this.hostElement.focus()))},t.prototype._adjustInputWidth=function(){this._tbx.style.width="60px";var e,n=Zn(this.hostElement),i=Zn(this._tbx),o=getComputedStyle(this._tbx),s=parseInt(o.paddingLeft,10),l=parseInt(o.paddingRight,10);e=this.rightToLeft?i.left+i.width-n.left-s-l-8:n.left+n.width-i.left-s-l-8,this._tbx.style.width=e+"px"},t.prototype._getItemIndex=function(e){for(var n=this.hostElement.querySelectorAll("."+ri.token),i=0;i<n.length;i++)if(e===n[i])return i;return-1},t.prototype._setIsDisabled=function(e){r.prototype._setIsDisabled.call(this,e),this._updateTabIndex()},t.prototype._setTabOrder=function(e){this._orgTabIndex=e,this._updateTabIndex()},t.prototype._updateTabIndex=function(){var e=this.hostElement;this._tbx.tabIndex=this.isDisabled?-1:this._orgTabIndex,e.tabIndex=-1},t._clsActive=ri.tokenActive,t._ctrlTemplate="",t}(no);kn("wijmo.input",ba);/*!
    *
    * Wijmo Library 5.20251.40
    * https://developer.mescius.com/wijmo
    *
    * Copyright(c) MESCIUS inc. All rights reserved.
    *
    * Licensed under the End-User License Agreement For MESCIUS Wijmo Software.
    * us.sales@mescius.com
    * https://developer.mescius.com/wijmo/licensing
    *
    */var ys,jt=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])})(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ro=function(){return(ro=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r}).apply(this,arguments)},Tl=null;function Pl(){return Tl}if(Ht()){var Nr=navigator.userAgent.match(/version\/([\d\.]+)/i);if(Nr!=null){var ws=Nr[1],Cs=(Nr=ws.match(/(\d+)/g)).map(function(r){return parseInt(r)});Tl={full:ws,major:Cs[0],minor:Cs[1]}}}var z={alt:"wj-alt",bigHeader:"wj-big-header",bottomLeft:"wj-bottomleft",cell:"wj-cell",cellCheck:"wj-cell-check",cellIndex:"wj-cell-index",cells:"wj-cells",colFooters:"wj-colfooters",colGroup:"wj-colgroup",colHeaders:"wj-colheaders",elemCollapse:"wj-elem-collapse",elemCollapseSpace:"wj-elem-collapse-space",elemDropDown:"wj-elem-dropdown",elemPin:"wj-elem-pin",errorTip:"wj-error-tip",focusHeaderCell:"wj-focus-header-cell",frozen:"wj-frozen",frozenClone:"wj-frozen-clone",frozenCol:"wj-frozen-col",frozenColLeft:"wj-frozen-col-left",frozenColRight:"wj-frozen-col-right",frozenColRightEdge:"wj-frozen-col-right-edge",frozenRow:"wj-frozen-row",frozenRowBottom:"wj-frozen-row-bottom",gridEditor:"wj-grid-editor",gridIme:"wj-grid-ime",gridListBox:"wj-grid-listbox",group:"wj-group",groupSummary:"wj-group-summary",hasDropDown:"wj-hasdropdown",header:"wj-header",headerAlt:"wj-header-alt",hostElement:"wj-flexgrid",lastFrozenRow:"wj-last-frozen-row",lastFrozenRowBottom:"wj-last-frozen-row-bottom",lastVisibleCol:"wj-last-visible-col",lastVisibleRow:"wj-last-visible-row",marker:"wj-marker",marquee:"wj-marquee",multiline:"wj-multiline",new:"wj-new",radioMap:"wj-radio-map",row:"wj-row",rowHeaders:"wj-rowheaders",sortAsc:"wj-sort-asc",sortDesc:"wj-sort-desc",sortIndex:"wj-sort-index",topLeft:"wj-topleft",whiteSpacePre:"wj-whitespace-pre",wrap:"wj-wrap",noDataOverlay:"wj-no-data-overlay",screenReaderOnly:"wj-sr-only"},Ml={editorsContainer:"wj-grid-editors-container"},it;(function(r){r[r.AutoComplete=0]="AutoComplete",r[r.DropDownList=1]="DropDownList",r[r.RadioButtons=2]="RadioButtons",r[r.Menu=3]="Menu"})(it||(it={}));var oo=function(){function r(t,e,n){this._keyPath="",this._displayPath="",this._sortByVal=!0,this._editable=!1,this._useFilter=!1,this._serK=!0,this.mapChanged=new A,Ge(t)&&!e&&!n&&(t=t.map(function(i){return{value:i}}),e=n="value"),this._cv=On(t),this._keyPath=G(e,!1),this._displayPath=G(n,!1),this._cv.collectionChanged.addHandler(this.onMapChanged,this)}return Object.defineProperty(r.prototype,"sortByDisplayValues",{get:function(){return this._sortByVal},set:function(t){this._sortByVal=M(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"serializeKeys",{get:function(){return this._serK},set:function(t){if((t=M(t))!==this._serK){var e=this._map,n=e&&e.size;this._map=null,this._serK=t,n&&this.onMapChanged(Di.empty)}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"collectionView",{get:function(){return this._cv},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"selectedValuePath",{get:function(){return this._keyPath},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"displayMemberPath",{get:function(){return this._displayPath},enumerable:!0,configurable:!0}),r.prototype.getDataItem=function(t){var e=this;if(!this._map){var n=this._cv.sourceCollection,i=new ol(this.serializeKeys);Ge(n)&&this._keyPath&&n.forEach(function(o){var s=o[e._keyPath];i.has(s)||i.set(s,o)}),this._map=i}return this._map.get(t)},r.prototype.getDisplayValue=function(t){var e=this._displayPath,n=this.getDataItem(t);return e&&n?n[e]:t},r.prototype.getKeyValue=function(t,e){var n=this._displayPath,i=this._indexOf(t,n,e,!0);return i<0&&(i=this._indexOf(t,n,e,!1)),i>-1?this._cv.sourceCollection[i][this._keyPath]:null},r.prototype.getDisplayValues=function(t){var e=this;return this._cv&&this._displayPath?this._cv.items.map(function(n){return n[e._displayPath]}):[]},r.prototype.getFilteredItems=function(t){return this._cv?this._cv.items:[]},Object.defineProperty(r.prototype,"useFilter",{get:function(){return this._useFilter},set:function(t){this._useFilter=M(t)},enumerable:!0,configurable:!0}),r.prototype.getKeyValues=function(){var t=this;return this._cv&&this._keyPath?this._cv.items.map(function(e){return e[t._keyPath]}):[]},Object.defineProperty(r.prototype,"isEditable",{get:function(){return this._editable},set:function(t){this._editable=M(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"search",{get:function(){return this._search},set:function(t){t&&(this._search=Le(t))},enumerable:!0,configurable:!0}),r.prototype.onMapChanged=function(t){this._map=null,this.mapChanged.raise(this,t)},r.prototype._indexOf=function(t,e,n,i){var o=-1,s=-1;if(this._cv&&e){var l=t!=null?t.toString():"";l&&n&&(t=Dt(l));for(var a=i?l:l.toLowerCase(),u=this._cv.sourceCollection,h=0;h<u.length;h++){var c=u[h],d=c?c[e]:void 0;if(d!=null&&d!=null||(d=""),n&&te(d)&&(d=Dt(d)),d==t?o=h:i||d.length!=a.length||d.toLowerCase()!=a?d!=null&&d.toString()==l&&(o=h):o=h,o==h){if(!this._cv.filter||this._cv.filter(c))return o;s<0&&(s=o)}}}return s},r}(),j=function(){function r(t,e,n,i){t===void 0&&(t=-1),e===void 0&&(e=-1),n===void 0&&(n=t),i===void 0&&(i=e),this.setRange(t,e,n,i)}return r.prototype.setRange=function(t,e,n,i){t===void 0&&(t=-1),e===void 0&&(e=-1),n===void 0&&(n=t),i===void 0&&(i=e),this._row=Fe(t),this._col=Fe(e),this._row2=Fe(n),this._col2=Fe(i)},Object.defineProperty(r.prototype,"row",{get:function(){return this._row},set:function(t){this._row=Fe(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"col",{get:function(){return this._col},set:function(t){this._col=Fe(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"row2",{get:function(){return this._row2},set:function(t){this._row2=Fe(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"col2",{get:function(){return this._col2},set:function(t){this._col2=Fe(t)},enumerable:!0,configurable:!0}),r.prototype.clone=function(){return new r(this._row,this._col,this._row2,this._col2)},r.prototype.copy=function(t){this.setRange(t._row,t._col,t._row2,t._col2)},Object.defineProperty(r.prototype,"rowSpan",{get:function(){return Math.abs(this._row2-this._row)+1},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"columnSpan",{get:function(){return Math.abs(this._col2-this._col)+1},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"topRow",{get:function(){return Math.min(this._row,this._row2)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bottomRow",{get:function(){return Math.max(this._row,this._row2)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"leftCol",{get:function(){return Math.min(this._col,this._col2)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"rightCol",{get:function(){return Math.max(this._col,this._col2)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isValid",{get:function(){return this._row>-1&&this._col>-1&&this._row2>-1&&this._col2>-1},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isSingleCell",{get:function(){return this._row==this._row2&&this._col==this._col2},enumerable:!0,configurable:!0}),r.prototype.contains=function(t,e){var n=Ft(t,r);if(n)return n.topRow>=this.topRow&&n.bottomRow<=this.bottomRow&&n.leftCol>=this.leftCol&&n.rightCol<=this.rightCol;if(Xn(t)&&Xn(e))return t>=this.topRow&&t<=this.bottomRow&&e>=this.leftCol&&e<=this.rightCol;throw"contains expects a CellRange or row/column indices."},r.prototype.containsRow=function(t){return Fe(t)>=this.topRow&&t<=this.bottomRow},r.prototype.containsColumn=function(t){return Fe(t)>=this.leftCol&&t<=this.rightCol},r.prototype.intersects=function(t){return this.intersectsRow(t)&&this.intersectsColumn(t)},r.prototype.intersectsRow=function(t){return t&&!(this.bottomRow<t.topRow||this.topRow>t.bottomRow)},r.prototype.intersectsColumn=function(t){return t&&!(this.rightCol<t.leftCol||this.leftCol>t.rightCol)},r.prototype.getRenderSize=function(t){var e=new wt(0,0);if(this.isValid){for(var n=this.topRow;n<=this.bottomRow;n++)t.rows[n]&&(e.height+=t.rows[n].renderSize);for(var i=this.leftCol;i<=this.rightCol;i++)t.columns[i]&&(e.width+=t.columns[i].renderSize)}return e},r.prototype.equals=function(t){return t instanceof r&&this._row==t._row&&this._col==t._col&&this._row2==t._row2&&this._col2==t._col2},r.prototype.combine=function(t){return t?new r(Math.min(this.topRow,t.topRow),Math.min(this.leftCol,t.leftCol),Math.max(this.bottomRow,t.bottomRow),Math.max(this.rightCol,t.rightCol)):this},r.prototype.toString=function(){return zt("({row}, {col})-({row2}, {col2})",this)},r}(),P;(function(r){r[r.None=0]="None",r[r.Cell=1]="Cell",r[r.ColumnHeader=2]="ColumnHeader",r[r.RowHeader=3]="RowHeader",r[r.TopLeft=4]="TopLeft",r[r.ColumnFooter=5]="ColumnFooter",r[r.BottomLeft=6]="BottomLeft"})(P||(P={}));var yt=function(){function r(t,e,n,i,o){this._offsetY=0,this._rng=new j,this._g=Ve(t,xt),this._ct=Fe(e),this._rows=Ve(n,ki),this._cols=Ve(i,Yi),this._e=Ve(o,HTMLElement),this._vrb=new j,this._uid=ln()}return Object.defineProperty(r.prototype,"activeCell",{get:function(){return this._activeCell},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"grid",{get:function(){return this._g},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"cellType",{get:function(){return this._ct},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"viewRange",{get:function(){return this._getViewRange()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return this._cols.getTotalSize()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._rows.getTotalSize()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"rows",{get:function(){return this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"columns",{get:function(){return this._cols},enumerable:!0,configurable:!0}),r.prototype.getCellData=function(t,e,n){return e=this._toIndex(e),this._getCellData(t,e,n)},r.prototype._getCellData=function(t,e,n){var i,o,s=this._g,l=this._rows[V(t,!1,!0)];if(!l)return null;i=this._cols[V(e,!1,!0)];var a=s?s._getBindingColumn(this,t,i):i,u=null,h=l instanceof we;if(h&&l.dataItem instanceof Tt&&!s.childItemsPath&&(u=l.dataItem),a&&l&&a.binding&&l.dataItem&&!u?o=a._binding.getValue(l.dataItem):l._ubv&&(o=l._ubv[i._hash]),o==null&&(o=this._getSpecialData(t,l,e,i,a,h,u,o)),n){var c=a.dataMap||l.dataMap;if(this.cellType==P.Cell&&a._edt&&a._edt._ctl instanceof io&&o){var d=new nt(a._edt._ctl.displayMemberPath),f=d&&Ge(o)?o.map(function(_){return d.getValue(_)}):o;if(Ge(f)&&f.length>0){var p=f.join(", ");o=zt(p||W.MultiSelect.itemsSelected,{count:f.length})}}else this.cellType==P.Cell&&c&&(o=c.getDisplayValue(o));o=o!=null?re.format(o,a.format||l.format):""}return o},r.prototype.setCellData=function(t,e,n,i,o,s){i===void 0&&(i=!0),o===void 0&&(o=!0),s===void 0&&(s=!1);var l=this._g,a=this._rows[V(t,!1,!0)],u=V(this._toIndex(e),!1,!0),h=this._cols[u],c=Ae;if(!a)return!1;var d=l?l._getBindingColumn(this,t,h):h;if(!d)return!1;var f=d.dataMap||a.dataMap;if(this._ct==P.Cell){var p=d.getIsRequired(a),_=d.isContentHtml||a.isContentHtml;if(!s&&f&&n!=null){var v=f.getKeyValue(n,_);if(v==null&&f.getDisplayValue(null)==null){if(f.getDisplayValue(n)==n){if(!f.isEditable||f.displayMemberPath!=f.selectedValuePath){if(n!=""||p||!l.commitEmptyEdits)return!1;n=null}}}else{var b=l.getRowDataItem(t,u);if(f.useFilter&&b){var m=f.getFilteredItems(b);if(!(m.length>0))return!1;if(m.filter(function(X){return X[f._keyPath]==v}).length>0)n=v;else{var w=m.filter(function(X){return X[f.displayMemberPath]==n});w.length>0&&(n=w[0][f._keyPath])}}else n=v}}var g=c.Object,y=d.dataType||a.dataType,I=this.getCellData(t,e,!1);if(this.cellType==P.Cell&&d._edt&&d._edt._ctl instanceof io&&n&&(y=c.Array),g=y||Si(I),n==null||n===""&&i&&!f){if(p||!l.commitEmptyEdits&&(I==null||I===""))return!1;g!=c.String&&(n=null),i=!1}if(n=="NaN"&&Number.isNaN(I)&&!l.commitEmptyEdits)return!1;if(i){var x=d.format||a.format;if(x||g!=c.Date||(x="d"),d.mask&&te(n)&&g!=c.String&&(n=n.replace(/_/g,"")),n=_r(n,g,x,I),g!=c.Object&&Si(n)!=g)return!1}}if(a.dataItem&&d.binding){var R=d._binding,k=a.dataItem,D=R.getValue(k);if(n!==D&&(f&&!f.serializeKeys||!F.equals(n,D))){var E=l.collectionView,T=E instanceof Zt&&k!=E.currentEditItem&&E.trackChanges,L=null;if(T&&(L=E._extend({},k)),R.setValue(k,n),T){var O=new Bt(We.Change,k,E.items.indexOf(k));E.onCollectionChanged(O,L)}}}else a._ubv||(a._ubv={}),a._ubv[h._hash]=n;return o&&l&&l.invalidate(),!0},r.prototype._getRowData=function(t){var e,n=this._g,i=this._rows[V(t,!1,!0)],o=null,s=[];if(i!=null){var l=null,a=i instanceof we;a&&i.dataItem instanceof Tt&&!n.childItemsPath&&(l=i.dataItem);for(var u=!l&&i.dataItem,h=0;h<n.columns.length;h++){var c=e=this._cols[h];u&&n&&(c=n._getBindingColumn(this,t,e)),c.binding?o=c._binding.getValue(i.dataItem):i._ubv&&(o=i._ubv[e._hash]),o==null&&(o=this._getSpecialData(t,i,h,e,c,a,l,o)),s[h]=o}}return s},r.prototype._getSpecialData=function(t,e,n,i,o,s,l,a){var u=a,h=P;switch(this._ct){case h.TopLeft:case h.ColumnHeader:t!=this._rows.length-1&&o==i||(u=o.header);break;case h.ColumnFooter:if(s&&o.aggregate!=ke.None){var c=this._g.collectionView;if(c){var d=Ft(c,Zt);u=d?d.getAggregate(o.aggregate,o.binding):yr(o.aggregate,c.items,o.binding)}}break;case h.Cell:var f=void 0,p=this._g._isServerCollectionView(this._g.collectionView);if(p&&(f=this._g.collectionView),e instanceof we)if(n==this._cols.firstVisibleIndex)u=e.getGroupHeader();else if(p&&f.groupOnServer&&(f.groupLazyLoading||f._virtualization)){var _=e.dataItem;u=f.getGroupAggregate(o.binding,_,o.aggregate)}else l&&o.aggregate!=ke.None&&(u=l.getAggregate(o.aggregate,o.binding,this._g.collectionView,this._g))}return u},r.prototype.getCellBoundingRect=function(t,e,n){var i=this._g,o=this.rows[t],s=this.columns[this._toIndex(e)],l=this.rows._frozenInternal<0&&this.rows.isFrozen(t)&&i._hasScroll(this.rows)?this._g._szClient.height+o._antipos:o.pos,a=this.columns._frozenInternal<0&&this.columns.isFrozen(Number(e))&&i._hasScroll(this.columns)?this._g._szClient.width+s._antipos:s.pos,u=new ht(a,l,s.renderSize,o.renderSize);if(i.rightToLeft&&(u.left=this.hostElement.clientWidth-u.right,Ie()||(u.left-=i._root.offsetWidth-i._root.clientWidth)),!n){var h=this.hostElement.getBoundingClientRect();u.left+=h.left,u.top+=h.top-this._offsetY}return this.rows.isFrozen(t)&&(this.rows._frozenInternal>0||!this.rows.isFrozen(this.rows._firstVisible))&&(u.top-=i.scrollPosition.y),this.columns.isFrozen(Number(e))&&(u.left-=i.scrollPosition.x*(i.rightToLeft?-1:1)),u},r.prototype.getCellElement=function(t,e){var n=this.hostElement.children,i=this._g.rows._frozenInternal<0?n.length:Math.min(t+2,n.length);e=this._toIndex(e);for(var o=0;o<i;o++)for(var s=n[o].children,l=this._g.columns._frozenInternal<0?s.length:Math.min(e+2,s.length),a=0;a<l;a++){var u=s[a],h=u[r._INDEX_KEY];if(h&&(h.row==t&&h.col==e||h.rng&&h.rng.contains(t,e)))return u}return null},r.prototype.getSelectedState=function(t,e,n){var i=this._g,o=i.selectionMode,s=i._selHdl.selection,l=ae,a=rn;if(o==l.None)return a.None;switch(e=this._toIndex(e),this._ct){case P.Cell:if(i.activePanelType!=this.cellType){n||(n=i.getMergedRange(this,t,e)||new j(t,e));for(var u=n.leftCol;u<=n.rightCol;u++)if(i.columns[u]&&i.columns[u].isSelected)return a.Selected;for(var h=n.topRow;h<=n.bottomRow;h++)if(i.rows[h].isSelected)return a.Selected;return a.None}n||(n=i.getMergedRange(this,t,e));var c=i._getAnchorCell();if(n){if(n.contains(s.row,s.col)&&(!i.anchorCursor||c==null||t==c.y&&e==c.x||n.row==c.y&&n.col==c.x)||n.intersects(s)&&i.anchorCursor&&c!=null&&(t==c.y&&e==c.x||n.row==c.y&&n.col==c.x))return i.showMarquee?a.Active:a.Cursor;if(n.intersects(s)&&o!=l.ListBox)return a.Selected;for(u=n.leftCol;u<=n.rightCol;u++)if(i.columns[u]&&i.columns[u].isSelected)return a.Selected;for(h=n.topRow;h<=n.bottomRow;h++)if(i.rows[h].isSelected)return a.Selected}if(i.anchorCursor&&c!=null){if(t==c.y&&e==c.x)return i.showMarquee?a.Active:a.Cursor}else if(s.row==t&&s.col==e)return i.showMarquee?a.Active:a.Cursor;if(i.rows[t].isSelected||i.columns[e].isSelected)return a.Selected;if(o==l.MultiRange){for(var d=i._selHdl.extendedSelection,f=0;f<d.length;f++)if(d[f].contains(t,e)||n&&n.intersects(d[f]))return a.Selected}if(n)switch(o){case l.Row:case l.RowRange:if(n.containsRow(s.row))return a.Selected}return o==l.ListBox?a.None:(s=this._getAdjustedSelection(s)).containsRow(t)&&s.containsColumn(e)?a.Selected:a.None;case P.ColumnHeader:if(i.activePanelType==P.ColumnHeader&&((n=i.getMergedRange(this,t,e,!1))&&n.contains(s)||s.row==t&&s.col==e))return a.Cursor;if(i.activePanelType==P.Cell&&i.showSelectedHeaders&le.Column&&(i.columns[e].isSelected||s.containsColumn(e)||s.intersectsColumn(n))&&(n&&(t=n.bottomRow),t==this.rows.length-1))return a.Selected;break;case P.RowHeader:if(i.activePanelType==P.RowHeader&&((n=i.getMergedRange(this,t,e,!1))&&n.contains(s)||s.row==t&&s.col==e))return a.Cursor;if(i.activePanelType==P.Cell&&i.showSelectedHeaders&le.Row&&(i.rows[t].isSelected||s.containsRow(t)||s.intersectsRow(n))&&(n&&(e=n.rightCol),e==this.columns.length-1))return a.Selected;break;case P.TopLeft:if(i.activePanelType==P.TopLeft&&(n||(n=i.getMergedRange(this,t,e,!1)),n&&n.contains(s)||s.row==t&&s.col==e))return a.Cursor;break;case P.BottomLeft:if(i.activePanelType===P.BottomLeft&&(n||(n=i.getMergedRange(this,t,e,!1)),n&&n.contains(s)||s.row==t&&s.col==e))return a.Cursor;break;case P.ColumnFooter:if(i.activePanelType===P.ColumnFooter&&(n||(n=i.getMergedRange(this,t,e,!1)),n&&n.contains(s)||s.row==t&&s.col==e))return a.Cursor}return a.None},Object.defineProperty(r.prototype,"hostElement",{get:function(){return this._e},enumerable:!0,configurable:!0}),r.prototype.isRangeValid=function(t){return t&&t.isValid&&t.bottomRow<this.rows.length&&t.rightCol<this.columns.length},r.prototype.getNextVisibleRow=function(t){t===void 0&&(t=0);for(var e=Math.max(t,0);e<this.rows.length;e++)if(this.rows[e].isVisible)return e;return-1},r.prototype.getLastVisibleRow=function(t){t===void 0&&(t=1/0);for(var e=Math.min(t,this.rows.length-1);e>=0;e--)if(this.rows[e].isVisible)return e;return-1},r.prototype.getNextVisibleColumn=function(t){t===void 0&&(t=0);for(var e=Math.max(t,0);e<this.columns.length;e++)if(this.columns[e].isVisible)return e;return-1},r.prototype.getLastVisibleColumn=function(t){t===void 0&&(t=1/0);for(var e=Math.min(t,this.columns.length-1);e>=0;e--)if(this.columns[e].isVisible)return e;return-1},r.prototype._toIndex=function(t){if(te(t)&&(t=this._cols.indexOf(t))<0)throw"Invalid column name or binding.";return t},r.prototype._getAdjustedSelection=function(t){var e=this._g,n=this._rng,i=ae;switch(e.selectionMode){case i.Cell:n.setRange(t.row,t.col,t.row,t.col);break;case i.Row:n.setRange(t.row,0,t.row,e.columns.length-1);break;case i.RowRange:case i.ListBox:n.setRange(t.row,0,t.row2,e.columns.length-1);break;default:n.copy(t)}return n},r.prototype._getOffsetY=function(){return this._offsetY},r.prototype._updateContent=function(t,e,n,i){var o=this._g,s=this._e,l=this._rows,a=this._cols,u=this._ct;if(u==P.ColumnHeader||u==P.ColumnFooter||u==P.RowHeader){var h=o._ptScrl,c=s.style;u==P.RowHeader?c.top=h.y+"px":o.rightToLeft?c.right=h.x+"px":c.left=h.x+"px"}this._offsetY!=n&&(t=!1,this._offsetY=n);var d=this._getViewRange(),f=d;if(f.isValid){var p=l.length<=o._vtRows?l.length:0,_=a.length<=o._vtCols?a.length:0,v=l._frozenInternal>=0?Math.max(d.row-p,l._frozenInternal):Math.max(d.row-p,0),b=l._frozenInternal>=0?Math.min(d.row2+p,l.length-1):Math.min(d.row2+p,l.length-1+l._frozenInternal),m=a._frozenInternal>=0?Math.max(d.col-_,a._frozenInternal):Math.max(d.col-_,0),w=a._frozenInternal>=0?Math.min(d.col2+_,a.length-1):Math.min(d.col2+_,a.length-1+a._frozenInternal);f=new j(v,m,b,w)}if(t&&!e&&this._vrb.contains(d)&&!l._frozenInternal&&!a._frozenInternal)return this._activeCell;t&&f.equals(this._vrb)||(e=!1),t&&!e&&this._ct!=P.TopLeft&&this._reorderCells(f,this._vrb),this._activeCell=null,this._vru=d,this._vrb=f,this._recycle=t;var g=this.grid.topLeftCells.hostElement.parentElement;return[le.Row,le.Column].includes(o.headersVisibility)?S(g,"aria-hidden",!0):g.removeAttribute("aria-hidden"),this._updateCells(e,0,i),this._activeCell},r.prototype._updateCells=function(t,e,n){var i=this,o=this._rows,s=function(){for(var l=i._vrb.topRow;l<=i._vrb.bottomRow&&l>-1;l++)e=i._renderRow(l,i._vrb,t,e,n)};o._frozenInternal>0?(function(){for(var l=0;l<o._frozenInternal&&l<o.length;l++)e=i._renderRow(l,i._vrb,t,e,n)}(),s()):o._frozenInternal<0?(s(),function(){for(var l=o._lastFrozen;l<o.length;l++)e=i._renderRow(l,i._vrb,t,e,n)}()):s(),this._scanAndRemoveExtraCells(e)},r.prototype._scanAndRemoveExtraCells=function(t){for(var e=this._e;e.childElementCount>t;){var n=e.lastElementChild;Ne(n),this._removeExtraCells(n,0)}},r.prototype._clearCells=function(){for(var t=this.hostElement,e=this._g.cellFactory,n=t.childElementCount-1;n>=0;n--){for(var i=t.children[n],o=i.childElementCount-1;o>=0;o--)delete i.children[o][r._INDEX_KEY],e.disposeCell(i.children[o]);Ne(i)}t.innerHTML=""},r.prototype._reorderCells=function(t,e){var n=this;if(this._g._reorderCells&&e.isValid&&t.isValid&&t.intersects(e)){var i=function(_,v,b,m,w,g){K(b<0,"Scroll delta must be a negative number");var y,I,x=-b,R=v+(m-w+1),k=_.childElementCount-R;if(k<x&&k>0?(y=k,I=x-k):(y=x,I=0),y>0){var D=n._createRange(_,R,R+y);D&&_.insertBefore(D.extractContents(),_.children[v])}if(I>0)for(var E=_.children[v],T=0;T<I;T++){var L=document.createElement("div");L.className=g,_.insertBefore(L,E)}};if(t.row!=e.row){var o=this._e;if((h=t.row-e.row)!=0){var s=this._ct==P.Cell?1:0,l=o.childElementCount;if(this.rows._frozenInternal>0&&(s+=this.rows._frozenInternal),h>0){var a=s,u=Math.min(s+h,l);(p=this._createRange(o,a,u))&&o.appendChild(p.extractContents())}else i(o,s,h,t.row2,e.row,z.row)}}if(t.col!=e.col){var h;if(o=this._e,(h=t.col-e.col)!=0){s=this._ct==P.Cell&&this._g.rowHeaderPath?1:0,this.columns._frozenInternal>=0&&(s+=this.columns._frozenInternal);for(var c=0;c<o.children.length;c++){var d=o.children[c],f=l=d.children.length;if(this.columns._frozenInternal<0&&(f+=this.columns._frozenInternal),fe(d,z.row))if(h>0){var p;a=s,u=Math.min(s+h,f),(p=this._createRange(d,a,u))&&d.appendChild(p.extractContents())}else i(d,s,h,t.col2,e.col,z.cell)}}}}},r.prototype._createRange=function(t,e,n){if(n>e&&n<=t.children.length&&e>-1){this._docRange||(this._docRange=document.createRange());var i=this._docRange;return i.setStart(t,e),i.setEnd(t,n),i}return null},r.prototype._renderRowHdrCell=function(t,e,n){var i=t.children[0];return i||(i=Oe(r._HTML_CELL,t)),i.setAttribute("role",e<0?"columnheader":"rowheader"),i.textContent=n?n.toString():"",B(i,{position:"fixed",left:-32e3,top:-32e3,width:.1,height:.1,overflow:"hidden",opacity:"0"}),i[r._INDEX_KEY]={row:e,col:-1,panel:this},1},r.prototype._renderRow=function(t,e,n,i,o){var s=this._g,l=this.rows[t];if(l.renderSize<=0)return i;var a=this._e.children[i];a||(a=Oe('<div class="'+z.row+'"></div>',this._e));var u=this._g.columnHeaders&&this._g.columnHeaders.rows&&this._g.columnHeaders.rows.length||0,h=this._g.headersVisibility&le.Column?u:0,c=function(Y,se,ue){return s._ariaId+"-"+Y+"-"+se+"-"+ue},d=function(Y,se){for(var ue=[],de=0;de<se;de++)ue.push(c(Y,t,de));return ue.join(" ")};switch(this._ct){case P.ColumnHeader:if(s.headersVisibility&le.Row&&s.headersVisibility&le.Column){var f=[],p=d("tl",s.topLeftCells.columns.length);p&&f.push(p);var _=d("ch",this.columns.length);_&&f.push(_),(m=f.join(" "))&&S(a,"aria-owns",m)}S(a,"aria-rowindex",t+1);break;case P.TopLeft:S(a,"aria-rowindex",t+1);break;case P.Cell:if(s.headersVisibility&le.Row){f=[];var v=d("rh",s.rowHeaders.columns.length);v&&f.push(v);var b=d("cell",s.cells.columns.length);b&&f.push(b);var m=f.join(" ");this._allowSetAriaOwns(m,a)?S(a,"aria-owns",m):S(a,"aria-owns")}S(a,"aria-rowindex",t+1+h);break;case P.RowHeader:S(a,"aria-rowindex",t+1+h);break;case P.BottomLeft:case P.ColumnFooter:if(s.headersVisibility&le.Row){f=[];var w=d("bl",s.bottomLeftCells.columns.length);w&&f.push(w);var g=d("cf",s.columnFooters.columns.length);g&&f.push(g),(m=f.join(" "))&&S(a,"aria-owns",m)}var y=u+s.rows.length+t+1;S(a,"aria-rowindex",y)}if(this._ct==P.Cell){a.setAttribute("role","row");var I=ae,x=l.isSelected;switch(s.selectionMode){case I.Row:case I.RowRange:x=x||this._g._selHdl.selection.containsRow(t)}S(a,"aria-selected",!!x||null),S(a,"aria-level",l instanceof we?l.level+1:null),S(a,"aria-expanded",l instanceof we?!l.isCollapsed:null),this.rows.ariaLabel&&S(a,"aria-label",this.rows.ariaLabel)}this._ct!==P.TopLeft&&this._ct!==P.ColumnFooter&&this._ct!==P.BottomLeft||a.setAttribute("role","row");var R=0;if(this._ct==P.Cell||this._ct==P.ColumnHeader){var k=this._g._getRowHeaderPath();if(k){var D=this._ct==P.Cell?[k.getValue(l.dataItem),t]:[k.path,-1],E=D[0],T=D[1];R=this._renderRowHdrCell(a,T,E)}}var L=e.clone();if(L.col=this.columns._frozenInternal>=0?0:this.columns.length+this.columns._frozenInternal,L.col2=this.columns._frozenInternal>=0?this.columns._frozenInternal-1:this.columns.length-1,this.columns._frozenInternal>=0)for(var O=0;O<this.columns._frozenInternal&&O<this.columns.length;O++)R=this._renderCell(a,t,O,L,n,R,o);else for(O=Math.max(0,this.columns.length+this.columns._frozenInternal);O<this.columns.length;O++)R=this._renderCell(a,t,O,L,n,R,o);if(e.leftCol>-1){var X=s.getMergedRange(this,t,e.leftCol,!1),Q=-1;if(X)for(Q=X.leftCol;!this.columns[Q].isVisible&&Q<X.rightCol;)Q++;X&&Q<e.leftCol&&(R=this._renderCell(a,t,Q,e,n,R,o))}for(O=e.leftCol;O<=e.rightCol&&O>-1;O++)R=this._renderCell(a,t,O,e,n,R,o);return this._removeExtraCells(a,R),i+1},r.prototype._allowSetAriaOwns=function(t,e){return!!t&&!fe(e,"wj-detail-row")},r.prototype._renderCell=function(t,e,n,i,o,s,l){var a=this._g,u=this._ct==P.Cell||a.rows.length<=a._vtRows||a.columns.length<=a._vtCols?a.getMergedRange(this,e,n,!1):a.getMergedRange(this,e,n);if(u){for(var h=Math.max(i.row,u.row);h<e;h++)if(this.rows[h].renderSize)return s;for(h=Math.max(i.col,u.col);h<n;h++)if(this.columns[h].renderSize)return s;if(e>=u.row&&e<=u.row2&&n>u.col&&n<=u.col2&&this._ct===P.Cell&&u.isSingleCell)return s;var c=this.columns._frozenInternal;if(c&&u.col<c&&u.col2>=c&&n>u.col||!this.columns[n].isVisible&&this._rows[e].constructor.name!=="DetailRow")return s;if(u.leftCol!=n){for(var d=u.leftCol;d<n;d++)if(this.columns[d].isVisible)return s}}var f=this.columns[n];if((!f||f.renderSize<=0)&&(!u||u.getRenderSize(this).width<=0))return s;var p=t.children[s];if(p&&!o&&this._recycle&&a._lazyRender&&!a.activeEditor){var _=p[r._INDEX_KEY];_&&_.row==e&&_.col==n&&_.rng==u&&(this.rows.isFrozen(e)||this.columns.isFrozen(n)||(o=!0))}var v=rn,b=this.getSelectedState(e,n,u),m=b==v.Cursor||b==v.Active,w=!1;switch(this.cellType){case P.RowHeader:case P.ColumnHeader:case P.TopLeft:case P.BottomLeft:case P.ColumnFooter:w=!0}if(p&&o){ee(p,q.active,m),ee(p,w?z.focusHeaderCell:q.selected,b==v.Cursor),ee(p,q.multiSelected,b==v.Selected);var g=p.querySelector(".wj-column-selector");return g?m||b!=v.None?S(p,"aria-selected",!!g.checked):S(p,"aria-selected",null):S(p,"aria-selected",!(!m&&b==v.None)||null),m&&(this._activeCell=p),s+1}if(p||(p=Oe(r._HTML_CELL,t)),S(p,"aria-colindex",l?n+1+l:n+1),m&&(this._activeCell=p),this._ct==P.Cell){S(p,"role","gridcell"),S(p,"aria-selected",!(b==v.None&&!m)||null);var y=!a.canEditCell(e,n)||null;S(p,"aria-readonly",y),S(p,"aria-required",y?null:f.getIsRequired())}return this._ct!==P.ColumnFooter&&this._ct!==P.BottomLeft||S(p,"role","gridcell"),a.cellFactory.updateCell(this,e,n,p,u),p[r._INDEX_KEY]={row:e,col:n,rng:u,panel:this},s+1},r.prototype._removeExtraCells=function(t,e){var n=this._g.cellFactory;for(this.cellType===P.RowHeader&&e===0&&S(t,"aria-hidden","true");t.childElementCount>e;){var i=t.lastElementChild;delete i[r._INDEX_KEY],Ne(i),n.disposeCell(i)}},r.prototype._getViewRange=function(){var t=this._g,e=t._ptScrl,n=t._szClientSB,i=this._rows,o=this._cols,s=new j(0,0,i.length-1,o.length-1);if(this._ct==P.Cell||this._ct==P.RowHeader){var l=-e.y+this._offsetY,a=n.height;(d=Math.min(Math.abs(i._frozenInternal),i.length-1))>0&&(i._frozenInternal>=0?(l+=_=i[d-1].pos,a-=_):a+=_=i[i.length-d]._antipos),i._frozenInternal>=0?d>0&&i[d].pos>n.height?s.row=s.row2=-1:(s.row=Math.min(i.length-1,Math.max(d,i.getItemAt(l))),s.row2=Math.max(s.row,i.getItemAt(l+a))):d>0&&i[i.length-d]._antipos+n.height<0?s.row=s.row2=-1:(s.row=Math.min(i.length+i._frozenInternal-1,i.getItemAt(l)),s.row2=Math.max(s.row,i.getItemAt(l+a)),t.columnFooters.rows.length>0&&(s.row2-=t.columnFooters.rows.length));var u=t.hostElement;if(t._clipToScreen&&u){var h=u.getBoundingClientRect(),c=-h.top-t.cells._e.offsetTop;h.top<0&&(s.row=Math.max(s.row,i.getItemAt(c)-1)),h.bottom>innerHeight&&(s.row2=Math.min(s.row2,i.getItemAt(c+innerHeight)+1))}}if(this._ct==P.Cell||this._ct==P.ColumnHeader){var d,f=-e.x,p=n.width;if((d=Math.min(Math.abs(o._frozenInternal),o.length-1))>0&&o._frozenInternal>0)f+=_=o[d-1].pos,p-=_;else if(d>0&&o._frozenInternal<0){var _;f+=_=o[0].pos}(o._frozenInternal>=0?d>0&&o[d].pos>n.width:d>0&&Math.abs(o[o.length-d]._antipos)>n.width)?s.col=s.col2=-1:o._frozenInternal>=0?(s.col=Math.min(o.length-1,Math.max(d,o.getItemAt(f))),s.col2=Math.max(s.col,o.getItemAt(f+p))):(s.col=Math.min(o.length-1,Math.max(0,o.getItemAt(f))),s.col2=Math.max(s.col,o.getItemAt(f+p-o._frozenColAreaWidth)))}return i.length<=Math.abs(i._frozenInternal)&&(s.row=s.row2=-1),o.length<=Math.abs(o._frozenInternal)&&(s.col=s.col2=-1),s},r.prototype._getFrozenPos=function(){var t=this._rows._frozenInternal,e=this._cols._frozenInternal,n=null,i=null,o=0,s=0;return t>0?o=(n=t>0?this._rows[t-1]:null)?n.pos+n.renderSize:0:t<0&&this._rows.lastFrozen&&(o=Math.min(this._rows.lastFrozen.pos,this._g._szClient.height+this._rows.lastFrozen._antipos)),e>0?s=(i=e>0?this._cols[e-1]:null)?i.pos+i.renderSize:0:e<0&&this._cols.lastFrozen&&(s=Math.min(this._cols.lastFrozen.pos,this._g._szClient.width+this._cols.lastFrozen._antipos)),new Ye(s,o)},r.prototype.dispose=function(){this._clearCells(),this._docRange&&(this._docRange.detach(),this._docRange=null),this._g=null,this._e=null,this._rows=null,this._cols=null,this._activeCell=null},r._INDEX_KEY=z.cellIndex,r._HTML_CELL='<div class="'+z.cell+'" tabindex="-1"></div>',r}(),Re=function(r){jt(t,r);function t(e,n,i){var o=r.call(this)||this;return o._p=Ve(e,yt,!0),o._rng=Ve(n,j,!0),o._data=i,o}return Object.defineProperty(t.prototype,"panel",{get:function(){return this._p},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"range",{get:function(){return this._rng.clone()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"row",{get:function(){return this._rng.row},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"col",{get:function(){return this._rng.col},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!0,configurable:!0}),t.prototype.getRow=function(){return this._p&&this.row>-1?this._p.rows[this.row]:null},t.prototype.getColumn=function(e){var n=this._p,i=n&&this.col>-1?n.columns[this.col]:null;if(i&&e){var o=n.grid;i=n.cellType===P.ColumnHeader&&o._hasColumnGroups()?o._getColumnGroup(this.row,this.col):n.grid._getBindingColumn(n,this.row,i)}return i},t}(He),Al=function(r){jt(t,r);function t(e,n,i,o){var s=r.call(this,e,n)||this;return s._updateContent=!0,s._cell=Ve(i,HTMLElement),s}return Object.defineProperty(t.prototype,"cell",{get:function(){return this._cell},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updateContent",{get:function(){return this._updateContent},enumerable:!0,configurable:!0}),t}(Re),En=function(r){jt(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e._stayInEditMode=!1,e._refresh=!0,e}return Object.defineProperty(t.prototype,"stayInEditMode",{get:function(){return this._stayInEditMode},set:function(e){this._stayInEditMode=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"refresh",{get:function(){return this._refresh},set:function(e){this._refresh=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"previousData",{get:function(){return this._previousData!=null?this._previousData:this._data},set:function(e){this._previousData=e},enumerable:!0,configurable:!0}),t}(Re);function Bi(){return ii("wijmo.input")}function sr(){return ii("wijmo.grid.detail")}function Fi(){return ii("wijmo.grid.multirow")}function so(){return ii("wijmo.grid.transposed")}function lo(){return ii("wijmo.grid.transposedmultirow")}function ao(){return ii("wijmo.rest")}function uo(){return ii("wijmo.odata")}function ho(){return ii("wijmo.interop.grid")}var ae;(function(r){r[r.None=0]="None",r[r.Cell=1]="Cell",r[r.CellRange=2]="CellRange",r[r.Row=3]="Row",r[r.RowRange=4]="RowRange",r[r.ListBox=5]="ListBox",r[r.MultiRange=6]="MultiRange"})(ae||(ae={}));var rn;(function(r){r[r.None=0]="None",r[r.Selected=1]="Selected",r[r.Cursor=2]="Cursor",r[r.Active=3]="Active"})(rn||(rn={}));var si;(function(r){r[r.None=0]="None",r[r.Next=1]="Next",r[r.Prev=2]="Prev",r[r.NextPage=3]="NextPage",r[r.PrevPage=4]="PrevPage",r[r.Home=5]="Home",r[r.End=6]="End",r[r.NextCell=7]="NextCell",r[r.PrevCell=8]="PrevCell",r[r.NextEditableCell=9]="NextEditableCell",r[r.PrevEditableCell=10]="PrevEditableCell"})(si||(si={}));var Ol=function(){function r(t){this._sel=new j(0,0),this._xSel=new At,this._mode=ae.CellRange,this._g=t,this._e=new Re(t.cells,new j(0,0)),this._collectionChangedHandler=function(){t.invalidate()},this._xSel.collectionChanged.addHandler(this._collectionChangedHandler)}return Object.defineProperty(r.prototype,"selectionMode",{get:function(){return this._mode},set:function(t){t!=this._mode&&this._setSelectionMode(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"selection",{get:function(){return this._sel},set:function(t){this.select(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"extendedSelection",{get:function(){return this._xSel},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"cellRangeEventArgs",{get:function(){return this._e},enumerable:!0,configurable:!0}),r.prototype.select=function(t,e,n,i){e===void 0&&(e=!0),n===void 0&&(n=!1),i||(i=this._g._gpCells);var o=this._g,s=this._e.range,l=this._sel,a=s,u=!1,h=ae,c=o.activePanelType,d=i.cellType==P.RowHeader||i.cellType==P.ColumnHeader,f=i.cellType==P.BottomLeft||i.cellType==P.ColumnFooter,p=!d&&!f;if(o._mouseHdl._eMouse&&(o._mouseHdl._eMouse.ctrlKey||o._mouseHdl._eMouse.metaKey),_e(t)&&te(e)){var _=i.columns.indexOf(e);if(_<0)throw"Invalid column name or binding.";s.setRange(t,_),e=!0}else _e(t)&&_e(e)?(s.setRange(t,e),e=!0):t instanceof j?s.copy(t):K(!1,"CellRange expected");switch(o.activePanel=i,o.selectionMode){case h.Cell:a.row2=a.row,a.col2=a.col;break;case h.Row:a.row2=a.row;break;case h.ListBox:u=!0}(d||f)&&(a.row2=a.row,a.col2=a.col);var v=a.equals(l)&&c==i.cellType;if(v&&u&&p){for(var b=0;b<o.rows.length;b++)if(o.rows[b].isSelected!==a.containsRow(b)){v=!1;break}}if(v)return e&&i.isRangeValid(a)&&this._showSelection(),!0;var m=H.getControl($(Z(),"."+z.hostElement));if(m&&m==o&&m.activeEditor&&!m.finishEditing())return!1;var w=this._e;if(w._rng=a,w.cancel=!1,!o.onSelectionChanging(w)&&!n)return!1;p&&u&&o.rows.forEach(function(x,R){x._setFlag(ie.Selected,a.containsRow(R),!0)}),a.row=Math.min(a.row,i.rows.length-1),a.row2=Math.min(a.row2,i.rows.length-1),this._sel.copy(a),o.refreshCells(!1,!0,!0),e&&this._showSelection();var g=o.collectionView;if(g&&p){var y=o._getCvIndex(a.row);g.moveCurrentToPosition(y)}var I=Z();return this._g.errorTip&&(I.classList.contains(q.invalid)?this._g.errorTip._showAutoTip(void 0,I):this._g.errorTip.hide()),o.onSelectionChanged(w),!0},r.prototype.moveSelectionWithinSelectedPanel=function(t,e){var n=this._g,i=this._sel.clone(),o=n.activePanel,s=n.getMergedRange(o,i.row,i.col,!1);if(s||(s=new j(i.row,i.col)),t>0){var l=o.getNextVisibleRow(s.bottomRow+t);if(l>=0&&(i.row=i.row2=l),!o.columns[i.col].isVisible){var a=o.getNextVisibleColumn(s.leftCol);a>=0&&(i.col=i.col2=a)}}else if(t<0){var u=o.getLastVisibleRow(s.topRow+t);u>=0&&(i.row=i.row2=u)}if(e>0){var h=o.getNextVisibleColumn(s.rightCol+e);h>=0&&(i.col=i.col2=h)}else if(e<0){var c=o.getLastVisibleColumn(s.leftCol+e);c>=0&&(i.col=i.col2=c)}i.equals(this._sel)||n.select(i,!0,o)},r.prototype.moveSelection=function(t,e,n){var i=this._g,o=this._sel,s=n&&i.anchorCursor?new j(o.row2,o.col2):new j(o.row,o.col),l=s.row,a=s.col,u=i.columns,h=Math.max(0,i._szClient.height-i.columnHeaders.height),c=si,d=-1,f=i.getMergedRange(i.cells,l,a),p=0;if(f){if(e==c.Next||e==c.NextCell||e==c.NextEditableCell?a=f.rightCol:e!=c.Prev&&e!=c.PrevCell&&e!=c.PrevEditableCell||(a=f.leftCol),t==c.Next||t==c.NextCell||t==c.NextEditableCell){if(l=f.bottomRow,Fi()&&i instanceof Fi().MultiRow&&(p=s.row-f.topRow,f.bottomRow===i.rows.length-1))return}else if((t==c.Prev||t==c.PrevCell||t==c.PrevEditableCell)&&(l=f.topRow,Fi()&&i instanceof Fi().MultiRow&&(p=s.row-f.bottomRow,f.topRow===0)))return}switch(e){case c.NextCell:case c.NextEditableCell:if(d=a,(a=this._getNextColumnCell(l,d,e))!=d&&(f=i.getMergedRange(i.cells,l,a))&&a<f.col2&&(a=f.col2),a==d)for(;;){if(l==i.rows.length-1){a=s.col,l=s.row;break}var _=!1;if((l=this._getNextRowCell(l,a,e))>s.row){for(d=-1;d<u.length;){if((a=this._getNextColumnCell(l,d,e))==d){_=!0;break}(f=i.getMergedRange(i.cells,l,a))&&a<f.col2&&(a=f.col2);break}if(_)continue}break}i.select(l,a);break;case c.PrevCell:case c.PrevEditableCell:if(d=a,(a=this._getNextColumnCell(l,d,e))!=d&&(f=i.getMergedRange(i.cells,l,a))&&a>f.col&&(a=f.col),a==d)for(;;){if(l==0){a=s.col,l=s.row;break}if(_=!1,(l=this._getNextRowCell(l,a,e))<s.row){for(d=u.length;d>-1;){(a=this._getNextColumnCell(l,d,e))!=d?(f=i.getMergedRange(i.cells,l,a))&&a>f.col&&(a=f.col):_=!0;break}if(_)continue}break}i.select(l,a);break;default:l=this._getNextRowCell(l,a,t,h),l+=p,a=this._getNextColumnCell(l,a,e,h),n?i.selection=i.anchorCursor?new j(o.row,o.col,l,a):new j(l,a,o.row2,o.col2):i.select(l,a)}},r.prototype._getNextColumnCell=function(t,e,n,i){return i===void 0&&(i=0),this._g.columns.getNextCell(e,n,i)},r.prototype._getNextRowCell=function(t,e,n,i){return i===void 0&&(i=0),this._g.rows.getNextCell(t,n,i)},r.prototype._setSelectionMode=function(t){var e=this._g,n=e.rows;this._mode=t,this._xSel.clear(),n.length&&(this._adjustSelection(this._sel,t,!0),e.invalidate())},r.prototype._adjustSelection=function(t,e,n){n===void 0&&(n=!1);var i=this._g.rows,o=ae,s=void 0;if(this._g.hostElement&&(s=this._g.hostElement.querySelector("input.wj-column-selector")instanceof HTMLInputElement),!s)for(var l=0;l<i.length;l++)i[l]._setFlag(ie.Selected,!1,!0);var a=t.clone();switch(e){case o.None:a=new j;break;case o.Cell:a=new j(t.row,t.col);break;case o.ListBox:if(s)return;for(l=0;l<i.length;l++)i[l]._setFlag(ie.Selected,a.containsRow(l),!0)}this.select(a,!1,n)},r.prototype._expandSelection=function(){var t=this._g,e=t.selectionMode;if(t.expandSelectionOnCopyPaste&&e){var n=this.selection,i=ae;switch(e){case i.Cell:case i.Row:break;case i.ListBox:this._expandSelectedRows();break;case i.RowRange:n=new j(n.topRow,0,n.bottomRow,t.columns.length-1);default:var o=this._expandSelectionRange(n);o&&this.select(o,!1)}}},r.prototype._deselectRange=function(t){var e=this.selection,n=this.extendedSelection;if(e.contains(t)){var i=n.length;return this._sel=i?n[i-1]:new j,i&&n.removeAt(i-1),!0}for(var o=0;o<n.length;o++)if(n[o].contains(t))return n.removeAt(o),!0;return!1},r.prototype._expandSelectedRows=function(){K(this.selectionMode==ae.ListBox,"ListBox mode expected");for(var t=this._g,e=t.selectedRows.map(function(a){return a.index}),n=[],i=0;i<e.length;i++)for(var o=new j(e[i],0,e[i],t.columns.length-1),s=this._expandSelectionRange(o)||o,l=s.topRow;l<=s.bottomRow;l++)n.indexOf(l)===-1&&n.push(l);n.sort(),this._selectRows(n)},r.prototype._expandSelectionRange=function(t){var e=this._g,n=e.cells,i=e.getMergedRange(n,t.topRow,t.leftCol,!1),o=e.getMergedRange(n,t.bottomRow,t.leftCol,!1),s=e.getMergedRange(n,t.topRow,t.rightCol,!1),l=e.getMergedRange(n,t.bottomRow,t.rightCol,!1);return i||o||s||l?(i=i||new j(t.topRow,t.leftCol),o=o||new j(t.bottomRow,t.leftCol),s=s||new j(t.topRow,t.rightCol),l=l||new j(t.bottomRow,t.rightCol),new j(Math.min(i.topRow,o.topRow,s.topRow,l.topRow),Math.min(i.leftCol,o.leftCol,s.leftCol,l.leftCol),Math.max(i.bottomRow,o.bottomRow,s.bottomRow,l.bottomRow),Math.max(i.rightCol,o.rightCol,s.rightCol,l.rightCol))):null},r.prototype._selectRows=function(t){K(this.selectionMode==ae.ListBox,"ListBox mode expected");for(var e=this._g,n=0,i=!0;n<e.rows.length;n++){var o=e.rows[n],s=t&&t.indexOf(o.index)>-1;s&&i&&(i=!1,this.select(n,this.selection.col)),o.isSelected=s}},r.prototype._showSelection=function(){var t=this._g,e=this._sel.clone();t.activePanelType===P.ColumnHeader?e.row=-1:t.activePanelType===P.RowHeader?e.col=-1:(t.activePanelType===P.BottomLeft||t.activePanelType===P.ColumnFooter)&&(e.row=-1),t.activePanelType!==P.TopLeft&&(t.anchorCursor?t.scrollIntoView(e.row2,e.col2):t.scrollIntoView(e.row,e.col)),t.activePanelType!==P.Cell&&this._showHeaderSelection()},r.prototype._showHeaderSelection=function(){var t=this._g.activePanel.activeCell;if(t){var e=t.getBoundingClientRect(),n=0,i=0,o=document.documentElement.clientWidth,s=document.documentElement.clientHeight;e.y<0?n=e.y:e.y>s-2&&(n=e.y-s+e.height),e.x<0?i=e.x:e.x>o-2&&(i=e.x-o+e.width),n==0&&i==0||window.scrollBy(i,n)}},r.prototype._adjustReferenceCell=function(t,e,n){var i=this._g,o=i.getMergedRange(i.cells,t.row,t.col);if(o&&!o.isSingleCell){var s=si;switch(e){case s.Next:case s.NextCell:case s.NextEditableCell:t.row=o.bottomRow;break;case s.Prev:case s.PrevCell:case s.PrevEditableCell:t.row=o.topRow}switch(n){case s.Next:case s.NextCell:case s.NextEditableCell:t.col=o.rightCol;break;case s.Prev:case s.PrevCell:case s.PrevEditableCell:t.col=o.leftCol}}},r.prototype.dispose=function(){this._xSel&&this._collectionChangedHandler&&(this._xSel.collectionChanged.removeHandler(this._collectionChangedHandler),this._collectionChangedHandler=null),this._g=null,this._e=null,this._xSel=null},r}(),ie;(function(r){r[r.Visible=1]="Visible",r[r.AllowResizing=2]="AllowResizing",r[r.AllowDragging=4]="AllowDragging",r[r.AllowMerging=8]="AllowMerging",r[r.AllowSorting=16]="AllowSorting",r[r.AutoGenerated=32]="AutoGenerated",r[r.Collapsed=64]="Collapsed",r[r.ParentCollapsed=128]="ParentCollapsed",r[r.Selected=256]="Selected",r[r.ReadOnly=512]="ReadOnly",r[r.HtmlContent=1024]="HtmlContent",r[r.WordWrap=2048]="WordWrap",r[r.MultiLine=4096]="MultiLine",r[r.HasTemplate=8192]="HasTemplate",r[r.RowDefault=3]="RowDefault",r[r.ColumnDefault=23]="ColumnDefault"})(ie||(ie={}));var Cr=function(){function r(){this._type=null,this._align=null,this._inpType=null,this._mask=null,this._maxLen=null,this._required=null,this._fmt=null,this._map=null,this._ddCssClass=null,this._cssClass=null,this._cssClassAll=null,this._szMin=null,this._szMax=null,this._sz=null,this._pos=0,this._antipos=0,this._idx=-1,this._idxVis=-1,this._idxData=-1,this.gridChanged=new A}return Object.defineProperty(r.prototype,"binding",{get:function(){return this._binding?this._binding.path:null},set:function(t){if(t!=this.binding){var e=G(t);if(this._binding=e?new nt(e):null,!this._type&&this.grid&&this._binding){var n=this.grid.collectionView;if(n&&n.sourceCollection&&n.sourceCollection.length){var i=n.sourceCollection[0];this._type=Si(this._binding.getValue(i))}}this.onPropertyChanged()}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"sortMemberPath",{get:function(){return this._bindingSort?this._bindingSort.path:null},set:function(t){if(t!=this.sortMemberPath){var e=G(t);this._bindingSort=e?new nt(e):null,this.onPropertyChanged()}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"dataType",{get:function(){return this._type},set:function(t){t=pe(t,Ae,!0),this._type!=t&&(this._type=t,this.grid&&this.grid.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"inputType",{get:function(){return this._inpType},set:function(t){this._inpType=G(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"mask",{get:function(){return this._mask},set:function(t){this._mask=G(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maxLength",{get:function(){return this._maxLen},set:function(t){this._maxLen=V(t,!0,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"align",{get:function(){return this._align},set:function(t){this._align!=t&&(this._align=t,this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"format",{get:function(){return this._fmt},set:function(t){this._fmt!=t&&(this._fmt=t,this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"dataMap",{get:function(){return this._map},set:function(t){this._map!=t&&(this._map&&this._map.mapChanged.removeHandler(this.onPropertyChanged,this),Ge(t)&&(t=new oo(t,null,null)),this._map=Ve(t,oo,!0),this._map&&this._map.mapChanged.addHandler(this.onPropertyChanged,this),this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"dataMapEditor",{get:function(){return this._mapEditor!=null?this._mapEditor:it.DropDownList},set:function(t){t!=this._mapEditor&&(this._mapEditor=pe(t,it),this.grid&&this.grid.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"showDropDown",{get:function(){return this.dataMapEditor==it.DropDownList},set:function(t){gr("showDropDown","dataMapEditor"),this.dataMapEditor=t?it.DropDownList:it.AutoComplete},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"dropDownCssClass",{get:function(){return this._ddCssClass},set:function(t){this._ddCssClass=G(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"visible",{get:function(){return this._getFlag(ie.Visible)},set:function(t){this._setFlag(ie.Visible,t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isVisible",{get:function(){return!!this._getFlag(ie.Visible)&&(!this._getFlag(ie.ParentCollapsed)||this instanceof Me)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pos",{get:function(){return this._list&&this._list._dirty&&this._list._update(),this._pos},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"index",{get:function(){return this._list&&this._list._dirty&&this._list._update(),this._idx},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"visibleIndex",{get:function(){return this._list&&this._list._dirty&&this._list._update(),this.isVisible?this._idxVis:-1},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"size",{get:function(){return this._sz},set:function(t){t!=this._sz&&(this._sz=V(t,!0),this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"renderSize",{get:function(){var t=0,e=this._list;return this.isVisible&&(((t=this._sz)==null||t<0)&&(t=e?e.defaultSize:0),e&&e.minSize!=null&&t<e.minSize&&(t=e.minSize),e&&e.maxSize!=null&&t>e.maxSize&&(t=e.maxSize),this._szMin!=null&&t<this._szMin&&(t=this._szMin),this._szMax!=null&&t>this._szMax&&(t=this._szMax)),t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"allowResizing",{get:function(){return this._getFlag(ie.AllowResizing)},set:function(t){this._setFlag(ie.AllowResizing,t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"allowDragging",{get:function(){return this._getFlag(ie.AllowDragging)},set:function(t){this._setFlag(ie.AllowDragging,t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"allowMerging",{get:function(){return this._getFlag(ie.AllowMerging)},set:function(t){this._setFlag(ie.AllowMerging,t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isSelected",{get:function(){return this._getFlag(ie.Selected)},set:function(t){if(!!t!=this.isSelected){var e=this.grid;if(e){var n=this instanceof _t?new j(this.index,0,this.index,e.columns.length-1):new j(0,this.index,e.rows.length-1,this.index),i=new Re(e?e.cells:null,n);e.onSelectionChanging(i)&&this._setFlag(ie.Selected,t,!0)&&(e.refreshCells(!1,!0,!0),e.onSelectionChanged(i))}else this._setFlag(ie.Selected,t)}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isReadOnly",{get:function(){return this._getFlag(ie.ReadOnly)},set:function(t){this._setFlag(ie.ReadOnly,t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isRequired",{get:function(){return this._required},set:function(t){this._required=M(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isContentHtml",{get:function(){return this._getFlag(ie.HtmlContent)},set:function(t){this.isContentHtml!=t&&(this._setFlag(ie.HtmlContent,t),this.grid&&this.grid.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"wordWrap",{get:function(){return this._getFlag(ie.WordWrap)},set:function(t){this._setFlag(ie.WordWrap,t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"multiLine",{get:function(){return this._getFlag(ie.MultiLine)},set:function(t){this._setFlag(ie.MultiLine,t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"cssClass",{get:function(){return this._cssClass},set:function(t){t!=this._cssClass&&(this._cssClass=G(t),this.grid&&this.grid.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"cssClassAll",{get:function(){return this._cssClassAll},set:function(t){t!=this._cssClassAll&&(this._cssClassAll=G(t),this.grid&&this.grid.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"grid",{get:function(){return this._list?this._list._g:null},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"collectionView",{get:function(){return this.grid?this.grid.collectionView:null},enumerable:!0,configurable:!0}),r.prototype.onPropertyChanged=function(){this._list&&(this._list._dirty=!0,this.grid.invalidate())},r.prototype.onGridChanged=function(t){this.gridChanged.raise(this,t)},r.prototype._setList=function(t){t!=this._list&&(this._list=t,this.onGridChanged())},r.prototype._getFlag=function(t){return(this._f&t)!=0},r.prototype._setFlag=function(t,e,n){return!!e!=this._getFlag(t)?(this._f=e?this._f|t:this._f&~t,n||this.onPropertyChanged(),!0):!1},r}(),Je=function(r){jt(t,r);function t(e){var n=r.call(this)||this;return n._hdr=null,n._plholder=null,n._name=null,n._agg=null,n._quickSize=null,n._descById=null,n._sortOrder=null,n._tpl=null,n._f=ie.ColumnDefault,n._hash=t._ctr.toString(36),t._ctr++,Qt(n,e),n._uid=ln(),n}return Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._szStar!=null?this._szStar:this.size},set:function(e){t._parseStarSize(e)!=null?(this._szStar=e,this.onPropertyChanged()):(this._szStar=null,this.size=V(e,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minWidth",{get:function(){return this._szMin},set:function(e){e!=this._szMin&&(this._szMin=V(e,!0,!0),this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxWidth",{get:function(){return this._szMax},set:function(e){e!=this._szMax&&(this._szMax=V(e,!0,!0),this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"quickAutoSize",{get:function(){return this._quickSize},set:function(e){this._quickSize=M(e,!0)},enumerable:!0,configurable:!0}),t.prototype._getQuickAutoSize=function(){return!!this.grid._getQuickAutoSize()&&(st(this._quickSize)?this._quickSize:!(this.isContentHtml||this.wordWrap||this.multiLine||this._getFlag(ie.HasTemplate)))},Object.defineProperty(t.prototype,"renderWidth",{get:function(){return this.renderSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"header",{get:function(){return this._hdr?this._hdr:this.binding},set:function(e){this._hdr!=e&&(this._hdr=e,this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"placeholder",{get:function(){return this._plholder?this._plholder:this.header},set:function(e){this._plholder!=e&&(this._plholder=e,this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cellTemplate",{get:function(){return this._tpl},set:function(e){e!=this._tpl&&(K(e==null||te(e)||oe(e),"cellTemplate should be a string or an ICellTemplateFunction."),this._tpl=e,this._setFlag(ie.HasTemplate,e!=null&&e!=""),this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editor",{get:function(){var e=this._edt;return e?e.control:null},set:function(e){e!=this.editor&&(this._edt&&(this._edt.dispose(),this._edt=null),e!=null&&(e=Ve(e,H),this._edt=new zl(this,e)))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowSorting",{get:function(){return this._getFlag(ie.AllowSorting)},set:function(e){this._setFlag(ie.AllowSorting,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sortOrder",{get:function(){return this._sortOrder},set:function(e){e!=null&&(e=pe(e,Et)),this._sortOrder!=e&&(this._sortOrder=e,this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentSort",{get:function(){var e=this.currentSortIndex;return e>-1?this.grid.collectionView.sortDescriptions[e].ascending?"+":"-":null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentSortIndex",{get:function(){var e=this.grid?this.grid.collectionView:null,n=e?e.sortDescriptions:null,i=n&&n.length?this._getBindingSort():null;if(i){for(var o=0;o<n.length;o++)if(n[o].property==i)return o}return-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"aggregate",{get:function(){return this._agg!=null?this._agg:ke.None},set:function(e){(e=pe(e,ke))!=this._agg&&(this._agg=e,this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"describedById",{get:function(){return this._descById},set:function(e){e!=this._descById&&(this._descById=G(e),this.grid&&this.grid.invalidate())},enumerable:!0,configurable:!0}),t.prototype.getIsRequired=function(e){return this._required!=null?this._required:e&&e.isRequired!=null?e.isRequired:this.dataType==Ae.String?this.dataMap!=null||this._mask!=null&&this._mask.length>0:!e||e.dataType!=Ae.String||e.dataMap!=null||e.mask!=null&&e.mask.length>0},t.prototype.getAlignment=function(e){if(this._align!=null)return this._align;if(e&&e.align!=null)return e.align;if(!this._map)switch(this.dataType){case Ae.Boolean:return"center";case Ae.Number:return"right"}if(e&&!e.dataMap)switch(e.dataType){case Ae.Boolean:return"center";case Ae.Number:return"right"}return""},t.prototype._getBindingSort=function(){return this.sortMemberPath?this.sortMemberPath:this.binding?this.binding:null},t._parseStarSize=function(e){if(te(e)){var n=e.length;if(n>0&&e[n-1]=="*"){var i=n==1?1:parseFloat(e);if(i>0&&!isNaN(i))return i}}return null},t._ctr=0,t}(Cr),_t=function(r){jt(t,r);function t(e){var n=r.call(this)||this;return n.resizedManually=!1,n._f=ie.ColumnDefault,n._data=e||null,n}return Object.defineProperty(t.prototype,"dataItem",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataIndex",{get:function(){return this._list&&this._list._dirty&&this._list._update(),this._idxData},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.size},set:function(e){this.size=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderHeight",{get:function(){return this.renderSize},enumerable:!0,configurable:!0}),t}(Cr),we=function(r){jt(t,r);function t(e){var n=r.call(this,e)||this;return n._level=-1,n._isSummary=!1,n.level=e instanceof Tt?e.level:-1,n.isReadOnly=!0,n}return Object.defineProperty(t.prototype,"isSummary",{get:function(){return this._isSummary},set:function(e){e!=this._isSummary&&(this._isSummary=M(e),this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"level",{get:function(){return this._level},set:function(e){Fe(e),e!=this._level&&(this._level=e,this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasChildren",{get:function(){if(this.isSummary)return!1;if(this.grid!=null&&this._list!=null){this._list._update();var e=this.index<this._list.length-1?this._list[this.index+1]:null,n=Ft(e,t),i=Ft(e,Me);return e!=null&&i==null&&(n==null||n.level>this.level)}return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCollapsed",{get:function(){return this._getFlag(ie.Collapsed)},set:function(e){!!e==this.isCollapsed||this._list==null||this.isSummary||this._setCollapsed(M(e))},enumerable:!0,configurable:!0}),t.prototype.getGroupHeader=function(){if(this.isSummary)return"";var e=this.grid,n=e.groupHeaderFormat||W.FlexGrid.groupHeaderFormat,i=this.dataItem;if(i&&i instanceof Tt&&!this.hasChildren&&!this.isSummary&&i.items.length==0&&(n=null),i instanceof Tt&&n&&e.showGroups&&!e.childItemsPath){var o=i.groupDescription.propertyName,s=i.name,l=e.getColumn(o),a=this.isContentHtml;if(l){a=a||l.isContentHtml,l.header&&(o=l.header);var u=l.dataMap;u&&(s=u.getDisplayValue(s)),l.dataType==Si(s)&&(s=re.format(s,l.format))}else o=mr(o);var h=0,c=e.collectionView;return h=e._isServerCollectionView(c)&&c.groupOnServer?c.getGroupAggregate(i.groupDescription.propertyName,i,ke.CntAll):i.getAggregate(ke.CntAll,null,e.collectionView),zt(n,{name:Wt(o),value:a?s:Wt(s),level:i.level,count:h})}return""},t.prototype._setCollapsed=function(e){var n=this,i=this.grid,o=i.rows,s=this.getCellRange(),l=i.collectionView,a=i.isUpdating&&l&&l.groupOnServer&&l.groupLazyLoading;a&&(i._isGrpClpsChanging=!0);var u=new Re(i.cells,new j(this.index,-1));i.onGroupCollapsedChanging(u)&&(i.deferUpdate(function(){o.deferUpdate(function(){n._setFlag(ie.Collapsed,e,!0);for(var h=s.topRow+1;h<=s.bottomRow&&h>-1&&h<o.length;h++){o[h]._setFlag(ie.ParentCollapsed,e,!0);var c=o[h];c instanceof t&&c.isCollapsed&&(h=c.getCellRange().bottomRow)}})}),i.onGroupCollapsedChanged(u),a&&(i._isGrpClpsChanging=!1))},t.prototype.getCellRange=function(){for(var e=this._list,n=this.index,i=e.length-1,o=n+1;o<=i;o++){var s=e[o];if(s instanceof t&&s.level<=this.level){i=o-1;break}}if(this.grid.groupSummaryPosition===Pt.Auto&&e.length>i&&e[i+1]instanceof t&&e[i+1].isSummary)do i++;while(e[i+1]instanceof t&&e[i+1].isSummary&&e[i+1].dataItem==e[i].dataItem);return new j(n,0,i,this.grid.columns.length-1)},t}(_t),Po=function(r){jt(t,r);function t(e,n){var i=r.call(this)||this;return i.frozenDetailChildren=0,i._frozen=0,i._frozenEnd=0,i._lastFrozen=-1,i._lastFrozenVisible=-1,i._lastUnfrozenVisible=-1,i._firstVisible=-1,i._vlen=0,i._szDef=28,i._szTot=0,i._szFrozen=0,i._szCustom=!1,i._dirty=!1,i._frozenColAreaWidth=0,i._g=Ve(e,xt),i._szDef=V(n,!1,!0),i._uid=ln(),i}return Object.defineProperty(t.prototype,"grid",{get:function(){return this._g},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultSize",{get:function(){return this._szDef},set:function(e){this._szCustom=!0,this._szDef!=e&&(this._szDef=V(e,!1,!0),this._dirty=!0,this._g.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frozen",{get:function(){return this._frozen},set:function(e){K(_e(e),"Positive number expected"),_e(e)&&e!=this._frozen&&(this._frozen=V(e,!1,!0),this._dirty=!0,this._g.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frozenEnd",{get:function(){return this._frozenEnd},set:function(e){K(_e(e),"Positive number expected"),_e(e)&&e!=this._frozenEnd&&(this._frozenEnd=V(e,!1,!0),this._dirty=!0,this._g.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_frozenInternal",{get:function(){return this._frozen>0?this._frozen:-this._frozenEnd},set:function(e){e<0?(this.frozen=0,this.frozenEnd=-e):(this.frozen=e,this.frozenEnd=0)},enumerable:!0,configurable:!0}),t.prototype.isFrozen=function(e){return this._frozenInternal>=0?e<this._frozenInternal:e>=this._lastFrozen},Object.defineProperty(t.prototype,"minSize",{get:function(){return this._szMin},set:function(e){e!=this._szMin&&(this._szMin=V(e,!0,!0),this._dirty=!0,this._g.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxSize",{get:function(){return this._szMax},set:function(e){e!=this._szMax&&(this._szMax=V(e,!0,!0),this._dirty=!0,this._g.invalidate())},enumerable:!0,configurable:!0}),t.prototype.getTotalSize=function(){return this._dirty&&this._update(),this._szTot},t.prototype.getFrozenSize=function(){return this._dirty&&this._update(),this._szFrozen},Object.defineProperty(t.prototype,"visibleLength",{get:function(){return this._dirty&&this._update(),this._vlen},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastFrozen",{get:function(){return this._lastFrozen!=-1?this[this._lastFrozen]:null},enumerable:!0,configurable:!0}),t.prototype.getItemAt=function(e){if(this._dirty&&this._update(),e<=0&&this.length>0&&this[0].renderSize)return 0;for(var n,i,o=this.length,s=0,l=o-1;s<=l;)if((i=this[n=s+l>>>1])._pos>=e&&n>0)l=n-1;else{if(!(i._pos+i.renderSize<=e&&n<o-1)){for(;n>0&&!this[n].renderSize;)n--;for(;n<o-1&&!this[n].renderSize;)n++;return n}s=n+1}return l},t.prototype.getNextCell=function(e,n,i){i===void 0&&(i=0);var o,s=si;switch(n){case s.Next:case s.NextCell:for(o=e+1;o<this.length;o++)if(this[o].renderSize>0)return o;break;case s.NextEditableCell:for(o=e+1;o<this.length;o++)if(this[o].renderSize>0&&!this[o].isReadOnly)return o;break;case s.Prev:case s.PrevCell:for(o=e-1;o>=0;o--)if(this[o].renderSize>0)return o;break;case s.PrevEditableCell:for(o=e-1;o>=0;o--)if(this[o].renderSize>0&&!this[o].isReadOnly)return o;break;case s.End:for(o=this.length-1;o>=0;o--)if(this[o].renderSize>0)return o;break;case s.Home:for(o=0;o<this.length;o++)if(this[o].renderSize>0)return o;break;case s.NextPage:return(o=this.getItemAt(this[e].pos+this[e].renderSize+i))<0?this.getNextCell(e,si.End,i):o==e&&o<this.length-1&&this[o+1].renderSize?o+1:o;case s.PrevPage:return(o=this.getItemAt(this[e].pos-i))<0?this.getNextCell(e,si.Home,i):o==e&&o>0&&this[o-1].renderSize?o-1:o}return e},t.prototype.canMoveElement=function(e,n,i){if(i===void 0&&(i=!0),n==e||e<0||e>=this.length||n>=this.length)return!1;if(i){n<0&&(n=this.length-1);for(var o=Math.min(e,n),s=Math.max(e,n),l=o;l<=s;l++)if(!this[l].allowDragging)return!1}return!(this[n]instanceof Me)},t.prototype.moveElement=function(e,n,i){if(i===void 0&&(i=!0),this.canMoveElement(e,n,i)){var o=this[e];return this.removeAt(e),n<0&&(n=this.length),this.insert(n,o),i&&(this.isFrozen(e)&&!this.isFrozen(n)?this._frozenInternal>=0?this._frozenInternal--:this._frozenInternal++:!this.isFrozen(e)&&this.isFrozen(n)&&(this._frozenInternal>=0?this._frozenInternal++:this._frozenInternal--)),!0}return!1},t.prototype.onCollectionChanged=function(e){e===void 0&&(e=Bt.reset),this._dirty=!0,this._g.invalidate(),r.prototype.onCollectionChanged.call(this,e)},t.prototype.push=function(e){return e._setList(this),r.prototype.push.call(this,e)},t.prototype.splice=function(e,n){for(var i=this,o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];for(var l=e;l<e+n&&l<this.length;l++){var a=this[l];a instanceof Cr&&a._setList(null)}return o.forEach(function(u){return u._setList(i)}),r.prototype.splice.apply(this,[e,n].concat(o))},t.prototype.beginUpdate=function(){this._update(),r.prototype.beginUpdate.call(this)},t.prototype._setDefaultSize=function(e){this._szCustom||(this.defaultSize=e,this._szCustom=!1)},t.prototype._update=function(){if(this._dirty&&!this.isUpdating){this._dirty=!1,this._lastFrozen=-1,this._firstVisible=-1,this._lastUnfrozenVisible=-1,this._frozenColAreaWidth=0,this._szFrozen=0;var e=0,n=0,i=void 0,o=void 0;if(this._frozenInternal>=0){for(var s=0;s<this.length;s++)(o=this[s])._idx=s,o._idxVis=e,o._pos=n,o._setList(this),(i=o.renderSize)>0&&(n+=i,e++,s<this._frozenInternal&&(this._lastFrozen=s)),this._firstVisible<0&&o.visible&&(this._firstVisible=s),s<this._frozenInternal&&(this._szFrozen+=i);return this._vlen=e,this._szTot=n,!0}for(s=0;s<this.length;s++)(o=this[s])._idx=s,o._idxVis=e,o._pos=n,o._setList(this),(i=o.renderSize)>0&&(n+=i,e++),this._firstVisible<0&&o.visible&&(this._firstVisible=s),o.visible&&s<this.length+this._frozenInternal&&(this._lastUnfrozenVisible=s),s>=this.length+this._frozenInternal&&(this._szFrozen+=i);for(this._lastFrozen=Math.max(0,this.length+this._frozenInternal),this._lastFrozenVisible=this._lastFrozen;this._lastFrozenVisible<this.length&&!(this[this._lastFrozenVisible].renderSize>0);)this._lastFrozenVisible++;var l=0;for(s=this.length-1;s>=Math.max(0,this.length+this._frozenInternal);s--)i=(o=this[s]).renderSize,l-=this[s].renderSize,o._antipos=l,this._frozenColAreaWidth+=i;return this._vlen=e,this._szTot=n,!0}return!1},t}(At),Yi=function(r){jt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getColumn=function(e){var n=_e(e)?e:this.indexOf(e);return n>-1?this[n]:null},t.prototype.indexOf=function(e){if(e instanceof Je)return r.prototype.indexOf.call(this,e);for(var n=0;n<this.length;n++)if(this[n].name==e)return n;for(n=0;n<this.length;n++)if(this[n].binding==e)return n;return-1},Object.defineProperty(t.prototype,"describedById",{get:function(){return this._descById},set:function(e){e!=this._descById&&(this._descById=G(e),this._g&&this._g.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstVisibleIndex",{get:function(){return this._dirty&&this._update(),this._firstVisible},enumerable:!0,configurable:!0}),t.prototype._updateStarSizes=function(e){var n,i=!1,o=0;e-=.5;for(var s=0;s<this.length;s++)(a=this[s]).isVisible&&(a._szStar?(o+=Je._parseStarSize(a._szStar),n=a):e-=a.renderWidth);if(n){var l=e;for(s=0;s<this.length;s++){var a;if((a=this[s]).isVisible&&a._szStar){var u=a._sz;a==n&&l>0?u=l:l-=u=Math.max(0,Math.round(Je._parseStarSize(a._szStar)/o*e)),u!=a._sz&&(a._sz=u,i=!0)}}return i&&(this._dirty=!0,this._update()),i}return!1},t}(Po),ki=function(r){jt(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e._maxLevel=-1,e}return Object.defineProperty(t.prototype,"ariaLabel",{get:function(){return this._ariaLabel},set:function(e){e!=this.ariaLabel&&(this._ariaLabel=G(e),this._g&&this._g.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxGroupLevel",{get:function(){return this._dirty&&this._update(),this._maxLevel},enumerable:!0,configurable:!0}),t.prototype.getDetailRowCountUptoRow=function(e){var n=sr(),i=0,o=Math.abs(e),s=0,l=this.length-1,a=1,u=0;for(e<0&&(a=-1,u=1);o>0&&s<=l&&s>=0;){var h=l*u+s*a,c=this[h];if(c&&!(n&&c instanceof n.DetailRow)){var d=this[h+1];d&&n&&d instanceof n.DetailRow&&i++,o--}s++}return i},t.prototype._update=function(){var e=this;if(r.prototype._update.call(this)){var n=this.grid?this.grid.collectionView:null,i=n?n.items:null,o=0;return this._maxLevel=-1,this.forEach(function(s){s instanceof we&&s.level>e._maxLevel&&(e._maxLevel=s.level);var l=s.dataItem;l&&i?l===i[o]?s._idxData=o:l===i[o+1]?s._idxData=++o:l!==i[s._idxData]&&(s._idxData=-1):s._idxData=-1}),!0}return!1},t}(Po),kl=function(){function r(t){this._updatingCollection=0,this._initialized=!1,this._grid=t,this._initializeColumnGroups(),this._initialized=!0}return Object.defineProperty(r.prototype,"columnGroups",{get:function(){return this._colGroups},enumerable:!0,configurable:!0}),r.prototype.createColumnGroups=function(t){this._initialized=!1,this._createColumnGroups(t),this._initialized=!0},r.prototype.hasColumnGroups=function(){return this._colGroups!=null&&this._colGroups.length>0},r.prototype.getGroupDefinitions=function(){return this._groupDefs},r.prototype.getColumnGroup=function(t,e){return this._getColumnGroup(t,e)},r.prototype.canMoveColumnGroup=function(t,e,n,i){if(t==n&&e==i)return!1;var o=this._grid,s=o.columnHeaders.rows,l=o.columns;if(t<0||t>=s.length||e<0||e>=l.length||n<0||n>=s.length||i<0||i>=l.length)return!1;var a=this._getColumnGroup(t,e),u=this._getColumnGroup(n,i);if(!a||!u||a==u||a.level<u.level&&a._containsGroup(u))return!1;var h=a.parentGroup,c=u.parentGroup;return!h||h===c||!h._isCollapseTo(a)},r.prototype.moveColumnGroup=function(t,e,n,i,o){if(this.canMoveColumnGroup(t,e,n,i)){var s=this._getColumnGroup(t,e),l=this._getColumnGroup(n,i);if(!s||!l||s==l||o&&!l.isEmpty)return!1;var a=this._getCollection(s),u=o?l.columns:this._getCollection(l);if(!a||!u)return!1;var h=o?0:u.indexOf(l);return h<0?!1:(!o&&a!=u&&i>e&&h++,this._deferCollectionUpdate(function(){if(!a.remove(s))return!1;u.insert(h,s)}),!0)}return!1},r.prototype.handleCollectionChange=function(){this._initialized&&!this._updatingCollection&&(this._initialized=!1,this._buildColumnGroups(),this._initialized=!0)},r.prototype.handlePropertyChange=function(t){if(t&&this._initialized){var e=this._grid,n=t._rng,i=t.header;if(i!=t._curr_header)for(var o=n.topRow;o<=n.bottomRow;o++)for(var s=n.leftCol;s<=n.rightCol;s++)e.columnHeaders.setCellData(o,s,i),t._curr_header=i;t.columns.length>0&&e.invalidate()}},r.prototype._initializeColumnGroups=function(){var t=this._grid,e=new Vi;this._groupDefs=e,this._colGroups=e,this._colGroups._setOwner(t),this._colGroups._setChangeHandler(this)},r.prototype._createColumnGroups=function(t){this._grid,this._groupDefs=vt(t),this._colGroups&&this._colGroups._setOwner(null),this._colGroups=Vi._parse(t),this._buildColumnGroups()},r.prototype._buildColumnGroups=function(){var t=this,e=this._grid;this._colGroups._removeChangeHandler(),this._assertColumnGroups(this._colGroups),e.autoGenerateColumns=!1,e.columns.clear(),this._colGroups._setOwner(e),this._colGroups.forEach(function(c){c._beginBuild()});var n=0;this._colGroups.forEach(function(c){t._addColumnGroup(c),n=Math.max(n,c._getMaxLevel())}),this._colGroups.forEach(function(c){c._expandRange(n)});var i=e.columnHeaders.rows;i.clear();for(var o=0;o<=n;o++){var s=new _t;i.splice(o,0,s),o<n&&(s.cssClassAll=z.colGroup)}for(o=0;o<i.length;o++)for(var l=0;l<e.columns.length;l++){var a=this._getColumnGroup(o,l);if(a){var u=a.header||mr(a.binding);if(e.columnHeaders.setCellData(o,l,u),a.height){var h=e.columnHeaders.rows[o].height;e.columnHeaders.rows[o].height=h<=a.height?a.height:h}a._curr_header=a.header}}this._colGroups._setChangeHandler(this),this._colGroups.forEach(function(c){c._checkIfCollapsed()})},r.prototype._getColumnGroup=function(t,e){var n=this._grid;if(t<n.columnHeaders.rows.length&&e<n.columns.length)for(var i=this._colGroups;i;){for(var o=i,s=0;s<i.length;s++){var l=i[s],a=l._rng;if(a.containsColumn(e)){if(a.containsRow(t)||l.columns.length==0)return l;i=l.columns;break}}if(i==o)break}return null},r.prototype._getCollection=function(t){var e=t.parentGroup;return e?e.columns:this._colGroups},r.prototype._assertColumnGroups=function(t){var e=this;K(t instanceof Vi,"column groups contain items of invalid collection type"),t.forEach(function(n){K(n instanceof Ei,"column groups contain items of invalid type"),e._assertColumnGroups(n.columns)})},r.prototype._addColumnGroup=function(t){var e=this,n=this._grid;t._rng.col=n.columns.length,t.columns.length==0?n.columns.push(t):t.columns.forEach(function(i){e._addColumnGroup(i)}),t._rng.col2=n.columns.length-1},r.prototype._beginCollectionUpdate=function(){this._updatingCollection++},r.prototype._endCollectionUpdate=function(){this._updatingCollection--,this._updatingCollection<=0&&this.handleCollectionChange()},r.prototype._deferCollectionUpdate=function(t){try{this._beginCollectionUpdate(),t()}finally{this._endCollectionUpdate()}},r}(),Ei=function(r){jt(t,r);function t(e,n){var i=r.call(this)||this;i._rng=new j(0,-1),i._lvl=0,i._collapsed=!1,i._cols=new Vi,Qt(i,e);var o=n&&n.columns;return o&&o.indexOf(i)<0&&o.push(i),i}return t.prototype._copy=function(e,n){if(e=="columns"){var i=vt(n);return this._cols=Vi._parse(i),!0}return!1},Object.defineProperty(t.prototype,"columns",{get:function(){return this._cols},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnGroups",{get:function(){return this._cols},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._cgHeight},set:function(e){this._cgHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return this._cols.length===0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentGroup",{get:function(){var e=this._ownerList,n=e&&e.owner;return n instanceof t?n:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"level",{get:function(){for(var e=this,n=0;e.parentGroup;)e=e.parentGroup,n++;return n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collapseTo",{get:function(){return this._collTo},set:function(e){K(Ge(e)||te(e),"collapseTo should be an array or a string."),this._collTo!=e&&(this._collTo=e,this._updateCollapsedState())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCollapsed",{get:function(){return this._collapsed},set:function(e){var n=this.grid,i=null;e!=this._collapsed&&(n?(i=new Re(n.columnHeaders,this._rng,this),n.onColumnGroupCollapsedChanging(i)?this._collapsed=M(e):i=null):this._collapsed=M(e)),this._updateCollapsedState(),n&&i&&n.onColumnGroupCollapsedChanged(i)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"grid",{get:function(){var e=this._ownerList,n=e&&e.owner;return n instanceof t?n.grid:n instanceof xt?n:null},enumerable:!0,configurable:!0}),t.prototype._beginBuild=function(){var e=this;this._lvl=0;for(var n=this.parentGroup;n;n=n.parentGroup)this._lvl++;setTimeout(function(){if(e.parentGroup&&e._lvl!==0&&e.parentGroup.width&&(e.width===null||e.width===void 0)){var i=0,o=0;e.parentGroup._cols.forEach(function(s){i+=s.width,s.width!==null&&s.width!==void 0||o++}),e.width=(e.parentGroup.width-i)/o}},0),this._rng=new j(0,-1),this._rng.row=this._rng.row2=this._lvl,this._cols.forEach(function(i){i._beginBuild()})},t.prototype._setChangeHandler=function(e){this._changeHdl=e,this._cols._setChangeHandler(e)},t.prototype._removeChangeHandler=function(){this._changeHdl=null,this._cols._removeChangeHandler()},t.prototype._setOwnerList=function(e){e!=this._ownerList&&(this._ownerList=e)},t.prototype._checkIfCollapsed=function(){var e=this.grid;e&&e.columns&&(this._collapsed?this._updateCollapsedState():this._cols.forEach(function(n){n._checkIfCollapsed()}))},t.prototype._updateCollapsedState=function(){var e=this.grid,n=e?e.columns:null,i=this._rng,o=this._collapsed;if(n){this._cols.forEach(function(u){u instanceof t&&(u._collapsed=o,u._updateCollapsedState())});for(var s=this._getCollapseToIndices(),l=i.leftCol;l<=i.rightCol;l++){var a=!o||s.indexOf(l)>-1;n[l]._setFlag(ie.ParentCollapsed,!a)}}},t.prototype._getMaxLevel=function(){var e=this._lvl;return this.columns.forEach(function(n){e=Math.max(e,n._getMaxLevel())}),e},t.prototype._expandRange=function(e){var n=e-this._getMaxLevel();n>0&&(this._rng.row2+=n,this._cols.forEach(function(l){l._shiftRange(n)}));for(var i=this.grid.columns,o=this._rng,s=o.col;s<=o.col2;s++)i[s]._rng.row2=e},t.prototype._shiftRange=function(e){this._rng.row+=e,this._rng.row2+=e,this._cols.forEach(function(n){n._shiftRange(e)})},t.prototype._containsGroup=function(e){for(var n=0;n<this._cols.length;n++){var i=this._cols[n];if(i==e||i._containsGroup(e))return!0}return!1},t.prototype._isCollapseTo=function(e){var n=this.grid,i=n?n.columns:null;if(!e||!i)return!1;var o=this._getCollapseToBindings();if(o&&o.length)for(var s=0;s<o.length;s++)switch(o[s]){case"$first":case"$last":continue;default:if(e===i.getColumn(o[s]))return!0}return!1},t.prototype._getCollapseToBindings=function(){var e=this.collapseTo;return te(e)?[e]:e},t.prototype._getCollapseToIndices=function(){var e=this.grid,n=this._rng,i=this._getCollapseToBindings();if(i&&i.length){for(var o=[],s=e.columns,l=0;l<i.length;l++)switch(i[l]){case"$first":o.push(n.leftCol);break;case"$last":o.push(n.rightCol);break;default:var a=s.getColumn(i[l]),u=s.indexOf(a);a&&n.containsColumn(u)&&o.push(u)}if(o.length)return o}return[n.rightCol]},t.prototype.onPropertyChanged=function(){var e=this._changeHdl;e&&e.handlePropertyChange(this),r.prototype.onPropertyChanged.call(this)},t}(Je),Vi=function(r){jt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getColumn=function(e){return _e(e)?this._getColByIdx(e):this._findColByProp("name",e)||this._findColByProp("binding",e)},Object.defineProperty(t.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),t.prototype.push=function(e){return e._setOwnerList(this),r.prototype.push.call(this,e)},t.prototype.splice=function(e,n){for(var i=this,o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];for(var l=e;l<e+n&&l<this.length;l++){var a=this[l];a instanceof Ei&&a._setOwnerList(null)}return o.forEach(function(u){return u._setOwnerList(i)}),r.prototype.splice.apply(this,[e,n].concat(o))},t._parse=function(e){var n=null;return e?e instanceof t?n=e:(n=new t,e.forEach(function(i){var o=i instanceof Ei?i:new Ei(i);n.indexOf(o)<0&&n.push(o)})):n=new t,n},t.prototype._setChangeHandler=function(e){this._changeHdl=e,this.forEach(function(n){return n._setChangeHandler(e)})},t.prototype._removeChangeHandler=function(){this._changeHdl=null,this.forEach(function(e){return e._removeChangeHandler()})},t.prototype._setOwner=function(e){this._owner=e,this.forEach(function(n){return n.columns._setOwner(n)})},t.prototype._getColByIdx=function(e){return e>-1&&e<this.length?this[e]:null},t.prototype._findColByProp=function(e,n){for(var i=0;i<this.length;i++){var o=this[i];if(o[e]===n||(o=o.columns._findColByProp(e,n))!==null)return o}return null},t.prototype.onCollectionChanged=function(e){e===void 0&&(e=Bt.reset);var n=this._changeHdl;n&&n.handleCollectionChange(),r.prototype.onCollectionChanged.call(this,e)},t}(At);rt("FlexGrid",{groupHeaderFormat:"{name}: <b>{value}</b> ({count:n0} items)",ariaLabels:{toggleDropDown:"Toggle Dropdown",toggleGroup:"Toggle Group",pinning:"Pinnable",pined:"Pinned",sortIndex:"Sort Index",pencil:"Item Being Edited",collapse:"Collapsed Column Header ",asterisk:"New Row Template",rowHeader:"Row Header",topleft:"Top Left",checked:"Checked",unchecked:"Unchecked",editCell:"Edit Cell",IMEInput:"IME Input",radioButtonChecked:"Radio Button Checked",newRowCell:"New Row Cell"},accessibilityHelperMessage:{insertRow:"insert before row {index}",deleteRow:"delete row {index}",pin:{pinColumnName:"Pin Column: {name}",unpinColumnName:"Unpin Column: {name}",pinColumnIndex:"Pin: {colIndex}",unpin:"Unpin"},sort:{sortAscending:"Column {name} Sorted Ascending",sortDescending:"Column {name} Sorted Descending",clearSort:"Clear sort"},frozen:{frozenColumn:"frozen column: {col} row: {row}",unfrozenColumn:"unfrozen column: {col} row: {row}"},imeHandler:{focusImeCell:"{value} {rowName} row {rowIndex} {colName} column {colIndex}"}}});var fi;(function(r){r[r.None=0]="None",r[r.SingleColumn=1]="SingleColumn",r[r.MultiColumn=2]="MultiColumn"})(fi||(fi={}));var Et;(function(r){r[r.AscDesc=0]="AscDesc",r[r.DescAsc=1]="DescAsc",r[r.AscDescNone=2]="AscDescNone",r[r.DescAscNone=3]="DescAscNone"})(Et||(Et={}));var Nt;(function(r){r[r.None=0]="None",r[r.SingleColumn=1]="SingleColumn",r[r.ColumnRange=2]="ColumnRange",r[r.Both=3]="Both"})(Nt||(Nt={}));var le;(function(r){r[r.None=0]="None",r[r.Column=1]="Column",r[r.Row=2]="Row",r[r.All=3]="All"})(le||(le={}));var Yt;(function(r){r[r.Default=0]="Default",r[r.CSV=1]="CSV",r[r.QuoteAll=2]="QuoteAll",r[r.SkipMerged=4]="SkipMerged",r[r.Unformatted=8]="Unformatted",r[r.InvisibleRows=16]="InvisibleRows",r[r.InvisibleColumns=32]="InvisibleColumns",r[r.InvisibleCells=48]="InvisibleCells"})(Yt||(Yt={}));var Rt;(function(r){r[r.None=0]="None",r[r.Column=1]="Column",r[r.Row=2]="Row",r[r.All=3]="All"})(Rt||(Rt={}));var lr;(function(r){r[r.Column=0]="Column",r[r.Row=1]="Row"})(lr||(lr={}));var Pt;(function(r){r[r.Top=0]="Top",r[r.Bottom=1]="Bottom",r[r.Auto=2]="Auto"})(Pt||(Pt={}));var xt=function(r){jt(t,r);function t(e,n){var i=r.call(this,e,null,!0)||this;i._activeCell=null,i._eNoData=null,i._srFocusHelper=null,i._srMessageHelper=null,i._imeContainer=null,i._eEditorsContainer=null,i._szClient=new wt(0,0),i._szClientSB=new wt(0,0),i._offsetY=0,i._cssPage=0,i._ptScrl=new Ye(0,0),i._ptLastScrl=new Ye(0,0),i._cellPadLeft=3,i._cellPadHorz=3,i._cellPadVert=0,i._clipToScreen=!1,i._anchorCell=null,i._spDiff=new Ye(0,0),i._autoGenCols=!0,i._autoClipboard=!0,i._xOnCopyPaste=!0,i._autoScroll=!0,i._autoSearch=!1,i._caseSensitive=!1,i._readOnly=!1,i._indent=14,i._autoSizeMode=ui.Both,i._autoHeights=!1,i._quickSize=null,i._hdrVis=le.All,i._hdrFoc=Rt.None,i._alSorting=fi.SingleColumn,i._sortOrder=Et.AscDesc,i._alPinning=Nt.None,i._alAddNew=!1,i._alDelete=!1,i._alResizing=Jt.Columns,i._alDragging=li.Columns,i._alMerging=on.None,i._ssHdr=le.None,i._shSort=!0,i._shGroups=!0,i._shMarquee=!1,i._shPlcHld=!1,i._altStep=1,i._shErr=!0,i._shDropDown=!0,i._valEdt=!0,i._gHdrFmt=null,i._childItemsPath=null,i._sortRowIndex=null,i._editColIndex=null,i._deferResizing=!1,i._pSel=!0,i._pOutline=!0,i._stickyHdr=!1,i._anchorCursor=!1,i._copyHeaders=le.None,i._bigChecks=!1,i._skipMerged=!1,i._commitEmptyEdits=!0,i._maxContent=!1,i._pasteEmptyCells=!0,i._groupSummaryPosition=Pt.Top,i._noDataOverlayContent="",i._fzClone=null,i._vt=0,i._vtRows=0,i._vtCols=0,i._lazyRender=!0,i._refreshOnEdit=!0,i._reorderCells=!0,i._lastStickyScroll=0,i._scrollStickyThrottleTimeout=14,i._scrollEndTimer=null,i._contentEstimationLimit=100,i._isSilentScroll=!1,i._isISChanging=!1,i._isScrollingByWheel=!1,i.cachedDefaultHeight=-1,i.cachedHeights={},i._isSourceChanging=!1,i._canOverRuleCtrlPress=!1,i._isShiftTab=!1,i._touchEdit=!1,i._isGrpClpsChanging=!1,i._initialRestCvLoad=!0,i._grpClpsChng=!1,i.itemsSourceChanging=new A,i.itemsSourceChanged=new A,i.scrollPositionChanged=new A,i.selectionChanging=new A,i.selectionChanged=new A,i.loadingRows=new A,i.loadedRows=new A,i.updatingLayout=new A,i.updatedLayout=new A,i.resizingColumn=new A,i.resizedColumn=new A,i.autoSizingColumn=new A,i.autoSizedColumn=new A,i.starSizedColumns=new A,i.draggingColumn=new A,i.draggingColumnOver=new A,i.draggedColumn=new A,i.pinningColumn=new A,i.pinnedColumn=new A,i.resizingRow=new A,i.resizedRow=new A,i.autoSizingRow=new A,i.autoSizedRow=new A,i.draggingRow=new A,i.draggingRowOver=new A,i.draggedRow=new A,i.groupCollapsedChanging=new A,i.groupCollapsedChanged=new A,i.columnGroupCollapsedChanging=new A,i.columnGroupCollapsedChanged=new A,i.sortingColumn=new A,i.sortedColumn=new A,i.beginningEdit=new A,i.prepareCellForEdit=new A,i.cellEditEnding=new A,i.cellEditEnded=new A,i.rowEditStarting=new A,i.rowEditStarted=new A,i.rowEditEnding=new A,i.rowEditEnded=new A,i.rowAdded=new A,i.deletingRow=new A,i.deletedRow=new A,i.copying=new A,i.copied=new A,i.pasting=new A,i.pasted=new A,i.pastingCell=new A,i.pastedCell=new A,i.formatItem=new A(function(){i._clearCells()}),i.updatingView=new A,i.updatedView=new A,i._mappedColumns=null;var o=i.hostElement;Ie()&&(o.style.borderRadius="0");var s=i.getTemplate();if(i.applyTemplate(ge.hostElement+" "+ge.content+" "+ge.content+" "+z.hostElement,s,{_root:"root",_eSz:"sz",_eCt:"cells",_fCt:"fcells",_eTL:"tl",_eBL:"bl",_eCHdr:"ch",_eRHdr:"rh",_eCFtr:"cf",_eTLCt:"tlcells",_eBLCt:"blcells",_eCHdrCt:"chcells",_eCFtrCt:"cfcells",_eRHdrCt:"rhcells",_eMarquee:"marquee",_eFocus:"focus",_eNoData:"no-data",_srFocusHelper:"sr-focus-helper",_srMessageHelper:"sr-message-helper",_imeContainer:"ime-container"}),B(i._root.parentElement,{position:"relative",left:"0",top:"0",width:"100%",height:"100%",overflow:"hidden",minWidth:"inherit",minHeight:"inherit",maxWidth:"inherit",maxHeight:"inherit"}),B(i._root,{position:"absolute",left:"0",top:"0",width:"100%",height:"100%",minWidth:"inherit",minHeight:"inherit",maxWidth:"inherit",maxHeight:"inherit",overflow:"auto",webkitOverflowScrolling:"touch"}),B(i._eCt,{position:"absolute"}),B(i._eMarquee,{display:"none"}),B(i._eMarquee.firstChild,{width:"100%",height:"100%"}),B(i._fCt,{position:"absolute",top:0,left:0,overflow:"hidden",pointerEvents:"none"}),B(i._eFocus,{position:"fixed",left:"-32000px"}),B(i._eSz,{position:"relative",visibility:"hidden"}),B(i._srFocusHelper,{position:"fixed",height:"100%"}),[i._eRHdr,i._eCFtr,i._eCHdr,i._eBL,i._eTL].forEach(function(a){B(a,{position:"absolute",overflow:"hidden",outline:"none"}),B(a.firstElementChild,{position:"relative"})}),[i._eMarquee,i._fCt,i._eSz].forEach(function(a){S(a,"aria-hidden",!0)}),i.itemsSource&&i.itemsSource.length>0&&(S(i._root,"role","rowgroup"),S(i._eCHdr,"role","rowgroup")),bi()||Gs()){var l=i._eMarquee;["click","dblclick","mousedown","mouseup"].forEach(function(a){i.addEventListener(l,a,function(u){var h=l.style.display;l.style.display="none";var c=document.elementFromPoint(u.clientX,u.clientY);l.style.display=h;var d=document.createEvent("Event");d.initEvent(a,!0,!0);for(var f in u)try{d[f]=u[f]}catch{}c.dispatchEvent(d)})})}return o.tabIndex=-1,i._uid=ln(),i._ariaId=t._FLEXGRID_COUNT,t._FLEXGRID_COUNT++,i.deferUpdate(function(){var a=i._getDefaultRowHeight();i._rows=new ki(i,a),i._cols=new Yi(i,4*a),i._hdrRows=new ki(i,a),i._hdrCols=new Yi(i,Math.round(1.25*a)),i._ftrRows=new ki(i,a);var u=P;i._gpTL=new yt(i,u.TopLeft,i._hdrRows,i._hdrCols,i._eTLCt),i._gpCHdr=new yt(i,u.ColumnHeader,i._hdrRows,i._cols,i._eCHdrCt),i._gpRHdr=new yt(i,u.RowHeader,i._rows,i._hdrCols,i._eRHdrCt),i._gpCells=new yt(i,u.Cell,i._rows,i._cols,i._eCt),i._gpBL=new yt(i,u.BottomLeft,i._ftrRows,i._hdrCols,i._eBLCt),i._gpCFtr=new yt(i,u.ColumnFooter,i._ftrRows,i._cols,i._eCFtrCt),i.activePanel=i._gpCells,i._hdrRows.push(new _t),i._hdrCols.push(new Je({align:"center"})),i._cf=new Pe,i._keyHdl=new Fl(i),i._mouseHdl=new Vl(i),i._edtHdl=new Bl(i),i._selHdl=i._createSelHdl(),i._addHdl=new Hl(i),i._grpHdl=new kl(i),i._mrgMgr=new co,i._oMgr=new fo,i._bndSortConverter=i._sortConverter.bind(i),i._errorTip=new er({isContentHtml:!1,showDelay:50,cssClass:z.errorTip}),i._errorTip._tooltipVisibleOnHover=!1,i._errorTip.forceRecreate=!0,i.selectionMode=ae.CellRange,i._root.tabIndex=-1,i.rows.collectionChanged.addHandler(i._updateRowCount.bind(i)),i.columns.collectionChanged.addHandler(i._updateColumnCount.bind(i)),i.columnHeaders.rows.collectionChanged.addHandler(i._updateRowCount.bind(i)),i.addEventListener(i._eFocus,"focus",function(h){i.rows.length||i._eNoData.focus()}),i.initialize(n)}),i.addEventListener(i._root,"scroll",function(a){if(Ci()&&i._handleSpaceDisorderOnScrollToEnd(),i._updateScrollPosition()||i._forceScrollUpdate){var u=i.activeEditor,h=i.activeCell,c=h?h.className:null,d=Bi(),f=d&&d.InputNumberClsNames.numeric;if((fe(h,"wj-detail")||fe(u,f))&&H.sharedState.InvalidScroll){setTimeout(function(){H.sharedState.InvalidScroll=!1},0);return}i._forceScrollUpdate||H.sharedState.InvalidScroll||i.finishEditing(),i._forceScrollUpdate=!1;var p=i._edtHdl._getCustomEditor(i),_=!(!u||!p)&&p.isOpen,v=i._edtHdl.validate;if(!_||!v){i.workingAs==="React"?requestAnimationFrame(function(){i._updateContent(!0),setTimeout(function(){H.sharedState.InvalidScroll=!1},0)}):(i._updateContent(!0),setTimeout(function(){H.sharedState.InvalidScroll=!1},0));var b=i.activeEditor,m=i.activeCell;b&&m&&u&&c?(b.value=u.value,m.className=c,i._setFocusNoScroll(b)):!b||m||H.sharedState.InvalidScroll||i.finishEditing(!0)}i.columns._frozenInternal&&setTimeout(function(){var w=i.columnHeaders.hostElement.style,g=parseInt(w.left),y=i._ptScrl.x;Math.abs(g-y)>1&&i.invalidate()}),setTimeout(function(){i._isScrollingByWheel=!1,H.sharedState.InvalidScroll=!1},0)}}),i.addEventListener(o,"focus",function(a){if(o.tabIndex>-1){var u=a.target;u instanceof HTMLElement&&u.tabIndex<0&&i._setFocus(!0)}},!0),i.addEventListener(window,"resize",function(){hi()||(i.finishEditing(!1),i.invalidate())}),i.addEventListener(document,"keydown",function(a){a.key==="Tab"&&(a.shiftKey?i._isShiftTab=!0:i._isShiftTab=!1)}),i.addEventListener(i._srFocusHelper,"focus",function(a){var u=br(document.body),h=u.indexOf(a.target),c=i._isShiftTab?h-1:h+1;h>-1&&u[c]?u[c].focus():a.target.blur()}),i.resizingColumn.addHandler(i._handleRowColResizing),i.resizingRow.addHandler(i._handleRowColResizing),i.resizedColumn.addHandler(i._getRowColResizedHandler(i,!1)),i.resizedRow.addHandler(i._getRowColResizedHandler(i,!0)),i.updatedLayout.addHandler(i.handleLoad.bind(i)),i.refreshed.addHandler(i._handleRefreshForA11y.bind(i)),i}return Object.defineProperty(t,"controlTemplate",{get:function(){return t._ctrlTemplate||(t._ctrlTemplate='<div>  <div wj-part="ch"><div wj-part="chcells" class="'+z.colHeaders+'"></div></div><div wj-part="root"><div wj-part="cells" class="'+z.cells+'"></div><div wj-part="no-data" class="'+z.noDataOverlay+'" tabindex="-1"></div><div wj-part="marquee" class="'+z.marquee+'"><div></div></div><div role="row" class="'+z.screenReaderOnly+'"><div wj-part="sr-focus-helper" tabindex="0" role="gridcell" aria-label="Focus helper"></div><div tabindex="-1" role="gridcell" aria-label="Message helper"><div wj-part="sr-message-helper" tabindex="-1" role="status" aria-live="polite" aria-atomic="true"></div></div></div><div role="row"><div wj-part="ime-container" role="gridcell"></div></div></div><div wj-part="fcells" aria-hidden="true" class="'+z.cells+" "+z.frozenClone+'"></div><div wj-part="rh"><div wj-part="rhcells" class="'+z.rowHeaders+'"></div></div><div wj-part="cf"><div wj-part="cfcells" class="'+z.colFooters+'"></div></div><div wj-part="bl"><div wj-part="blcells" class="'+z.bottomLeft+'"></div></div><div wj-part="tl"><div wj-part="tlcells" class="'+z.topLeft+'"></div></div><div role="row"><div wj-part="focus" class="'+z.cell+'" role="gridcell">0</div></div><div wj-part="sz"></div></div>'),t._ctrlTemplate},set:function(e){t._ctrlTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activePanel",{get:function(){return this._activePanel},set:function(e){this._activePanel=Ve(e,yt,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activePanelType",{get:function(){return this._activePanel?this._activePanel.cellType:P.Cell},enumerable:!0,configurable:!0}),t.prototype._handleSpaceDisorderOnScrollToEnd=function(){var e=new wt(this._szClientSB.width-(this._root.offsetWidth-this._root.clientWidth),this._szClientSB.height-(this._root.offsetHeight-this._root.clientHeight)),n=this._gpCells.width-e.width+this._ptScrl.x,i=this._gpCells.height-e.height+this._eCFtr.clientHeight+this._ptScrl.y,o=this._rtlDir==1?-1:1,s=o*(this._root.scrollLeft-this._ptLastScrl.x),l=this._root.scrollTop-this._ptLastScrl.y,a=new Ye(this._ptLastScrl.x+s,this._ptLastScrl.y+l),u=this._gpCells.width+this._eRHdr.clientWidth-this._root.clientWidth,h=this._gpCells.height+this._eCHdr.clientHeight-this._root.clientHeight+this._eCFtr.clientHeight;if(this._ptLastScrl=new Ye(this._root.scrollLeft,this._root.scrollTop),(n<1||a.x>u)&&s>0){var c=o*(this._gpCells.width-e.width);if(c!=this._root.scrollLeft)return this._szClient=e,this._root.scrollLeft=c,!0}else if((i<1||a.y>h)&&l>0){var d=this._gpCells.height-(e.height-this._eCFtr.clientHeight);if(this._root.scrollTop!=d)return this._szClient=e,this._root.scrollTop=d,!0}return!1},t.prototype._handleResize=function(){var e=this;this._rcBounds=null,this.activeEditor&&this.isTouching||this._touchEdit?setTimeout(function(){e.activeEditor||(e._touchEdit=!0,e.startEditing(!0))},50):r.prototype._handleResize.call(this),this._touchEdit=!1},Object.defineProperty(t.prototype,"headersVisibility",{get:function(){return this._hdrVis},set:function(e){(e=pe(e,le))!=this._hdrVis&&(this._hdrVis=e,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headersFocusability",{get:function(){return this._hdrFoc},set:function(e){(e=pe(e,Rt))!=this._hdrFoc&&(this._hdrFoc=e,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stickyHeaders",{get:function(){return this._stickyHdr},set:function(e){e!=this._stickyHdr&&(this._stickyHdr=M(e),this._updateStickyHeaders(),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxContent",{get:function(){return this._maxContent},set:function(e){e!=this._maxContent&&(this._maxContent=M(e),this._adjustMaxContentWidth(),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"preserveSelectedState",{get:function(){return this._pSel},set:function(e){this._pSel=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"preserveOutlineState",{get:function(){return this._pOutline},set:function(e){this._pOutline=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchorCursor",{get:function(){return this._anchorCursor},set:function(e){this._anchorCursor=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"noDataOverlayContent",{get:function(){return this._noDataOverlayContent},set:function(e){this._noDataOverlayContent!=e&&(this._noDataOverlayContent=G(e),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"copyHeaders",{get:function(){return this._copyHeaders},set:function(e){this._copyHeaders=pe(e,le)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lazyRender",{get:function(){return this._lazyRender},set:function(e){this._lazyRender=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"refreshOnEdit",{get:function(){return this._refreshOnEdit},set:function(e){this._refreshOnEdit=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"virtualizationThreshold",{get:function(){return this._vt},set:function(e){this._vt=e,_e(e)?this._vtRows=this._vtCols=V(e):e?Ge(e)&&e.length==2?(this._vtRows=V(e[0]),this._vtCols=V(e[1])):K(!1,"virtualizationThreshold should be a number or an array with two numbers."):this._vtRows=this._vtCols=0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoGenerateColumns",{get:function(){return this._autoGenCols},set:function(e){this._autoGenCols=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoClipboard",{get:function(){return this._autoClipboard},set:function(e){this._autoClipboard=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"expandSelectionOnCopyPaste",{get:function(){return this._xOnCopyPaste},set:function(e){this._xOnCopyPaste=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoScroll",{get:function(){return this._autoScroll},set:function(e){this._autoScroll=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoSearch",{get:function(){return this._autoSearch},set:function(e){this._autoSearch=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"caseSensitiveSearch",{get:function(){return this._caseSensitive},set:function(e){this._caseSensitive=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnLayout",{get:function(){var e,n=this._hasColumnGroups(),i=n?Ei:Je,o=n?"columnGroups":"columns",s=t._getSerializableProperties(i),l=n?["collapseTo"]:[],a=["size"],u=new i,h=n?this.getColumnGroups():this.columns,c=function(f){var p=[];return f.forEach(function(_){var v={};if(s.forEach(function(m){var w=_[m];(function(g,y){return y!=u[g]&&a.indexOf(g)<0&&(In(y)||l.indexOf(g)>-1)})(m,w)&&(v[m]=w)}),n){var b=_.columns;b.length&&(v.columns=c(b))}p.push(v)}),p},d=c(h);return JSON.stringify(((e={})[o]=d,e))},set:function(e){var n=this,i=JSON.parse(G(e));K(i,"Invalid columnLayout data."),this.columns.deferUpdate(function(){n.columns.clear(),n._hasColumnGroups()&&(n.columnGroups=new Vi),n.initialize(i)})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnGroups",{get:function(){return this._grpHdl.getGroupDefinitions()},set:function(e){this.columns.clear(),this._grpHdl.createColumnGroups(vt(e))},enumerable:!0,configurable:!0}),t.prototype.getColumnGroups=function(){return this._grpHdl.columnGroups},Object.defineProperty(t.prototype,"isReadOnly",{get:function(){return this._readOnly},set:function(e){e!=this._readOnly&&(this._readOnly=M(e),this.finishEditing(),this.invalidate(!0),this._addHdl.updateNewRowTemplate(),ee(this.hostElement,q.readOnly,this.isReadOnly),this._setAria("aria-readonly",this.isReadOnly?"true":"false"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bigCheckboxes",{get:function(){return this._bigChecks},set:function(e){this._bigChecks=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skipMerged",{get:function(){return this._skipMerged},set:function(e){this._skipMerged=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pasteEmptyCells",{get:function(){return this._pasteEmptyCells},set:function(e){this._pasteEmptyCells=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDisabled",{get:function(){return this._e&&this._e.getAttribute("disabled")!=null},set:function(e){if((e=M(e,!0))!=this.isDisabled){var n=this._e;n&&(Ct(n,!e),this._updateTabIndex(),this.invalidate())}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imeEnabled",{get:function(){return this._imeHdl!=null},set:function(e){if(M(e)!=this.imeEnabled&&this.finishEditing()){var n=this.containsFocus();this._imeHdl&&(this._imeHdl.dispose(),this._imeHdl=null),e&&(this._imeHdl=new xr(this)),n&&this.focus()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowResizing",{get:function(){return this._alResizing},set:function(e){this._alResizing=pe(e,Jt)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"deferResizing",{get:function(){return this._deferResizing},set:function(e){this._deferResizing=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoSizeMode",{get:function(){return this._autoSizeMode},set:function(e){this._autoSizeMode=pe(e,ui)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoRowHeights",{get:function(){return this._autoHeights},set:function(e){this._autoHeights=M(e),this._autoRowHeights()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"quickAutoSize",{get:function(){return this._quickSize},set:function(e){this._quickSize=M(e,!0)},enumerable:!0,configurable:!0}),t.prototype._getQuickAutoSize=function(){return st(this._quickSize)?this._quickSize:!this.formatItem.hasHandlers&&this.itemFormatter==null},Object.defineProperty(t.prototype,"allowSorting",{get:function(){return this._alSorting},set:function(e){st(e)&&(e=e?fi.SingleColumn:fi.None),this._alSorting=pe(e,fi)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sortOrder",{get:function(){return this._sortOrder},set:function(e){e=pe(e,Et),this._sortOrder!=e&&(this._sortOrder=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowPinning",{get:function(){return this._alPinning},set:function(e){e!=this._alPinning&&(st(e)&&(e=e?Nt.SingleColumn:Nt.None),this._alPinning=pe(e,Nt),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowAddNew",{get:function(){return this._alAddNew},set:function(e){e!=this._alAddNew&&(this._alAddNew=M(e),this._addHdl.updateNewRowTemplate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"newRowAtTop",{get:function(){return this._addHdl.newRowAtTop},set:function(e){this._addHdl.newRowAtTop=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowDelete",{get:function(){return this._alDelete},set:function(e){e!=this._alDelete&&(this._alDelete=M(e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowMerging",{get:function(){return this._alMerging},set:function(e){(e=pe(e,on))!=this._alMerging&&(this._alMerging=e,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showSelectedHeaders",{get:function(){return this._ssHdr},set:function(e){(e=pe(e,le))!=this._ssHdr&&(this._ssHdr=e,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showMarquee",{get:function(){return this._shMarquee},set:function(e){e!=this._shMarquee&&(this._shMarquee=M(e),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showPlaceholders",{get:function(){return this._shPlcHld},set:function(e){this._shPlcHld=M(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showSort",{get:function(){return this._shSort},set:function(e){e!=this._shSort&&(this._shSort=M(e),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showGroups",{get:function(){return this._shGroups},set:function(e){e!=this._shGroups&&(this._shGroups=M(e),this._bindGrid(!1))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alternatingRowStep",{get:function(){return this._altStep},set:function(e){e!=this._altStep&&(this._altStep=Fe(e,!1,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showAlternatingRows",{get:function(){return this._altStep>0},set:function(e){gr("showAlternatingRows","alternatingRowStep"),this.alternatingRowStep=e?1:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showErrors",{get:function(){return this._shErr},set:function(e){e!=this._shErr&&(this._clearCells(),this._shErr=M(e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"errorTip",{get:function(){return this._errorTip},set:function(e){e!=this._errorTip&&(this._clearCells(),this._errorTip=Ve(e,er,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemValidator",{get:function(){return this._itemValidator},set:function(e){e!=this.itemValidator&&(this._itemValidator=Le(e),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validateEdits",{get:function(){return this._valEdt},set:function(e){this._setvalidateEdits(e)},enumerable:!0,configurable:!0}),t.prototype._setvalidateEdits=function(e){this._valEdt=M(e)},Object.defineProperty(t.prototype,"groupHeaderFormat",{get:function(){return this._gHdrFmt},set:function(e){e!=this._gHdrFmt&&(this._gHdrFmt=G(e),this._bindGrid(!1))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowDragging",{get:function(){return this._alDragging},set:function(e){(e=pe(e,li))!=this._alDragging&&(this._alDragging=e,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ariaLabel",{get:function(){return this._ariaLabel?this._ariaLabel:this._gridRoleElement()?this._gridRoleElement().getAttribute("aria-label"):this._ariaLabel},set:function(e){this._ariaLabel=e,this._setAria("aria-label",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemsSource",{get:function(){return this._items},set:function(e){var n=this;if(e!=this._items){var i=new He;if(this.onItemsSourceChanging(i)){var o=0;if(this._cv&&(o=(s=this._cv).currentPosition&&this._getRowIndex(s.currentPosition),this._isServerCollectionView(this._cv)&&((a=this.collectionView).loading.removeHandler(null,this),a.loaded.removeHandler(null,this)),s.currentChanged.removeHandler(null,this),s.collectionChanged.removeHandler(null,this),s instanceof Zt&&s.sortConverter==this._bndSortConverter&&(s.sortConverter=null),this._cv=null),this._items=e,this._cv=this._getCollectionView(e),this._cv&&!Sn(this._cv.currentPosition)&&(this._cv.currentPosition=o||0),this._lastCount=0,this._cv){var s,l;if((s=this._cv).collectionChanged.addHandler(function(u,h){return n._cvCollectionChanged(u,h)},this),this._isServerCollectionView(this._cv)){var a;(a=this.collectionView).groupLazyLoading&&this._isFlexSheetInstance()&&console.error("groupLazyLoading is not supported for FlexSheet."),a.loading.addHandler(function(u,h){l=n.selection},this),a.loaded.addHandler(function(u,h){return n._restCvLoadedHandler(u,h,l)},this)}s.currentChanged.addHandler(function(u,h){return n._cvCurrentChanged(u,h)},this),s instanceof Zt&&(e&&(s.trackChanges=!!e.trackChanges),s.sortConverter&&!this._isFlexSheetInstance()||(s.sortConverter=this._bndSortConverter))}this._isISChanging=!0,this.disposed||this._bindGrid(!0),this._isISChanging=!1,this.onItemsSourceChanged(i)}}},enumerable:!0,configurable:!0}),t.prototype._restCvLoadedHandler=function(e,n,i){var o=this;e.groupLazyLoading&&this.deferUpdate(function(){o._isGrpClpsChanging=!0,o.rows.deferUpdate(function(){for(var s=0;s<o.rows.length;s++)o.rows[s]instanceof we&&Object.keys(o.rows[s].dataItem.items[0]).length==o.rows[s].dataItem.level+1&&(o.rows[s].isCollapsed=!0)}),o._isGrpClpsChanging=!1}),e._virtualization&&(e.groupDescriptions.length&&this.deferUpdate(function(){o._loadVirtualizedItems()}),this._isGrpClpsChanging=!1),(e._virtualization||e.groupLazyLoading)&&this.selection&&this.selection.row==-1&&i&&i.row!=-1&&this.select(i,!1,this.cells),this._initialRestCvLoad&&(this.selectionMode==0&&this.selection.row!=-1&&this.select(-1,0),this._initialRestCvLoad=!1,this._isFlexSheetInstance()&&(this._selHdl.selection.col=this._selHdl.selection.col2=0))},t.prototype._loadVirtualizedItems=function(){for(var e=this.viewRange,n=this.collectionView,i=null,o=e.row;o<=e.row2;o++)!(this.rows[o]instanceof we)&&this.rows[o].dataItem instanceof ll&&this.rows[o].visibleIndex!==-1?i===null&&(i=o):i!==null&&(n.setWindow(i-this._getGroupCount(i),o-1),i=null);i!==null&&n.setWindow(i-this._getGroupCount(i),e.row2)},Object.defineProperty(t.prototype,"collectionView",{get:function(){return this._cv},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editableCollectionView",{get:function(){return Ft(this._cv,"IEditableCollectionView")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"childItemsPath",{get:function(){return this._childItemsPath},set:function(e){e!=this._childItemsPath&&(K(e==null||Ge(e)||te(e),"childItemsPath should be an array or a string."),this._childItemsPath=e,this._bindGrid(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rowHeaderPath",{get:function(){return this._rowHdrPath?this._rowHdrPath.path:null},set:function(e){e!=this.rowHeaderPath&&(e=G(e),this._rowHdrPath=e?new nt(e):null,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cells",{get:function(){return this._gpCells},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnHeaders",{get:function(){return this._gpCHdr},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnFooters",{get:function(){return this._gpCFtr},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rowHeaders",{get:function(){return this._gpRHdr},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeftCells",{get:function(){return this._gpTL},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomLeftCells",{get:function(){return this._gpBL},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columns",{get:function(){return this._cols},enumerable:!0,configurable:!0}),t.prototype.getColumn=function(e,n){if(this._hasColumnGroups()&&n){var i=this.getColumnGroups();return i!==null?i.getColumn(e):null}return this.columns.getColumn(e)},Object.defineProperty(t.prototype,"frozenCells",{get:function(){return{top:this.rows.frozen,bottom:this.rows.frozenEnd,left:this.columns.frozen,right:this.columns.frozenEnd}},set:function(e){if(this._isFrozenObjectAllowed()){K(typeof e=="object","Object of type IGridFreezeOptions expected");var n={top:e.top?e.top:0,bottom:e.bottom?e.bottom:0,left:e.left?e.left:0,right:e.right?e.right:0},i=0;n.top?(i=this.rows.getDetailRowCountUptoRow(n.top),n.top+=i):n.bottom&&(i=this.rows.getDetailRowCountUptoRow(-n.bottom),n.bottom+=i),this.rows.frozen=n.top,this.rows.frozenEnd=n.bottom,i&&(this.rows.frozenDetailChildren=i),this.columns.frozen=n.left,this.columns.frozenEnd=n.right}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frozenRows",{get:function(){return this.rows.frozen-this.rows.frozenDetailChildren},set:function(e){var n=this.rows.getDetailRowCountUptoRow(e);this.rows.frozen=e+n,this.rows.frozenDetailChildren=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frozenColumns",{get:function(){return this.columns.frozen},set:function(e){this.columns.frozen=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cloneFrozenCells",{get:function(){return this._fzClone},set:function(e){e!=this._fzClone&&(Ot(this._fCt,null),this._fzClone=M(e,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sortRowIndex",{get:function(){return this._sortRowIndex},set:function(e){e!=this._sortRowIndex&&(this._sortRowIndex=V(e,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editColumnIndex",{get:function(){return this._editColIndex},set:function(e){e!=this._editColIndex&&(this._editColIndex=V(e,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollPosition",{get:function(){return this._ptScrl.clone()},set:function(e){var n=this._root,i=-e.x;if(this.rightToLeft)switch(t._getRtlMode()){case"rev":i=n.scrollWidth-n.clientWidth+e.x;break;case"neg":i=e.x;break;default:i=-e.x}n.scrollLeft!=i&&(n.scrollLeft=i),n.scrollTop!=-e.y&&(n.scrollTop=-e.y),this._updateScrollPosition()&&(this._forceScrollUpdate=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"commitEmptyEdits",{get:function(){return this._commitEmptyEdits},set:function(e){e!=this._commitEmptyEdits&&(this._commitEmptyEdits=M(e),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clientSize",{get:function(){return this._szClient},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"controlRect",{get:function(){return this._rcBounds||(this._rcBounds=Zn(this._root)),this._rcBounds},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollSize",{get:function(){return new wt(this._gpCells.width,this._heightBrowser)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewRange",{get:function(){return this._gpCells.viewRange},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cellFactory",{get:function(){return this._cf},set:function(e){e!=this._cf&&(this._clearCells(),this._cf=Ve(e,Pe,!1))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemFormatter",{get:function(){return this._itemFormatter},set:function(e){e!=this._itemFormatter&&(this._clearCells(),this._itemFormatter=Le(e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"groupSummaryPosition",{get:function(){return this.childItemsPath?Pt.Top:this._groupSummaryPosition},set:function(e){e!==this._groupSummaryPosition&&(this._groupSummaryPosition=pe(e,Pt,!1),this._bindGrid(!1))},enumerable:!0,configurable:!0}),t.prototype.canEditCell=function(e,n){return this._edtHdl._allowEdit(e,n)},t.prototype.getCellData=function(e,n,i){return this.cells.getCellData(e,n,i)},t.prototype.getRowDataItem=function(e,n){return this.rows[V(e,!1,!0)].dataItem},t.prototype._getRowData=function(e){return this.cells._getRowData(e)},t.prototype.getCellBoundingRect=function(e,n,i){return this.cells.getCellBoundingRect(e,n,i)},t.prototype.setCellData=function(e,n,i,o,s){return o===void 0&&(o=!0),s===void 0&&(s=!0),this.cells.setCellData(e,n,i,o,s)},t.prototype.hitTest=function(e,n){return _e(e)&&_e(n)&&(e=new Ye(e,n)),st(n)&&n&&(this._rcBounds=null),new Dn(this,e)},t.prototype.getClipString=function(e,n,i,o){var s;return s=this.skipMerged?Yt.SkipMerged:n==null||st(n)?n?Yt.CSV:Yt.Default:n,K(_e(s),"Unexpected value for ClipStringOptions parameter."),this._edtHdl.getClipString(e,s,i,o)},t.prototype.setClipString=function(e,n){this._edtHdl.setClipString(e,n)},t.prototype.focus=function(e){this.isDisabled||this._setFocus(e)},t.prototype.dispose=function(){var e=this;this.disposed=!0,this._afClip&&(cancelAnimationFrame(this._afClip),this._afClip=null),this.finishEditing(!0),this.itemsSource=null,this.rows.clear(),this.columns.clear(),this._hdrRows.clear(),this._hdrCols.clear(),this._ftrRows.clear(),this._invalidateTimer&&(clearTimeout(this._invalidateTimer),this._invalidateTimer=null),this.collectionView&&(this.collectionView.collectionChanged.removeHandler(this._updateRowCount),this.collectionView.collectionChanged.removeHandler(this._updateColumnCount)),this._errorTip&&(this._errorTip=null),["_gpTL","_gpCHdr","_gpRHdr","_gpCells","_gpBL","_gpCFtr"].forEach(function(n){var i=e[n];i&&i.dispose(),e[n]=null}),["_root","_eTL","_eTLCt","_eCHdr","_eCHdrCt","_eRHdr","_eRHdrCt","_eCt","_eBL","_eBLCt","_eCFtrCt","_eCFtr","_fCt","_eFocus","_eSz","_eMarquee","_eNoData","_srFocusHelper","_imeContainer","_srMessageHelper"].forEach(function(n){return e[n]=null}),this._activeCell=null,this._activePanel=null,t._ctrlTemplate=null,["_mouseHdl","_keyHdl","_edtHdl","_selHdl","_addHdl","_grpHdl","_imeHdl","_mrgMgr","_oMgr"].forEach(function(n){e[n]&&e[n].dispose&&e[n].dispose(),e[n]=null}),Pe.dispose(),r.prototype.dispose.call(this)},t.prototype.refresh=function(e){e===void 0&&(e=!0),r.prototype.refresh.call(this,e),this.finishEditing(),e&&(this._updateColumnTypes(),this.scrollPosition=this._ptScrl,this._updateDefaultSizes(),clearTimeout(this._toInv),this._toInv=null),this.refreshCells(e);var n=this._e;n&&(this._szCtl=new wt(n.offsetWidth,n.offsetHeight))},t.prototype.refreshCells=function(e,n,i){this.isUpdating||(e?this._updateLayout():this._updateContent(n,i))},t.prototype.refreshRange=function(e){for(var n=e.topRow;n<=e.bottomRow;n++)for(var i=e.leftCol;i<=e.rightCol;i++){var o=this.cells.getCellElement(n,i);if(o){var s=o[yt._INDEX_KEY];this.cellFactory.updateCell(this.cells,n,i,o,s.rng)}}this._useFrozenDiv()&&this._updateFrozenCells(!0,!0)},t.prototype.autoSizeColumn=function(e,n,i){n===void 0&&(n=!1),i===void 0&&(i=4),this.autoSizeColumns(e,e,n,i)},t.prototype.autoSizeColumns=function(e,n,i,o){var s=this;i===void 0&&(i=!1),o===void 0&&(o=4);var l=0,a=i?this.topLeftCells:this.columnHeaders,u=i?this.bottomLeftCells:this.columnFooters,h=i?this.rowHeaders:this.cells,c=this.viewRange;e=e==null?0:Fe(e),n=n==null?h.columns.length-1:Fe(n),c.row=Math.max(0,c.row-1e3),c.row2=Math.min(c.row2+1e3,this.rows.length-1),this.finishEditing()&&this.columns.deferUpdate(function(){B(s._eCt,{width:s._gpCells.width});for(var d=Oe("<div "+t._WJS_MEASURE+'="true"/>',h.hostElement,{visibility:"hidden"}),f=s._getCanvasContext(),p=e;p<=n&&p>-1&&p<h.columns.length;p++){var _=h.columns[p];if(_.isVisible){if(l=0,s.autoSizeMode&ui.Headers){for(var v=0;v<a.rows.length;v++)a.rows[v].isVisible&&(l=Math.max(s._getDesiredWidth(a,v,p,d),l));for(v=0;v<u.rows.length;v++)u.rows[v].isVisible&&(l=Math.max(s._getDesiredWidth(u,v,p,d),l))}if(s.autoSizeMode&ui.Cells&&c.row>-1&&c.row2>-1)if(_._getQuickAutoSize())v=s._getWidestRow(h,c,p,f),l=Math.max(s._getDesiredWidth(h,v,p,d),l);else for(v=c.row;v<=c.row2&&v<h.rows.length;v++)h.rows[v].isVisible&&(l=Math.max(s._getDesiredWidth(h,v,p,d),l));l>0&&(_.width=l+o+2)}}s.cellFactory.disposeCell(d),Ne(d)})},t.prototype.autoSizeRow=function(e,n,i){n===void 0&&(n=!1),i===void 0&&(i=0),this.autoSizeRows(e,e,n,i)},t.prototype.autoSizeRows=function(e,n,i,o){var s=this;i===void 0&&(i=!1),o===void 0&&(o=0);var l=0,a=i==1?this.topLeftCells:i==null?this.bottomLeftCells:this.rowHeaders,u=i==1?this.columnHeaders:i==null?this.columnFooters:this.cells;if(o=V(o),e=e==null?0:Fe(e),(n=n==null?u.rows.length-1:Fe(n))>=e&&this.finishEditing()){B(this._eCt,{width:this._gpCells.width}),this.cachedHeights={};var h=Oe("<div "+t._WJS_MEASURE+'="true"/>',u.hostElement,{visibility:"hidden"});this.rows.deferUpdate(function(){for(var c={},d=s._autoSizeMode,f=ui,p=e;p<=n&&p>-1&&p<u.rows.length;p++)u.rows[p].isVisible&&(l=0,d&f.Headers&&(l=s._getDesiredRowHeight(a,p,h,c)),d&f.Cells&&(l=Math.max(s._getDesiredRowHeight(u,p,h,c),l)),l>0&&(u.rows[p].height=l+o))}),this.cellFactory.disposeCell(h),Ne(h)}},Object.defineProperty(t.prototype,"treeIndent",{get:function(){return this._indent},set:function(e){e!=this._indent&&(this._indent=V(e,!1,!0),this.columns.onCollectionChanged())},enumerable:!0,configurable:!0}),t.prototype.collapseGroupsToLevel=function(e){var n=this;this.finishEditing()&&(this._isServerCollectionView(this._cv)&&(this._grpClpsChng=!0),this.deferUpdate(function(){var i=n.rows;i.deferUpdate(function(){for(var o=0;o<i.length;o++){var s=i[o];s instanceof we&&!s.isSummary&&(s.isCollapsed=s.level>=e)}})})),this._grpClpsChng=!1},Object.defineProperty(t.prototype,"selectionMode",{get:function(){return this._selHdl.selectionMode},set:function(e){(e=pe(e,ae))!=this.selectionMode&&(this._selHdl.selectionMode=e,this._updateTabIndex())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selection",{get:function(){return this._selHdl.selection.clone()},set:function(e){this._selHdl.selection=e},enumerable:!0,configurable:!0}),t.prototype.select=function(e,n,i){return n===void 0&&(n=!0),this._selHdl.select(e,n,!1,i)},t.prototype.selectAll=function(){var e=this.rows.length,n=this.columns.length;return!(!e||!n)&&this.select(new j(0,0,e-1,n-1),!1)},t.prototype.getSelectedState=function(e,n){return this.cells.getSelectedState(e,n)},Object.defineProperty(t.prototype,"selectedRows",{get:function(){var e=this,n=this.selectionMode,i=this.rows.filter(function(s){return s.isSelected});if(i.length==0&&n!=ae.None&&n!=ae.ListBox){var o=[];this.selectedRanges.forEach(function(s){for(var l=s.topRow;l<=s.bottomRow&&l>-1&&l<e.rows.length;l++)o.indexOf(l)<0&&o.push(l)}),o.sort(function(s,l){return s-l}),i=o.map(function(s){return e.rows[s]})}return i},set:function(e){var n=this;K(this.selectionMode==ae.ListBox,"This property can be set only in ListBox mode."),e=vt(e),this.deferUpdate(function(){for(var i=0,o=!0;i<n.rows.length;i++){var s=n.rows[i],l=e&&e.indexOf(s)>-1;l&&o&&(o=!1,n.select(i,n.selection.col)),s.isSelected=l}})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedItems",{get:function(){var e=[];return this.selectedRows.forEach(function(n){var i=n?n.dataItem:null;i&&e.indexOf(i)<0&&e.push(i)}),e},set:function(e){var n=this;K(this.selectionMode==ae.ListBox,"This property can be set only in ListBox mode."),e=vt(e),this.deferUpdate(function(){for(var i=0,o=!0;i<n.rows.length;i++){var s=n.rows[i],l=e&&e.indexOf(s.dataItem)>-1;l&&o&&(o=!1,n.select(i,n.selection.col)),s.isSelected=l}})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedRanges",{get:function(){var e=[this.selection];return this._selHdl.extendedSelection.forEach(function(n){e.push(n)}),e},set:function(e){if((e=vt(e))&&e.length>0&&(this.select(e[0]),this.selectionMode==ae.MultiRange)){var n=this._selHdl.extendedSelection;n.deferUpdate(function(){n.clear();for(var i=1;i<e.length;i++)n.push(e[i])})}},enumerable:!0,configurable:!0}),t.prototype.scrollIntoView=function(e,n,i){var o=this;(this._maxOffsetY==null||this._rows._dirty||this._cols._dirty)&&e>-1&&this._updateLayout();var s=this.scrollPosition,l=this._szClient,a=l.width,u=l.height-this._gpCFtr.rows.getTotalSize(),h=this.cells._getFrozenPos();e=Fe(e),te(n)&&(n=this.columns.indexOf(n)),n=Fe(n),e=e>=this.rows.length?-1:e,n=n>=this.columns.length?-1:n;var c=null;try{var d=this.getMergedRange(this.cells,e,n,!1);c=d;var f=this.cells._getFrozenPos();this.rows._frozenInternal>=0?d&&d.rowSpan>1&&this._rows[e].pos>f.y+-this.scrollPosition.y&&this._rows[e].renderHeight*d.rowSpan<this.hostElement.clientHeight&&this._edtHdl._getCustomEditor(this)&&(e=d.bottomRow):d&&d.rowSpan>1&&this._rows[d.bottomRow].pos+this._rows[d.bottomRow].renderHeight>f.y+-this.scrollPosition.y&&this._rows[d.bottomRow].pos-this._rows[d.topRow].pos+this._rows[d.bottomRow].renderHeight<this.clientSize.height&&(e=d.bottomRow)}catch{}var p=this._rows[e];if(e>-1&&e<this._rows.length&&!this._rows.isFrozen(e)){var _=this._getCssPage(p.pos);if(_!=this._cssPage){for(var v=this._maxOffsetY,b=Math.round(v*_);b>p.pos;_-=.1)b=Math.round(v*_);this._offsetY=b}var m=p.pos-this._offsetY,w=m+p.renderSize;w>u-s.y&&(s.y=Math.max(-m,u-w)),this.rows._frozenInternal>=0?m-h.y<-s.y&&(s.y=-(m-h.y)):(p.pos<-s.y&&(s.y=-p.pos),w+s.y-h.y>0&&(s.y-=w+s.y-h.y),Math.abs(s.y-(this._ptScrl.y-this._spDiff.y))==0&&(s.y=this._ptScrl.y)),_!=this._cssPage&&(this._cssPage=this._getCssPage(-s.y))}if(te(n)&&(n=this.columns.indexOf(n)),(n=Fe(n))>-1&&n<this._cols.length&&!this._cols.isFrozen(n)){var g=this._cols[n],y=g.pos+g.renderSize;y>-s.x+a&&(s.x=Math.max(-g.pos,a-y)),this.columns._frozenInternal>=0?g.pos-h.x<-s.x&&(s.x=-(g.pos-h.x)):(g.pos<-s.x&&(s.x=-g.pos),y+s.x-h.x>0&&(s.x-=y+s.x-h.x),Math.abs(s.x-(this._ptScrl.x-this._spDiff.x))==0&&(s.x=this._ptScrl.x),this.rightToLeft&&!this._rows.isFrozen(e)&&Gt()&&s.x++)}if(!s.equals(this._ptScrl,1,.8)){var I=1,x=1;return this.columns._frozenInternal<0&&(I=-1),this.rows._frozenInternal<0&&(x=-1),s.x!=this._ptScrl.x&&this._root.clientWidth-s.x<this._root.scrollWidth&&(s.x!==0?s.x-=1*I:this.rightToLeft&&(s.x+=1*I)),s.y!==0&&s.y<this._ptScrl.y&&this._root.clientHeight-s.y<this._root.scrollHeight&&(s.y-=1*x),this.scrollPosition=s,i&&(this._updateScrollPosition(),this._forceScrollUpdate=!1,this.refresh()),this._spDiff.x=this._ptScrl.x-s.x,this._spDiff.y=this._ptScrl.y-s.y,setTimeout(function(){var ct=Z();ct.classList.contains(q.invalid)&&o.errorTip._showAutoTip(void 0,ct)},50),!0}if(e>-1&&n>-1){var R=this._root,k=R.scrollWidth==R.clientWidth,D=R.scrollHeight==R.clientHeight;if(k||D){var E=nl(this.hostElement);if(E.clientHeight==E.scrollHeight&&E.clientWidth==E.scrollWidth)return!1;var T=rl(this.hostElement,E),L=this.cells.getCellElement(e,n),O=c||new j(e,n),X=O.getRenderSize(this.cells),Q=this.rows[O.topRow].pos+this._eCHdr.clientHeight,Y=this.columns[O.leftCol].pos+this._eRHdr.clientWidth,se=L?L.clientWidth:X.width,ue=L?L.clientHeight:X.height,de=Q+T.top,Te=Y+T.left,Ce=de+ue,N=Te+se,je=E.clientWidth,Ze=E.clientHeight,he=E.scrollTop,ze=E.scrollLeft,ot=he+Ze,gt=ze+je;if(this.stickyHeaders&&(he+=this._eCHdr.clientHeight-1),this.rightToLeft&&(Te=(N=T.left+R.clientWidth-this._eRHdr.clientWidth-this.columns[O.leftCol].pos)-se),he<=de&&Ce<=ot&&ze<=Te&&N<=gt)return!1;var mt=0,me=0;if(D&&(he>de?me=de-he:ot<Ce&&(me=Ce-ot)),k&&(ze>Te?mt=Te-ze:gt<N&&(mt=N-gt)),E.scrollBy(mt,me),mt||me)return i&&(this._isSilentScroll=!0),!0}}return!1},t.prototype.isRangeValid=function(e){return e&&e.isValid&&e.bottomRow<this.rows.length&&e.rightCol<this.columns.length},t.prototype.startEditing=function(e,n,i,o,s){return e===void 0&&(e=!0),this._edtHdl.startEditing(e,n,i,o,s)},t.prototype.finishEditing=function(e){return this._edtHdl.finishEditing(e)},Object.defineProperty(t.prototype,"activeCell",{get:function(){return this._activeCell},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activeEditor",{get:function(){var e=this._edtHdl;return e?e.activeEditor:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editRange",{get:function(){var e=this._edtHdl.editRange;return e?e.clone():null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mergeManager",{get:function(){return this._mrgMgr},set:function(e){e!=this._mrgMgr&&(this._mrgMgr=Ve(e,co,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"overlayManager",{get:function(){return this._oMgr},set:function(e){e!=this._oMgr&&(this._oMgr=Ve(e,fo,!0),this.invalidate())},enumerable:!0,configurable:!0}),t.prototype.getMergedRange=function(e,n,i,o){return o===void 0&&(o=!0),this._mrgMgr?this._mrgMgr.getMergedRange(e,n,i,o):null},Object.defineProperty(t.prototype,"keyActionTab",{get:function(){return this._keyHdl._kaTab},set:function(e){this._keyHdl._kaTab=pe(e,Ii)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keyActionEnter",{get:function(){return this._keyHdl._kaEnter},set:function(e){this._keyHdl._kaEnter=pe(e,Ii)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"preserveWhiteSpace",{get:function(){return fe(this.hostElement,t._WJS_WSPRE)},set:function(e){ee(this.hostElement,t._WJS_WSPRE,M(e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showDropDown",{get:function(){return this._shDropDown},set:function(e){e!=this._shDropDown&&(this._shDropDown=M(e,!0),this.invalidate())},enumerable:!0,configurable:!0}),t.prototype.toggleDropDownList=function(){return this._tglDropDown||(this._tglDropDown=!0,this._edtHdl._toggleListBox(null),this._tglDropDown=!1),this._edtHdl._lbx!=null},Object.defineProperty(t,"defaultTypeWidth",{get:function(){return t._defTypeWidth},enumerable:!0,configurable:!0}),t.prototype.onItemsSourceChanging=function(e){return this.itemsSourceChanging.raise(this,e),!e.cancel},t.prototype.onItemsSourceChanged=function(e){this.itemsSourceChanged.raise(this,e)},t.prototype.onScrollPositionChanged=function(e){if(this.scrollPositionChanged.raise(this,e),this._isServerCollectionView(this.collectionView)){var n=this.collectionView;if(n._virtualization&&n.groupDescriptions.length>0){var i=this.showGroups?this._getGroupCount(this.viewRange.row):0;n.setWindow(Math.floor((this.viewRange.row-i)/this._getRowsPerItem()),Math.ceil((this.viewRange.row2-i)/this._getRowsPerItem()))}n._virtualization&&n.groupDescriptions.length==0&&n.setWindow(Math.floor(this.viewRange.row/this._getRowsPerItem()),Math.ceil(this.viewRange.row2/this._getRowsPerItem()))}},t.prototype.onSelectionChanging=function(e){return this.selectionChanging.raise(this,e),!e.cancel},t.prototype.onSelectionChanged=function(e){this.selectionChanged.raise(this,e)},t.prototype.onLoadingRows=function(e){return this.loadingRows.raise(this,e),!e.cancel},t.prototype.onLoadedRows=function(e){this.loadedRows.raise(this,e),this._autoRowHeights()},t.prototype.onUpdatingLayout=function(e){return this.updatingLayout.raise(this,e),!e.cancel},t.prototype.onUpdatedLayout=function(e){this.updatedLayout.raise(this,e)},t.prototype.onResizingColumn=function(e){return this.resizingColumn.raise(this,e),!e.cancel},t.prototype.onResizedColumn=function(e){this.resizedColumn.raise(this,e),this._autoRowHeights()},t.prototype.onAutoSizingColumn=function(e){return this.autoSizingColumn.raise(this,e),!e.cancel},t.prototype.onAutoSizedColumn=function(e){this.autoSizedColumn.raise(this,e)},t.prototype.onStarSizedColumns=function(e){this.starSizedColumns.raise(this,e),this._autoRowHeights()},t.prototype.onDraggingColumn=function(e){return this.draggingColumn.raise(this,e),!e.cancel},t.prototype.onDraggingColumnOver=function(e){return this.draggingColumnOver.raise(this,e),!e.cancel},t.prototype.onDraggedColumn=function(e){this.draggedColumn.raise(this,e)},t.prototype.onPinningColumn=function(e){return this.pinningColumn.raise(this,e),!e.cancel},t.prototype.onPinnedColumn=function(e){this.pinnedColumn.raise(this,e)},t.prototype.onResizingRow=function(e){return this.resizingRow.raise(this,e),!e.cancel},t.prototype.onResizedRow=function(e){this.resizedRow.raise(this,e)},t.prototype.onAutoSizingRow=function(e){return this.autoSizingRow.raise(this,e),!e.cancel},t.prototype.onAutoSizedRow=function(e){this.autoSizedRow.raise(this,e)},t.prototype.onDraggingRow=function(e){return this.draggingRow.raise(this,e),!e.cancel},t.prototype.onDraggingRowOver=function(e){return this.draggingRowOver.raise(this,e),!e.cancel},t.prototype.onDraggedRow=function(e){this.draggedRow.raise(this,e)},t.prototype.onGroupCollapsedChanging=function(e){if(this._isGrpClpsChanging||this.groupCollapsedChanging.raise(this,e),!e.cancel&&this._isServerCollectionView(this.collectionView)){var n=this.collectionView,i=this.rows[e.row];!this.isUpdating&&n.groupLazyLoading&&this.preserveOutlineState&&n._updateExpandedGroups(i.dataItem,i.isCollapsed),n.groupLazyLoading&&i.isCollapsed&&Object.keys(i.dataItem.items[0]).length<=n.groupDescriptions.length&&!this._isGrpClpsChanging&&n.lazyLoadGroup(i.dataItem)}return!e.cancel},t.prototype.onGroupCollapsedChanged=function(e){if(this._isGrpClpsChanging||this.groupCollapsedChanged.raise(this,e),this._isServerCollectionView(this.collectionView)&&this._cv._virtualization){var n=this.selection;n&&n.row>-1&&!this._grpClpsChng&&this._loadVirtualItems(n,e),n&&n.row==-1&&(n=e.range,this._loadVirtualItems(n,e))}},t.prototype._loadVirtualItems=function(e,n){var i=this.collectionView,o=this.viewRange,s=Math.floor((e.row-this._getGroupCount(e.row))/this._getRowsPerItem()+(this.rows[n.row].isCollapsed?this.rows[e.row].dataItem.items.length:0)),l=Math.ceil((o.row2-this._getGroupCount(o.row2))/this._getRowsPerItem());s<=l&&i._isVirtualRefreshNeeded(s,l)&&(this._isGrpClpsChanging=!0,i.setWindow(s,l))},t.prototype._getGroupCount=function(e){for(var n=0,i=0;i<e;i++)this.rows[i]instanceof we&&n++;return n++},t.prototype.onColumnGroupCollapsedChanging=function(e){return this.columnGroupCollapsedChanging.raise(this,e),!e.cancel},t.prototype.onColumnGroupCollapsedChanged=function(e){this.columnGroupCollapsedChanged.raise(this,e)},t.prototype.onSortingColumn=function(e){return this.sortingColumn.raise(this,e),!e.cancel},t.prototype.onSortedColumn=function(e){this.sortedColumn.raise(this,e)},t.prototype.onBeginningEdit=function(e){return this._addHdl._beginningEdit(this,e),e.cancel||this.beginningEdit.raise(this,e),!e.cancel},t.prototype.onPrepareCellForEdit=function(e){this.prepareCellForEdit.raise(this,e)},t.prototype.onCellEditEnding=function(e){return this.cellEditEnding.raise(this,e),!e.cancel&&!e.stayInEditMode},t.prototype.onCellEditEnded=function(e){this.cellEditEnded.raise(this,e),this._autoRowHeights()},t.prototype.onRowEditStarting=function(e){return this._addHdl._rowEditStarting(this,e),e.cancel||this.rowEditStarting.raise(this,e),!e.cancel},t.prototype.onRowEditStarted=function(e){this.rowEditStarted.raise(this,e)},t.prototype.onRowEditEnding=function(e){this._addHdl._rowEditEnding(this,e),this.rowEditEnding.raise(this,e)},t.prototype.onRowEditEnded=function(e){this.rowEditEnded.raise(this,e),this._addHdl._rowEditEnded(this,e),this._autoRowHeights()},t.prototype.onRowAdded=function(e){return this.rowAdded.raise(this,e),!e.cancel},t.prototype.onDeletingRow=function(e){return this.deletingRow.raise(this,e),!e.cancel},t.prototype.onDeletedRow=function(e){this.deletedRow.raise(this,e)},t.prototype.onCopying=function(e){return this.copying.raise(this,e),!e.cancel},t.prototype.onCopied=function(e){this.copied.raise(this,e)},t.prototype.onPasting=function(e){return this.pasting.raise(this,e),!e.cancel},t.prototype.onPasted=function(e){this.pasted.raise(this,e)},t.prototype.onPastingCell=function(e){return this.pastingCell.raise(this,e),!e.cancel},t.prototype.onPastedCell=function(e){this.pastedCell.raise(this,e)},t.prototype.onFormatItem=function(e){this.formatItem.raise(this,e)},t.prototype.onUpdatingView=function(e){return this.updatingView.raise(this,e),!e.cancel},t.prototype.onUpdatedView=function(e){this.updatedView.raise(this,e)},t.prototype.getMergedRangeRawData=function(e,n,i,o){return o===void 0&&(o=!0),this._mrgMgr?Fi()&&this instanceof Fi().MultiRow||so()&&this instanceof so().TransposedGrid||lo()&&this instanceof lo().TransposedMultiRow?this._mrgMgr.getMergedRange(e,n,i,o):this._mrgMgr._getMergedRange?this._mrgMgr._getMergedRange(e,n,i,o,!1):this._mrgMgr.getMergedRange(e,n,i,o):null},t.prototype._createSelHdl=function(){return new Ol(this)},t.prototype._getTabIndex=function(){return this._orgTabIndex},t.prototype._setTabOrder=function(e){this._orgTabIndex=e,this._updateTabIndex()},t.prototype._updateTabIndex=function(){var e=this.isDisabled?-1:this._orgTabIndex,n=this._imeHdl;n&&n._updateImeFocus();var i=this._activeCell,o=this._root,s=this._eFocus;i?(i.tabIndex=e,s.tabIndex=-1,o.tabIndex=-1):this.selectionMode!=ae.None?(s.tabIndex=e,o.tabIndex=-1):(o.tabIndex=e,s.tabIndex=-1)},t.prototype._autoRowHeights=function(){var e=this;this._autoHeights&&(this.rows.length>100&&[this.columnHeaders,this.rowHeaders].forEach(function(n){n._updateContent(!0,!1,n._getOffsetY())}),clearTimeout(this._toAutoHeights),this._toAutoHeights=setTimeout(function(){e._toAutoHeights=null,e.editRange||e._autoSizeRows()},H._REFRESH_INTERVAL))},t.prototype._autoSizeRows=function(){var e=this.autoSizeMode,n=ui;e&n.Headers&&(this._autoSizeMode=n.Both,this.autoSizeRows(0,this.columnHeaders.rows.length-1,!0),this._autoSizeMode=e),e&n.Cells&&this.autoSizeRows()},t.prototype._getShowErrors=function(){return this.showErrors&&this._hasValidation},t.prototype._getHasValidation=function(){return this._hasValidation},t.prototype._getError=function(e,n,i,o){if(oe(this.itemValidator)){if(e==this.cells)return this.itemValidator(n,i,o);if(e==this.rowHeaders){var s=e.rows,l=this.columns,a=s[n].dataItem,u=null,h=[],c=n;if(b=this.getMergedRange(e,n,i,!1))for(n=c=b.row;n<s.length&&(s[n].dataItem==a||b&&b.rowSpan>1&&b.row2>=n);n++)for(var d=0;d<l.length;d++)(u=this.itemValidator(n,d,!1))&&((y=this.getMergedRange(this.cells,n,d))&&(y.columnSpan>1&&y.col<d||y.rowSpan>1&&y.row<n)||h.push(u));else for(d=0;d<this.columns.length;d++){var f=this.itemValidator(n,d,!1);f&&h.push(f)}if(h.length){var p=!!(I=this.errorTip)&&I.isContentHtml;u=h.join(p?"<br/>":`
`)}return u}}var _=this._cv,v=_?_.getError:null;if(oe(v)&&(s=e.rows,l=this.columns,(a=s[n].dataItem)&&!(a instanceof Tt))){if(e==this.cells)for(;n<s.length&&s[n].dataItem==a;n++)return v(a,(m=this._getBindingColumn(this.cells,n,l[i])).binding,o);else if(e==this.rowHeaders){if(!(u=v(a,null,!1))){var b;for(h=[],c=n,(b=this.getMergedRange(e,n,i,!1))&&(c=b.row),n=c;n<s.length&&(s[n].dataItem==a||b&&b.rowSpan>1&&b.row2>=n);n++)for(d=0;d<l.length;d++){var m=this._getBindingColumn(this.cells,n,l[d]),w=s[n].dataItem,g=w&&m&&m.binding?m._binding.getValue(w):null;if(u=m.binding&&w&&m.getIsRequired(s[n])&&this.editRange&&this.editRange.containsRow(n)&&(g==null||g==="")?this._edtHdl._getRequiredMsg():v(w,m.binding,!1)){var y;(y=this.getMergedRange(this.cells,n,d))&&(y.columnSpan>1&&y.col<d||y.rowSpan>1&&y.row<n)||h.push(u)}}if(h.length){var I;p=!!(I=this.errorTip)&&I.isContentHtml,u=h.join(p?"<br/>":`
`)}}return u}}return null},t.prototype._setAria=function(e,n){var i=this._gridRoleElement();i&&S(i,e,n)},t.prototype._setFocus=function(e){if(this.hostElement){var n=Z(),i=this.activeEditor,o=this._activeCell,s=this._eFocus,l=this._root,a=this._getTabIndex(),u=this.containsFocus();if(!e&&u&&this.selectionMode!=ae.None){if(this.rows.length>0&&this.selection.row>=0&&this.selection.col>=0){var h=this._getBindingColumn(this.cells,this.selection.row,this.columns[this.selection.col]),c=h&&h._edt;this._isInputElement(n)||!o||J(o,n)||this.imeEnabled||c||this._correctFocusOfActiveCell(o)}}else(e||!u)&&(i?J(i,n)||(i.focus(),s.tabIndex=-1,l.tabIndex=-1):o?J(o,n)||this._correctFocusOfActiveCell(o):!J(s,n)&&n!=l&&(this.selectionMode!=ae.None?(s.tabIndex=a,this._setFocusNoScroll(s)):(l.tabIndex=a,this._setFocusNoScroll(l))),this.containsFocus()||(this.selectionMode!=ae.None?(s.tabIndex=a,this._setFocusNoScroll(s)):(l.tabIndex=a,this._setFocusNoScroll(l))))}},t.prototype._correctFocusOfActiveCell=function(e){var n=this._getTabIndex();Z()!=this._root&&Ie()&&fe(e,z.group)&&(e=e.querySelector("."+Pe._WJC_COLLAPSE)||e),e.tabIndex=n,this._setFocusNoScroll(e),this._eFocus.tabIndex=-1},t.prototype._setFocusNoScroll=function(e){if(Z()!=e){if(Ks())this._imeHdl&&this._imeHdl._handlingCompositionStart||e.focus({preventScroll:!0});else{var n=this.scrollPosition,i=e.style,o=i.position;i.position="fixed",e.focus(),i.position=o,this.scrollPosition=n}this._fixScroll()}},t.prototype._clearAnchorCell=function(){this._anchorCell=null},t.prototype._setAnchorCell=function(e,n){var i=this.getMergedRange(this.cells,e,n);this._anchorCell=i?new Ye(i.col,i.row):new Ye(n,e)},t.prototype._getAnchorCell=function(){return this._anchorCell},t.prototype._updateDefaultSizes=function(){var e=this._getDefaultRowHeight();return this._rows._setDefaultSize(e),this._cols._setDefaultSize(4*e),this._hdrRows._setDefaultSize(e),this._hdrCols._setDefaultSize(Math.round(1.25*e)),this._ftrRows._setDefaultSize(e),e},t.prototype._getDefaultRowHeight=function(){var e=this.hostElement,n=this._eFocus,i=null;n.offsetHeight||(i=Oe('<div><div class="'+z.cell+'">0</div></div>',document.body),e&&i.setAttribute("class",e.getAttribute("class")),n=i.children[0]);var o=n.offsetHeight;return(isNaN(o)||o<=6)&&(o=28),Ne(i),o},t.prototype._getCollectionView=function(e){return On(e)},t.prototype._getCanvasContext=function(){var e=document.createElement("canvas").getContext("2d"),n=getComputedStyle(this.hostElement);return e.font=n.fontSize+" "+n.fontFamily.split(",")[0],e},t.prototype._getWidestRow=function(e,n,i,o){for(var s=0,l=0,a=this._getRowsPerItem()===1&&e.columns[i].dataType==Ae.Boolean,u=n.row;u<=n.row2;u++)if(e.rows[u].isVisible){var h=e.getCellData(u,i,!0),c=o.measureText(h).width,d=this.getMergedRange(e,u,i,!1);if(d&&d.columnSpan>1&&(c/=d.columnSpan),c>l&&(l=c,s=u),a)break;u+=d?d.rowSpan-1:0}return s},t.prototype._getDesiredWidth=function(e,n,i,o){var s=this.getMergedRange(e,n,i,!1),l=o.style;return this.cellFactory.updateCell(e,n,i,o,s),l.width=l.top=l.left="",o.offsetWidth/(s&&s.columnSpan>1?s.columnSpan:1)},t.prototype._getDesiredHeight=function(e,n,i,o){var s=o.style,l=this.getMergedRange(e,n,i,!1),a=l?l.rowSpan:1;this.cellFactory.updateCell(e,n,i,o,l);var u=o.innerHTML,h=this.cachedHeights[u],c=u.trim();if(!c||c==="<div></div>"){u="&nbsp;";var d=o;if((h=this.cachedHeights[u])==null&&(c?d.firstElementChild.innerHTML=u:d.innerHTML=u,d.style.height=d.style.top=d.style.left=""),!e.rows[n].wordWrap&&!e.columns[i].wordWrap)return this.cachedDefaultHeight==-1&&(s.height=s.top=s.left="",this.cachedDefaultHeight=d.offsetHeight),this.cachedHeights[u]=this.cachedDefaultHeight,this.cachedDefaultHeight/a}return(h==null||h<o.scrollHeight)&&(s.height=s.top=s.left="",this.cachedHeights[u]=o.offsetHeight),this.cachedHeights[u]/a},t.prototype._getDesiredRowHeight=function(e,n,i,o){for(var s=0,l=(e.rows[n],this._getQuickAutoSize()),a=0;a<e.columns.length;a++)if(e.columns[a].isVisible){var u=this.getMergedRange(e,n,a,!1),h=void 0;if(l){var c={ct:e.cellType,col:a,spr:u&&u.rowSpan>1?u.rowSpan:1,spc:u&&u.columnSpan>1?u.columnSpan:1,data:e.getCellData(n,a,!0)||"1"},d=JSON.stringify(c);(h=o[d])==null&&(h=this._getDesiredHeight(e,n,a,i),o[d]=h)}else h=this._getDesiredHeight(e,n,a,i);s=Math.max(h,s),a+=u?u.columnSpan-1:0}return s},t.prototype._getSortRowIndex=function(){return this._sortRowIndex!=null?this._sortRowIndex:this.columnHeaders.rows.length-1},t.prototype._getDeleteColumnIndex=function(){return 0},t.prototype._getEditColumnIndex=function(){return this._editColIndex!=null?this._editColIndex:this.rowHeaders.columns.length-1},t.prototype._sortConverter=function(e,n,i,o){var s,l=this;if(o&&(this._mappedColumns=null,this._cv&&this._cv.sortDescriptions.forEach(function(u){(s=l.getColumn(u.property))&&s.dataMap&&(l._mappedColumns||(l._mappedColumns={}),l._mappedColumns[s.binding]=s.dataMap)}),this._mouseHdl._htDown&&this._mouseHdl._htDown.col>-1&&(s=this.columns[this._mouseHdl._htDown.col],this._mappedColumns&&s.dataMap&&(this._mappedColumns[s.binding]=s.dataMap))),this._mappedColumns){var a=this._mappedColumns[e.property];a&&a.sortByDisplayValues&&(i=a.getDisplayValue(i))}return i},t.prototype._bindGrid=function(e){var n=this;if(this.finishEditing(),this.deferUpdate(function(){n.autoGenerateColumns&&n._lastCount==0&&Ue(n._cv)&&(e=!0);var l;n.preserveSelectedState&&(l=n._getMap())&&n.rows.forEach(function(y){y.isSelected&&y.dataItem&&l.set(y.dataItem,!0)});var a=null,u=n.selection&&n.rows&&(n.rows[n.selection.row]instanceof we||n.rows[n.selection.row2]instanceof we);if(n.preserveSelectedState&&!n._isSourceChanging&&n._cv&&u){var h=n.selection,c=n.rows[n.selection.row]instanceof we?n.selection.row:n.selection.row2;h.row>-1&&n.rows[c]&&(a=n.rows[c].dataItem)}var d,f=n._getMap();if(f&&n.rows.forEach(function(y){y.isReadOnly&&y.dataItem&&f.set(y.dataItem,!0)}),n.preserveOutlineState&&n.rows.maxGroupLevel>-1&&(d=n._getMap()))for(var p=0;p<n.rows.length;p++){var _=n.rows[p];if(_ instanceof we&&_.isCollapsed&&_.dataItem){var v=_.dataItem;v instanceof Tt&&(v=v._path),d.set(v,!0)}}e&&n.columns.deferUpdate(function(){n._bindColumns()});var b=new He;n.onLoadingRows(b)&&(n.rows.deferUpdate(function(){n._bindRows()}),n.onLoadedRows(b)),n._selHdl.extendedSelection.clear();var m=0;if(l&&l.size&&n.rows.forEach(function(y){var I=y.dataItem;I&&l.has(I)&&(y.isSelected=!0,m++)}),f&&f.size&&n.rows.forEach(function(y){var I=y.dataItem;I&&f.has(I)&&(y.isReadOnly=!0)}),m==0&&n.selectionMode==ae.ListBox)for(p=(h=n.selection).topRow;p<=h.bottomRow&&p>-1&&p<n.rows.length;p++)n.rows[p]._setFlag(ie.Selected,!0,!0);if(n._cv&&u&&a){var w=!1;for(h=n.selection.clone(),c=0;c<n.rows.length;c++)if(n.rows[c].dataItem===a){h.row=h.row2=c,w=!0;break}w||(h.row=-1,h.row2=-1),n._selHdl._adjustSelection(h,n.selectionMode,e&&!n._toInv)}if(d&&d.size&&(n._cv&&n._cv.groupOnServer&&n._cv._virtualization&&(n._isGrpClpsChanging=!0),n.rows.deferUpdate(function(){n.rows.forEach(function(y){if(y instanceof we){var I=y.dataItem;I instanceof Tt&&(I=I._path),d.has(I)&&(y.isCollapsed=!0)}})}),n._cv&&n._cv.groupOnServer&&n._cv._virtualization&&(n._isGrpClpsChanging=!1)),!n._lastCount){var g=n._cv;g&&g.items&&(n._lastCount=g.items.length)}}),this._cv){var i=e&&!this._toInv;this.activePanelType===P.Cell&&this._syncSelection(i)}else{var o=this.selection,s=new j(-1,o.col,-1,o.col2);this.activePanelType===P.Cell&&this._selHdl._adjustSelection(s,this.selectionMode)}},t.prototype._getMap=function(){return window.Map?new Map:null},t.prototype._cvCollectionChanged=function(e,n){if(this._isSourceChanging=!0,this.autoGenerateColumns&&this.columns.length==0)this._bindGrid(!0),this._isSourceChanging=!1;else{var i=We;if(this.childItemsPath&&n.action!=i.Change)this._bindGrid(!1),this._isSourceChanging=!1;else{switch(n.action){case i.Change:this.invalidate();return;case i.Add:if(n.index==this._cv.items.length-1){var o=this.rows.length;this.rows[o-1]instanceof Me&&o--,this.rows.insert(o,new _t(n.item));return}K(!1,"added item should be the last one.");break;case i.Remove:var s=this._findRow(n.item);if(s>-1){this.rows.removeAt(s),this._syncSelection(!1);return}K(!1,"removed item not found on grid.")}this._bindGrid(!1),this._isSourceChanging=!1}}},t.prototype._cvCurrentChanged=function(e,n){this._syncSelection(!1)},t.prototype._syncSelection=function(e){if(this._cv&&this.selectionMode!=ae.None){var n=this._selHdl,i=n.selection,o=i.row>-1&&i.row<this.rows.length?this.rows[i.row]:null,s=o?o.dataItem:null,l=this._cv;if(l instanceof Zt&&l.isUpdating||this.newRowAtTop&&o instanceof Me)return;s instanceof Tt&&(s=null);var a=this._isISChanging;if(e||s!=l.currentItem||i.row>=this.rows.length||i.row2>=this.rows.length||a&&i.row!==i.row2||i.col>=this.columns.length||i.col2>=this.columns.length){var u=this.editableCollectionView;if(!this.childItemsPath||!u||!u.currentAddItem){var h=this._getRowIndex(l.currentPosition),c=this.getMergedRange(this._activePanel,h,i.col,!1);if(!(c!=null&&c._row<=i.row&&c._row2>=i.row2||h==i.row&&this.childItemsPath)){if((i.row>=this.rows.length||i.row2>=this.rows.length||i.col>=this.columns.length||i.col2>=this.columns.length)&&this.columns.length>0&&this.rows.length>0)a&&(i=new j,n._adjustSelection(i,this.selectionMode),this.selectionMode&&!this._updating&&this.scrollIntoView(i.row,-1));else if(i.row===-1&&i.row2===-1||h!=i.row){var d=a?i.col:i.col2;i=new j(h,i.col,h,d),n._adjustSelection(i,this.selectionMode),this.selectionMode&&!this._updating&&this.scrollIntoView(i.row,-1)}}}}}},t.prototype._getRowIndex=function(e){if(this._cv){var n=this.rows;if(e>-1){for(var i=this._cv.items[e];e<n.length;e++)if(n[e].dataItem===i)return e;return-1}if(n.length==1&&n[0]instanceof Me)return 0;var o=this.selection.row,s=o>-1?n[o]:null;return s&&(s instanceof we||s.dataItem==null)?o:-1}return this.selection.row},t.prototype._getCvIndex=function(e){return e>-1&&e<this.rows.length?this.rows[e].dataIndex:-1},t.prototype._findRow=function(e){for(var n=0;n<this.rows.length;n++)if(this.rows[n].dataItem==e)return n;return-1},t.prototype._preWidth=function(){var e=this._root,n=this._hdrVis&le.Row?this._hdrCols.getTotalSize():0;return e.clientWidth-n},t.prototype._updateLayout=function(){var e=new He;if(this.onUpdatingLayout(e)){var n=this._hdrVis&le.Row?this._hdrCols.getTotalSize():0,i=this._hdrVis&le.Column?this._hdrRows.getTotalSize():0,o=this._ftrRows.getTotalSize(),s=this._rows.getTotalSize()+o;s<1&&(s=1),this._heightReal=s,this._heightBrowser=Math.min(s,t._getMaxSupportedCssHeight()),this._maxOffsetY=Math.max(0,s-this._heightBrowser),this.rows.length||B(this._eSz,{height:"0px"});var l=this.overlayManager.updateNoDataOverlay(this,this._eNoData),a=getComputedStyle(this._eFocus);this._cellPadVert=parseInt(a.paddingTop)+parseInt(a.paddingBottom),this._cellPadHorz=parseInt(a.paddingLeft)+parseInt(a.paddingRight),this._cellPadLeft=parseInt(this.rightToLeft?a.paddingRight:a.paddingLeft);var u=this._heightBrowser+i-o,h=this._gpCells.width,c=this._heightBrowser;!h&&this.rows.length&&(h=.1),!c&&this.columns.length&&(c=.1),this.rightToLeft?(B(this._eTL,{right:0,top:0,width:n,height:i}),B(this._eCHdr,{right:n,top:0,height:i}),B(this._eRHdr,{right:0,top:i,width:n}),B(this._eCt,{right:n,top:i,width:h,height:c}),B(this._fCt,{right:n,top:i}),B(this._eBL,{right:0,top:u,width:n,height:o}),B(this._eCFtr,{right:n,top:u,height:o})):(B(this._eTL,{left:0,top:0,width:n,height:i}),B(this._eCHdr,{left:n,top:0,height:i}),B(this._eRHdr,{left:0,top:i,width:n}),B(this._eCt,{left:n,top:i,width:h,height:c}),B(this._fCt,{left:n,top:i}),B(this._eBL,{left:0,top:u,width:n,height:o}),B(this._eCFtr,{left:n,top:u,height:o})),this._stickyHdr&&this._updateStickyHeaders();var d=this.rows._frozenInternal||this.columns._frozenInternal;B([this._eTL,this._eBL,this._eCFtr,this._eRHdr],{zIndex:d?"4":"3"}),B(this._eCHdr,{zIndex:d?"5":"3"}),B(this._eMarquee,{zIndex:d?"4":"1"}),this._eCHdr.closest("."+z.cell)&&B(this._eCHdr,{zIndex:d?"5":"2"}),Ie()&&(this._fCt.style.zIndex=d?"3":"");var f=this._root,p=f.offsetWidth-f.clientWidth,_=f.offsetHeight-f.clientHeight;B(this._eSz,{width:n+p+this._gpCells.width,height:i+_+this._heightBrowser+l});var v=null;this.columns._updateStarSizes(f.clientWidth-n)&&(v=f.clientWidth,B(this._eCt,{width:this._gpCells.width}),this.onStarSizedColumns()),this._szClient=new wt(f.clientWidth-n,f.clientHeight-i),this._szClientSB=new wt(f.offsetWidth-n,f.offsetHeight-i),this._rcBounds=null,this._updateScrollHandler(),this._updateContent(!1),p=f.offsetWidth-f.clientWidth,_=f.offsetHeight-f.clientHeight,B(this._eSz,{width:n+p+this._gpCells.width,height:i+_+this._heightBrowser+l});var b=new wt(this._szClient.width,this._szClient.height);this._szClient=new wt(f.clientWidth-n,f.clientHeight-i),!(this.columns._frozenInternal<0||this.rows._frozenInternal<0)||b.width==this._szClient.width&&b.height==this._szClient.height||this._updateContent(!1),v&&v!=f.clientWidth&&this.columns._updateStarSizes(f.clientWidth-n)&&(B(this._eCt,{width:this._gpCells.width}),this._updateContent(!1)),B([this._eCHdr,this._eCFtr,this._fCt],{width:this._szClient.width}),B([this._eRHdr,this._fCt],{height:this._szClient.height}),o&&(u=Math.min(u,this._szClient.height+i-o),B([this._eBL,this._eCFtr],{top:u})),this._alignTheTail(this.rows),this._alignTheTail(this.columns),this.onUpdatedLayout(e)}},t.prototype.handleLoad=function(){var e=this._root.style.overflowX,n=this._root.style.overflowY;B(this._root,{"overflow-y":this._root.scrollHeight!=0&&this._root.scrollHeight===this._root.parentElement.clientHeight?"hidden":"auto","overflow-x":this._root.scrollWidth!=0&&this._root.scrollWidth===this._root.parentElement.clientWidth?"hidden":"auto"}),e==this._root.style.overflowX&&n==this._root.style.overflowY||this.invalidate()},t.prototype._updateStickyHeaders=function(){var e=!1,n=0;if(this._stickyHdr){for(var i=0,o=null,s=this.hostElement;s;s=s.parentElement)if(getComputedStyle(s).display!="inline"){var l=s.getBoundingClientRect();o==null&&(o=l.top),i=Math.max(i,l.top)}n=-(o=Math.max(0,i-o-1)),e=o>0,this._rcBounds=null}this._eTL.style.top=this._eCHdr.style.top=e?-n+"px":"",ee(this._eTL,t._WJS_STICKY,e),ee(this._eCHdr,t._WJS_STICKY,e)},t.prototype._updateScrollHandler=function(){this._clipToScreen=this._getClipToScreen();var e=this._stickyHdr||this._clipToScreen;e!=this._scrollHandlerAttached&&(this._scrollHandlerAttached=e,e?this.addEventListener(window,"scroll",this._scroll.bind(this),!0):this.removeEventListener(window,"scroll"))},t.prototype._getClipToScreen=function(){if(this.rows.length<=t._MIN_VIRT_ROWS||this._root.scrollHeight>this._root.clientHeight)return!1;for(var e=this.hostElement;e&&e!=document.documentElement;e=e.parentElement)if(getComputedStyle(e).overflow=="auto")return!1;return!0},t.prototype._scroll=function(e){var n=this;if(J(e.target,this.hostElement)){if(this._clipToScreen){var i=this;this._afClip&&cancelAnimationFrame(this._afClip),this._afClip=requestAnimationFrame(function(){i._isSilentScroll?queueMicrotask(function(){return i._isSilentScroll=!1}):(n._afClip=null,n.finishEditing(),n._updateContent(!0))})}if(this._stickyHdr){var o=Date.now();o-this._lastStickyScroll>this._scrollStickyThrottleTimeout&&(this._afSticky&&cancelAnimationFrame(this._afSticky),this._afSticky=requestAnimationFrame(function(){n._afSticky=null;var s=new He;n.onUpdatingLayout(s)&&(n._updateStickyHeaders(),n.onUpdatedLayout(s))}),this._lastStickyScroll=o),this._handleScrollEnd()}}},t.prototype._getCssPage=function(e){if(this._heightReal>this._heightBrowser){var n=this._szClient.height-this._gpCFtr.rows.getTotalSize();if(this._heightBrowser>n)return ye(Math.round(e/(this._heightBrowser-n)*10)/10,0,1)}return 0},t.prototype._updateScrollPosition=function(){var e=this._root,n=e.scrollTop,i=e.scrollLeft;this.rightToLeft&&t._getRtlMode()=="rev"&&(i=e.scrollWidth-e.clientWidth-i);var o=new Ye(-Math.abs(i),-n),s=this.columns.getTotalSize();return this.rightToLeft&&t._getRtlMode()!="rev"&&(i=-i),Ht()&&(i<0||s>this._szClient.width&&i+this._szClient.width>s)||this._ptScrl.equals(o)?!1:(this._ptScrl=o,this._updateMarquee(),this.onScrollPositionChanged(),!0)},t.prototype._updateContent=function(e,n){var i=this,o=this._root,s=this.hostElement,l=this.cells.hostElement,a=this._activeCell,u=Z(),h=J(s,u),c=$(u,"."+z.hostElement)==s?u:null,d=new He;if(this.onUpdatingView(d)){this._setAria("role",this.rows.maxGroupLevel<0?"grid":"treegrid"),this._hasValidation=oe(this._itemValidator)||this._cv&&oe(this._cv.getError);var f=!n&&this._errorTip&&this._errorTip._tips.length,p=this._getCssPage(-this._ptScrl.y);p!=this._cssPage&&(this._cssPage=p,this._offsetY=Math.round(this._maxOffsetY*p)),this._updateScrollPosition(),this._updateMarquee();var _=0,v=this._hdrVis;v&le.Row&&(!n||this._ssHdr&v||this.headersFocusability&Rt.Row)&&(_=this.rowHeaders.columns.length);var b=this._gpCells._updateContent(e,n,this._offsetY,_);switch(v&le.Column&&(!n||this._ssHdr&v||this.headersFocusability&Rt.Column)&&(this._gpCHdr._updateContent(e,n,0,_),this.rightToLeft||(this._eCHdr.scrollLeft=0)),v&le.Row&&(!n||this._ssHdr&v||this.headersFocusability&Rt.Row)&&(this._gpRHdr._updateContent(e,n,this._offsetY),this._eRHdr.scrollTop=0),!v||this.headersFocusability!==Rt.All&&n||this._gpTL._updateContent(e,n,0),this._gpCFtr.rows.length&&(this._gpBL._updateContent(e,n,0),this._gpCFtr._updateContent(e,n,0)),this.activePanelType){case P.ColumnHeader:b=this._gpCHdr.activeCell;break;case P.RowHeader:b=this._gpRHdr.activeCell;break;case P.TopLeft:b=this._gpTL.activeCell;break;case P.BottomLeft:b=this._gpBL.activeCell;break;case P.ColumnFooter:b=this._gpCFtr.activeCell}if(f&&this._errorTip&&this._errorTip._tips.length&&(clearTimeout(this._toErrorTips),this._toErrorTips=setTimeout(function(){var y=i._errorTip;if(y){y.hide();for(var I=y._tips,x=0;x<I.length;x++){var R=I[x].element;(!R.offsetHeight||!fe(R,q.invalid))&&(y.setTooltip(R,null),x--)}}},40)),this._useFrozenDiv()&&(this._updateFrozenCells(n),b&&fe(b,z.frozen)&&(b=null)),this._fCt.style.display=this._fCt.childElementCount?"":"none",this._activeCell=b,c){if(c==o||c==this._eFocus||!J(s,c)||J(l,c)||this.imeEnabled){var m=b!==a;this._setFocus(m)}else if(Z()!==c&&c.focus(),Ie()&&c instanceof HTMLInputElement&&!c.type.match(/checkbox|radio|range/i)){var w=c.selectionStart,g=c.selectionEnd;c.setSelectionRange(w,g)}}!c&&b&&(b.tabIndex=this.isDisabled?-1:this._orgTabIndex),a&&a!=b&&(a.tabIndex=-1),this.selectionMode!=ae.None?this._eFocus.tabIndex=b!=null||this.isDisabled?-1:this._orgTabIndex:(this._eFocus.tabIndex=-1,this._root.tabIndex=b!=null||this.isDisabled?-1:this._orgTabIndex),h&&this.focus(),this._fixScroll(),this._rcBounds=null,this._updateMarquee(),this.onUpdatedView(d)}},t.prototype._fixScroll=function(){var e=this._root;if(!this._updating){var n=this.hostElement,i=e?e.parentElement:null,o=this.rightToLeft;n&&(n.scrollTop&&(n.scrollTop=0),n.scrollLeft&&!o&&(n.scrollLeft=0)),i&&(i.scrollTop&&(i.scrollTop=0),i.scrollLeft&&!o&&(i.scrollLeft=0))}var s=Pl();e&&s&&s.major==14&&s.minor>=1&&(e.style.transform="",e.style.transform="translateZ(0)")},t.prototype._clearCells=function(){for(var e in this)if(e[0]=="_"){var n=this[e];n instanceof yt&&n._clearCells()}this.invalidate()},t.prototype._useFrozenDiv=function(){return st(this._fzClone)?this._fzClone:Ie()||Gt()||Ht()||hi()},t.prototype._updateFrozenCells=function(e,n){n===void 0&&(n=!1);var i=this._fCt;if((n||this.rows.frozen===0&&this.columns.frozen===0)&&Ot(i,null),this.rows._frozenInternal||this.columns._frozenInternal){var o=this._eCt.querySelectorAll("."+z.frozen);if(e&&i.children.length==o.length){for(var s=0;s<o.length;s++)i.children[s].className=o[s].className;return}if(Ot(i,null),!this.activeEditor){var l=this._errorTip,a=navigator.userAgent.indexOf("MSIE")>=0;for(s=0;s<o.length;s++){var u=o[s];if($(u,"."+z.hostElement)==this.hostElement){var h=u[yt._INDEX_KEY],c=u.firstElementChild,d=null;if(h&&c){var f=h.panel,p=this._getBindingColumn(f,h.row,f.columns[h.col]);d=oe(p.cellTemplate)?c.onclick:null}if(a){var _="input[type=checkbox]",v=u.querySelector(_);u=u.cloneNode(!0),v&&(u.querySelector(_).checked=v.checked)}else{u=u.cloneNode(!0),ho()&&h&&u&&this.cellFactory instanceof ho().DirectiveCellFactoryBase&&this.cellFactory.updateCell(this.cells,h.row,h.col,u,this.mergeManager.getMergedRange(this.cells,h.row,h.col));var b=u.getAttribute("top-for-clone"),m=u.getAttribute("left-for-clone");b&&(u.style.top=b+"px"),m?this.rightToLeft?u.style.right=m+"px":u.style.left=m+"px":u.style.left=Math.round(parseFloat(u.style.left))+"px"}if(c=u.firstElementChild,d&&c&&(c.onclick=d),u[yt._INDEX_KEY]=h,l){var w=l.getTooltip(o[s]);w&&l.setTooltip(u,w)}i.appendChild(u)}}}}},t.prototype._updateMarquee=function(){if(this.activePanelType==P.Cell){var e=this._eMarquee,n=this._getMarqueeRect();if(n&&n.width&&n.height){var i=this.cells.hostElement,o=e.firstChild,s=e.offsetWidth-o.offsetWidth,l=e.offsetHeight-o.offsetHeight;B(e,{width:n.width+s,height:n.height+l,top:n.top+i.offsetTop-l/2,left:n.left+i.offsetLeft-s/2,display:""})}else e.style.display="none"}else this._hideMarquee()},t.prototype._hideMarquee=function(){var e=this._eMarquee;B(e,{display:"none"})},t.prototype._getMarqueeRect=function(){if(!this._shMarquee||!this.selectionMode)return null;var e=this._selHdl.selection;if(!this.isRangeValid(e))return null;e=(e=(e=this.cells._getAdjustedSelection(e)).combine(this.getMergedRange(this.cells,e.topRow,e.leftCol,!1))).combine(this.getMergedRange(this.cells,e.bottomRow,e.rightCol,!1));var n=this.cells.getCellBoundingRect(e.topRow,e.leftCol,!0),i=this.cells.getCellBoundingRect(e.bottomRow,e.rightCol,!0);if(this.rows._frozenInternal){var o=this.rows._frozenInternal>=0?Math.min(this.rows.length,this.rows._frozenInternal):this.rows._lastFrozen,s=this.rows._frozenInternal>=0?this.cells.getCellBoundingRect(o-1,0,!0):this.cells.getCellBoundingRect(o,0,!0);this.rows._frozenInternal>=0?(e.topRow>=o&&n.top<s.bottom&&(n.top=s.bottom),e.bottomRow>=o&&i.bottom<s.bottom&&(i.height=s.bottom-i.top)):(e.bottomRow<o&&i.bottom>s.top&&(i.height-=i.bottom-s.top),e.topRow<o&&n.top>s.top&&(n.top=s.top),this.rows.isFrozen(this.rows._firstVisible)&&e.topRow===this.rows._firstVisible&&n.top++,Ci()&&!hi()&&(e.bottomRow>=o&&i.top--,e.topRow>=o&&n.top--))}if(this.columns._frozenInternal){var l=this.columns._frozenInternal>=0?Math.min(this.columns.length,this.columns._frozenInternal):this.columns._lastFrozen;s=this.columns._frozenInternal>=0?this.cells.getCellBoundingRect(0,l-1,!0):this.cells.getCellBoundingRect(0,l,!0),this.rightToLeft?this.columns._frozenInternal>=0?(e.leftCol>=l&&n.right>s.left&&(n.left=s.left-n.width),e.rightCol>=l&&i.left>s.left&&(i.left=s.left)):(e.rightCol<l&&i.left<s.right&&(i.left=s.right,n.right<=s.right&&(n.left=s.right,n.width=0)),e.leftCol<l&&n.right<s.right&&(n.left=s.right,n.width=0)):this.columns._frozenInternal>=0?(e.leftCol>=l&&n.left<s.right&&(n.left=s.right),e.rightCol>=l&&i.right<s.right&&(i.width=s.right-i.left)):(e.rightCol<l&&i.right>s.left&&(i.left-=i.right-s.left),e.leftCol<l&&n.left>s.left&&(n.left=s.left))}var a=0;return this.columns._frozenInternal<0&&Ci()&&!hi()&&this.columns.isFrozen(e.rightCol)&&n.right-i.left!=0&&(a=1),this.rightToLeft?new ht(i.left,n.top,n.right-i.left-a,i.bottom-n.top):new ht(n.left,n.top,i.right-n.left-a,i.bottom-n.top)},t.prototype._bindColumns=function(){for(var e=this.columns,n=0;n<e.length;n++)e[n]._getFlag(ie.AutoGenerated)&&(e.removeAt(n),n--);var i=this._cv,o=i?i.items:null;o&&o.length&&this.autoGenerateColumns&&this._getColumnTypes(o).forEach(function(s){var l=new Je(s);l._setFlag(ie.AutoGenerated,!0),l.name=l.binding,l.header=mr(l.binding);var a=t._defTypeWidth[l.dataType];if(a!=null){if(te(a)){var u=Math.round(parseFloat(a));a=a.indexOf("*")>-1?u*e.defaultSize:u}_e(a)&&a>0&&(l.width=a)}e.push(l)}),this._updateColumnTypes()},t.prototype._getColumnTypes=function(e){return Zs(e)},t.prototype._updateColumnTypes=function(){var e=this._cv;if(Ue(e)){var n=e.items[0];this.columns.forEach(function(i){i.dataType==null&&i._binding&&(i.dataType=Si(i._binding.getValue(n)))})}},t.prototype._getMapEditor=function(e,n){return n&&n.editor?n.editor.isDroppedDown!=null?n.dataMapEditor:null:!e||!e.dataMap||e instanceof we?n&&n.dataMap?n.dataMapEditor:null:e.dataMapEditor},t.prototype._getBindingColumn=function(e,n,i){return i},t.prototype._getBindingColumns=function(){return this.columns},t.prototype._getRowsPerItem=function(){return 1},t.prototype._isTransposed=function(){return!1},t.prototype._getRowHeaderPath=function(){return this._rowHdrPath},t.prototype._bindRows=function(){this.rows.clear();var e=this._cv;if(e&&e.items){var n=e.items,i=e.groups;if(this.childItemsPath)for(var o=0;o<n.length;o++)this._addNode(n,o,0);else if(i!=null&&i.length>0&&this.showGroups)for(o=0;o<i.length;o++)this._addGroup(i[o]);else for(o=0;o<n.length;o++)this._addBoundRow(n,o)}},t.prototype._addBoundRow=function(e,n){var i=new _t(e[n]),o=this.rows;i._list=o,o[o.length++]=i},t.prototype._addGroupRow=function(e){this.rows.push(new we(e))},t.prototype._addNode=function(e,n,i){var o=e[n],s=this.childItemsPath,l=o[Ge(s)?s[i]:s],a=new we(o);if(a.level=i,this.rows.push(a),Ge(l))for(var u=0;u<l.length;u++)this._addNode(l,u,i+1)},t.prototype._addGroup=function(e){if(this._addGroupRow(e),e.isBottomLevel)for(var n=e.items,i=0;i<n.length;i++)this._addBoundRow(n,i);else for(i=0;i<e.groups.length;i++)this._addGroup(e.groups[i]);if(this.groupSummaryPosition!=Pt.Top){var o=e._clone();this._addGroupSummaryRow(o)}},t.prototype._addGroupSummaryRow=function(e){var n=new we(e);n.isSummary=!0,this.rows.push(n)},t._getSerializableProperties=function(e){var n=[];for(e=e.prototype;e!=Object.prototype;e=Object.getPrototypeOf(e))for(var i=Object.getOwnPropertyNames(e),o=0;o<i.length;o++){var s=i[o],l=Object.getOwnPropertyDescriptor(e,s);l&&l.set&&l.get&&s[0]!="_"&&!s.match(/^(disabled|required|showDropDown)$/)&&n.push(s)}return n},t.prototype._hasColumnGroups=function(){return this._grpHdl.hasColumnGroups()},t.prototype._getColumnGroup=function(e,n){return this._grpHdl.getColumnGroup(e,n)},t.prototype._canMoveColumnGroup=function(e,n,i,o){return this._grpHdl.canMoveColumnGroup(e,n,i,o)},t.prototype._moveColumnGroup=function(e,n,i,o,s){return this._grpHdl.moveColumnGroup(e,n,i,o,s)},t.prototype._copy=function(e,n){var i=this;if(e=="columns"){var o=vt(n);return o.some(function(s){return s.columns!=null})?this.columnGroups=o:(this.columns.clear(),o.forEach(function(s){var l=new Je(s);i.columns.push(l)})),!0}return!1},t.prototype._isInputElement=function(e){return e instanceof HTMLElement&&!fe(e,ut.btnGlyph)&&(e.contentEditable=="true"||e.tagName.match(/^(INPUT|TEXTAREA|BUTTON|A|SELECT|OPTION)$/i)!=null||e instanceof HTMLSpanElement&&e.parentElement&&e.parentElement.tagName.match(/^(INPUT|TEXTAREA|BUTTON|A|SELECT|OPTION)$/i)!=null&&!fe(e.parentElement,ut.btnGlyph))},t.prototype._isNativeCheckbox=function(e){return e instanceof HTMLInputElement&&e.type=="checkbox"&&!e.disabled&&!e.readOnly&&fe(e,Pe._WJC_CHECKBOX)&&$(e,"."+z.hostElement)==this.hostElement},t.prototype._wantsInput=function(e){return this._isInputElement(e)&&!this.activeEditor&&!this._isNativeCheckbox(e)&&!fe(e,z.gridIme)&&J(document.body,e)},t._getMaxSupportedCssHeight=function(){if(!t._maxCssHeight){var e=265e5;Ie()?e=15e5:Gt()&&(e=175e5),t._maxCssHeight=e}return t._maxCssHeight},t._getRtlMode=function(){if(!t._rtlMode){var e=Oe('<div dir="rtl"><div></div></div>');B(e,{visibility:"hidden",width:100,height:100,overflow:"auto"}),B(e.firstChild,{width:2e3,height:2e3}),document.body.appendChild(e);var n=e.scrollLeft;e.scrollLeft=-1e3;var i=e.scrollLeft;Ne(e),t._rtlMode=i<0?"neg":n>0?"rev":"std"}return t._rtlMode},t.prototype.getEmptyRequiredCell=function(e){return this._getEmptyRequiredCell(e)},t.prototype._getEmptyRequiredCell=function(e){if(e>=0)for(var n=0;n<this.columns.length;n++){var i=this.getCellData(e,n,!1);if(this.columns[n].visible&&this.columns[n].getIsRequired(this.rows[e])&&(i===""||i==null)){if(!this.columns[n].isReadOnly&&!this.rows[e].isReadOnly)return n;console.warn("Incorrect data. Cell ("+e+", "+n+") is  at the same time  required, empty and read-only")}}return null},t.prototype.adjustFrozenRowColSize=function(e,n,i){var o=n===lr.Column,s=o?this.columns:this.rows,l=o?this.columns._frozenInternal:this.rows._frozenInternal,a=o?this._szClient.width:this._szClient.height;if(!(e<0||e>=s.length)&&s.isFrozen(e)){var u=a-(o?l>=0?this.columns.slice(0,this.columns._frozenInternal).reduce(function(d,f){return d+f.renderSize},0):this.columns.slice(this.columns.length+this.columns._frozenInternal,this.columns.length).reduce(function(d,f){return d+f.renderSize},0):l>=0?this.rows.slice(0,this.rows._frozenInternal).reduce(function(d,f){return d+f.renderSize},0):this.rows.slice(this.rows.length+this.rows._frozenInternal,this.rows.length).reduce(function(d,f){return d+f.renderSize},0))-5,h=s[e].size||s[e].renderSize,c=i>u?h+u:h+i;s[e].size=c}},t.prototype._adjustMaxContentWidth=function(){if(this.rows.length!==0&&this.columns.length!==0&&this._maxContent){var e=document.createElement("div");e.style.visibility="hidden",this.hostElement.appendChild(e);for(var n=0,i=1/0,o=new Array(this.columns.length).fill(0),s=0;s<this.columns.length;s++){for(var l=0,a=1/0,u=Math.min(this._contentEstimationLimit,this.rows.length),h=0;h<u;h++){var c=Math.round(h*this.rows.length/u),d=this._getDesiredWidth(this.cells,c,s,e);l=Math.max(l,d),a=Math.min(a,d)}o[s]=l,n+=l,i=Math.min(i,a)}this.hostElement.removeChild(e);var f=window.innerWidth,p=this.hostElement.parentElement?this.hostElement.parentElement.offsetWidth:f,_=window.getComputedStyle(this.hostElement),v=this.hostElement.getBoundingClientRect();_.minWidth.includes("content")&&(this.hostElement.style.minWidth=Math.min.apply(Math,o)+"px"),_.maxWidth==="min-content"?this.hostElement.style.maxWidth=i+"px":_.maxWidth==="fit-content"||_.maxWidth==="max-content"?this.hostElement.style.maxWidth=n>p?p+"px":n+"px":this.hostElement.style.width=n>v.width?"100%":"",this.hostElement.parentElement.style.overflowX=n>f||n>p?"auto":"hidden";var b=window.innerHeight-(v.top+window.pageYOffset)-50;this.hostElement.style.maxHeight=b+"px"}},t.prototype._isAllCellsSelected=function(){var e=this.selection;return this.selectedRanges.length===1&&this.columns.length===e.columnSpan&&this.rows.length===e.rowSpan},t.prototype._canResizeAllCellsWithoutCtrl=function(){return this._canOverRuleCtrlPress&&this.selectionMode===ae.MultiRange},t.prototype._handleScrollEnd=function(){var e=this;this._scrollEndTimer!==null&&clearTimeout(this._scrollEndTimer),this._scrollEndTimer=window.setTimeout(function(){e._updateStickyHeaders()},75)},t.prototype._updateLayoutOnPin=function(){var e=this._root,n=this._hdrVis&le.Row?this._hdrCols.getTotalSize():0,i=this._hdrVis&le.Column?this._hdrRows.getTotalSize():0,o=e.offsetWidth-e.clientWidth,s=e.offsetHeight-e.clientHeight,l=e.offsetWidth-n-o,a=e.offsetHeight-i-s,u=e.scrollTop,h=Math.abs(e.scrollLeft),c=this.cells.height-a,d=this.cells.width-l;u>c&&e.scrollTo({top:c,left:h}),h>d&&e.scrollTo({top:u,left:this.rightToLeft?-d:d})},t.prototype._hasScroll=function(e,n){if(n===void 0&&(n=0),e.length&&e._frozenInternal&&e._frozenInternal<0){if(e instanceof Yi)return e.lastFrozen.pos+n>this._szClient.width+e.lastFrozen._antipos;if(e instanceof ki)return e.lastFrozen.pos+n>this._szClient.height+e.lastFrozen._antipos}return!1},t.prototype._alignTheTail=function(e){if(e._frozenInternal&&e._frozenInternal<0&&e._lastFrozen>0){var n=e[e._lastFrozen-1],i=n.pos+n.renderSize,o=this.scrollPosition;if(e instanceof Yi){var s=this._szClient.width+e.lastFrozen._antipos;if(i+this._ptScrl.x<s){var l=s-i-this._ptScrl.x;o.x+=l,this.scrollPosition=o}}else e instanceof ki&&(s=this._szClient.height+e.lastFrozen._antipos,i+this._ptScrl.y<s&&(l=s-i-this._ptScrl.y,o.y+=l,this.scrollPosition=o))}},t.prototype._getRangesToResize=function(e,n,i){var o,s,l=i,a=this._getResizingInfo(n,e),u=a.isRowResizing,h=a.isColResizing,c=a.rangeBeingResized;return o=this.selection.containsColumn(c.col),s=this.selection.containsRow(c.row),(h&&!o||u&&!s)&&(l=[c]),l},t.prototype._getResizingInfo=function(e,n){var i=this._mouseHdl,o={isRowResizing:i._szRowCol instanceof _t,isColResizing:i._szRowCol instanceof Je,rangeBeingResized:null};if(e){var s=this.hitTest(n);o.isRowResizing=s.edgeBottom,o.isColResizing=s.edgeRight,o.rangeBeingResized=s.range}else i._szArgs&&(o.rangeBeingResized=i._szArgs.range);return o},t.prototype._handleRowColResizing=function(e,n){if(n.row==-1){if(!e.columns.isFrozen(n.col)||!n.data||!n.data.isPrimaryDragged)return;var i=n.getColumn(),o=(a=e.columns.getFrozenSize())-i.renderWidth+n.data.newSize,s=n.data.newSize>i.renderWidth,l=e.clientSize.width;o+t._MAX_FROZEN_GAP_LIMIT>l&&s&&(n.data.maxSize=l-a+i.renderWidth,n.data.internalCancel=!0)}else{if(!e.rows.isFrozen(n.row)||!n.data||!n.data.isPrimaryDragged)return;var a,u=n.getRow(),h=(o=(a=e.rows.getFrozenSize())-u.renderHeight+n.data.newSize,s=n.data.newSize>u.renderHeight,e.clientSize.height);o+t._MAX_FROZEN_GAP_LIMIT>h&&s&&(n.data.maxSize=h-a+u.renderHeight,n.data.internalCancel=!0)}},t.prototype._getRowColResizedHandler=function(e,n){var i=this,o=new Set;return n?function(s,l){l.data&&(l.data.isPrimaryDragged&&(o.clear(),queueMicrotask(function(){var a=e.rows.getFrozenSize(),u=Array.from(o).filter(function(f){return e.rows.isFrozen(f)});if(a+t._MAX_FROZEN_GAP_LIMIT>e.clientSize.height&&u.length>0){var h=a-u.reduce(function(f,p){return f+e.rows[p].renderHeight},0),c=e.clientSize.height-h-2,d=Math.floor(c/u.length);e.rows.deferUpdate(function(){u.forEach(function(f){return e.rows[f].height=d})})}})),o.add(l.row))}:function(s,l){l.data&&(l.data.isPrimaryDragged&&(o.clear(),queueMicrotask(function(){var a=e.columns.getFrozenSize(),u=Array.from(o).filter(function(f){return e.columns.isFrozen(f)});if(a+t._MAX_FROZEN_GAP_LIMIT>e.clientSize.width&&u.length>0){var h=a-u.reduce(function(f,p){return f+e.columns[p].renderWidth},0),c=e.clientSize.width-h-2,d=Math.floor(c/u.length);e.columns.deferUpdate(function(){u.forEach(function(f){return e.columns[f].width=d})})}e.columns.getTotalSize()==0&&(i._invalidateTimer=setTimeout(function(){e.invalidate(),i._invalidateTimer=null},H._REFRESH_INTERVAL))})),o.add(l.col))}},t.prototype._isFrozenObjectAllowed=function(){var e=this,n=!1;return"flexgrid,wjflexgrid".split(",").forEach(function(i){e.constructor.name.toLowerCase().startsWith(i)&&(n=!0)}),n},t.prototype._isFlexSheetInstance=function(){return"flexsheet,wjflexsheet".split(",").indexOf(this.constructor.name.toLowerCase())>-1},t.prototype._isServerCollectionView=function(e,n){return!n&&(n=this),ao()&&n.collectionView instanceof ao().RestCollectionView||uo()&&n.collectionView instanceof uo().ODataCollectionView},t.prototype._updateRowCount=function(e,n){var i=this._gridRoleElement();if(e.grid&&i){var o=e.grid.columnHeaders.rows.length,s=e.grid.rows.length;o!=null&&s!=null?this._setAria("aria-rowcount",s+o):i.removeAttribute("aria-rowcount")}},t.prototype._updateColumnCount=function(e,n){var i=this._gridRoleElement();e.grid&&i&&(e.length!=null&&e.grid?this._setAria("aria-colcount",e.length):i.removeAttribute("aria-colcount"))},t.prototype._ensureEditSelectionForParentGrid=function(){var e=$(this.hostElement,"."+z.cell);if(e&&e[z.cellIndex]){var n=e[z.cellIndex],i=n.panel.grid,o=!1;i.editRange&&(i.finishEditing(),o=!0),(!i.selection||!i.selection.contains(n.row,n.col))&&(i._selHdl._adjustSelection(new j(n.row,n.col),i.selectionMode),o=!0),o&&i.refresh()}},t.prototype._gridRoleElement=function(){return this._root&&this._root.parentElement?this._root.parentElement:this.hostElement},t.prototype._modifyRole=function(e,n,i){i?e.removeAttribute("role"):e.getAttribute("role")||e.setAttribute("role",n)},t.prototype._handleRefreshForA11y=function(){var e=this._eCHdr.querySelector('[role="row"]>[role="columnheader"]'),n=this._root.querySelector('[role="row"]>[role="gridcell"]');this._modifyRole(this._eCHdr,"rowgroup",!e),this._modifyRole(this._root,"rowgroup",!n)},t.prototype.announceShortcut=function(e){var n=this._srMessageHelper;n&&(n.textContent=e)},t.prototype.destroyScreenReaderShortCutNotifier=function(){this._srMessageHelper&&this._srMessageHelper.remove(),this._srMessageHelper=null},t._WJS_STICKY=q.sticky,t._WJS_MEASURE=q.measuring,t._WJS_UPDATING=q.updating,t._WJS_WSPRE=z.whiteSpacePre,t._MIN_VIRT_ROWS=200,t._RESIZE_SCRL_GAP=5,t._MAX_FROZEN_GAP_LIMIT=2,t._FLEXGRID_COUNT=1,t._defTypeWidth=((ys={})[Ae.Number]="0.714285714*",ys),t._ctrlTemplate="",t}(H),xr=function(){function r(t){var e=this;this._updateImeFocusAsyncBnd=this._updateImeFocusAsync.bind(this),this._cmpstartBnd=this._compositionstart.bind(this),this._keypressBnd=this._keypress.bind(this),this._suspended=!1,this._handlingCompositionStart=!1,this._g=t;var n=Oe('<textarea class="'+z.gridEditor+" "+ce.formControl+" "+z.gridIme+'"/>');B(n,r._cssHidden),vr(n),n.tabIndex=-1,S(n,"aria-label",W.FlexGrid.ariaLabels.IMEInput),this._tbx=n,this._suspended=!1,this._maskProvider=new un(n),t._imeContainer.appendChild(n),this._updateImeFocus();var i=t.hostElement,o=t.addEventListener.bind(t),s=this._updateImeFocusAsyncBnd;o(i,"blur",s,!0),o(i,"focus",s,!0),o(n,"compositionstart",this._cmpstartBnd),Bs()&&o(i,"keypress",this._keypressBnd),t.selectionChanged.addHandler(s,this),t.cellEditEnded.addHandler(this._cellEditEnded,this),t.cellEditEnding.addHandler(this._cellEditEnding,this),o(i,"mousedown",function(l){var a=$(Z(),"."+z.hostElement)==t.hostElement,u=t.hitTest(l);a&&u.panel==t.cells&&fe(u.target,z.cell)&&(t.isReadOnly||l.preventDefault())}),t.gotFocus.addHandler(function(){return e._updateImeFocus()})}return r.prototype.dispose=function(){var t=this._g,e=t.hostElement,n=this._tbx,i=t.removeEventListener.bind(t),o=this._updateImeFocusAsyncBnd;i(e,"blur",o),i(e,"focus",o),i(e,"keypress",this._keypressBnd),i(n,"compositionstart",this._cmpstartBnd),t.selectionChanged.removeHandler(o),t.cellEditEnded.removeHandler(this._cellEditEnded),t.cellEditEnding.removeHandler(this._cellEditEnding),Ne(n),this._suspended=!1},r.prototype._compositionstart=function(t){var e=this,n=this._g;if(!n.activeEditor){var i=n._selHdl.selection;this._handlingCompositionStart=!0;var o=n.startEditing(!1,i.row,i.col,!1,t);if(this._handlingCompositionStart=!1,o){if(n.activeEditor&&n.activeEditor.type!="checkbox"){i=n.editRange;var s=n._getBindingColumn(n.cells,i.row,n.columns[i.col]),l=s&&s._edt,a=n.activeEditor,u=this._tbx,h=n.cells.hostElement,c=n.columns[i.col].pos+h.offsetLeft,d=n.rows[i.row].pos+h.offsetTop,f=n.getCellBoundingRect(i.row,i.col),p=n.cells.getCellElement(i.row,i.col);f.width=p.offsetWidth,f.height=p.offsetHeight,n.rows.isFrozen(i.row)&&(d+=n._root.scrollTop,n.rows._frozenInternal<0&&n._hasScroll(n.rows)&&(d=n._szClient.height+n.rows[i.row]._antipos+h.offsetTop+n._root.scrollTop)),n.columns.isFrozen(i.col)&&(c+=n._root.scrollLeft,n.columns._frozenInternal<0&&n._hasScroll(n.columns)&&(c=n._szClient.width+n.columns[i.col]._antipos+h.offsetLeft+n._root.scrollLeft));var _=p.querySelector("."+ce.btn+"."+Xt.right);_&&(f.width-=_.offsetWidth),"minLength,maxLength,pattern".split(",").forEach(function(T){S(u,T,a.getAttribute(T))});var v=a instanceof HTMLTextAreaElement;S(u,"wrap",v?"soft":"off");var b=getComputedStyle(p),m=b.paddingTop;if(i.rowSpan>1&&!v){var w=parseFloat(b.lineHeight);isNaN(w)&&(w=1.2*parseFloat(b.fontSize)),m=Math.max(0,(f.height-w)/2)+"px"}var g={position:"absolute",left:c,top:d,width:f.width-1,height:f.height-1,paddingTop:m,paddingLeft:b.paddingLeft,paddingRight:b.paddingRight,textAlign:b.textAlign,zIndex:p.style.zIndex};if(n.rightToLeft&&(g.right=parseInt(p.style.right)+parseInt(n.cells.hostElement.style.right),g.left=""),B(u,g),l){var y=l._tbx.getBoundingClientRect(),I=u.getBoundingClientRect(),x=window.getComputedStyle(u),R=parseFloat(x.left),k=parseFloat(x.right),D=parseFloat(x.top);n.rightToLeft?B(u,{right:k+I.right-y.right+"px",top:D+y.top-I.top+"px",width:y.width+"px",height:y.height+"px"}):B(u,{left:R+y.left-I.left+"px",top:D+y.top-I.top+"px",width:y.width+"px",height:y.height+"px"})}n._edtHdl._edt=u,u.select();var E=a.value;Ht()?(u.value!="　"&&u.value!=" "||(u.value=E),ne(u,u.value.length)):setTimeout(function(){u.value!="　"&&u.value!=" "||(u.value=E),ne(u,u.value.length)},20),H.sharedState.InvalidScroll=pi(),u.placeholder=a.placeholder,a.placeholder="",a.value=""}}else this._tbx.blur(),setTimeout(function(){e._tbx.focus(),n._setFocusNoScroll(n.hostElement)},20)}},r.prototype._cellEditEnding=function(){var t=this._maskProvider;t&&t.mask&&t._valueChanged()},r.prototype._cellEditEnded=function(){var t=this._tbx,e=this._g;if(this._enableIme()){var n=Z();n.blur(),e._isScrollingByWheel?setTimeout(function(){n.focus(),e._setFocusNoScroll(e.hostElement),t.value="",n.focus()},20):(n.focus(),e._setFocusNoScroll(e.hostElement),n.focus()),t.value="",B(t,r._cssHidden),this._updateImeFocus()}},r.prototype._keypress=function(t){!t.defaultPrevented&&t.target==this._tbx&&!(t.ctrlKey||t.altKey||t.metaKey||t.keyCode==27||this._g.activeEditor)&&(this._tbx.value="",this._compositionstart(t),t.stopPropagation())},r.prototype._updateImeFocus=function(){var t=this._g,e=this._tbx,n=Z(),i=t._getTabIndex();if(t.activeEditor||$(n,"."+z.hostElement)!=t.hostElement)(t.isDisabled||i<0)&&e.tabIndex>=0&&(e.tabIndex=-1);else if(this._enableIme()&&!t._wantsInput(n)){n!=e&&(t.activeCell&&(t.activeCell.tabIndex=-1),e.tabIndex=i,e.disabled=!1,e.value="",this._showCellMessageForScreenReader(),t.isTouching||(window&&window.top!=window.self?(ne(e,0,0,!1),t._setFocusNoScroll(e)):(ne(e,0),e.focus())));var o=t._selHdl.selection,s=o.isValid?t._getBindingColumn(t.cells,o.row,t.columns[o.col]):null;this._maskProvider.mask=s?s.mask:null}else if(e.tabIndex=-1,e.disabled=!0,e.value="",n==e){e.blur();var l=t.activeCell;l?(l.tabIndex=i,l.focus()):t.focus()}},r.prototype._updateImeFocusAsync=function(){var t=this;this._toFocus&&clearTimeout(this._toFocus),this._toFocus=setTimeout(function(){t._toFocus=null,t._updateImeFocus()},100)},r.prototype._resetTabIndex=function(){this._tbx.tabIndex=-1},r.prototype._suspendIME=function(){this._suspended=!0},r.prototype._resumeIME=function(){this._suspended=!1},r.prototype._enableIme=function(){var t=this._g,e=t._selHdl.selection;if(this._suspended||!t.canEditCell(e.row,e.col))return!1;var n=e.isValid?t._getBindingColumn(t.cells,e.row,t.columns[e.col]):null;return!(!n||n.dataType==Ae.Boolean)&&!(n&&n.dataMap&&n.dataMapEditor==it.RadioButtons||n.dataMapEditor==it.Menu)},r.prototype._showCellMessageForScreenReader=function(){var t=this,e=Z();if(e&&e!==this._tbx){var n=W.FlexGrid.accessibilityHelperMessage.imeHandler.focusImeCell,i=e.parentElement.getAttribute("aria-rowindex"),o=e.getAttribute("aria-colindex"),s="",l="";if(e.id){var a=e.id.split("-"),u=Number(a[a.length-1]);!isNaN(u)&&this._g.columnHeaders.columns[u]&&this._g.columnHeaders.rows.forEach(function(c,d){d!==0&&(s+=" ");var f=t._g.columnHeaders.getCellData(d,u,!1);Sn(f)&&(f=""),s+=f});var h=Number(a[a.length-2]);!isNaN(h)&&this._g.rowHeaders.rows[h]&&this._g.rowHeaders.columns.forEach(function(c,d){d!==0&&(l+=" ");var f=t._g.rowHeaders.getCellData(h,d,!1);Sn(f)&&(f=""),l+=f})}n=zt(n,{value:e.textContent,rowIndex:i,colIndex:o,colName:s,rowName:l}),this._g.announceShortcut(n)}},r._cssHidden={position:"fixed",width:"0px",left:-32e3,top:-32e3,overflow:"hidden"},r}();function Mo(r,t,e,n,i){var o=r.columns,s=o._frozenInternal,l=r.allowPinning;n&&l==Nt.Both&&(l=i?Nt.ColumnRange:Nt.SingleColumn);var a=!o.isFrozen(t),u=s>=0?s:o._lastFrozen-1,h=s>=0?1:-1,c=a?t===u:t===u-h,d=r.rowHeaders.columns.length,f=W.FlexGrid.accessibilityHelperMessage,p=r.getColumn(t).header,_=a?f.pin.pinColumnName:f.pin.unpinColumnName,v=new Re(r.cells,new j(e,t));if(r.onPinningColumn(v)){var b=o._frozenInternal>=0?new Set(o.slice(0,o._frozenInternal).map(function(I,x){return x})):new Set(o.slice(o.length+o._frozenInternal).map(function(I,x){return x+o.length+o._frozenInternal}));if(l==Nt.SingleColumn)if(b.has(t)?b.delete(t):b.add(t),xs(r,b),c)o._frozenInternal=a?o._frozenInternal+h:o._frozenInternal-h;else if(r._hasColumnGroups()){var m=r._getColumnGroup(e,t);r._canMoveColumnGroup(e,t,0,u)||m&&m._ownerList&&m._ownerList.owner&&m._ownerList.owner.collapseTo&&(m._ownerList.owner.collapseTo="");var w=m._ownerList.length>1?e:Math.max(e-1,0);if(o.isFrozen(t)){if(!w||!c||w&&r._getColumnGroup(e-1,t)!=r._getColumnGroup(e-1,t+1)){var g=s>=0?s:o._lastFrozen;r._moveColumnGroup(w,t,0,g,!1)}o._frozenInternal-=h}else r._moveColumnGroup(w,t,0,u,!1),o._frozenInternal+=h}else o.isFrozen(t)?(_=f.pin.unpinColumnName,o.moveElement(t,u-h,!1),o._frozenInternal-=h):(_=f.pin.pinColumnName,o.moveElement(t,u,!1),o._frozenInternal+=h);if(l==Nt.ColumnRange){if(o._frozenInternal>=0)for(var y=0;y<=t;y++)b.add(y);else if(o._frozenInternal<0)for(y=t;y<o.length;y++)b.add(y);xs(r,b),t+1!=s&&o._frozenInternal>=0?(o.frozen=t+1,_=f.pin.pinColumnIndex):-(o.length-t)!=s&&o._frozenInternal<0?(o._frozenInternal=-(o.length-t),_=f.pin.pinColumnIndex):(o._frozenInternal=0,_=f.pin.unpin)}r._updateLayoutOnPin(),r.onPinnedColumn(v),_=zt(_,{name:p,colIndex:t+d+1}),r.announceShortcut(_)}}function xs(r,t){var e=r.columns;if(Array.from(t).reduce(function(s,l){return s+e[l].renderSize},0)+5>r._szClient.width){var n=Array.from(t).sort(function(s,l){return s-l}),i=r._szClient.width-5*n.length;r.columns.length<=t.size&&(i=r._szClient.width);var o=Math.round(i/n.length);n.forEach(function(s){e[s].width=o})}r.invalidate()}function Ao(r,t,e,n,i,o,s){var l=r,a=l.allowSorting,u=l.collectionView,h=u?u.sortDescriptions:null;if(u&&u.canSort&&a!=fi.None){var c=t.columns[e],d=l._getBindingColumn(t,n,c),f=d?d._getBindingSort():null;if(d.allowSorting&&f){if(c&&d&&c._uid==d._uid){var p=l.getMergedRange(t,n,e,!1);if(p&&p.columnSpan>1)return}var _=new Re(t,new j(n,e),i),v=W.FlexGrid.accessibilityHelperMessage,b="";if(l.onSortingColumn(_)){l._edtHdl._commitRowEdits();for(var m=-1,w=null,g=0;g<h.length;g++)if(h[g].property==f){m=g,w=h[g];break}h.deferUpdate(function(){if(o&&s)h.clear(),b=v.sort.clearSort;else if(w){var y=d.sortOrder!=null?d.sortOrder:l.sortOrder;o||w.ascending&&(y===Et.DescAscNone||l.isTouching&&y===Et.DescAsc)||!w.ascending&&(y===Et.AscDescNone||l.isTouching&&y===Et.AscDesc)?(h.removeAt(m),b=v.sort.clearSort):(I=!w.ascending,h[m]=new Hi(f,I),b=I?v.sort.sortAscending:v.sort.sortDescending)}else{a!=fi.MultiColumn&&(h.clear(),b=v.sort.clearSort);var I=d.sortOrder==null?l.sortOrder==Et.AscDesc||l.sortOrder==Et.AscDescNone:d.sortOrder==Et.AscDesc||d.sortOrder==Et.AscDescNone,x=new Hi(f,I);h.push(x),b=I?v.sort.sortAscending:v.sort.sortDescending}}),b=zt(b,{name:c.header}),l.announceShortcut(b),l.onSortedColumn(_)}}}}var Hl=function(){function r(t){this._nrt=new Me,this._top=!1,this._keydownBnd=this._keydown.bind(this),this._committing=!1,this._pasting=!1,this._g=t,this._attach()}return Object.defineProperty(r.prototype,"newRowAtTop",{get:function(){return this._top},set:function(t){if(t!=this.newRowAtTop){this._top=M(t),this.updateNewRowTemplate();var e=this._g;this._top&&e.selectionMode==ae.ListBox&&(e.rows.forEach(function(n,i){n._setFlag(ie.Selected,i==0,!0)}),e.select(0,e.selection.col))}},enumerable:!0,configurable:!0}),r.prototype.updateNewRowTemplate=function(){var t=this._g,e=t.editableCollectionView,n=t.rows,i=this._nrt,o=e&&e.canAddNew&&t.allowAddNew&&!t.isReadOnly,s=n.indexOf(i),l=this._top?0:n.length-1,a=!1;if(!o&&s>-1){var u=t.selection;u.row==s&&t.select(u.row-1,u.col),n.removeAt(s)}else o&&(s<0?a=!0:s!=l&&(n.removeAt(s),a=!0),a&&(this._top?n.insert(0,i):n.push(i)),i&&(i._ubv=null,i._setFlag(ie.ParentCollapsed,!1),this._top&&t.selectionMode==ae.ListBox||i._setFlag(ie.Selected,!1)))},r.prototype._attach=function(){var t=this._g;t&&(t.pasting.addHandler(this._pastingData,this),t.pasted.addHandler(this._pastedData,this),t.loadedRows.addHandler(this.updateNewRowTemplate,this),t.addEventListener(t.hostElement,"keydown",this._keydownBnd,!0))},r.prototype._detach=function(){var t=this._g;t&&(t.pasting.removeHandler(this._pastingData,this),t.pasted.removeHandler(this._pastedData,this),t.loadedRows.removeHandler(this.updateNewRowTemplate),t.removeEventListener(t.hostElement,"keydown",this._keydownBnd,!0))},r.prototype._keydown=function(t){!t.defaultPrevented&&t.keyCode==C.Escape&&this._g.activeEditor==null&&this._top&&this._nrt.dataItem&&(this._nrt.dataItem=null,this._g.invalidate())},r.prototype._beginningEdit=function(t,e){if(!e.cancel){var n=t.rows[e.row];n instanceof Me&&this._handleEditStarting(t,e,n)}},r.prototype._pastingData=function(t,e){e.cancel||(this._pasting=!0)},r.prototype._pastedData=function(t,e){this._pasting=!1},r.prototype._rowEditStarting=function(t,e){if(this._pasting){var n=t.rows[e.row];n instanceof Me&&this._handleEditStarting(t,e,n)}},r.prototype._rowEditEnding=function(t,e){var n=t.editableCollectionView,i=this._nrt.dataItem;if(n&&this._top&&i&&!e.cancel){var o=n.currentAddItem;if(!(o&&o==i)){o=n.addNew();for(var s in i)o[s]=i[s]}}},r.prototype._rowEditEnded=function(t,e){var n=this,i=t.editableCollectionView;if(i&&!this._committing)if(this._top){if(e.cancel)return;var o=this._nrt.dataItem;if(o){this._committing=!0,this._nrt.dataItem=null;var s=this._g.rows,l=i.items.indexOf(o)+1;l<s.length&&e._rng.setRange(l,-1),t.onRowAdded(e)?i.commitNew():i.cancelNew(),this._committing=!1}var a=t.rows[e.row];setTimeout(function(){a instanceof Me&&(t._selHdl.extendedSelection.clear(),t.select(0,t.columns.firstVisibleIndex)),n.updateNewRowTemplate()},20)}else i.isAddingNew&&i.commitNew()},r.prototype._handleEditStarting=function(t,e,n){var i=t.editableCollectionView;if(i&&i.canAddNew)if(this._top)if(this._nrt.dataItem==null){var o=null,s=i.sourceCollection,l=i.newItemCreator;o=oe(l)?l():s&&s.length?new s[0].constructor:{},this._nrt.dataItem=o}else i.currentAddItem&&(t.onRowAdded(e)||i.cancelNew());else{o=i.currentAddItem&&i.currentAddItem==n.dataItem?i.currentAddItem:i.addNew(),i.moveCurrentTo(o);var a=this._nrt.isSelected;this.updateNewRowTemplate(),a&&e.row>-1&&(t.rows[e.row].isSelected=!0),t.isUpdating||t.refresh(!0),t.onRowAdded(e)||i.cancelNew()}},r}(),Me=function(r){jt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(_t),on;(function(r){r[r.None=0]="None",r[r.Cells=1]="Cells",r[r.ColumnHeaders=2]="ColumnHeaders",r[r.RowHeaders=4]="RowHeaders",r[r.AllHeaders=6]="AllHeaders",r[r.All=7]="All"})(on||(on={}));var co=function(){function r(t){t!=null&&console.error('** WARNING: the "grid" parameter has been deprecated. Please remove it.')}return r.prototype.getMergedRange=function(t,e,n,i){return i===void 0&&(i=!0),this._getMergedRange(t,e,n,i)},r.prototype._getMergedRange=function(t,e,n,i,o){i===void 0&&(i=!0),o===void 0&&(o=!0);var s,l=t.grid,a=t.cellType,u=t.columns,h=t.rows,c=h[e],d=u[n];if(c instanceof Me||!(c instanceof _t&&d instanceof Je))return null;if(t==l.columnHeaders){var f=l._getColumnGroup(e,n);if(f){var p=f._rng,_=t.columns;return _.isFrozen(p.col)!=_.isFrozen(p.col2)&&(p=p.clone(),_.isFrozen(n)?_._frozenInternal>0?p.col2=_._frozenInternal-1:p.col=_.length+_._frozenInternal:_._frozenInternal>0?p.col=_._frozenInternal:p.col2=_.length+_._frozenInternal-1),p}}if(l.showGroups&&!l.childItemsPath&&c instanceof we&&c.dataItem instanceof Tt&&a==P.Cell){if(p=new j(e,n),d.aggregate==ke.None){for(var v=u._frozenInternal>=0?u._frozenInternal:u.length+u._frozenInternal;p.col>0&&u[p.col-1].aggregate==ke.None&&p.col!=v;)p.col--;for(;p.col2<u.length-1&&u[p.col2+1].aggregate==ke.None&&p.col2+1!=v;)p.col2++}for(;p.col<n&&!u[p.col].visible;)p.col++;return p.isSingleCell?null:p}var b=!1,m=on,w=P;switch(l.allowMerging){case m.None:b=!0;break;case m.Cells:b=a!=w.Cell;break;case m.ColumnHeaders:b=a!=w.ColumnHeader&&a!=w.TopLeft;break;case m.RowHeaders:b=a!=w.RowHeader&&a!=w.TopLeft;break;case m.AllHeaders:b=a==w.Cell}if(b)return null;if(a==w.Cell){var g=l.editableCollectionView,y=g?g.currentAddItem:null;if(y&&c.dataItem==y)return null}var I=t.grid.editableCollectionView;if(s=I?I.currentAddItem:null,u[n].allowMerging){p=new j(e,n);var x=t._vrb,R=0,k=h.length-1;e>=h._frozenInternal?i&&(a==P.Cell||a==P.RowHeader)&&l._vtRows<h.length&&x&&(R=x.topRow,k=x.bottomRow):h.length>h._frozenInternal&&(k=h._frozenInternal-1);for(var D=t._getCellData(e,n,o),E=e-1;E>=R&&this._mergeCell(t,e,n,E,n,s,o,D);E--)p.row=E;for(var T=e+1;T<=k&&this._mergeCell(t,e,n,T,n,s,o,D);T++)p.row2=T;for(;p.row<e&&!h[p.row].visible;)p.row++;if(!p.isSingleCell)return p}if(h[e].allowMerging){p=new j(e,n),x=t._vrb;var L=0,O=u.length-1;n>=u._frozenInternal?i&&(a==P.Cell||a==P.ColumnHeader)&&l._vtCols<u.length&&x&&(L=x.leftCol,O=x.rightCol):O=u._frozenInternal-1,D=t._getCellData(e,n,o);for(var X=n-1;X>=L&&this._mergeCell(t,e,n,e,X,s,o,D);X--)p.col=X;for(var Q=n+1;Q<=O&&this._mergeCell(t,e,n,e,Q,s,o,D);Q++)p.col2=Q;for(;p.col<n&&!u[p.col].visible;)p.col++;if(!p.isSingleCell)return p}return null},r.prototype._mergeCell=function(t,e,n,i,o,s,l,a){l===void 0&&(l=!0),a===void 0&&(a=null);var u=t.rows[e],h=t.rows[i];if(!u||!h||u instanceof we||u instanceof Me||h instanceof we||h instanceof Me||s&&(u.dataItem==s||h.dataItem==s)||e!=i&&t.rows.isFrozen(e)!=t.rows.isFrozen(i)||n!=o&&t.columns.isFrozen(n)!=t.columns.isFrozen(o)||e!=i&&(n>0&&(u.allowMerging&&this._mergeCell(t,e,n-1,e,n,s,l)||h.allowMerging&&this._mergeCell(t,i,n-1,i,n,s,l))||o<t.columns.length-1&&(u.allowMerging&&this._mergeCell(t,e,o,e,o+1,s,l)||h.allowMerging&&this._mergeCell(t,i,o,i,o+1,s,l))))return!1;var c=t._getCellData(i,o,l);return a==null&&(a=t._getCellData(e,n,l)),!!(a==c||Be(a)&&F.equals(a,c))},r}(),Es="$WJ-MSKP",Pe=function(){function r(){}return r.prototype.updateCell=function(t,e,n,i,o,s){var l;i.style.cssText="";var a=t.grid,u=a.rightToLeft,h=t.rows,c=t.columns,d=h[e],f=c[n],p=e,_=n,v=d instanceof we?d:null,b=!!v&&v.isSummary,m=v&&(a.groupSummaryPosition===Pt.Bottom||a.groupSummaryPosition===Pt.Auto&&!v.isCollapsed),w=d instanceof Me?d:null,g=!!(sr()&&d instanceof sr().DetailRow),y=f.renderWidth,I=d.renderHeight,x=t.cellType,R=z.cell,k="",D={display:""},E=P,T=0,L=0,O=!0;if(v&&n!=c.firstVisibleIndex?!b&&m&&(O=!1):b&&n==c.firstVisibleIndex&&(O=!1),s!=0&&i.firstElementChild&&(i.childNodes.length==1&&i.firstElementChild.type=="checkbox"||(i.textContent="")),a._useFrozenDiv()){if(i.getAttribute("left-for-clone")&&i.removeAttribute("left-for-clone"),i.getAttribute("top-for-clone")&&i.removeAttribute("top-for-clone"),c.isFrozen(n)&&c._frozenInternal<0){var X=a._szClient.width+f._antipos;(L=X<=f.pos?X:0)&&Ci()&&!hi()&&L--,L&&S(i,"left-for-clone",L)}if(h.isFrozen(e)&&h._frozenInternal<0){var Q=a._szClient.height+d._antipos;(T=Q<=d.pos?Q:0)&&Ci()&&!hi()&&T--,T!=Math.floor(T)&&(T=Math.round(T)),T&&(a.columnFooters.rows.length>0&&(T-=a.columnFooters.height),S(i,"top-for-clone",T))}}o&&!o.isSingleCell&&(e=o.row,n=o.col,p=o.row2,_=o.col2,d=h[e],f=c[n],v=d instanceof we?d:null,I=(me=o.getRenderSize(t)).height,y=me.width);var Y,se,ue,de,Te,Ce,N=a._getBindingColumn(t,e,f),je=N?N.dataType:d?d.dataType:void 0;ue=x==E.RowHeader||x==E.Cell&&(!v||a.childItemsPath),Ce=N&&N.isContentHtml||d&&d.isContentHtml,se=x==E.Cell?a._getMapEditor(d,N):null,Y=null,N&&(Y=N.dataMap),Y==null&&d&&(Y=d.dataMap),de=ue&&se==it.RadioButtons,Te=je==Ae.Boolean&&!Y;var Ze=ue&&se==it.Menu,he=f.pos,ze=d.pos,ot=a._ptScrl,gt=h.length>h.frozenEnd,mt=c.length>c.frozenEnd;if(a._useFrozenDiv()&&x==E.Cell&&!a.editRange)c.isFrozen(n)&&!h.isFrozen(p)?ze+=ot.y:h.isFrozen(e)&&!c.isFrozen(_)&&(he+=ot.x);else{var me=a._szClient;if(h.isFrozen(p)&&(h._frozenInternal>=0?(ze=Math.min(ze,me.height),I=Math.min(I,Math.max(0,me.height-ze)),ze-=ot.y):(ze=Math.min(d.pos,me.height+d._antipos),h.isFrozen(h._firstVisible)||(ze-=ot.y),Ci()&&!hi()&&gt&&(ze-=1))),c.isFrozen(_)&&!g){var ct=me.width!=0?me.width:a._preWidth();c._frozenInternal>=0?(he=Math.min(he,ct),he-=ot.x):(he=Math.min(f.pos,ct+f._antipos),he-=ot.x,Ci()&&!hi()&&mt&&(he-=1))}}u?D.right=he+"px":D.left=he+"px",h.isFrozen(p)||(ze-=t._getOffsetY()),D.top=ze+"px",D.width=y+"px",D.height=I+"px";var qt=0;c.isFrozen(n)&&(qt+=1),h.isFrozen(e)&&(h._frozenInternal<0&&a.columnFooters.rows.length>0&&(D.top=ze-a.columnFooters.height+"px"),qt+=2,I===0&&(qt=-1));var lt=!1,yi=a.alternatingRowStep;if(yi&&(!o||o.row==o.row2)&&(lt=d.visibleIndex%(yi+1)==0,yi==1&&(lt=!lt)),x==E.Cell)v&&(R+=" "+z.group),v&&b&&(R+=" "+z.groupSummary),lt&&(R+=" "+z.alt),(h.isFrozen(e)||c.isFrozen(n))&&(R+=" "+z.frozen),w&&(R+=" "+z.new),d&&d.cssClass&&(R+=" "+d.cssClass),N&&N.cssClass&&(R+=" "+N.cssClass),a.headersVisibility&le.Row&&S(i,"id",t.grid._ariaId+"-cell-"+e+"-"+n);else{R+=" "+z.header,lt&&(R+=" "+z.headerAlt),d&&d.cssClass&&x==E.ColumnHeader&&(R+=" "+d.cssClass),N&&N.cssClass&&x==E.RowHeader&&(R+=" "+N.cssClass);var ai=!1;x!=E.ColumnHeader&&x!=E.TopLeft||a.allowResizing&Jt.Columns&&(ai=a._mouseHdl._getResizeCol(t,_)!=null),ai||x!=E.RowHeader||a.allowResizing&Jt.Rows&&(ai=a._mouseHdl._getResizeRow(t,p)!=null),ai&&(R+=" "+z.bigHeader)}var Hn=x==E.Cell&&n==c.firstVisibleIndex&&v&&!vn(a,e,n),ni=Hn&&v.hasChildren,Ir=x,ko=a._isTransposed(),qe=(Ir==E.ColumnHeader&&!ko||Ir==E.RowHeader&&ko)&&a._hasColumnGroups()?a._getColumnGroup(e,n):null;d&&d.cssClassAll&&(R+=" "+d.cssClassAll),N&&N.cssClassAll&&(qe==null||qe.columns.length==0)&&(R+=" "+N.cssClassAll),qe&&qe.cssClassAll&&qe.columns.length>0&&(R+=" "+qe.cssClassAll);var cn=rn,Sr=t.getSelectedState(e,n,o);Sr!=cn.None&&x==E.Cell&&!Te&&a.editRange&&a.editRange.contains(e,n)&&(Sr=cn.None);var dn=!1,Ho=((l={})[E.RowHeader]="rh",l[E.ColumnHeader]="ch",l[E.TopLeft]="tl",l[E.BottomLeft]="bl",l[E.ColumnFooter]="cf",l)[x];switch(Ho&&(a.headersVisibility&le.Row&&i.dataset.groupPanel!=="true"&&S(i,"id",t.grid._ariaId+"-"+Ho+"-"+e+"-"+n),dn=!0),Sr){case cn.Active:R+=" "+q.active;break;case cn.Cursor:R+=dn?" "+z.focusHeaderCell:" "+q.selected,R+=" "+q.active;break;case cn.Selected:R+=" "+q.multiSelected}if(h.isFrozen(p)){if(h._frozenInternal>0)R+=" "+z.frozenRow,p===h._lastFrozen&&(R+=" "+z.lastFrozenRow);else if(R+=" "+z.frozenRowBottom,e===h._lastFrozenVisible)R+=" "+z.lastFrozenRowBottom;else if(v&&h.length-e<Math.abs(h._frozenInternal)){for(var Rr=e-1,Lo=!1;Rr>=h.length+h._frozenInternal;){if(h[Rr].isVisible){Lo=!0;break}Rr--}Lo||(R+=" "+z.lastFrozenRowBottom)}}if(c._frozenInternal>0)_<=c._lastFrozen&&(R+=" "+z.frozenColLeft,_===c._lastFrozen&&(R+=" "+z.frozenCol));else if(c._frozenInternal<0&&_>=c._lastFrozen){if(R+=" "+z.frozenColRight,n===c._lastFrozenVisible)R+=" "+z.frozenColRightEdge;else if(c.length-n<Math.abs(c._frozenInternal)){for(var Dr=n-1,zo=!1;Dr>=c.length+c._frozenInternal;){if(c[Dr].isVisible){zo=!0;break}Dr--}zo||(R+=" "+z.frozenColRightEdge)}}h._frozenInternal<0&&p==h._lastUnfrozenVisible&&(R+=" "+z.lastVisibleRow),c._frozenInternal<0&&_==c._lastUnfrozenVisible&&(R+=" "+z.lastVisibleCol),(N&&N.wordWrap||d&&d.wordWrap)&&(R+=" "+z.wrap),(N&&N.multiLine||d&&d.multiLine)&&(R+=" "+z.multiline);var Fo=N?N.getAlignment(d):void 0;if(Fo&&(k=" "+Xt.align+"-"+Fo),qe&&qe.align&&(k=" "+Xt.align+"-"+qe.align),D.paddingLeft=D.paddingRight=D.paddingTop=D.paddingBottom="",x==E.Cell&&a.rows.maxGroupLevel>-1&&n==c.firstVisibleIndex&&a.treeIndent){var Gl=v?Math.max(0,v.level):h.maxGroupLevel+1,jo=Math.min(a.treeIndent*Gl+a._cellPadLeft,y-a._cellPadHorz)+"px";u?D.paddingRight=jo:D.paddingLeft=jo}y<=a._cellPadHorz&&i.getAttribute(xt._WJS_MEASURE)==null&&(D.paddingLeft=D.paddingRight=0),ni&&(k=""),ni?S(i,"aria-expanded",!v.isCollapsed):i.removeAttribute("aria-expanded");var Kt=null,Ke=null;if(s!=0&&N){if(Kt=t.getCellData(e,n,!1),Ke=t.getCellData(e,n,!0),v&&m&&!v.isSummary&&Ir==E.Cell&&(Ke=""),ni&&!v.isSummary){var Tr=Ss(v,i);Ke=v.getGroupHeader()||Wt(Ke),(Vn=document.createElement("span")).classList.add(z.elemCollapseSpace),i.innerHTML=Tr.outerHTML+Vn.outerHTML+Ke}else if(x!=E.ColumnHeader||p!=a._getSortRowIndex()&&N==f){if(!(x==E.RowHeader&&!Ke&&function(){var fn=!1;if(n==a._getEditColumnIndex()){var pn=a.editableCollectionView,_n=pn?pn.currentEditItem:null;Ke=i.innerHTML=_n&&d.dataItem==_n?Zi("pencil",Ut().pencil,!0):d instanceof Me?Zi("asterisk",Ut().asterisk,!0):"",fn=!0}var Nn=N._tpl;return Nn&&(Is(Nn,i,Kt,Ke,d,N),fn=!0),fn}()))if(x!=E.Cell||je!=Ae.Boolean||Y||v&&!st(Kt))if(x==E.Cell&&Ze&&vn(a,e,n))Ce&&Y&&!Y.isEditable&&(Ke=Dt(Ke)),i.innerHTML="<span style='flex-grow:1'></span>",i.children[0].textContent=Ke,(at=document.createElement("input")).type="menu",at.value=Ke,a._edtHdl._edt=at;else if(x==E.Cell&&!de&&vn(a,e,n)){var Ln=N.inputType||d.inputType;if(Ln||(Ln=je!=Ae.Number||Y?"text":"tel"),!Y&&!N.mask&&!d.mask){var Bo=t.getCellData(e,n,!1);_e(Bo)&&(Ke=lh(Bo,N.format||d.format))}i.innerHTML=(N.multiLine||d.multiLine)&&Ln!="checkbox"?'<textarea wrap="soft"></textarea>':'<input type="'+Ln+'"/>';var at=i.children[0];be(at,z.gridEditor+" "+ce.formControl),vr(at),Ee(at,Ut().editCell),Ce&&Y&&!Y.isEditable&&(Ke=Dt(Ke)),at.value=Ke,at.tabIndex=-1,at.required=N.getIsRequired(d),S(at,"aria-required",at.required);var Vo=N.maxLength||d.maxLength;Vo&&(at.maxLength=Vo),at.style.textAlign=N.getAlignment(d);var No=N.mask||d.mask;No&&(at[Es]=new un(at,No)),a.showPlaceholders&&(at.placeholder=N.placeholder||""),(Ht()||H.sharedState.InvalidScroll)&&a._edtHdl&&a._edtHdl._edt&&(at.value=a._edtHdl._edt.value),a._edtHdl._edt=at}else{var Pr=null;if(de){var Go=[],Wl=t.getCellData(e,n,!1);Y._cv.items.forEach(function(fn,pn){var _n=fn[Y.selectedValuePath],Nn=_n===Wl?" checked":"",ia=a.isReadOnly||d.isReadOnly||f.isReadOnly||!a._edtHdl._allowEdit(e,n)?" disabled":"",Hr=Wt(Y.getDisplayValue(_n));pn===Kt&&(Pr=Hr),Go.push('<label><input type="radio" tabindex="-1"'+Nn+ia+' data-idx="'+pn+'" value="'+Hr+'"><span>'+Hr+"</span></label>")}),i.innerHTML=Go.join(" "),Pr&&(zn=Ut(),Ee(i,Pr+" "+zn.radioButtonChecked)),R+=" "+r._WJC_RADIOMAP}var Wo=ue?N._tpl:null;if(Wo&&O?Is(Wo,i,Kt,Ke,d,N):de||(x==E.Cell&&Ce?i.innerHTML=Ke:i.textContent=Ke||""),qe&&qe.collapseTo){var Mr=qe._rng;if(Mr&&(x==E.ColumnHeader&&Mr.columnSpan>1||x==E.RowHeader&&Mr.rowSpan>1)){var Ar=qe.isCollapsed;i.innerHTML='<div role="button" class="'+r._WJC_COLLAPSE+'" aria-hidden="true">'+Zi(Ar?"plus":"minus")+"</div>&nbsp;"+i.innerHTML,S(i,"aria-expanded",!Ar),Ar&&be(i,q.collapsed)}}}else{var Ti=i.firstChild;if(!v||O){if(!a._isNativeCheckbox(Ti)){var zn=Ut();i.innerHTML='<label><input type="checkbox" class="'+r._WJC_CHECKBOX+'" tabindex="-1" aria-label='+(Kt?zn.checked:zn.unchecked)+"><span>&#8203</span></label>",Ti=i.querySelector("input")}S(i,"aria-selected",Kt===!0?"true":"false"),tn(Ti,Kt),Ti.disabled=!a.canEditCell(e,n),Ti.disabled&&(Ti.style.cursor="default")}else v&&(i.innerHTML="");a.editRange&&a.editRange.contains(e,n)&&(a._edtHdl._edt=Ti)}}else{i.innerHTML=Wt(Ke);var qo=N.currentSort;if(qo&&a.showSort){R+=qo=="+"?" "+z.sortAsc:" "+z.sortDesc;var ql=hh(N);i.innerHTML+="&nbsp;"+ql}a.allowPinning&&J(a.hostElement,i)&&uh(i,a.columns.isFrozen(n),f.header)}var Mt=o;if(Mt||!a||qe?qe&&(Mt=qe._rng):Mt=a.getMergedRange(t,e,n),i.removeAttribute("aria-rowspan"),i.removeAttribute("aria-colspan"),i.removeAttribute("aria-rowindex"),Mt&&!Mt.isSingleCell){var Kl=qe&&qe.isCollapsed,Ul=dn&&qe&&!qe.isCollapsed,Yl=dn&&!qe;if(Kl)x===P.ColumnHeader&&Mt.rowSpan>1?S(i,"aria-rowspan",Mt.rowSpan):x===P.RowHeader&&Mt.columnSpan>1&&S(i,"aria-colspan",Mt.columnSpan);else if((Ul||Yl||!dn)&&(Mt.columnSpan>1&&S(i,"aria-colspan",Mt.columnSpan),Mt.rowSpan>1)){S(i,"aria-rowspan",Mt.rowSpan);var Ko=$(i,"."+z.row);if(Ko){var Or=Ko.getAttribute("aria-rowindex");Or&&Or!==""&&S(i,"aria-rowindex",Or)}}}if((se==it.DropDownList||se==it.Menu)&&a.showDropDown&&a.canEditCell(e,n)&&Bi()){var $l=ah();i.insertBefore($l,i.firstChild),vn(a,e,n)&&(R+=" "+z.hasDropDown)}}if(x==E.RowHeader||x==E.ColumnHeader){var Jl=x==E.RowHeader?!v&&!w&&d.allowDragging&&(a.allowDragging&li.Rows)!=0:(qe||f).allowDragging&&(a.allowDragging&li.Columns)!=0;S(i,"draggable",Jl?"true":null)}w&&S(i,"aria-label",Ut().newRowCell),x!==E.ColumnHeader&&x!=E.RowHeader||jl(i,f,t,a,Ke,x===E.RowHeader),E.TopLeft===x&&S(i,"role",Oo(Ke)?"gridcell":"rowheader"),R+=k,i.className!=R&&(i.className=R),D.zIndex=qt===0?"":qt;var Uo=i.style;for(var Fn in D)Uo[Fn]!==D[Fn]&&(Uo[Fn]=D[Fn]);if(a._edtHdl._edt&&a._edtHdl._edt.parentElement==i){var kr=a._root,Yo=kr.getBoundingClientRect(),wi=i.getBoundingClientRect(),jn=Yo.top+kr.clientHeight-wi.top,Bn=Yo.left+kr.clientWidth-wi.left;if(c._frozenInternal<0){var $o=document.querySelector('[wj-part="rh"]').getBoundingClientRect(),Pi=t._getFrozenPos();$o.left+$o.width>wi.left&&wi.width>Pi.x&&mt&&(Bn=Pi.x,i.style.left=i.offsetLeft+Bn-Pi.x+"px")}if(h._frozenInternal<0){var Jo=document.querySelector('[wj-part="ch"]').getBoundingClientRect();Pi=t._getFrozenPos(),Jo.top+Jo.height>wi.top&&wi.height>Pi.y&&gt&&(jn=Pi.y,i.style.top=i.offsetTop+jn-Pi.y+"px")}wi.height>jn&&(i.style.height=jn+"px"),wi.width>Bn&&(i.style.width=Bn+"px")}s===!1&&N&&(Kt=t.getCellData(e,n,!1));var Xo=Kt==null||Kt==="",Zo=x===E.RowHeader;if(x==E.Cell||Zo){var Xl=a._getShowErrors(),Qo=a._edtHdl._edt!=null,Zl=a._edtHdl.editRange&&a._edtHdl.editRange.containsRow(e);if(Xl&&(!Qo||!Xo&&!Zo||Qo&&!Zl)){var es="",Ql=h[e].dataItem;es=N.binding&&Ql&&N.getIsRequired(d)&&vn(a,e,n)&&Xo?a._edtHdl._getRequiredMsg():a._getError(t,e,n,!1),a._edtHdl._setCellError(i,es)}}if(a.itemFormatter&&a.itemFormatter(t,e,n,i),a.formatItem.hasHandlers){var Mi=r._fmtItemArgs;Mi?(Mi._p=t,Mi._rng.setRange(e,n,p,_),Mi._cell=i):Mi=r._fmtItemArgs=new Al(t,new j(e,n,p,_),i),Mi._updateContent=s!==!1,a.onFormatItem(Mi)}var ea=v&&v.level>0,ta=ue?N&&N._tpl:null;if(Hn&&!ni&&ea&&s!==!1&&N&&!(ta&&O)){Tr=Ss(v,i);var Vn,ts=i.firstChild;(Vn=document.createElement("span")).classList.add(z.elemCollapseSpace),i.insertBefore(Tr,ts),i.insertBefore(Vn,ts)}},r.prototype.disposeCell=function(t){},r.prototype.getEditorValue=function(t){var e=t._edtHdl._edt;if(e instanceof HTMLInputElement)switch(e.type){case"checkbox":return e.checked;case"radio":return e.value}if(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement){var n=e[Es],i=n?n._applyMask():e.value,o=e.maxLength;if(_e(o)&&o>-1&&i.length>o){var s=W.Globalize.numberFormat["%"]||"%",l=i.length&&i[i.length-1]==s;i=i.substr(0,o),l&&i.indexOf(s)<0&&(i+=s)}return i}return null},r.dispose=function(){r._ddBtn&&(r._ddBtn=null),r._tplCtx={row:null,col:null,value:null,text:null,item:null},r._fmtItemArgs=null},r._WJC_RADIOMAP=z.radioMap,r._WJC_CHECKBOX=z.cellCheck,r._WJC_COLLAPSE=z.elemCollapse,r._WJC_DROPDOWN=z.elemDropDown,r._WJC_PIN=z.elemPin,r._tplDdBtn=Ll(r._WJC_DROPDOWN,"down"),r._tplCtx={row:null,col:null,value:null,text:null,item:null},r}();function Ut(){return W.FlexGrid.ariaLabels}function Is(r,t,e,n,i,o){var s=Pe._tplCtx;s.value=e,s.text=n,s.item=i.dataItem,s.row=i,s.col=o;var l=te(r)?Qs(r,s):r(s,t);l!=null&&(t.innerHTML=l)}function lh(r,t){t=t||"n";var e=re._parseNumericFormat(t);switch(e.spec){case"d":case"x":break;case"e":t=t.replace(/[0-9]/g,"");break;default:t=e.spec=="p"?"P15":"r",e.scale&&(t+=Array(e.scale/3+1).join(","))}return re.formatNumber(r,t,!0)}function vn(r,t,e){return r.editRange&&r.editRange.contains(t,e)}function ah(){var r=Pe._ddBtn;return r||(r=Pe._ddBtn=Oe(Pe._tplDdBtn),Ee(r,Ut().toggleDropDown),S(r,"aria-expanded",!1)),r.cloneNode(!0)}function uh(r,t,e){var n=t?Ut().pined:Ut().pinning,i=Ll(Pe._WJC_PIN,"pin",n),o=Oe(i);ee(o,q.pinned,t),S(o,"aria-pressed",t),r.insertBefore(o,r.firstChild)}function hh(r){var t,e,n=Ut(),i=r.grid.collectionView;if(i&&i.sortDescriptions.length>1){var o=r.currentSortIndex;o>-1&&(e=n.sortIndex+" "+(o+1),t='<span class="'+z.sortIndex+'" aria-hidden= "true">'+(o+1)+"</span>")}var s=Zi(r.currentSort=="+"?"up":"down",e,!0);return t&&(s+=t),s}function Ss(r,t){var e=Pe._WJC_COLLAPSE,n=(r.isCollapsed?"":"down-")+(r.grid.rightToLeft?"left":"right"),i=Oe('<button class="'+ce.btn+" "+ut.btnGlyph+" "+e+'" type="button" tabindex="-1">'+Zi(n)+"</button>");return Ee(i,Ut().toggleGroup),S(i,"aria-expanded",!r.isCollapsed),S(t,"aria-expanded",!r.isCollapsed),r.hasChildren||(i.style.visibility="hidden",S(i,"aria-hidden",!0),t.removeAttribute("aria-expanded")),i}function Zi(r,t,e){return e===void 0&&(e=!1),'<span class="'+(ut.glyph+"-"+r)+'"'+(t?' aria-label="'+t+'"':"")+(t&&e?' role="button"':"")+"></span>"}function Ll(r,t,e){return'<button class="'+ce.btn+" "+ut.btnGlyph+" "+Xt.right+" "+r+'" '+(e!==void 0?'aria-label = "'+e+'"':"")+' type="button" tabindex="-1">'+Zi(t)+"</button>"}function Oo(r){return r==null||r.length===0}var zl=function(){function r(t,e){this._col=Ve(t,Je),this._ctl=e,this._tbx=e.hostElement.querySelector("input"),K(this._col instanceof Je,"Invalid Column"),K(this._ctl instanceof H,"Invalid edit control"),K(this._tbx instanceof HTMLInputElement,"Input element not found in editor");var n=this._ctl;this._prop=Li(n.value)?Li(n.checkedItems)?Li(n.text)?null:"text":"checkedItems":"value",K(this._prop!=null,"value, text properties not found in editor");var i=Bi();i&&(this._isDropDown=n instanceof i.DropDown,this._isComboBox=n instanceof i.ComboBox,this._isAutoComplete=n instanceof i.AutoComplete,this._isInputDateTime=n instanceof i.InputDateTime,this._isInputNumber=n instanceof i.InputNumber,this._isInputMask=n instanceof i.InputMask),this._updateFocusBnd=this._updateFocus.bind(this),this._keydownBnd=this._keydown.bind(this),this._cmpstartBnd=this._cmpstart.bind(this),this._mousedownBnd=this._mousedown.bind(this),this._connect(),this._col.gridChanged.addHandler(this._connect,this),this._hideEditor(),this._updateFocus()}return Object.defineProperty(r.prototype,"grid",{get:function(){return this._g},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"column",{get:function(){return this._col},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"control",{get:function(){return this._ctl},enumerable:!0,configurable:!0}),r.prototype.dispose=function(){this._disconnect(),this._isDropDown&&(this._isDropDown=!1),this._g=this._col=this._ctl=this._tbx=null},r.prototype._connect=function(){var t=this._col?this._col.grid:null;if(t!=this._g&&(this._disconnect(),t)){var e=t.hostElement,n=t.addEventListener.bind(t),i=this._updateFocusBnd;this._g=t,this._ensureEditorsContainer(t),this._hideEditor(),this._updateFocus(),n(e,"keydown",this._keydownBnd,!0),n(e,"mousedown",this._mousedownBnd,!0),n(e,"mouseup",i,!0),n(e,"blur",i,!0),n(e,"focus",i),n(this._tbx,"compositionstart",this._cmpstartBnd),t.gotFocus.addHandler(i,this),t.selectionChanged.addHandler(i,this),t.prepareCellForEdit.addHandler(this._prepareCellForEdit,this),t.cellEditEnding.addHandler(this._cellEditEnding,this),t.cellEditEnded.addHandler(this._cellEditEnded,this)}},r.prototype._disconnect=function(){var t=this._g;if(t){var e=t.hostElement,n=t.removeEventListener.bind(t),i=this._updateFocusBnd;n(e,"keydown",this._keydownBnd),n(e,"mousedown",this._mousedownBnd),n(e,"mouseup",i),n(e,"blur",i),n(e,"focus",i),n(this._tbx,"compositionstart",this._cmpstartBnd),t.gotFocus.removeHandler(i,this),t.selectionChanged.removeHandler(i,this),t.prepareCellForEdit.removeHandler(this._prepareCellForEdit,this),t.cellEditEnding.removeHandler(this._cellEditEnding,this),t.cellEditEnded.removeHandler(this._cellEditEnded,this),this._g=null}},r.prototype._prepareCellForEdit=function(t,e){if(!e.cancel&&e.getColumn(!0)==this._col){var n=this.grid,i=this._ctl,o=this._tbx,s=this._prop,l=e.range,a=e.data,u=a&&a.type!==void 0?a.type:"",h=n.getCellData(l.row,l.col,s=="text"||this._isInputMask),c=!1,d=getComputedStyle(i.hostElement).direction=="rtl";if(i._rtlDir=d,ee(i.hostElement,Xt.rtl,d),this._isComboBox&&(h!=""&&(i._emptyValueAction=!1),n._imeHdl&&n._imeHdl._handlingCompositionStart&&(i._composing=!0),this._isInputDateTime&&i._setDropdown(i._ddDate)),this._isAutoComplete&&i.reset(),this._isInputMask&&(i._fullEdit=!0),s=="checkedItems"&&(i.showFilterInput&&(i.showFilterInput=!1,i.showFilterInput=!0),(h==null||h.length==0)&&(i[s]=[],i.selectedIndex=0)),h!=null||!i.isRequired){if(s=="checkedItems"){var f=[];if(i.selectedValuePath)for(var p=function(w){var g=i.collectionView.items.findIndex(function(y){return h[w][i.selectedValuePath]!=null&&y[i.selectedValuePath]===h[w][i.selectedValuePath]});g>=0&&(i._lbx.toggleItemChecked(g),f.push(i.collectionView.items[g]))},_=0;_<h.length;_++)p(_);else Ge(h)?f=h:h.length>0&&h.split(",").forEach(function(w){return f.push(w.trim())});i[s]=f}else i[s]=h;if(this._isAutoComplete&&(clearTimeout(i._toSearch),(b=i.collectionView)&&(b.filter||i._rxHighlight)&&(i._rxHighlight=null,b.filter=null),h)){var v=i._findNext(h,1,-1);i.selectedIndex!=v&&(i.selectedIndex=v),!i.containsFocus()&&i._focus&&i.onGotFocus()}}switch(u){case"keydown":case"mousedown":if((Li(a.keyCode)||a.keyCode==C.F4||a.altKey)&&(c=this._isDropDown,this._isAutoComplete&&(h==null||te(h)))){var b;(b=i.collectionView)&&((b.filter||i._rxHighlight)&&(i._rxHighlight=null,b.filter=null),v=h?i._findNext(h,1,-1):-1,i.selectedIndex!=v&&(i.selectedIndex=v))}}if(n.showPlaceholders&&!i.placeholder&&(o.placeholder=this._col.header),this.showEditor(),n._edtHdl._fullEdit=!0,u.indexOf("key")==0&&a.keyCode==32&&(ne(o,o.value.length),a.preventDefault()),Ie()&&!n.imeEnabled){if(u=="keypress"&&a.key)setTimeout(function(){o.value=a.key,ne(o,1);var w=document.createEvent("HTMLEvents");w.initEvent("input",!0,!1),o.dispatchEvent(w)}),a.preventDefault();else if(u=="compositionstart"){var m=o.value.length;ne(o,m)}}this._isDropDown&&(i.isDroppedDown=c)}},r.prototype._cellEditEnding=function(t,e){if(!e.cancel&&e.getColumn(!0)==this._col){var n=this.grid,i=this._ctl,o=this._prop;if(this._isAutoComplete){var s=i.selectedIndex;if(_e(s)&&s<0){var l=i.collectionView;l&&l.items.length==1?i.selectedIndex=0:this._col.isRequired&&(e.cancel=!0)}}if(!e.cancel&&o){var a=!1;if(this._isInputMask){var u=i;u!=null&&(n._edtHdl._setCustomEditorValue(u._msk._applyMask()),a=!0)}a||n._edtHdl._setCustomEditorValue(i[o])}}},r.prototype._cellEditEnded=function(t,e){this._hideEditor(),this._updateFocus()},r.prototype._cmpstart=function(t){var e=this;this.grid.imeEnabled&&(Ie()?setTimeout(function(){e._activateEditor(t)}):this._activateEditor(t))},r.prototype._keydown=function(t){if(!t.defaultPrevented&&this._checkColumn(t.target)){if(this.grid.activeEditor){if(t.keyCode==C.Enter&&this._isDropDown){var e=this._ctl;e.isDroppedDown&&(e.isDroppedDown=!1,t.preventDefault(),t.stopImmediatePropagation())}}else if(this._isDropDown){var n=t.keyCode;switch(n){case C.F4:case C.Up:case C.Down:(n==C.F4||t.altKey)&&(this._activateEditor(t),t.preventDefault())}}}},r.prototype._checkColumn=function(t){var e=this._g;if(!e.imeEnabled&&!e.isReadOnly||t!=null&&this._imeEditor()===t){var n=e._selHdl.selection;return e._getBindingColumn(e.cells,n.row,e.columns[n.col])==this._col&&!this._col.isReadOnly&&!e.rows[n.row].isReadOnly}return!1},r.prototype._mousedown=function(t){if(!t.defaultPrevented&&t.button==0&&!t.shiftKey&&!t.ctrlKey&&!t.metaKey&&this._isDropDown&&dt(t.target,Pe._WJC_DROPDOWN)){var e=this.grid,n=e.hitTest(t);(!e._edtHdl||e._edtHdl.validate)&&!n._clickChildGrid&&n.getColumn(!0)==this._col&&(e._ensureEditSelectionForParentGrid(),e.select(n.range),e.refresh(),this._activateEditor(t),t.preventDefault())}},r.prototype._activateEditor=function(t){var e=this.grid;if(!e.activeEditor){var n=e._selHdl.selection;if(n.isValid)return e.startEditing(!0,n.row,n.col,!0,t)}return!1},r.prototype.showEditor=function(){this.isOpen=!0;var t=this.grid,e=t.activeEditor,n=$(e,"."+z.cell);if(n){var i=this._tbx,o=this._ctl.hostElement;B(o,r._cssVisible),ee(i,z.gridIme,!1),n.innerHTML="",n.appendChild(o),t._edtHdl._edt=i,this._imeEditor()?this._initImeEditInput():(i.select(),i.focus(),e.value="")}},r.prototype._hideEditor=function(){this.isOpen=!1;var t=this.grid,e=this._ctl.hostElement,n=this._tbx;this._isDropDown&&(this._ctl.isDroppedDown=!1),n.setCustomValidity("");var i=n.value;n.value=i+" ",n.value=i,B(e,r._cssHidden),ee(n,z.gridIme,!0),t&&e.parentElement!=t._eEditorsContainer&&(this._ensureEditorsContainer(t),t._eEditorsContainer.appendChild(e)),this._ctl._composing&&(this._ctl._composing=!1)},r.prototype._resetTabIndex=function(){this._tbx.tabIndex=-1},r.prototype._updateFocus=function(){var t=this.grid;if(t&&!t.activeEditor){var e=t.hostElement,n="."+z.hostElement,i=this._tbx,o=Z(),s=t._getTabIndex();if($(o,n)==e)if($(i,n)!=e)this._hideEditor();else if(t.imeEnabled)i.tabIndex>-1&&(i.tabIndex=-1);else{var l=t._selHdl.selection,a=t._getBindingColumn(t.cells,l.row,t.columns[l.col]);a&&a==this._col&&t.canEditCell(l.row,l.col)?o!==i&&(t.activeCell&&(t.activeCell.tabIndex=-1),i.tabIndex=s,!i.readOnly&&!t.isTouching&&(i.select(),i.focus())):i.tabIndex>-1&&(i.tabIndex=-1,o==i&&t.focus(!0))}}},r.prototype._initImeEditInput=function(){var t=this,e=this._imeEditor();if(e){var n=this._tbx,i=n&&n.style.color,o=this._ctl,s=function(){if(e.removeEventListener("compositionend",s),B(e,xr._cssHidden),n){n.style.color=i;var l=function(){o.gotFocus.removeHandler(l),t._g._edtHdl._edt=n;var a=e.value;if(a){n.value=a,t._isInputMask?setTimeout(function(){r._setSelectionRange(n,a.length,a.length)},0):r._setSelectionRange(n,a.length,a.length);var u=document.createEvent("HTMLEvents");u.initEvent("input",!0,!1),n.dispatchEvent(u)}};o.gotFocus.addHandler(l),n.focus()}};e.addEventListener("compositionend",s),n&&(n.style.color="transparent")}},r._setSelectionRange=function(t,e,n){if(n===void 0&&(n=e),J(document.body,t)&&!t.disabled&&t.style.display!="none")try{t.setSelectionRange(V(e),V(n),Ie()?null:"backward"),t.focus()}catch{}},r.prototype._imeEditor=function(){var t=this.grid;if(t&&t.imeEnabled){var e=Z();if(e&&(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)&&fe(e,z.gridIme))return e}return null},r.prototype._ensureEditorsContainer=function(t){if(t&&!t._eEditorsContainer){t._eEditorsContainer=Oe('<div class="'+Ml.editorsContainer+'"></div>');var e=t._gridRoleElement();e&&e.parentElement.getAttribute("wj-part")==="container"?e.parentElement.appendChild(t._eEditorsContainer):t.hostElement.appendChild(t._eEditorsContainer)}},r._cssHidden={position:"fixed",left:-32e3,top:-32e3,width:"0px",height:"0px",overflow:"hidden",border:"none",display:"block"},r._cssVisible={position:"absolute",left:0,top:0,width:"100%",height:"100%",display:"inline-table"},r}(),Ii;(function(r){r[r.None=0]="None",r[r.MoveDown=1]="MoveDown",r[r.MoveAcross=2]="MoveAcross",r[r.Cycle=3]="Cycle",r[r.CycleOut=4]="CycleOut",r[r.CycleEditable=5]="CycleEditable"})(Ii||(Ii={}));var Fl=function(){function r(t){this._kaTab=Ii.None,this._kaEnter=Ii.MoveDown,this._isHeadersHandled=!1,this._g=t;var e=t.hostElement;t.addEventListener(e,"keypress",this._keypress.bind(this)),t.addEventListener(e,"keydown",this._keydownHeaders.bind(this)),t.addEventListener(e,"keydown",this._keydown.bind(this))}return r.prototype._keydownMetaHeaders=function(t){if(!t.defaultPrevented){var e=this._g,n=e._getKeyCode(t),i=t.ctrlKey||t.metaKey,o=(t.altKey,t.shiftKey),s=!1;switch(n){case C.Left:case C.Right:case C.Up:case C.Down:case C.Enter:case C.Delete:case C.Back:case C.F2:case C.Home:case C.End:s=!0;break;case C.Space:(e.activePanelType!==P.ColumnHeader||i)&&(e.activePanelType!==P.RowHeader||o)?e.activePanelType===P.TopLeft&&(s=!0):s=!0}s&&(t.preventDefault(),this._isHeadersHandled=!0)}},r.prototype._keydownHeaders=function(t){if(!t.defaultPrevented&&this._g.activePanelType!=P.Cell){var e=this._g,n=e.selection,i=t.ctrlKey||t.metaKey,o=t.shiftKey,s=t.altKey,l=t.target,a=(t.char||t.key,!1),u=e.activePanel,h=e.activePanelType,c=e._getKeyCode(t),d=this._getCustomEditor(e,n.row,n.col);if(l.tagName==="INPUT"&&!d){var f=l.type;if(f!=="radio"&&f!=="checkbox")return}if(i||s||o)return this._keydownMetaHeaders(t);if(!a)switch(c){case C.Left:if(e.headersFocusability===Rt.All&&e.headersVisibility===le.All)if(h===P.ColumnHeader){var p=u.getNextVisibleColumn();(e.getMergedRange(u,n.row,n.col)||new j(n.row,n.col)).leftCol<=p&&(v=e._gpTL.getLastVisibleColumn())>=0&&(e.select(new j(n.row,v),!0,e._gpTL),a=!0)}else h===P.ColumnFooter&&(p=u.getNextVisibleColumn(),(e.getMergedRange(u,n.row,n.col)||new j(n.row,n.col)).leftCol<=p&&(v=e._gpBL.getLastVisibleColumn())>=0&&(e.select(new j(n.row,v),!0,e._gpBL),a=!0));a||(e._selHdl.moveSelectionWithinSelectedPanel(0,-1),a=!0);break;case C.Right:if(h===P.RowHeader){var _=u.getLastVisibleColumn();(e.getMergedRange(u,n.row,n.col)||new j(n.row,n.col)).rightCol>=_&&(v=e._gpCells.getNextVisibleColumn())>=0&&(e.select(n.row,v),a=!0)}else if(h===P.TopLeft&&e.headersVisibility&le.Column)_=u.getLastVisibleColumn(),(e.getMergedRange(u,n.row,n.col)||new j(n.row,n.col)).rightCol>=_&&(v=e._gpCHdr.getNextVisibleColumn())>=0&&(e.select(n.row,v,e._gpCHdr),a=!0);else if(h===P.BottomLeft&&e.headersVisibility===le.All&&(_=u.getLastVisibleColumn(),(e.getMergedRange(u,n.row,n.col)||new j(n.row,n.col)).rightCol>=_)){var v;(v=e._gpCFtr.getNextVisibleColumn())>=0&&(e.select(n.row,v,e._gpCFtr),a=!0)}a||(e._selHdl.moveSelectionWithinSelectedPanel(0,1),a=!0);break;case C.Down:if(h===P.ColumnHeader){var b=u.getLastVisibleRow();(e.getMergedRange(u,n.row,n.col)||new j(n.row,n.col)).bottomRow>=b&&(w=e._gpCells.getNextVisibleRow())>=0&&(e.select(w,n.col),a=!0)}else h===P.TopLeft&&e.headersVisibility&le.Row?(b=u.getLastVisibleRow(),(e.getMergedRange(u,n.row,n.col)||new j(n.row,n.col)).bottomRow>=b&&(w=e._gpRHdr.getNextVisibleRow())>=0&&(e.select(w,n.col,e._gpRHdr),a=!0)):h===P.RowHeader&&e.headersVisibility&le.Row&&(b=u.getLastVisibleRow(),(e.getMergedRange(u,n.row,n.col)||new j(n.row,n.col)).bottomRow>=b&&(w=e._gpBL.getNextVisibleRow())>=0&&(e.select(w,n.col,e._gpBL),a=!0));a||(e._selHdl.moveSelectionWithinSelectedPanel(1,0),a=!0);break;case C.Up:if(e.headersFocusability===Rt.All&&e.headersVisibility===le.All){if(h===P.BottomLeft)b=u.getNextVisibleRow(),(e.getMergedRange(u,n.row,n.col)||new j(n.row,n.col)).bottomRow<=b&&(w=e._gpRHdr.getLastVisibleRow())>=0&&(e.select(new j(w,n.col),!0,e._gpRHdr),a=!0);else if(h===P.ColumnFooter)b=u.getNextVisibleRow(),(e.getMergedRange(u,n.row,n.col)||new j(n.row,n.col)).bottomRow<=b&&(w=e._gpCells.getLastVisibleRow())>=0&&(e.select(new j(w,n.col),!0),a=!0);else if(h===P.RowHeader){var m=u.getNextVisibleRow();if((e.getMergedRange(u,n.row,n.col)||new j(n.row,n.col)).topRow<=m){var w;(w=e._gpTL.getLastVisibleRow())>=0&&(e.select(new j(w,n.col),!0,e._gpTL),a=!0)}}}a||(e._selHdl.moveSelectionWithinSelectedPanel(-1,0),a=!0);break;case C.Tab:if(!(a=this._performKeyAction(e.keyActionTab,o))&&!e.activeCell)if(e.focus(!0),e.imeEnabled){var g=e._imeHdl;g&&g._resetTabIndex()}else d&&d._resetTabIndex();break;case C.Enter:case C.Space:var y=u.getCellElement(n.row,n.col);if(y){var I=y.querySelector("button");if(I)I.click(),a=!0;else{var x=y.querySelector('[role="button"]');if(x)x.click(),a=!0;else if(u.cellType===P.TopLeft){var R=ae;e.selectionMode!==R.None&&e.selectionMode!==R.Cell&&(e.selectAll(),a=!0)}else{var k=y.querySelector("input");k&&!k.classList.contains("wj-column-selector")?(k.click(),a=!0):!k&&h==P.ColumnHeader&&(y.click(),a=!0)}}}a=!0;break;default:a=!0}a&&(t.preventDefault(),this._isHeadersHandled=!0)}},r.prototype._keydown=function(t){if(this._isHeadersHandled)this._isHeadersHandled=!1;else{var e=this._g,n=e._edtHdl,i=e.selection,o=t.ctrlKey||t.metaKey,s=t.shiftKey,l=t.altKey,a=t.target,u=t.char||t.key,h=!0;if(!o&&!l&&u&&u.length==1&&$(a,"."+z.cell)&&a.firstElementChild&&(u!=" "||!s)){var c=a.querySelectorAll("."+Pe._WJC_RADIOMAP+" label input");if(c&&c.length){for(var d=-1,f=0;f<c.length;f++)if(c[f].checked){d=f;break}for(u=u.toLowerCase(),f=0;f<c.length;f++){var p=c[(d+f+1)%c.length];if(u==" "||p.value.toLowerCase()[0]==u){p.click();break}}t.preventDefault();return}}if(!e._wantsInput(a)){var _=Ft(e.rows[i.row],we),v=e.editableCollectionView,b=e._getKeyCode(t),m=si,w=ae,g=t.defaultPrevented&&!(a instanceof HTMLInputElement),y=b===C.Up||b===C.Down||b===C.Left||b===C.Right||b===C.PageDown||b===C.PageUp||b===C.Home||b===C.End;if(((e.isRangeValid(i)||y)&&!g||o&&b==65)&&(!e.activeEditor||!n._keydown(t)||e._isNativeCheckbox(e.activeEditor))){if(e.autoClipboard){if(o&&(b==67||b==45)){var I=new Re(e.cells,i);if(e.onCopying(I)){var x=le,R=(e.copyHeaders&x.Column)!=0,k=(e.copyHeaders&x.Row)!=0,D=e.getClipString(null,!1,R,k);Co()||(D+=`\r
`),e._eFocus.focus(),Jr.copy(D),e.onCopied(I)}t.stopPropagation();return}if(o&&b==86||s&&b==45){e.isReadOnly||Jr.paste(function(he){e.setClipString(he)}),t.stopPropagation();return}}switch((s||o)&&t.code=="Space"&&(b=C.Space),b){case C.Space:if(s&&i.isValid)switch(e.selectionMode){case w.CellRange:case w.MultiRange:case w.Row:case w.RowRange:case w.ListBox:e.select(new j(i.row,0,i.row,e.columns.length-1),!1);var E=i.row-e.rowHeaders.viewRange.row;if(e.headersVisibility!==le.Column){var T=null;e.rowHeaders.hostElement&&e.rowHeaders.hostElement.children[E]&&(T=e.rowHeaders.hostElement.children[E].querySelector("."+js.SelectorClsNames.columnSelector)),T&&!e.rows[i.row].isSelected&&T.click()}}else if(o&&i.isValid)switch(e.selectionMode){case w.CellRange:case w.MultiRange:e.select(new j(0,i.col,e.rows.length-1,i.col),!1)}else{if(h=this._startEditing(!0,t))setTimeout(function(){var he=e.activeEditor;he&&(he.disabled||he.readOnly&&!$(he,"."+ge.hostElement)?e.finishEditing():he.type=="checkbox"&&(tn(he,he.indeterminate||!he.checked),e.finishEditing()))});else if(e.rows.maxGroupLevel>-1&&this._isGroupCell()){var L=e.rows[i.row];this._toggleGroupCollapse(!L.isCollapsed,!0)}h=!0}break;case 65:if(o)switch(e.selectionMode){case w.None:case w.Cell:break;default:e.selectAll()}else h=!1;break;case C.Left:if(o||l)h=!1;else{if(this._isGroupCell()&&!_.isCollapsed)this._toggleGroupCollapse(!0);else if(i.isValid&&i.isSingleCell&&e.headersFocusability&Rt.Row&&e.headersVisibility&le.Row&&e.activePanel.getNextVisibleColumn()>=(e.getMergedRange(e.activePanel,i.row,i.col)||new j(i.row,i.col)).leftCol){e.select(i.row,e._gpRHdr.columns.length-1,e._gpRHdr),t.preventDefault();return}if(!o){if(e.selectionMode==w.None)return;this._moveSelWithValid(m.None,o?m.Home:m.Prev,s)}}break;case C.Right:if(o||t.altKey)h=!1;else if(this._isGroupCell()&&_.isCollapsed)this._toggleGroupCollapse(!1);else{if(e.selectionMode==w.None)return;this._moveSelWithValid(m.None,o?m.End:m.Next,s)}break;case C.Up:if(o)h=!1;else if(i.isValid&&i.isSingleCell&&e.headersFocusability&Rt.Column&&e.headersVisibility&le.Column){var O=e.activePanel.getNextVisibleRow();if((e.getMergedRange(e.activePanel,i.row,i.col)||new j(i.row,i.col)).topRow<=O){var X=e._gpCHdr.getLastVisibleRow();if(X>=0){e.select(X,i.col,e._gpCHdr),t.preventDefault();return}}}if(!o)if(t.altKey&&n._toggleListBox(t))h=!0;else{if(e.selectionMode==w.None)return;this._moveSelWithValid(m.Prev,m.None,s)}break;case C.Down:if(o)h=!1;else if(i.isValid&&i.isSingleCell&&e.headersFocusability&Rt.Column&&e.headersVisibility&le.Column){var Q=e.activePanel.getLastVisibleRow();if((e.getMergedRange(e.activePanel,i.row,i.col)||new j(i.row,i.col)).topRow>=Q&&e._gpCFtr.getNextVisibleRow()>=0){e.select(0,i.col,e._gpCFtr),t.preventDefault();return}}if(!o)if(t.altKey&&n._toggleListBox(t))h=!0;else{if(e.selectionMode==w.None)return;this._moveSelWithValid(m.Next,m.None,s)}break;case C.PageUp:if(this._moveSelWithValid(t.altKey?m.Home:m.PrevPage,m.None,s),e.rows._frozenInternal&&e.rows.isFrozen(e.selection.row)){var Y=e.scrollPosition;Y.y&&(e.scrollPosition=new Ye(Y.x,0))}break;case C.PageDown:this._moveSelWithValid(t.altKey?m.End:m.NextPage,m.None,s);break;case C.Home:this._moveSelWithValid(o?m.Home:m.None,m.Home,s);break;case C.End:this._moveSelWithValid(o?m.End:m.None,m.End,s);break;case C.Tab:if(!(h=this._performKeyAction(e.keyActionTab,s))&&!e.activeCell)if(e.focus(!0),e.imeEnabled){var se=e._imeHdl;se&&se._resetTabIndex()}else{var ue=this._getCustomEditor(e,i.row,i.col);ue&&ue._resetTabIndex()}break;case C.Enter:var de=e.rows[i.row];!s&&v&&v.currentEditItem!=null&&n._commitRowEdits(),de instanceof Me||(h=this._performKeyAction(e.keyActionEnter,s)),this._getCustomEditor(e,i.row,i.col)||e.focus(!0);break;case C.Escape:if(h=!1,v&&(v.currentAddItem||v.currentEditItem)){var Te=new Re(e.cells,e.selection);Te.cancel=!0,e.onRowEditEnding(Te),v.currentAddItem&&v.cancelNew(),v.currentEditItem&&v.cancelEdit(),e.onRowEditEnded(Te),h=!0}e._mouseHdl.resetMouseState();break;case C.Delete:case C.Back:h=this._deleteSel(t);break;case C.F2:h=this._startEditing(!0,t);break;case C.F4:h=n._toggleListBox(t);break;case C.MinusKey:case C.HyphenMinusKey:h=!1,o&&e.allowDelete&&(h=this._deleteSel(t,!0));break;case C.PlusKey:h=!1,t.ctrlKey&&(h=this._addSel(t));break;case C.EqualPlusKey:h=!1,t.ctrlKey&&t.shiftKey&&(h=this._addSel(t));break;case C.S:h=!1,o&&s&&(this._sortByKeyboard(t),h=!0);break;case C.P:h=!1,o&&s&&(this._pinByKeyboard(t),h=!0);break;case C.F:if(h=!1,o&&l){var Ce=this._g,N=Ce.frozenColumns!==0||Ce.frozenRows!==0,je=W.FlexGrid.accessibilityHelperMessage,Ze=N?je.frozen.unfrozenColumn:je.frozen.frozenColumn;Ze=zt(Ze,{col:N?Ce.frozenColumns:i.col,row:N?Ce.frozenRows:i.row}),Ce.announceShortcut(Ze),Ce.frozenColumns=N?0:i.col,Ce.frozenRows=N?0:i.row,h=!0}break;default:h=!1}h&&(e.containsFocus()||e.focus(),t.preventDefault(),t.stopPropagation())}}}},r.prototype._performKeyAction=function(t,e){var n=Ii,i=si;switch(t){case n.MoveDown:return this._moveSel(e?i.Prev:i.Next,i.None,!1),!0;case n.MoveAcross:return this._moveSel(i.None,e?i.Prev:i.Next,!1),!0;case n.Cycle:return this._moveSel(i.None,e?i.PrevCell:i.NextCell,!1),!0;case n.CycleEditable:return this._moveSel(i.None,e?i.PrevEditableCell:i.NextEditableCell,!1),!0;case n.CycleOut:var o=this._g.selection;return this._moveSel(i.None,e?i.PrevCell:i.NextCell,!1),!o.equals(this._g.selection)}return!1},r.prototype._keypress=function(t){var e=this,n=this._g;if(!n._wantsInput(t.target)&&!t.defaultPrevented){var i=n._edtHdl;if(n.activeEditor)i._keypress(t);else if(t.charCode>C.Space&&t.code!="AltLeft"&&t.code!="AltRight"){if(this._startEditing(!1,t)&&n.activeEditor){var o=Z();if(o instanceof HTMLInputElement&&o.type!="checkbox"||o instanceof HTMLTextAreaElement){var s=n._selHdl.selection,l=n.getCellData(s.row,s.col,!0),a=n.getCellData(s.row,s.col,!1),u=W.Globalize.numberFormat["%"]||"%",h=String.fromCharCode(t.charCode),c=_e(a)&&l.indexOf(u)>-1||l==""&&o.value==u,d=!0,f=function(){o.value=c?h+u:h,ne(o,1),o.dispatchEvent(i._evtInput),i._keypress(t),i._edtValue=o.value!=l?o.value:null};if(n.imeEnabled){var p=this._getCustomEditor(n,s.row,s.col),_=p&&p.control;if(_&&!_._focus){var v=function(){_.gotFocus.removeHandler(v),d=!1,f()};_.gotFocus.addHandler(v)}}d&&f(),t.preventDefault()}}else if(n.autoSearch){var b=!1;if(s=n._selHdl.selection,t.charCode>32||t.charCode==32&&this._search){t.preventDefault(),this._search+=String.fromCharCode(t.charCode),this._toSearch&&clearTimeout(this._toSearch),this._toSearch=setTimeout(function(){e._toSearch=null,e._search=""},H._SEARCH_DELAY);var m=this._findNext(s.row,s.col);m<0&&this._search.length>1&&(this._search=this._search[this._search.length-1],m=this._findNext(s.row,s.col)),m>-1&&(b=!0,n.select(m,s.col))}b||(this._search="")}}}},r.prototype._getCustomEditor=function(t,e,n){var i=t._getBindingColumn(t.cells,e,t.columns[n]);return i&&i._edt},r.prototype._findNext=function(t,e){var n=this._g,i=n.rows.length;(t<0||this._search.length==1)&&t++;var o=this._search,s=n.caseSensitiveSearch;s||(o=o.toLowerCase());for(var l=n.columns[e].isContentHtml,a=0;a<i;a++){var u=(t+a)%i,h=n.getCellData(u,e,!0).trim();if(l&&(h=Dt(h)),s||(h=h.toLowerCase()),h.indexOf(o)==0)return u}return-1},r.prototype._moveSel=function(t,e,n){var i=this._g,o=i.selectionMode,s=i._selHdl;o!=ae.None&&(o==ae.MultiRange&&s.extendedSelection.clear(),s.moveSelection(t,e,n))},r.prototype._addSel=function(t){var e=this._g,n=e.editableCollectionView,i=e.selection,o=new j,s=new En(e.cells,o,t);return!e._edtHdl._allowEdit()||!e.allowAddNew?!1:(e.deferUpdate(function(){if(n&&n.beginUpdate(),e.onRowAdded(s)){var l=W.FlexGrid.accessibilityHelperMessage.insertRow;e.announceShortcut(zt(l,{index:i.row})),e.rows.insert(i.row,new _t)}n&&n.endUpdate(!1)}),!0)},r.prototype._deleteSel=function(t,e){var n=this,i=this._g,o=i.rows,s=i.editableCollectionView,l=i.selection,a=[],u=new j,h=new En(i.cells,u,t),c=ae;if(!i._edtHdl._allowEdit())return!1;if(i.allowDelete&&(s==null||s.canRemove&&!s.isAddingNew&&!s.isEditingItem)){if((a=o.filter(function(v){return v.isSelected})).length==0)switch(i.selectionMode){case c.CellRange:case c.MultiRange:var d=i._getDeleteColumnIndex();i.selectedRanges.forEach(function(v){if(v.leftCol==d&&v.rightCol==i.columns.length-1||e)for(var b=v.topRow;b>-1&&b<=v.bottomRow;b++){var m=o[b];a.indexOf(m)<0&&a.push(m)}});break;case c.Row:l.topRow>-1&&a.push(o[l.topRow]);break;case c.RowRange:for(var f=l.topRow;f>-1&&f<=l.bottomRow;f++)a.push(o[f])}a=a.reduce(function(v,b){return v.find(function(m){return m.dataItem===b.dataItem})||v.push(b),v},[])}if(a.length>0){var p=0;if(i.deferUpdate(function(){s&&s.beginUpdate();for(var v=a.length-1;v>=0;v--){var b=a[v];if(!(b instanceof Me)&&(u.setRange(b.index,-1),i.onDeletingRow(h),!h.cancel)){s&&b.dataItem?s.remove(b.dataItem):i.rows.removeAt(b.index),p++;var m=W.FlexGrid.accessibilityHelperMessage.deleteRow;i.announceShortcut(zt(m,{index:l.row})),i.onDeletedRow(h)}}s&&s.endUpdate(!1)}),p>0){var _=l.topRow;for(_=Math.min(_,i.rows.length-1);_>0&&i.rows[_]instanceof Me;)_--;l.row=l.row2=_,i.select(l,!1),i.rows._frozenInternal>0&&i.rows.length<=i.rows._frozenInternal&&(i._ptScrl=new Ye(i._ptScrl.x,0)),i.childItemsPath&&s&&s.refresh()}return!0}return a.length==0?(i.deferUpdate(function(){var v=i.scrollPosition,b=-1;switch(a=o.filter(function(I){return I.isSelected}),i.selectionMode){case c.Row:l.topRow>-1&&a.push(o[l.topRow]);break;case c.RowRange:for(var m=l.topRow;m>-1&&m<=l.bottomRow;m++)a.push(o[m])}var w=i.selectedRanges.length>1||a.length>1||l.isValid&&o[l.row].dataItem!=o[l.row2].dataItem;if(s&&s.beginUpdate(),a.length){var g=new j(0,0,0,i.columns.length-1);a.forEach(function(I){g.row=g.row2=I.index,n._deleteRange(t,g),b=g.bottomRow})}else n._deleteRange(t,l),b=l.bottomRow,i.selectionMode==c.MultiRange&&i._selHdl.extendedSelection.forEach(function(I){n._deleteRange(t,I),b=I.bottomRow});if(i.select(l,!1),i.scrollPosition=v,s){if(w&&s.currentEditItem){s.commitEdit();var y=new Re(i.cells,new j(b,-1));i.onRowEditEnding(y),i.onRowEditEnded(y)}s.endUpdate(!1)}}),!0):!1},r.prototype._deleteRange=function(t,e){var n=this._g,i=n.editableCollectionView,o=new j,s=new En(n.cells,o,t),l=new Re(n.cells,new j(e.topRow,-1));n._imeHdl&&n._imeHdl._suspendIME();for(var a=e.topRow;a<=e.bottomRow;a++){var u=n.rows[a];if(!u.isReadOnly)for(var h=e.leftCol;h<=e.rightCol;h++){var c=n._getBindingColumn(n.cells,a,n.columns[h]);if(!c.getIsRequired(u)&&!c.isReadOnly){var d=n.getCellData(a,h,!1);if(n.getCellData(a,h,!0)&&(o.setRange(a,h),s.cancel=!1,n.onBeginningEdit(s))){var f=u.dataItem,p=i?i.currentEditItem:null;p&&f!=p&&h===e.rightCol&&(n.onRowEditEnding(l),n.onRowEditEnded(l)),f!=p&&h===e.leftCol&&(l._rng.setRange(a,-1),n.onRowEditStarting(l),n.onRowEditStarted(l)),i&&(i.editItem(f),n._edtHdl._edItem=f),n.setCellData(a,h,"",!0,!1),s.previousData=d,n.onCellEditEnding(s),n.onCellEditEnded(s)}}}}n._imeHdl&&n._imeHdl._resumeIME()},r.prototype._startEditing=function(t,e,n,i){return this._g._edtHdl.startEditing(t,n,i,!0,e)},r.prototype._sortByKeyboard=function(t){var e=this._g,n=e.selection;Ao(e,e.activePanel,n.col,n.row,t)},r.prototype._pinByKeyboard=function(t){var e=this._g,n=e.selection;Mo(e,n.col,n.row,!1)},r.prototype._isGroupCell=function(){var t=this._g,e=t.selection,n=t.getMergedRange(t.cells,e.row,e.col),i=t.activePanel;if(!t.rows[e.row])return!1;var o=t.rows[e.row],s=t.rows[e.topRow].dataItem instanceof Tt,l=n&&n.leftCol===0,a=s&&l,u=e.leftCol===0||a;return i.cellType==P.Cell&&e.isValid&&u&&o&&o.hasChildren},r.prototype._toggleGroupCollapse=function(t,e){var n=this._g,i=n.selection,o=n.rows[i.row];o.hasChildren&&(o.isCollapsed=t,e&&n.scrollIntoView(i.row,-1))},r.prototype._moveSelWithValid=function(t,e,n){var i=this._g;i.isRangeValid(i.selection)?this._moveSel(t,e,n):i.select(i.rows._firstVisible,i.columns._firstVisible)},r.prototype.dispose=function(){this._g&&(this._toSearch&&(clearTimeout(this._toSearch),this._toSearch=null),this._g=null,this._search=null)},r}(),jl=function(r,t,e,n,i,o){o===void 0&&(o=!1);var s=Oo(i);if(S(r,"role",s?"gridcell":o?"rowheader":"columnheader"),t.describedById||e.columns.describedById){var l=[t.describedById,e.columns.describedById].join(" ").trim();S(r,"aria-describedby",l||null)}if(n.allowSorting){var a=n._getBindingColumn(e,0,t);if(a&&!s)switch(a.currentSort){case"+":S(r,"aria-sort","ascending");break;case"-":S(r,"aria-sort","descending");break;default:r.removeAttribute("aria-sort")}}n.isReadOnly||(S(r,"aria-readonly",t.isReadOnly),S(r,"aria-required",t.isReadOnly?null:t.getIsRequired()&&!o));var u=r.closest("."+z.row);S(u,"role","row")},Dn=function(){function r(t,e){this._row=-1,this._col=-1,this._edge=0,this._clickChildGrid=!1,this._mergedRange=null;var n;if(e instanceof Element){if($(e,"."+z.hostElement)!=t.hostElement)return;t=e,this._target=e}if(!(t instanceof Element)||t instanceof xt){if(t instanceof xt)this._target=t.hostElement,n=this._g=t;else{if(!(t instanceof yt))throw"First parameter should be a FlexGrid or GridPanel.";this._target=t.hostElement,this._p=t,n=this._g=this._p.grid}if(e instanceof MouseEvent){this._target=e.target;var i=$(this._target,"."+z.hostElement);e.type=="mousedown"&&i!=null&&t instanceof xt&&i!=t.hostElement&&(this._clickChildGrid=!0),e.type=="mousedown"&&(n._rcBounds=null)}e=Oi(e),this._pt=e.clone();var o=n.controlRect,s=n._szClient,l=n.topLeftCells,a=n._eTL,u=n.headersVisibility,h=le,c=u&h.Row?l.columns.getTotalSize():0,d=u&h.Column?l.rows.getTotalSize():0,f=u&h.Column?d+a.offsetTop:0,p=n._eBL,_=p.offsetHeight,v=getComputedStyle(n.hostElement),b=v&&v.borderLeftWidth?parseFloat(v.borderLeftWidth):0,m=v&&v.borderTopWidth?parseFloat(v.borderTopWidth):0;if(e.x-=o.left-b,e.y-=o.top-m,n.rightToLeft&&(e.x=o.width-e.x),this._p||e.x>=0&&e.y>=a.offsetTop&&s&&e.x<=s.width+c&&e.y<=s.height+d&&(e.y<f?this._p=e.x<c?n.topLeftCells:n.columnHeaders:e.y<p.offsetTop?this._p=e.x<c?n.rowHeaders:n.cells:this._p=e.x<c?n.bottomLeftCells:n.columnFooters),this._p!=null){var w=this._p.rows,g=this._p.columns,y=this._p.cellType,I=P,x=this._p._getFrozenPos(),R=y==I.TopLeft||y==I.ColumnHeader?d:y==I.BottomLeft||y==I.ColumnFooter?_:w.getTotalSize(),k=y==I.TopLeft||y==I.BottomLeft||y==I.RowHeader?c:g.getTotalSize();y==I.RowHeader||y==I.Cell?(e.y-=d,this._inBottomFrozenArea=this._g.rows._frozenInternal&&this._g.rows._frozenInternal<0&&this._g._szClient.height&&this._g.rows.lastFrozen&&e.y>=Math.min(this._g.rows.lastFrozen.pos,this._g._szClient.height+this._g.rows.lastFrozen._antipos),this._p.rows._frozenInternal>=0?(e.y>x.y||x.y<=0)&&(e.y-=n._ptScrl.y,e.y+=this._p._getOffsetY()):(e.y<x.y||x.y>=this._g._szClient.height)&&(e.y-=n._ptScrl.y)):y!=I.BottomLeft&&y!=I.ColumnFooter||(e.y-=p.offsetTop),(y==I.ColumnHeader||y==I.Cell||y==I.ColumnFooter)&&(e.x-=c,this._inRightFrozenArea=this._g.columns._frozenInternal&&this._g.columns._frozenInternal<0&&this._g.columns.lastFrozen&&this._g._szClient.width&&e.x>=Math.min(this._g.columns.lastFrozen.pos,Math.min(this._g.columns.lastFrozen.pos,this._g._szClient.width+this._g.columns.lastFrozen._antipos)),this._p.columns._frozenInternal>=0?(e.x>x.x||x.x<=0)&&(e.x-=n._ptScrl.x):(e.x<x.x||x.x>=this._g._szClient.width)&&(e.x-=n._ptScrl.x)),y!=I.ColumnHeader&&y!=I.TopLeft||(e.y-=f-d),this._edge=0;var D=r._SZEDGE[this._g.isTouching?1:0];if(this._g.isTouching&&(D=r._SZEDGE[1],e.x-=D/2),this._row=e.y>R?-1:w.getItemAt(e.y),this._col=e.x>k?-1:g.getItemAt(e.x),(this._g.columns._frozenInternal<0||this._g.rows._frozenInternal<0)&&this.correctionForNegativeFrozen(e),this._row<0||this._col<0){this._p=null;return}if(this._col>-1){var E=g[this._col],T=this.grid.columns._frozenInternal<0&&this.grid.columns.isFrozen(this._col)?Math.min(E.pos,n._szClient.width+E._antipos):E.pos;e.x-T<=D&&(this._edge|=1,e.x-T<=D/2&&(this._edge|=64));var L=T+E.renderSize-e.x;L<=D&&(this._edge|=4,L<=D/2&&(this._edge|=16))}if(this._row>-1){var O=w[this._row],X=this.grid.rows._frozenInternal<0&&this.grid.rows.isFrozen(this._row)?Math.min(O.pos,n._szClient.height+O._antipos):O.pos;e.y-X<=D&&(this._edge|=2,e.y-X<=D/2&&(this._edge|=128));var Q=X+O.renderSize-e.y;Q<=D&&(this._edge|=8,Q<=D/2&&(this._edge|=32))}}this.panel&&(this._mergedRange=this.grid.getMergedRange(this.panel,this.row,this.col))}else{var Y=$(t,"."+z.cell),se=Y?Y[yt._INDEX_KEY]:null;se&&(this._target=t,this._row=se.row,this._col=se.col,this._rng=se.rng,this._p=se.panel,this._g=se.panel.grid)}}return Object.defineProperty(r.prototype,"point",{get:function(){return this._pt},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"cellType",{get:function(){return this._p?this._p.cellType:P.None},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"panel",{get:function(){return this._p},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"grid",{get:function(){return this._p?this._p.grid:null},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"row",{get:function(){return this._row},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"mergedRange",{get:function(){return this._mergedRange},enumerable:!0,configurable:!0}),r.prototype.getRow=function(){return this._p&&this._row>-1?this._p.rows[this._row]:null},Object.defineProperty(r.prototype,"col",{get:function(){return this._col},enumerable:!0,configurable:!0}),r.prototype.getColumn=function(t){var e=this._p,n=e&&this._col>-1?e.columns[this._col]:null;if(n&&t){var i=e.grid;n=e.cellType===P.ColumnHeader&&i._hasColumnGroups()?i._getColumnGroup(this._row,this._col):i._getBindingColumn(e,this._row,n)}return n},Object.defineProperty(r.prototype,"range",{get:function(){return this._rng||(this._rng=new j(this._row,this._col)),this._rng},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"edgeLeft",{get:function(){return this._considerMergedStatusOfCell((1&this._edge)!=0,"leftCol")},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"edgeTop",{get:function(){return this._considerMergedStatusOfCell((2&this._edge)!=0,"topRow")},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"edgeRight",{get:function(){return this._mergedRange&&this.panel.columns[this._mergedRange._col2]&&this.panel.columns[this._mergedRange._col2].isVisible?this._considerMergedStatusOfCell((4&this._edge)!=0,"rightCol"):(4&this._edge)!=0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"edgeFarRight",{get:function(){return this._considerMergedStatusOfCell((16&this._edge)!=0,"rightCol")},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"edgeBottom",{get:function(){return this._mergedRange&&this.panel.rows[this._mergedRange._row2]&&this.panel.rows[this._mergedRange._row2].isVisible?this._considerMergedStatusOfCell((8&this._edge)!=0,"bottomRow"):(8&this._edge)!=0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"edgeFarBottom",{get:function(){return this._considerMergedStatusOfCell((32&this._edge)!=0,"bottomRow")},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"edgeFarLeft",{get:function(){return(64&this._edge)!=0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"edgeFarTop",{get:function(){return(128&this._edge)!=0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),r.prototype.correctionForNegativeFrozen=function(t){var e=this._g._szClient.width,n=this._g._szClient.height;if(this._inRightFrozenArea||this._inBottomFrozenArea){if(this._inRightFrozenArea){for(var i=this._g.columns._lastFrozen;i<this._g.columns.length;i++)this._g.columns[i].isVisible&&t.x>=Math.min(this._g.columns[i].pos,e+this._g.columns[i]._antipos)&&t.x<=Math.min(this._g.columns[i].pos+this._g.columns[i].width,e)&&(this._col=i);this._col<this._g.columns.length+this._g.columns._frozenInternal&&(this._col=-1)}if(this._inBottomFrozenArea){for(i=this._g.rows._lastFrozen;i<this._g.rows.length;i++)this._g.rows[i].isVisible&&t.y>=Math.min(this._g.rows[i].pos,n+this._g.rows[i]._antipos)&&t.y<=Math.min(this._g.rows[i].pos+this._g.rows[i].height,n)&&(this._row=i);this._row<this._g.rows.length+this._g.rows._frozenInternal&&(this._row=-1)}}},r.prototype._considerMergedStatusOfCell=function(t,e){return!(!t||!(this.mergedRange&&this.mergedRange[e]===this.range[e]||this.mergedRange===null))},r._SZEDGE=[6,30],r}(),ch=4,Bl=function(){function r(t){var e=this;this._rng=null,this._edt=null,this._edItem=null,this._edtCanceled=!1,this._list=null,this._mapSearch=null,this._fullEdit=!1,this._evtInput=null,this._evtChange=null,this._cstEdtValue=null,this._validating=!1,this._map=null,this._composing=!1,this._g=t,this._evtInput=document.createEvent("HTMLEvents"),this._evtInput.initEvent("input",!0,!1),this._evtChange=document.createEvent("HTMLEvents"),this._evtChange.initEvent("change",!0,!1),t.selectionChanging.addHandler(function(o,s){return e._selectionChanging(s)}),t.lostFocus.addHandler(function(){var o=Z();o&&getComputedStyle(o).position=="fixed"?e.finishEditing():e._commitRowEdits()});var n=t.hostElement;t.addEventListener(n,"mousedown",function(o){if(!o.defaultPrevented&&o.button==0&&!t._mouseHdl._szRowCol){var s=t.hitTest(o);s.cellType!=P.Cell&&s.cellType!=P.None&&(e.finishEditing()||e.finishEditing(!0))}},!0);var i=this;t.addEventListener(n,"compositionend",function(){i._composing=!1,i._keypress.call(i,arguments)}),t.addEventListener(n,"compositionstart",function(o){var s=e._getCustomEditor(t),l=o!=null?$(o.target,"."+z.hostElement):null,a=H.getControl(l),u=a&&a._edtHdl?a._edtHdl.activeEditor!=null:e.activeEditor!=null;if(!s||u||t.imeEnabled)e._composing=!0;else{var h=window.getSelection(),c=h.rangeCount>0?h.getRangeAt(0):null,d=document.activeElement;d!=null&&(d.blur(),window.getSelection().removeAllRanges(),setTimeout(function(){c!=null&&window.getSelection().addRange(c),d.focus()},20))}})}return r.prototype.startEditing=function(t,e,n,i,o){t===void 0&&(t=!0);var s=this._g,l=s._selHdl.selection;if(e=V(e,!0,!0),n=te(n)?s.columns.indexOf(n):V(n,!0,!0),e==null&&(e=l.row),n==null&&(n=l.col),i==null&&(i=!0),!this._allowEdit(e,n))return!1;var a=s.getMergedRange(s.cells,e,n,!1);a||(a=new j(e,n));var u=s.rows[e].dataItem;if(s.scrollIntoView(a.row,a.col,!0),!s.select(a,!0)||!s.rows[e]||u!=s.rows[e].dataItem)return!1;if(this.activeEditor){if(a.equals(this._rng))return!0;if(!this.finishEditing())return!1}var h=new Re(s.cells,a,o);if(!s.onBeginningEdit(h))return!1;var c=s.editableCollectionView,d=!1;c&&((d=(u=s.rows[e].dataItem)!=c.currentEditItem)&&s.onRowEditStarting(h),c.editItem(u),d&&(s.onRowEditStarted(h),this._edItem=u));var f=s.rows[e],p=s._getBindingColumn(s.cells,e,s.columns[n]),_=p.dataMap||f.dataMap,v=it.RadioButtons,b=f.dataMap&&f.dataMapEditor==v||p.dataMap&&p.dataMapEditor==v;if((f.dataMap&&f.dataMapEditor==it.Menu||p.dataMap&&p.dataMapEditor==it.Menu)&&o&&o.type=="keypress")return!1;if(this._fullEdit=M(t),this._rng=a,this._list=null,_&&(this._map=_),_&&!b&&!p.editor){var m=_.useFilter?_.getFilteredItems(s.getRowDataItem(e,n)):_.getDisplayValues(u);(p.isContentHtml||f.isContentHtml)&&(m=m.map(function(L){return Dt(L)})),this._list=m,this._mapSearch=_.search}if(b){var w=s._activeCell||s.hostElement.querySelector("."+z.cell+"."+q.active);if(w){var g=o?o.target:null;if(g instanceof HTMLSpanElement&&(g=$(g,"label")),g instanceof HTMLLabelElement&&(g=g.querySelector("input")),g instanceof HTMLInputElement)this._edt=g;else{var y=w.querySelectorAll("input[checked]");y.length>0?this._edt=y[0]:this._edt=w.querySelector("input")}this._updateRowHeaderCell(e)}}else a.isSingleCell?this._updateEditorCell(e,n,d):s.refresh(!1);var I=this._edt;if(I){if(I.type=="checkbox"||I.type=="radio"||I.type=="menu")this._fullEdit=!1;else if(i){var x=0,R=I.value.length,k=!1,D=W.Globalize.numberFormat["%"]||"%",E=s.getCellData(e,n,!1);if(_e(E)?k=I.value.indexOf(D)>-1:E==null&&(k=/^p/i.test(p.format))&&I.value.indexOf(D)<0&&(I.value+=D),k){var T=I.value;for(x=0,R=T.length;R>0&&(T[R-1]==D||T[R-1]==" ");)R--;for(;x<R&&T[x]==D;)x++}o&&o.type=="keydown"&&o.keyCode==C.Space&&(x=R),this._setSelectionRange(I,x,R,!0,pi()),Ie()&&I.style.textAlign=="right"&&(I.style.paddingRight="1px")}s.onPrepareCellForEdit(h)}return i&&!s.containsFocus()&&s.focus(),I!=null&&!I.disabled&&!I.readOnly},r.prototype.finishEditing=function(t){var e=this._edt;if(!e||this._rng==null)return this._removeListBox(),!0;var n=this._g,i=this._rng,o=new En(n.cells,i),s=n.containsFocus();if(!t){var l=n.hostElement.querySelector("."+ge.hostElement+"."+q.focused);if(l){var a=H.getControl(l);a&&a instanceof Bi().AutoComplete&&e.value==""&&a.reset(),a&&(a.containsFocus()||a._focus)&&a.onLostFocus(o)}}if(o.cancel=t,!t&&n.validateEdits&&(E=this._getValidationError())){o.cancel=!0;var u=n.cells.getCellElement(i.row,i.col);u&&(this._setCellError(u,E),o.stayInEditMode=!0)}if(this._cstEdtValue=null,o.data=n.cells.getCellData(i.topRow,i.leftCol,!1),!n.onCellEditEnding(o)&&o.stayInEditMode)return s?setTimeout(function(){e.select()}):e.select(),this._fullEdit=!0,!1;if(!o.cancel){var h=null,c=!1;if(this._lbx_SelectedValue!=null)h=this._lbx_SelectedValue,c=!0;else{var d=this._cstEdtValue,f=this._map,p=this._lbx,_=n.columns[i.col].dataMapEditor===it.RadioButtons;if(d&&d.value!==void 0)h=d.value;else if(_&&this._edt.getAttribute("data-idx")){var v=parseInt(this._edt.getAttribute("data-idx"));h=f._cv.items[v][f.selectedValuePath]}else if(e&&p){var b=n._selHdl.selection,m=n.rows[b.row],w=n._getBindingColumn(n.cells,b.row,n.columns[b.col]);(e.value==this._lbx.selectedValue||te(this._lbx.selectedValue)&&this._lbx.selectedValue.indexOf(e.value)==0)&&(this._lbx_SelectedValue=this._findKeyValue(m.dataMap||w.dataMap,w.isContentHtml||m.isContentHtml)),h=this._lbx_SelectedValue}this._lbx_SelectedValue==null&&h==null&&(h=n.cellFactory.getEditorValue(n)),c=this._lbx_SelectedValue!=null||_}for(var g=i.topRow;g<=i.bottomRow&&g<n.rows.length;g++)for(var y=i.leftCol;y<=i.rightCol&&y<n.columns.length;y++){w=n._getBindingColumn(n.cells,g,n.columns[y]),m=n.rows[g];var I=!(f=w&&w.dataMap||m&&m.dataMap)||f.serializeKeys;if(!c&&f){if(this.isEqualValue(f.getDisplayValue(o.data),h))continue;if(f.useFilter){for(var x=n.getRowDataItem(g,y),R=f.getFilteredItems(x),k=!1,D=0;D<R.length&&!(k=R[D][f._displayPath]==h);D++);if(!k)continue}}if(!n.cells.setCellData(g,y,h,I,!1,c)&&n.validateEdits){var E;if(E=this._getValidationError(!0)){o.cancel=!0;var T=n.cells.getCellElement(i.row,i.col);return T&&(this._setCellError(T,E),o.stayInEditMode=!0),!1}}}e.value==this._edtValue&&e.dispatchEvent(this._evtChange)}this._edt=null,this._rng=null,this._list=null,this._edtValue=null,this._edtCanceled=o.cancel,this._removeListBox(),this._lbx_SelectedValue=null;var L=$(e,"."+z.cell);return J(L,Z())&&(n._setFocusNoScroll(L),n._isScrollingByWheel=!1),!o.cancel&&o.refresh&&n._refreshOnEdit?n.refresh(!1):this._updateEditorCell(i.row,i.col,!1),s&&n.focus(),n.onCellEditEnded(o),!0},r.prototype._setSelectionRange=function(t,e,n,i,o){if(i===void 0&&(i=!0),o===void 0&&(o=!1),!o)return ne(t,e,n,i);if(J(document.body,t)&&!t.disabled&&t.offsetHeight){try{t.setSelectionRange(e,n,"backward")}catch{}if(i)try{return this._g._setFocusNoScroll(t),!0}catch{}}return!1},r.prototype._setCustomEditorValue=function(t){this._cstEdtValue={value:t}},r.prototype._getCustomEditor=function(t){var e=null,n=t.selection;if(n!=null&&n.isValid){var i=t._getBindingColumn(t.cells,n.row,t.columns[n.col]);e=i&&i._edt}return e},r.prototype._setCellError=function(t,e){var n=this._g;e==""&&(e=null),ee(t,q.invalid,e!=null),S(t,"aria-invalid",e!=null?"true":null);var i=n.errorTip,o=n.activeEditor;i?(i.setTooltip(t,e),o&&J(t,o)&&S(o,"title","")):S(t,"title",e),o&&t==n.activeCell&&!J(t,o)&&i&&i.setTooltip(o,e)},Object.defineProperty(r.prototype,"activeEditor",{get:function(){return this._edt},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"editRange",{get:function(){return this._rng},enumerable:!0,configurable:!0}),r.prototype.getClipString=function(t,e,n,i){var o,s=this,l=this._g,a=l.selectionMode,u=[],h=(e&Yt.CSV)!=0,c=h?`\r
`:`
`,d=h?",":"	",f=(e&Yt.InvisibleRows)!=0,p=ae,_=t!=null;if(!t&&a!=p.ListBox){for(var v=l.rows,b=0;b<v.length;b++)if(v[b].isSelected){a=p.ListBox;break}}if(!t)switch(l._selHdl._expandSelection(),t=l.selection,a){case p.Row:case p.RowRange:case p.ListBox:t.col=0,t.col2=l.columns.length-1;break;case p.MultiRange:var m=l.selectedRanges;if(m.length>1){var w=this._sameCols(m),g=this._sameRows(m);if(w||g){(m=m.slice()).sort(function(T,L){var O=T.topRow-L.topRow;return O||T.leftCol-L.leftCol});for(var y=0;y<m.length;y++)for(var I=m[y],x=y+1;x<m.length;x++)I.contains(m[x])&&(m.splice(x,1),x--);if(w){var R=[];return m.forEach(function(T){R.push(s.getClipString(T,e,n,i)),n=!1}),R.join(c)}if(g){var k;return m.forEach(function(T){var L=s.getClipString(T,e,n,i).split(c);k==null?(k=L,i=!1):L.forEach(function(O,X){k[X]+=d+O})}),k.join(c)}}}}var D=t.col>-1&&t.col2>-1;if(n&&D&&(o=l.columnHeaders).rows.forEach(function(T,L){if(f||T.isVisible){var O=s._getRowClipString(o,L,t,e,i);u.push(O)}}),t.row>-1&&t.row2>-1)if(o=l.cells,a!=p.ListBox||_){for(K(t.bottomRow<o.rows.length,"Row index must be less than the number of rows."),y=t.topRow;y<=t.bottomRow;y++)if(f||o.rows[y].isVisible){var E=this._getRowClipString(o,y,t,e,i);u.push(E)}}else o.rows.forEach(function(T,L){if(T.isSelected&&(f||T.isVisible)){var O=s._getRowClipString(o,L,t,e,i);u.push(O)}});return u.join(c)},r.prototype._getRowClipString=function(t,e,n,i,o){var s=[],l=t.rows[e],a=Yt,u=(i&a.CSV)!=0,h=(i&a.InvisibleColumns)!=0,c=(i&a.Unformatted)==0,d=(i&a.SkipMerged)!=0;if(l.isVisible){if(o){for(var f=t.cellType==P.ColumnHeader?t.grid.topLeftCells:t.grid.rowHeaders,p=0;p<f.columns.length;p++)if(h||f.columns[p].isVisible){var _=f.getCellData(e,p,!0);d&&this._skipMergedCell(t,null,e,p)&&(_=""),s.push(this._getCellClipString(_,i))}}var v=l instanceof we?l:null,b=(v&&v.isSummary,t.grid),m=v&&(b.groupSummaryPosition===Pt.Bottom||b.groupSummaryPosition===Pt.Auto&&!v.isCollapsed),w=v&&!v.isSummary&&m;if(n.col>-1&&n.col2>-1)for(K(n.rightCol<t.columns.length,"Column index must be less than the number of columns."),p=n.leftCol;p<=n.rightCol;p++)(h||t.columns[p].isVisible)&&(_=t.getCellData(e,p,c),w&&p!=t.columns.firstVisibleIndex&&(_=null),!_&&l instanceof we&&p==t.columns.firstVisibleIndex&&(_=Dt(l.getGroupHeader())),d&&this._skipMergedCell(t,null,e,p)&&(_=""),s.push(this._getCellClipString(_,i)))}return s.join(u?",":"	")},r.prototype._skipMergedCell=function(t,e,n,i){var o=t.grid.getMergedRange(t,n,i,!1);return!!(o&&(e&&(o.row=Math.max(e.topRow,o.row),o.col=Math.max(e.leftCol,o.col)),o.row!=n||o.col!=i))},r.prototype._getCellClipString=function(t,e){te(t)||(t=Be(t)?t.toJSON():t!=null?t.toString():""),t=t.replace(/\t/g," ");var n=(e&Yt.QuoteAll)!=0;return(n=n||/\n|^"|"$/.test(t))||(e&Yt.CSV)==0||(n=t.indexOf(",")>-1),n&&(t='"'+(t=t.replace(/"/g,'""'))+'"'),t},r.prototype._sameRows=function(t){for(var e=t[0],n=1;n<t.length;n++)if(t[n].topRow!=e.topRow||t[n].bottomRow!=e.bottomRow)return!1;return!0},r.prototype._sameCols=function(t){for(var e=t[0],n=1;n<t.length;n++)if(t[n].leftCol!=e.leftCol||t[n].rightCol!=e.rightCol)return!1;return!0},r.prototype.setClipString=function(t,e){var n,i,o=this,s=this._g,l=s.editableCollectionView,a=this._parseClipString(G(t)),u=s._getRowsPerItem(),h=s.selection,c=!1,d=a.length;e&&(h=e),n=s.rows[h.topRow]instanceof Me&&s.newRowAtTop,i=h.rowSpan>1&&u===1||h.rowSpan-u!=0&&u>1,n&&i&&(c=!0,s.select(new j(h.topRow,h.leftCol,h.topRow,h.rightCol)));var f=e==null,p=ae;if(f)switch(s._selHdl._expandSelection(),e=s.selection,s.selectionMode){case p.Row:case p.RowRange:case p.ListBox:e.col=0,e.col2=s.columns.length-1;break;case p.MultiRange:var _=s.selectedRanges;if(_.length>1){l&&l.beginUpdate(),_.forEach(function(Y){s.setClipString(t,Y)}),l&&l.endUpdate(),s.selectedRanges=_;return}}e=Ve(e,j),this._expandClipRows(a,e),c||(d=a.length);var v=0;if(a.length)for(var b=e.leftCol,m=s.columns.length,w=0;w<a[0].length;w++)for(var g=b+w+v;g<m&&!s.columns[g].visible;)v++,g++;var y=f?new j(e.topRow,e.leftCol,Math.min(e.topRow+a.length-1,s.rows.length-1),Math.min(e.leftCol+a[0].length-1+v,s.columns.length-1)):e,I=new Re(s.cells,y,t);if(!s.onPasting(I))return!1;y=new j(e.topRow,e.leftCol);var x=new Re(s.cells,new j(e.topRow,-1)),R=!1,k=0,D=e.topRow,E=s.rows,T=s.columns,L=a.length>u,O=this._deferPaste(e,a.length);if(K(u>=1,"Invalid RPI value = "+u),s.deferUpdate(function(){var Y=-1;l&&O&&(Y=l.currentPosition,l.beginUpdate());for(var se=0;se<d&&D<E.length;se++,D++){var ue=E[D];if(ue.isVisible){if(!L||!ue.isReadOnly){var de=ue.dataItem,Te=l?l.currentEditItem:null;if(Te&&de!=Te&&(s.onRowEditEnding(x),s.onRowEditEnded(x)),ue instanceof Me&&l){if(O){if(ue.dataItem=l.addNew(),x._rng.setRange(s.newRowAtTop?0:D,-1),!s.onRowEditStarting(x)){D--,l.cancelNew();continue}s.onRowEditStarted(x)}else if(u==1||(D+1)%u==1||se==0){if(x._rng.setRange(s.newRowAtTop?D%u:D,-1),!s.onRowEditStarting(x)){D--;continue}s.onRowEditStarted(x)}}else de!=Te&&(x._rng.setRange(D,-1),s.onRowEditStarting(x),s.onRowEditStarted(x));for(var Ce=a[se],N=e.leftCol,je=0;je<Ce.length&&N<T.length;je++,N++){var Ze=T[N];if(Ze.isVisible){if(!L||!Ze.isReadOnly){var he=s.getMergedRange(s.cells,D,N,!1);if(!(he&&(he.leftCol!=N||he.topRow!=D))&&o._allowEdit(D,N)){var ze=Ce[je],ot=Ze.maxLength||ue.maxLength;ot&&(ze=ze.substr(0,ot));var gt=new Re(s.cells,new j(D+k,N),ze);if(s.onPastingCell(gt)){l&&(l.editItem(de),o._edItem=l.currentEditItem);var mt=s.getCellData(D,N,!1),me=gt.data,ct=Bi();if(ct){var qt=s._getBindingColumn(s.cells,D,s.columns[N]),lt=qt.editor,yi=null,ai=null;lt instanceof ct.InputNumber?(yi=lt.clamp.bind(lt),me!=lt.text&&(lt._oldText=lt.text,lt._setText(me)),me=lt.text,ai=Ae.Number):(lt instanceof ct.InputDate||lt instanceof ct.InputTime)&&(yi=lt._clamp.bind(lt),ai=Ae.Date),yi&&(me=_r(me,ai,qt.format,mt),Si(me)==ai&&(me=yi(me)))}(s.pasteEmptyCells||me!=="")&&s.setCellData(D,N,me)&&(gt.data=mt,s.onPastedCell(gt),R=!0)}y.row2=Math.max(y.row2,D+k),y.col2=Math.max(y.col2,N)}}}else je--}if(o._edItem&&l instanceof Zt){var Hn=new Bt(We.Change,o._edItem,D);l.onCollectionChanged(Hn,l._edtClone)}ue instanceof Me&&l&&(O?(ue.dataItem=null,R?(x._rng.setRange(s.newRowAtTop?0:D,-1),s.onRowEditEnding(x),s.onRowEditEnded(x),D--,k++,l.commitNew()):l.cancelNew()):L&&u>1&&(D+1)%u==0&&R&&(x._rng.setRange(s.newRowAtTop?D%u:D,-1),s.onRowEditEnding(x),s.onRowEditEnded(x),D-=u,k++))}}else se--}if(l)if(O)l.currentEditItem&&(l.commitEdit(),s.onRowEditEnding(x),s.onRowEditEnded(x)),l.moveCurrentToPosition(Y),l.endUpdate(!0);else{var ni=l.currentAddItem;!ni&&e.row==0&&s.newRowAtTop&&E[0]instanceof Me&&E[0].dataItem&&JSON.stringify(E[0].dataItem)!="{}"&&(ni=E[0].dataItem),ni?(l.editItem(ni),o._edItem=ni):E[0]instanceof Me&&E[0].dataItem&&(E[0].dataItem=null)}y.rowSpan>1&&y.topRow==0&&E[0]instanceof Me&&(y.row=y.row2=0),s.select(y)}),s.onPasted(I),R&&$(s.hostElement,"form")){var X=document.createEvent("HTMLEvents"),Q=Oe("<input>",s.hostElement);X.initEvent("change",!0,!1),Q.dispatchEvent(X),Ne(Q)}},r.prototype._deferPaste=function(t,e){var n=this._g.rows,i=n.length;return e>1&&(i>1&&n[0].dataItem!=n[1].dataItem||i==1&&n[0]instanceof Me)},r.prototype._parseClipString=function(t){var e=[],n=(t=(t=t.replace(/\r\n/g,`
`).replace(/\r/g,`
`)).replace(/\n$/,"")).length,i=function(f){return f===`
`||f==="	"},o=0,s=0;for(o=0;o<n;o++){var l=!1,a=!1,u=!1;if(t[o]==='"'){for(var h=o+1,c=!1;h<n;)if(t[h]==='"'){if(!(h+1<n&&t[h+1]==='"')){c=!0;break}h+=2}else h++;c&&(l=!0)}for(s=o;s<n&&!u;s++){var d=t[s];d==='"'?l&&(a=!a):i(d)&&!a&&(this._parseClipCell(e,t,o,s,d==`
`),o=s,s==n-1&&(o=s+1),u=!0)}if(s==n){this._parseClipCell(e,t,o,s,!1);break}}return e.length==0&&e.push([""]),e},r.prototype._parseClipCell=function(t,e,n,i,o){t.length||t.push([]);var s=e.substr(n,i-n),l=s.length;if(l>2&&s[0]=='"'&&s[l-1]=='"'){var a=s.substr(1,l-2),u=function(h){return a.indexOf(h)>-1};(u('""')||u("	")||u(`
`))&&(s=a.replace(/""/g,'"'))}else s=="	"&&(s="");t[t.length-1].push(s),o&&t.push([])},r.prototype._expandClipRows=function(t,e){for(var n=t.length,i=0,o=0;o<n;o++)i=Math.max(i,t[o].length);for(var s=this._g,l=0,a=0,u=s._getRowsPerItem(),h=e.topRow;h<=e.bottomRow&&(s.rows[h].isVisible&&l++,!(h===0&&s.allowAddNew&&s.newRowAtTop&&u<=1));h++);for(var c=e.leftCol;c<=e.rightCol;c++)s.columns[c].isVisible&&a++;if((l>1||a>1)&&(l==1&&(l=n),a==1&&(a=i),a%i==0&&l%n==0)){for(c=i;c<a;c++)for(h=0;h<n;h++)t[h].push(t[h%n][c%i]);for(h=n;h<l;h++)t.push(t[h%n])}},r.prototype._updateEditorCell=function(t,e,n){var i=this._g;if(i._useFrozenDiv()&&(i.rows.isFrozen(t)||i.columns.isFrozen(e))||i.columns._frozenInternal<0||i._hasPendingUpdates())i.refresh(!1);else{var o=i.cells.getCellElement(t,e);o&&i.onUpdatingView(new He)&&(this._updateCell(o),(n||i._getHasValidation())&&this._updateRowHeaderCell(t),i.onUpdatedView())}},r.prototype._updateRowHeaderCell=function(t){var e=this._g;if(e.headersVisibility&le.Row){var n=e.rowHeaders,i=e._getEditColumnIndex(),o=n.getCellElement(t,i);o&&this._updateCell(o)}},r.prototype._updateCell=function(t){var e=new Dn(t,null),n=xt._WJS_UPDATING;e.panel&&(be(t,n),e.grid.cellFactory.updateCell(e.panel,e.row,e.col,t,e.range),kt(t,n))},r.prototype._getValidationError=function(t){var e=this,n=this._g,i="";if(n&&this._rng&&!this._validating){var o=this._rng.row,s=this._rng.col,l=n.activeEditor,a=n.cellFactory.getEditorValue(n),u=n.getCellData(o,s,!1);if(t&&(i=n._getError(n.cells,o,s,!0)),!i&&n._getHasValidation()){if(l&&(i=l.validationMessage),!i){var h=n.columns[s],c=n.rows[o];!n._getBindingColumn(n.cells,o,h).getIsRequired(c)||a!=null&&a!==""||(i=this._getRequiredMsg())}!i&&n.setCellData(o,s,a,!0,!1)&&(i=n._getError(n.cells,o,s,!1),n.setCellData(o,s,u,!1,!1))}if(!i){var d=H.getControl($(l,"."+ge.hostElement));if(d==n&&fe(l,z.gridIme)&&n.activeCell!=null&&(d=n.activeCell.firstChild["$WJ-CTRL"]),d&&d!=n&&d.invalidInput.hasHandlers){var f=function(b,m){m.cancel&&(i=n._getError(n.cells,o,s,!0)||e._getBadInputMsg(),m.cancel=i!="")};this._validating=!0;var p=l.value;if(d.invalidInput.addHandler(f),d._containsFocus()){var _=$(d.hostElement,"."+z.cell);_&&_.focus()}var v=d.isDroppedDown;d.onLostFocus(),d.invalidInput.removeHandler(f),l.value=p,i?l.select():v&&(d.isDroppedDown=!0,l.select()),this._validating=!1}}}return i},Object.defineProperty(r.prototype,"validate",{get:function(){return!this._getValidationError()},enumerable:!0,configurable:!0}),r.prototype._getRequiredMsg=function(){if(!r._msgRequired){var t=document.createElement("input");t.required=!0,r._msgRequired=t.validationMessage}return r._msgRequired},r.prototype._getBadInputMsg=function(){if(!r._msgBadInput){var t=document.createElement("input");t.pattern="x",t.value="a",r._msgBadInput=t.validationMessage||"Bad Input"}return r._msgBadInput},r.prototype._allowEdit=function(t,e){var n=this._g;if(n.isReadOnly||n.selectionMode==ae.None||n.collectionView&&!n.editableCollectionView)return!1;if(t!=null){if(t<0||t>=n.rows.length)return!1;var i=n.rows[t];if(!i||i.isReadOnly||!i.isVisible)return!1}if(e!=null){if(e<0||e>=n.columns.length)return!1;var o=n._getBindingColumn(n.cells,t,n.columns[e]);if(!o||o.isReadOnly||!o.isVisible)return!1}return!0},r.prototype._commitRowEdits=function(){var t=this._g;if(this.finishEditing()&&this._edItem){var e=t.editableCollectionView;if(e&&(e.currentEditItem||e.currentAddItem)){var n=new Re(t.cells,t.selection);t.onRowEditEnding(n),e.commitEdit(),t.onRowEditEnded(n)}this._edItem=null}},r.prototype._keydown=function(t){var e=this._edt;switch(t.keyCode){case C.F2:return this._fullEdit=!this._fullEdit,t.preventDefault(),!0;case C.F4:return this._toggleListBox(t),t.preventDefault(),!0;case C.Space:return e&&e.type=="checkbox"&&!e.disabled&&!e.readOnly&&(tn(e,e.indeterminate||!e.checked),this.finishEditing(),t.preventDefault()),!0;case C.Enter:if(t.preventDefault(),e&&t.altKey){var n=t.target;if(n instanceof HTMLTextAreaElement&&n.wrap=="soft"){this._composing&&(n.blur(),n.focus()),n.style.setProperty("ime-mode","auto","important");var i=n.value,o=n.selectionStart,s=n.selectionEnd;n.value=i.substr(0,o)+`
`+i.substr(s),ne(n,o+1),n.blur(),n.focus(),n.style.imeMode=""}return!0}if(e&&this._lbx){var l=this._g,a=l._selHdl.selection,u=l.rows[a.row],h=l._getBindingColumn(l.cells,a.row,l.columns[a.col]);return e.value!=null&&(e.value!=this._lbx.selectedValue&&(te(this._lbx.selectedValue)&&this._lbx.selectedValue.indexOf(e.value))!=0||e.value==""&&this._lbx.selectedValue!=null||(this._lbx_SelectedValue=this._findKeyValue(u.dataMap||h.dataMap,h.isContentHtml||u.isContentHtml))),this._toggleListBox(t),this.finishEditing(),!0}return!this.finishEditing();case C.Tab:return t.preventDefault(),!this.finishEditing();case C.Escape:return t.preventDefault(),this.finishEditing(!0),!0;case C.Up:case C.Down:case C.Left:case C.Right:case C.PageUp:case C.PageDown:case C.Home:case C.End:if(this._lbx)return this._keydownListBox(t);if(t.altKey)switch(t.keyCode){case C.Up:case C.Down:return this._toggleListBox(t),t.preventDefault(),!0}if(this._fullEdit)switch(t.keyCode){case C.PageUp:case C.PageDown:t.preventDefault()}else if(this.finishEditing())return!1}return!0},r.prototype._keydownListBox=function(t){var e=!0;if(this._lbx)switch(t.keyCode){case C.Up:t.altKey?this._toggleListBox(t):this._lbx.selectedIndex>0&&this._lbx.selectedIndex--;break;case C.Down:t.altKey?this._toggleListBox(t):this._lbx.selectedIndex++;break;case C.Home:case C.PageUp:this._lbx.selectedIndex=0;break;case C.End:case C.PageDown:this._lbx.selectedIndex=this._lbx.collectionView.items.length-1;break;default:e=!1}return e?(t.preventDefault(),!0):!1},r.prototype._keypress=function(t){if(t.code!="AltLeft"&&t.code!="AltRight"){var e=this._edt,n=t.key!=null&&t.key.length>0?t.key.charCodeAt(0):32,i=this._list;if(pi()){var o=e;o&&(o.value.length==1||o.selectionStart==0&&o.selectionEnd==o.value.length)&&(H.sharedState.InvalidScroll=!0)}if(e&&e.type!="checkbox"&&Z()==e&&i&&i.length>0&&n>=32){var s=e.selectionStart,l=e.value.substr(0,s);if(l==""&&t.key==null)return;t.target==e&&n&&(l+=String.fromCharCode(n),s++);var a=this._mapSearch,u=-1,h=this._map;if(a)for(var c=0;c<i.length;c++){var d=i[c];if(a(d==null?d:d.toString(),l)){u=c;break}}else h&&h.useFilter?(u=this._findStringInObjArray(i,h.displayMemberPath,l,!0))<0&&!this._g.caseSensitiveSearch&&(u=this._findStringInObjArray(i,h.displayMemberPath,l,!1)):(u=this._findString(i,l,!0))<0&&!this._g.caseSensitiveSearch&&(u=this._findString(i,l,!1));if(u>-1){var f=this._lbx;f&&(f.selectedIndex=u);var p=null;p=h&&h.useFilter?i[u][h.displayMemberPath]:i[u],e.value=p,ne(e,s,e.value.length),e.dispatchEvent(this._evtInput),t.preventDefault&&t.preventDefault()}else this._lbx&&(this._lbx_SelectedValue=null)}}else t.preventDefault()},r.prototype._findString=function(t,e,n){n||(e=e.toLowerCase());for(var i=0;i<t.length;i++){var o=t[i];if(o!=null&&(o=o.toString(),n||(o=o.toLowerCase()),o.indexOf(e)==0))return i}return-1},r.prototype._findStringInObjArray=function(t,e,n,i){i||(n=n.toLowerCase());for(var o=0;o<t.length;o++){var s=t[o];if(s!=null&&(s=s[e].toString(),i||(s=s.toLowerCase()),s.indexOf(n)==0))return o}return-1},r.prototype._toggleListBox=function(t,e){var n=this._g,i=n._selHdl.selection,o=n.isTouching;if(e||(e=i),this._lbx&&(this._removeListBox(),i.intersects(e)))return n.activeEditor?n.activeEditor.focus():n.containsFocus()||n.focus(),!0;if(!e.isValid)return!1;var s=n.rows[e.row],l=n._getBindingColumn(n.cells,e.row,n.columns[e.col]),a=s.dataMap||l.dataMap,u=n._getMapEditor(s,l);if(!a||u!=it.DropDownList&&u!=it.Menu||!Bi()||l.editor!=null||!e.intersects(n.editRange)&&!this.startEditing(!0,e.row,e.col,!o,t))return!1;var h=this._lbx=this._createListBox();return requestAnimationFrame(function(){return h.showSelection()}),o&&h.focus(),!0},r.prototype._createListBox=function(){var t=this,e=this._g,n=e.activeEditor,i=this._rng,o=e.rows[i.row],s=e._getBindingColumn(e.cells,i.row,e.columns[i.col]),l=s.isContentHtml||o.isContentHtml,a=s.dataMap||o.dataMap,u=s.dropDownCssClass||o.dropDownCssClass,h=document.createElement("div");this._removeListBox(),be(h,gi.dropDownPanel+" "+z.gridListBox),be(h,u),S(h,"dir",e.rightToLeft?"rtl":"ltr");var c=n?n.value:e.getCellData(i.row,i.col,!0),d=new hn(h,{maxHeight:o.renderHeight*ch,isContentHtml:l}),f=e.getRowDataItem(i.row,i.col);if(a.useFilter?(d.itemsSource=a.getFilteredItems(f),d.displayMemberPath=a._displayPath,d.selectedValuePath=a._keyPath):d.itemsSource=a.getDisplayValues(f),a._displayPath==a._keyPath)d.selectedValue=c;else{var p=e.getCellData(i.row,i.col,!1),_=-1,v=this._findDuplicateValues(a,c,l),b=a._cv.items.findIndex(function(x){return t.isEqualValue(x[a._keyPath],p,l)});if(b>-1){var m=a._cv.items[b][a._displayPath];if(this.isEqualValue(c,m,l)){if(v.length==1)_=b>=d.itemsSource.length||!this.isEqualValue(this._getListBoxItemField(d,a.useFilter,b),c,l)?d.itemsSource.findIndex(function(x){return t.isEqualValue(m,a.useFilter?x[d.displayMemberPath]:x,l)}):b;else for(var w=-1,g=0;g<d.itemsSource.length;g++)if(this.isEqualValue(this._getListBoxItemField(d,a.useFilter,g),m,l)&&(w++,this.isEqualValue(v[w],p,l))){_=g;break}}}_<0&&(_=d.itemsSource.findIndex(function(x){return t.isEqualValue(c,a.useFilter?x[d.displayMemberPath]:x,l)})),_>=0?d.selectedIndex=_:d.selectedValue=null}d.addEventListener(h,"keydown",function(x){switch(x.keyCode){case C.Enter:case C.Escape:t._removeListBox(),e.focus()}}),d.addEventListener(h,"click",function(){t._lbx&&(t._lbx_SelectedValue=t._findKeyValue(a,l)),t._removeListBox(),e.focus(),t.finishEditing()}),d.gotFocus.addHandler(function(){d.containsFocus()&&n&&!pi()&&n.focus()}),d.selectedIndexChanged.addHandler(function(){var x=e.activeEditor;if(x){var R=t._map,k=R==null?null:R._displayPath,D=t._list[d.selectedIndex];x.value=D===void 0||D==null?"":typeof D=="object"&&k!=null&&D[k]!==void 0?D[k]:D,x.dispatchEvent(t._evtInput),ne(x,0,x.value.length)}});var y=e.cells.getCellElement(i.row,i.col);if(y){ei(h,y,!1,!1,!1);var I=y.querySelector("."+Pe._WJC_DROPDOWN);S(I,"aria-expanded",!0)}else ei(h,e.getCellBoundingRect(i.row,i.col)),h[H._OWNR_KEY]=e.hostElement;return d},r.prototype._getListBoxItemField=function(t,e,n){return n>=t.itemsSource.length?null:e?t.itemsSource[n][t.displayMemberPath]:t.itemsSource[n]},r.prototype._findKeyValue=function(t,e){if(e===void 0&&(e=!1),t.useFilter){if(this._lbx.selectedValue)return this._lbx.selectedValue;if(this._lbx.selectedItem&&this._lbx.selectedValuePath)return this._lbx.selectedItem[this._lbx.selectedValuePath]}var n=this._lbx.selectedValue,i=this._findDuplicateValues(t,n,e),o=t.getKeyValue(n);if(this._lbx.selectedIndex>0&&i.length>1){for(var s=-1,l=0;l<=this._lbx.selectedIndex;l++)this.isEqualValue(this._lbx.itemsSource[l],n,e)&&s++;s>=0&&(o=i[s])}return o},r.prototype._findDuplicateValues=function(t,e,n){n===void 0&&(n=!1);for(var i=[],o=t.getKeyValues(),s=0;s<o.length;s++)this.isEqualValue(t.getDisplayValue(o[s]),e,n)&&i.push(o[s]);return i},r.prototype._removeListBox=function(){var t=this._lbx;t&&(this._lbx=null,Vt(t.hostElement,function(){t.dispose()}))},r.prototype.isEqualValue=function(t,e,n){return n===void 0&&(n=!1),t instanceof Date&&e instanceof Date?t.getTime()==e.getTime():(t!=null&&t!=null||(t=""),e!=null&&e!=null||(e=""),Number.isNaN(t)&&(t="NaN"),Number.isNaN(e)&&(e="NaN"),n&&(te(t)&&t.indexOf("<")>-1&&(t=Dt(t)),te(e)&&e.indexOf("<")>-1&&(e=Dt(e))),t.toString()==e.toString())},r.prototype._selectionChanging=function(t){var e=this;if(!this._g.isReadOnly)if(this.finishEditing()){var n=this._g._selHdl.selection.row;if(n!=t.row){var i=this._g.rows.length;if((n>-1&&n<i?this._g.rows[n].dataItem:null)!=(t.row>-1&&t.row<i?this._g.rows[t.row].dataItem:null)){var o=!this._g.rows[n]||this._g.rows[n]&&Object.getPrototypeOf(this._g.rows[n])!==_t.prototype?null:this._g.getEmptyRequiredCell(n);if(o===null&&this._commitRowEdits(),this._g._getHasValidation()&&this._g.validateEdits){var s=this._g.editableCollectionView;o!==null&&s.currentAddItem&&(setTimeout(function(){e._g.select(new j(n,o)),e.startEditing(!0,n,o,!0,t)}),t.cancel=!0)}}}}else t.cancel=!0},r._msgRequired="",r._msgBadInput="",r}(),ji=4,qi=8,Rs=q.dragSrc,bn=z.hostElement,Jt;(function(r){r[r.None=0]="None",r[r.Columns=1]="Columns",r[r.Rows=2]="Rows",r[r.Both=3]="Both",r[r.ColumnsAllCells=r.Columns|ji]="ColumnsAllCells",r[r.RowsAllCells=r.Rows|ji]="RowsAllCells",r[r.BothAllCells=r.Both|ji]="BothAllCells",r[r.ColumnsOverflow=r.Columns|qi]="ColumnsOverflow",r[r.RowsOverflow=r.Rows|qi]="RowsOverflow",r[r.BothOverflow=r.Both|qi]="BothOverflow",r[r.ColumnsAllCellsOverflow=r.ColumnsAllCells|qi]="ColumnsAllCellsOverflow",r[r.RowsAllCellsOverflow=r.RowsAllCells|qi]="RowsAllCellsOverflow",r[r.BothAllCellsOverflow=r.BothAllCells|qi]="BothAllCellsOverflow"})(Jt||(Jt={}));var ui;(function(r){r[r.None=0]="None",r[r.Headers=1]="Headers",r[r.Cells=2]="Cells",r[r.Both=3]="Both"})(ui||(ui={}));var li;(function(r){r[r.None=0]="None",r[r.Columns=1]="Columns",r[r.Rows=2]="Rows",r[r.Both=3]="Both"})(li||(li={}));var Vl=function(){function r(t){var e=this;this._wasAllRowColHidden=!1,this._scrollbarStatusAtMouseDown=null;var n=t.hostElement,i=t.addEventListener.bind(t),o=t.removeEventListener.bind(t);this._g=t,i(n,"mousedown",function(a){t._rcBounds=null;var u=a.target,h=dt(u,bn),c=a.defaultPrevented&&dt(u,Pe._WJC_DROPDOWN)!=null;if(c&&(h=dt(document.activeElement,bn))==null){var d=H.getControl(document.activeElement),f=null;d.hostElement&&(d.hostElement["$WJ-OWNR"]&&d.hostElement["$WJ-OWNR"]["$WJ-CTRL"]?f=d.hostElement["$WJ-OWNR"]["$WJ-CTRL"].inputElement:d.hostElement.parentElement&&d.hostElement.parentElement["$WJ-OWNR"]&&d.hostElement.parentElement["$WJ-OWNR"]["$WJ-CTRL"]&&(f=d.hostElement.parentElement["$WJ-OWNR"]["$WJ-CTRL"].inputElement)),h=dt(f,bn)}var p=h&&h!=t.hostElement,_=p&&(h[H._CTRL_KEY]._imeHdl||t.imeEnabled);if((!a.defaultPrevented||_||c)&&a.button==0){if(!a.defaultPrevented){var v=e._g.activeCell;if(!t.containsFocus()||!v||v.classList.contains(q.selected)){var b=u instanceof HTMLElement&&u.tabIndex>-1?u:t._eFocus;t._setFocusNoScroll(b)}setTimeout(function(){a.defaultPrevented||t.focus()})}var m=t.hitTest(a),w=P;if(p||!t.activeEditor&&t._isInputElement(u)&&!e._hasRadioMap(a)&&!t._isNativeCheckbox(u)||c){switch(m.cellType){case w.Cell:if(p&&c||p||!t.activeEditor&&t._isInputElement(u)&&!e._hasRadioMap(a)&&!t._isNativeCheckbox(u)){var g=t.getMergedRange(m.panel,m.row,m.col,!1);t.select(g??m.range,!1)}!a.defaultPrevented&&u instanceof HTMLElement&&u.getAttribute("wj-part")!="root"&&u.focus();break;case w.ColumnHeader:case w.ColumnFooter:t.scrollIntoView(-1,m.col);break;case w.RowHeader:t.scrollIntoView(m.row,-1)}!a.defaultPrevented&&Ie()&&m.cellType!=w.Cell&&t._isInputElement(u)&&u.focus(),e._isDown=!0,e._htDown=m;return}if(t._isNativeCheckbox(u)&&fe(u,"wj-column-selector")&&(m.cellType===w.RowHeader||m.cellType===w.ColumnHeader))return;var y=document;o(y,"mousemove"),o(y,"mouseup"),i(y,"mousemove",s),i(y,"mouseup",l),e._isDown=!0,e._mousedown(a)}});var s=function(a){e._mousemove(a)},l=function(a){e._isDown=!1,o(document,"mousemove"),o(document,"mouseup"),e._mouseup(a)};i(n,"mouseenter",function(a){t._rcBounds=null}),i(n,"mousemove",this._hover.bind(this)),i(n,"dblclick",this._dblclick.bind(this)),i(n,"click",this._click.bind(this)),i(n,"selectstart",function(a){t._isInputElement(a.target)||a.preventDefault()}),Ht()&&i(n,"mousewheel",function(a){a.defaultPrevented||!a.wheelDeltaY||a.ctrlKey||a.metaKey||(t._isScrollingByWheel=!0)}),i(n,"wheel",function(a){if(!a.defaultPrevented&&a.deltaY&&!a.ctrlKey&&!a.metaKey){var u=t._root,h=a.deltaY;if((a.shiftKey?u.scrollWidth>u.clientWidth:u.scrollHeight>u.clientHeight)&&dt(a.target,bn)==t.hostElement){switch(a.deltaMode){case 1:h=t.rows.defaultSize*(h<0?-1:1);break;case 2:h=(a.shiftKey?u.clientWidth:u.clientHeight)*(h<0?-1:1);break;case 0:default:Ht()&&(h=ye(h,-150,150))}t._isScrollingByWheel=!0,pi()&&(H.sharedState.InvalidScroll=!1),t.finishEditing(!1)&&(a.shiftKey?u.scrollLeft+=h:u.scrollTop+=h),clearTimeout(e.mouseWhellTimer),e.mouseWhellTimer=setTimeout(function(){t._isScrollingByWheel=!1},1),a.preventDefault(),a.stopImmediatePropagation()}}}),i(n,"dragstart",this._dragstart.bind(this)),i(n,"dragover",this._dragover.bind(this)),i(n,"dragleave",this._dragleave.bind(this)),i(n,"drop",this._drop.bind(this)),i(n,"dragend",this._dragend.bind(this))}return r.prototype.resetMouseState=function(){var t=this._g,e=t.hostElement;this._updating&&(this._updating=!1,t.endUpdate()),this._dragSrc&&kt(this._dragSrc,Rs),this._showDragMarker(null),e&&(e.style.cursor=""),Ht()&&this._szRowCol&&t.invalidate(),t.removeEventListener(document,"mousemove"),t.removeEventListener(document,"mouseup"),this._eMouse=null,this._isDown=null,this._htDown=null,this._scrollbarStatusAtMouseDown=null,this._lbSelState=null,this._lbSelStateRows={},this._lbSel=null,this._szRowCol=null,this._szArgs=null,t._rcBounds=null,this._anchorCol=-1},r.prototype._mousedown=function(t){var e=this._g,n=t.target,i=e.hitTest(t),o=i.cellType,s=P,l=t.ctrlKey||t.metaKey;if(this._selDown=e.selection,this._selPanelType=e.activePanelType,this._ignoreClick=!1,i.panel==null&&e.cells==null||i.panel&&e.cells&&i.panel._uid==e.cells._uid){if(dt(n,Pe._WJC_DROPDOWN)){var a=e.hitTest(n);a.range&&this._selDown&&(!e.editRange||e.editRange.contains(i.row,i.col))||e.finishEditing(),e._ensureEditSelectionForParentGrid(),e._edtHdl._toggleListBox(t,a.range),t.preventDefault(),this._ignoreClick=!0;return}var u=e.editRange;if(u&&u.contains(i.range)){H.sharedState.InvalidScroll=pi();return}}var h=Z();if(n!=h||!e._isInputElement(n))if(o!=s.None){if(this._htDown=i,this._eMouse=t,this._anchorCol=i.col,this._scrollbarStatusAtMouseDown={row:e._hasScroll(e.rows),col:e._hasScroll(e.columns)},i.panel){var c={height:e._root.clientHeight,width:e._root.clientWidth},d={height:e.cells.hostElement.clientHeight,width:e.cells.hostElement.clientWidth};this._szInitial={row:i.getRow().renderHeight,col:i.getColumn().renderWidth,canHaveHScrl:c.width-e.rowHeaders.columns.getTotalSize()-d.width!=0,canHaveVScrl:c.height-e.columnHeaders.rows.getTotalSize()-d.height!=0}}else this._szInitial=null;if(this._szRowCol==null){var f=e.allowResizing,p=Jt;if((o==s.RowHeader||o==s.TopLeft)&&(i.edgeTop||i.edgeBottom)&&f&p.Rows&&this._getResizeRowHt(i))this._ignoreClick=!0;else if((o==s.ColumnHeader||o==s.TopLeft)&&(i.edgeLeft||i.edgeRight)&&f&p.Columns&&this._getResizeColHt(i))this._ignoreClick=!0;else{var _=e.allowDragging,v=li;switch(o){case s.Cell:case s.RowHeader:l&&e.selectionMode==ae.ListBox&&(this._lbSelState=e.rows[i.row].isSelected,$(n,"."+z.elemCollapse)&&(this._lbSelState=!1)),this._mouseSelect(t,t.shiftKey),o==s.RowHeader&&!(_&v.Rows)&&(t.preventDefault(),e.focus());break;case s.ColumnHeader:e.allowSorting||_&v.Columns||$(n,"button")||this._mouseSelect(t,t.shiftKey)}}}else{var b=e._eFocus;h!=b&&(b.tabIndex=0,b.focus()),this._ignoreClick=!0,this._handleResizing(t)}}else e.finishEditing(),n!=e._root&&n!=e._fCt&&e._edtHdl._commitRowEdits()},r.prototype._mousemove=function(t){if(this._htDown==null&&pi()&&(H.sharedState.InvalidScroll=!1),this._htDown&&!t.defaultPrevented){if(t.buttons==0&&this._eMouse&&t.timeStamp-this._eMouse.timeStamp>600){this.resetMouseState();return}if(this._eMouse=t,this._szRowCol)this._handleResizing(t);else{var e=this._g,n=e.allowDragging,i=li,o=P;switch(this._htDown.cellType){case o.Cell:this._mouseSelect(t,!0);break;case o.RowHeader:n&i.Rows||this._mouseSelect(t,!0);break;case o.ColumnHeader:n&i.Columns||e.allowSorting||this._mouseSelect(t,!0)}}}},r.prototype._mouseup=function(t){var e=this._g;if(!e.isTouching||!(this._dragSrc||t.target instanceof HTMLHtmlElement)){var n=e.hitTest(t),i=this._htDown;if(i&&!t.defaultPrevented&&(this._szArgs&&this._finishResizing(t,e._getRangesToResize(t,!1)),!this._szArgs&&(n.panel==null&&i.panel==null||n.panel&&i.panel&&n.panel._uid==i.panel._uid)&&n.row==i.row&&n.col==i.col)){var o=n.getColumn();if(o&&!(o._getFlag(ie.HasTemplate)&&!o.cellTemplate)){var s=n.target;if(s!=i.target&&s instanceof HTMLElement){if(i.target instanceof HTMLInputElement){var l=n.point,a=i.point;Math.abs(l.x-a.x)+Math.abs(l.y-a.y)<10&&(s=s.querySelector("input")||s)}var u=document.createEvent("Event");u.initEvent("click",!0,!0);for(var h in t)/Key$|X$|Y$|^button|^(x|y|which)$/.test(h)&&(u[h]=t[h]);s.dispatchEvent(u)}}}this.resetMouseState()}},r.prototype._click=function(t){if(this._ignoreClick&&(this._ignoreClick=!1,t.preventDefault()),!t.defaultPrevented){var e=this._g,n=t.target,i=e.hitTest(n),o=Ft(n,HTMLInputElement),s="input."+Pe._WJC_CHECKBOX;if(!o){var l=$(n,"label");l&&(o=l.querySelector(s))}if(!o&&e.bigCheckboxes&&(o=n.querySelector(s)),e._isNativeCheckbox(o)){if(i.panel==null&&e.cells==null||i.panel&&e.cells&&i.panel._uid==e.cells._uid){var a=e.getCellData(i.row,i.col,!1);e.startEditing(!1,i.row,i.col,!1,t)?(e.activeEditor.checked=!a,e.finishEditing(),e.focus()):typeof a!="boolean"&&a!=null||(o.checked=a)}return}if(this._hasRadioMap(t)){this._handleClick(t);return}var u=t.ctrlKey||t.metaKey;if(e.rows.maxGroupLevel>-1&&dt(n,Pe._WJC_COLLAPSE)){var h=e.rows[i.row];if(i.panel==null&&e.cells==null||i.panel&&e.cells&&i.panel._uid==e.cells._uid&&h instanceof we){if(!h.hasChildren)return;u?e.collapseGroupsToLevel(h.isCollapsed?h.level+1:h.level):h.isCollapsed=!h.isCollapsed,e.scrollIntoView(i.row,-1);return}}if(!(u||t.shiftKey||e.activeEditor||e.activePanelType!==P.Cell||e._isInputElement(n))&&(i.panel==null&&e.cells==null||i.panel&&e.cells&&i.panel._uid==e.cells._uid)){var c=e._selHdl.selection,d=c.equals(this._selDown);if(!d&&e.cells){var f=this._selDown?e.getMergedRange(e.cells,this._selDown.row,this._selDown.col):null;if(f){var p=e.getMergedRange(e.cells,c.row,c.col);d=p&&p.equals(f)}}if(d&&this._selPanelType===P.Cell&&i.range.contains(c)){e.startEditing(!0,null,null,!0,t);return}}this._handleClick(t)}},r.prototype._handleClick=function(t){var e=this._g,n=t.target,i=e.hitTest(n),o=t.ctrlKey||t.metaKey,s=i.panel;if(!t.defaultPrevented&&i.grid&&e&&i.grid._uid==e._uid){if(s&&e.cells&&s._uid==e.cells._uid&&this._hasRadioMap(t)){var l=e._getBindingColumn(i.panel,i.row,i.getColumn()),a=$(n,"label"),u=a&&a.querySelector("input"),h=u&&parseInt(u.getAttribute("data-idx")),c=i.getColumn().dataMap||l&&l.dataMap||i.getRow().dataMap,d=void 0;h!=null&&(d=c._cv.items[h][c.selectedValuePath]),u&&!u.disabled&&e.startEditing(!1,i.row,i.col,!1,t)&&e.finishEditing()&&(e._edtHdl._edtCanceled?t.preventDefault():e.cells.setCellData(i.row,i.col,d!==void 0?d:a.textContent,!0,e.refreshOnEdit,d!==void 0));return}if(!e._isInputElement(n)){if(s&&e.topLeftCells&&s._uid==e.topLeftCells._uid){var f=ae;switch(e.selectionMode){case f.None:case f.Cell:break;default:e.selectAll()}return}if(s&&e.columnHeaders&&s._uid==e.columnHeaders._uid){if(e.allowPinning&&dt(n,Pe._WJC_PIN))this._clickPin(t,i);else if(!e._isTransposed()&&dt(t.target,Pe._WJC_COLLAPSE)){if(m=e._getColumnGroup(i.row,i.col))if(o)for(var p=m.isCollapsed,_=m.level,v=[],b=0;b<e.columns.length;b++)(m=e._getColumnGroup(i.row,b))&&m.collapseTo&&m.level==_&&v.indexOf(m)<0&&(v.push(m),m.isCollapsed=!p);else m.isCollapsed=!m.isCollapsed;e.scrollIntoView(-1,i.col)}else n instanceof HTMLSpanElement&&n.parentElement instanceof HTMLLabelElement&&(n=n.parentElement.querySelector("input")),n instanceof HTMLInputElement||this._clickSort(t,i),e.focus(),e.scrollIntoView(-1,i.col);return}if(s&&e.rowHeaders&&s._uid==e.rowHeaders._uid){if(e._isTransposed()&&dt(t.target,Pe._WJC_COLLAPSE)){var m;if(m=e._getColumnGroup(i.row,i.col))if(o){p=m.isCollapsed,_=m.level,v=[];for(var w=0;w<e.rows.length;w++)(m=e._getColumnGroup(w,i.col))&&m.collapseTo&&m.level==_&&v.indexOf(m)<0&&(v.push(m),m.isCollapsed=!p)}else m.isCollapsed=!m.isCollapsed}return}if(s&&e.cells&&s._uid==e.cells._uid){if(i.row<0){this._clickSort(t,i);return}if(dt(n,Pe._WJC_COLLAPSE)){var g=e.rows[i.row];g instanceof we&&(o?e.collapseGroupsToLevel(g.isCollapsed?g.level+1:g.level):g.isCollapsed=!g.isCollapsed);return}dt(n,Pe._WJC_DROPDOWN)&&e._edtHdl._toggleListBox(t,i.range)}}}},r.prototype._hasRadioMap=function(t){var e=t.target;if($(e,"label")){var n=dt(e,Pe._WJC_RADIOMAP);return dt(n,bn)==this._g.hostElement}return!1},r.prototype._clickSort=function(t,e){var n=t.ctrlKey||t.metaKey,i=t.shiftKey;Ao(this._g,e.panel,e.col,e.row,t,n,i)},r.prototype._clickPin=function(t,e){Mo(this._g,e.col,e.row,!0,t.shiftKey)},r.prototype._dblclick=function(t){if(!t.defaultPrevented){var e,n=this._g,i=n.hitTest(t),o=t.ctrlKey||t.metaKey,s=i.range,l=i.cellType,a=P,u=n.allowResizing,h=Jt,c=i._inRightFrozenArea&&n._hasScroll(n.columns),d=n._getRangesToResize(t,!0);if(d||(d=[n.selection]),(i.edgeRight&&!c||i.edgeLeft&&c)&&u&h.Columns){if(l==a.TopLeft)i.panel.columns[i.col].allowResizing&&(e=new Re(i.panel,new j(-1,i.col)),n.onAutoSizingColumn(e)&&n.onResizingColumn(e)&&(this._ignoreClick=!0,n.autoSizeColumn(i.col,!0),n.onAutoSizedColumn(e),n.onResizedColumn(e),t.preventDefault()));else if(l==a.ColumnHeader||u&ji){l==a.ColumnHeader&&(o||n._canResizeAllCellsWithoutCtrl())||(d=[s]);for(var f=0;f<d.length;f++)for(var p=d[f],_=l==a.RowHeader||l==a.BottomLeft,v=p.leftCol;v<=p.rightCol;v++)i.panel.columns[v].allowResizing&&(e=new Re(i.panel,new j(-1,v)),n.onAutoSizingColumn(e)&&n.onResizingColumn(e)&&(this._ignoreClick=!0,n.autoSizeColumn(v,_),n.onResizedColumn(e),n.onAutoSizedColumn(e),t.preventDefault()))}this.resetMouseState()}else{var b=i._inBottomFrozenArea&&n._hasScroll(n.rows);if((i.edgeBottom&&!b||i.edgeTop&&b)&&u&h.Rows){if(l==a.TopLeft||l==a.BottomLeft)i.getRow().allowResizing&&(_=l==a.TopLeft||null,e=new Re(i.panel,new j(i.row,-1)),n.onAutoSizingRow(e)&&n.onResizingRow(e)&&(this._ignoreClick=!0,n.autoSizeRow(i.row,_),n.onResizedRow(e),n.onAutoSizedRow(e),t.preventDefault()));else if(l==a.RowHeader||u&ji){var m=i.panel;for(_=m==n.columnHeaders||m==n.columnFooters&&null,(o||n._canResizeAllCellsWithoutCtrl())&&m&&n.cells||(d=[s]),f=0;f<d.length;f++)for(var w=d[f],g=w.topRow;g<=w.bottomRow;g++)m.rows[g].allowResizing&&(e=new Re(m,new j(g,-1)),n.onAutoSizingRow(e)&&n.onResizingRow(e)&&(this._ignoreClick=!0,n.autoSizeRow(g,_),n.onResizedRow(e),n.onAutoSizedRow(e),t.preventDefault()))}this.resetMouseState()}}}},r.prototype._hover=function(t){if(!this._isDown){var e=this._g,n=e.hitTest(t),i="";return this._szRowCol=this._getResizeColHt(n)||this._getResizeRowHt(n),this._szRowCol instanceof Je?(i="col-resize",this._wasAllRowColHidden=e.columns.visibleLength===0):this._szRowCol instanceof _t&&(i="row-resize",this._wasAllRowColHidden=e.rows.visibleLength===0),this._szStart=this._szRowCol?this._szRowCol.renderSize:0,e.hostElement.style.cursor=i,n}return null},r.prototype._getResizeColHt=function(t){var e,n=this._g,i=n.allowResizing,o=t.cellType,s=P;return i&Jt.Columns&&(o==s.ColumnHeader||o==s.TopLeft||i&ji)&&(t._inRightFrozenArea&&n._hasScroll(n.columns)?(t.edgeLeft&&(e=t.getColumn()),t.edgeFarLeft&&(e=this._getResizeCol(t.panel,t.col,!0)||t.getColumn()),t.edgeRight&&(e=this._getResizeCol(t.panel,t.col)||e)):(t.edgeRight&&(e=t.getColumn()),t.edgeFarRight&&(e=this._getResizeCol(t.panel,t.col)||t.getColumn()),t.edgeLeft&&(e=this._getResizeCol(t.panel,t.col,!0)||e))),e&&e.allowResizing?e:null},r.prototype._getDvMarker=function(){return this._dvMarker||(this._dvMarker=Oe('<div class="'+z.marker+'">&nbsp;</div>')),this._dvMarker},r.prototype._getResizeRowHt=function(t){var e,n=this._g,i=n.allowResizing,o=Jt,s=t.cellType,l=P;return i&o.Rows&&(s==l.RowHeader||s==l.TopLeft||i&ji)&&(t._inBottomFrozenArea&&n._hasScroll(n.rows)?(t.edgeTop&&(e=t.getRow()),t.edgeFarTop&&(e=this._getResizeRow(t.panel,t.row,!0)||t.getRow()),t.edgeBottom&&(e=this._getResizeRow(t.panel,t.row)||e)):(t.edgeBottom&&(e=t.getRow()),t.edgeFarBottom&&(e=this._getResizeRow(t.panel,t.row)||t.getRow()),t.edgeTop&&(e=this._getResizeRow(t.panel,t.row,!0)||e))),e&&e.allowResizing?e:null},r.prototype._getResizeCol=function(t,e,n){n===void 0&&(n=!1);var i=this._g,o=t.columns;if(n){for(var s=e-1;s>=0;s--)if((l=o[s]).isVisible)return this._asResizable(l);if(o==i.columns&&(i.headersVisibility&le.Row)!=0){for(s=(o=i.rowHeaders.columns).length-1;s>=0;s--)if((l=o[s]).isVisible)return this._asResizable(l)}return null}for(s=e+1;s<o.length;s++)if((l=o[s]).isVisible)return this._asResizable(l);if(e==o.length-1&&o==i.rowHeaders.columns)for(o=i.columns,s=0;s<o.length;s++){var l;if((l=o[s]).isVisible)return this._asResizable(l)}return null},r.prototype._getResizeRow=function(t,e,n){n===void 0&&(n=!1);var i=this._g,o=t.rows;if(n){for(var s=e-1;s>=0;s--)if((l=o[s]).isVisible)return this._asResizable(l);if(o==i.rows&&(i.headersVisibility&le.Column)!=0){for(s=(o=i.columnHeaders.rows).length-1;s>=0;s--)if((l=o[s]).isVisible)return this._asResizable(l)}return null}for(s=e+1;s<o.length;s++)if((l=o[s]).isVisible)return this._asResizable(l);if(e==o.length-1&&o==i.columnHeaders.rows)for(o=i.rows,s=0;s<o.length;s++){var l;if((l=o[s]).isVisible)return this._asResizable(l)}return null},r.prototype._asResizable=function(t){return t.renderSize==0&&t.allowResizing?t:null},r.prototype._mouseSelect=function(t,e){var n=this,i=this._g;if(t&&this._htDown&&this._htDown.panel&&i.selectionMode!=ae.None){var o=new Dn(this._htDown.panel,t);this._handleSelection(o,e),!bi()&&t.button>=0&&t.target!=i._root&&((o=new Dn(i,t)).panel||setTimeout(function(){n._isDown&&n._eMouse&&n._mouseSelect(n._eMouse,e)},100))}},r.prototype._handleResizing=function(t){t.type=="mousedown"&&(Ht()?S(t.target,"draggable",null):t.preventDefault());var e=this._szRowCol,n=this._g,i=this._g.controlRect,o=n._szClientSB.width-n._szClient.width+xt._RESIZE_SCRL_GAP,s=n._szClientSB.height-n._szClient.height+xt._RESIZE_SCRL_GAP;if(e instanceof Je){var l=this._scrollbarStatusAtMouseDown?this._scrollbarStatusAtMouseDown.col:n._hasScroll(n.columns),a=Oi(t).x,u=n.columns._frozenInternal&&n.columns._frozenInternal<0&&n.columns.isFrozen(e.index),h=Math.round(Math.max(r._SZ_MIN,this._szStart+(a-this._htDown.point.x)*(u&&l?-1:1)*(n.rightToLeft?-1:1))),c=(m=Math.round(i.left))+i.width;n.rightToLeft?m+=o:c-=o;var d=n.columns._frozenInternal<0&&n.columns.isFrozen(e.index),f=n.rightToLeft?-1:1;f=d?-f:f;var p=Math.abs(e.renderWidth-(this._szInitial?this._szInitial.col:0));if(n.columns.isFrozen(e.index)||!(8&n.allowResizing))if(a>c&&(!this._szInitial||this._szInitial.canHaveHScrl)){var _=Math.abs(Math.abs(this._htDown.point.x-c)-p)*f;h=Math.max(e.renderWidth+_,0)}else a<m&&(_=Math.abs(Math.abs(m-this._htDown.point.x)-p)*f,h=Math.max(e.renderWidth-_,0));if(e.renderSize!=h){if(this._szArgs==null){var v=n.rowHeaders.columns.indexOf(e)>-1?n.rowHeaders:n.cells;this._szArgs=new Re(v,new j(-1,e.index))}this._szArgs.data={newSize:h,isPrimaryDragged:!0},this._szArgs.cancel=!1,n.onResizingColumn(this._szArgs)&&(this._szArgs.data.maxSize&&(h=this._szArgs.data.maxSize),n.deferResizing?this._showResizeMarker(h):e.width=h)}}var b=this._szRowCol;if(b instanceof _t){l=this._scrollbarStatusAtMouseDown?this._scrollbarStatusAtMouseDown.row:n._hasScroll(n.rows);var m,w=Oi(t).y,g=n.rows._frozenInternal&&n.rows._frozenInternal<0&&n.rows.isFrozen(b.index);if(h=Math.round(Math.max(r._SZ_MIN,this._szStart+(w-this._htDown.point.y)*(g&&l?-1:1))),c=(m=Math.round(i.top))+i.height-s-n.columnFooters.rows.getTotalSize(),f=n.rows._frozenInternal<0&&n.rows.isFrozen(b.index)?-1:1,p=Math.abs(b.renderHeight-(this._szInitial?this._szInitial.row:0)),n.rows.isFrozen(b.index)||!(8&n.allowResizing))if(w>c&&(!this._szInitial||this._szInitial.canHaveVScrl)){var y=Math.abs(Math.abs(this._htDown.point.y-c)-p)*f;h=Math.max(b.renderHeight+y,0)}else w<m&&(y=Math.abs(Math.abs(m-this._htDown.point.y)-p)*f,h=Math.max(b.renderHeight-y,0));b.renderSize!=h&&(this._szArgs==null&&(v=n.columnHeaders.rows.indexOf(b)>-1?n.columnHeaders:n.columnFooters.rows.indexOf(b)>-1?n.columnFooters:n.cells,this._szArgs=new Re(v,new j(b.index,-1))),this._szArgs.data={newSize:h,isPrimaryDragged:!0},this._szArgs.cancel=!1,n.onResizingRow(this._szArgs)&&(this._szArgs.data.maxSize&&(h=this._szArgs.data.maxSize),n.deferResizing?this._showResizeMarker(h):b.height=h))}this._szArgs&&t.preventDefault()},r.prototype._dragstart=function(t){var e=this._g,n=this._htDown,i=li,o=P;if(n){if(this._dragSrc=null,this._htDrag=null,this._chldColGrpMarker=!1,!this._szRowCol){var s=new Re(n.panel,n.range),l=e.allowDragging,a=n.cellType,u=n.panel.rows,h=n.getColumn(!0);if(h&&h.allowDragging&&(a==o.ColumnHeader||a==o.TopLeft)&&l&i.Columns&&(e.onDraggingColumn(s)?this._dragSrc=t.target:t.preventDefault()),!this._dragSrc&&n.row>-1&&u[n.row].allowDragging){var c=u[n.row];c instanceof we||c instanceof Me||a==o.RowHeader&&l&i.Rows&&(e.onDraggingRow(s)?this._dragSrc=t.target:t.preventDefault())}}this._dragSrc&&t.dataTransfer&&!t.defaultPrevented&&(this._htDrag=n,Us(t.dataTransfer,"move"),t.stopPropagation(),be(this._dragSrc,Rs),e.beginUpdate(),this._updating=!0)}},r.prototype._dragend=function(t){this._dragSrc=null,this._htDrag=null,this.resetMouseState()},r.prototype._dragover=function(t){var e=this._g,n=this._hitTest(t),i=this._dragSrc?this._htDrag:null,o=P,s=!1;if(this._htDown&&(n.row>this._htDown.row?this.isDetailRow(n.row+1)&&(n._row+=1):n.row<this._htDown.row&&this.isDetailRow(n.row)&&(n._row-=1)),i&&n.cellType==i.cellType){var l=new Re(n.panel,n.range,i);n.cellType==o.ColumnHeader&&e._hasColumnGroups()?(l.cancel=!e._canMoveColumnGroup(i.row,i.col,n.row,n.col),s=e.onDraggingColumnOver(l)):n.cellType==o.ColumnHeader?(l.cancel=!e.columns.canMoveElement(i.col,n.col),s=e.onDraggingColumnOver(l)):n.cellType==o.RowHeader?(l.cancel=!e.rows.canMoveElement(i.row,n.row),s=e.onDraggingRowOver(l)):n.cellType==o.TopLeft&&(l.cancel=!e.topLeftCells.columns.canMoveElement(i.col,n.col),s=e.onDraggingColumnOver(l))}if(s?(t.dataTransfer.dropEffect="move",t.preventDefault(),t.stopPropagation(),this._showDragMarker(n)):this._showDragMarker(null),i&&e.autoScroll){var a=e.controlRect,u=e.scrollPosition,h=H._DRAG_SCROLL_EDGE,c=H._DRAG_SCROLL_STEP;i.panel==e.columnHeaders?(t.pageX-a.left<h&&(u.x+=c),a.right-t.pageX<h&&(u.x-=c)):i.panel==e.rowHeaders&&(t.pageY-a.top<h&&(u.y+=c),a.bottom-t.pageY<h&&(u.y-=c)),u.equals(e._ptScrl)||(e.scrollPosition=u,e._rcBounds=null)}},r.prototype._dragleave=function(t){this._showDragMarker(null)},r.prototype._drop=function(t){var e=this._g,n=this._hitTest(t),i=this._dragSrc?this._htDrag:null,o=P;if(i&&n.cellType==i.cellType){var s=e.selection,l=new Re(n.panel,n.range,i);if(n.cellType==o.ColumnHeader&&e._hasColumnGroups()){var a=e._getColumnGroup(i.row,i.col).columns.length,u=a>0?a:1,h=e.columns._frozenInternal;e._moveColumnGroup(i.row,i.col,n.row,n.col,this._chldColGrpMarker),h>=0?i.col<h&&n.col>=h?e.columns._frozenInternal-=u:i.col>=h&&n.col<h&&(e.columns._frozenInternal+=u):i.col<e.columns.length+h&&n.col>=e.columns.length+h?e.columns._frozenInternal-=u:i.col>=e.columns.length+h&&n.col<e.columns.length+h&&(e.columns._frozenInternal+=u),e.activePanelType===P.ColumnHeader||e.activePanelType===P.TopLeft?e.select(s.row,n.col,e.columnHeaders):e.select(s.row,n.col),e.onDraggedColumn(l)}else if(n.cellType==o.ColumnHeader)e.columns.moveElement(i.col,n.col),e.activePanelType===P.ColumnHeader||e.activePanelType===P.TopLeft?e.select(s.row,n.col,e.columnHeaders):e.select(s.row,n.col),e.onDraggedColumn(l);else if(n.cellType==o.RowHeader){var c=n.row;n.row>this._htDown.row&&this.isDetailRow(n.row+1)?c+=1:n.row<this._htDown.row&&this.isDetailRow(n.row)&&(c-=1),this.isDetailRow(i.row)?this.moveDetailRow(i.row-1,c):this.isDetailRow(i.row+1)?this.moveDetailRow(i.row,c):e.rows.moveElement(i.row,c),e.select(n.row,s.col),e.onDraggedRow(l)}else n.cellType==o.TopLeft&&(e.topLeftCells.columns.moveElement(i.col,n.col),e.onDraggedColumn(l))}this.resetMouseState()},r.prototype._hitTest=function(t){var e=this._g;return e._rcBounds=null,e.hitTest(t)},r.prototype._showResizeMarker=function(t){var e,n=this._g,i=n._ptScrl,o=this._szArgs.panel.cellType,s=P,l=this._getDvMarker(),a=n.cells.hostElement;l.parentElement!=a&&a.appendChild(l),this._szRowCol instanceof Je?(e={left:this._szRowCol.pos+t-1,top:-1e3,right:"",bottom:0,width:3,height:""},o!=s.TopLeft&&o!=s.RowHeader||(e.left-=n._eTL.offsetWidth+i.x),o==s.Cell&&n.columns._frozenInternal>0&&n.columns.isFrozen(this._szRowCol.index)&&(e.left-=i.x),o==s.Cell&&n.columns._frozenInternal<0&&n.columns.isFrozen(this._szRowCol.index)&&(e.left=Math.min(this._szRowCol.pos,this._g._szClient.width+this._szRowCol._antipos)-t+this._szRowCol.renderWidth+1),n.rightToLeft&&(e.left=a.clientWidth-e.left-e.width)):this._szRowCol instanceof _t&&(e={left:-1e3,top:this._szRowCol.pos+t-1,right:0,bottom:"",width:"",height:3},o!=s.TopLeft&&o!=s.ColumnHeader||(e.top-=n._eTL.offsetHeight+i.y),o==s.Cell&&n.rows._frozenInternal>0&&n.rows.isFrozen(this._szRowCol.index)&&(e.top-=i.y),o==s.Cell&&n.rows._frozenInternal<0&&n.rows.isFrozen(this._szRowCol.index)&&(e.top=Math.min(this._szRowCol.pos,this._g._szClient.height+this._szRowCol._antipos)-t+this._szRowCol.renderHeight+1)),B(l,e)},r.prototype._showDragMarker=function(t){var e=this._getDvMarker();if(t&&t.panel){if(!t.range.equals(this._rngTarget)){this._rngTarget=t.range;var n=t.panel.hostElement;e.parentElement!=n&&n.appendChild(e);var i=this._g,o=i._ptScrl,s=P,l={left:0,top:0,width:6,height:6,right:"",bottom:""};switch(t.cellType){case s.ColumnHeader:var a=i._getColumnGroup(t.row,t.col);if(a){var u=a._rng,h=t.panel.rows,c=t.panel.columns;if(a.isEmpty&&a.binding===null){var d=h[u.bottomRow],f=c[u.leftCol],p=i.rightToLeft,_=p?e.parentElement.clientWidth-t.point.x:t.point.x,v=Math.max(f.renderWidth/5,r._SZ_MAX_COLGRP_EDGE),b=f.pos+v,m=f.pos+f.renderWidth-v,w=this._htDown&&t.col>this._htDown.col;if(!w&&_>b||w&&_<m){l.top=d.pos-l.height/2+d.renderHeight,l.left=p?e.parentElement.clientWidth-f.pos-f.renderWidth:f.pos,l.width=f.renderWidth,this._chldColGrpMarker=!0;break}}this._chldColGrpMarker=!1,l.top=0,l.height=0;for(var g=0;g<u.topRow;g++)l.top+=h[g].renderHeight;for(g=u.topRow;g<=u.bottomRow;g++)l.height+=h[g].renderHeight;if(l.left=0,this._htDown&&t.col>this._htDown.col){var y=c[u.rightCol];l.left=y.pos-l.width/2+y.renderWidth}else{var I=c[u.leftCol];l.left=I.pos-l.width/2}i.rightToLeft&&(l.left=e.parentElement.clientWidth-l.left-l.width);break}case s.TopLeft:case s.ColumnHeader:var x=t.panel.columns[t.col],R=i.columns._frozenInternal<0&&i.columns.isFrozen(t.col)?Math.min(x.pos,i._szClient.width+x._antipos):x.pos;l.left=R-l.width/2,l.height=t.panel.height,this._htDown&&t.col>this._htDown.col&&(l.left+=x.renderWidth),t.cellType==s.ColumnHeader&&i.columns.isFrozen(t.col)&&(l.left-=o.x),i.rightToLeft&&(l.left=e.parentElement.clientWidth-l.left-l.width);break;case s.RowHeader:var k=t.getRow(),D=i.rows._frozenInternal<0&&i.rows.isFrozen(t.row)?Math.min(k.pos,i._szClient.height+k._antipos):k.pos;l.top=D-l.height/2,l.width=t.panel.width,t.row>this._htDown.row&&(l.top+=k.renderHeight),i.rows.isFrozen(t.row)&&(l.top-=o.y)}B(e,l)}}else Ne(e),this._rngTarget=null},r.prototype._finishResizing=function(t,e){var n=this._g,i=n.selection,o=this._szArgs,s=this._eMouse,l=s&&(s.ctrlKey||s.metaKey),a=P,u=this._wasAllRowColHidden&&this._htDown.cellType===a.TopLeft&&o.panel.cellType===a.Cell;if(o&&(!o.cancel||o.data&&o.data.internalCancel)){var h=o.data||{};e||(e=[n.selection]);var c=this._g.controlRect,d=n._szClientSB.width-n._szClient.width+xt._RESIZE_SCRL_GAP,f=n._szClientSB.height-n._szClient.height+xt._RESIZE_SCRL_GAP,p=Oi(t),_=Math.round(c.left),v=_+c.width;n.rightToLeft?_+=d:v-=d;var b=Math.round(c.top),m=b+c.height-f-n.columnFooters.rows.getTotalSize(),w=p.y>=b&&p.y<m,g=p.x>=_&&p.x<v;if(o.col>-1&&this._szRowCol instanceof Je){var y=this._scrollbarStatusAtMouseDown?this._scrollbarStatusAtMouseDown.col:n._hasScroll(n.columns),I=o.col,x=Oi(t).x,R=this._szRowCol,k=n.columns._frozenInternal&&n.columns._frozenInternal<0&&n.columns.isFrozen(R.index),D=Math.round(Math.max(r._SZ_MIN,this._szStart+(x-this._htDown.point.x)*(k&&y?-1:1)*(this._g.rightToLeft?-1:1)));if(this._htDown.cellType,a.TopLeft,g)o.panel.columns[I].width=Math.round(D);else if(n.deferResizing){var E=n.columns._frozenInternal<0&&n.columns.isFrozen(I),T=n.rightToLeft?-1:1;if(T=E?-T:T,n.columns.isFrozen(R.index)||!(8&n.allowResizing))if(p.x>v){var L=Math.abs(this._htDown.point.x-v)*T;D=Math.max(o.panel.columns[I].renderWidth+L,0)}else p.x<_&&(L=Math.abs(_-this._htDown.point.x)*T,D=Math.max(o.panel.columns[I].renderWidth-L,0));o.panel.columns[I].width=Math.round(D)}n.onResizedColumn(o);for(var O=0;O<e.length;O++)if(i=e[O],(l||n._canResizeAllCellsWithoutCtrl())&&(this._htDown.cellType==a.ColumnHeader||u)){for(var X=n.columns[I].size,Q=i.leftCol;Q<=i.rightCol;Q++)n.columns[Q].allowResizing&&Q!=I&&((o=new Re(n.cells,new j(-1,Q))).data=ro({},h,{isPrimaryDragged:!1}),n.onResizingColumn(o)&&(n.columns[Q].size=X,n.onResizedColumn(o)));n.columns.isFrozen(I)&&(n.columns[I].size=X)}t.preventDefault()}if(o.row>-1&&this._szRowCol instanceof _t){y=this._scrollbarStatusAtMouseDown?this._scrollbarStatusAtMouseDown.row:n._hasScroll(n.rows);var Y=o.row,se=Oi(t).y,ue=this._szRowCol,de=n.rows._frozenInternal&&n.rows._frozenInternal<0&&n.rows.isFrozen(ue.index);if(D=Math.round(Math.max(r._SZ_MIN,this._szStart+(se-this._htDown.point.y)*(de&&y?-1:1))),this._htDown.cellType,a.TopLeft,w)o.getRow().height=Math.round(D),"setHeights"in n&&(Ce=n).setHeights(Array.from(Ce.rows).map(function(Ze){return Ze.height}));else if(n.deferResizing){if(T=n.rows._frozenInternal<0&&n.rows.isFrozen(o.row)?-1:1,n.rows.isFrozen(ue.index)||!(8&n.allowResizing))if(p.y>m){var Te=Math.abs(this._htDown.point.y-m)*T;D=Math.max(o.getRow().renderHeight+Te-n.columnFooters.rows.getTotalSize(),0)}else p.y<b&&(Te=Math.abs(_-this._htDown.point.y)*T,D=Math.max(o.getRow().renderHeight-Te-n.columnFooters.rows.getTotalSize(),0));if(o.getRow().height=Math.round(D),"setHeights"in n){var Ce;(Ce=n).setHeights(Array.from(Ce.rows).map(function(Ze){return Ze.height}))}}for(n.onResizedRow(o),O=0;O<e.length;O++)if(i=e[O],(l||n._canResizeAllCellsWithoutCtrl())&&(this._htDown.cellType==a.RowHeader||u)){for(var N=n.rows[Y].size,je=i.topRow;je<=i.bottomRow;je++)n.rows[je].allowResizing&&je!=Y&&((o=new Re(n.cells,new j(je,-1))).data=ro({},h,{isPrimaryDragged:!1}),n.onResizingRow(o)&&(n.rows[je].size=N,n.rows[je].resizedManually=!0,n.onResizedRow(o)));n.rows.isFrozen(Y)&&(n.rows[Y].size=N)}o.panel.rows[Y].resizedManually=!0,t.preventDefault()}}},r.prototype._limitSizeByFrozen=function(t,e,n){n===void 0&&(n=5);var i=this._g;if(t instanceof Je){var o=i.columns._frozenInternal>0?i.columns.slice(0,i.columns._frozenInternal).reduce(function(c,d){return c+d.renderSize},0):i.columns.slice(i.columns.length+i.columns._frozenInternal,i.columns.length).reduce(function(c,d){return c+d.renderSize},0),s=o-t.renderSize+e,l=!i._hasScroll(i.columns)&&i.columns._frozenInternal<0?i._szClient.width-n-i.columns.lastFrozen.pos:i._szClient.width-n;s>=l&&(e=l-o+t.renderSize)}else if(t instanceof _t){var a=i.rows._frozenInternal>0?i.rows.slice(0,i.rows._frozenInternal).reduce(function(c,d){return c+d.renderSize},0):i.rows.slice(i.rows.length+i.rows._frozenInternal,i.rows.length).reduce(function(c,d){return c+d.renderSize},0),u=a-t.renderSize+e,h=!i._hasScroll(i.rows)&&i.rows._frozenInternal<0?i._szClient.height-n-i.rows.lastFrozen.pos:i._szClient.height-n;u>=h&&(e=h-a+t.renderSize)}return e},r.prototype._handleSelection=function(t,e){var n=this._g,i=n._selHdl.selection,o=new j(t.row,t.col),s=P,l=ae,a=null,u=this._eMouse&&(this._eMouse.ctrlKey||this._eMouse.metaKey),h=!1,c=t.col>=this._anchorCol;if(o.isValid)if(this._lbSelState==null){switch(t.cellType!=s.ColumnHeader&&n._clearAnchorCell(),t.cellType){case s.RowHeader:o.col=0,o.col2=n.columns.length-1;break;case s.ColumnHeader:switch(n.selectionMode){case l.Row:case l.Cell:o.row=o.row2=i.row,e=!1;break;default:o.row=0,o.row2=n.rows.length-1,(a=n._getColumnGroup(t.row,t.col))!=null&&(n.anchorCursor?(a._rng.col<=this._anchorCol&&this._anchorCol<=a._rng.col2&&(this._anchorCol=a._rng.col2),n._setAnchorCell(0,this._anchorCol)):a._rng.col<this._anchorCol&&this._anchorCol<=a._rng.col2&&(this._anchorCol=a._rng.col),c?(o.col=a._rng.col2,o.col2=a._rng.col):(o.col=a._rng.col,o.col2=a._rng.col2,i.col2<o.col2&&(i.col2=o.col2)))}}if(e&&(t.cellType==s.ColumnHeader?(n.anchorCursor?n._getAnchorCell()==null&&n.selectionMode!=ae.Row&&n.selectionMode!=ae.Cell&&n._setAnchorCell(i.row,i.col):n._clearAnchorCell(),o.row2=i.row2,!c&&i.col>i.col2?o.col2=i.col:o.col2=i.col2,a!=null&&c&&o.col2>a._rng.col&&(o.col2=a._rng.col)):n.anchorCursor?(o.row=i.row,o.col=i.col):(o.row2=i.row2,o.col2=i.col2),!o.isValid)){var d=this._htDown;d&&(o=new j(d.row,d.col))}if(dt(this._eMouse.target,Pe._WJC_COLLAPSE)&&(u=!1,h=!0),n.selectionMode==ae.MultiRange){var f=n._selHdl,p=f.selection,_=f.extendedSelection,v=t.panel!=n.cells,b=f.cellRangeEventArgs;if(u){if(!e&&f._deselectRange(o)){if(f.selection.isValid&&(o=null),n._getProductInfo().indexOf("MultiRow")>-1){var m=[];for(E=0;E<_.length;E++)p.contains(_[E])&&m.push(E),b&&b.range.contains(_[E])&&!m.includes(E)&&m.push(E);if(m.length>0){for(var w=m.length-1;w>=0;w--)_.splice(m[w],1);m=[]}}}else if(p.isValid&&(v||!p.intersects(o)))if(n._getProductInfo().indexOf("MultiRow")>-1){var g=!1;for(m=[],p=f.selection.clone(),E=0;E<_.length&&!g;E++)_[E].equals(p)&&(g=!0),p.contains(_[E])&&m.push(E),b&&b.range.contains(_[E])&&!m.includes(E)&&m.push(E);if(m.length>0){for(w=m.length-1;w>=0;w--)_.splice(m[w],1);m=[]}g||_.push(p)}else{var y=f.selection;(v?this._splitRange(y):[y.clone()]).forEach(function(T){for(var L=!1,O=0;O<_.length&&!L;O++)_[O].equals(T)&&(L=!0);L||_.push(T)})}}else _.clear()}if(o){if(n.select(o,!1),!h)switch(t.cellType){case s.RowHeader:n.scrollIntoView(t.row,-1);break;case s.ColumnHeader:n.scrollIntoView(-1,t.col);break;default:n.scrollIntoView(t.row,t.col)}}else{var I=new Re(n.cells,new j(t.row,t.col));n.onSelectionChanging(I),n.onSelectionChanged(I),n.invalidate()}}else{var x=this._htDown.row,R=t.row,k=this._lbSel;x>R&&(R=x,x=t.row);var D=this._lbSelStateRows||{};if(this._lbSel)for(var E=k.row;E<=k.row2;E++)(E<x||E>R)&&(n.rows[E].isSelected=D[E]);for(var E=x;E<=R;E++)D.hasOwnProperty(E)||(D[E]=n.rows[E].isSelected),n.rows[E].isSelected=!this._lbSelState;this._lbSel=new j(x,0,R,0),n.scrollIntoView(t.row,t.col)}},r.prototype._splitRange=function(t){var e=this._g,n=e.columns.length,i=e.rows.length,o=[];if(t.columnSpan==n)for(var s=t.topRow;s<=t.bottomRow;s++)o.push(new j(s,0,s,n-1));else if(t.rowSpan==i)for(var l=t.leftCol;l<=t.rightCol;l++)o.push(new j(0,l,i-1,l));else o.push(t.clone());return o},r.prototype.isDetailRow=function(t){var e=this._g.rows[t];return!!e&&e.constructor.name==="DetailRow"},r.prototype.moveDetailRow=function(t,e){var n=this._g,i=n.rows[t],o=n.rows[t+1];t>e?(n.rows.splice(t,2),n.rows.splice(e,0,i,o)):t<e&&(n.rows.splice(t,2),n.rows.splice(e-1,0,i,o))},r.prototype.dispose=function(){this.mouseWhellTimer&&(clearTimeout(this.mouseWhellTimer),this.mouseWhellTimer=null),this._dvMarker&&this._dvMarker.parentNode&&Ne(this._dvMarker),this._dvMarker=null,this._g=null,this._htDown=null,this._szRowCol=null,this._selDown=null},r._SZ_MIN=0,r._SZ_MAX_COLGRP_EDGE=50,r}(),fo=function(){function r(){this._oldNoDataHeight=0}return r.prototype.updateNoDataContent=function(t,e){e.innerHTML=t.noDataOverlayContent},r.prototype.updateNoDataOverlay=function(t,e){var n=t.headersVisibility&le.Column?t.columnHeaders.rows.getTotalSize():0,i=!(t.rows.length||!t.noDataOverlayContent);return B(e,{display:i?"flex":"none",position:"absolute",alignItems:"center",justifyContent:"center",top:n+"px",width:"100%",height:"calc(100% - "+n+"px)",minHeight:4*t.rows.defaultSize+"px",overflow:"auto"}),S(e,"aria-hidden","true"),i?(this.updateNoDataContent(t,e),B(e,{alignItems:e.clientHeight<e.scrollHeight?"start":"center"}),this._oldNoDataHeight&&Math.abs(e.clientHeight-this._oldNoDataHeight)<=2?this._oldNoDataHeight:(this._oldNoDataHeight=e.clientHeight,e.clientHeight)):0},r}();kn("wijmo.grid",Hs);/*!
    *
    * Wijmo Library 5.20251.40
    * https://developer.mescius.com/wijmo
    *
    * Copyright(c) MESCIUS inc. All rights reserved.
    *
    * Licensed under the End-User License Agreement For MESCIUS Wijmo Software.
    * us.sales@mescius.com
    * https://developer.mescius.com/wijmo/licensing
    *
    */var dh=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])})(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();function po(){return ii("wijmo.input")}function Un(){return ii("wijmo.grid.detail")}var Nl=Hs&&Pe;Nl||(window.wijmo.grid={},window.wijmo.grid.CellFactory=function(){});var Qi=function(r){dh(t,r);function t(e){var n=r.call(this)||this;if(n._lastApplyTimeStamp=0,n._noApplyLag=!1,n._startingEditing=!1,n._cellStampCounter=0,n._composing=!1,n._autoSizeCache={},n._isCheckingHeight=!1,n._backupHeight=-1,n._cacheRow=null,n.grid=e,!t._templateTypes){t._templateTypes=[];for(var i in Se)isNaN(i)&&t._templateTypes.push(i)}var o=n;return n._baseCf=e.cellFactory,e.cellFactory=n,n._evtInput=document.createEvent("HTMLEvents"),n._evtInput.initEvent("input",!0,!1),n._evtBlur=document.createEvent("HTMLEvents"),n._evtBlur.initEvent("blur",!1,!1),e.prepareCellForEdit.addHandler(function(s,l){o._noApplyLag=!0}),e.cellEditEnded.addHandler(function(s,l){var a=l.range,u=a.col;if(u<0||u<e.columns.length){var h=e._getBindingColumn(e.cells,a.row,e.columns[u]);h&&h[t.getTemplContextProp(Se.CellEdit)]||(o._editChar=null)}setTimeout(function(){o._noApplyLag=!1},300)}),e.beginningEdit.addHandler(function(s,l){o._startingEditing=!0}),e.addEventListener(e.hostElement,"keydown",function(s){o._startingEditing=!1},!0),e.addEventListener(e.hostElement,"keypress",function(s){var l=s.charCode>32?String.fromCharCode(s.charCode):null;l&&$(s.target,"."+z.hostElement)===e.hostElement&&(!e.activeEditor||o._startingEditing?(o._editChar=l,setTimeout(function(){e.activeEditor||(o._editChar=null)},0)):o._editChar&&(o._editChar+=l))},!0),e.addEventListener(e.hostElement,"compositionstart",function(s){o._composing=!0},!0),e.addEventListener(e.hostElement,"compositionend",function(s){o._composing=!1},!0),e.updatedView.addHandler(function(s,l){n._updatedViewHandler()}),n}return t.prototype._updatedViewHandler=function(){var e=this;queueMicrotask(function(){e._autoSizeIfRequired()})},t.prototype.canRender=function(e){return!!e},t.prototype.updateCell=function(e,n,i,o,s){this._cellStampCounter=(this._cellStampCounter+1)%1e7,o[t._cellStampProp]=this._cellStampCounter,o.style.overflow&&(o.style.overflow="");var l=n,a=i;s&&!s.isSingleCell&&(n=s.row,i=s.col);var u,h=e.grid,c=h.editRange,d=e.rows[n],f=d.dataItem,p=!1,_=!1,v=!1,b=!1;switch(e.cellType){case P.Cell:if(c&&c.row===n&&c.col===i)u=Se.CellEdit,_=v=!0;else if(d instanceof we){var m=!((b=f instanceof Tt)||d.hasChildren);i==e.columns.firstVisibleIndex?u=m?Se.Cell:Se.GroupHeader:(u=m?Se.Cell:Se.Group,_=!0)}else d instanceof Me?u=Se.NewCellTemplate:Un()&&Un().DetailRow&&d instanceof Un().DetailRow||(u=Se.Cell);break;case P.ColumnHeader:u=Se.ColumnHeader;break;case P.RowHeader:u=h.collectionView&&h.collectionView.currentEditItem===f?Se.RowHeaderEdit:Se.RowHeader,p=!0;break;case P.TopLeft:u=Se.TopLeft,p=!0;break;case P.ColumnFooter:u=Se.ColumnFooter,_=!0;break;case P.BottomLeft:u=Se.BottomLeft,p=!0}var w=!1;if(u!=null){var g=null;if(b&&u==Se.GroupHeader?g=h.getColumn(f.groupDescription.propertyName):i>=0&&i<e.columns.length&&(g=e.cellType===P.ColumnHeader&&h._hasColumnGroups()?h._getColumnGroup(n,i):h._getBindingColumn(e,n,e.columns[i])),g){var y=t.getTemplContextProp,I=y(u),x=(p?h:g)[I];x||(u===Se.RowHeaderEdit?x=h[I=y(u=Se.RowHeader)]:u!==Se.Group&&u!==Se.GroupHeader||b||(x=g[I=y(u=Se.Cell)])),x&&this.canRender(x)&&(w=this._processTemplate(e,n,i,o,x,{needCellValue:_,isCvGroup:b,isEdit:v,riOriginal:l,ciOriginal:a,rng:s,templContextProp:I,col:g,row:d}))}}w||(this._doDisposeCell(o),this._baseCf.updateCell(e,l,a,o,s))},t.prototype._processTemplate=function(e,n,i,o,s,l){var a,u,h=this,c=l.needCellValue,d=l.isCvGroup,f=l.isEdit,p=e.grid,_=l.row,v=l.col,b=l.riOriginal,m=l.ciOriginal,w=l.rng,g=l.templContextProp,y=o[t._cellStampProp],I=this;c&&(a=e.getCellData(n,i,!1),u=e.getCellData(n,i,!0));var x=!!d&&_.isSummary,R=d&&(p.groupSummaryPosition===Pt.Bottom||p.groupSummaryPosition===Pt.Auto&&!_.isCollapsed),k=o.getAttribute(xt._WJS_MEASURE),D=k&&k.toLowerCase()==="true";f&&(this.clearCell(o),this._baseCf.updateCell(e,b,m,o,w,!0));var E,T=f&&p.imeEnabled,L=T&&this._composing,O=o[g],X={cell:o,column:v,row:_,panel:e,rng:w,isEdit:f,isImeInput:T,isTrueImeInput:L,templateContext:s,templateCache:O,templateContextProperty:g,cellStamp:y,cellValue:a,cellValueFormatted:u},Q=this.shouldInstantiate(X),Y=!0;if(d&&!x&&i!=e.columns.firstVisibleIndex&&R&&(Y=!1),Q){if(f){var se=o.firstElementChild;se&&(T||o.focus(),se.style.display="none")}else this.clearCell(o);this._doDisposeCell(o),Y&&(this.renderTemplate(X,!0),X.templateCache=O=o[g]),E=X.cellBindingsData}else Y?this.renderTemplate(X,!1):this._doDisposeCell(o),E=X.cellBindingsData;if(s.cellOverflow&&(o.style.overflow=s.cellOverflow),D?this.applyImmediately(X):s.autoSizeRows&&!T&&this._markForAutoSize(n,i,e),f&&(Y&&queueMicrotask(function(){h._updateEditRowSize(e,n,i,o)}),setTimeout(function(){T?h._initImeEditInput(X.cell,s):h._initEditInput(X.cell,s,null)},0)),f){I._cellEditorVars=E.localVars;var ue=function(Te,Ce){if(p.cellEditEnding.removeHandler(ue),!Ce.stayInEditMode){var N=Z();N&&N.dispatchEvent(I._evtBlur),J(o,Z())&&o.focus()}if(I._triggerEditorEvents(o),!Ce.cancel&&!Ce.stayInEditMode)for(var je=E.localVars,Ze=0,he=Object.getOwnPropertyNames(E.bindings);Ze<he.length;Ze++){var ze=he[Ze];E.bindings[ze].setValue(je,E.localVars.values[ze])}var ot=o.querySelectorAll("."+gi.hostElement);[].forEach.call(ot,function(gt){var mt=H.getControl(gt);mt&&po()&&mt instanceof po().DropDown&&(mt.isDroppedDown=!1)})},de=function(Te,Ce){p.cellEditEnded.removeHandler(de),I._cellEditorVars=null};p.cellEditEnding.addHandler(ue),p.cellEditEnded.addHandler(de)}else this._baseCf.updateCell(e,b,m,o,w,!1);return!0},t.prototype._updateEditRowSize=function(e,n,i,o){var s=this,l=e.rows[n],a=this.getHeight(e,n,i,o),u=0;if(this.grid.rowHeaders.columns[0]&&this.grid.rowHeaders.columns[0].isVisible)try{u=this.getHeight(this.grid.rowHeaders,n,0,this.grid.rowHeaders.getCellElement(n,0))}catch{}if(u>a&&(a=u),!l.resizedManually&&a>l.renderHeight){var h=l.height;l.height=a,this.grid._toInv&&(clearTimeout(this.grid._toInv),this.grid._listenResizeEvents=!1,this.grid.refreshCells(!0),setTimeout(function(){s.grid._listenResizeEvents=!0}));var c=function(d,f){l._editHandler=null,d.rowEditEnded.removeHandler(c),d.rows[n]&&(d.rows[n].height=h||null)};l._editHandler||(l._editHandler=c,this.grid.rowEditEnded.addHandler(c))}},t.prototype._autoSizePanelCells=function(e,n,i){for(var o,s=!1,l=0,a=!1,u=e.grid.editableCollectionView&&e.grid.editableCollectionView.currentEditItem,h=0,c=e.columns;h<c.length;h++)c[h].isVisible&&l++;for(var d=0,f=n.columns;d<f.length;d++)if(f[d].isVisible){a=!0;break}var p=e.rows.defaultSize;for(o in i)if(o=parseInt(o),e.rows[o]&&(!u||e.rows[o].dataItem!==u)&&!e.rows[o].resizedManually&&e.rows[o].detail==null){for(var _=Array.from(i[o].rowHeader),v=Array.from(i[o].cell),b=-1,m=0,w=_;m<w.length;m++){var g=w[m];(x=n.getCellElement(o,g))&&(!x.$__cellTemplRowHeaderEdit||x.$__cellTemplRowHeaderEdit&&u)&&(R=this.getHeight(n,o,g,x))>b&&(b=R)}for(var y=0,I=v;y<I.length;y++){var x;if(g=I[y],x=e.getCellElement(o,g)){var R;(R=this.getHeight(e,o,g,x))>b&&(b=R)}}v.length!=l&&p>b&&(b=p),e.grid.headersVisibility&le.Row&&a&&_.length===0&&p>b&&(b=p),!(e.rows[o].height&&e.rows[o].height>b)&&b>-1&&Math.abs(e.rows[o].height-b)>1&&(e.rows[o].height=b,s=!0)}return s},t.prototype.getHeight=function(e,n,i,o){var s=o.scrollHeight,l=e.rows,a=e.grid.getMergedRange(e,n,i,!1),u=a&&a.rowSpan||1;if(o.firstElementChild){var h=getComputedStyle(o),c=(parseFloat(h.paddingTop)||0)+(parseFloat(h.paddingBottom)||0),d=(parseFloat(h.borderBottomWidth)||0)+(parseFloat(h.borderTopWidth)||0),f=o.firstElementChild.scrollHeight+c+d;o.firstElementChild.childNodes.length>0&&o.firstElementChild.scrollHeight!=0&&(s=f)}return l.maxSize!=null&&(s=Math.min(s,l.maxSize)),s/u},t.prototype._autoSizeIfRequired=function(){var e=this.grid.editRange;if(e&&this.grid.columns[e.col]||this.grid._mouseHdl._isDown&&this.grid._mouseHdl._szArgs)this._autoSizeCache={};else{var n=this.grid.viewRange;if(this._autoSizeCache&&this._autoSizeCache.pendingCells)for(var i=n.topRow;i<=n.bottomRow;i++){if(this._autoSizeCache.pendingCells.cells&&this._autoSizeCache.pendingCells.cells[i]){this._autoSizePendingCells();return}if(this._autoSizeCache.pendingCells.headers&&this._autoSizeCache.pendingCells.headers[i]){this._autoSizePendingCells();return}if(this._autoSizeCache.pendingCells.footers&&this._autoSizeCache.pendingCells.footers[i]){this._autoSizePendingCells();return}}}},t.prototype._autoSizePendingCells=function(){var e=!1,n=!1,i=!1;try{if(this.grid.beginUpdate(),!this._autoSizeCache||!this._autoSizeCache.pendingCells)return;this._autoSizeCache.pendingCells.headers&&(e=this._autoSizePanelCells(this.grid.columnHeaders,this.grid.topLeftCells,this._autoSizeCache.pendingCells.headers)),this._autoSizeCache.pendingCells.cells&&(n=this._autoSizePanelCells(this.grid.cells,this.grid.rowHeaders,this._autoSizeCache.pendingCells.cells)),this._autoSizeCache.pendingCells.footers&&(i=this._autoSizePanelCells(this.grid.columnFooters,this.grid.bottomLeftCells,this._autoSizeCache.pendingCells.footers)),this._autoSizeCache={}}finally{this.grid.endUpdate(e||n||i)}},t.prototype._markForAutoSize=function(e,n,i){var o,s=!1;switch(this._autoSizeCache.pendingCells||(this._autoSizeCache.pendingCells={}),i.cellType){case P.TopLeft:s=!0;case P.ColumnHeader:this._autoSizeCache.pendingCells.headers||(this._autoSizeCache.pendingCells.headers={}),o=this._autoSizeCache.pendingCells.headers;break;case P.RowHeader:s=!0;case P.Cell:this._autoSizeCache.pendingCells.cells||(this._autoSizeCache.pendingCells.cells={}),o=this._autoSizeCache.pendingCells.cells;break;case P.BottomLeft:s=!0;case P.ColumnFooter:this._autoSizeCache.pendingCells.footers||(this._autoSizeCache.pendingCells.footers={}),o=this._autoSizeCache.pendingCells.footers;break;default:return}o[e]||(o[e]={rowHeader:new Set,cell:new Set}),s?o[e].rowHeader.add(n):o[e].cell.add(n)},t.prototype.getEditorValue=function(e){if(this._cellEditorVars){var n=e.editRange;return n&&n.isValid&&this._triggerEditorEvents(e.cells.getCellElement(n.row,n.col)),this._cellEditorVars.value}return r.prototype.getEditorValue.call(this,e)},t.prototype.disposeCell=function(e){this._doDisposeCell(e)},t.prototype.disposeTemplate=function(e,n,i){n&&(n.rootElement=null,n.column=null,e[n.templateContextProperty]=null,n.templateContextProperty=null)},t.prototype.setBindingsData=function(e,n,i,o,s,l){e.row=n,e.col=i,e.item=o;var a={},u=e.cell||{},h={},c={localVars:u,bindings:h};if(u.row=n,u.col=i,u.item=o,u.value=s,u.valueFormatted=e.cellValueFormatted,u.values=a,l)for(var d=0,f=Object.getOwnPropertyNames(l);d<f.length;d++){var p=f[d],_=new nt(l[p]);h[p]=_,a[p]=_.getValue(u)}return e.cell!==u&&(e.cell=u),c},t.prototype.checkHeight=function(e){var n=this;this._isCheckingHeight||setTimeout(function(){var i=e.cell;if(e.cellStamp===i[t._cellStampProp]){var o=i.scrollHeight,s=e.panel.rows,l=e.row.index,a=e.rng,u=a&&a.rowSpan||1,h=e.isEdit;if(s.maxSize!=null&&(o=Math.min(o,s.maxSize)),l<s.length&&s[l].renderHeight*u<o-1){var c=o/u;if(h){var d=n._isFullEdit(),f=n.grid;n._backupHeight=e.row.height,e.row.height=c,n._cacheRow=e.row,n._isCheckingHeight=!0,f.refresh(),f.startEditing(d),n._isCheckingHeight=!1}}h&&(e.isImeInput?n._initImeEditInput(e.cell,e.templateContext):n._initEditInput(e.cell,e.templateContext,null))}},0)},t.prototype._restoreRowHeight=function(){!this._isCheckingHeight&&this._cacheRow&&(this._cacheRow.height=this._backupHeight,this._backupHeight=-1,this._cacheRow=null)},t.prototype.doDisposeCell=function(e){for(var n=t._templateTypes,i=0;i<n.length;i++){var o=t.getTemplContextProp(Se[n[i]]),s=e[o];if(s){var l=(s.column||this.grid)[o];this.disposeTemplate(e,s,l),n[i]==Se[Se.CellEdit]&&this._restoreRowHeight()}}},t.getTemplContextProp=function(e){return"$__cellTempl"+Se[e]},t.prototype._doDisposeCell=function(e){this.doDisposeCell(e)},t.prototype._initEditInput=function(e,n,i){var o=this;this.setEditorFocusFlag(!0);var s=this.getEditorFocusFlag()!==!1;if(this.setEditorFocusFlag(null),this._setFullEdit(n),s){var l=this._findInitialInput(e);if(l){var a=function(){l.removeEventListener("focus",a),setTimeout(function(){var u=i??o._editChar;u&&(l.value=u,o._editChar=null,t._setSelectionRange(l,u.length,u.length),l.dispatchEvent(o._evtInput))},t._FOCUS_INTERVAL)};l.addEventListener("focus",a),l.focus()}}},t.prototype._initImeEditInput=function(e,n){var i=this,o=Z();if(o&&(o instanceof HTMLInputElement||o instanceof HTMLTextAreaElement)&&fe(o,z.gridIme)){var s=this._findInitialInput(e),l=s&&s.style.color,a=this._composing,u=function(){o.removeEventListener("compositionend",u),B(o,xr._cssHidden),i.setEditorFocusFlag(!0),s&&(s.style.color=l),i._initEditInput(e,n,a?o.value:null)};if(a){if(o.addEventListener("compositionend",u),s){var h=s.getBoundingClientRect(),c=o.getBoundingClientRect(),d=window.getComputedStyle(o),f=parseFloat(d.left),p=parseFloat(d.top);B(o,{left:f+h.left-c.left+"px",top:p+h.top-c.top+"px",width:h.width+"px",height:h.height+"px"}),s.style.color="transparent"}}else setTimeout(function(){return u()},t._FOCUS_INTERVAL)}},t.prototype._findInitialInput=function(e){var n=e&&e.rootElement&&e.rootElement.querySelectorAll("input,textarea")||e&&e.querySelectorAll("input,textarea");if(n)for(var i=0;i<n.length;i++){var o=n[i],s=window.getComputedStyle(o);if(s.display!=="none"&&s.visibility==="visible")return o}return null},t._setSelectionRange=function(e,n,i){if(i===void 0&&(i=n),J(document.body,e)&&!e.disabled&&e.style.display!="none")try{e.setSelectionRange(V(n),V(i),Ie()?null:"backward"),e.focus()}catch{}},t.prototype._triggerEditorEvents=function(e){if(e)for(var n=e.querySelectorAll("."+ge.hostElement),i=0;i<n.length;i++){var o=n[i],s=H.getControl(o);s&&this.flushPendingEvents(s)}},t.prototype._isFullEdit=function(){var e=this.grid;return!e.activeEditor||e._edtHdl._fullEdit},t.prototype._setFullEdit=function(e){var n=this.grid;e.forceFullEdit&&n.activeEditor&&(n._edtHdl._fullEdit=!0)},t._cellStampProp="__wjCellStamp",t._FOCUS_INTERVAL=H._FOCUS_INTERVAL+20,t}(Pe);Nl||(window.wijmo.grid=null);var Se;(function(r){r[r.Cell=0]="Cell",r[r.CellEdit=1]="CellEdit",r[r.ColumnHeader=2]="ColumnHeader",r[r.RowHeader=3]="RowHeader",r[r.RowHeaderEdit=4]="RowHeaderEdit",r[r.TopLeft=5]="TopLeft",r[r.GroupHeader=6]="GroupHeader",r[r.Group=7]="Group",r[r.NewCellTemplate=8]="NewCellTemplate",r[r.ColumnFooter=9]="ColumnFooter",r[r.BottomLeft=10]="BottomLeft"})(Se||(Se={}));kn("wijmo.interop.grid",ya);/*!
    *
    * Wijmo Library 5.20251.40
    * https://developer.mescius.com/wijmo
    *
    * Copyright(c) MESCIUS inc. All rights reserved.
    *
    * Licensed under the End-User License Agreement For MESCIUS Wijmo Software.
    * us.sales@mescius.com
    * https://developer.mescius.com/wijmo/licensing
    *
    */var fh=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])})(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Er=function(){return(Er=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r}).apply(this,arguments)},Ds={inputs:_s.inputs.concat(["allowAddNew","allowDelete","allowDragging","allowMerging","allowPinning","allowResizing","allowSorting","alternatingRowStep","anchorCursor","ariaLabel","autoClipboard","autoGenerateColumns","autoRowHeights","autoScroll","autoSearch","autoSizeMode","bigCheckboxes","caseSensitiveSearch","cellFactory","childItemsPath","cloneFrozenCells","columns","columnGroups","columnLayout","commitEmptyEdits","copyHeaders","deferResizing","editColumnIndex","errorTip","expandSelectionOnCopyPaste","frozenCells","frozenColumns","frozenRows","groupHeaderFormat","groupSummaryPosition","headersFocusability","headersVisibility","imeEnabled","isReadOnly","itemFormatter","itemValidator","itemsSource","keyActionEnter","keyActionTab","lazyRender","maxContent","mergeManager","newRowAtTop","pasteEmptyCells","preserveOutlineState","preserveSelectedState","preserveWhiteSpace","quickAutoSize","refreshOnEdit","rowHeaderPath","scrollPosition","scrollSize","selectedItems","selectedRanges","selectedRows","selection","selectionMode","showDropDown","showErrors","showGroups","showMarquee","showPlaceholders","showSelectedHeaders","showSort","skipMerged","sortOrder","sortRowIndex","stickyHeaders","treeIndent","validateEdits","virtualizationThreshold","noDataOverlayContent"]),events:_s.events.concat(["autoSizedColumn","autoSizedRow","autoSizingColumn","autoSizingRow","beginningEdit","cellEditEnded","cellEditEnding","columnGroupCollapsedChanged","columnGroupCollapsedChanging","copied","copying","deletedRow","deletingRow","draggedColumn","draggedRow","draggingColumn","draggingColumnOver","draggingRow","draggingRowOver","formatItem","groupCollapsedChanged","groupCollapsedChanging","itemsSourceChanged","itemsSourceChanging","loadedRows","loadingRows","pasted","pastedCell","pasting","pastingCell","pinnedColumn","pinningColumn","prepareCellForEdit","resizedColumn","resizedRow","resizingColumn","resizingRow","rowAdded","rowEditEnded","rowEditEnding","rowEditStarted","rowEditStarting","scrollPositionChanged","selectionChanged","selectionChanging","sortedColumn","sortingColumn","starSizedColumns","updatedLayout","updatedView","updatingLayout","updatingView"])},ph=wr(function(r,t){return Uu({ref:t,properties:Ds.inputs,events:Ds.events,props:r,constructor:xt,initControl:function(e){e.cellFactory=new mh(e)}}).renderResult}),Ts={inputs:["align","allowDragging","allowMerging","allowResizing","binding","cssClass","cssClassAll","dataMap","dataMapEditor","dataType","dropDownCssClass","format","inputType","isContentHtml","isReadOnly","isRequired","isSelected","isVisible","mask","maxLength","multiLine","size","sortMemberPath","visible","wordWrap","placeholder"],events:["gridChanged"]},ar={inputs:Ts.inputs.concat(["aggregate","allowSorting","cellTemplate","describedById","editor","header","maxWidth","minWidth","name","quickAutoSize","sortOrder","width"]),events:Ts.events.slice()},_h=wr(function(r,t){var e=Ro({ref:t,properties:ar.inputs,events:ar.events,props:r,constructor:Je,customConstructor:function(n,i){return n.autoGenerateColumns=!1,new Je(i)},needParentInstance:!1,parentProp:"columns",isParentPropArray:!0,assignedToParent:!0});return Er({$_wjComponent:!0},e)}),Ps={inputs:ar.inputs.concat(["collapseTo","columns","height","isCollapsed"]),events:ar.events.slice()};wr(function(r,t){var e=Ro({ref:t,properties:Ps.inputs,events:Ps.events,props:r,constructor:Ei,customConstructor:function(n,i){return n.autoGenerateColumns=!1,new Ei(i)},needParentInstance:!1,parentProp:"columnGroups",isParentPropArray:!0,assignedToParent:!0});return Er({$_wjComponent:!0},e)});var Ms={inputs:["cellType","template","autoSizeRows"],events:[]};wr(function(r,t){var e=Ro({ref:t,properties:Ms.inputs,events:Ms.events,props:r,constructor:gh,needParentInstance:!0,parentProp:"",isParentPropArray:!1,assignedToParent:!1});return Er({$_wjComponent:!0},e)});var gh=function(){function r(t,e){this.autoSizeRows=!0,this.parent=t,this.cellType=pe(e.cellType,Se,!1);var n=Qi.getTemplContextProp(this.cellType);this.template=Le(e.template,!0),t[n]=this}return r.prototype.initialize=function(t){this.removeBinding(),this.cellType=pe(t.cellType==null?this.cellType:t.cellType,Se,!1),this.template=t.template===void 0?this.template:Le(t.template,!0);var e=Qi.getTemplContextProp(this.cellType);this.parent[e]=this,this.autoSizeRows=t.autoSizeRows===void 0?this.autoSizeRows:M(t.autoSizeRows,!0)||!1,t.template!==void 0&&this.parent&&(this.parent.grid?this.parent.grid.invalidate():this.parent.invalidate&&this.parent.invalidate()),this.parent&&this.parent instanceof Je&&this.parent._setFlag(ie.HasTemplate,!0,!0)},r.prototype.removeBinding=function(){var t=Qi.getTemplContextProp(this.cellType);delete this.parent[t],this.parent&&this.parent instanceof Je&&this.parent._setFlag(ie.HasTemplate,!1,!0)},r.prototype.dispose=function(){this.removeBinding(),this.parent&&this.parent.grid?this.parent.grid.invalidate():this.parent&&this.parent.invalidate&&this.parent.invalidate()},r}(),mh=function(r){fh(t,r);function t(e){var n=r.call(this,e)||this;return n._renderedCells=[],e.updatedView.addHandler(function(i){queueMicrotask(function(){return n._reRenderCells()})},n),n}return t.prototype.shouldInstantiate=function(e){var n=e.templateCache;return n==null||n.column!==e.column||n.templateContextProperty!==e.templateContextProperty||e.cell.firstChild!=n.rootElement},t.prototype.renderTemplate=function(e,n){var i=e.row,o=e.templateContext,s=e.cell;if(e.cellBindingsData=this.setBindingsData({},i,e.column,i.dataItem,e.cellValue,o.valuePaths),e.cellBindingsData.localVars.valueFormatted=e.cellValueFormatted,this._renderCell(s,e),n){this._addRenderedCell(s);var l=e.templateCache={column:e.column,rootElement:s.firstElementChild,templateContextProperty:e.templateContextProperty};s[e.templateContextProperty]=l}},t.prototype.flushPendingUpdates=function(){Xu()},t.prototype.applyImmediately=function(e){},t.prototype.flushPendingEvents=function(e){},t.prototype.getEditorFocusFlag=function(){return!0},t.prototype.setEditorFocusFlag=function(e){},t.prototype.disposeTemplate=function(e,n,i){n&&(bs(e),this._removeRenderedCell(e),r.prototype.disposeTemplate.call(this,e,n,i))},t.prototype.clearCell=function(e){bs(e)},t.prototype.canRender=function(e){return!(!e||!e.template)},t.prototype._renderCell=function(e,n){var i=n||e.__wjCellLastRenderedProp;if(i){var o=i&&i.templateContext.template,s=i.cellBindingsData.localVars;if(s.row&&!s.row.grid&&(s.row=i.panel.grid.rows[s.row.index]),!s.row)return;$u(ve.createElement("div",{},o&&o(s)),e),e.__wjCellLastRenderedProp=i}},t.prototype._addRenderedCell=function(e){var n=this._renderedCells;n.indexOf(e)<0&&n.push(e)},t.prototype._removeRenderedCell=function(e){var n=this._renderedCells,i=n.indexOf(e);i>-1&&n.splice(i,1)},t.prototype._reRenderCells=function(){var e=this;this._renderedCells.forEach(function(n){return e._renderCell(n)})},t.prototype.checkHeight=function(e){var n=this;e.templateContextProperty!=="$__cellTemplGroupHeader"&&(this._isCheckingHeight||setTimeout(function(){if(!n._isCheckingHeight){var i=e.panel.rows,o=e.row.index;if(i[o]){var s=e.cell,l=s.style.height;s.style.height="0";var a=s.scrollHeight>7?s.scrollHeight:i[o].renderHeight;if(s.style.height=l,e.cellStamp===s[Qi._cellStampProp]){var u=e.rng,h=u&&u.rowSpan||1,c=e.isEdit;if(i.maxSize!=null&&(a=Math.min(a,i.maxSize)),o<i.length&&i[o].renderHeight<a-1||i[o].renderHeight>a+1&&!c&&e.panel.cellType===P.Cell&&h===1){var d=a/h;if(!e.row.resizedManually&&(e.row.height==null||e.row.height<d)&&(e.row.height=d),c){var f=n._isFullEdit(),p=n.grid;n._backupHeight=e.row.height,e.row.height=d,n._cacheRow=e.row,n._isCheckingHeight=!0,p.refresh(),p.startEditing(f),n._isCheckingHeight=!1,e.isImeInput?n._initImeEditInput(e.cell,e.templateContext):n._initEditInput(e.cell,e.templateContext,null);return}}else c&&(e.isImeInput?n._initImeEditInput(e.cell,e.templateContext):n._initEditInput(e.cell,e.templateContext,null))}}}},2))},t}(Qi),As={};/*!
    *
    * Wijmo Library 5.20251.40
    * https://developer.mescius.com/wijmo
    *
    * Copyright(c) MESCIUS inc. All rights reserved.
    *
    * Licensed under the End-User License Agreement For MESCIUS Wijmo Software.
    * us.sales@mescius.com
    * https://developer.mescius.com/wijmo/licensing
    *
    */var Os;function vh(){if(Os)return As;Os=1;var r;return function(t){var e;(e=globalThis.window==globalThis?globalThis.window:{}).wijmo||(e.wijmo=t);var n={AutoComplete:{ariaLabels:{autoCompleteInput:"AutoComplete 입력",autoComplete:"자동 완성"}},Calendar:{ariaLabels:{calendar:"일정",currMo:"현재 달",monthView:"월 보기",nxtMo:"다음 달",nxtYr:"내년",prvMo:"이전 달",prvYr:"이전 연도",today:"오늘",yearView:"년 보기",chooseDate:"날짜 선택",selectYear:"연도 선택",chooseMonth:"월 선택"},buttons:{ok:"확인",cancel:"취소"}},CollectionViewNavigator:{ariaLabels:{byItem:{btnFirst:"첫 번째 항목으로 이동합니다.",btnLast:"마지막 항목으로 이동",btnNext:"다음 항목으로 이동합니다.",btnPrev:"이전 항목으로 이동"},byPage:{btnFirst:"첫 번째 페이지로 이동합니다.",btnLast:"마지막 페이지로 이동",btnNext:"다음 페이지로 이동합니다.",btnPrev:"이전 페이지로 이동"}}},ComboBox:{ariaLabels:{comboBoxInput:"ComboBox 입력",comboBox:"콤보 박스"}},DropDown:{ariaLabels:{tgl:"토글 메뉴"}},FlexChartAnalytics:{BreakEven:{breakEven:"손익분기",fixedCost:"고정비용",lossArea:"손실영역",marginalProfit:"한계이윤",profitArea:"이익영역",safetyMargin:"안전마진",salesRevenue:"매출액",totalCost:"총비용",variableCost:"가변비용"}},FlexGrid:{ariaLabels:{toggleDropDown:"토글 메뉴",toggleGroup:"전환 그룹",pinning:"고정 가능",pined:"고정됨",sortIndex:"정렬 순서",pencil:"편집 중인 항목",collapse:"접힌 열 헤더",asterisk:"새 행 템플릿",rowHeader:"행 헤더",topleft:"왼쪽 상단",checked:"선택됨",unchecked:"선택되지 않음",editCell:"셀 편집",imeInput:"IME 입력",radioButtonChecked:"라디오 버튼 선택됨",newRowCell:"새 행 셀"},groupHeaderFormat:"{name}: <b>{value}</b> ({count:n0} 항목)",accessibilityHelperMessage:{insertRow:"{index}행 앞에 삽입",deleteRow:"{index}행 삭제",pin:{pinColumnName:"열 고정: {name}",unpinColumnName:"열 고정 해제: {name}",pinColumnIndex:"고정: {colIndex}",unpin:"고정 해제"},sort:{sortAscending:"{name} 열 오름차순 정렬",sortDescending:"{name} 열 내림차순 정렬",clearSort:"정렬 해제"},frozen:{frozenColumn:"고정 열: {col}, 행: {row}",unfrozenColumn:"고정 해제 열: {col}, 행: {row}"},imeHandler:{focusImeCell:"{value} {rowName} 행 {rowIndex}, {colName} 열 {colIndex}"}}},FlexGridDetailProvider:{ariaLabels:{toggleDetail:"전환 행 세부 사항"},accessibilityHelperMessage:{showDetail:"세부 행 표시: {rowIndex}",hideDetail:"세부 행 숨기기: {rowIndex}"}},FlexGridFilter:{and:"및",apply:"적용",ariaLabels:{active:"활동적인",and:"두 조건 필요",asc:"오름차순 정렬 열",dialog:"열에 대한 필터 편집기",dsc:"내림차순 정렬 열",edit:"열에 대한 필터를 편집",listBox:"필터링에 사용할 수 있는 옵션 목록",op1:"첫 번째 조건 연산자",op2:"두 번째 조건 연산자",or:"필요 조건 중 하나가",search:"검색 항목 목록",val1:"첫 번째 조건 값",val2:"두 번째 조건 값"},accessibilityHelperMessage:{filter:{filterColumn:"{name} 열 필터 대화상자 열기",closeFilterDialog:"필터 창 닫기"}},ascending:"↑ 오름차순",booleanOperators:[{name:"(설정 되지 않음)",op:null},{name:"다음과 같을 경우",op:0},{name:"다음과 같지 않을 경우",op:1}],cancel:"취소",clear:"지움",conditions:"조건에 따른 필터",dateOperators:[{name:"(설정 되지 않음)",op:null},{name:"다음과 같을 경우",op:0},{name:"다음의 값보다 앞에 있는 경우",op:4},{name:"다음의 값보다 뒤에 있는 경우",op:2}],descending:"↓ 내림차순",exceedsMaxValues:"모든 항목이 표시되는 것은 아닙니다",header:"값이 있는 항목 표시",includeSelection:"현재 선택 영역 포함",null:"(없음)",numberOperators:[{name:"(설정 되지 않음)",op:null},{name:"다음과 같을 경우",op:0},{name:"다음과 같지 않을 경우",op:1},{name:"다음의 값보다 큰 경우",op:2},{name:"다음의 값보다 크거나 같은 경우",op:3},{name:"다음의 값보다 작은 경우",op:4},{name:"다음의 값보다 작거나 같은 경우",op:5}],or:"또는",popupBody:"이 열에는 250개 이상의 고유 항목이 있습니다. 처음 250개의 고유 항목만 표시됩니다.",popupOkButton:"좋아요",search:"검색",selectAll:"모두 선택",stringOperators:[{name:"(설정 되지 않음)",op:null},{name:"다음과 같을 경우",op:0},{name:"다음과 같지 않을 경우",op:1},{name:"다음의 값으로 시작하는 경우",op:6},{name:"다음의 값으로 시작하지 않음",op:10},{name:"다음의 값으로 끝나는 경우",op:7},{name:"다음의 값으로 끝나지 않음",op:11},{name:"다음의 값을 포함하는 경우",op:8},{name:"다음의 값을 포함하지 않는 경우",op:9}],values:"값에 따른 필터"},FlexSheet:{convertTable:"표 변환",copyCells:"셀 복사",deleteCol:"열 삭제",deleteRow:"행 삭제",deleteSheet:"삭제",fillFormat:"서식만 채우기",fillSeries:"연속 데이터 채우기",fillWithoutFormat:"서식 없이 채우기",insertCol:"열 삽입",insertRow:"행 삽입",insertSheet:"삽입",renameSheet:"이름 바꾸기"},Globalize:{calendar:{"/":"-",":":":",am:["오전","오전"],days:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],daysAbbr:["일","월","화","수","목","금","토"],eras:["서기"],firstDay:0,months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],monthsAbbr:["1","2","3","4","5","6","7","8","9","10","11","12"],patterns:{D:'yyyy"년" M"월" d"일" dddd',F:'yyyy"년" M"월" d"일" dddd tt h:mm:ss',G:"yyyy-MM-dd tt h:mm:ss",M:'M"월" d"일"',T:"tt h:mm:ss",Y:'yyyy"년" M"월"',d:"yyyy-MM-dd",f:'yyyy"년" M"월" d"일" dddd tt h:mm',g:"yyyy-MM-dd tt h:mm",m:'M"월" d"일"',s:'yyyy"-"MM"-"dd"T"HH":"mm":"ss',t:"tt h:mm",y:'yyyy"년" M"월"'},pm:["오후","오후"]},displayName:"Korean",name:"ko",numberFormat:{"%":"%","+":"+",",":",","-":"-",".":".",currency:{decimals:0,pattern:["-$n","$n"],symbol:"₩"},percent:{pattern:["-n%","n%"]}}},GroupPanel:{dragDrop:"열을 여기에 끌어다 놓으면 그룹을 생성할 수 있습니다.",groupPanel:"그룹화된 열 패널",groupDescription:"{0}{1} 기준으로 그룹화됨",groupAction:"정렬 전환 또는 그룹 제거를 위해 활성화하세요.",sortedAsc:", 오름차순 정렬됨",sortedDesc:", 내림차순 정렬됨",sortedAscStatus:"{0} 오름차순",sortedDescStatus:"{0} 내림차순",remove:"그룹 제거"},InputDateTime:{ariaLabels:{tglDate:"토글 일정",tglTime:"전환 시간 목록",inputDateTimeInput:"InputDateTime 입력"}},InputNumber:{ariaLabels:{decVal:"값 감소",incVal:"값 증가",inputNumberInput:"InputNumber 입력",inputNumber:"숫자 입력"}},InputTime:{ariaLabels:{inputTimeInput:"InputTime 입력",inputTime:"시간 입력"}},Licensing:{cls:"닫기",ctc:'<p style="text-align:left"><b>해당 버전은 평가 버전으로, 정식 배포를 위해서는<br/> 배포 라이선스 구매가 필요합니다. <br/><br/> <a href="https://www.mescius.co.kr/wijmo#price" style="text-decoration:underline;">Wijmo 가격 및 라이선스</a><br/></b></p>',dmn:"응용 프로그램의 Wijmo 라이선스는 현재 도메인에 대해 유효하지 않습니다. 라이선스 도메인은 <b>{licDomain}</b>이며 현재 도메인은 <b>{domain}</b>입니다.",evl:"Wijmo 평가 버전 ({version})",exp:"응용 프로그램에서 Wijmo 라이선스가 만료 되었습니다. 라이선스 만료 날짜는  <b> {expDate:d}</b>입니다.",hdr:"Wijmo 라이선스",lic:"응용 프로그램에서 Wijmo 라이선스가 유효하지 않습니다. <br/>",mss:"응용 프로그램에서 Wijmo 라이선스가 설정되지 않았습니다.",prd:"응용 프로그램에서 Wijmo 라이선스가  <b> {control} </b>  컨트롤에 대해 유효하지 않습니다.",ver:"응용 프로그램에서 Wijmo 라이선스가 사용 중인 버전에 대해 유효하지 않습니다. 현재 라이선스 버전은 <b>{licVer}</b>이며 제품 버전은 <b>{version}</b>입니다."},Menu:{ariaLabels:{menuButton:"메뉴"}},MultiAutoComplete:{ariaLabels:{multiAutoCompleteInput:"MultiAutoComplete 입력"}},MultiSelect:{itemsSelected:"{count:n0} 항목 선택",selectAll:"모두 선택",ariaLabels:{multiSelectInput:"MultiSelect 입력",multiSelect:"다중 선택"}},MultiSelectListBox:{filterPlaceholder:"필터",selectAll:"모두 선택"},Viewer:{abstractMethodException:"추상 메서드입니다. 실행시켜 주시기 바랍니다.",allowCopyContent:"내용 복사 또는 추출 허용",allowEditAnnotations:"주석 편집 허용",allowEditContent:"콘텐츠 편집을 허용",allowPrint:"인쇄 허용",apply:"적용",backwardHistory:"뒤로",bmpExportName:"BMP 이미지",bottom:"아래쪽:",cancel:"취소",cannotRenderPageNoDoc:"문서 소스와 뷰 페이지 없이 페이지를 렌더링 할 수 없습니다.",cannotRenderPageNoViewPage:"문서 소스와 뷰 페이지 없이 페이지를 렌더링 할 수 없습니다.",cannotSearch:"검색을 위해서는 문서 소스를 지정 해야 합니다.",checkMark:"✓",continuousMode:"연속 페이지 보기",csvExportName:"CSV",docExportName:"Microsoft Word",docInfoAuthor:"작성자",docInfoComment:"보고사항",docInfoCompany:"회사",docInfoCreationTime:"생성 시간",docInfoCreator:"만든 이",docInfoKeywords:"키워드",docInfoManager:"관리자",docInfoOperator:"연산자",docInfoProducer:"제작자",docInfoRevisionTime:"수정 시간",docInfoSubject:"주제",docInfoTitle:"제목",documentInfoGroup:"문서 정보",documentRestrictionsGroup:"문서 제한",docxExportName:"Open XML 워드",embedFonts:"TrueType 글꼴 포함",emfExportName:"향상 된 메타 파일",encryptionType:"암호화 수준:",errorOccured:"오류가 발생했습니다.",exitFullScreen:"전체 화면 끝내기",exportFormat:"내보내기 형식:",exportOk:"수출…",exportOptionTitle:"내보내기 옵션",exports:"내보내기",firstPage:"첫 페이지",forwardHistory:"앞으로",fullScreen:"전체 화면",generalGroup:"일반",gifExportName:"GIF 이미지",hamburgerMenu:"도구",htmlExportName:"HTML 문서",invalidParameterError:"잘못된 입력입니다.",jpegExportName:"JPEG 이미지",jpgExportName:"JPEG 이미지",landscape:"가로",lastPage:"마지막 페이지",left:"왼쪽:",loading:"로드 중입니다…",magnifierTool:"돋보기",margins:"여백(인치)",matchCase:"대/소문자 구분",matchCaseMenuItem:"대/소문자 구분",metafileExportName:"압축된 메타 파일",metafileType:"Metafile 형식:",mhtmlExportName:"웹 보관 파일 (MHTML)",monochrome:"흑백",moveTool:"이동 도구",navigatorPosition:"탐색기 위치",nextPage:"다음 페이지",nullParameterError:"값이 null일 수 없습니다.",ok:"확인",orientation:"방향:",outlines:"문서 구조",outputRange:"페이지 범위:",outputRangeGroup:"출력 범위",outputRangeInverted:"반전",ownerPassword:"권한(소유자) 암호:",pageCount:"페이지 수",pageNumber:"페이지 번호",pageSetup:"페이지 설정",pageWidth:"페이지 너비 맞추기",paged:"페이징",paginated:"인쇄 레이아웃",paperKind:"종이 종류:",parameterAllItemsSelected:"(모두)",parameterNoneItemsSelected:"(없음)",parameterSelectAllItemText:"(모두 선택)",parameters:"매개 변수",passwordSecurityGroup:"암호 보안",pdfACompatible:"PDF/A 호환 (레벨 2B)",pdfExportName:"Adobe PDF",pictureLayer:"별도 이미지 레이어를 사용",pngExportName:"PNG 이미지",portrait:"세로",previousPage:"이전 페이지",print:"인쇄",requiringParameters:"매개 변수를 입력하십시오.",resolution:"해상도:",right:"오른쪽:",rotateDocument:"문서 회전",rotatePage:"페이지 회전",rtfExportName:"RTF 문서",rubberbandTool:"선택 영역 확대",search:"검색",searchNext:"다음 검색",searchOptions:"검색 옵션",searchPrev:"이전 검색",searchResults:"검색 결과",selectParameterValue:"(값을 선택)",selectTool:"도구 선택",showNavigator:"탐색기 표시",showSearchBar:"검색 창 표시",showZoomBar:"확대/축소 막대",singleFile:"단일 파일",singleMode:"단일 페이지 보기",thumbnails:"페이지 축소판",tiffExportName:"Tiff 이미지",tolerance:"텍스트 범위(포인트)를 감지하는 경우 허용 오차:",top:"위쪽:",useCompression:"압축 사용",useOutlines:"아웃라인 생성",userPassword:"문서 열기(사용자) 비밀 번호:",viewMenu:"레이아웃 옵션",wholePage:"전체 페이지 맞추기",wholeWord:"전체 단어 일치",wholeWordMenuItem:"단어 단위로",xlsExportName:"Microsoft Excel",xlsxExportName:"Open XML Excel",zoomFactor:"확대/축소 비율",zoomIn:"확대",zoomOut:"축소"},Popup:{ariaLabels:{close:"닫기",backdrop:"배경",isDraggable:"드래그 가능",isResizable:"크기 조절 가능",popupVisible:"표시됨",popupHide:"숨김",popup:"팝업"}},Listbox:{ariaLabels:{listBox:"목록 상자"}},olap:{DetailDialog:{col:"세로 막대형",header:"세부 정보 보기:",item:"{cnt} 항목",items:"{cnt:n0} 항목",ok:"확인",row:"Row"},PivotChart:{and:"and",by:"기준"},PivotEngine:{grandTotal:"총합계",subTotal:"부분합"},PivotFieldEditor:{aggs:{avg:"평균",cnt:"개수",first:"첫 번째",last:"마지막",max:"MAX",min:"MIN",rng:"범위",std:"표본_표준_편차",stdp:"StdDevPop",sum:"합계",var:"VAR",varp:"VarPop"},calcs:{dCol:"이전 열에서 차이",dColPct:"이전 열에서 차이 %",dPctCol:"열 합계의 %",dPctGrand:"총계의 %",dPctRow:"행 합계의 %",dPrevCol:"이전 열에 있는 값의 %",dPrevRow:"이전 행에서 값의 %",dRow:"이전 행에서 차이",dRowPct:"이전 행에서 차이 %",dRunTot:"누적 합계",dRunTotPct:"누적 합계 %",noCalc:"계산 없음"},cancel:"취소",clear:"지우기",dialogHeader:"필드 설정:",edit:"편집…",filter:"필터:",format:"형식:",formats:{FYEEEEQU:'회계 연도 분기 ("년도" EEEE "Q" U)',MMMMddyyyy:"월 일 년 (MMMM dd, yyyy)",MMMMyyyy:"달 년 (MMMM yyyy)",MMMyyyy:"달 년 (MMM yyyy)",c:"통화 (c)",d:"날짜 (d)",dMyy:"일 월 년 (d/M/yy)",dMyyyy:"일 월 년 (M/dd/yyyy)",ddMyy:"일 월 년 (dd/M/yy)",n0:"정수 (n0)",n2:"진수 (n2)",n2c:"수천 (n2,)",n2cc:"수백만 (n2,,)",n2ccc:"수십억 (n2,,,)",p0:"비율 (p0)",p2:"비율 (p2)",yyyy:"연도 (yyyy)",yyyyQq:'연도 분기 (yyyy "Q" q)'},header:"헤더:",none:"(없음)",ok:"확인",sample:"미리 보기:",showAs:"표시:",sort:"정렬:",sorts:{asc:"오름차순",desc:"내림차순"},summary:"요약:",weighBy:"무게 기준:"},PivotPanel:{cols:"열",defer:"업데이트 지연",drag:"아래 영역 사이에 필드를 끌어 놓으십시오:",fields:"보고서에 추가할 필드 선택:",filters:"필터",rows:"행",update:"업데이트",vals:"값"},Slicer:{clearFilter:"필터 지우기",multiSelect:"다중 선택"},_ListContextMenu:{cols:"열 레이블로 이동",detail:"자세히 보기…",down:"아래로 이동",edit:"필드 설정…",filter:"보고서 필터로 이동",first:"처음으로 이동",last:"끝으로 이동",remove:"필드 제거",rows:"행 레이블로 이동",up:"위로 이동",vals:"값으로 이동"}},InputDate:{ariaLabels:{inputDateInput:"InputDate 입력",button:"날짜 선택",dialog:"캘린더",inputDate:"날짜 입력"}},InputDateRange:{ariaLabels:{inputDateRangeInput:"InputDateRange 입력"}},FlexGridSearch:{ariaLabels:{flexGridSearchInput:"그리드 검색",button:"검색 텍스트 지우기"}},Selector:{ariaLabels:{selectRow:"행 선택",selectAllRows:"모든 행 선택",selectGroupRows:"그룹 행 선택",deselectRow:"행 선택 해제",deselectAllRows:"모든 행 선택 해제",deselectGroupRows:"그룹 행 선택 해제"}},BooleanChecker:{ariaLabels:{checkAll:"모두 선택",uncheckAll:"모두 선택 해제"}},InputMask:{ariaLabels:{inputMask:"입력 마스크"}},InputColor:{ariaLabels:{inputColor:"색상 선택기"}}},i=e.wijmo._updateCulture;i?i(n):(e.wijmo.culture=n,e.wijmo._loadedCultures||(e.wijmo._loadedCultures={}),e.wijmo._loadedCultures[n.Globalize.name]=n)}(r||(r={})),As}vh();const bh=[{binding:"SEQ",header:"순번",width:70,isReadOnly:!0},{binding:"TRM_NM",header:"용어명"},{binding:"TRM_EN_NM",header:"영문명"},{binding:"AWD_NM",header:"영문약어명"},{binding:"TRM_DSCR",header:"단어설명"},{binding:"DMN",header:"도메인명"},{binding:"VL",header:"허용값"},{binding:"DEPT_NM",header:"관리부서명"},{binding:"CD_NM",header:"표준코드명"},{binding:"DUT_DV",header:"업무분야"},{binding:"SAV",header:"저장형식"},{binding:"DIS",header:"표현형식"},{binding:"LST",header:"용어 이음동의어 목록"},{binding:"SYS",header:"시스템명"},{binding:"AS_TAB",header:"AS-IS 테이블"},{binding:"AS_AWD_NM",header:"AS-IS 표준용어"},{binding:"AS_TRM_NM",header:"AS_IS 표준용어"},{binding:"USE_YN",header:"사용여부"}];function yh(){const{rows:r,setId:t,onReload:e,onStoreListDataSave:n}=ks(),[i,o]=ve.useState("&nbsp;"),s=ve.useRef(),l=en.useRef(),a=Ia(_=>{console.log("StdTab.gridInitial=",_);const v=b=>{if(s.current===void 0)s.current=[b];else{let m=!0;s.current=s.current.map(w=>w.id===b.id?(m=!1,b):w),m&&s.current.push(b)}console.log("StdTab.changedEvent.saveData.current=",s.current)};_.beginningEdit.addHandler((b,m)=>{let w="&nbsp;";b.columns[m.col].binding!="overdue"&&b.rows[m.row].dataItem.overdue&&(m.cancel=!0,w="Overdue items cannot be edited"),o(w)}),_.cellEditEnding.addHandler((b,m)=>{let w=b.columns[m.col];console.log("StdTab.cellEditEnding.col=",w,", e.col=",m.col,", col.binding=",w.binding),console.log("StdTab.cellEditEnding.e.getRow().dataItem=",m.getRow().dataItem),m.panel==b.cells&&(console.log("EditHighlighter.formatItem: ",m.cell),v(m.getRow().dataItem),ee(m.cell,"cell-changed",!0))})});en.useEffect(()=>{t("trm")},[]);const u={sys:"PSEM",owner:"PSEM",tab:"TIOMRSVAPP_INFO",tab_nm:"시설물예약시스템배치연계테이블_예약자 정보(예약정보)",col:"PENAL_SEQ",col_nm:"패널티일련번호",data_type:"VARCHAR",data_length:20,pk:"N",null_yn:"N",default_value:"",to_col:"PENAL_SEQ",to_col_nm:"패널티일련번호",mode:"I"},h=_=>{_.preventDefault(),is("tab",u)},c=_=>{_.preventDefault(),console.log("onInsert.rows=",r),r.addNew({id:r.items.length+1,mode:"I"})},d=()=>{if(s.current===void 0){o("저장할 데이터가 없습니다.");return}n(s.current),e(),s.current=void 0},f=()=>{console.log("tbTab.length=",yn.length);for(let _=0;_<yn.length;_++)console.log("tbTab[",_,"]=",yn[_]),is("tab",yn[_])},p=_=>{_.selection&&_.selection.row>=0};return U.jsxs("div",{className:"container-fluid",children:[U.jsx(An,{title:"wijmo Grid : 용어정보 : "+Pn(r.items.length),titleTypographyProps:{variant:"h6"}}),U.jsx("div",{children:U.jsx(ph,{ref:l,itemsSource:r,initialized:a,selectionChanged:p,allowAddNew:!0,allowDelete:!0,children:bh.map((_,v)=>U.jsx(_h,{header:_.header,binding:_.binding,width:_.width||100,isReadOnly:_.isReadOnly||!1},v))})}),U.jsx(Mn,{onNew:h,onInsert:c,onSave:d}),U.jsx(ra,{type:"button",size:"small",variant:"outlined",onClick:f,children:"TAB"}),U.jsx("div",{className:"edit-msg",dangerouslySetInnerHTML:{__html:i}})]})}cr();const wh=r=>{const t=ve.useRef(null),e=ve.useRef(null),{setCollection:n,rowData:i,rowCount:o,setRowCount:s,onReload:l,onStoreDataSave:a}=ks(),h=oa().palette.mode==="dark"?"ht-theme-main-dark-auto":"ht-theme-main",c=async E=>await a(E),d=async()=>{n(r.collection)};ve.useEffect(()=>{d()},[]);const f=async()=>{l(),b()},p=async()=>{t.current.hotInstance.getPlugin("exportFile").downloadFile("csv",{filename:r.csvFileName,mimeType:"text/csv",bom:!1,columnDelimiter:",",rowDelimiter:`\r
`})},_=(E,T)=>{console.log("afterSelectRows.row=",E,", selectionLayerLevel=",T)},v=r.columns.map((E,T)=>({value:T,text:E.title})),b=()=>{try{const E=t.current?.hotInstance,T=E?.getPlugin("filters");if(T){const L=y("columns1");console.log("columnValue=",L,"text=",y("filterField1")),r.columns.forEach((Q,Y)=>{T?.removeConditions(Y)}),T?.addCondition(Number(L),"contains",[y("filterField1")]),T?.filter(),E?.render(),console.log("filtersPlugin=",T),console.log("hotRef=",t.current);const X=E.getData().length;s(X)}}catch(E){console.error("Error:",E.message)}},{register:m,control:w,setValue:g,getValues:y,formState:{errors:I}}=dr({mode:"onChange"});m("filterField1",{required:!0});const x=()=>{console.log("afterChangesObserved !!")},R=async(E,T)=>{if(console.log("afterChange.change=",E,", source=",T),console.log("afterChange.change.length=",E?.length),E!==null){const L=t.current?.hotInstance;if(L?.getPlugin("filters")){const X=L.getData(),Q=[];E.forEach((Y,se)=>{const ue={};console.log("afterChange.index1=",se,", item1=",Y[0]),r.columns.forEach((de,Te)=>{console.log("afterChange.filteredData=",X[Y[0]],de),ue[de.data]=X[Y[0]][Te]}),console.log("afterChange.tmp=",ue),Q.push(ue)}),console.log("afterChange.saveData=",Q),Q.forEach(async(Y,se)=>{console.log("afterChange.item=",Y);const ue=await c(Y);console.log("afterChange.result=",se,", result=",ue),i.map(de=>{console.log("afterChange.rowData1=",de),(de.id===void 0||de.id===null)&&(de.id=ue?.id,console.log("afterChange.rowData2=",de))})}),L.render()}}},k=()=>{const E=t.current.hotInstance;console.log("onInsert:",E),E.alter("insert_row_above",0,1)},D=async()=>{const E=t.current.hotInstance;if(console.log("onDelete:",E),E&&e.current!==null){if(E?.getPlugin("filters")){const L=E.getData();console.log("onDelete.filteredData=",L[e.current]);const O={id:L[e.current][0]};console.log("onDelete.data=",O),await ca(r.collection,O)}E.alter("remove_row",e.current,1)}};return U.jsxs(Tn,{style:{maxWidth:"100%",width:"100%",paddingLeft:"0px",paddingRight:"0px"},sx:{mt:0},children:[U.jsxs(ur,{sx:{maxWidth:"100%",paddingLeft:"0px",paddingRight:"0px",width:"100%",display:"grid",gridTemplateColumns:"200px 200px 300px ",flexDirection:"col",alignItems:"baseline",alignContent:"left",justifyContent:"left",textAlign:"center",whiteSpace:"nowrap"},children:[U.jsx(An,{title:r.title+" : "+Pn(o)}),U.jsx(ga,{id:"columns1",name:"columns1",label:"조회 컬럼",control:w,defaultValue:r.selectDefault?r.selectDefault:"1",variant:"standard",margin:"normal",selectList:v,error:!!I.columns1,onChange:E=>{E.preventDefault();const T=E.target.value;console.log("columns1=",y("columns1")),g("columns1",T),T!=""&&b()}}),U.jsx(fr,{...m("filterField1"),fullWidth:!0,placeholder:"조회",variant:"standard",style:{paddingLeft:"10px"},onKeyUp:b})]}),U.jsx(hr,{ref:t,data:i,themeName:h,rowHeaders:!0,colHeaders:!0,autoWrapRow:!0,height:"560px",width:"auto",contextMenu:!0,observeChanges:!0,columnSorting:!0,afterChange:R,afterChangesObserved:x,afterSelectRows:_,afterSelection:(E,T,L,O)=>{console.log("afterSelection.row=",E,", column=",T,", row2=",L,", column2=",O),e.current=E},licenseKey:"non-commercial-and-evaluation",columns:r.columns,cells:(E,T)=>r.columns[T].readOnly===!0?{readOnly:!0}:{},colWidths:r.colWidths,manualColumnResize:!0,filters:!0}),U.jsx(Mn,{onInsert:k,onDelete:D,onReload:f,onCsvSave:p})]})},Ch=()=>{const r=[{title:"ID",type:"text",data:"id",readOnly:!0},{title:"구분",type:"text",data:"dv",readOnly:!1},{title:"기능",type:"text",data:"cmd"},{title:"설명",type:"text",data:"desc"}],t=[50,200,400,600];return U.jsx(wh,{csvFileName:"exported_cmd",postUrl:"/wd/post.do",listUrl:"/wd/list.do",deleteUrl:"/wd/delete.do",title:"기능 정보",columns:r,colWidths:t,selectDefault:"2",collection:"cmd"})},Mh=()=>{const[r,t]=ve.useState(0);ve.useEffect(()=>{sa({title:"표준",description:"표준"})},[]),ve.useEffect(()=>{const n=Lr.findIndex(i=>`#${i.id}`===window.location.hash);t(n!==-1?n:r)},[r]);const e=(n,i)=>{window.location.hash=`#${Lr[i].id}`,t(i)};return U.jsxs(U.Fragment,{children:[U.jsxs(Tn,{style:{maxWidth:"100%",width:"100%"},sx:{mt:3},children:[U.jsx(ma,{tabValue:r,onChange:e,tabs:Lr}),U.jsx(ve.Suspense,{fallback:U.jsx(la,{}),children:U.jsxs(U.Fragment,{children:[U.jsx(gn,{value:r,index:0,style:{maxWidth:"100%",width:"100%",paddingLeft:"0px",paddingRight:"0px"},children:U.jsx(Ch,{})}),U.jsx(gn,{value:r,index:1,style:{maxWidth:"100%",width:"100%",paddingLeft:"0px",paddingRight:"0px"},children:U.jsx(xa,{})}),U.jsx(gn,{value:r,index:2,style:{maxWidth:"100%",width:"100%",paddingLeft:"0px",paddingRight:"0px"},children:U.jsx(wa,{})}),U.jsx(gn,{value:r,index:3,style:{maxWidth:"100%",width:"100%",paddingLeft:"0px",paddingRight:"0px"},children:U.jsx(Ca,{})}),U.jsx(gn,{value:r,index:4,children:U.jsx(yh,{})})]})})]}),U.jsx(aa,{})]})};export{Mh as default};
