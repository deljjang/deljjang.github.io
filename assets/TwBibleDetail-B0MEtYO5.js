import{j as e,x as p,w as $,y as O,p as S,h as M,r as m,n as X,f as H,q as U,o as G,v as K,_ as z}from"./index-DiQdSQsX.js";import{A as F}from"./AniButton-B56Wg4iI.js";import{u as Q,B as W}from"./BibleBookmarkText-BqBiCzp3.js";/* empty css                   */import{T as Z}from"./TwTitleItem-XqMrJkNL.js";import"./Button-KIxHO5L2.js";import"./Grid-DswUsWcV.js";const ee=({dataText:a,searchWord:x,bookmark:h,...c})=>{if(a==null)return;const g=c.bibleId.split("_");return c.bibleId&&g.length<2?e.jsx(e.Fragment,{}):e.jsxs(e.Fragment,{children:[e.jsx("h6",{className:`flex flex-col items-center mb-8 ${p.textXl}`,children:c.nm}),a.map((l,i)=>{let d="text.primary";c.cd4+""===l.cd4&&(d="warning.main");const b=h?.filter(j=>j.id===l.id&&j.bookmark==="Y");return b&&b.length>0&&(l.bookmark="Y"),e.jsxs("div",{className:"grid grid-cols-5 sm:grid-cols-6 md:grid-cols-10 lg:grid-cols-12 gap-4",id:`id_${i+1}`,children:[e.jsx("div",{className:"col-span-1",children:e.jsxs("div",{className:`flex items-center ${d}`,children:[e.jsx($,{className:"items-center text-top cursor-pointer",onClick:()=>c.onBookmark(l),children:l.nm}),b&&b.length>0&&e.jsx(O,{className:"text-red-500 w-4 h-4"})]})}),e.jsxs("div",{className:`col-span-4 sm:col-span-5 md:col-span-9 lg:col-span-11 ${d}`,children:[e.jsx(S,{text:l.ko}),e.jsx("div",{className:"text-sm text-red-600 dark:text-gray-700",children:e.jsx(S,{text:l.en})})]})]},i)})]})},se=({data:a,bibleId:x,isBottom:h=!1})=>{const c=new Array,{t:g}=M();if(a==null)return;const l=x.split("_");for(let i=1;i<=a.cd3;i++){const d={nm:`${a.nm2}${i}장`,key:a.id+"_"+i};c.push(d)}return l&&l.length===3&&!h?e.jsxs("h6",{className:`flex flex-col items-center ${p.textXl}`,children:[l[2],"장"]}):e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-10 lg:grid-cols-12 gap-4",children:c.map((i,d)=>e.jsx("div",{className:"col-span-1",children:e.jsx($,{to:`/bible/${i.key}`,children:i.nm})},d))})},de=()=>{const a=()=>e.jsxs("div",{className:`${p.card}`,children:[e.jsx("div",{className:"w-full items-center justify-center flex flex-col py-4",children:e.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-800 rounded w-1/2 animate-shimmer relative overflow-hidden"})}),e.jsx("div",{className:"p-4 border-t border-b border-gray-200 dark:border-zinc-700",children:e.jsx("div",{className:"grid grid-cols-10 gap-2",children:[...Array(20)].map((t,s)=>e.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-800 rounded animate-shimmer relative overflow-hidden"},s))})}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-zinc-700 rounded w-full animate-shimmer relative overflow-hidden"}),e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-zinc-700 rounded w-5/6 animate-shimmer relative overflow-hidden"})]})]}),[x,h]=m.useState(null),[c,g]=m.useState(null),[l,i]=m.useState(!0),{query:d,setBibleBookmark:b}=Q(),j=d.data,{t:y,i18n:P}=M(),r=m.useRef(),{bibleId:o}=X(),T=H(),[B,I]=m.useState(!1),[E,A]=m.useState(!1),{user:R}=U(),_=T?.state?.word,k=T?.state?.cd4,V=G();m.useEffect(()=>{if(o!==void 0){(async()=>{const u=await q(o,_);h(u),i(!1)})(),I(!1),A(!0);const s=o.split("_");if(r.current&&s.length>=2){const u=r.current.cd3;I(Number(s[2])!==1),A(s[2]<u)}}},[o,_]),m.useEffect(()=>{k!==void 0&&setTimeout(()=>{J("","id_"+k)},1500)},[x,k]);const J=(t,s)=>{const u=document.getElementById(s);u&&u.scrollIntoView({block:"center",behavior:"smooth"})},Y=t=>{R!==void 0&&(b(t),t.bookmark=t.bookmark===void 0||t.bookmark==="N"?"Y":"N",g(t.id),setTimeout(()=>g(null),500))},q=async(t,s)=>{if(t===""||t===void 0)return"";P.language.split("-")[0];const D=(await z(()=>import("./bibleJson-mLacnG04.js"),[])).default,f=t.split("_"),L=(await z(()=>import("./bible-7rshX_PU.js"),[])).default;if(f.length<1)return;f.length>1&&D.map(v=>{v.id===f[0]+"_"+f[1]&&(r.current=v)});const w=new Array;if(f.length>1){const v=new RegExp(s,"gi");for(let N in L){let n=L[N];n.id.startsWith(`${t}_`)&&(s!==void 0&&s!==""&&s!==null&&(n.ko=n.ko.replace(v,`<span class='lightext'>${s}</span>`),n.en=n.en.replace(v,`<span class='lightext'>${s}</span>`)),n.nm=f.length===2?`${r.current.nm2}${n.cd3}:${n.cd4}`:`${r.current.nm2}${n.cd3}:${n.cd4}`,w.push(n))}return w.sort((N,n)=>N.cd3-n.cd3||N.cd4-n.cd4),w}};if(o==="")return e.jsx(e.Fragment,{});const C=t=>{let s=o.split("_");s[2]=Number(s[2])+t,V(`/bible/${s[0]}_${s[1]}_${s[2]}`)};return x===null?e.jsx(a,{}):e.jsxs("div",{className:`${p.card}`,children:[e.jsx("div",{id:"back-to-top-anchor"}),e.jsx(W,{}),e.jsx("div",{className:"w-full items-center justify-center flex flex-col",children:e.jsx($,{to:"/bible/"+r.current.id,children:e.jsx(Z,{children:r.current!==null&&r.current!==void 0&&r.current.nm!==null?`${r.current.text} ${r.current.text_en}`:""})})}),e.jsx(se,{data:r.current,bibleId:o}),e.jsx(ee,{dataText:x,data:r.current,searchWord:_,bibleId:o,cd4:k,bookmark:j,clickedVerseId:c,onBookmark:Y}),e.jsxs("div",{className:"p-0",children:[l&&e.jsx("div",{className:"flex flex-col items-center",children:e.jsx(K,{className:"mt-10"})}),o&&o.split("_").length===3?e.jsx("div",{className:`${p.between} mt-10`,children:e.jsxs("div",{className:"grid grid-cols-12 gap-2 w-full",children:[B?e.jsx("div",{className:E?"col-span-6":"col-span-12",children:e.jsx(F,{type:"button",variant:"outlined",onClick:()=>C(-1),fullWidth:!0,children:`< ${y("prev")}`})}):null,E?e.jsx("div",{className:B?"col-span-6":"col-span-12",children:e.jsx(F,{type:"button",variant:"outlined",onClick:()=>C(1),fullWidth:!0,children:`${y("next")} >`})}):""]})}):null]})]})};export{de as TwBibleDetail,de as default};
