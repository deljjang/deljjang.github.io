import{y as m,p as b,i as x,z as B,A as y,E as f,G as j,j as s,v as p,D as g}from"./index-B5STorGf.js";import{H as d}from"./HtmlText-q_YnhARZ.js";import{G as c}from"./Grid-2Lg6fSOp.js";const h=()=>{const l=m(),{user:e}=b(),r=x({queryKey:["bibleBookmarks",e?.uid],queryFn:()=>n(),enabled:!!e?.uid});async function n(){if(!e?.uid)return null;const t=B(y,`bible_mark/${e.uid}`),o=await f(t);if(o.exists()){const a=o.val();return a?Object.values(a).filter(k=>k.bookmark==="Y"):[]}else return[]}return{query:r,setBibleBookmark:t=>{if(e==null){console.error("사용자 정보가 없어 북마크를 설정할 수 없습니다.");return}console.log("setBibleBookmark.item=",t);let o="N";(t.bookmark===void 0||t.bookmark==="N")&&(o="Y");const a={...t,bookmark:o},u=`bible_mark/${e.uid}/${t.id}`;console.log("setBibleBookmark.locate=",u),j(u,o==="N"?null:a),console.log("setBibleBookmark.updatedItem=",o,a),l.invalidateQueries({queryKey:["bibleBookmarks",e.uid]})}}},_=()=>{const{query:l}=h(),e=l.data;return e?s.jsxs(s.Fragment,{children:[e.map((r,n)=>{const i=r.id.split("_"),t=`${i[0]}_${i[1]}_${i[2]}`;return s.jsxs(c,{container:!0,spacing:2,columns:{xs:5,sm:7,md:10,lg:12},id:`id_${n+1}`,children:[s.jsx(c,{item:!0,xs:1,md:1,children:s.jsx(p,{to:`/bible/${t}`,state:{cd4:r.cd4},children:r.nm})}),s.jsxs(c,{item:!0,xs:4,sm:6,md:9,lg:11,children:[s.jsx(d,{show:!0,text:r.ko}),s.jsx("div",{className:"text-sm text-red-600 dark:text-gray-700",children:s.jsx(d,{show:!0,text:r.en})})]})]},n)}),s.jsx(g,{})]}):null};export{_ as B,h as u};
