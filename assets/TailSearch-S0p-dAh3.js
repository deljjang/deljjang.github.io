import{Q as W,cV as k,j as e,cW as v,U as S,cT as f,cX as p,cY as C,r as t,u as D,bF as w,K as N,v as M,d as R,cZ as E,W as F,X as I,L as j,Y as _,Z as q}from"./index-Bz0IPAFl.js";import B from"./TailDetail-CbiPO0gs.js";import"./ComponentCard-CZT-Xg1g.js";const K=({uid:o,state:s})=>{const a=W({queryKey:["blogMainSearch",s&&s?.s?s.s:""],queryFn:()=>k(s?.s,o===S?S:"")});return e.jsx(v,{query:a,index:"1",s:s&&s?.s?s.s:"",sx:{mt:2}})},P=({uid:o,state:s})=>{console.log("TailSearchList.state:",s,", uid=",o);const[a,l]=f(p),[c,n]=f(C);return t.useEffect(()=>{console.log("TailSearchList.lastSearch:",c),c!==s.s&&(console.log("TailSearchList.searchWords:",a),console.log("TailSearchList.searchWords.s:",a[s.s]),l(d=>({...d,[s.s]:a[s.s]===void 0?1:a[s.s]+1})),console.log("TailSearchList.searchWords.s2:",a[s.s]),console.log("TailSearchList.searchWords=",a),n(s.s))},[s]),e.jsx(Q,{title:"Search",className:"mt-6",children:e.jsx("div",{className:"mt-5"})})},Q=({title:o,children:s,className:a=""})=>{const l=D(),c=w(p),n=[];console.log("SearchCard.searchWords=",c);for(const r in c)console.log("SearchCard.key=",r),n.push(r);const d=r=>{console.log("SearchCard.onClick=",r),l("/tail/search",{state:{s:r}})};return e.jsxs("div",{className:`rounded-2xl border border-gray-200 
      bg-white dark:border-gray-800 dark:bg-white/[0.03] 
      overflow-hidden w-full ${a}
      mb-5
      `,children:[e.jsx("div",{className:"flex flex-col px-4 py-2",children:e.jsx("h3",{className:"text-base font-medium text-gray-800 dark:text-white/90",children:o})}),e.jsxs("div",{className:"flex p-2 sm:p-4 border-t bg-stone-100 dark:bg-stone-950 border-gray-100 dark:border-gray-800 ",children:[n.map((r,h)=>(console.log("SearchCard.value=",r,h),e.jsx("div",{children:e.jsx(N,{className:"cursor-pointer",variant:"light",color:"dark",onClick:()=>d(r),children:r})},h))),e.jsx("div",{children:s})]})]})};function Z(){const o=M(),s=o.state,{user:a}=R(),l=t.useRef(s.s),[c,n]=t.useState(),[d]=E(),r=d.get("g"),[h,b]=t.useState(),[y,m]=t.useState(!0),x=r==="h"?"home":"memo";return t.useEffect(()=>{const T=async g=>{if(g!==""){const L=await q(x,a?.uid,g,l.current);b(L),m(!1)}};m(!0);const u=o.pathname.split("/"),i=u.length>2?u[u.length-1]:"";console.log("useEffect.tmp=",i),n(i),i!=null&&i!=="search"&&T(i)},[o.pathname]),console.log("TailSearch.memoId=",c,", state:",s,", user=",a?.uid),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",alignContent:"center",justifyContent:"center"},children:[e.jsxs(t.Suspense,{fallback:e.jsx(j,{}),children:[e.jsx(F,{children:e.jsx(I,{path:"/:memoId",element:e.jsx(B,{rootDb:x,isLoading:y,memoDetailData:h})})}),c==="search"?e.jsx(P,{uid:a?.uid,state:s}):"",a===null?e.jsx(j,{}):c==="search"&&s.s!==""&&e.jsx(e.Fragment,{children:e.jsx(K,{index:"1",uid:a?.uid,state:s})})]}),e.jsx(_,{})]})}export{Z as default};
