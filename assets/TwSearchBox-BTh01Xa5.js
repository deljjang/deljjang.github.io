import{E as w,bl as x,bq as v,br as k,bs as L,bt as C,b as u,j as t,K as D}from"./index-CGsNcmpW.js";import{T as E}from"./TwBadge-BBhnisY_.js";const z=({state:o,gubun:n="tw"})=>{const{t:h}=w(),[l,g]=x(n==="tw"?v:k),[d,m]=x(n==="tw"?L:C);return u.useEffect(()=>{o?.s&&d!==o.s&&(g(i=>({...i,[o.s]:(i[o.s]||0)+1})),m(o.s))},[o]),t.jsx(R,{title:h("search_list"),className:"mt-1",gubun:n})},R=({title:o,children:n,className:h="",gubun:l="tw"})=>{const g=D(),{t:d}=w(),[m,i]=x(l==="tw"?v:k),[p,c]=u.useState(null),a=u.useRef(),b=u.useRef(!1),j=Object.keys(m),y=e=>{f(e)},S=e=>{c(p===e?null:e)},N=(e,s)=>{e.button===0&&(e.preventDefault(),e.stopPropagation(),a.current=setTimeout(()=>{S(s),a.current=null,b.current=!0},500))},M=e=>{a.current&&(clearTimeout(a.current),a.current=null,y(e))},T=()=>{a.current&&(clearTimeout(a.current),a.current=null)},P=(e,s)=>{e.preventDefault(),e.stopPropagation(),c(p===s?null:s)},f=e=>{const s=l==="tw"?"/tw/search":`/${l}/search`;g(s,{state:{s:e}}),c(null)},W=e=>{i(s=>{const r={...s};return delete r[e],r}),c(null)};return t.jsxs("div",{className:`rounded-sm border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03] overflow-visible w-full ${h} mb-3`,onClick:e=>{if(e.stopPropagation(),e.preventDefault(),b.current){b.current=!1;return}c(null)},children:[t.jsx("div",{className:"flex flex-col px-4 py-2",children:t.jsx("h3",{className:"text-base font-medium text-gray-800 dark:text-white/90",children:o})}),t.jsxs("div",{className:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-9 gap-2 p-2 sm:p-4 border-t bg-stone-100 dark:bg-stone-950 border-gray-100 dark:border-gray-800 overflow-visible",children:[j.map((e,s)=>t.jsxs("div",{className:"relative",children:[t.jsx(E,{className:"cursor-pointer",variant:"light",size:"md",color:"brand",onMouseDown:r=>N(r,e),onMouseUp:()=>M(e),onMouseLeave:T,onContextMenu:r=>P(r,e),children:e}),p===e&&t.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-black border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-50 min-w-20",children:[t.jsx("button",{className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 rounded-t-lg",onClick:r=>{r.preventDefault(),r.stopPropagation(),f(e)},children:d("search")}),t.jsx("button",{className:"w-full px-3 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-b-lg",onClick:r=>{r.stopPropagation(),W(e)},children:d("delete")})]})]},s)),t.jsx("div",{children:n})]})]})};export{z as T};
