import{j as s,v as g,aK as j,aP as b,aQ as T,r as a,u as w,I as D,k as L,c as N,aR as R,R as M,y as W}from"./index-BH1tI84G.js";import{T as C}from"./Footer-BzCdt4xI.js";import{L as l}from"./Loading-gw_dSdSE.js";import{u as E}from"./useQuery-CM2TEFBK.js";import{b as I,T as _}from"./TailList-jSK2MKuh.js";import q from"./TwDetail-DWLNDNkq.js";import{f as F}from"./fireMemoDetail-CDU8-y4D.js";import{T as P}from"./TwBadge-BV58sdkb.js";import"./Divider-CX7F09o-.js";import"./dividerClasses-B3rRPCnK.js";import"./Link-CLMIBZY1.js";import"./Container-BQdTcffS.js";import"./styled-BBEArGbq.js";import"./CircularProgress-DOqzH0BJ.js";import"./useBaseQuery-C8l4AgkW.js";import"./HtmlCode-D-KUAvUI.js";import"./copy-BUFC5U-2.js";import"./toPropertyKey-DCwh5dYN.js";import"./SinyImageList-Bmk_mwsK.js";import"./index-Chjiymov.js";import"./ImageListItem-nOIlUe3p.js";import"./isMuiElement-BiVUYafV.js";import"./ComponentCard-DktrEUV1.js";import"./CodeText-DNJ79K4X.js";import"./commonUtil-BpBg--lF.js";import"./AniButton-C7GeuW7R.js";import"./Button-ZhHB92lW.js";import"./fireDatabase-CC-X6seW.js";import"./fireStorage-DOdsAQzx.js";const B=({uid:t,state:r})=>{const e=E({queryKey:["blogMainSearch",r&&r?.s?r.s:""],queryFn:()=>I(r?.s,t===g?g:"")});return e.isLoading?s.jsx(l,{}):e.error?s.jsxs("div",{children:["Error: ",e.error.message]}):s.jsx(_,{query:e,index:"1",s:r&&r?.s?r.s:"",sx:{mt:2}})},K=({uid:t,state:r})=>{const[e,c]=j(b),[i,n]=j(T);return a.useEffect(()=>{i!==r.s&&(c(m=>({...m,[r.s]:e[r.s]===void 0?1:e[r.s]+1})),n(r.s))},[r]),s.jsx(Q,{title:"Search",className:"mt-6",children:s.jsx("div",{className:"mt-5"})})},Q=({title:t,children:r,className:e=""})=>{const c=w(),i=D(b),n=[];for(const o in i)n.push(o);const m=o=>{c("/tw/search",{state:{s:o}})};return s.jsxs("div",{className:`rounded-2xl border border-gray-200 
      bg-white dark:border-gray-800 dark:bg-white/[0.03] 
      overflow-hidden w-full ${e}
      mb-5
      `,children:[s.jsx("div",{className:"flex flex-col px-4 py-2",children:s.jsx("h3",{className:"text-base font-medium text-gray-800 dark:text-white/90",children:t})}),s.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-5 lg:grid-cols-7 ga-1 p-2 sm:p-4 border-t bg-stone-100 dark:bg-stone-950 border-gray-100 dark:border-gray-800 ",children:[n.map((o,u)=>s.jsx("div",{children:s.jsx(P,{className:"cursor-pointer",variant:"light",color:"dark",onClick:()=>m(o),children:o})},u)),s.jsx("div",{children:r})]})]})};function gs(){const t=L(),r=t.state,{user:e}=N(),c=a.useRef(r.s),[i,n]=a.useState(),[m]=R(),o=m.get("g"),[u,y]=a.useState(),[S,p]=a.useState(!0),x=o==="h"?"home":"memo";return a.useEffect(()=>{const v=async f=>{if(f!==""){const k=await F(x,e?.uid,f,c.current);y(k),p(!1)}};p(!0);const h=t.pathname.split("/"),d=h.length>2?h[h.length-1]:"";n(d),d!=null&&d!=="search"&&v(d)},[t.pathname]),s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",alignContent:"center",justifyContent:"center"},children:[s.jsxs(a.Suspense,{fallback:s.jsx(l,{}),children:[s.jsx(M,{children:s.jsx(W,{path:"/:memoId",element:s.jsx(q,{rootDb:x,isLoading:S,memoDetailData:u})})}),i==="search"?s.jsx(K,{uid:e?.uid,state:r}):"",e===null?s.jsx(l,{}):i==="search"&&r.s!==""&&s.jsx(a.Suspense,{fallback:s.jsx(l,{}),children:s.jsx(B,{index:"1",uid:e?.uid,state:r})})]}),s.jsx(C,{})]})}export{gs as default};
