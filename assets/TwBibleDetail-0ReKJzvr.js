import{j as t,y as _,z as L,x as D,w as R,r as f,h as H,n as P,f as X,p as Y,o as q,v as z,t as J}from"./index-DxojyiUM.js";import{A as w}from"./AniButton-DAIp8LXf.js";import{b as y}from"./bibleTxt-CDg_iih8.js";import{u as M,B as U}from"./BibleBookmarkText-CC2wc4kG.js";/* empty css                   */import{T as V}from"./TwTitleItem-CVY6SzF_.js";import{H as W}from"./HtmlText-DZsxcHag.js";import"./Button-D122SRg-.js";import"./Grid-BqYf3Jqk.js";import"./index-BW9Z4Rsv.js";/* empty css                   */const G=e=>{const c=e.dataText;if(e.data===void 0||e.data===null||c==null)return;const u=e.bibleId.split("_");return e.bibleId&&u.length!==3?t.jsx(t.Fragment,{}):t.jsxs(t.Fragment,{children:[t.jsx("h6",{className:`flex flex-col items-center mb-8 ${_.textXl}`,children:e.nm}),c.map((s,o)=>{let b="text.primary";e.cd4+""===s.cd4&&(b="warning.main");const x=e.bookmark?.data?.filter(n=>n.cd1===s.cd1&&n.cd2===s.cd2&&n.cd3===s.cd3&&n.cd4===s.cd4&&n.bookmark==="Y");return x&&x.length>0&&(s.bookmark="Y"),t.jsxs("div",{className:"grid grid-cols-5 sm:grid-cols-6 md:grid-cols-10 lg:grid-cols-12 gap-4",id:`id_${o+1}`,children:[t.jsx("div",{className:"col-span-1",children:t.jsxs("div",{className:`flex ${b}`,children:[t.jsx(L,{className:"items-center text-top",onClick:()=>e.onBookmark(s),children:s.nm}),x&&x.length>0&&t.jsx(D,{className:"text-red-500"})]})}),t.jsx("div",{className:`col-span-4 sm:col-span-5 md:col-span-9 lg:col-span-11 ${b}`,children:t.jsx(W,{text:s.text})})]},o)})]})},K=e=>{const c=new Array;if(e.data===void 0||e.data===null)return;const u=e.bibleId.split("_");for(let s=1;s<=e.data.cd3;s++){const o={nm:`${e.data.nm2}${s}장`,key:e.data.id+"_"+s};c.push(o)}return u&&u.length===3?t.jsxs("h6",{className:`flex flex-col items-center ${_.textXl}`,children:[e.nm," ",u[2]," 장"]}):t.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-10 lg:grid-cols-12 gap-4",children:c.map((s,o)=>t.jsx("div",{className:"col-span-1",children:t.jsx(R,{to:`/bible/${s.key}`,children:s.nm})},o))})},ct=()=>{const[e,c]=f.useState(null),[u,s]=f.useState(!0),{query:o,setBibleBookmark:b}=M(),{t:x}=H(),n=f.useRef(),{bibleId:r}=P(),p=X(),[k,T]=f.useState(!1),[N,B]=f.useState(!1),{user:I}=Y(),h=p?.state?.word,g=p?.state?.cd4,C=q();f.useEffect(()=>{if(r!==void 0){(async()=>{const l=await A(r,h);c(l),s(!1)})(),T(!1),B(!0);const a=r.split("_");if(n.current&&a.length===3){const l=n.current.cd3;T(Number(a[2])!==1),B(a[2]<l)}}},[r,h]),f.useEffect(()=>{g!==void 0&&setTimeout(()=>{E("","id_"+g)},1500)},[e,g]);const E=(i,a)=>{const l=document.getElementById(a);l&&l.scrollIntoView({block:"center",behavior:"smooth"})},F=i=>{I!==void 0&&b(i)},A=async(i,a)=>{if(i===""||i===void 0)return"";const l=i.split("_");if(l.length<1)return;l.length>1&&J.map(d=>{d.id===l[0]+"_"+l[1]&&(n.current=d)});const j=new Array;if(l.length===3){for(let d in y){if(!d.includes(i+"_"))continue;let m=y[d];m.id=d;let v=m.txt;if(a!==void 0){const S=new RegExp(a,"gi");v=v.replace(S,`<span class='lightext'>${a}</span>`)}m.nm=`${n.current.nm2}${l[2]}:${m.cd4}`,m.text=v,j.push(m)}return j.sort((d,m)=>d.cd4-m.cd4),j}};if(r==="")return t.jsx(t.Fragment,{});const $=i=>{let a=r.split("_");a[2]=Number(a[2])+i,C(`/bible/${a[0]}_${a[1]}_${a[2]}`)};return t.jsxs(t.Fragment,{children:[t.jsx("div",{id:"back-to-top-anchor"}),t.jsx(U,{}),t.jsx(V,{children:n.current!==null&&n.current!==void 0&&n.current.nm!==null?n.current.text:""}),t.jsx(K,{data:n.current,bibleId:r}),t.jsx(G,{dataText:e,data:n.current,searchWord:h,bibleId:r,cd4:g,bookmark:o,onBookmark:F}),t.jsxs("div",{className:"p-0",children:[u&&t.jsx("div",{className:"flex flex-col items-center",children:t.jsx(z,{className:"mt-10"})}),r&&r.split("_").length===3?t.jsx("div",{className:"flex justify-between mt-10",children:t.jsxs("div",{className:"grid grid-cols-12 gap-2 w-full",children:[k?t.jsx("div",{className:N?"col-span-6":"col-span-12",children:t.jsx(w,{type:"button",variant:"outlined",onClick:()=>$(-1),fullWidth:!0,children:`< ${x("prev")}`})}):"",N?t.jsx("div",{className:k?"col-span-6":"col-span-12",children:t.jsx(w,{type:"button",variant:"outlined",onClick:()=>$(1),fullWidth:!0,children:`${x("next")} >`})}):""]})}):""]})]})};export{ct as TwBibleDetail,ct as default};
