import{j as e,x as j,v as _,w as Y,h as F,r as x,n as H,f as O,p as X,o as q,t as z,_ as A}from"./index-B3aTzazY.js";import{A as C}from"./AniButton-B3nTsbdC.js";import{u as D,B as U}from"./BibleBookmarkText-BD_UU1ZZ.js";/* empty css                   */import{T as G,a as K}from"./TwLoading-Drtic3zH.js";import{H as L}from"./HtmlText-wPjUE0NT.js";import"./Button-DIXbOlKg.js";import"./Grid-C5e982vN.js";import"./index-CizMoix8.js";/* empty css                   */const Q=({dataText:r,searchWord:h,...o})=>{if(r==null)return;const f=o.bibleId.split("_");return o.bibleId&&f.length<2?e.jsx(e.Fragment,{}):e.jsxs(e.Fragment,{children:[e.jsx("h6",{className:`flex flex-col items-center mb-8 ${j.textXl}`,children:o.nm}),r.map((a,u)=>{let n="text.primary";o.cd4+""===a.cd4&&(n="warning.main");const c=o.bookmark?.dataText?.filter(s=>s.id===a.id&&s.bookmark==="Y");return c&&c.length>0&&(a.bookmark="Y"),e.jsxs("div",{className:"grid grid-cols-5 sm:grid-cols-6 md:grid-cols-10 lg:grid-cols-12 gap-4",id:`id_${u+1}`,children:[e.jsx("div",{className:"col-span-1",children:e.jsxs("div",{className:`flex items-center ${n}`,children:[e.jsx(_,{className:"items-center text-top cursor-pointer",onClick:()=>o.onBookmark(a),children:a.nm}),c&&c.length>0&&e.jsx(Y,{className:"text-red-500 ml-1",fontSize:"small"})]})}),e.jsxs("div",{className:`col-span-4 sm:col-span-5 md:col-span-9 lg:col-span-11 ${n}`,children:[e.jsx(L,{text:a.ko}),e.jsx("div",{className:"text-sm text-red-600 dark:text-gray-700",children:e.jsx(L,{text:a.en})})]})]},u)})]})},W=({data:r,bibleId:h,isBottom:o=!1})=>{const f=new Array,{t:a}=F();if(r==null)return;const u=h.split("_");for(let n=1;n<=r.cd3;n++){const c={nm:`${r.nm2}${n}장`,key:r.id+"_"+n};f.push(c)}return u&&u.length===3&&!o?e.jsxs("h6",{className:`flex flex-col items-center ${j.textXl}`,children:[u[2],"장"]}):e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-10 lg:grid-cols-12 gap-4",children:f.map((n,c)=>e.jsx("div",{className:"col-span-1",children:e.jsx(_,{to:`/bible/${n.key}`,children:n.nm})},c))})},de=()=>{const[r,h]=x.useState(null),[o,f]=x.useState(!0),{query:a,setBibleBookmark:u}=D(),{t:n,i18n:c}=F(),s=x.useRef(),{bibleId:d}=H(),$=O(),[T,B]=x.useState(!1),[w,y]=x.useState(!1),{user:M}=X(),k=$?.state?.word,p=$?.state?.cd4,P=q();x.useEffect(()=>{if(d!==void 0){(async()=>{const m=await J(d,k);h(m),f(!1)})(),B(!1),y(!0);const t=d.split("_");if(s.current&&t.length>=2){const m=s.current.cd3;B(Number(t[2])!==1),y(t[2]<m)}}},[d,k]),x.useEffect(()=>{p!==void 0&&setTimeout(()=>{R("","id_"+p)},1500)},[r,p]);const R=(i,t)=>{const m=document.getElementById(t);m&&m.scrollIntoView({block:"center",behavior:"smooth"})},S=i=>{M!==void 0&&(u(i),i.bookmark=i.bookmark===void 0||i.bookmark==="N"?"Y":"N")},J=async(i,t)=>{if(i===""||i===void 0)return"";c.language.split("-")[0];const V=(await A(()=>import("./bibleJson-mLacnG04.js"),[])).default,b=i.split("_"),E=(await A(()=>import("./bible-7rshX_PU.js"),[])).default;if(b.length<1)return;b.length>1&&V.map(g=>{g.id===b[0]+"_"+b[1]&&(s.current=g)});const N=new Array;if(b.length>1){const g=new RegExp(t,"gi");for(let v in E){let l=E[v];l.id.startsWith(`${i}_`)&&(t!==void 0&&t!==""&&t!==null&&(l.ko=l.ko.replace(g,`<span class='lightext'>${t}</span>`),l.en=l.en.replace(g,`<span class='lightext'>${t}</span>`)),l.nm=b.length===2?`${s.current.nm2}${l.cd3}:${l.cd4}`:`${s.current.nm2}${l.cd3}:${l.cd4}`,N.push(l))}return N.sort((v,l)=>v.cd3-l.cd3||v.cd4-l.cd4),N}};if(d==="")return e.jsx(e.Fragment,{});const I=i=>{let t=d.split("_");t[2]=Number(t[2])+i,P(`/bible/${t[0]}_${t[1]}_${t[2]}`)};return r===null?e.jsx(G,{}):e.jsxs("div",{className:`${j.card}`,children:[e.jsx("div",{id:"back-to-top-anchor"}),e.jsx(U,{}),e.jsx("div",{className:"w-full items-center justify-center flex flex-col",children:e.jsx(_,{to:"/bible/"+s.current.id,children:e.jsx(K,{children:s.current!==null&&s.current!==void 0&&s.current.nm!==null?`${s.current.text} ${s.current.text_en}`:""})})}),e.jsx(W,{data:s.current,bibleId:d}),e.jsx(Q,{dataText:r,data:s.current,searchWord:k,bibleId:d,cd4:p,bookmark:a,onBookmark:S}),e.jsxs("div",{className:"p-0",children:[o&&e.jsx("div",{className:"flex flex-col items-center",children:e.jsx(z,{className:"mt-10"})}),d&&d.split("_").length===3?e.jsx("div",{className:`${j.between} mt-10`,children:e.jsxs("div",{className:"grid grid-cols-12 gap-2 w-full",children:[T?e.jsx("div",{className:w?"col-span-6":"col-span-12",children:e.jsx(C,{type:"button",variant:"outlined",onClick:()=>I(-1),fullWidth:!0,children:`< ${n("prev")}`})}):null,w?e.jsx("div",{className:T?"col-span-6":"col-span-12",children:e.jsx(C,{type:"button",variant:"outlined",onClick:()=>I(1),fullWidth:!0,children:`${n("next")} >`})}):""]})}):null]})]})};export{de as TwBibleDetail,de as default};
