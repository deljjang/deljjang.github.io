import{g as r,s as g}from"./fireDatabase-V756jICp.js";import{g as f}from"./fireStorage-KtnmbIfI.js";const v=async(l,o,$,s)=>{let t="",n="",e={};((a,i,m)=>{n=a==="memo"?`${a}/${i}/${m}`:`${a}/${m}`,t=a==="memo"?`${a}_txt/${i}/${m}`:`${a}_txt/${m}`})(l,o,$);async function c(){if(t===void 0)return"";if(e=await r(t),e===void 0)return console.log("No data available"),"";if(e?.fullIndex,e.image!==void 0&&e.image!==null){const a=await f(t,n,e.image);e.image=a,(e.imageOK===void 0||e.imageOK==="N")&&(a&&a.map(i=>{i.ext==="jpg"&&(e.memo=e.memo+`<img src='${i.url}'>`)}),g(`${t}/imageOK`,"Y"),g(`${t}/memo`,e.memo))}if(s!==void 0&&s!==""){const a=s,i=new RegExp(a,"gi"),m=e.memo.replace(i,`<span class='lightext'>${a}</span>`);e.memo=m}}return await c(),e};export{v as f};
