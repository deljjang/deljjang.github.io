import{k,bA as v,j as e,m as f,u as S,bB as L,bC as N,z as D,f as C,t as $,r as n,bD as T,R as E,c as M,L as x,bE as R}from"./index-CEJkszmk.js";import z from"./TwDetail-DIoG-l6m.js";import{T as I}from"./TwSearchBox-cw05kJAq.js";import"./AniButton-BUWrYrHg.js";import"./Button-CFC5iSHv.js";const q=()=>e.jsx("div",{className:"w-full max-w-4xl mx-auto mt-2 space-y-4 p-4",children:[...Array(5)].map((r,s)=>e.jsxs("div",{className:"p-4 border border-gray-200 dark:border-zinc-700 rounded-lg animate-pulse",children:[e.jsx("div",{className:"h-5 bg-gray-300 dark:bg-zinc-600 rounded w-3/4 mb-3"}),e.jsx("div",{className:"space-y-2",children:e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-zinc-600 rounded w-5/6"})})]},s))}),P=({uid:r,state:s})=>{const a=k({queryKey:["blogMainSearch",s&&s?.s?s.s:""],queryFn:()=>v(s?.s,r===f?f:"")});return a.isLoading?e.jsx(q,{}):a.error?e.jsxs("div",{children:["Error: ",a.error.message]}):e.jsx(A,{query:a,index:"1",s:s&&s?.s?s.s:"",sx:{mt:2}})},A=({query:r,className:s,s:a,lnk:i="tw/search",index:t})=>{const{isExpanded:o}=S(),m=o?"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2":"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 2xl:grid-cols-3";return e.jsx("div",{className:`TwList w-full ${m} gap-2 px-2
      ${s}`,children:r.data.map((l,d)=>(l.key=d,e.jsx(B,{lnk:i,post:l,s:a,index:d},l.key)))})};function B({post:r,s,lnk:a}){const i=r.g==="m"?e.jsx("span",{className:"menu-item-icon-size menu-item-icon-active",children:e.jsx(L,{})}):null,t=a==="blog"?`/${a}/${r.url?r.url:r.id}`:`/${a}/${r.url?r.url:r.id}?s=${s}&g=${r.g?r.g:"m"}`;return e.jsx(N,{to:t,state:{s},className:"RouterLink w-full no-underline",children:e.jsx(F,{icon:i,children:r.title})},r.key)}const F=({children:r,className:s="",icon:a=null})=>e.jsx("div",{className:`ComponentCard w-full ${D.roundedXl} border border-gray-200 
      bg-white dark:border-gray-800 dark:bg-white/[0.03] 
      overflow-hidden ${s}`,children:e.jsx("div",{className:"flex flex-col px-4 py-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[a&&e.jsx("span",{className:"flex-shrink-0",children:a}),e.jsx("h3",{className:"text-base font-medium text-gray-800 dark:text-white/90",children:r})]})})});function _(){const r=C(),s=r.state,{user:a}=$(),i=n.useRef(s===null?"":s.s),[t,o]=n.useState(),[m]=T(),l=m.get("g"),[d,b]=n.useState(),[p,g]=n.useState(!0),h=l==="h"?"home":"memo";return n.useEffect(()=>{const y=async j=>{if(j!==""){const w=await R(h,a?.uid,j,i.current);b(w),g(!1)}};g(!0);const u=r.pathname.split("/"),c=u.length>2?u[u.length-1]:"";o(c),c!=null&&c!=="search"&&y(c)},[r.pathname]),e.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",alignContent:"center",justifyContent:"center"},children:e.jsxs(n.Suspense,{fallback:e.jsx(x,{}),children:[e.jsx(E,{children:e.jsx(M,{path:"/:memoId",element:e.jsx(z,{rootDb:h,isLoading:p,memoDetailData:d})})}),t==="search"?e.jsx(I,{state:s,gubun:"tw"}):"",a===null?e.jsx(x,{}):t==="search"&&s!==null&&s?.s!==""&&e.jsx(n.Suspense,{fallback:e.jsx(x,{}),children:e.jsx(P,{index:"1",uid:a?.uid,state:s})})]})})}export{_ as default};
