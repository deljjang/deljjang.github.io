import{j as r,I as u,A as D,c as b,r as o,aM as L,R as M,K as I}from"./index-DCir47sL.js";import{T as R}from"./Footer-DvAJ1xHw.js";import{L as a}from"./Loading-B2yZhQD6.js";import{u as w}from"./useQuery--qqJsRaH.js";import{b as E,T as q}from"./TailList-CBLTMiw1.js";import v from"./TwDetail-DeXuHSzz.js";import{f as F}from"./fireMemoDetail-C92Rsbly.js";import{T as k}from"./TwSearchBox-_bnXz7WK.js";import"./LinkItem-Crp0S6QK.js";import"./Typography-_DUUpAcP.js";import"./TwLinkItem-X9VbOm4E.js";import"./Divider-Bjr810Qg.js";import"./dividerClasses-7RVVhf2z.js";import"./Link-B9LdbAYU.js";import"./Container-CaFAbygj.js";import"./styled-Dka3apOb.js";import"./CircularProgress-Qwx6aBwt.js";import"./useBaseQuery-C7shS6Pv.js";import"./HtmlCode-Bh7p1v_I.js";import"./copy-Dn82zcWo.js";import"./TwBadge-DF-UGWbA.js";import"./index-DL16U8R0.js";import"./TwButton-CTQKhw6G.js";import"./ComponentCard-DcO4JBDI.js";import"./TwRadio-Bu3YH-Vt.js";import"./toPropertyKey-DCwh5dYN.js";import"./TwInput-CMJC7sUw.js";import"./SinyImageList-CxWyBfTr.js";import"./index-Chjiymov.js";import"./ImageListItem-uFro0iCV.js";import"./isMuiElement-BrJ67yU6.js";import"./CodeText-B4EK90Kt.js";import"./commonUtil-DMuXikYx.js";import"./AniButton-Cbbxq7R7.js";import"./Button-CYlCOR8h.js";import"./fireDatabase-CtwLb0_g.js";import"./fireStorage-BC3tLb91.js";const C=({uid:s,state:t})=>{const e=w({queryKey:["blogMainSearch",t&&t?.s?t.s:""],queryFn:()=>E(t?.s,s===u?u:"")});return e.isLoading?r.jsx(a,{}):e.error?r.jsxs("div",{children:["Error: ",e.error.message]}):r.jsx(q,{query:e,index:"1",s:t&&t?.s?t.s:"",sx:{mt:2}})};function gt(){const s=D(),t=s.state;console.log("TailSearch.state=",t);const{user:e}=b(),d=o.useRef(t===null?"":t.s),[n,f]=o.useState(),[x]=L(),h=x.get("g"),[j,g]=o.useState(),[S,c]=o.useState(!0),p=h==="h"?"home":"memo";return o.useEffect(()=>{const T=async l=>{if(l!==""){const y=await F(p,e?.uid,l,d.current);g(y),c(!1)}};c(!0);const m=s.pathname.split("/"),i=m.length>2?m[m.length-1]:"";f(i),i!=null&&i!=="search"&&T(i)},[s.pathname]),r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",alignContent:"center",justifyContent:"center"},children:[r.jsxs(o.Suspense,{fallback:r.jsx(a,{}),children:[r.jsx(M,{children:r.jsx(I,{path:"/:memoId",element:r.jsx(v,{rootDb:p,isLoading:S,memoDetailData:j})})}),n==="search"?r.jsx(k,{state:t,gubun:"tw"}):"",e===null?r.jsx(a,{}):n==="search"&&t!==null&&t?.s!==""&&r.jsx(o.Suspense,{fallback:r.jsx(a,{}),children:r.jsx(C,{index:"1",uid:e?.uid,state:t})})]}),r.jsx(R,{})]})}export{gt as default};
