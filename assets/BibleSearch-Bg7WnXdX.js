import{y as d,E as x,b as c,G as b,j as s,k as h,i as m,n as f,N as g,t as j,M as p}from"./index-lrzewyDA.js";import{b as l}from"./bibleTxt-CDg_iih8.js";import{T as o}from"./TwSearchBox-D5E1qEmw.js";import{G as i}from"./Grid-BiZogWEd.js";import"./TwBadge-CjMbClUy.js";const L=t=>{if(!(t.bibleList===void 0||t.bibleList===null))return t.bibleList.map((e,n)=>s.jsxs(i,{container:!0,spacing:2,columns:{xs:5,sm:6,md:10,lg:12},children:[s.jsxs(i,{item:!0,xs:1,md:1,children:[g[e.cd1][e.cd2].nm2,e.cd3,":",e.cd4]}),s.jsx(i,{item:!0,xs:4,sm:5,md:9,lg:11,children:s.jsx(j,{to:`/bible/${e.cd1}_${e.cd2}_${e.cd3}`,state:{cd4:e.cd4,word:t.word},children:s.jsx(p,{show:!0,text:e.txt})})})]},n))},y=(t,e)=>{if(console.log("BibleSearch.word="+t),t==="")return alert(e("search_word_required")),[];const n=new Array;for(let a in l){let r={...l[a]};if(r.txt.match(t)){r.id=a;const u=new RegExp(t,"gi");r.txt=r.txt.replace(u,`<span class='lightext'>${t}</span>`),n.push(r)}}return n},S=()=>{const e=d().state,{t:n}=x(),a=c.useRef(e===null?"":e.s),r=b({queryKey:["getBibleData",e&&e?.s?e.s:""],queryFn:()=>y(e?.s,n)});return c.useEffect(()=>{a.current=e===null?"":e.s,console.log("BibleSearch.useEffect.searchWord="+a.current),r.refetch()},[e]),r.isLoading?s.jsxs(s.Fragment,{children:[s.jsx(o,{state:e,gubun:"bible"}),s.jsx(h,{})]}):r.error?s.jsxs("div",{children:[n("error_prefix"),r.error.message]}):s.jsxs("div",{children:[s.jsx(o,{state:e,gubun:"bible"}),s.jsxs(m,{children:[n("search_result_prefix"),f(r.data?r.data?.length:"0")]}),s.jsx(L,{bibleList:r.data,word:a.current})]})};export{S as default};
