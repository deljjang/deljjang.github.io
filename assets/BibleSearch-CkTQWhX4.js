import{f as d,h as x,r as o,i as m,j as r,L as b,q as h,t as f,a as g}from"./index-D_dKYi48.js";import{H as p}from"./HtmlText-DUBUiCwL.js";import{T as j}from"./TitleItem-Dkq7u2sg.js";import{b as c}from"./bibleTxt-CDg_iih8.js";/* empty css                   */import{T as l}from"./TwSearchBox-hUThFlRg.js";import{G as n}from"./Grid-BL4n9O71.js";import"./index-CEo5_GkJ.js";/* empty css                   */import"./TwBadge-BENpomjU.js";const L=t=>{if(!(t.bibleList===void 0||t.bibleList===null))return t.bibleList.map((e,a)=>r.jsxs(n,{container:!0,spacing:2,columns:{xs:5,sm:6,md:10,lg:12},children:[r.jsxs(n,{item:!0,xs:1,md:1,children:[f[e.cd1][e.cd2].nm2,e.cd3,":",e.cd4]}),r.jsx(n,{item:!0,xs:4,sm:5,md:9,lg:11,children:r.jsx(g,{to:`/bible/${e.cd1}_${e.cd2}_${e.cd3}`,state:{cd4:e.cd4,word:t.word},children:r.jsx(p,{show:!0,text:e.txt})})})]},a))},y=(t,e)=>{if(console.log("BibleSearch.word="+t),t==="")return alert(e("search_word_required")),[];const a=new Array;for(let i in c){let s={...c[i]};if(s.txt.match(t)){s.id=i;const u=new RegExp(t,"gi");s.txt=s.txt.replace(u,`<span class='lightext'>${t}</span>`),a.push(s)}}return a},W=()=>{const e=d().state,{t:a}=x(),i=o.useRef(e===null?"":e.s),s=m({queryKey:["getBibleData",e&&e?.s?e.s:""],queryFn:()=>y(e?.s,a)});return o.useEffect(()=>{i.current=e===null?"":e.s,console.log("BibleSearch.useEffect.searchWord="+i.current),s.refetch()},[e]),s.isLoading?r.jsxs(r.Fragment,{children:[r.jsx(l,{state:e,gubun:"bible"}),r.jsx(b,{})]}):s.error?r.jsxs("div",{children:[a("error_prefix"),s.error.message]}):r.jsxs("div",{children:[r.jsx(l,{state:e,gubun:"bible"}),r.jsxs(j,{children:[a("search_result_prefix"),h(s.data?s.data?.length:"0")]}),r.jsx(L,{bibleList:s.data,word:i.current})]})};export{W as default};
