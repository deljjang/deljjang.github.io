const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MemoSheetGrid-BVhfU98q.js","assets/index-CuWv6onM.js","assets/router-v4BRDFYV.js","assets/vendor-CCYiWZgt.js","assets/index-CaP1gL3n.css","assets/App-BhZS67Qm.js","assets/App-C0oX4rhs.css","assets/IpInfo-BPVg3SFA.js","assets/Icons-nJlPM6ql.js","assets/MemoDetailEdit-CW6E9kQ7.js","assets/useWindowDimensions-D4V3h9qm.js","assets/HtmlBadge-9gLMtdy5.js","assets/luxon-MrBZWWSV.js","assets/TwCheckbox-C5SQQZ0Y.js","assets/TwTextArea-Ckk4bwoo.js","assets/TwDatePicker-BM8DOEiM.js","assets/TwSelect-CBp4grJa.js","assets/MemoDetailEdit-CXguKeju.css","assets/MemoDetailUtil-3rogt4P3.js","assets/TwTodo-B2Ka9nVD.js"])))=>i.map(i=>d[i]);
import{j as i,_ as ut}from"./index-CuWv6onM.js";import{aU as lo,aV as io,aW as Oe,aX as Ut,aY as es,aZ as ts,a_ as co,a$ as uo,b0 as mo,b1 as fo,b2 as ho,b3 as po,b4 as ns,b5 as go,b6 as vo,b7 as Xt,b8 as Xe,b9 as ss,ba as fn,bb as os,bc as kt,bd as Yt,a1 as xo,a3 as bo,a4 as wo,be as yo,a7 as Eo,f as we,bf as dt,aA as mt,n as Ge,g as je,h as fe,bg as Co,bh as hn,a as H,bi as No,bj as rs,aD as ko,ad as So,bk as _o,bl as ft,w as ee,l as me,bm as pn,bn as jo,bo as St,bp as Mo,bq as gn,br as To,bs as Io,K as Lo,bt as Po,bu as Ro,bv as Oo,bw as Do,s as zo,bx as At,m as lt,by as Ao,P as vn,_ as xn,H as $o,ae as Fo,af as Wo,bz as Ho,bA as Vo,bB as as,bC as bn,bD as Bo,bE as Zo,bF as Uo,bG as Xo,bH as Yo,bI as wn,bJ as Ko,bK as Go,bL as qo,av as Jo,bM as Qo,bN as er,bO as tr,aw as nr,bP as sr,bQ as or,u as rr,bR as _t}from"./App-BhZS67Qm.js";import{r,d as ar,c as lr,a as ls,u as ht,N as yn,R as qe,e as ir,f as Ie}from"./router-v4BRDFYV.js";import{I as cr}from"./IpInfo-BPVg3SFA.js";import{C as pt,I as Pe,S as is,E as ur,f as dr,g as mr,P as fr,T as hr,h as pr,i as gr,H as vr,j as xr,k as br}from"./Icons-nJlPM6ql.js";const st=new WeakMap;let ot;const cs=(e,t,n)=>(s,o)=>o&&o[0]?o[0][e+"Size"]:io(s)&&"getBBox"in s?s.getBBox()[t]:s[n],wr=cs("inline","width","offsetWidth"),yr=cs("block","height","offsetHeight");function Er({target:e,borderBoxSize:t}){st.get(e)?.forEach(n=>{n(e,{get width(){return wr(e,t)},get height(){return yr(e,t)}})})}function Cr(e){e.forEach(Er)}function Nr(){typeof ResizeObserver>"u"||(ot=new ResizeObserver(Cr))}function kr(e,t){ot||Nr();const n=lo(e);return n.forEach(s=>{let o=st.get(s);o||(o=new Set,st.set(s,o)),o.add(t),ot?.observe(s)}),()=>{n.forEach(s=>{const o=st.get(s);o?.delete(t),o?.size||ot?.unobserve(s)})}}const rt=new Set;let Re;function Sr(){Re=()=>{const e={get width(){return window.innerWidth},get height(){return window.innerHeight}};rt.forEach(t=>t(e))},window.addEventListener("resize",Re)}function _r(e){return rt.add(e),Re||Sr(),()=>{rt.delete(e),!rt.size&&typeof Re=="function"&&(window.removeEventListener("resize",Re),Re=void 0)}}function jr(e,t){return typeof e=="function"?_r(e):kr(e,t)}function us(e,t){let n;const s=()=>{const{currentTime:o}=t,l=(o===null?0:o.value)/100;n!==l&&e(l),n=l};return Oe.preUpdate(s,!0),()=>Ut(s)}function Mr(...e){const t=!Array.isArray(e[0]),n=t?0:-1,s=e[0+n],o=e[1+n],a=e[2+n],l=e[3+n],c=es(o,a,l);return t?c(s):c}function Tr(e,t,n){const s=e.get();let o=null,a=s,l;const c=typeof s=="string"?s.replace(/[\d.-]/g,""):void 0,d=()=>{o&&(o.stop(),o=null)},f=()=>{d(),o=new co({keyframes:[Cn(e.get()),Cn(a)],velocity:e.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...n,onUpdate:l})};if(e.attach((u,m)=>{a=u,l=h=>m(En(h,c)),Oe.postRender(f)},d),ts(t)){const u=t.on("change",h=>e.set(En(h,c))),m=e.on("destroy",u);return()=>{u(),m()}}return d}function En(e,t){return t?e+t:e}function Cn(e){return typeof e=="number"?e:parseFloat(e)}const Ir=50,Nn=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),Lr=()=>({time:0,x:Nn(),y:Nn()}),Pr={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function kn(e,t,n,s){const o=n[t],{length:a,position:l}=Pr[t],c=o.current,d=n.time;o.current=e[`scroll${l}`],o.scrollLength=e[`scroll${a}`]-e[`client${a}`],o.offset.length=0,o.offset[0]=0,o.offset[1]=o.scrollLength,o.progress=uo(0,o.scrollLength,o.current);const f=s-d;o.velocity=f>Ir?0:mo(o.current-c,f)}function Rr(e,t,n){kn(e,"x",t,n),kn(e,"y",t,n),t.time=n}function Or(e,t){const n={x:0,y:0};let s=e;for(;s&&s!==t;)if(fo(s))n.x+=s.offsetLeft,n.y+=s.offsetTop,s=s.offsetParent;else if(s.tagName==="svg"){const o=s.getBoundingClientRect();s=s.parentElement;const a=s.getBoundingClientRect();n.x+=o.left-a.left,n.y+=o.top-a.top}else if(s instanceof SVGGraphicsElement){const{x:o,y:a}=s.getBBox();n.x+=o,n.y+=a;let l=null,c=s.parentNode;for(;!l;)c.tagName==="svg"&&(l=c),c=s.parentNode;s=l}else break;return n}const $t={start:0,center:.5,end:1};function Sn(e,t,n=0){let s=0;if(e in $t&&(e=$t[e]),typeof e=="string"){const o=parseFloat(e);e.endsWith("px")?s=o:e.endsWith("%")?e=o/100:e.endsWith("vw")?s=o/100*document.documentElement.clientWidth:e.endsWith("vh")?s=o/100*document.documentElement.clientHeight:e=o}return typeof e=="number"&&(s=t*e),n+s}const Dr=[0,0];function zr(e,t,n,s){let o=Array.isArray(e)?e:Dr,a=0,l=0;return typeof e=="number"?o=[e,e]:typeof e=="string"&&(e=e.trim(),e.includes(" ")?o=e.split(" "):o=[e,$t[e]?e:"0"]),a=Sn(o[0],n,s),l=Sn(o[1],t),a-l}const Ar={All:[[0,0],[1,1]]},$r={x:0,y:0};function Fr(e){return"getBBox"in e&&e.tagName!=="svg"?e.getBBox():{width:e.clientWidth,height:e.clientHeight}}function Wr(e,t,n){const{offset:s=Ar.All}=n,{target:o=e,axis:a="y"}=n,l=a==="y"?"height":"width",c=o!==e?Or(o,e):$r,d=o===e?{width:e.scrollWidth,height:e.scrollHeight}:Fr(o),f={width:e.clientWidth,height:e.clientHeight};t[a].offset.length=0;let u=!t[a].interpolate;const m=s.length;for(let h=0;h<m;h++){const p=zr(s[h],f[l],d[l],c[a]);!u&&p!==t[a].interpolatorOffsets[h]&&(u=!0),t[a].offset[h]=p}u&&(t[a].interpolate=es(t[a].offset,ho(s),{clamp:!1}),t[a].interpolatorOffsets=[...t[a].offset]),t[a].progress=po(0,1,t[a].interpolate(t[a].current))}function Hr(e,t=e,n){if(n.x.targetOffset=0,n.y.targetOffset=0,t!==e){let s=t;for(;s&&s!==e;)n.x.targetOffset+=s.offsetLeft,n.y.targetOffset+=s.offsetTop,s=s.offsetParent}n.x.targetLength=t===e?t.scrollWidth:t.clientWidth,n.y.targetLength=t===e?t.scrollHeight:t.clientHeight,n.x.containerLength=e.clientWidth,n.y.containerLength=e.clientHeight}function Vr(e,t,n,s={}){return{measure:o=>{Hr(e,s.target,n),Rr(e,n,o),(s.offset||s.target)&&Wr(e,n,s)},notify:()=>t(n)}}const Ue=new WeakMap,_n=new WeakMap,jt=new WeakMap,jn=e=>e===document.scrollingElement?window:e;function ds(e,{container:t=document.scrollingElement,...n}={}){if(!t)return ns;let s=jt.get(t);s||(s=new Set,jt.set(t,s));const o=Lr(),a=Vr(t,e,o,n);if(s.add(a),!Ue.has(t)){const c=()=>{for(const m of s)m.measure(go.timestamp);Oe.preUpdate(d)},d=()=>{for(const m of s)m.notify()},f=()=>Oe.read(c);Ue.set(t,f);const u=jn(t);window.addEventListener("resize",f,{passive:!0}),t!==document.documentElement&&_n.set(t,jr(t,f)),u.addEventListener("scroll",f,{passive:!0}),f()}const l=Ue.get(t);return Oe.read(l,!1,!0),()=>{Ut(l);const c=jt.get(t);if(!c||(c.delete(a),c.size))return;const d=Ue.get(t);Ue.delete(t),d&&(jn(t).removeEventListener("scroll",d),_n.get(t)?.(),window.removeEventListener("resize",d))}}const Mn=new Map;function Br(e){const t={value:0},n=ds(s=>{t.value=s[e.axis].progress*100},e);return{currentTime:t,cancel:n}}function ms({source:e,container:t,...n}){const{axis:s}=n;e&&(t=e);const o=Mn.get(t)??new Map;Mn.set(t,o);const a=n.target??"self",l=o.get(a)??{},c=s+(n.offset??[]).join(",");return l[c]||(l[c]=!n.target&&vo()?new ScrollTimeline({source:t,axis:s}):Br({container:t,...n})),l[c]}function Zr(e,t){const n=ms(t);return e.attachTimeline({timeline:t.target?void 0:n,observe:s=>(s.pause(),us(o=>{s.time=s.iterationDuration*o},n))})}function Ur(e){return e.length===2}function Xr(e,t){return Ur(e)?ds(n=>{e(n[t.axis].progress,n)},t):us(e,ms(t))}function Yr(e,{axis:t="y",container:n=document.scrollingElement,...s}={}){if(!n)return ns;const o={axis:t,container:n,...s};return typeof e=="function"?Xr(e,o):Zr(e,o)}const Kr=()=>({scrollX:Xe(0),scrollY:Xe(0),scrollXProgress:Xe(0),scrollYProgress:Xe(0)}),nt=e=>e?!e.current:!1;function Gr({container:e,target:t,...n}={}){const s=Xt(Kr),o=r.useRef(null),a=r.useRef(!1),l=r.useCallback(()=>(o.current=Yr((c,{x:d,y:f})=>{s.scrollX.set(d.current),s.scrollXProgress.set(d.progress),s.scrollY.set(f.current),s.scrollYProgress.set(f.progress)},{...n,container:e?.current||void 0,target:t?.current||void 0}),()=>{o.current?.()}),[e,t,JSON.stringify(n.offset)]);return ss(()=>{if(a.current=!1,nt(e)||nt(t)){a.current=!0;return}else return l()},[l]),r.useEffect(()=>{if(a.current)return fn(!nt(e)),fn(!nt(t)),l()},[l]),s}function fs(e){const t=Xt(()=>Xe(e)),{isStatic:n}=r.useContext(os);if(n){const[,s]=r.useState(e);r.useEffect(()=>t.on("change",s),[])}return t}function hs(e,t){const n=fs(t()),s=()=>n.set(t());return s(),ss(()=>{const o=()=>Oe.preRender(s,!1,!0),a=e.map(l=>l.on("change",o));return()=>{a.forEach(l=>l()),Ut(s)}}),n}function qr(e){kt.current=[],e();const t=hs(kt.current,e);return kt.current=void 0,t}function Jr(e,t,n,s){if(typeof e=="function")return qr(e);const o=Mr(t,n,s);return Array.isArray(e)?Tn(e,o):Tn([e],([a])=>o(a))}function Tn(e,t){const n=Xt(()=>[]);return hs(e,()=>{n.length=0;const s=e.length;for(let o=0;o<s;o++)n[o]=e[o].get();return t(n)})}function Qr(e,t={}){const{isStatic:n}=r.useContext(os),s=()=>ts(e)?e.get():e;if(n)return Jr(s);const o=fs(s());return r.useInsertionEffect(()=>Tr(o,e,t),[o,JSON.stringify(t)]),o}const ea=({className:e})=>i.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),ta=({className:e})=>i.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})});async function na(e,t,n=""){if(t==null||t==="")return"";if(e==="home"){const f=await Yt("home/tree");if(f!=null)try{return JSON.parse(f)}catch(u){console.error("Error parsing JSON data:",u)}}const s=e==="home"?"home_txt":n===""?`${e}_tree/${t}`:`${e}_txt/${t}`,o=xo(bo(wo,s)),a=await yo(o);if(!a.exists()||!a.exists())return null;const l=a.val(),c=[{text:"1.React",id:"react",key:"react",parent:"root"},{text:"2.CSS",id:"css",key:"css",parent:"root"},{text:"3.Android",id:"android",key:"android",parent:"root"},{text:"4.Java",id:"java",key:"java",parent:"root"},{text:"5.이미지",id:"image",key:"image",parent:"root"},{text:"6.Etc",id:"etc",key:"etc",parent:"root"}],d=[];e==="home"&&d.push(...c);for(const f in l){const u=l[f];u.id=f;const m={id:f,key:f,text:u.title,parent:e==="home"?u.gbn:u.parent};e==="memo"?(m.icon=u.bm==="Y"?i.jsx(ea,{className:"w-4 h-4 text-red-500"}):u.icon==="Y"?i.jsx(ta,{className:"w-4 h-4 text-green-500"}):null,m.droppable=!0):m.droppable=!1,!((n===""||n===void 0||n===null)&&(m.parent===void 0||m.parent===null||m.parent===""))&&(e==="home"||n===""||n===void 0||n===null?d.push(m):(u.id=f,(u.memo+"").toLowerCase().indexOf(n.toLowerCase())>-1&&(m.parent="root",m.droppable=!1,d.push(m))))}return d.sort((f,u)=>f.title>u.title?1:-1),e==="home"&&Eo("home/tree",JSON.stringify(d)),d}const sa=({isOpen:e,onClose:t,data:n})=>{const{t:s}=we();if(!e||!n)return null;const{label:o,value:a,items:l}=n;return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:t,children:i.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-lg shadow-xl w-11/12 md:w-1/2 lg:w-1/3 max-h-[80vh] flex flex-col",onClick:c=>c.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-center border-b p-4 dark:border-zinc-600",children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:o}),i.jsx("button",{onClick:t,className:"text-gray-400 hover:bg-gray-200 dark:hover:bg-zinc-700 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center",children:i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),i.jsxs("div",{className:"p-4 overflow-y-auto",children:[i.jsxs("p",{className:"text-base leading-relaxed text-gray-600 dark:text-gray-300 mb-4",children:[s("count","개수"),": ",i.jsx("span",{className:"font-bold",children:a.toLocaleString()})]}),i.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:s("main_list","주요 목록")}),i.jsx("ul",{className:"list-disc list-inside bg-gray-50 dark:bg-zinc-700 p-3 rounded-md",children:l&&l.length>0?l.map((c,d)=>i.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:c.text},d)):i.jsx("li",{className:"text-gray-500",children:s("no_results","결과 없음")})})]})]})})};function oa({series:e,labels:t,onDataPointClick:n}){const[s,o]=r.useState({labels:[],colors:dt,dataLabels:{style:{colors:["#333"]}},responsive:[{breakpoint:480,options:{chart:{width:"100%"},legend:{position:"bottom"}}}]});return r.useEffect(()=>{o(a=>({...a,labels:t}))},[t]),i.jsx("div",{className:"bg-amber-50 dark:bg-gray-900 shadow-md rounded-sm",children:e&&e.length>0?i.jsx(mt,{type:"donut",series:e,options:s}):i.jsx("div",{className:"text-center text-gray-500",children:"표시할 데이터가 없습니다."})})}function ra({series:e,labels:t,onDataPointClick:n}){const[s,o]=r.useState({chart:{type:"radar",toolbar:{show:!1},events:{dataPointSelection:(a,l,c)=>{n&&n(c.dataPointIndex)}}},colors:dt,plotOptions:{radar:{polygons:{distributed:!0}}},dataLabels:{enabled:!1},xaxis:{categories:[]},legend:{show:!0},tooltip:{theme:"dark",style:{fontSize:"12px"},y:{formatter:a=>a.toLocaleString()}}});return r.useEffect(()=>{o(a=>({...a,xaxis:{...a.xaxis,categories:t}}))},[t]),i.jsx("div",{className:"bg-white dark:bg-black shadow-md rounded-sm w-full h-full",children:e&&e.length>0&&e[0].data.length>0?i.jsx(mt,{type:"radar",series:e,options:s}):i.jsx("div",{className:"text-center text-gray-500 py-10",children:"표시할 데이터가 없습니다."})})}function aa({series:e,labels:t,onDataPointClick:n}){const[s,o]=r.useState({labels:[],chart:{events:{dataPointSelection:(a,l,c)=>{n&&n(c.dataPointIndex)}}},colors:dt,plotOptions:{pie:{startAngle:-90,endAngle:90,offsetY:10}},grid:{padding:{bottom:-80}},dataLabels:{style:{colors:["#333"]}},responsive:[{breakpoint:480,options:{chart:{width:"100%"},legend:{position:"bottom"}}}],tooltip:{theme:"dark",style:{fontSize:"12px"},y:{formatter:a=>a.toLocaleString()}},legend:{show:!0}});return r.useEffect(()=>{o(a=>({...a,labels:t}))},[t]),i.jsx("div",{className:"bg-amber-50 dark:bg-gray-900 shadow-md rounded-sm p-2",children:e&&e.length>0&&i.jsx(mt,{type:"donut",series:e,options:s})})}function la({series:e,labels:t,showDownload:n=!0,onDataPointClick:s}){const[o,a]=r.useState({chart:{type:"bar",toolbar:{tools:{download:n}},events:{dataPointSelection:(l,c,d)=>{s&&s(d.dataPointIndex)}}},colors:dt,plotOptions:{bar:{borderRadius:4,horizontal:!1,distributed:!0}},dataLabels:{enabled:!1},xaxis:{categories:[]},legend:{show:!1},tooltip:{theme:"dark",style:{fontSize:"12px"},y:{formatter:l=>l.toLocaleString()}}});return r.useEffect(()=>{a(l=>({...l,xaxis:{...l.xaxis,categories:t}}))},[t]),i.jsx("div",{className:"bg-white dark:bg-black shadow-md rounded-sm w-full p-2",children:e&&e.length>0&&e[0].data&&e[0].data.length>0?i.jsx(mt,{type:"bar",series:e,options:o,height:"350"}):i.jsx("div",{className:"text-center text-gray-500 py-10",children:"표시할 데이터가 없습니다."})})}const ia=({rootDb:e})=>{const{user:t}=Ge(),{t:n}=we(),s=je(),o=fe(S=>{try{return Co(e)(S)}catch($){return console.warn("HomeChartForm selector error:",$),{labels:[],series:[],status:"idle",error:null}}}),[a,l]=r.useState(!0),[c,d]=r.useState("donut"),[f,u]=r.useState(!1),[m,h]=r.useState(null),[p,x]=r.useState([]),[b,N]=r.useState([]),[E,M]=r.useState({labels:[],series:[]}),v=["#6366f1","#3b82f6","#22c55e","#ef4444","#f97316","#eab308","#8b5cf6","#d946ef","#14b8a6","#a855f7"],R=[{value:"donut",label:n("donut_chart","도넛 차트")},{value:"bar",label:n("bar_chart","수평 막대 차트")},{value:"radar",label:n("radar_chart","레이더 차트")},{value:"verticalBar",label:n("vertical_bar_chart","수직 막대 차트")},{value:"semiDonut",label:n("semi_donut_chart","반원 도넛 차트")}],T=r.useCallback(S=>{let $=[];if(x(S||[]),S&&S.length>0){const _=S.filter(k=>k.parent==="root").sort((k,z)=>k.text.localeCompare(z.text)),W=(k,z)=>{const U=z.filter(L=>L.parent===k);let B=U.length;for(const L of U)B+=W(L.id,z);return B};$=_.map(k=>({node:k,count:W(k.id,S)})).filter(k=>k.count>=10);const D=$.map(k=>k.node.text),P=$.map(k=>k.count),y={labels:D,series:P};N($),M(y),s(hn({rootDb:e,data:y}))}else M({labels:[],series:[]}),s(hn({rootDb:e,data:{labels:[],series:[]}}));l(!1)},[e,s]),w=r.useCallback(async()=>{l(!0);const S=await na(e==="sheet"?"memo":e,t?.uid);T(S)},[e,t?.uid,T]);r.useEffect(()=>{t?.uid&&(o?.labels&&Array.isArray(o.labels)&&o.labels.length>0?(M(o),l(!1)):w())},[e,t?.uid,o?.labels?.length,w]);const g=S=>{if(S<0||S>=b.length)return;const $=b[S].node,_=$.text,W=(k,z)=>{const U=z.filter(L=>L.parent===k);let B=[...U];return U.forEach(L=>{B=[...B,...W(L.id,z)]}),B},P=W($.id,p).length,y=p.filter(k=>k.parent===$.id);h({label:_,value:P,items:y}),u(!0)},I=()=>i.jsx("div",{className:"w-full h-full flex justify-center items-center p-4",children:i.jsxs("div",{className:"w-full h-full bg-gray-200 dark:bg-zinc-800 rounded-md animate-pulse relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-1/4 left-1/4 w-1/2 h-1/2 bg-gray-300 dark:bg-zinc-700 rounded-full opacity-50"}),i.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-1/3 h-1/3 bg-gray-300 dark:bg-zinc-700 rounded-lg opacity-50"})]})}),C=()=>{w()},A=i.jsxs("div",{className:`HomeChartForm ${H.between}`,children:[i.jsx("div",{children:n("count_stats")}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("select",{value:c,onChange:S=>d(S.target.value),className:"rounded-md border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-200 focus:ring-indigo-500 focus:border-indigo-500 text-sm","aria-label":n("select_chart_type","차트 종류 선택"),children:R.map(S=>i.jsx("option",{value:S.value,children:S.label},S.value))}),i.jsx("button",{onClick:C,className:"rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors ","aria-label":n("reload_chart"),children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-600 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h5M20 20v-5h-5M4 4l1.5 1.5A9 9 0 0121.5 12M20 20l-1.5-1.5A9 9 0 012.5 12"})})})]})]});return i.jsxs("div",{className:`w-full justify-center ${H.card} `,children:[i.jsx("div",{className:"flex pl-6 py-4",children:i.jsx(No,{title:A})}),a?i.jsx(I,{}):i.jsxs("div",{className:"w-full justify-center items-center",children:[c==="donut"&&i.jsx(oa,{series:E.series,labels:E.labels,colors:v,onDataPointClick:g}),c==="bar"&&i.jsx(rs,{series:[{name:n("count"),data:E.series}],labels:E.labels,colors:v,onDataPointClick:g}),c==="radar"&&i.jsx(ra,{series:[{name:n("count"),data:E.series}],labels:E.labels,colors:v,onDataPointClick:g}),c==="verticalBar"&&i.jsx(la,{series:[{name:n("count"),data:E.series}],labels:E.labels,colors:v,onDataPointClick:g}),c==="semiDonut"&&i.jsx(aa,{series:E.series,labels:E.labels,colors:v,onDataPointClick:g})]}),i.jsx(sa,{isOpen:f,onClose:()=>u(!1),data:m})]})},ca=()=>{const[e,t]=r.useState({labels:[],series:[]}),[n,s]=r.useState(null),[o,a]=r.useState({isOpen:!1}),{t:l}=we();return r.useEffect(()=>{(async()=>{const d=await Yt("home_cnt");if(d){s(d);const u=Object.keys(d).sort().reverse().slice(0,10),m=u.map(p=>p.split("-").slice(1).join("-")),h=u.map(p=>Object.keys(d[p]).length);t({labels:m,series:h})}})()},[]),i.jsxs("div",{className:`w-full justify-center ${H.card} `,children:[i.jsx("div",{className:"flex pl-6 py-4",children:l("visitors.count")}),i.jsx(rs,{series:[{name:l("count"),data:e.series}],labels:e.labels,showDownload:!1,onDataPointSelection:(c,d,f)=>{const u=f.dataPointIndex;if(n&&u>-1){const h=Object.keys(n).sort().reverse()[u],p=n[h],x=Object.keys(p).join("<br/>");console.log("filteredNodes=",x),a({isOpen:!0,title:`${h} ${l("visitors.count")}`,message:x,onClose:()=>a({isOpen:!1})})}}}),i.jsx(ko,{...o})]})},ua=({rootDb:e})=>{const{user:t}=Ge(),{t:n}=we(),s=n(e==="memo"?"appMemo":"home_mng"),o=i.jsx("div",{className:`displayTitle text-center  ${H.text3Xl} ${H.textIndigo}`,children:s});return i.jsx(i.Fragment,{children:i.jsx(So,{title:o,className:"MemoMain mt-3 mb-5",children:i.jsxs("div",{className:"grid gird-cols-1 md:grid-cols-5 items-center gap-3",children:[t===null?i.jsx("p",{className:`${H.textRed500} ${H.textLgFontSemiboldLeft} ${H.mdColSpan3}`,children:n("login_used")}):i.jsx("p",{className:`${H.textGray600DarkZinc400} text-left ${H.mdColSpan3}`,dangerouslySetInnerHTML:{__html:n("memo_main_guide").replace(`
`,"<br/>")}}),i.jsx("div",{className:`w-full ${H.flexCenter} md:col-span-2`,children:i.jsx(cr,{})})]})})})},ps="carousel",gt="controller",da="navigation",ma="no-scroll",Kt="portal",fa="root",gs="toolbar",ha="download",Ye="fullscreen",Ke="thumbnails",In="zoom",Mt="loading",Tt="error",It="complete",pa="placeholder",ga=e=>`active-slide-${e}`,vs="fullsize",De="flex_center",va="no_scroll",xs="no_scroll_padding",Gt="slide",bs="slide_wrapper",xa="slide_wrapper_interactive",xe="prev",be="next",Ft="swipe",ze="close",ws="onPointerDown",ys="onPointerMove",Es="onPointerUp",Cs="onPointerLeave",Ns="onPointerCancel",qt="onKeyDown",ba="onKeyUp",Jt="onWheel",wa="Escape",ya="ArrowLeft",Ea="ArrowRight",Ca="button",it="icon",ks="contain",Ln="cover",Ss="Unknown action type",_s="yarl__";function te(...e){return[...e].filter(Boolean).join(" ")}function O(e){return`${_s}${e}`}function Z(e){return`--${_s}${e}`}function Me(e,t){return`${e}${t?`_${t}`:""}`}function Te(e){return t=>Me(e,t)}function _e(e,t){var n;return(n=e?.[t])!==null&&n!==void 0?n:t}function js(e,t,n){return _e(e,"{index} of {total}").replace(/\{index}/g,`${nn(n,t.length)+1}`).replace(/\{total}/g,`${t.length}`)}function Je(...e){return()=>{e.forEach(t=>{t()})}}function ie(e,t,n){return()=>{const s=r.useContext(n);if(!s)throw new Error(`${e} must be used within a ${t}.Provider`);return s}}function Qt(){return typeof window<"u"}function en(e,t=0){const n=10**t;return Math.round((e+Number.EPSILON)*n)/n}function ye(e){return e.type===void 0||e.type==="image"}function tn(e,t){return e.imageFit===Ln||e.imageFit!==ks&&t===Ln}function vt(e){return typeof e=="string"?Number.parseInt(e,10):e}function ct(e){if(typeof e=="number")return{pixel:e};if(typeof e=="string"){const t=vt(e);return e.endsWith("%")?{percent:t}:{pixel:t}}return{pixel:0}}function Na(e,t){const n=ct(t),s=n.percent!==void 0?e.width/100*n.percent:n.pixel;return{width:Math.max(e.width-2*s,0),height:Math.max(e.height-2*s,0)}}function ka(){return(Qt()?window?.devicePixelRatio:void 0)||1}function nn(e,t){return t>0?(e%t+t)%t:0}function sn(e){return e.length>0}function on(e,t){return e[nn(t,e.length)]}function Wt(e,t){return sn(e)?on(e,t):void 0}function Ms(e){return ye(e)?e.src:void 0}function xt(e,t,n){if(!n)return e;const{buttons:s,...o}=e,a=s.findIndex(c=>c===t),l=r.isValidElement(n)?r.cloneElement(n,{key:t},null):n;if(a>=0){const c=[...s];return c.splice(a,1,l),{buttons:c,...o}}return{buttons:[l,...s],...o}}function Ts(e,t,n=0){return Math.min(e.preload,Math.max(e.finite?t.length-1:Math.floor(t.length/2),n))}const Sa=Number(r.version.split(".")[0])>=19;function _a(e){return{inert:Sa?e:e?"":void 0}}function ja(e){e.scrollTop}const Ht={open:!1,close:()=>{},index:0,slides:[],render:{},plugins:[],toolbar:{buttons:[ze]},labels:{},animation:{fade:250,swipe:500,easing:{fade:"ease",swipe:"ease-out",navigation:"ease-in-out"}},carousel:{finite:!1,preload:2,padding:"16px",spacing:"30%",imageFit:ks,imageProps:{}},controller:{ref:null,focus:!0,aria:!1,touchAction:"none",closeOnPullUp:!1,closeOnPullDown:!1,closeOnBackdropClick:!1,preventDefaultWheelX:!0,preventDefaultWheelY:!1,disableSwipeNavigation:!1},portal:{},noScroll:{disabled:!1},on:{},styles:{},className:""};function he(e,t){return{name:e,component:t}}function Y(e,t){return{module:e,children:t}}function Is(e,t,n){return e.module.name===t?n(e):e.children?[Y(e.module,e.children.flatMap(s=>{var o;return(o=Is(s,t,n))!==null&&o!==void 0?o:[]}))]:[e]}function Le(e,t,n){return e.flatMap(s=>{var o;return(o=Is(s,t,n))!==null&&o!==void 0?o:[]})}function Ma(e,t=[],n=[]){let s=e;const o=p=>{const x=[...s];for(;x.length>0;){const b=x.pop();if(b?.module.name===p)return!0;b?.children&&x.push(...b.children)}return!1},a=(p,x)=>{if(p===""){s=[Y(x,s)];return}s=Le(s,p,b=>[Y(x,[b])])},l=(p,x)=>{s=Le(s,p,b=>[Y(b.module,[Y(x,b.children)])])},c=(p,x,b)=>{s=Le(s,p,N=>{var E;return[Y(N.module,[...b?[Y(x)]:[],...(E=N.children)!==null&&E!==void 0?E:[],...b?[]:[Y(x)]])]})},d=(p,x,b)=>{s=Le(s,p,N=>[...b?[Y(x)]:[],N,...b?[]:[Y(x)]])},f=p=>{l(gt,p)},u=(p,x)=>{s=Le(s,p,b=>[Y(x,b.children)])},m=p=>{s=Le(s,p,x=>x.children)},h=p=>{n.push(p)};return t.forEach(p=>{p({contains:o,addParent:a,append:l,addChild:c,addSibling:d,addModule:f,replace:u,remove:m,augment:h})}),{config:s,augmentation:p=>n.reduce((x,b)=>b(x),p)}}const Ls=r.createContext(null),Ps=ie("useA11yContext","A11yContext",Ls);function Ta({children:e}){const[t,n]=r.useState(!1),[s,o]=r.useState(!1),a=r.useMemo(()=>({focusWithin:t,trackFocusWithin:(c,d)=>{const f=u=>m=>{var h;m.currentTarget.contains(m.relatedTarget)||n(u),(h=u?c:d)===null||h===void 0||h(m)};return{onFocus:f(!0),onBlur:f(!1)}},autoPlaying:s,setAutoPlaying:o}),[t,s]);return r.createElement(Ls.Provider,{value:a},e)}const Rs=r.createContext(null),Ae=ie("useDocument","DocumentContext",Rs);function Ia({nodeRef:e,children:t}){const n=r.useMemo(()=>{const s=a=>{var l;return((l=a||e.current)===null||l===void 0?void 0:l.ownerDocument)||document};return{getOwnerDocument:s,getOwnerWindow:a=>{var l;return((l=s(a))===null||l===void 0?void 0:l.defaultView)||window}}},[e]);return r.createElement(Rs.Provider,{value:n},t)}const Os=r.createContext(null),Qe=ie("useEvents","EventsContext",Os);function La({children:e}){const[t]=r.useState({});r.useEffect(()=>()=>{Object.keys(t).forEach(s=>delete t[s])},[t]);const n=r.useMemo(()=>{const s=(l,c)=>{var d;(d=t[l])===null||d===void 0||d.splice(0,t[l].length,...t[l].filter(f=>f!==c))};return{publish:(...[l,c])=>{var d;(d=t[l])===null||d===void 0||d.forEach(f=>f(c))},subscribe:(l,c)=>(t[l]||(t[l]=[]),t[l].push(c),()=>s(l,c)),unsubscribe:s}},[t]);return r.createElement(Os.Provider,{value:n},e)}const Ds=r.createContext(null),G=ie("useLightboxProps","LightboxPropsContext",Ds);function zs({children:e,...t}){return r.createElement(Ds.Provider,{value:t},e)}const As=r.createContext(null),ce=ie("useLightboxState","LightboxStateContext",As),$s=r.createContext(null),Pa=ie("useLightboxDispatch","LightboxDispatchContext",$s);function Ra(e,t){switch(t.type){case"swipe":{const{slides:n}=e,s=t?.increment||0,o=e.globalIndex+s,a=nn(o,n.length),l=Wt(n,a),c=s||t.duration!==void 0?{increment:s,duration:t.duration,easing:t.easing}:void 0;return{slides:n,currentIndex:a,globalIndex:o,currentSlide:l,animation:c}}case"update":return t.slides!==e.slides||t.index!==e.currentIndex?{slides:t.slides,currentIndex:t.index,globalIndex:t.index,currentSlide:Wt(t.slides,t.index)}:e;default:throw new Error(Ss)}}function Oa({slides:e,index:t,children:n}){const[s,o]=r.useReducer(Ra,{slides:e,currentIndex:t,globalIndex:t,currentSlide:Wt(e,t)});r.useEffect(()=>{o({type:"update",slides:e,index:t})},[e,t]);const a=r.useMemo(()=>({...s,state:s,dispatch:o}),[s,o]);return r.createElement($s.Provider,{value:o},r.createElement(As.Provider,{value:a},n))}const Fs=r.createContext(null),bt=ie("useTimeouts","TimeoutsContext",Fs);function Da({children:e}){const[t]=r.useState([]);r.useEffect(()=>()=>{t.forEach(s=>window.clearTimeout(s)),t.splice(0,t.length)},[t]);const n=r.useMemo(()=>{const s=l=>{t.splice(0,t.length,...t.filter(c=>c!==l))};return{setTimeout:(l,c)=>{const d=window.setTimeout(()=>{s(d),l()},c);return t.push(d),d},clearTimeout:l=>{l!==void 0&&(s(l),window.clearTimeout(l))}}},[t]);return r.createElement(Fs.Provider,{value:n},e)}const $e=r.forwardRef(function({label:t,className:n,icon:s,renderIcon:o,onClick:a,style:l,...c},d){const{styles:f,labels:u}=G(),m=_e(u,t);return r.createElement("button",{ref:d,type:"button",title:m,"aria-label":m,className:te(O(Ca),n),onClick:a,style:{...l,...f.button},...c},o?o():r.createElement(s,{className:O(it),style:f.icon}))});function Ws(e,t){const n=s=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24","aria-hidden":"true",focusable:"false",...s},t);return n.displayName=e,n}function se(e,t){return Ws(e,r.createElement("g",{fill:"currentColor"},r.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),t))}function za(e,t){return Ws(e,r.createElement(r.Fragment,null,r.createElement("defs",null,r.createElement("mask",{id:"strike"},r.createElement("path",{d:"M0 0h24v24H0z",fill:"white"}),r.createElement("path",{d:"M0 0L24 24",stroke:"black",strokeWidth:4}))),r.createElement("path",{d:"M0.70707 2.121320L21.878680 23.292883",stroke:"currentColor",strokeWidth:2}),r.createElement("g",{fill:"currentColor",mask:"url(#strike)"},r.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),t)))}const Aa=se("Close",r.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),$a=se("Previous",r.createElement("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})),Fa=se("Next",r.createElement("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})),Wa=se("Loading",r.createElement(r.Fragment,null,Array.from({length:8}).map((e,t,n)=>r.createElement("line",{key:t,x1:"12",y1:"6.5",x2:"12",y2:"1.8",strokeLinecap:"round",strokeWidth:"2.6",stroke:"currentColor",strokeOpacity:1/n.length*(t+1),transform:`rotate(${360/n.length*t}, 12, 12)`})))),Ha=se("Error",r.createElement("path",{d:"M21.9,21.9l-8.49-8.49l0,0L3.59,3.59l0,0L2.1,2.1L0.69,3.51L3,5.83V19c0,1.1,0.9,2,2,2h13.17l2.31,2.31L21.9,21.9z M5,18 l3.5-4.5l2.5,3.01L12.17,15l3,3H5z M21,18.17L5.83,3H19c1.1,0,2,0.9,2,2V18.17z"})),le=Qt()?r.useLayoutEffect:r.useEffect;function rn(){const[e,t]=r.useState(!1);return r.useEffect(()=>{var n,s;const o=(n=window.matchMedia)===null||n===void 0?void 0:n.call(window,"(prefers-reduced-motion: reduce)");t(o?.matches);const a=l=>t(l.matches);return(s=o?.addEventListener)===null||s===void 0||s.call(o,"change",a),()=>{var l;return(l=o?.removeEventListener)===null||l===void 0?void 0:l.call(o,"change",a)}},[]),e}function Va(e){let t=0,n=0,s=0;const a=window.getComputedStyle(e).transform.match(/matrix.*\((.+)\)/);if(a){const l=a[1].split(",").map(vt);l.length===6?(t=l[4],n=l[5]):l.length===16&&(t=l[12],n=l[13],s=l[14])}return{x:t,y:n,z:s}}function Vt(e,t){const n=r.useRef(void 0),s=r.useRef(void 0),o=rn();return le(()=>{var a,l,c;if(e.current&&n.current!==void 0&&!o){const{keyframes:d,duration:f,easing:u,onfinish:m}=t(n.current,e.current.getBoundingClientRect(),Va(e.current))||{};if(d&&f){(a=s.current)===null||a===void 0||a.cancel(),s.current=void 0;try{s.current=(c=(l=e.current).animate)===null||c===void 0?void 0:c.call(l,d,{duration:f,easing:u})}catch(h){console.error(h)}s.current&&(s.current.onfinish=()=>{s.current=void 0,m?.()})}}n.current=void 0}),{prepareAnimation:a=>{n.current=a},isAnimationPlaying:()=>{var a;return((a=s.current)===null||a===void 0?void 0:a.playState)==="running"}}}function Hs(){const e=r.useRef(null),t=r.useRef(void 0),[n,s]=r.useState();return{setContainerRef:r.useCallback(a=>{e.current=a,t.current&&(t.current.disconnect(),t.current=void 0);const l=()=>{if(a){const c=window.getComputedStyle(a),d=f=>parseFloat(f)||0;s({width:Math.round(a.clientWidth-d(c.paddingLeft)-d(c.paddingRight)),height:Math.round(a.clientHeight-d(c.paddingTop)-d(c.paddingBottom))})}else s(void 0)};l(),a&&typeof ResizeObserver<"u"&&(t.current=new ResizeObserver(l),t.current.observe(a))},[]),containerRef:e,containerRect:n}}function at(){const e=r.useRef(void 0),{setTimeout:t,clearTimeout:n}=bt();return r.useCallback((s,o)=>{n(e.current),e.current=t(s,o>0?o:0)},[t,n])}function V(e){const t=r.useRef(e);return le(()=>{t.current=e}),r.useCallback((...n)=>{var s;return(s=t.current)===null||s===void 0?void 0:s.call(t,...n)},[])}function Pn(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function Bt(e,t){return r.useMemo(()=>e==null&&t==null?null:n=>{Pn(e,n),Pn(t,n)},[e,t])}function Ba(e,t=!1){const n=r.useRef(!1);le(()=>{t&&n.current&&(n.current=!1,e())},[t,e]);const s=r.useCallback(()=>{n.current=!0},[]),o=r.useCallback(()=>{n.current=!1},[]);return{onFocus:s,onBlur:o}}function wt(){const[e,t]=r.useState(!1);return le(()=>{t(window.getComputedStyle(window.document.documentElement).direction==="rtl")},[]),e}function Vs(){const[e]=r.useState({}),t=r.useCallback((o,a)=>{var l;(l=e[o])===null||l===void 0||l.forEach(c=>{a.isPropagationStopped()||c(a)})},[e]),n=r.useMemo(()=>({onPointerDown:o=>t(ws,o),onPointerMove:o=>t(ys,o),onPointerUp:o=>t(Es,o),onPointerLeave:o=>t(Cs,o),onPointerCancel:o=>t(Ns,o),onKeyDown:o=>t(qt,o),onKeyUp:o=>t(ba,o),onWheel:o=>t(Jt,o)}),[t]),s=r.useCallback((o,a)=>(e[o]||(e[o]=[]),e[o].unshift(a),()=>{const l=e[o];l&&l.splice(0,l.length,...l.filter(c=>c!==a))}),[e]);return{registerSensors:n,subscribeSensors:s}}function Rn(e,t){const n=r.useRef(0),s=at(),o=V((...a)=>{n.current=Date.now(),e(a)});return r.useCallback((...a)=>{s(()=>{o(a)},t-(Date.now()-n.current))},[t,o,s])}const Lt=Te("slide"),Pt=Te("slide_image");function ke({slide:e,offset:t,render:n,rect:s,imageFit:o,imageProps:a,onClick:l,onLoad:c,onError:d,style:f}){var u,m,h,p,x,b,N,E;const[M,v]=r.useState(Mt),{publish:R}=Qe(),{setTimeout:T}=bt(),w=r.useRef(null);r.useEffect(()=>{t===0&&R(ga(M))},[t,M,R]);const g=V(L=>{("decode"in L?L.decode():Promise.resolve()).catch(()=>{}).then(()=>{L.parentNode&&(v(It),T(()=>{c?.(L)},0))})}),I=r.useCallback(L=>{w.current=L,L?.complete&&g(L)},[g]),C=r.useCallback(L=>{g(L.currentTarget)},[g]),A=V(()=>{v(Tt),d?.()}),S=tn(e,o),$=(L,q)=>Number.isFinite(L)?L:q,_=$(Math.max(...((m=(u=e.srcSet)===null||u===void 0?void 0:u.map(L=>L.width))!==null&&m!==void 0?m:[]).concat(e.width?[e.width]:[]).filter(Boolean)),((h=w.current)===null||h===void 0?void 0:h.naturalWidth)||0),W=$(Math.max(...((x=(p=e.srcSet)===null||p===void 0?void 0:p.map(L=>L.height))!==null&&x!==void 0?x:[]).concat(e.height?[e.height]:[]).filter(Boolean)),((b=w.current)===null||b===void 0?void 0:b.naturalHeight)||0),D=_&&W?{maxWidth:`min(${_}px, 100%)`,maxHeight:`min(${W}px, 100%)`}:{maxWidth:"100%",maxHeight:"100%"},P=(N=e.srcSet)===null||N===void 0?void 0:N.sort((L,q)=>L.width-q.width).map(L=>`${L.src} ${L.width}w`).join(", "),y=()=>s&&!S&&e.width&&e.height?s.height/e.height*e.width:Number.MAX_VALUE,k=P&&s&&Qt()?`${Math.round(Math.min(y(),s.width))}px`:void 0,{style:z,className:U,...B}=a||{};return r.createElement(r.Fragment,null,r.createElement("img",{ref:I,onLoad:C,onError:A,onClick:l,draggable:!1,className:te(O(Pt()),S&&O(Pt("cover")),M!==It&&O(Pt("loading")),U),style:{...D,...f,...z},...B,alt:(E=e.alt)!==null&&E!==void 0?E:"",sizes:k,srcSet:P,src:e.src}),M!==It&&r.createElement("div",{className:O(Lt(pa))},M===Mt&&(n?.iconLoading?n.iconLoading():r.createElement(Wa,{className:te(O(it),O(Lt(Mt)))})),M===Tt&&(n?.iconError?n.iconError():r.createElement(Ha,{className:te(O(it),O(Lt(Tt)))}))))}const Za=r.forwardRef(function({className:t,children:n,onFocus:s,onBlur:o,...a},l){const c=r.useRef(null),{trackFocusWithin:d}=Ps();return r.createElement(Ia,{nodeRef:c},r.createElement("div",{ref:Bt(l,c),className:te(O("root"),t),...d(s,o),...a},n))});var J;(function(e){e[e.NONE=0]="NONE",e[e.SWIPE=1]="SWIPE",e[e.PULL=2]="PULL",e[e.ANIMATION=3]="ANIMATION"})(J||(J={}));function Bs(e,t,n,s,o){r.useEffect(()=>o?()=>{}:Je(e(ws,t),e(ys,n),e(Es,s),e(Cs,s),e(Ns,s)),[e,t,n,s,o])}var ae;(function(e){e[e.NONE=0]="NONE",e[e.SWIPE=1]="SWIPE",e[e.PULL=2]="PULL"})(ae||(ae={}));const Rt=30;function Ua({disableSwipeNavigation:e,closeOnBackdropClick:t},n,s,o,a,l,c,d,f,u,m,h,p,x,b,N){const E=r.useRef(0),M=r.useRef([]),v=r.useRef(void 0),R=r.useRef(0),T=r.useRef(ae.NONE),w=r.useCallback(_=>{v.current===_.pointerId&&(v.current=void 0,T.current=ae.NONE);const W=M.current;W.splice(0,W.length,...W.filter(D=>D.pointerId!==_.pointerId))},[]),g=r.useCallback(_=>{w(_),_.persist(),M.current.push(_)},[w]),I=r.useCallback(_=>M.current.find(({pointerId:W})=>_.pointerId===W),[]),C=V(_=>{g(_)}),A=(_,W)=>m&&_>W||u&&_<-W,S=V(_=>{const W=I(_);if(W)if(v.current===_.pointerId){const D=Date.now()-R.current,P=E.current;T.current===ae.SWIPE?Math.abs(P)>.3*o||Math.abs(P)>5&&D<a?d(P,D):f(P):T.current===ae.PULL&&(A(P,2*Rt)?x(P,D):b(P)),E.current=0,T.current=ae.NONE}else{const{target:D}=_;t&&D instanceof HTMLElement&&D===W.target&&(D.classList.contains(O(Gt))||D.classList.contains(O(bs)))&&N()}w(_)}),$=V(_=>{const W=I(_);if(W){const D=v.current===_.pointerId;if(_.buttons===0){D&&E.current!==0?S(_):w(W);return}const P=_.clientX-W.clientX,y=_.clientY-W.clientY;if(v.current===void 0){const k=z=>{g(_),v.current=_.pointerId,R.current=Date.now(),T.current=z};Math.abs(P)>Math.abs(y)&&Math.abs(P)>Rt&&s(P)?e||(k(ae.SWIPE),l()):Math.abs(y)>Math.abs(P)&&A(y,Rt)&&(k(ae.PULL),h())}else D&&(T.current===ae.SWIPE?(E.current=P,c(P)):T.current===ae.PULL&&(E.current=y,p(y)))}});Bs(n,C,$,S)}function Xa({preventDefaultWheelX:e,preventDefaultWheelY:t}){const n=r.useRef(null),s=V(o=>{const a=Math.abs(o.deltaX)>Math.abs(o.deltaY);(a&&e||!a&&t||o.ctrlKey)&&o.preventDefault()});return r.useCallback(o=>{var a;o?o.addEventListener("wheel",s,{passive:!1}):(a=n.current)===null||a===void 0||a.removeEventListener("wheel",s),n.current=o},[s])}function Ya(e,t,n,s,o,a,l,c,d){const f=r.useRef(0),u=r.useRef(0),m=r.useRef(void 0),h=r.useRef(void 0),p=r.useRef(0),x=r.useRef(void 0),b=r.useRef(0),{setTimeout:N,clearTimeout:E}=bt(),M=r.useCallback(()=>{m.current&&(E(m.current),m.current=void 0)},[E]),v=r.useCallback(()=>{h.current&&(E(h.current),h.current=void 0)},[E]),R=V(()=>{e!==J.SWIPE&&(f.current=0,b.current=0,M(),v())});r.useEffect(R,[e,R]);const T=V(g=>{h.current=void 0,f.current===g&&d(f.current)}),w=V(g=>{if(g.ctrlKey||Math.abs(g.deltaY)>Math.abs(g.deltaX))return;const I=C=>{p.current=C,E(x.current),x.current=C>0?N(()=>{p.current=0,x.current=void 0},300):void 0};if(e===J.NONE){if(Math.abs(g.deltaX)<=1.2*Math.abs(p.current)){I(g.deltaX);return}if(!n(-g.deltaX))return;if(u.current+=g.deltaX,M(),Math.abs(u.current)>30)u.current=0,I(0),b.current=Date.now(),a();else{const C=u.current;m.current=N(()=>{m.current=void 0,C===u.current&&(u.current=0)},o)}}else if(e===J.SWIPE){let C=f.current-g.deltaX;if(C=Math.min(Math.abs(C),s)*Math.sign(C),f.current=C,l(C),v(),Math.abs(C)>.2*s){I(g.deltaX),c(C,Date.now()-b.current);return}h.current=N(()=>T(C),2*o)}else I(g.deltaX)});r.useEffect(()=>t(Jt,w),[t,w])}const On=Te("container"),Zs=r.createContext(null),ve=ie("useController","ControllerContext",Zs);function Ka({children:e,...t}){var n;const{carousel:s,animation:o,controller:a,on:l,styles:c,render:d}=t,{closeOnPullUp:f,closeOnPullDown:u,preventDefaultWheelX:m,preventDefaultWheelY:h}=a,[p,x]=r.useState(),b=ce(),N=Pa(),[E,M]=r.useState(J.NONE),v=r.useRef(0),R=r.useRef(0),T=r.useRef(1),{registerSensors:w,subscribeSensors:g}=Vs(),{subscribe:I,publish:C}=Qe(),A=at(),S=at(),$=at(),{containerRef:_,setContainerRef:W,containerRect:D}=Hs(),P=Bt(Xa({preventDefaultWheelX:m,preventDefaultWheelY:h}),W),y=r.useRef(null),k=Bt(y,void 0),{getOwnerDocument:z}=Ae(),U=wt(),B=j=>(U?-1:1)*(typeof j=="number"?j:1),L=V(()=>{var j;return(j=_.current)===null||j===void 0?void 0:j.focus()}),q=V(()=>t),re=V(()=>b),ne=r.useCallback(j=>C(xe,j),[C]),Ee=r.useCallback(j=>C(be,j),[C]),pe=r.useCallback(()=>C(ze),[C]),Fe=j=>!(s.finite&&(B(j)>0&&b.currentIndex===0||B(j)<0&&b.currentIndex===b.slides.length-1)),We=j=>{var X;v.current=j,(X=_.current)===null||X===void 0||X.style.setProperty(Z("swipe_offset"),`${Math.round(j)}px`)},He=j=>{var X,Q;R.current=j,T.current=(()=>{const Be=u&&j>0?j:f&&j<0?-j:0;return Math.min(Math.max(en(1-Be/60*(1-.5),2),.5),1)})(),(X=_.current)===null||X===void 0||X.style.setProperty(Z("pull_offset"),`${Math.round(j)}px`),(Q=_.current)===null||Q===void 0||Q.style.setProperty(Z("pull_opacity"),`${T.current}`)},{prepareAnimation:F}=Vt(y,(j,X,Q)=>{if(y.current&&D)return{keyframes:[{transform:`translate(0, ${j.rect.y-X.y+Q.y}px)`,opacity:j.opacity},{transform:"translate(0, 0)",opacity:1}],duration:j.duration,easing:o.easing.fade}}),ge=(j,X)=>{if(f||u){He(j);let Q=0;y.current&&(Q=o.fade*(X?2:1),F({rect:y.current.getBoundingClientRect(),opacity:T.current,duration:Q})),$(()=>{He(0),M(J.NONE)},Q),M(J.ANIMATION),X||pe()}},{prepareAnimation:so,isAnimationPlaying:oo}=Vt(y,(j,X,Q)=>{var ue;if(y.current&&D&&(!((ue=b.animation)===null||ue===void 0)&&ue.duration)){const oe=ct(s.spacing),Be=(oe.percent?oe.percent*D.width/100:oe.pixel)||0;return{keyframes:[{transform:`translate(${B(b.globalIndex-j.index)*(D.width+Be)+j.rect.x-X.x+Q.x}px, 0)`},{transform:"translate(0, 0)"}],duration:b.animation.duration,easing:b.animation.easing}}}),Ve=V(j=>{var X,Q;const ue=j.offset||0,oe=ue?o.swipe:(X=o.navigation)!==null&&X!==void 0?X:o.swipe,Be=!ue&&!oo()?o.easing.navigation:o.easing.swipe;let{direction:et}=j;const tt=(Q=j.count)!==null&&Q!==void 0?Q:1;let Et=J.ANIMATION,de=oe*tt;if(!et){const Ze=D?.width,mn=j.duration||0,Nt=Ze?oe/Ze*Math.abs(ue):oe;tt!==0?(mn<Nt?de=de/Nt*Math.max(mn,Nt/5):Ze&&(de=oe/Ze*(Ze-Math.abs(ue))),et=B(ue)>0?xe:be):de=oe/2}let Ct=0;et===xe?Fe(B(1))?Ct=-tt:(Et=J.NONE,de=oe):et===be&&(Fe(B(-1))?Ct=tt:(Et=J.NONE,de=oe)),de=Math.round(de),S(()=>{We(0),M(J.NONE)},de),y.current&&so({rect:y.current.getBoundingClientRect(),index:b.globalIndex}),M(Et),C(Ft,{type:"swipe",increment:Ct,duration:de,easing:Be})});r.useEffect(()=>{var j,X;!((j=b.animation)===null||j===void 0)&&j.increment&&(!((X=b.animation)===null||X===void 0)&&X.duration)&&A(()=>N({type:"swipe",increment:0}),b.animation.duration)},[b.animation,N,A]);const cn=[g,Fe,D?.width||0,o.swipe,()=>M(J.SWIPE),j=>We(j),(j,X)=>Ve({offset:j,duration:X,count:1}),j=>Ve({offset:j,count:0})],ro=[()=>{u&&M(J.PULL)},j=>He(j),j=>ge(j),j=>ge(j,!0)];Ua(a,...cn,f,u,...ro,pe),Ya(E,...cn);const un=V(()=>{a.focus&&z().querySelector(`.${O(Kt)} .${O(On())}`)&&L()});r.useEffect(un,[un]);const dn=V(()=>{var j;(j=l.view)===null||j===void 0||j.call(l,{index:b.currentIndex})});r.useEffect(dn,[b.globalIndex,dn]),r.useEffect(()=>Je(I(xe,j=>Ve({direction:xe,...j})),I(be,j=>Ve({direction:be,...j})),I(Ft,j=>N(j))),[I,Ve,N]);const ao=r.useMemo(()=>({prev:ne,next:Ee,close:pe,focus:L,slideRect:D?Na(D,s.padding):{width:0,height:0},containerRect:D||{width:0,height:0},subscribeSensors:g,containerRef:_,setCarouselRef:k,toolbarWidth:p,setToolbarWidth:x}),[ne,Ee,pe,L,g,D,_,k,p,x,s.padding]);return r.useImperativeHandle(a.ref,()=>({prev:ne,next:Ee,close:pe,focus:L,getLightboxProps:q,getLightboxState:re}),[ne,Ee,pe,L,q,re]),r.createElement("div",{ref:P,className:te(O(On()),O(De)),style:{...E===J.SWIPE?{[Z("swipe_offset")]:`${Math.round(v.current)}px`}:null,...E===J.PULL?{[Z("pull_offset")]:`${Math.round(R.current)}px`,[Z("pull_opacity")]:`${T.current}`}:null,...a.touchAction!=="none"?{[Z("controller_touch_action")]:a.touchAction}:null,...c.container},tabIndex:-1,...w},D&&r.createElement(Zs.Provider,{value:ao},e,(n=d.controls)===null||n===void 0?void 0:n.call(d)))}const Ga=he(gt,Ka);function Ce(e){return Me(ps,e)}function Dn(e){return Me(Gt,e)}function qa({slide:e,offset:t}){const n=r.useRef(null),{currentIndex:s,slides:o}=ce(),{slideRect:a,focus:l}=ve(),{render:c,carousel:{imageFit:d,imageProps:f},on:{click:u},styles:{slide:m},labels:h}=G(),{getOwnerDocument:p}=Ae(),x=t!==0;r.useEffect(()=>{var N;x&&(!((N=n.current)===null||N===void 0)&&N.contains(p().activeElement))&&l()},[x,l,p]);const b=()=>{var N,E,M,v;let R=(N=c.slide)===null||N===void 0?void 0:N.call(c,{slide:e,offset:t,rect:a});return!R&&ye(e)&&(R=r.createElement(ke,{slide:e,offset:t,render:c,rect:a,imageFit:d,imageProps:f,onClick:x?void 0:()=>u?.({index:s})})),R?r.createElement(r.Fragment,null,(E=c.slideHeader)===null||E===void 0?void 0:E.call(c,{slide:e}),((M=c.slideContainer)!==null&&M!==void 0?M:(({children:T})=>T))({slide:e,children:R}),(v=c.slideFooter)===null||v===void 0?void 0:v.call(c,{slide:e})):null};return r.createElement("div",{ref:n,className:te(O(Dn()),!x&&O(Dn("current")),O(De)),..._a(x),style:m,role:"group","aria-roledescription":_e(h,"Slide"),"aria-label":js(h,o,s+t)},b())}function Ja(){const e=G().styles.slide;return r.createElement("div",{className:O(Gt),style:e})}function Qa({carousel:e,labels:t}){const{slides:n,currentIndex:s,globalIndex:o}=ce(),{setCarouselRef:a}=ve(),{autoPlaying:l,focusWithin:c}=Ps(),d=ct(e.spacing),f=ct(e.padding),u=Ts(e,n,1),m=[];if(sn(n))for(let h=s-u;h<=s+u;h+=1){const p=on(n,h),x=o-s+h,b=e.finite&&(h<0||h>n.length-1);m.push(b?{key:x}:{key:[`${x}`,Ms(p)].filter(Boolean).join("|"),offset:h-s,slide:p})}return r.createElement("div",{ref:a,className:te(O(Ce()),m.length>0&&O(Ce("with_slides"))),style:{[`${Z(Ce("slides_count"))}`]:m.length,[`${Z(Ce("spacing_px"))}`]:d.pixel||0,[`${Z(Ce("spacing_percent"))}`]:d.percent||0,[`${Z(Ce("padding_px"))}`]:f.pixel||0,[`${Z(Ce("padding_percent"))}`]:f.percent||0},role:"region","aria-live":l&&!c?"off":"polite","aria-roledescription":_e(t,"Carousel"),"aria-label":_e(t,"Photo gallery")},m.map(({key:h,slide:p,offset:x})=>p?r.createElement(qa,{key:h,slide:p,offset:x}):r.createElement(Ja,{key:h})))}const el=he(ps,Qa);function Us(){const{carousel:e}=G(),{slides:t,currentIndex:n}=ce(),s=t.length===0||e.finite&&n===0,o=t.length===0||e.finite&&n===t.length-1;return{prevDisabled:s,nextDisabled:o}}function Xs(e){var t;const n=wt(),{publish:s}=Qe(),{animation:o}=G(),{prevDisabled:a,nextDisabled:l}=Us(),c=((t=o.navigation)!==null&&t!==void 0?t:o.swipe)/2,d=Rn(()=>s(xe),c),f=Rn(()=>s(be),c),u=V(m=>{switch(m.key){case wa:s(ze);break;case ya:(n?l:a)||(n?f:d)();break;case Ea:(n?a:l)||(n?d:f)();break}});r.useEffect(()=>e(qt,u),[e,u])}function zn({label:e,icon:t,renderIcon:n,action:s,onClick:o,disabled:a,style:l}){return r.createElement($e,{label:e,icon:t,renderIcon:n,className:O(`navigation_${s}`),disabled:a,onClick:o,style:l,...Ba(ve().focus,a)})}function tl({render:{buttonPrev:e,buttonNext:t,iconPrev:n,iconNext:s},styles:o}){const{prev:a,next:l,subscribeSensors:c}=ve(),{prevDisabled:d,nextDisabled:f}=Us();return Xs(c),r.createElement(r.Fragment,null,e?e():r.createElement(zn,{label:"Previous",action:xe,icon:$a,renderIcon:n,style:o.navigationPrev,disabled:d,onClick:a}),t?t():r.createElement(zn,{label:"Next",action:be,icon:Fa,renderIcon:s,style:o.navigationNext,disabled:f,onClick:l}))}const nl=he(da,tl),An=O(va),sl=O(xs);function ol(e){return"style"in e}function $n(e,t,n){const s=window.getComputedStyle(e),o=n?"padding-left":"padding-right",a=n?s.paddingLeft:s.paddingRight,l=e.style.getPropertyValue(o);return e.style.setProperty(o,`${(vt(a)||0)+t}px`),()=>{l?e.style.setProperty(o,l):e.style.removeProperty(o)}}function rl({noScroll:{disabled:e},children:t}){const n=wt(),{getOwnerDocument:s,getOwnerWindow:o}=Ae();return r.useEffect(()=>{if(e)return()=>{};const a=[],l=o(),{body:c,documentElement:d}=s(),f=Math.round(l.innerWidth-d.clientWidth);if(f>0){a.push($n(c,f,n));const u=c.getElementsByTagName("*");for(let m=0;m<u.length;m+=1){const h=u[m];ol(h)&&l.getComputedStyle(h).getPropertyValue("position")==="fixed"&&!h.classList.contains(sl)&&a.push($n(h,f,n))}}return c.classList.add(An),()=>{c.classList.remove(An),a.forEach(u=>u())}},[n,e,s,o]),r.createElement(r.Fragment,null,t)}const al=he(ma,rl);function Fn(e){return Me(Kt,e)}function Wn(e,t,n){const s=e.getAttribute(t);return e.setAttribute(t,n),()=>{s?e.setAttribute(t,s):e.removeAttribute(t)}}function ll({children:e,animation:t,styles:n,className:s,on:o,portal:a,close:l,labels:c}){const[d,f]=r.useState(!1),[u,m]=r.useState(!1),h=r.useRef([]),p=r.useRef(null),{setTimeout:x}=bt(),{subscribe:b}=Qe(),E=rn()?0:t.fade;r.useEffect(()=>(f(!0),()=>{f(!1),m(!1)}),[]);const M=V(()=>{h.current.forEach(w=>w()),h.current=[]}),v=V(()=>{var w;m(!1),M(),(w=o.exiting)===null||w===void 0||w.call(o),x(()=>{var g;(g=o.exited)===null||g===void 0||g.call(o),l()},E)});r.useEffect(()=>b(ze,v),[b,v]);const R=V(w=>{var g,I,C;ja(w),m(!0),(g=o.entering)===null||g===void 0||g.call(o);const A=(C=(I=w.parentNode)===null||I===void 0?void 0:I.children)!==null&&C!==void 0?C:[];for(let S=0;S<A.length;S+=1){const $=A[S];["TEMPLATE","SCRIPT","STYLE"].indexOf($.tagName)===-1&&$!==w&&(h.current.push(Wn($,"inert","")),h.current.push(Wn($,"aria-hidden","true")))}h.current.push(()=>{var S,$;($=(S=p.current)===null||S===void 0?void 0:S.focus)===null||$===void 0||$.call(S)}),x(()=>{var S;(S=o.entered)===null||S===void 0||S.call(o)},E)}),T=r.useCallback(w=>{w?R(w):M()},[R,M]);return d?ar.createPortal(r.createElement(Za,{ref:T,className:te(s,O(Fn()),O(xs),u&&O(Fn("open"))),"aria-modal":!0,role:"dialog","aria-label":_e(c,"Lightbox"),style:{...t.fade!==Ht.animation.fade?{[Z("fade_animation_duration")]:`${E}ms`}:null,...t.easing.fade!==Ht.animation.easing.fade?{[Z("fade_animation_timing_function")]:t.easing.fade}:null,...n.root},onFocus:w=>{p.current||(p.current=w.relatedTarget)}},e),a.root||document.body):null}const il=he(Kt,ll);function cl({children:e}){return r.createElement(r.Fragment,null,e)}const ul=he(fa,cl);function dl(e){return Me(gs,e)}function ml({toolbar:{buttons:e},render:{buttonClose:t,iconClose:n},styles:s}){const{close:o,setToolbarWidth:a}=ve(),{setContainerRef:l,containerRect:c}=Hs();le(()=>{a(c?.width)},[a,c?.width]);const d=()=>t?t():r.createElement($e,{key:ze,label:"Close",icon:Aa,renderIcon:n,onClick:o});return r.createElement("div",{ref:l,style:s.toolbar,className:O(dl())},e?.map(f=>f===ze?d():f))}const fl=he(gs,ml);function Ys(e,t){var n;return r.createElement(e.module.component,{key:e.module.name,...t},(n=e.children)===null||n===void 0?void 0:n.map(s=>Ys(s,t)))}function hl(e,t={}){const{easing:n,...s}=e,{easing:o,...a}=t;return{easing:{...n,...o},...s,...a}}function pl({carousel:e,animation:t,render:n,toolbar:s,controller:o,noScroll:a,on:l,plugins:c,slides:d,index:f,...u}){const{animation:m,carousel:h,render:p,toolbar:x,controller:b,noScroll:N,on:E,slides:M,index:v,plugins:R,...T}=Ht,{config:w,augmentation:g}=Ma([Y(il,[Y(al,[Y(Ga,[Y(el),Y(fl),Y(nl)])])])],c||R),I=g({animation:hl(m,t),carousel:{...h,...e},render:{...p,...n},toolbar:{...x,...s},controller:{...b,...o},noScroll:{...N,...a},on:{...E,...l},...T,...u});return I.open?r.createElement(zs,{...I},r.createElement(Oa,{slides:d||M,index:vt(f||v)},r.createElement(Da,null,r.createElement(La,null,r.createElement(Ta,null,Ys(Y(ul,w),I)))))):null}const gl={download:void 0},Ks=e=>({...gl,...e});function vl(e,t){const n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=()=>{Zt(n.response,t)},n.onerror=()=>{console.error("Failed to download file")},n.send()}function xl(e){const t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Ot(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{const n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}}function Zt(e,t){const n=document.createElement("a");n.rel="noopener",n.download=t||"",n.download||(n.target="_blank"),typeof e=="string"?(n.href=e,n.origin!==window.location.origin?xl(n.href)?vl(e,t):(n.target="_blank",Ot(n)):Ot(n)):(n.href=URL.createObjectURL(e),setTimeout(()=>URL.revokeObjectURL(n.href),3e4),setTimeout(()=>Ot(n),0))}const bl=se("DownloadIcon",r.createElement("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z"}));function wl(){const{render:e,on:t,download:n}=G(),{download:s}=Ks(n),{currentSlide:o,currentIndex:a}=ce();if(e.buttonDownload)return r.createElement(r.Fragment,null,e.buttonDownload());const l=o&&(o.downloadUrl||typeof o.download=="string"&&o.download||typeof o.download=="object"&&o.download.url||ye(o)&&o.src)||void 0,c=s?o?.download!==!1:!!l,d=()=>{if(o&&l){const u=o.downloadFilename||typeof o.download=="object"&&o.download.filename||void 0;Zt(l,u)}},f=()=>{var u;o&&((s||d)({slide:o,saveAs:Zt}),(u=t.download)===null||u===void 0||u.call(t,{index:a}))};return r.createElement($e,{label:"Download",icon:bl,renderIcon:e.iconDownload,disabled:!c,onClick:f})}function yl({augment:e}){e(({toolbar:t,download:n,...s})=>({toolbar:xt(t,ha,r.createElement(wl,null)),download:Ks(n),...s}))}const El={auto:!1,ref:null},Gs=e=>({...El,...e}),qs=r.createContext(null),Cl=ie("useFullscreen","FullscreenContext",qs);function Nl({fullscreen:e,on:t,children:n}){const{auto:s,ref:o}=Gs(e),a=r.useRef(null),[l,c]=r.useState(),[d,f]=r.useState(!1),u=r.useRef(!1),{getOwnerDocument:m}=Ae();le(()=>{var v,R,T,w;const g=m();c(!((w=(T=(R=(v=g.fullscreenEnabled)!==null&&v!==void 0?v:g.webkitFullscreenEnabled)!==null&&R!==void 0?R:g.mozFullScreenEnabled)!==null&&T!==void 0?T:g.msFullscreenEnabled)!==null&&w!==void 0&&w))},[m]);const h=r.useCallback(()=>{var v;const R=m(),T=R.fullscreenElement||R.webkitFullscreenElement||R.mozFullScreenElement||R.msFullscreenElement;return((v=T?.shadowRoot)===null||v===void 0?void 0:v.fullscreenElement)||T},[m]),p=r.useCallback(()=>{const v=a.current;try{v.requestFullscreen?v.requestFullscreen().catch(()=>{}):v.webkitRequestFullscreen?v.webkitRequestFullscreen():v.mozRequestFullScreen?v.mozRequestFullScreen():v.msRequestFullscreen&&v.msRequestFullscreen()}catch{}},[]),x=r.useCallback(()=>{if(!h())return;const v=m();try{v.exitFullscreen?v.exitFullscreen().catch(()=>{}):v.webkitExitFullscreen?v.webkitExitFullscreen():v.mozCancelFullScreen?v.mozCancelFullScreen():v.msExitFullscreen&&v.msExitFullscreen()}catch{}},[h,m]);r.useEffect(()=>{const v=m(),R=()=>{f(h()===a.current)};return Je(...["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"].map(T=>(v.addEventListener(T,R),()=>v.removeEventListener(T,R))))},[h,m]);const b=V(()=>{var v;return(v=t.enterFullscreen)===null||v===void 0?void 0:v.call(t)}),N=V(()=>{var v;return(v=t.exitFullscreen)===null||v===void 0?void 0:v.call(t)});r.useEffect(()=>{d&&(u.current=!0),u.current&&(d?b:N)()},[d,b,N]);const E=V(()=>{var v;return(v=s?p:null)===null||v===void 0||v(),x});r.useEffect(E,[E]);const M=r.useMemo(()=>({fullscreen:d,disabled:l,enter:p,exit:x}),[d,l,p,x]);return r.useImperativeHandle(o,()=>M,[M]),r.createElement("div",{ref:a,className:te(O(Ye),O(vs))},r.createElement(qs.Provider,{value:M},n))}const kl=se("EnterFullscreen",r.createElement("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"})),Sl=se("ExitFullscreen",r.createElement("path",{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"}));function _l(){var e;const{fullscreen:t,disabled:n,enter:s,exit:o}=Cl(),{render:a}=G();return n?null:a.buttonFullscreen?r.createElement(r.Fragment,null,(e=a.buttonFullscreen)===null||e===void 0?void 0:e.call(a,{fullscreen:t,disabled:n,enter:s,exit:o})):r.createElement($e,{disabled:n,label:t?"Exit Fullscreen":"Enter Fullscreen",icon:t?Sl:kl,renderIcon:t?a.iconExitFullscreen:a.iconEnterFullscreen,onClick:t?o:s})}function jl({augment:e,contains:t,addParent:n}){e(({fullscreen:s,toolbar:o,...a})=>({toolbar:xt(o,Ye,r.createElement(_l,null)),fullscreen:Gs(s),...a})),n(t(Ke)?Ke:gt,he(Ye,Nl))}const Ne={ref:null,position:"bottom",width:120,height:80,border:1,borderRadius:4,padding:4,gap:16,imageFit:"contain",vignette:!0,hidden:!1,showToggle:!1},an=e=>({...Ne,...e});function Js(){const{thumbnails:e}=G();return an(e)}const Se=e=>Me(Ke,e),K=e=>Se(Me("thumbnail",e)),Ml=se("VideoThumbnail",r.createElement("path",{d:"M10 16.5l6-4.5-6-4.5v9zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})),Tl=se("UnknownThumbnail",r.createElement("path",{d:"M23 18V6c0-1.1-.9-2-2-2H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zM8.5 12.5l2.5 3.01L14.5 11l4.5 6H5l3.5-4.5z"}));function Il({slide:e,render:t,rect:n,imageFit:s}){var o;const a=(o=t.thumbnail)===null||o===void 0?void 0:o.call(t,{slide:e,render:t,rect:n,imageFit:s});if(a)return a;const l={render:t,rect:n,imageFit:s};if(e.thumbnail)return r.createElement(ke,{slide:{src:e.thumbnail},...l});if(ye(e))return r.createElement(ke,{slide:e,...l});const c=O(K(it));return e.type==="video"?r.createElement(r.Fragment,null,e.poster&&r.createElement(ke,{slide:{src:e.poster},...l}),r.createElement(Ml,{className:c})):r.createElement(Tl,{className:c})}const Ll=Te("active"),Dt=Te("fadein"),zt=Te("fadeout"),Pl=Te("placeholder"),Hn="delay",Vn="duration";function Rl({slide:e,index:t,onClick:n,fadeIn:s,fadeOut:o,placeholder:a,onLoseFocus:l}){const c=r.useRef(null),{render:d,styles:f,labels:u}=G(),{slides:m,globalIndex:h}=ce(),{getOwnerDocument:p}=Ae(),{width:x,height:b,imageFit:N}=Js(),E={width:x,height:b},M=t===h,v=V(l);return r.useEffect(()=>{o&&p().activeElement===c.current&&v()},[o,v,p]),r.createElement("button",{ref:c,type:"button",className:te(O(De),O(K()),M&&O(K(Ll())),s&&O(K(Dt())),o&&O(K(zt())),a&&O(K(Pl()))),style:{...s?{[Z(K(Dt(Vn)))]:`${s.duration}ms`,[Z(K(Dt(Hn)))]:`${s.delay}ms`}:null,...o?{[Z(K(zt(Vn)))]:`${o.duration}ms`,[Z(K(zt(Hn)))]:`${o.delay}ms`}:null,...f.thumbnail},onClick:n,"aria-current":M?!0:void 0,"aria-label":js(u,m,t)},e&&Il({slide:e,render:d,rect:E,imageFit:N}))}function Bn(e){return["top","bottom"].includes(e)}function Zn(e,t){return t+2*(e.border+e.padding)+e.gap}function Ol(e){const{thumbnail:t,poster:n}=e||{thumbnail:"placeholder"};return typeof t=="string"&&t||typeof n=="string"&&n||e&&Ms(e)||void 0}function Un({visible:e,containerRef:t}){const n=r.useRef(null),s=wt(),{publish:o,subscribe:a}=Qe(),{carousel:l,styles:c,labels:d}=G(),{slides:f,globalIndex:u,animation:m}=ce(),{registerSensors:h,subscribeSensors:p}=Vs();Xs(p);const x=Js(),{position:b,width:N,height:E,border:M,borderStyle:v,borderColor:R,borderRadius:T,padding:w,gap:g,vignette:I}=x,C=m?.duration!==void 0&&m?.increment||0,A=m?.duration||0,{prepareAnimation:S}=Vt(n,P=>({keyframes:Bn(b)?[{transform:`translateX(${(s?-1:1)*Zn(x,N)*C+P}px)`},{transform:"translateX(0)"}]:[{transform:`translateY(${Zn(x,E)*C+P}px)`},{transform:"translateY(0)"}],duration:A,easing:m?.easing})),$=V(()=>{let P=0;if(t.current&&n.current){const y=t.current.getBoundingClientRect(),k=n.current.getBoundingClientRect();P=Bn(b)?k.left-y.left-(y.width-k.width)/2:k.top-y.top-(y.height-k.height)/2}S(P)});r.useEffect(()=>Je(a(Ft,$)),[a,$]);const _=Ts(l,f),W=[];if(sn(f))for(let P=u-_-Math.abs(C);P<=u+_+Math.abs(C);P+=1){const k=l.finite&&(P<0||P>f.length-1)||C<0&&P<u-_||C>0&&P>u+_?null:on(f,P),z=[`${P}`,Ol(k)].filter(Boolean).join("|");W.push({key:z,index:P,slide:k})}const D=P=>()=>{P>u?o(be,{count:P-u}):P<u&&o(xe,{count:u-P})};return r.createElement("div",{className:te(O(Se("container")),O(De)),style:{...e?null:{display:"none"},...N!==Ne.width?{[Z(K("width"))]:`${N}px`}:null,...E!==Ne.height?{[Z(K("height"))]:`${E}px`}:null,...M!==Ne.border?{[Z(K("border"))]:`${M}px`}:null,...v?{[Z(K("border_style"))]:v}:null,...R?{[Z(K("border_color"))]:R}:null,...T!==Ne.borderRadius?{[Z(K("border_radius"))]:`${T}px`}:null,...w!==Ne.padding?{[Z(K("padding"))]:`${w}px`}:null,...g!==Ne.gap?{[Z(K("gap"))]:`${g}px`}:null,...c.thumbnailsContainer}},r.createElement("nav",{ref:n,style:c.thumbnailsTrack,className:te(O(Se("track")),O(De)),"aria-label":_e(d,"Thumbnails"),tabIndex:-1,...h},W.map(({key:P,index:y,slide:k})=>{const z=A/Math.abs(C||1),U=C>0&&y>u+_-C&&y<=u+_||C<0&&y<u-_-C&&y>=u-_?{duration:z,delay:((C>0?y-(u+_-C):u-_-C-y)-1)*z}:void 0,B=C>0&&y<u-_||C<0&&y>u+_?{duration:z,delay:(C>0?C-(u-_-y):-C-(y-(u+_)))*z}:void 0;return r.createElement(Rl,{key:P,index:y,slide:k,fadeIn:U,fadeOut:B,placeholder:!k,onClick:D(y),onLoseFocus:()=>{var L;return(L=n.current)===null||L===void 0?void 0:L.focus()}})})),I&&r.createElement("div",{className:O(Se("vignette"))}))}const Qs=r.createContext(null),Dl=ie("useThumbnails","ThumbnailsContext",Qs);function zl({children:e,...t}){const{ref:n,position:s,hidden:o}=an(t.thumbnails),[a,l]=r.useState(!o),c=r.useRef(null),d=r.useMemo(()=>({visible:a,show:()=>l(!0),hide:()=>l(!1)}),[a]);return r.useImperativeHandle(n,()=>d,[d]),r.createElement(zs,{...t},r.createElement(Qs.Provider,{value:d},r.createElement("div",{ref:c,className:te(O(Se()),O(Se(`${s}`)))},["start","top"].includes(s)&&r.createElement(Un,{containerRef:c,visible:a}),r.createElement("div",{className:O(Se("wrapper"))},e),["end","bottom"].includes(s)&&r.createElement(Un,{containerRef:c,visible:a}))))}const eo=()=>r.createElement(r.Fragment,null,r.createElement("path",{strokeWidth:2,stroke:"currentColor",strokeLinejoin:"round",fill:"none",d:"M3 5l18 0l0 14l-18 0l0-14z"}),r.createElement("path",{d:"M5 14h4v3h-4zM10 14h4v3h-4zM15 14h4v3h-4z"})),Al=se("ThumbnailsVisible",eo()),$l=za("ThumbnailsHidden",eo());function Fl(){const{visible:e,show:t,hide:n}=Dl(),{render:s}=G();return s.buttonThumbnails?r.createElement(r.Fragment,null,s.buttonThumbnails({visible:e,show:t,hide:n})):r.createElement($e,{label:e?"Hide thumbnails":"Show thumbnails",icon:e?Al:$l,renderIcon:e?s.iconThumbnailsVisible:s.iconThumbnailsHidden,onClick:e?n:t})}function Wl({augment:e,contains:t,append:n,addParent:s}){e(({thumbnails:a,toolbar:l,...c})=>{const d=an(a);return{toolbar:xt(l,Ke,d.showToggle?r.createElement(Fl,null):null),thumbnails:d,...c}});const o=he(Ke,zl);t(Ye)?n(Ye,o):s(gt,o)}const Hl={minZoom:1,maxZoomPixelRatio:1,zoomInMultiplier:2,doubleTapDelay:300,doubleClickDelay:500,doubleClickMaxStops:2,keyboardMoveDistance:50,wheelZoomDistanceFactor:100,pinchZoomDistanceFactor:100,scrollToZoom:!1};function Vl(e){return Math.min(Math.max(e,Number.EPSILON),1)}function to(e){const{minZoom:t,...n}={...Hl,...e};return{minZoom:Vl(t),...n}}function Bl(e,t,n,s){const o=r.useRef(void 0),a=r.useRef(void 0),{zoom:l}=G().animation,c=rn(),d=V(()=>{var f,u,m;if((f=o.current)===null||f===void 0||f.cancel(),o.current=void 0,a.current&&s?.current){try{o.current=(m=(u=s.current).animate)===null||m===void 0?void 0:m.call(u,[{transform:a.current},{transform:`scale(${e}) translateX(${t}px) translateY(${n}px)`}],{duration:c?0:l??500,easing:o.current?"ease-out":"ease-in-out"})}catch(h){console.error(h)}a.current=void 0,o.current&&(o.current.onfinish=()=>{o.current=void 0})}});return le(d,[e,t,n,d]),r.useCallback(()=>{a.current=s?.current?window.getComputedStyle(s.current).transform:void 0},[s])}function Zl(e,t){const{on:n}=G(),s=V(()=>{var o;t||(o=n.zoom)===null||o===void 0||o.call(n,{zoom:e})});r.useEffect(s,[e,s])}function yt(){const{zoom:e}=G();return to(e)}function Ul(e,t){var n,s;let o={width:0,height:0},a={width:0,height:0};const{currentSlide:l}=ce(),{imageFit:c}=G().carousel,{maxZoomPixelRatio:d}=yt();if(e&&l){const u={...l,...t};if(ye(u)){const m=tn(u,c),h=Math.max(...(((n=u.srcSet)===null||n===void 0?void 0:n.map(x=>x.width))||[]).concat(u.width?[u.width]:[])),p=Math.max(...(((s=u.srcSet)===null||s===void 0?void 0:s.map(x=>x.height))||[]).concat(u.height?[u.height]:[]));h>0&&p>0&&e.width>0&&e.height>0&&(a=m?{width:Math.round(Math.min(h,e.width/e.height*p)),height:Math.round(Math.min(p,e.height/e.width*h))}:{width:h,height:p},a={width:a.width*d,height:a.height*d},o=m?{width:Math.min(e.width,a.width,h),height:Math.min(e.height,a.height,p)}:{width:Math.round(Math.min(e.width,e.height/p*h,h)),height:Math.round(Math.min(e.height,e.width/h*p,p))})}}const f=o.width?Math.max(en(a.width/o.width,5),1):1;return{imageRect:o,maxZoom:f}}function Xn(e,t){return((e.clientX-t.clientX)**2+(e.clientY-t.clientY)**2)**.5}function Yn(e,t,n=100,s=2){return e*Math.min(1+Math.abs(t/n),s)**Math.sign(t)}function Xl(e,t,n,s,o,a,l,c,d){const f=r.useRef([]),u=r.useRef(0),m=r.useRef(void 0),{globalIndex:h}=ce(),{getOwnerWindow:p}=Ae(),{containerRef:x,subscribeSensors:b}=ve(),{keyboardMoveDistance:N,zoomInMultiplier:E,wheelZoomDistanceFactor:M,scrollToZoom:v,doubleTapDelay:R,doubleClickDelay:T,doubleClickMaxStops:w,pinchZoomDistanceFactor:g}=yt(),I=r.useCallback(y=>{if(x.current){const{pageX:k,pageY:z}=y,{scrollX:U,scrollY:B}=p(),{left:L,top:q,width:re,height:ne}=x.current.getBoundingClientRect();return[k-L-U-re/2,z-q-B-ne/2]}return[]},[x,p]),C=V(y=>{const{key:k,metaKey:z,ctrlKey:U}=y,B=z||U,L=()=>{y.preventDefault(),y.stopPropagation()};if(e>1){const q=(re,ne)=>{L(),c(re,ne)};k==="ArrowDown"?q(0,N):k==="ArrowUp"?q(0,-N):k==="ArrowLeft"?q(-N,0):k==="ArrowRight"&&q(N,0)}k==="+"||B&&k==="="?(L(),o()):k==="-"||B&&k==="_"?(L(),a()):B&&k==="0"&&(L(),l(1))}),A=V(y=>{if((y.ctrlKey||v)&&Math.abs(y.deltaY)>Math.abs(y.deltaX)){y.stopPropagation(),l(Yn(e,-y.deltaY,M),!0,...I(y));return}e>1&&(y.stopPropagation(),v||c(y.deltaX,y.deltaY))}),S=r.useCallback(y=>{const k=f.current;k.splice(0,k.length,...k.filter(z=>z.pointerId!==y.pointerId))},[]),$=r.useCallback(y=>{S(y),y.persist(),f.current.push(y)},[S]),_=V(y=>{var k;const z=f.current;if(y.pointerType==="mouse"&&y.buttons>1||!(!((k=d?.current)===null||k===void 0)&&k.contains(y.target)))return;e>1&&y.stopPropagation();const{timeStamp:U}=y;if(z.length===0&&U-u.current<(y.pointerType==="touch"?R:T)){u.current=0;const B=e>=1?e!==n?e*Math.max(n**(1/w),E):1:e!==t?e/Math.max(t**(-1/w),E):1;l(B,!1,...I(y))}else u.current=U;$(y),z.length===2&&(m.current=Xn(z[0],z[1]))}),W=V(y=>{const k=f.current,z=k.find(U=>U.pointerId===y.pointerId);if(k.length===2&&m.current){y.stopPropagation(),$(y);const U=Xn(k[0],k[1]),B=U-m.current;Math.abs(B)>0&&(l(Yn(e,B,g),!0,...k.map(L=>I(L)).reduce((L,q)=>q.map((re,ne)=>L[ne]+re/2))),m.current=U);return}e>1&&(y.stopPropagation(),z&&(k.length===1&&c((z.clientX-y.clientX)/e,(z.clientY-y.clientY)/e),$(y)))}),D=r.useCallback(y=>{const k=f.current;k.length===2&&k.find(z=>z.pointerId===y.pointerId)&&(m.current=void 0),S(y)},[S]),P=r.useCallback(()=>{const y=f.current;y.splice(0,y.length),u.current=0,m.current=void 0},[]);Bs(b,_,W,D,s),r.useEffect(P,[h,P]),r.useEffect(()=>s?()=>{}:Je(P,b(qt,C),b(Jt,A)),[s,b,P,C,A])}function Yl(e,t,n){const[s,o]=r.useState(1),[a,l]=r.useState(0),[c,d]=r.useState(0),f=Bl(s,a,c,n),{currentSlide:u,globalIndex:m}=ce(),{containerRect:h,slideRect:p}=ve(),{minZoom:x,zoomInMultiplier:b}=yt(),N=u&&ye(u)?u.src:void 0,E=!N||!n?.current;le(()=>{o(1),l(0),d(0)},[m,N]);const M=r.useCallback((g,I,C)=>{const A=C||s,S=a-(g||0),$=c-(I||0),_=(e.width*A-p.width)/2/A,W=(e.height*A-p.height)/2/A;l(Math.min(Math.abs(S),Math.max(_,0))*Math.sign(S)),d(Math.min(Math.abs($),Math.max(W,0))*Math.sign($))},[s,a,c,p,e.width,e.height]),v=r.useCallback((g,I,C,A)=>{const S=en(Math.min(Math.max(g+.001<t?g:t,x),t),5);S!==s&&(I||f(),M(C?C*(1/s-1/S):0,A?A*(1/s-1/S):0,S),o(S))},[s,x,t,M,f]),R=V(()=>{s>1&&(s>t&&v(t,!0),M())});le(R,[h.width,h.height,R]);const T=r.useCallback(()=>{const g=s*b;v(s<1&&g>1?1:g)},[s,b,v]),w=r.useCallback(()=>{const g=s/b;v(s>1&&g<1?1:g)},[s,b,v]);return{zoom:s,offsetX:a,offsetY:c,disabled:E,changeOffsets:M,changeZoom:v,zoomIn:T,zoomOut:w}}const no=r.createContext(null),ln=ie("useZoom","ZoomControllerContext",no);function Kl({children:e}){const[t,n]=r.useState(),{slideRect:s}=ve(),{ref:o,minZoom:a}=yt(),{imageRect:l,maxZoom:c}=Ul(s,t?.imageDimensions),{zoom:d,offsetX:f,offsetY:u,disabled:m,changeZoom:h,changeOffsets:p,zoomIn:x,zoomOut:b}=Yl(l,c,t?.zoomWrapperRef);Zl(d,m),Xl(d,a,c,m,x,b,h,p,t?.zoomWrapperRef);const N=r.useMemo(()=>({zoom:d,minZoom:a,maxZoom:c,offsetX:f,offsetY:u,disabled:m,zoomIn:x,zoomOut:b,changeZoom:h}),[d,a,c,f,u,m,x,b,h]);r.useImperativeHandle(o,()=>N,[N]);const E=r.useMemo(()=>({...N,setZoomWrapper:n}),[N,n]);return r.createElement(no.Provider,{value:E},e)}const Gl=se("ZoomIn",r.createElement(r.Fragment,null,r.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),r.createElement("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"}))),ql=se("ZoomOut",r.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"})),Kn=r.forwardRef(function({zoomIn:t,onLoseFocus:n},s){const o=r.useRef(!1),a=r.useRef(!1),{zoom:l,minZoom:c,maxZoom:d,zoomIn:f,zoomOut:u,disabled:m}=ln(),{render:h}=G(),p=m||(t?l>=d:l<=c);return r.useEffect(()=>{p&&o.current&&a.current&&n(),p||(o.current=!0)},[p,n]),r.createElement($e,{ref:s,disabled:p,label:t?"Zoom in":"Zoom out",icon:t?Gl:ql,renderIcon:t?h.iconZoomIn:h.iconZoomOut,onClick:t?f:u,onFocus:()=>{a.current=!0},onBlur:()=>{a.current=!1}})});function Jl(){const e=r.useRef(null),t=r.useRef(null),{focus:n}=ve(),s=r.useCallback(l=>{var c,d;!((c=l.current)===null||c===void 0)&&c.disabled?n():(d=l.current)===null||d===void 0||d.focus()},[n]),o=r.useCallback(()=>s(e),[s]),a=r.useCallback(()=>s(t),[s]);return r.createElement(r.Fragment,null,r.createElement(Kn,{zoomIn:!0,ref:e,onLoseFocus:a}),r.createElement(Kn,{ref:t,onLoseFocus:o}))}function Ql(){const{render:e}=G(),t=ln();return e.buttonZoom?r.createElement(r.Fragment,null,e.buttonZoom(t)):r.createElement(Jl,null)}function ei(e){var t;return(((t=e.srcSet)===null||t===void 0?void 0:t.length)||0)>0}function ti({current:e,preload:t},{type:n,source:s}){switch(n){case"fetch":return e?{current:e,preload:s}:{current:s};case"done":return s===t?{current:s}:{current:e,preload:t};default:throw new Error(Ss)}}function ni(e){var t,n;const[{current:s,preload:o},a]=r.useReducer(ti,{}),{slide:l,rect:c,imageFit:d,render:f,interactive:u}=e,m=l.srcSet.sort((T,w)=>T.width-w.width),h=(t=l.width)!==null&&t!==void 0?t:m[m.length-1].width,p=(n=l.height)!==null&&n!==void 0?n:m[m.length-1].height,x=tn(l,d),b=Math.max(...m.map(T=>T.width)),N=Math.min((x?Math.max:Math.min)(c.width,h*(c.height/p)),b),E=ka(),M=V(()=>{var T;const w=(T=m.find(g=>g.width>=N*E))!==null&&T!==void 0?T:m[m.length-1];(!s||m.findIndex(g=>g.src===s)<m.findIndex(g=>g===w))&&a({type:"fetch",source:w.src})});le(M,[c.width,c.height,E,M]);const v=V(T=>a({type:"done",source:T})),R={WebkitTransform:u?"initial":"translateZ(0)"};return x||Object.assign(R,c.width/c.height<h/p?{width:"100%",height:"auto"}:{width:"auto",height:"100%"}),r.createElement(r.Fragment,null,o&&o!==s&&r.createElement(ke,{key:"preload",...e,offset:void 0,slide:{...l,src:o,srcSet:void 0},style:{position:"absolute",visibility:"hidden",...R},onLoad:()=>v(o),render:{...f,iconLoading:()=>null,iconError:()=>null}}),s&&r.createElement(ke,{key:"current",...e,slide:{...l,src:s,srcSet:void 0},style:R}))}function si({render:e,slide:t,offset:n,rect:s}){var o;const[a,l]=r.useState(),c=r.useRef(null),{zoom:d,maxZoom:f,offsetX:u,offsetY:m,setZoomWrapper:h}=ln(),p=d>1,{carousel:x,on:b}=G(),{currentIndex:N}=ce();le(()=>n===0?(h({zoomWrapperRef:c,imageDimensions:a}),()=>h(void 0)):()=>{},[n,a,h]);let E=(o=e.slide)===null||o===void 0?void 0:o.call(e,{slide:t,offset:n,rect:s,zoom:d,maxZoom:f});if(!E&&ye(t)){const M={slide:t,offset:n,rect:s,render:e,imageFit:x.imageFit,imageProps:x.imageProps,onClick:n===0?()=>{var v;return(v=b.click)===null||v===void 0?void 0:v.call(b,{index:N})}:void 0};E=ei(t)?r.createElement(ni,{...M,slide:t,interactive:p,rect:n===0?{width:s.width*d,height:s.height*d}:s}):r.createElement(ke,{onLoad:v=>l({width:v.naturalWidth,height:v.naturalHeight}),...M})}return E?r.createElement("div",{ref:c,className:te(O(vs),O(De),O(bs),p&&O(xa)),style:n===0?{transform:`scale(${d}) translateX(${u}px) translateY(${m}px)`}:void 0},E):null}const oi=({augment:e,addModule:t})=>{e(({zoom:n,toolbar:s,render:o,controller:a,...l})=>{const c=to(n);return{zoom:c,toolbar:xt(s,In,r.createElement(Ql,null)),render:{...o,slide:d=>{var f;return ye(d.slide)?r.createElement(si,{render:o,...d}):(f=o.slide)===null||f===void 0?void 0:f.call(o,d)}},controller:{...a,preventDefaultWheelY:c.scrollToZoom},...l}}),t(he(In,Kl))},Gn={info:i.jsx(Pe,{className:"h-6 w-6 text-blue-500"}),success:i.jsx(is,{className:"h-6 w-6 text-green-500"}),warning:i.jsx(Pe,{className:"h-6 w-6 text-yellow-500"}),error:i.jsx(Pe,{className:"h-6 w-6 text-red-500"}),danger:i.jsx(Pe,{className:"h-6 w-6 text-red-500"})},ri={info:"blue",success:"green",warning:"yellow",error:"red",danger:"red"},ai=()=>{const e=je(),{t}=we(),{open:n,title:s,message:o,color:a}=fe(_o),l=()=>{e(pn({confirmed:!0}))},c=()=>{e(pn({confirmed:!1}))},d=Gn[a]||Gn.info,f=ri[a]||"indigo";return i.jsx(ft,{children:n&&i.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:c,children:i.jsxs(ee.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"relative bg-white dark:bg-zinc-800 rounded-lg shadow-xl w-full max-w-md m-4",onClick:u=>u.stopPropagation(),children:[i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:"flex-shrink-0 mr-4",children:d}),i.jsxs("div",{className:"flex-grow",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",id:"modal-title",children:s}),i.jsx("div",{className:"mt-2",children:i.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-300",children:o})})]}),i.jsx("button",{onClick:c,className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-zinc-700",children:i.jsx(pt,{className:"w-5 h-5 text-gray-500"})})]})}),i.jsxs("div",{className:"bg-gray-50 dark:bg-zinc-900/50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse rounded-b-lg",children:[i.jsx(me,{color:f,onClick:l,className:"w-full sm:w-auto sm:ml-3",children:t("confirm")}),i.jsx(me,{variant:"outlined",color:"secondary",onClick:c,className:"w-full sm:w-auto mt-2 sm:mt-0",children:t("cancel")})]})]})})})},qn={success:is,error:ur,info:Pe,warning:Pe},li=()=>{const e=je(),{message:t,type:n,open:s}=fe(jo)||{open:!1};r.useEffect(()=>{if(s){const l=setTimeout(()=>{e(St())},3e3);return()=>clearTimeout(l)}},[s,e]);const o=qn[n]||qn.info,a=(l,c)=>{Math.abs(c.offset.x)>100&&e(St())};return i.jsx(ft,{children:s&&i.jsx(ee.div,{initial:{opacity:0,y:50,scale:.3},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.5,transition:{duration:.2}},transition:{type:"spring",stiffness:400,damping:25},className:"fixed bottom-5 left-1/2 -translate-x-1/2 z-10000",drag:"x",dragConstraints:{left:0,right:0},dragSnapToOrigin:!0,onDragEnd:a,children:i.jsxs("div",{className:"flex items-center p-4 text-gray-600 bg-white rounded-lg shadow-lg dark:bg-zinc-800 dark:text-zinc-300 dark:border dark:border-zinc-700 max-w-md",role:"alert",children:[i.jsx("div",{className:`inline-flex items-center justify-center flex-shrink-0 w-8 h-8 ${n==="success"?"text-green-500":""}`,children:i.jsx(o,{className:"w-5 h-5"})}),i.jsx("div",{className:"ml-3 text-sm font-normal",children:t}),i.jsxs("button",{type:"button",className:"ml-auto -mx-1.5 -my-1.5 bg-white text-gray-400 hover:text-gray-900 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex h-8 w-8 dark:text-zinc-400 dark:hover:text-white dark:bg-zinc-800 dark:hover:bg-zinc-700","aria-label":"Close",onClick:()=>e(St()),children:[i.jsx("span",{className:"sr-only",children:"Close"}),i.jsx(pt,{className:"w-5 h-5"})]})]})})})},Jn=({rootDb:e,memoId:t,master:n,onEdit:s,onUtil:o,onNewMemo:a,onDelete:l,onCopy:c})=>{const{t:d}=we(),f=je(),u=async()=>{try{await f(Mo({rootDb:e,memoId:t})),f(gn({message:d("memo_cache_reset_successfully"),type:"success"}))}catch(m){console.error("Failed to reset Redux state:",m),f(gn({message:d("error_while_resetting_state"),type:"error"}))}};return i.jsxs("div",{className:"mx-auto grid w-full max-w-lg grid-cols-6 items-center justify-center gap-2 px-4 py-2 text-center",children:[n&&i.jsx(me,{size:"sm",variant:"outlined",color:"brand",onClick:o,className:"gap-1.5",children:i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx(dr,{className:"size-4"}),i.jsx("span",{className:"ml-2 whitespace-nowrap",children:d("util")})]})}),i.jsx(me,{size:"sm",variant:"outlined",color:"brand",onClick:s,className:"gap-1.5",children:i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx(mr,{className:"size-4"}),i.jsx("span",{className:"ml-2 whitespace-nowrap",children:d("edit")})]})}),i.jsx(me,{size:"sm",variant:"outlined",color:"brand",onClick:a,className:"gap-1.5",children:i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx(fr,{className:"size-4"}),i.jsx("span",{className:"ml-2 whitespace-nowrap",children:d("new")})]})}),i.jsx(me,{size:"sm",variant:"outlined",color:"error",onClick:l,className:"gap-1.5",children:i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx(hr,{className:"size-4"}),i.jsx("span",{className:"ml-2 whitespace-nowrap",children:d("delete")})]})}),c&&i.jsx(me,{size:"sm",variant:"outlined",color:"secondary",onClick:c,className:"gap-1.5",children:i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx(pr,{className:"size-4"}),i.jsx("span",{className:"ml-2 whitespace-nowrap",children:d("public")})]})}),n&&i.jsx(me,{size:"sm",variant:"outlined",color:"danger",onClick:u,className:"gap-1.5",children:i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx(gr,{className:"size-4"}),i.jsx("span",{className:"ml-2 whitespace-nowrap",children:d("reset")})]})})]})},ii=e=>{r.useEffect(()=>{if(!e)return;const t=localStorage.getItem(e);t&&setTimeout(()=>window.scrollTo(0,parseInt(t,10)),100);let n;const s=()=>{clearTimeout(n),n=setTimeout(()=>{localStorage.setItem(e,window.scrollY.toString())},200)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[e])},ci=({rootDb:e,searchWord:t})=>{const{user:n}=Ge(),{memoId:s}=lr(),o=je(),a=fe(F=>F.ui.modal),l=fe(F=>F.tabs[e]?.activeTab||null),c=ls(),d=ht(),f=fe(To);ii(`scrollPos-memo-${s}`);const{memoMap:u,isLoading:m,onBookmark:h}=Io(e,n,s),[p,x]=r.useState(!1),[b,N]=r.useState(!1),[E,M]=r.useState(!1),[v,R]=r.useState(!1),[T,w]=r.useState(0),{t:g}=we(),{register:I,handleSubmit:C,reset:A,getValues:S,watch:$}=Lo({defaultValues:{title:"",memo:""}}),_=$("memo");r.useEffect(()=>{A({title:u?.title||"",memo:u?.memo||""})},[u,A]);const{scrollYProgress:W}=Gr(),D=Qr(W,{stiffness:100,damping:30,restDelta:.001}),P=d?.state?.fullIndex,y=fe(F=>F.treeData.data),k=async()=>{if(!n||!s||e!=="memo"){o(bn({title:g("error"),message:g("only_private_memos_can_be_copied"),color:"error"}));return}try{await o(Bo({userId:n.uid,memoId:s,memoMap:u,successMessage:g("copy_completed")})).unwrap()}catch(F){console.error("Copy failed:",F)}},z=C(F=>{o(Po({rootDb:e,memoId:s,newMemoContent:F.memo})).unwrap().then(()=>{N(!1)}).catch(ge=>{console.error(g("error_saving_memo"),ge),N(!1)})}),U=()=>{f||N(!0)},B=()=>{f||x(!0)},L=C(F=>{o(Ro({rootDb:e,userId:n.uid,memoId:s,newTitle:F.title})).unwrap().then(()=>{x(!1),o({type:"tabs/updateTabTitle",payload:{id:s,title:F.title,rootDb:e}}),o({type:"bookmark/updateBookmarkTitle",payload:{id:s,title:F.title}}),o(Oo({id:s,newTitle:F.title}))}).catch(ge=>{console.error(g("error_updating_title"),ge),x(!1)})}),q=F=>{F.key==="Enter"?(F.preventDefault(),L()):F.key==="Escape"&&x(!1)},re=()=>{const F=`/${e==="memo"?"m":e}/edit/${s}`;c(F,{state:{fullIndex:P}})},ne=()=>{const F=`/${e==="memo"?"m":e}/util/${s}`;c(F,{state:{fullIndex:P}})},Ee=()=>{const F=`/${e==="memo"?"m":e}/insert/${s}`;c(F,{state:{fullIndex:P}})},pe=()=>{k()},Fe=F=>{w(F),R(!0)},We=()=>{o(bn({title:g("delete_confirm_title"),message:g("delete_confirm_message"),color:"warning"}))},He=async()=>{try{o({type:"tabs/setDeleteId",payload:s}),await o(Ho({rootDb:e,userId:n.uid,memoId:s,successMessage:"메모가 삭제되었습니다.",loadingType:"deleting",loadingMessage:"메모를 삭제하고 있습니다..."})).unwrap(),e==="memo"&&await o(Vo({userId:n.uid,nodeId:s,currentTreeData:y})).unwrap(),o(as({tabId:s,rootDb:e})),c(`/${e==="memo"?"m":e}`)}catch(F){console.error("삭제 중 오류 발생:",F)}};return r.useEffect(()=>{!a.open&&a.isConfirmed&&(He(),o(Do()))},[a.open,a.isConfirmed,o]),r.useEffect(()=>{u?.title&&zo({title:u.title,description:""})},[u]),s===""||n===void 0?null:m||l!==s?i.jsx(At,{}):u?i.jsxs("div",{className:"MemoDetail min-w-screen-sm pt-3 pb-0 relative rounded-t-lg",children:[i.jsx(li,{}),i.jsx(pl,{open:v,close:()=>R(!1),slides:u?.image?.map(F=>({src:F.url,download:F.name}))||[],index:T,plugins:[oi,Wl,jl,yl],classNames:{icon:"dark:text-white"}}),i.jsx(ai,{}),i.jsx(ee.div,{className:`progress-bar sticky ${E?"top-32":"top-20"} z-10`,style:{scaleX:D}}),i.jsxs("div",{className:"MemoDetail_body",children:[i.jsxs("div",{className:`sticky ${E?"top-16":"top-0"} ${H.card} backdrop-blur-sm z-10`,children:[i.jsxs("div",{className:"p-3 sm:p-4",children:[i.jsxs("div",{className:H.between,children:[i.jsxs("p",{className:`${H.truncate} ${H.textXs} ${H.textGray500DarkZinc400}`,children:[i.jsx(yn,{to:e==="memo"?"/m":"/home",className:"hover:!text-gray-900 dark:hover:!text-white",children:e==="memo"?"MEMO":"HOME"}),u?.path?.map((F,ge)=>u.path.length===ge+1?` > ${F?.title}`:i.jsxs(qe.Fragment,{children:[" "," > ",i.jsx(yn,{to:e==="memo"?`/m/${F.id}`:`/home/${F.id}`,className:"hover:!text-gray-900 dark:hover:!text-white",children:F?.title})]},ge))]}),i.jsx(ee.button,{whileTap:{scale:.8},className:`${H.flexShrink0} ${H.roundedFull} p-2 ${H.buttonHoverGrayLight}`,"aria-label":g("bookmark"),onClick:h,children:u?.bookmark==="Y"?i.jsx(vr,{className:`${H.h5W5} ${H.textRed500}`}):i.jsx(xr,{className:`${H.h5W5} ${H.textGray500}`})})]}),p?i.jsx("input",{...I("title"),type:"text",onKeyDown:q,onBlur:L,className:`w-full bg-transparent border-b-2 border-blue-500 focus:outline-none 
													${H.heading2XlBoldSm3Xl} ${H.textGray900}`,autoFocus:!0}):i.jsx("div",{onDoubleClick:B,className:`MemoDetail_Title text-left ${H.heading2XlBoldSm3Xl} ${H.textGray900} cursor-pointer`,children:u?.title}),i.jsx("button",{onClick:()=>M(!E),className:`${H.floatingActionButton} absolute top-11 sm:top-14 right-2 sm:right-3`,children:i.jsx(ee.div,{animate:{rotate:E?135:0},children:i.jsx(br,{className:"h-6 w-6"})})})]}),i.jsx(ee.div,{initial:!1,animate:{height:E?"auto":0,opacity:E?1:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:i.jsx("div",{className:"border-t border-gray-200 bg-gray-50 dark:border-zinc-800 dark:bg-zinc-900/50",children:i.jsx(Jn,{master:n?.uid===lt,rootDb:e,memoId:s,onEdit:re,onUtil:ne,onNewMemo:Ee,onDelete:We,onCopy:e==="memo"?pe:null})})})]}),u&&u.html==="sheet"&&i.jsx(Ao,{rootDb:e,detailData:u}),i.jsxs("div",{className:`MemoDetail_Content ${u?.memo?.length>0?`${H.card} my-4 p-2 sm:p-4`:"p-1"}`,onDoubleClick:U,children:[b?i.jsxs("div",{className:`${H.card} p-4`,children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(vn,{children:g("input")}),i.jsx("textarea",{...I("memo"),className:"w-full min-h-[100px] p-2 border rounded dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:`${(_||"").split(/\r\n|\r|\n/g).length}`,autoFocus:!0})]}),i.jsxs("div",{children:[i.jsx(vn,{children:g("preview")}),i.jsx("div",{className:"prose dark:prose-invert max-w-none p-2 border rounded min-h-[100px] overflow-y-auto dark:bg-gray-700 dark:border-gray-600",children:i.jsx(xn,{postData:_,highlightWord:""})})]})]}),i.jsxs("div",{className:"mt-2 flex justify-end gap-2",children:[i.jsx(me,{variant:"outlined",color:H.button.indigo,size:"sm",onClick:()=>N(!1),children:g("cancel")}),i.jsx(me,{color:H.button.indigo,onClick:z,children:g("save")})]})]}):u&&u.html!=="sheet"?u?.html==="N"?i.jsx(xn,{postData:u?.memo,highlightWord:t}):u?.html!=="N"&&u?.memo&&i.jsx($o,{text:u.memo}):"",i.jsx(Fo,{imageList:u?.image,onImageClick:Fe}),!u&&i.jsx("div",{className:"flex justify-center py-12",children:i.jsx("div",{className:`${H.flexCenter} py-12`})})]})]}),i.jsx(Wo,{rootDb:e,memoId:s,enableEdit:!0}),i.jsx(ee.div,{initial:!1,animate:{height:E?"auto":0,opacity:E?1:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:i.jsx("div",{className:`${H.line}`,children:i.jsx(Jn,{master:n?.uid===lt,rootDb:e,onEdit:re,onUtil:ne,onNewMemo:Ee,onDelete:We,onCopy:e==="memo"?pe:null})})})]}):i.jsx("div",{className:"p-4 text-center text-gray-500",children:g("memo_not_found_or_no_permission")})},ui=qe.lazy(()=>ut(()=>import("./MemoSheetGrid-BVhfU98q.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),Qn=qe.lazy(()=>ut(()=>import("./MemoDetailEdit-CW6E9kQ7.js"),__vite__mapDeps([9,1,2,3,4,5,6,10,11,12,13,14,15,16,7,8,17]))),di=qe.lazy(()=>ut(()=>import("./MemoDetailUtil-3rogt4P3.js"),__vite__mapDeps([18,1,2,3,4,5,6,10,14,15,16,11,7,8]))),mi=qe.lazy(()=>ut(()=>import("./TwTodo-B2Ka9nVD.js"),__vite__mapDeps([19,1,2,3,4,5,6,12,10,15,16]))),fi=({rootDb:e,user:t,memoId:n,isLoading:s,onBookmark:o,handleCloseTab:a})=>{const l=ht();return i.jsx(r.Suspense,{fallback:i.jsx(At,{}),children:i.jsx(ft,{children:i.jsxs(ir,{location:l,children:[i.jsx(Ie,{path:"todo",element:i.jsx(ee.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:i.jsx(mi,{})})}),i.jsx(Ie,{path:"sheet/:sheetId?",element:i.jsx(ee.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:i.jsx(ui,{})})}),i.jsx(Ie,{path:"edit/:memoId",element:i.jsx(ee.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:i.jsx(Qn,{rootDb:e,isLoading:s})})}),i.jsx(Ie,{path:"insert/:memoId",element:i.jsx(ee.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:i.jsx(Qn,{rootDb:e,isLoading:s})})}),i.jsx(Ie,{path:"util/:memoId",element:i.jsx(ee.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:i.jsx(di,{rootDb:e,isLoading:s})})}),i.jsx(Ie,{path:":memoId",element:i.jsx(ee.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:s?i.jsx(At,{}):i.jsx(ci,{rootDb:e,onBookmark:o,onDeleteTab:()=>{a&&a(null,{id:n})}})})})]},l.pathname)})})},hi=e=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...e,children:i.jsx("path",{fillRule:"evenodd",d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zM6 20V4h7v5h5v11H6zM8 12h3v3H8v-3zm0 4h3v3H8v-3zm4-4h3v3h-3v-3zm0 4h3v3h-3v-3z",clipRule:"evenodd"})}),pi=({tabInfo:e,handleCloseTab:t,isActive:n,onClickTab:s})=>{const{t:o}=we(),{user:a}=Ge(),{attributes:l,listeners:c,setNodeRef:d,transform:f,transition:u,isDragging:m}=Zo({id:e.id}),h={transform:Uo.Transform?.toString(f),transition:u,zIndex:m?1:"auto"};return i.jsxs("div",{ref:d,style:h,...l,...c,"data-tab-id":e.id,onClick:s,title:e.title,className:`SortableTab group relative flex flex-shrink-0 items-center pl-3 pr-2 py-1.5 text-sm rounded-t-md transition-colors duration-200 min-w-28 max-w-48 border-b-2 cursor-pointer
				${n?"bg-gray-200 dark:bg-zinc-700 border-blue-500 text-gray-800 dark:text-gray-100":"border-transparent text-secondary hover:bg-gray-200/70 dark:hover:bg-zinc-700/70"}
				${m?"opacity-50 shadow-lg":""}`,children:[e.rootDb==="memo"?i.jsx(Xo,{className:`w-5 h-5 mr-1 flex-shrink-0 transition-transform duration-200 ${n?"scale-110":""}`,fill:"currentColor"}):e.rootDb==="sheet"?i.jsx(hi,{className:`w-5 h-5 mr-1 flex-shrink-0 transition-transform duration-200 ${n?"scale-110":""}`}):null,i.jsx("span",{className:"truncate pr-1",style:{fontFamily:"sans-serif"},children:e.title||o("loading")}),i.jsx("button",{onClick:p=>{p.preventDefault(),p.stopPropagation(),t(e.id)},className:`ml-auto flex-shrink-0 p-1 rounded-full transition-opacity duration-200 opacity-0 group-hover:opacity-100
					text-gray-500 dark:text-gray-400 
					hover:bg-gray-300/50 dark:hover:bg-gray-600/50 hover:text-gray-700 dark:hover:text-white
				`,children:i.jsx(pt,{className:"w-3 h-3"})})]})},gi=r.memo(({rootDb:e,user:t})=>{const n=r.useRef(null),[s,o]=r.useState({left:!1,right:!1}),[a,l]=r.useState(!0),c=r.useRef(0),d=ls(),f=ht(),u=f.pathname.split("/").pop(),m=je(),{tabs:h,activeTab:p}=fe(w=>w.tabs[e]||{tabs:[],activeTab:null}),x=fe(w=>w?.tabs?.deleteId||null),b=r.useRef(null);r.useEffect(()=>{if((async()=>{if(x!==u&&u&&u!=="insert"&&f.pathname!=="/m"&&f.pathname!=="/home")if(h.some(I=>I.id===u))p!==u&&h.some(I=>I.id===u)&&b.current===null&&m(wn({activeTabId:u,rootDb:e}));else{let I="Loading...";try{let C;if(e==="sheet"?C=`memo_sheet/${t?.uid}/${u}/title`:e==="memo"?C=`${e}_txt/${t?.uid}/${u}/title`:e==="home"&&(C=`${e}_txt/${u}/title`),C){const A=await Yt(C);A&&(I=A)}}catch(C){console.error("Error fetching tab title:",C)}m(sr({id:u,path:f.pathname,rootDb:e,title:I}))}})(),b.current=null,x){const g=setTimeout(()=>{m(Yo())},2e3);return()=>clearTimeout(g)}},[u,f.pathname,e,p,t?.uid,x,h,m]);const N=r.useCallback(()=>{const w=n.current;if(w){const g=w.scrollWidth>w.clientWidth,I=w.scrollLeft===0,C=w.scrollLeft+w.clientWidth>=w.scrollWidth-1;o(A=>{const S={left:g&&!I,right:g&&!C};return A.left===S.left&&A.right===S.right?A:S})}},[]);r.useEffect(()=>{const w=()=>{const g=window.pageYOffset||document.documentElement.scrollTop;g>c.current?l(!1):l(!0),c.current=g<=0?0:g};return window.addEventListener("scroll",w),()=>{window.removeEventListener("scroll",w)}},[]);const E=w=>{n.current?.scrollBy({left:w==="left"?-200:200,behavior:"smooth"})},M=r.useCallback(w=>{const g=h.findIndex(I=>I.id===w);if(g!==-1&&(m(as({tabId:w,rootDb:e})),m({type:"tabs/setDeleteId",payload:w}),p===w))if(h.length>1){const I=g>0?g-1:0,C=h[I===g?I+1:I];d(C.path)}else d(e==="memo"?"/m":"/home")},[h,p,m,d,e]),v=r.useCallback(w=>{const g=w.split("/").pop();b.current=g,m(wn({activeTabId:g,rootDb:e})),requestAnimationFrame(()=>{d(w)})},[m,d]),R=r.useCallback(()=>{m(Ko({rootDb:e}))},[m]),T=r.useCallback(w=>{const{active:g,over:I}=w;if(I&&g.id!==I.id){const C=h.findIndex(S=>S.id===g.id),A=h.findIndex(S=>S.id===I.id);m(Go({tabs:qo(h,C,A),rootDb:e}))}},[h,m]);return r.useEffect(()=>{N();const w=n.current;return w?.addEventListener("scroll",N),window.addEventListener("resize",N),()=>{w?.removeEventListener("scroll",N),window.removeEventListener("resize",N)}},[N,h.length]),i.jsx("div",{className:`MemoTabs sticky ${a?"top-18":"top-1"} z-1000 rounded-t-md bg-gray-50/70 dark:bg-zinc-800/70 backdrop-blur-sm shadow-sm`,children:i.jsxs("div",{className:"relative flex items-center justify-between ",children:[s.left&&i.jsx("button",{onClick:()=>E("left"),className:"absolute left-0 z-10 p-1 border border-gray-200 dark:border-gray-700 text-gray-500 dark:text-gray-400 bg-white dark:bg-zinc-900 dark:hover:!text-white hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full group",children:i.jsx(Jo,{className:"w-5 h-5 fill-current"})}),i.jsx(Qo,{id:"memo-tabs",onDragEnd:T,children:i.jsx("div",{ref:n,className:"MemoTabs relative flex items-center overflow-x-scroll scrollbar-hide whitespace-nowrap",children:i.jsx(er,{items:h.map(w=>w.id),strategy:tr,children:i.jsx(ft,{children:h.map(w=>i.jsx(ee.div,{layout:!0,initial:{opacity:0,scale:.8},transition:{type:"spring",stiffness:350,damping:30},animate:{opacity:1,scale:1},exit:{opacity:0,width:0,paddingLeft:0,paddingRight:0,transition:{duration:.3}},children:i.jsx(pi,{tabInfo:w,onClickTab:()=>v(w.path),handleCloseTab:M,isActive:w.id===p})},w.id))})})})}),i.jsxs("div",{className:"flex items-center",children:[s.right&&i.jsx("button",{onClick:()=>E("right"),className:"z-10 p-1 border border-gray-200 dark:border-gray-700 text-gray-500 dark:text-gray-400 bg-white dark:bg-zinc-900 dark:hover:!text-white hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full group",children:i.jsx(nr,{className:"w-5 h-5 fill-current"})}),h.length>0&&i.jsx("button",{onClick:R,className:"ml-2 mr-2 p-1.5 text-gray-500 dark:text-gray-400 hover:text-gray-800 dark:hover:text-white hover:bg-gray-200 dark:hover:bg-gray-700 rounded-md",title:"Close all tabs",children:i.jsx(pt,{className:"w-4 h-4"})})]})]})})}),vi=()=>{const{user:e}=Ge(),t=fe(or),n=ht(),s=je(),{isExpanded:o}=rr(),{rootDb:a,memoId:l}=r.useMemo(()=>{const c=n.pathname;let d;c.startsWith("/m")?d="memo":c.startsWith("/home")&&(d="home");const f=c.split("/").pop()||"";return{rootDb:d,memoId:f}},[n.pathname]);return r.useEffect(()=>{(n.pathname==="/home"||n.pathname==="/m")&&s({type:"tabs/setActiveTab",payload:{activeTabId:null,rootDb:a}})},[n.pathname,s]),i.jsxs(i.Fragment,{children:[t&&i.jsx(gi,{rootDb:a,user:e}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("main",{className:"flex-1 max-w-screen-lg",children:[i.jsx(fi,{rootDb:a,user:e,memoId:l}),n.pathname==="/m"&&i.jsx(ua,{rootDb:a}),n.pathname.startsWith("/m/")&&e?.uid===lt&&i.jsx("div",{className:"block lg:hidden flex-1",children:i.jsx(_t,{type:"grid"})}),(n.pathname==="/m"||n.pathname==="/home")&&e?.uid===lt&&i.jsxs("div",{className:`grid grid-cols-1 ${o?"lg:grid-cols-2":"md:grid-cols-2"} gap-4 mt-5`,children:[i.jsx("div",{className:"block lg:hidden flex-1",children:i.jsx(_t,{})}),i.jsx(ca,{}),i.jsx(ia,{rootDb:a})]})]}),i.jsx("aside",{className:"hidden lg:block flex-1 min-w-45 max-w-64 pt-3",children:(a==="memo"||a==="sheet")&&i.jsx(_t,{})})]})]})},Ci=Object.freeze(Object.defineProperty({__proto__:null,default:vi},Symbol.toStringTag,{value:"Module"}));export{Ci as M,li as T,Qr as a,Gr as u};
