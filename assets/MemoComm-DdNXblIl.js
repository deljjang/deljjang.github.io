const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MemoSheetGrid-Dz1DOuYA.js","assets/index-Brzv_azi.js","assets/router-v4BRDFYV.js","assets/vendor-CCYiWZgt.js","assets/index-CmLqFGzM.css","assets/App-Cv3KQKEX.js","assets/App-C0oX4rhs.css","assets/MemoDetailEdit-DdwORybo.js","assets/HtmlBadge-CJuGsc6d.js","assets/TwCheckbox-CeQymdzg.js","assets/TwTextArea-Ba148dDv.js","assets/IpInfo-Cp8KfbXV.js","assets/angle-right-BCeYVboh.js","assets/MemoDetailEdit-CXguKeju.css","assets/MemoDetailUtil-CVqi9gq9.js"])))=>i.map(i=>d[i]);
import{j as t,_ as oe}from"./index-Brzv_azi.js";import{aI as st,aJ as at,aK as K,aL as ge,aM as We,aN as He,aO as nt,aP as rt,aQ as ot,aR as it,aS as lt,aT as ct,aU as Pe,aV as dt,aW as ut,aX as ve,aY as Z,aZ as Ve,a_ as ke,a$ as Fe,b0 as ue,b1 as ye,a1 as mt,a3 as ht,a9 as ft,b2 as pt,a6 as xt,b as W,b3 as ie,ay as le,i as V,c as Q,e as R,b4 as gt,b5 as Ne,q as g,b6 as vt,b7 as Ye,aC as he,b8 as yt,ad as Xe,b9 as bt,h as D,ba as jt,bb as wt,bc as kt,bd as Nt,be as Ct,bf as St,bg as Lt,bh as Mt,O as Tt,bi as fe,p as E,m as pe,bj as Et,K as Ce,X as Se,H as $t,ae as zt,af as _t,bk as Ot,bl as Bt,bm as It,bn as Rt,bo as At,bp as Ge,bq as Dt,br as Wt,bs as Ht,bt as Pt,bu as Vt,bv as Le,bw as Ft,bx as Yt,by as Xt,bz as Gt,bA as Kt,bB as Ut,bC as Jt,bD as qt}from"./App-Cv3KQKEX.js";import{r as c,a as ce,c as Zt,u as de,N as Me,R as ee,e as Qt,f as X}from"./router-v4BRDFYV.js";import{I as es}from"./IpInfo-Cp8KfbXV.js";import{S as Ke,a as ts,b as ss}from"./angle-right-BCeYVboh.js";const ae=new WeakMap;let ne;const Ue=(e,s,a)=>(n,r)=>r&&r[0]?r[0][e+"Size"]:at(n)&&"getBBox"in n?n.getBBox()[s]:n[a],as=Ue("inline","width","offsetWidth"),ns=Ue("block","height","offsetHeight");function rs({target:e,borderBoxSize:s}){ae.get(e)?.forEach(a=>{a(e,{get width(){return as(e,s)},get height(){return ns(e,s)}})})}function os(e){e.forEach(rs)}function is(){typeof ResizeObserver>"u"||(ne=new ResizeObserver(os))}function ls(e,s){ne||is();const a=st(e);return a.forEach(n=>{let r=ae.get(n);r||(r=new Set,ae.set(n,r)),r.add(s),ne?.observe(n)}),()=>{a.forEach(n=>{const r=ae.get(n);r?.delete(s),r?.size||ne?.unobserve(n)})}}const re=new Set;let G;function cs(){G=()=>{const e={get width(){return window.innerWidth},get height(){return window.innerHeight}};re.forEach(s=>s(e))},window.addEventListener("resize",G)}function ds(e){return re.add(e),G||cs(),()=>{re.delete(e),!re.size&&typeof G=="function"&&(window.removeEventListener("resize",G),G=void 0)}}function us(e,s){return typeof e=="function"?ds(e):ls(e,s)}function Je(e,s){let a;const n=()=>{const{currentTime:r}=s,i=(r===null?0:r.value)/100;a!==i&&e(i),a=i};return K.preUpdate(n,!0),()=>ge(n)}function ms(...e){const s=!Array.isArray(e[0]),a=s?0:-1,n=e[0+a],r=e[1+a],o=e[2+a],i=e[3+a],l=We(r,o,i);return s?l(n):l}function hs(e,s,a){const n=e.get();let r=null,o=n,i;const l=typeof n=="string"?n.replace(/[\d.-]/g,""):void 0,u=()=>{r&&(r.stop(),r=null)},m=()=>{u(),r=new nt({keyframes:[Ee(e.get()),Ee(o)],velocity:e.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...a,onUpdate:i})};if(e.attach((d,h)=>{o=d,i=p=>h(Te(p,l)),K.postRender(m)},u),He(s)){const d=s.on("change",p=>e.set(Te(p,l))),h=e.on("destroy",d);return()=>{d(),h()}}return u}function Te(e,s){return s?e+s:e}function Ee(e){return typeof e=="number"?e:parseFloat(e)}const fs=50,$e=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),ps=()=>({time:0,x:$e(),y:$e()}),xs={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function ze(e,s,a,n){const r=a[s],{length:o,position:i}=xs[s],l=r.current,u=a.time;r.current=e[`scroll${i}`],r.scrollLength=e[`scroll${o}`]-e[`client${o}`],r.offset.length=0,r.offset[0]=0,r.offset[1]=r.scrollLength,r.progress=rt(0,r.scrollLength,r.current);const m=n-u;r.velocity=m>fs?0:ot(r.current-l,m)}function gs(e,s,a){ze(e,"x",s,a),ze(e,"y",s,a),s.time=a}function vs(e,s){const a={x:0,y:0};let n=e;for(;n&&n!==s;)if(it(n))a.x+=n.offsetLeft,a.y+=n.offsetTop,n=n.offsetParent;else if(n.tagName==="svg"){const r=n.getBoundingClientRect();n=n.parentElement;const o=n.getBoundingClientRect();a.x+=r.left-o.left,a.y+=r.top-o.top}else if(n instanceof SVGGraphicsElement){const{x:r,y:o}=n.getBBox();a.x+=r,a.y+=o;let i=null,l=n.parentNode;for(;!i;)l.tagName==="svg"&&(i=l),l=n.parentNode;n=i}else break;return a}const xe={start:0,center:.5,end:1};function _e(e,s,a=0){let n=0;if(e in xe&&(e=xe[e]),typeof e=="string"){const r=parseFloat(e);e.endsWith("px")?n=r:e.endsWith("%")?e=r/100:e.endsWith("vw")?n=r/100*document.documentElement.clientWidth:e.endsWith("vh")?n=r/100*document.documentElement.clientHeight:e=r}return typeof e=="number"&&(n=s*e),a+n}const ys=[0,0];function bs(e,s,a,n){let r=Array.isArray(e)?e:ys,o=0,i=0;return typeof e=="number"?r=[e,e]:typeof e=="string"&&(e=e.trim(),e.includes(" ")?r=e.split(" "):r=[e,xe[e]?e:"0"]),o=_e(r[0],a,n),i=_e(r[1],s),o-i}const js={All:[[0,0],[1,1]]},ws={x:0,y:0};function ks(e){return"getBBox"in e&&e.tagName!=="svg"?e.getBBox():{width:e.clientWidth,height:e.clientHeight}}function Ns(e,s,a){const{offset:n=js.All}=a,{target:r=e,axis:o="y"}=a,i=o==="y"?"height":"width",l=r!==e?vs(r,e):ws,u=r===e?{width:e.scrollWidth,height:e.scrollHeight}:ks(r),m={width:e.clientWidth,height:e.clientHeight};s[o].offset.length=0;let d=!s[o].interpolate;const h=n.length;for(let p=0;p<h;p++){const j=bs(n[p],m[i],u[i],l[o]);!d&&j!==s[o].interpolatorOffsets[p]&&(d=!0),s[o].offset[p]=j}d&&(s[o].interpolate=We(s[o].offset,lt(n),{clamp:!1}),s[o].interpolatorOffsets=[...s[o].offset]),s[o].progress=ct(0,1,s[o].interpolate(s[o].current))}function Cs(e,s=e,a){if(a.x.targetOffset=0,a.y.targetOffset=0,s!==e){let n=s;for(;n&&n!==e;)a.x.targetOffset+=n.offsetLeft,a.y.targetOffset+=n.offsetTop,n=n.offsetParent}a.x.targetLength=s===e?s.scrollWidth:s.clientWidth,a.y.targetLength=s===e?s.scrollHeight:s.clientHeight,a.x.containerLength=e.clientWidth,a.y.containerLength=e.clientHeight}function Ss(e,s,a,n={}){return{measure:r=>{Cs(e,n.target,a),gs(e,a,r),(n.offset||n.target)&&Ns(e,a,n)},notify:()=>s(a)}}const q=new WeakMap,Oe=new WeakMap,me=new WeakMap,Be=e=>e===document.scrollingElement?window:e;function qe(e,{container:s=document.scrollingElement,...a}={}){if(!s)return Pe;let n=me.get(s);n||(n=new Set,me.set(s,n));const r=ps(),o=Ss(s,e,r,a);if(n.add(o),!q.has(s)){const l=()=>{for(const h of n)h.measure(dt.timestamp);K.preUpdate(u)},u=()=>{for(const h of n)h.notify()},m=()=>K.read(l);q.set(s,m);const d=Be(s);window.addEventListener("resize",m,{passive:!0}),s!==document.documentElement&&Oe.set(s,us(s,m)),d.addEventListener("scroll",m,{passive:!0}),m()}const i=q.get(s);return K.read(i,!1,!0),()=>{ge(i);const l=me.get(s);if(!l||(l.delete(o),l.size))return;const u=q.get(s);q.delete(s),u&&(Be(s).removeEventListener("scroll",u),Oe.get(s)?.(),window.removeEventListener("resize",u))}}const Ie=new Map;function Ls(e){const s={value:0},a=qe(n=>{s.value=n[e.axis].progress*100},e);return{currentTime:s,cancel:a}}function Ze({source:e,container:s,...a}){const{axis:n}=a;e&&(s=e);const r=Ie.get(s)??new Map;Ie.set(s,r);const o=a.target??"self",i=r.get(o)??{},l=n+(a.offset??[]).join(",");return i[l]||(i[l]=!a.target&&ut()?new ScrollTimeline({source:s,axis:n}):Ls({container:s,...a})),i[l]}function Ms(e,s){const a=Ze(s);return e.attachTimeline({timeline:s.target?void 0:a,observe:n=>(n.pause(),Je(r=>{n.time=n.iterationDuration*r},a))})}function Ts(e){return e.length===2}function Es(e,s){return Ts(e)?qe(a=>{e(a[s.axis].progress,a)},s):Je(e,Ze(s))}function $s(e,{axis:s="y",container:a=document.scrollingElement,...n}={}){if(!a)return Pe;const r={axis:s,container:a,...n};return typeof e=="function"?Es(e,r):Ms(e,r)}const zs=()=>({scrollX:Z(0),scrollY:Z(0),scrollXProgress:Z(0),scrollYProgress:Z(0)}),se=e=>e?!e.current:!1;function _s({container:e,target:s,...a}={}){const n=ve(zs),r=c.useRef(null),o=c.useRef(!1),i=c.useCallback(()=>(r.current=$s((l,{x:u,y:m})=>{n.scrollX.set(u.current),n.scrollXProgress.set(u.progress),n.scrollY.set(m.current),n.scrollYProgress.set(m.progress)},{...a,container:e?.current||void 0,target:s?.current||void 0}),()=>{r.current?.()}),[e,s,JSON.stringify(a.offset)]);return Ve(()=>{if(o.current=!1,se(e)||se(s)){o.current=!0;return}else return i()},[i]),c.useEffect(()=>{if(o.current)return ke(!se(e)),ke(!se(s)),i()},[i]),n}function Qe(e){const s=ve(()=>Z(e)),{isStatic:a}=c.useContext(Fe);if(a){const[,n]=c.useState(e);c.useEffect(()=>s.on("change",n),[])}return s}function et(e,s){const a=Qe(s()),n=()=>a.set(s());return n(),Ve(()=>{const r=()=>K.preRender(n,!1,!0),o=e.map(i=>i.on("change",r));return()=>{o.forEach(i=>i()),ge(n)}}),a}function Os(e){ue.current=[],e();const s=et(ue.current,e);return ue.current=void 0,s}function Bs(e,s,a,n){if(typeof e=="function")return Os(e);const r=ms(s,a,n);return Array.isArray(e)?Re(e,r):Re([e],([o])=>r(o))}function Re(e,s){const a=ve(()=>[]);return et(e,()=>{a.length=0;const n=e.length;for(let r=0;r<n;r++)a[r]=e[r].get();return s(a)})}function Is(e,s={}){const{isStatic:a}=c.useContext(Fe),n=()=>He(e)?e.get():e;if(a)return Bs(n);const r=Qe(n());return c.useInsertionEffect(()=>hs(r,e,s),[r,JSON.stringify(s)]),r}const Rs=({className:e})=>t.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),As=({className:e})=>t.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})});async function Ds(e,s,a=""){if(s==null||s==="")return"";if(e==="home"){const m=await ye("home/tree");if(m!=null)try{return JSON.parse(m)}catch(d){console.error("Error parsing JSON data:",d)}}const n=e==="home"?"home_txt":a===""?`${e}_tree/${s}`:`${e}_txt/${s}`,r=mt(ht(ft,n)),o=await pt(r);if(!o.exists()||!o.exists())return null;const i=o.val(),l=[{text:"1.React",id:"react",key:"react",parent:"root"},{text:"2.CSS",id:"css",key:"css",parent:"root"},{text:"3.Android",id:"android",key:"android",parent:"root"},{text:"4.Java",id:"java",key:"java",parent:"root"},{text:"5.이미지",id:"image",key:"image",parent:"root"},{text:"6.Etc",id:"etc",key:"etc",parent:"root"}],u=[];e==="home"&&u.push(...l);for(const m in i){const d=i[m];d.id=m;const h={id:m,key:m,text:d.title,parent:e==="home"?d.gbn:d.parent};e==="memo"?(h.icon=d.bm==="Y"?t.jsx(Rs,{className:"w-4 h-4 text-red-500"}):d.icon==="Y"?t.jsx(As,{className:"w-4 h-4 text-green-500"}):null,h.droppable=!0):h.droppable=!1,!((a===""||a===void 0||a===null)&&(h.parent===void 0||h.parent===null||h.parent===""))&&(e==="home"||a===""||a===void 0||a===null?u.push(h):(d.id=m,(d.memo+"").toLowerCase().indexOf(a.toLowerCase())>-1&&(h.parent="root",h.droppable=!1,u.push(h))))}return u.sort((m,d)=>m.title>d.title?1:-1),e==="home"&&xt("home/tree",JSON.stringify(u)),u}const Ws=({isOpen:e,onClose:s,data:a})=>{const{t:n}=W();if(!e||!a)return null;const{label:r,value:o,items:i}=a;return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:s,children:t.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-lg shadow-xl w-11/12 md:w-1/2 lg:w-1/3 max-h-[80vh] flex flex-col",onClick:l=>l.stopPropagation(),children:[t.jsxs("div",{className:"flex justify-between items-center border-b p-4 dark:border-zinc-600",children:[t.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:r}),t.jsx("button",{onClick:s,className:"text-gray-400 hover:bg-gray-200 dark:hover:bg-zinc-700 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center",children:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),t.jsxs("div",{className:"p-4 overflow-y-auto",children:[t.jsxs("p",{className:"text-base leading-relaxed text-gray-600 dark:text-gray-300 mb-4",children:[n("count","개수"),": ",t.jsx("span",{className:"font-bold",children:o.toLocaleString()})]}),t.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:n("main_list","주요 목록")}),t.jsx("ul",{className:"list-disc list-inside bg-gray-50 dark:bg-zinc-700 p-3 rounded-md",children:i&&i.length>0?i.map((l,u)=>t.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:l.text},u)):t.jsx("li",{className:"text-gray-500",children:n("no_results","결과 없음")})})]})]})})};function Hs({series:e,labels:s,onDataPointClick:a}){const[n,r]=c.useState({labels:[],colors:ie,dataLabels:{style:{colors:["#333"]}},responsive:[{breakpoint:480,options:{chart:{width:"100%"},legend:{position:"bottom"}}}]});return c.useEffect(()=>{r(o=>({...o,labels:s}))},[s]),t.jsx("div",{className:"bg-amber-50 dark:bg-gray-900 shadow-md rounded-sm",children:e&&e.length>0?t.jsx(le,{type:"donut",series:e,options:n}):t.jsx("div",{className:"text-center text-gray-500",children:"표시할 데이터가 없습니다."})})}function Ps({series:e,labels:s,onDataPointClick:a}){const[n,r]=c.useState({chart:{type:"radar",toolbar:{show:!1},events:{dataPointSelection:(o,i,l)=>{a&&a(l.dataPointIndex)}}},colors:ie,plotOptions:{radar:{polygons:{distributed:!0}}},dataLabels:{enabled:!1},xaxis:{categories:[]},legend:{show:!0},tooltip:{theme:"dark",style:{fontSize:"12px"},y:{formatter:o=>o.toLocaleString()}}});return c.useEffect(()=>{r(o=>({...o,xaxis:{...o.xaxis,categories:s}}))},[s]),t.jsx("div",{className:"bg-white dark:bg-black shadow-md rounded-sm w-full h-full",children:e&&e.length>0&&e[0].data.length>0?t.jsx(le,{type:"radar",series:e,options:n}):t.jsx("div",{className:"text-center text-gray-500 py-10",children:"표시할 데이터가 없습니다."})})}function Vs({series:e,labels:s,onDataPointClick:a}){const[n,r]=c.useState({labels:[],chart:{events:{dataPointSelection:(o,i,l)=>{a&&a(l.dataPointIndex)}}},colors:ie,plotOptions:{pie:{startAngle:-90,endAngle:90,offsetY:10}},grid:{padding:{bottom:-80}},dataLabels:{style:{colors:["#333"]}},responsive:[{breakpoint:480,options:{chart:{width:"100%"},legend:{position:"bottom"}}}],tooltip:{theme:"dark",style:{fontSize:"12px"},y:{formatter:o=>o.toLocaleString()}},legend:{show:!0}});return c.useEffect(()=>{r(o=>({...o,labels:s}))},[s]),t.jsx("div",{className:"bg-amber-50 dark:bg-gray-900 shadow-md rounded-sm p-2",children:e&&e.length>0&&t.jsx(le,{type:"donut",series:e,options:n})})}function Fs({series:e,labels:s,showDownload:a=!0,onDataPointClick:n}){const[r,o]=c.useState({chart:{type:"bar",toolbar:{tools:{download:a}},events:{dataPointSelection:(i,l,u)=>{n&&n(u.dataPointIndex)}}},colors:ie,plotOptions:{bar:{borderRadius:4,horizontal:!1,distributed:!0}},dataLabels:{enabled:!1},xaxis:{categories:[]},legend:{show:!1},tooltip:{theme:"dark",style:{fontSize:"12px"},y:{formatter:i=>i.toLocaleString()}}});return c.useEffect(()=>{o(i=>({...i,xaxis:{...i.xaxis,categories:s}}))},[s]),t.jsx("div",{className:"bg-white dark:bg-black shadow-md rounded-sm w-full p-2",children:e&&e.length>0&&e[0].data&&e[0].data.length>0?t.jsx(le,{type:"bar",series:e,options:r,height:"350"}):t.jsx("div",{className:"text-center text-gray-500 py-10",children:"표시할 데이터가 없습니다."})})}const Ys=({rootDb:e})=>{const{user:s}=V(),{t:a}=W(),n=Q(),r=R(gt(e)),[o,i]=c.useState(!0),[l,u]=c.useState("donut"),[m,d]=c.useState(!1),[h,p]=c.useState(null),[j,L]=c.useState([]),[$,z]=c.useState([]),[N,_]=c.useState({labels:[],series:[]}),S=["#6366f1","#3b82f6","#22c55e","#ef4444","#f97316","#eab308","#8b5cf6","#d946ef","#14b8a6","#a855f7"],F=[{value:"donut",label:a("donut_chart","도넛 차트")},{value:"bar",label:a("bar_chart","수평 막대 차트")},{value:"radar",label:a("radar_chart","레이더 차트")},{value:"verticalBar",label:a("vertical_bar_chart","수직 막대 차트")},{value:"semiDonut",label:a("semi_donut_chart","반원 도넛 차트")}],M=c.useCallback(y=>{let T=[];if(L(y||[]),y&&y.length>0){const U=y.filter(w=>w.parent==="root").sort((w,O)=>w.text.localeCompare(O.text)),H=(w,O)=>{const P=O.filter(B=>B.parent===w);let I=P.length;for(const B of P)I+=H(B.id,O);return I};T=U.map(w=>({node:w,count:H(w.id,y)})).filter(w=>w.count>=10);const te=T.map(w=>w.node.text),J=T.map(w=>w.count),Y={labels:te,series:J};z(T),_(Y),n(Ne({rootDb:e,data:Y}))}else _({labels:[],series:[]}),n(Ne({rootDb:e,data:{labels:[],series:[]}}));i(!1)},[e,n]),f=c.useCallback(async()=>{i(!0);const y=await Ds(e==="sheet"?"memo":e,s?.uid);M(y)},[e,s?.uid,M]);c.useEffect(()=>{s?.uid&&(r&&r.labels&&r.labels.length>0?(_(r),i(!1)):f())},[e,s?.uid,r,f]);const x=y=>{if(y<0||y>=$.length)return;const T=$[y].node,U=T.text,H=(w,O)=>{const P=O.filter(B=>B.parent===w);let I=[...P];return P.forEach(B=>{I=[...I,...H(B.id,O)]}),I},J=H(T.id,j).length,Y=j.filter(w=>w.parent===T.id);p({label:U,value:J,items:Y}),d(!0)},b=()=>t.jsx("div",{className:"w-full h-full flex justify-center items-center p-4",children:t.jsxs("div",{className:"w-full h-full bg-gray-200 dark:bg-zinc-800 rounded-md animate-pulse relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-1/4 left-1/4 w-1/2 h-1/2 bg-gray-300 dark:bg-zinc-700 rounded-full opacity-50"}),t.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-1/3 h-1/3 bg-gray-300 dark:bg-zinc-700 rounded-lg opacity-50"})]})}),k=()=>{f()},C=t.jsxs("div",{className:`HomeChartForm ${g.between}`,children:[t.jsx("div",{children:a("count_stats")}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("select",{value:l,onChange:y=>u(y.target.value),className:"rounded-md border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-200 focus:ring-indigo-500 focus:border-indigo-500 text-sm","aria-label":a("select_chart_type","차트 종류 선택"),children:F.map(y=>t.jsx("option",{value:y.value,children:y.label},y.value))}),t.jsx("button",{onClick:k,className:"rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors ","aria-label":a("reload_chart"),children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-600 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h5M20 20v-5h-5M4 4l1.5 1.5A9 9 0 0121.5 12M20 20l-1.5-1.5A9 9 0 012.5 12"})})})]})]});return t.jsxs("div",{className:`w-full justify-center ${g.card} `,children:[t.jsx("div",{className:"flex pl-6 py-4",children:t.jsx(vt,{title:C})}),o?t.jsx(b,{}):t.jsxs("div",{className:"w-full justify-center items-center",children:[l==="donut"&&t.jsx(Hs,{series:N.series,labels:N.labels,colors:S,onDataPointClick:x}),l==="bar"&&t.jsx(Ye,{series:[{name:a("count"),data:N.series}],labels:N.labels,colors:S,onDataPointClick:x}),l==="radar"&&t.jsx(Ps,{series:[{name:a("count"),data:N.series}],labels:N.labels,colors:S,onDataPointClick:x}),l==="verticalBar"&&t.jsx(Fs,{series:[{name:a("count"),data:N.series}],labels:N.labels,colors:S,onDataPointClick:x}),l==="semiDonut"&&t.jsx(Vs,{series:N.series,labels:N.labels,colors:S,onDataPointClick:x})]}),t.jsx(Ws,{isOpen:m,onClose:()=>d(!1),data:h})]})},Xs=()=>{const[e,s]=c.useState({labels:[],series:[]}),[a,n]=c.useState(null),[r,o]=c.useState({isOpen:!1}),{t:i}=W();return c.useEffect(()=>{(async()=>{const u=await ye("home_cnt");if(u){n(u);const d=Object.keys(u).sort().reverse().slice(0,10),h=d.map(j=>j.split("-").slice(1).join("-")),p=d.map(j=>Object.keys(u[j]).length);s({labels:h,series:p})}})()},[]),t.jsxs("div",{className:`w-full justify-center ${g.card} `,children:[t.jsx("div",{className:"flex pl-6 py-4",children:i("visitors.count")}),t.jsx(Ye,{series:[{name:i("count"),data:e.series}],labels:e.labels,showDownload:!1,onDataPointSelection:(l,u,m)=>{const d=m.dataPointIndex;if(a&&d>-1){const p=Object.keys(a).sort().reverse()[d],j=a[p],L=Object.keys(j).join("<br/>");console.log("filteredNodes=",L),o({isOpen:!0,title:`${p} ${i("visitors.count")}`,message:L,onClose:()=>o({isOpen:!1})})}}}),t.jsx(he,{...r})]})},Gs=({item:e})=>{const{user:s}=V(),a=ce();return t.jsx("div",{onClick:()=>a(`/m/${e.key}`),className:`${g.roundedXl} border border-gray-200 
      bg-white dark:border-gray-800 dark:bg-white/[0.03] 
      overflow-hidden cursor-pointer hover:shadow-md transition-shadow h-full flex flex-col`,children:t.jsx("div",{className:"px-4 py-3",children:t.jsx("h3",{className:"text-base font-medium text-gray-800 dark:text-white/90 truncate",children:e.title})})})};function Ks(){const{user:e}=V(),{t:s}=W(),a=Q(),{items:n,status:r}=R(l=>l.bookmark),o=r==="loading";c.useEffect(()=>{e&&a(yt(e.uid))},[e,a]);const i="grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 xl:grid-cols-4";return e===null?t.jsx(t.Fragment,{}):t.jsx(Xe,{title:s("main_list"),children:t.jsx("div",{className:"p-2",children:o?t.jsx(bt,{}):t.jsx("div",{className:`grid ${i} gap-3`,children:n?.map(l=>t.jsx(Gs,{item:l},l.id))})})})}const Us=({rootDb:e})=>{const{user:s}=V(),{t:a}=W(),n=a(e==="memo"?"appMemo":"home_mng"),r=t.jsx("div",{className:`displayTitle text-center  ${g.text3Xl} ${g.textIndigo}`,children:n});return t.jsx(t.Fragment,{children:t.jsx(Xe,{title:r,className:"MemoMain mt-3 mb-5",children:t.jsxs("div",{className:"grid gird-cols-1 md:grid-cols-5 items-center gap-3",children:[s===null?t.jsx("p",{className:`${g.textRed500} ${g.textLgFontSemiboldLeft} ${g.mdColSpan3}`,children:a("login_used")}):t.jsx("p",{className:`${g.textGray600DarkZinc400} text-left ${g.mdColSpan3}`,dangerouslySetInnerHTML:{__html:a("memo_main_guide").replace(`
`,"<br/>")}}),t.jsx("div",{className:`w-full ${g.flexCenter} md:col-span-2`,children:t.jsx(es,{})})]})})})},Ae=e=>{const{t:s}=W(),a=async()=>{try{await jt.purge(),alert("Redux 상태가 초기화되었습니다.")}catch(n){console.error("Redux 상태 초기화 실패:",n),alert("상태 초기화 중 오류가 발생했습니다.")}};return t.jsxs("div",{className:"mx-auto grid w-full max-w-lg grid-cols-6 items-center justify-center gap-2 px-4 py-2 text-center",children:[e.master&&t.jsx(D,{size:"sm",variant:"outlined",color:"brand",onClick:e.onUtil,className:"gap-1.5",children:t.jsxs("div",{className:"flex items-center justify-center",children:[t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),t.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),t.jsx("span",{className:"ml-2 whitespace-nowrap",children:s("util")})]})}),t.jsx(D,{size:"sm",variant:"outlined",color:"brand",onClick:e.onEdit,className:"gap-1.5",children:t.jsxs("div",{className:"flex items-center justify-center",children:[t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),t.jsx("path",{d:"m15 5 4 4"})]}),t.jsx("span",{className:"ml-2 whitespace-nowrap",children:s("edit")})]})}),t.jsx(D,{size:"sm",variant:"outlined",color:"brand",onClick:e.onNewMemo,className:"gap-1.5",children:t.jsxs("div",{className:"flex items-center justify-center",children:[t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M5 12h14"}),t.jsx("path",{d:"M12 5v14"})]}),t.jsx("span",{className:"ml-2 whitespace-nowrap",children:s("new")})]})}),t.jsx(D,{size:"sm",variant:"outlined",color:"error",onClick:e.onDelete,className:"gap-1.5",children:t.jsxs("div",{className:"flex items-center justify-center",children:[t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M3 6h18"}),t.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),t.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),t.jsx("span",{className:"ml-2 whitespace-nowrap",children:s("delete")})]})}),e.onCopy&&t.jsx(D,{size:"sm",variant:"outlined",color:"secondary",onClick:e.onCopy,className:"gap-1.5",children:t.jsxs("div",{className:"flex items-center justify-center",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),t.jsx("span",{className:"ml-2 whitespace-nowrap",children:s("public")})]})}),e.master&&t.jsx(D,{size:"sm",variant:"outlined",color:"danger",onClick:a,className:"gap-1.5",children:t.jsxs("div",{className:"flex items-center justify-center",children:[t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"size-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("polyline",{points:"23 4 23 10 17 10"}),t.jsx("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]}),t.jsx("span",{className:"ml-2 whitespace-nowrap",children:s("reset")})]})})]})},Js=Ct("memo/deleteMemo",async({rootDb:e,userId:s,memoId:a},{rejectWithValue:n})=>{try{const r=e==="memo"?`${e}_txt/${s}/${a}`:`${e}_txt/${a}`,o=e==="memo"?`${e}_tree/${s}/${a}`:`${e}/${a}`;return await Lt(r,o),{memoId:a}}catch(r){return console.error("삭제 중 오류 발생:",r),n(r.message)}});function qs(e,s,a,n){const r=Q(),o=R(wt(a)),i=R(kt(a)),l=i==="loading";return c.useEffect(()=>{s?.uid&&a&&a!=="insert"&&i!=="succeeded"&&r(Nt({rootDb:e,userId:s.uid,memoId:a}))},[r,e,s?.uid,a,i]),{memoDetailData:o||{},isLoading:l,onBookmark:()=>{if(!o)return;const m=o.bookmark==="Y"?"N":"Y";r(St({rootDb:e,userId:s.uid,memoId:a,newBookmarkState:m})).unwrap().then(()=>{r(m==="Y"?{type:"bookmark/addBookmarkItem",payload:{...o,id:a,key:a,text:o.title}}:{type:"bookmark/removeBookmarkItem",payload:a})})}}}const Zs=({rootDb:e,searchWord:s})=>{const{user:a}=V(),{memoId:n}=Zt(),r=Q(),{memoDetailData:o,isLoading:i,onBookmark:l}=qs(e,a,n),[u,m]=c.useState(!1),{alertInfo:d,setAlertInfo:h,resetAlertInfo:p}=Mt(),[j,L]=c.useState(!1),[$,z]=c.useState(""),[N,_]=c.useState(!1),[S,F]=c.useState(""),[M,f]=c.useState(!1),{t:x}=W(),{scrollYProgress:b}=_s(),k=Is(b,{stiffness:100,damping:30,restDelta:.001}),C=ce(),T=de()?.state?.fullIndex,U=R(v=>v.treeData.data),H=async()=>{if(!a||!n||e!=="memo"){h({isOpen:!0,title:x("error"),message:"Only private memos can be copied.",color:"error",onConfirm:p,onClose:p});return}try{await r(At({userId:a.uid,memoId:n,memoDetailData:o})).unwrap(),h({isOpen:!0,title:x("complete"),message:x("copy_completed"),color:"success",onConfirm:p,onClose:p})}catch(v){console.error("Copy failed:",v);const A=`${x("copy_failed")} ${v?`: ${v}`:""}`;h({isOpen:!0,title:x("error"),message:A,color:"error",onConfirm:p,onClose:p})}},te=()=>{r(It({rootDb:e,memoId:n,newMemoContent:$})).unwrap().then(()=>{L(!1)}).catch(v=>{console.error("메모 저장 중 오류 발생:",v)})},J=()=>{z(o?.memo||""),L(!0)},Y=()=>{F(o?.title||""),_(!0)},w=v=>{F(v.target.value)},O=()=>{r(Ot({rootDb:e,userId:a.uid,memoId:n,newTitle:S})).unwrap().then(()=>{_(!1),r({type:"tabs/updateTabTitle",payload:{id:n,title:S}}),r({type:"bookmark/updateBookmarkTitle",payload:{id:n,title:S}}),r(Bt({id:n,newTitle:S}))}).catch(v=>{console.error("제목 업데이트 중 오류 발생:",v),_(!1)})},P=v=>{v.key==="Enter"?O():v.key==="Escape"&&_(!1)},I=()=>{const v=`/${e==="memo"?"m":e}/edit/${n}`;C(v,{state:{fullIndex:T}})},B=()=>{const v=`/${e==="memo"?"m":e}/util/${n}`;C(v,{state:{fullIndex:T}})},be=()=>{const v=`/${e==="memo"?"m":e}/insert/${n}`;C(v,{state:{fullIndex:T}})},je=()=>{m(!0)},we=()=>{H()},tt=async()=>{m(!1);try{r({type:"tabs/setDeleteId",payload:n}),r({type:"tabs/removeTab",payload:n}),C(`/${e==="memo"?"m":e}`),await r(Js({rootDb:e,userId:a.uid,memoId:n})).unwrap(),e==="memo"&&await r(Rt({userId:a.uid,nodeId:n,currentTreeData:U})).unwrap()}catch(v){console.error("삭제 중 오류 발생:",v)}};return c.useEffect(()=>{function v(){const A=o.scrollY?o.scrollY:0;window.scrollTo({top:A})}o&&o.memo!==null&&(v(),o.image&&o.image.map((A,ia)=>A),Tt({title:o.title,description:""}))},[o]),n===""||a===void 0?null:i?t.jsx(fe,{}):o?t.jsxs("div",{className:"MemoDetail py-4 relative rounded-t-lg",children:[t.jsx(E.div,{className:`progress-bar sticky ${M?"top-28":"top-16"} z-10`,style:{scaleX:k}}),t.jsxs("div",{className:"MemoDetail_body overflow-hidden ",children:[t.jsxs("div",{className:`sticky top-0 z-20 ${g.card} backdrop-blur-sm`,children:[t.jsxs("div",{className:"p-3 sm:p-4",children:[t.jsxs("div",{className:g.between,children:[t.jsxs("p",{className:`${g.truncate} ${g.textXs} ${g.textGray500DarkZinc400}`,children:[t.jsx(Me,{to:e==="memo"?"/m":"/home",className:"hover:!text-gray-900 dark:hover:!text-white",children:e==="memo"?"MEMO":"HOME"}),o?.path?.map((v,A)=>o.path.length===A+1?` > ${v?.title}`:t.jsxs(ee.Fragment,{children:[" "," > ",t.jsx(Me,{to:e==="memo"?`/m/${v.id}`:`/home/${v.id}`,className:"hover:!text-gray-900 dark:hover:!text-white",children:v?.title})]},A))]}),t.jsx(E.button,{whileTap:{scale:.8},className:`${g.flexShrink0} ${g.roundedFull} p-2 ${g.buttonHoverGrayLight}`,"aria-label":x("bookmark"),onClick:l,children:o?.bookmark==="Y"?t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`${g.h5W5} ${g.textRed500}`,fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}):t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`${g.h5W5} ${g.textGray500}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})})]}),N?t.jsx("input",{type:"text",value:S,onChange:w,onKeyDown:P,onBlur:O,className:`w-full bg-transparent border-b-2 border-blue-500 focus:outline-none 
													${g.heading2XlBoldSm3Xl} ${g.textGray900}`,autoFocus:!0}):t.jsx("div",{onDoubleClick:Y,className:`MemoDetail_Title text-left ${g.heading2XlBoldSm3Xl} ${g.textGray900} cursor-pointer`,children:o?.title}),t.jsx("button",{onClick:()=>f(!M),className:`${g.floatingActionButton} absolute top-11 sm:top-14 right-2 sm:right-3`,children:t.jsx(E.div,{animate:{rotate:M?135:0},children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})})]}),t.jsx(E.div,{initial:!1,animate:{height:M?"auto":0,opacity:M?1:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:t.jsx("div",{className:"border-t border-gray-200 bg-gray-50 dark:border-zinc-800 dark:bg-zinc-900/50",children:t.jsx(Ae,{master:a?.uid===pe,rootDb:e,onEdit:I,onUtil:B,onNewMemo:be,onDelete:je,onCopy:e==="memo"?we:null})})})]}),o&&o.html==="sheet"&&t.jsx(Et,{rootDb:e,detailData:o}),t.jsxs("div",{className:`MemoDetail_Content ${o?.memo?.length>0?`${g.card} my-4 p-2 sm:p-4`:"p-1"}`,onDoubleClick:J,children:[j?t.jsxs("div",{className:`${g.card} p-4`,children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx(Ce,{children:x("input")}),t.jsx("textarea",{className:"w-full min-h-[100px] p-2 border rounded dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",value:$,rows:`${$.split(/\r\n|\r|\n/g).length}`,onChange:v=>z(v.target.value),autoFocus:!0})]}),t.jsxs("div",{children:[t.jsx(Ce,{children:x("preview")}),t.jsx("div",{className:"prose dark:prose-invert max-w-none p-2 border rounded min-h-[100px] overflow-y-auto dark:bg-gray-700 dark:border-gray-600",children:t.jsx(Se,{postData:$,highlightWord:""})})]})]}),t.jsxs("div",{className:"mt-2 flex justify-end gap-2",children:[t.jsx(D,{variant:"outlined",color:g.button.indigo,size:"sm",onClick:()=>L(!1),children:x("cancel")}),t.jsx(D,{color:g.button.indigo,onClick:te,children:x("save")})]})]}):o&&o.html!=="sheet"?o?.html==="N"?t.jsx(Se,{postData:o?.memo,highlightWord:s}):o?.html!=="N"&&o?.memo&&t.jsx($t,{text:o.memo}):"",t.jsx(zt,{imageList:o?.image}),!o&&t.jsx("div",{className:"flex justify-center py-12",children:t.jsx("div",{className:`${g.flexCenter} py-12`})})]})]}),t.jsx(_t,{rootDb:e,memoId:n,enableEdit:!0}),t.jsx(E.div,{initial:!1,animate:{height:M?"auto":0,opacity:M?1:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:t.jsx("div",{className:`${g.line}`,children:t.jsx(Ae,{master:a?.uid===pe,rootDb:e,onEdit:I,onUtil:B,onNewMemo:be,onDelete:je,onCopy:e==="memo"?we:null})})}),t.jsx(he,{isOpen:u,size:"sm",color:"warning",title:x("delete_confirm_title"),message:x("delete_confirm_message"),onClose:()=>m(!1),onConfirm:tt}),t.jsx(he,{...d})]}):t.jsx("div",{children:"데이터가 없습니다."})},Qs=ee.lazy(()=>oe(()=>import("./MemoSheetGrid-Dz1DOuYA.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),De=ee.lazy(()=>oe(()=>import("./MemoDetailEdit-DdwORybo.js"),__vite__mapDeps([7,1,2,3,4,5,6,8,9,10,11,12,13]))),ea=ee.lazy(()=>oe(()=>import("./MemoDetailUtil-CVqi9gq9.js"),__vite__mapDeps([14,1,2,3,4,5,6,10,8,11,12]))),ta=ee.lazy(()=>oe(()=>import("./App-Cv3KQKEX.js").then(e=>e.c2),__vite__mapDeps([5,1,2,3,4,6]))),sa=({rootDb:e,user:s,memoId:a,isLoading:n,onBookmark:r,handleCloseTab:o})=>{const i=de();return t.jsx(c.Suspense,{fallback:t.jsx(fe,{}),children:t.jsx(Ge,{children:t.jsxs(Qt,{location:i,children:[t.jsx(X,{path:"todo",element:t.jsx(E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:t.jsx(ta,{})})}),t.jsx(X,{path:"sheet/:sheetId?",element:t.jsx(E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:t.jsx(Qs,{})})}),t.jsx(X,{path:"edit/:memoId",element:t.jsx(E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:t.jsx(De,{rootDb:e,isLoading:n})})}),t.jsx(X,{path:"insert/:memoId",element:t.jsx(E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:t.jsx(De,{rootDb:e,isLoading:n})})}),t.jsx(X,{path:"util/:memoId",element:t.jsx(E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:t.jsx(ea,{rootDb:e,isLoading:n})})}),t.jsx(X,{path:":memoId",element:t.jsx(E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:n?t.jsx(fe,{}):t.jsx(Zs,{rootDb:e,onBookmark:r,onDeleteTab:()=>{o&&o(null,{id:a})}})})})]},i.pathname)})})},aa=e=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...e,children:t.jsx("path",{fillRule:"evenodd",d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zM6 20V4h7v5h5v11H6zM8 12h3v3H8v-3zm0 4h3v3H8v-3zm4-4h3v3h-3v-3zm0 4h3v3h-3v-3z",clipRule:"evenodd"})}),na=({tabInfo:e,handleCloseTab:s,isActive:a,onClickTab:n})=>{const{t:r}=W(),{user:o}=V(),{attributes:i,listeners:l,setNodeRef:u,transform:m,transition:d,isDragging:h}=Dt({id:e.id}),p={transform:Wt.Transform?.toString(m),transition:d,zIndex:h?1:"auto"};return t.jsxs("div",{ref:u,style:p,...i,...l,"data-tab-id":e.id,onClick:n,title:e.title,className:`SortableTab group relative flex flex-shrink-0 items-center pl-3 pr-2 py-1.5 text-sm rounded-t-md transition-colors duration-200 min-w-28 max-w-48 border-b-2 cursor-pointer
				${a?"bg-gray-200 dark:bg-zinc-700 border-blue-500 text-gray-800 dark:text-gray-100":"border-transparent text-secondary hover:bg-gray-200/70 dark:hover:bg-zinc-700/70"}
				${h?"opacity-50 shadow-lg":""}`,children:[e.rootDb==="memo"?t.jsx(Ht,{className:`w-5 h-5 mr-1 flex-shrink-0 transition-transform duration-200 ${a?"scale-110":""}`,fill:"currentColor"}):e.rootDb==="sheet"?t.jsx(aa,{className:`w-5 h-5 mr-1 flex-shrink-0 transition-transform duration-200 ${a?"scale-110":""}`}):null,t.jsx("span",{className:"truncate pr-1",style:{fontFamily:"sans-serif"},children:e.title||r("loading")}),t.jsx("button",{onClick:j=>{j.preventDefault(),j.stopPropagation(),s(e.id)},className:`ml-auto flex-shrink-0 p-1 rounded-full transition-opacity duration-200 opacity-0 group-hover:opacity-100
					text-gray-500 dark:text-gray-400 
					hover:bg-gray-300/50 dark:hover:bg-gray-600/50 hover:text-gray-700 dark:hover:text-white
				`,children:t.jsx(Ke,{className:"w-3 h-3"})})]})},ra=c.memo(({rootDb:e,user:s})=>{const a=c.useRef(null),[n,r]=c.useState({left:!1,right:!1}),[o,i]=c.useState(!0),l=c.useRef(0),u=ce(),m=de(),d=m.pathname.split("/").pop(),h=Q(),p=R(f=>f?.tabs?.tabs||[]),j=R(f=>f?.tabs?.activeTab||null),L=R(f=>f?.tabs?.deleteId||null),$=c.useRef(null);c.useEffect(()=>{if((async()=>{if(L!==d&&d&&d!=="insert"&&m.pathname!=="/m"&&m.pathname!=="/home")if(p.some(b=>b.id===d))j!==d&&p.some(b=>b.id===d)&&$.current===null&&h(Le(d));else{let b="Loading...";try{let k;if(e==="sheet"?k=`memo_sheet/${s?.uid}/${d}/title`:e==="memo"?k=`${e}_txt/${s?.uid}/${d}/title`:e==="home"&&(k=`${e}_txt/${d}/title`),k){const C=await ye(k);C&&(b=C)}}catch(k){console.error("Error fetching tab title:",k)}h(Jt({id:d,path:m.pathname,rootDb:e,title:b}))}})(),$.current=null,L){const x=setTimeout(()=>{h(Pt())},500);return()=>clearTimeout(x)}},[d,m.pathname,e,j,s?.uid,L,h]);const z=c.useCallback(()=>{const f=a.current;if(f){const x=f.scrollWidth>f.clientWidth,b=f.scrollLeft===0,k=f.scrollLeft+f.clientWidth>=f.scrollWidth-1;r(C=>{const y={left:x&&!b,right:x&&!k};return C.left===y.left&&C.right===y.right?C:y})}},[]);c.useEffect(()=>{const f=()=>{const x=window.pageYOffset||document.documentElement.scrollTop;x>l.current?i(!1):i(!0),l.current=x<=0?0:x};return window.addEventListener("scroll",f),()=>{window.removeEventListener("scroll",f)}},[]);const N=f=>{a.current?.scrollBy({left:f==="left"?-200:200,behavior:"smooth"})},_=c.useCallback(f=>{const x=p.findIndex(b=>b.id===f);if(x!==-1&&(h(Vt(f)),h({type:"tabs/setDeleteId",payload:f}),j===f))if(p.length>1){const b=x>0?x-1:0,k=p[b===x?b+1:b];u(k.path)}else u(e==="memo"?"/m":"/home")},[p,j,h,u,e]),S=c.useCallback(f=>{const x=f.split("/").pop();$.current=x,h(Le(x)),requestAnimationFrame(()=>{u(f)})},[h,u]),F=c.useCallback(()=>{h(Ft())},[h]),M=c.useCallback(f=>{const{active:x,over:b}=f;if(b&&x.id!==b.id){const k=p.findIndex(y=>y.id===x.id),C=p.findIndex(y=>y.id===b.id);h(Yt(Xt(p,k,C)))}},[p,h]);return c.useEffect(()=>{z();const f=a.current;return f?.addEventListener("scroll",z),window.addEventListener("resize",z),()=>{f?.removeEventListener("scroll",z),window.removeEventListener("resize",z)}},[z]),t.jsx("div",{className:`MemoTabs sticky ${o?"top-18":"top-1"} z-1000 rounded-t-md bg-gray-50/70 dark:bg-zinc-800/70 backdrop-blur-sm shadow-sm`,children:t.jsxs("div",{className:"relative flex items-center justify-between ",children:[n.left&&t.jsx("button",{onClick:()=>N("left"),className:"absolute left-0 z-10 p-1 border border-gray-200 dark:border-gray-700 text-gray-500 dark:text-gray-400 bg-white dark:bg-zinc-900 dark:hover:!text-white hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full group",children:t.jsx(ts,{className:"w-5 h-5 fill-current"})}),t.jsx(Gt,{id:"memo-tabs",onDragEnd:M,children:t.jsx("div",{ref:a,className:"MemoTabs relative flex items-center overflow-x-scroll scrollbar-hide whitespace-nowrap",children:t.jsx(Kt,{items:p.map(f=>f.id),strategy:Ut,children:t.jsx(Ge,{children:p.map(f=>t.jsx(E.div,{layout:!0,initial:{opacity:0,scale:.8},transition:{type:"spring",stiffness:350,damping:30},animate:{opacity:1,scale:1},exit:{opacity:0,width:0,paddingLeft:0,paddingRight:0,transition:{duration:.3}},children:t.jsx(na,{tabInfo:f,onClickTab:()=>S(f.path),handleCloseTab:_,isActive:f.id===d})},f.id))})})})}),t.jsxs("div",{className:"flex items-center",children:[n.right&&t.jsx("button",{onClick:()=>N("right"),className:"z-10 p-1 border border-gray-200 dark:border-gray-700 text-gray-500 dark:text-gray-400 bg-white dark:bg-zinc-900 dark:hover:!text-white hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full group",children:t.jsx(ss,{className:"w-5 h-5 fill-current"})}),p.length>0&&t.jsx("button",{onClick:F,className:"ml-2 mr-2 p-1.5 text-gray-500 dark:text-gray-400 hover:text-gray-800 dark:hover:text-white hover:bg-gray-200 dark:hover:bg-gray-700 rounded-md",title:"Close all tabs",children:t.jsx(Ke,{className:"w-4 h-4"})})]})]})})}),oa=()=>{const e=ce(),{user:s}=V(),a=R(qt),n=de(),{rootDb:r,memoId:o}=c.useMemo(()=>{const i=n.pathname,l=i.startsWith("/m/sheet")?"sheet":i.startsWith("/m")?"memo":i.startsWith("/home")?"home":i.startsWith("/bible")?"bible":"default",u=i.split("/").pop()||"";return{rootDb:l,memoId:u}},[n.pathname]);return n?.state?.reflash,c.useEffect(()=>{s===null&&n.pathname!=="/m"&&e("/m")},[s]),t.jsxs(t.Fragment,{children:[a&&t.jsx(ra,{rootDb:r,user:s,activeId:o}),t.jsx(sa,{rootDb:r,user:s,memoId:o}),n.pathname==="/m"&&t.jsx(Us,{rootDb:r}),(r==="memo"||r==="sheet")&&t.jsx(Ks,{}),(n.pathname==="/m"||n.pathname==="/home")&&s?.uid===pe&&t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-5",children:[t.jsx(Xs,{}),t.jsx(Ys,{rootDb:r})]})]})},ha=Object.freeze(Object.defineProperty({__proto__:null,default:oa},Symbol.toStringTag,{value:"Module"}));export{ha as M,Is as a,qs as b,_s as u};
